{
  "repoUrl": "https://github.com/makeplane/plane",
  "generationDate": "2025-12-10",
  "evalCommits": [
    {
      "id": "add-content-validation",
      "sha": "69d5cd183f4c42e10fd59ed6b6586af47c21720a",
      "parentSha": "b93883fc1440c58392c21f98be729c13b36e8621",
      "spec": "Implement server-side validation and a safer page description update flow as follows:\n\n1) Create content validation utilities\n- File: apps/api/plane/utils/content_validator.py\n- Add three functions with the following observable behavior:\n  - validate_binary_data(data): Accepts bytes or a base64 string. Treat empty as valid. If string, decode base64. Fail if decode fails. Enforce a 10 MB max size. Perform a lightweight content sanity check by scanning the first portion of decoded text for suspicious HTML/JS indicators. Return a tuple (is_valid: bool, error_message: Optional[str]).\n  - validate_html_content(html_content): Accepts a string. Treat empty as valid. Enforce a 10 MB max (by bytes). Reject HTML containing clearly malicious patterns (e.g., script tags, javascript: URLs, data:text/html, dangerous iframes, meta refresh, suspicious event handlers with JS). Optionally allow self-closing tags and be tolerant to minor mismatches, but reject blatantly malformed content (e.g., significantly unmatched opening vs closing tags). Return (bool, Optional[str]).\n  - validate_json_content(json_content): Accepts a dict-like object. Treat empty as valid. Enforce a 10 MB max (serialized bytes). Validate for suspicious text or attribute values recursively with a recursion depth cap (e.g., 20). If the object resembles a ProseMirror/Tiptap document (type=\"doc\" with content array), recursively scan nodes (including text nodes and attrs like href/src/action/onclick/onload/onerror) for dangerous patterns. Return (bool, Optional[str]).\n- Consolidate common dangerous patterns via module-level constants and cap recursion depth to avoid stack overflow.\n\n2) Integrate validators into serializers\n- Import the three functions into the following serializers and add validation for description fields in their validate(...) methods (or field validators where applicable):\n  - apps/api/plane/api/serializers/issue.py (IssueSerializer): Validate description (JSON), description_html (HTML), description_binary (binary). Raise serializers.ValidationError with field-specific messages when invalid.\n  - apps/api/plane/api/serializers/project.py (ProjectSerializer): Validate description content with special handling:\n    - description may be plain text; only validate as JSON if it is a dict.\n    - description_text: validate as JSON.\n    - description_html: if a dict, validate as JSON; otherwise, validate as HTML string.\n  - apps/api/plane/app/serializers/draft.py (DraftIssueCreateSerializer): Validate description (JSON), description_html (HTML), description_binary (binary).\n  - apps/api/plane/app/serializers/issue.py (IssueCreateSerializer): Validate description (JSON), description_html (HTML), description_binary (binary).\n  - apps/api/plane/app/serializers/project.py (ProjectSerializer in app layer): Same project-specific rules as api layer: description (JSON only if dict), description_text (JSON), description_html (dict->JSON else HTML string).\n  - apps/api/plane/app/serializers/workspace.py (StickySerializer): Validate description (JSON), description_html (HTML), description_binary (binary).\n- Ensure all validations return field-scoped errors using serializers.ValidationError with a dict like {\"description_html\": \"...\"}.\n\n3) Add a dedicated serializer for page description updates\n- File: apps/api/plane/app/serializers/page.py\n- Define PageBinaryUpdateSerializer with fields: description_binary (optional CharField for base64), description_html (optional CharField), description (optional JSONField).\n- Implement per-field validators:\n  - validate_description_binary: Decode base64 string to bytes; validate with validate_binary_data; if invalid, raise ValidationError with a specific error; on success, return the decoded bytes so instance.description_binary receives raw bytes.\n  - validate_description_html: Validate HTML via validate_html_content; raise field error on failure; return the original string on success.\n  - validate_description: Validate JSON via validate_json_content; raise field error on failure; return the JSON value on success.\n- Implement update(instance, validated_data): Set any provided fields on the instance (description_binary, description_html, description) and save; return the updated instance.\n- Export this serializer by adding it to apps/api/plane/app/serializers/__init__.py so it can be imported by views.\n\n4) Update the page description update endpoint to use the serializer\n- File: apps/api/plane/app/views/page/base.py (PagesDescriptionViewSet)\n- In partial_update:\n  - Replace manual base64 decoding and direct field assignment with PageBinaryUpdateSerializer(instance=page, data=request.data, partial=True).\n  - If serializer.is_valid() is True, then:\n    - If description_html is present in request, continue to enqueue page_transaction with new_value=request.data and old_value existing_instance.\n    - Save via serializer.save() to update the page instance.\n    - Trigger page_version with the updated page id and existing_instance, preserving current behavior.\n    - Return 200 with {\"message\": \"Updated successfully\"}.\n  - If not valid, return 400 with serializer.errors.\n- Ensure retrieve behavior of PagesDescriptionViewSet remains unchanged.\n\n5) Consistency and error handling\n- Ensure all new imports are added at the top of relevant files.\n- Error messages should be concise and field-specific. Empty or missing description fields must be accepted and bypass validation.\n- Maintain the 10 MB size limit and a sensible recursion depth (20) in validators.\n\n6) No changes to database schema or routes\n- Do not alter models or URL patterns. The update only adds validation and improves the update flow in the existing endpoint.",
      "prompt": "Add robust server-side validation for description content across issues, projects, drafts, stickies, and pages, and use a dedicated serializer to update page descriptions safely.\n\nSpecifically:\n- Introduce a reusable validation utility for JSON, HTML, and binary description content with sensible limits and protection against obvious XSS vectors.\n- Apply these validators in the relevant serializers so that description, description_html, and description_binary fields are validated and produce field-specific errors without breaking existing flows.\n- For pages, implement a serializer that accepts base64-encoded binary description, HTML, and JSON, validates each field, decodes binary to bytes, and updates the instance.\n- Update the page description PATCH endpoint to use the new serializer and return validation errors when content is unsafe or malformed.\n- Keep current endpoints, permissions, and background tasks intact while improving input validation.",
      "supplementalFiles": [
        "apps/api/plane/db/models/page.py",
        "apps/api/plane/db/models/issue.py",
        "apps/api/plane/db/models/project.py",
        "apps/api/plane/db/models/sticky.py",
        "apps/api/plane/app/urls/page.py",
        "packages/types/src/page/index.ts",
        "packages/types/src/issues/issue.ts",
        "packages/types/src/stickies.ts"
      ],
      "fileDiffs": [
        {
          "path": "apps/api/plane/api/serializers/issue.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/api/serializers/issue.py\n===================================================================\n--- apps/api/plane/api/serializers/issue.py\tb93883f (parent)\n+++ apps/api/plane/api/serializers/issue.py\t69d5cd1 (commit)\n@@ -20,8 +20,13 @@\n     ProjectMember,\n     State,\n     User,\n )\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n from .base import BaseSerializer\n from .cycle import CycleLiteSerializer, CycleSerializer\n from .module import ModuleLiteSerializer, ModuleSerializer\n@@ -74,8 +79,24 @@\n \n         except Exception:\n             raise serializers.ValidationError(\"Invalid HTML passed\")\n \n+        # Validate description content for security\n+        if data.get(\"description\"):\n+            is_valid, error_msg = validate_json_content(data[\"description\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description\": error_msg})\n+\n+        if data.get(\"description_html\"):\n+            is_valid, error_msg = validate_html_content(data[\"description_html\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n+        if data.get(\"description_binary\"):\n+            is_valid, error_msg = validate_binary_data(data[\"description_binary\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_binary\": error_msg})\n+\n         # Validate assignees are from project\n         if data.get(\"assignees\", []):\n             data[\"assignees\"] = ProjectMember.objects.filter(\n                 project_id=self.context.get(\"project_id\"),\n"
        },
        {
          "path": "apps/api/plane/api/serializers/project.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/api/serializers/project.py\n===================================================================\n--- apps/api/plane/api/serializers/project.py\tb93883f (parent)\n+++ apps/api/plane/api/serializers/project.py\t69d5cd1 (commit)\n@@ -2,8 +2,13 @@\n from rest_framework import serializers\n \n # Module imports\n from plane.db.models import Project, ProjectIdentifier, WorkspaceMember\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n from .base import BaseSerializer\n \n \n@@ -56,8 +61,31 @@\n             raise serializers.ValidationError(\n                 \"Default assignee should be a user in the workspace\"\n             )\n \n+        # Validate description content for security\n+        if \"description\" in data and data[\"description\"]:\n+            # For Project, description might be text field, not JSON\n+            if isinstance(data[\"description\"], dict):\n+                is_valid, error_msg = validate_json_content(data[\"description\"])\n+                if not is_valid:\n+                    raise serializers.ValidationError({\"description\": error_msg})\n+\n+        if \"description_text\" in data and data[\"description_text\"]:\n+            is_valid, error_msg = validate_json_content(data[\"description_text\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_text\": error_msg})\n+\n+        if \"description_html\" in data and data[\"description_html\"]:\n+            if isinstance(data[\"description_html\"], dict):\n+                is_valid, error_msg = validate_json_content(data[\"description_html\"])\n+            else:\n+                is_valid, error_msg = validate_html_content(\n+                    str(data[\"description_html\"])\n+                )\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n         return data\n \n     def create(self, validated_data):\n         identifier = validated_data.get(\"identifier\", \"\").strip().upper()\n"
        },
        {
          "path": "apps/api/plane/app/serializers/__init__.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/__init__.py\n===================================================================\n--- apps/api/plane/app/serializers/__init__.py\tb93883f (parent)\n+++ apps/api/plane/app/serializers/__init__.py\t69d5cd1 (commit)\n@@ -95,8 +95,9 @@\n     PageLogSerializer,\n     SubPageSerializer,\n     PageDetailSerializer,\n     PageVersionSerializer,\n+    PageBinaryUpdateSerializer,\n     PageVersionDetailSerializer,\n )\n \n from .estimate import (\n"
        },
        {
          "path": "apps/api/plane/app/serializers/draft.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/draft.py\n===================================================================\n--- apps/api/plane/app/serializers/draft.py\tb93883f (parent)\n+++ apps/api/plane/app/serializers/draft.py\t69d5cd1 (commit)\n@@ -16,8 +16,13 @@\n     DraftIssueLabel,\n     DraftIssueCycle,\n     DraftIssueModule,\n )\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n \n class DraftIssueCreateSerializer(BaseSerializer):\n     # ids\n@@ -63,8 +68,25 @@\n             and data.get(\"target_date\", None) is not None\n             and data.get(\"start_date\", None) > data.get(\"target_date\", None)\n         ):\n             raise serializers.ValidationError(\"Start date cannot exceed target date\")\n+\n+        # Validate description content for security\n+        if \"description\" in data and data[\"description\"]:\n+            is_valid, error_msg = validate_json_content(data[\"description\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description\": error_msg})\n+\n+        if \"description_html\" in data and data[\"description_html\"]:\n+            is_valid, error_msg = validate_html_content(data[\"description_html\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n+        if \"description_binary\" in data and data[\"description_binary\"]:\n+            is_valid, error_msg = validate_binary_data(data[\"description_binary\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_binary\": error_msg})\n+\n         return data\n \n     def create(self, validated_data):\n         assignees = validated_data.pop(\"assignee_ids\", None)\n"
        },
        {
          "path": "apps/api/plane/app/serializers/issue.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/issue.py\n===================================================================\n--- apps/api/plane/app/serializers/issue.py\tb93883f (parent)\n+++ apps/api/plane/app/serializers/issue.py\t69d5cd1 (commit)\n@@ -37,8 +37,13 @@\n     IssueVersion,\n     IssueDescriptionVersion,\n     ProjectMember,\n )\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n \n class IssueFlatSerializer(BaseSerializer):\n     ## Contain only flat fields\n@@ -126,8 +131,24 @@\n                 is_active=True,\n                 member_id__in=attrs[\"assignee_ids\"],\n             ).values_list(\"member_id\", flat=True)\n \n+        # Validate description content for security\n+        if \"description\" in attrs and attrs[\"description\"]:\n+            is_valid, error_msg = validate_json_content(attrs[\"description\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description\": error_msg})\n+\n+        if \"description_html\" in attrs and attrs[\"description_html\"]:\n+            is_valid, error_msg = validate_html_content(attrs[\"description_html\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n+        if \"description_binary\" in attrs and attrs[\"description_binary\"]:\n+            is_valid, error_msg = validate_binary_data(attrs[\"description_binary\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_binary\": error_msg})\n+\n         return attrs\n \n     def create(self, validated_data):\n         assignees = validated_data.pop(\"assignee_ids\", None)\n"
        },
        {
          "path": "apps/api/plane/app/serializers/page.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/page.py\n===================================================================\n--- apps/api/plane/app/serializers/page.py\tb93883f (parent)\n+++ apps/api/plane/app/serializers/page.py\t69d5cd1 (commit)\n@@ -1,9 +1,15 @@\n # Third party imports\n from rest_framework import serializers\n+import base64\n \n # Module imports\n from .base import BaseSerializer\n+from plane.utils.content_validator import (\n+    validate_binary_data,\n+    validate_html_content,\n+    validate_json_content,\n+)\n from plane.db.models import (\n     Page,\n     PageLog,\n     PageLabel,\n@@ -185,4 +191,72 @@\n             \"created_by\",\n             \"updated_by\",\n         ]\n         read_only_fields = [\"workspace\", \"page\"]\n+\n+\n+class PageBinaryUpdateSerializer(serializers.Serializer):\n+    \"\"\"Serializer for updating page binary description with validation\"\"\"\n+\n+    description_binary = serializers.CharField(required=False, allow_blank=True)\n+    description_html = serializers.CharField(required=False, allow_blank=True)\n+    description = serializers.JSONField(required=False, allow_null=True)\n+\n+    def validate_description_binary(self, value):\n+        \"\"\"Validate the base64-encoded binary data\"\"\"\n+        if not value:\n+            return value\n+\n+        try:\n+            # Decode the base64 data\n+            binary_data = base64.b64decode(value)\n+\n+            # Validate the binary data\n+            is_valid, error_message = validate_binary_data(binary_data)\n+            if not is_valid:\n+                raise serializers.ValidationError(\n+                    f\"Invalid binary data: {error_message}\"\n+                )\n+\n+            return binary_data\n+        except Exception as e:\n+            if isinstance(e, serializers.ValidationError):\n+                raise\n+            raise serializers.ValidationError(\"Failed to decode base64 data\")\n+\n+    def validate_description_html(self, value):\n+        \"\"\"Validate the HTML content\"\"\"\n+        if not value:\n+            return value\n+\n+        # Use the validation function from utils\n+        is_valid, error_message = validate_html_content(value)\n+        if not is_valid:\n+            raise serializers.ValidationError(error_message)\n+\n+        return value\n+\n+    def validate_description(self, value):\n+        \"\"\"Validate the JSON description\"\"\"\n+        if not value:\n+            return value\n+\n+        # Use the validation function from utils\n+        is_valid, error_message = validate_json_content(value)\n+        if not is_valid:\n+            raise serializers.ValidationError(error_message)\n+\n+        return value\n+\n+    def update(self, instance, validated_data):\n+        \"\"\"Update the page instance with validated data\"\"\"\n+        if \"description_binary\" in validated_data:\n+            instance.description_binary = validated_data.get(\"description_binary\")\n+\n+        if \"description_html\" in validated_data:\n+            instance.description_html = validated_data.get(\"description_html\")\n+\n+        if \"description\" in validated_data:\n+            instance.description = validated_data.get(\"description\")\n+\n+        instance.save()\n+        return instance\n"
        },
        {
          "path": "apps/api/plane/app/serializers/project.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/project.py\n===================================================================\n--- apps/api/plane/app/serializers/project.py\tb93883f (parent)\n+++ apps/api/plane/app/serializers/project.py\t69d5cd1 (commit)\n@@ -12,8 +12,13 @@\n     ProjectIdentifier,\n     DeployBoard,\n     ProjectPublicMember,\n )\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n \n class ProjectSerializer(BaseSerializer):\n     workspace_detail = WorkspaceLiteSerializer(source=\"workspace\", read_only=True)\n@@ -57,8 +62,34 @@\n             )\n \n         return identifier\n \n+    def validate(self, data):\n+        # Validate description content for security\n+        if \"description\" in data and data[\"description\"]:\n+            # For Project, description might be text field, not JSON\n+            if isinstance(data[\"description\"], dict):\n+                is_valid, error_msg = validate_json_content(data[\"description\"])\n+                if not is_valid:\n+                    raise serializers.ValidationError({\"description\": error_msg})\n+\n+        if \"description_text\" in data and data[\"description_text\"]:\n+            is_valid, error_msg = validate_json_content(data[\"description_text\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_text\": error_msg})\n+\n+        if \"description_html\" in data and data[\"description_html\"]:\n+            if isinstance(data[\"description_html\"], dict):\n+                is_valid, error_msg = validate_json_content(data[\"description_html\"])\n+            else:\n+                is_valid, error_msg = validate_html_content(\n+                    str(data[\"description_html\"])\n+                )\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n+        return data\n+\n     def create(self, validated_data):\n         workspace_id = self.context[\"workspace_id\"]\n \n         project = Project.objects.create(**validated_data, workspace_id=workspace_id)\n"
        },
        {
          "path": "apps/api/plane/app/serializers/workspace.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/workspace.py\n===================================================================\n--- apps/api/plane/app/serializers/workspace.py\tb93883f (parent)\n+++ apps/api/plane/app/serializers/workspace.py\t69d5cd1 (commit)\n@@ -23,8 +23,13 @@\n     WorkspaceUserPreference,\n )\n from plane.utils.constants import RESTRICTED_WORKSPACE_SLUGS\n from plane.utils.url import contains_url\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n # Django imports\n from django.core.validators import URLValidator\n from django.core.exceptions import ValidationError\n@@ -311,9 +316,28 @@\n         fields = \"__all__\"\n         read_only_fields = [\"workspace\", \"owner\"]\n         extra_kwargs = {\"name\": {\"required\": False}}\n \n+    def validate(self, data):\n+        # Validate description content for security\n+        if \"description\" in data and data[\"description\"]:\n+            is_valid, error_msg = validate_json_content(data[\"description\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description\": error_msg})\n \n+        if \"description_html\" in data and data[\"description_html\"]:\n+            is_valid, error_msg = validate_html_content(data[\"description_html\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n+        if \"description_binary\" in data and data[\"description_binary\"]:\n+            is_valid, error_msg = validate_binary_data(data[\"description_binary\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_binary\": error_msg})\n+\n+        return data\n+\n+\n class WorkspaceUserPreferenceSerializer(BaseSerializer):\n     class Meta:\n         model = WorkspaceUserPreference\n         fields = [\"key\", \"is_pinned\", \"sort_order\"]\n"
        },
        {
          "path": "apps/api/plane/app/views/page/base.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/views/page/base.py\n===================================================================\n--- apps/api/plane/app/views/page/base.py\tb93883f (parent)\n+++ apps/api/plane/app/views/page/base.py\t69d5cd1 (commit)\n@@ -24,8 +24,9 @@\n     PageLogSerializer,\n     PageSerializer,\n     SubPageSerializer,\n     PageDetailSerializer,\n+    PageBinaryUpdateSerializer,\n )\n from plane.db.models import (\n     Page,\n     PageLog,\n@@ -537,34 +538,29 @@\n         existing_instance = json.dumps(\n             {\"description_html\": page.description_html}, cls=DjangoJSONEncoder\n         )\n \n-        # Get the base64 data from the request\n-        base64_data = request.data.get(\"description_binary\")\n-\n-        # If base64 data is provided\n-        if base64_data:\n-            # Decode the base64 data to bytes\n-            new_binary_data = base64.b64decode(base64_data)\n-            # capture the page transaction\n+        # Use serializer for validation and update\n+        serializer = PageBinaryUpdateSerializer(page, data=request.data, partial=True)\n+        if serializer.is_valid():\n+            # Capture the page transaction\n             if request.data.get(\"description_html\"):\n                 page_transaction.delay(\n                     new_value=request.data, old_value=existing_instance, page_id=pk\n                 )\n-            # Store the updated binary data\n-            page.description_binary = new_binary_data\n-            page.description_html = request.data.get(\"description_html\")\n-            page.description = request.data.get(\"description\")\n-            page.save()\n-            # Return a success response\n+\n+            # Update the page using serializer\n+            updated_page = serializer.save()\n+\n+            # Run background tasks\n             page_version.delay(\n-                page_id=page.id,\n+                page_id=updated_page.id,\n                 existing_instance=existing_instance,\n                 user_id=request.user.id,\n             )\n             return Response({\"message\": \"Updated successfully\"})\n         else:\n-            return Response({\"error\": \"No binary data provided\"})\n+            return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n \n \n class PageDuplicateEndpoint(BaseAPIView):\n     @allow_permission([ROLE.ADMIN, ROLE.MEMBER, ROLE.GUEST])\n"
        },
        {
          "path": "apps/api/plane/space/serializer/issue.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/space/serializer/issue.py\n===================================================================\n--- apps/api/plane/space/serializer/issue.py\tb93883f (parent)\n+++ apps/api/plane/space/serializer/issue.py\t69d5cd1 (commit)\n@@ -27,8 +27,13 @@\n     CommentReaction,\n     IssueVote,\n     IssueRelation,\n )\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n \n class IssueStateFlatSerializer(BaseSerializer):\n     state_detail = StateLiteSerializer(read_only=True, source=\"state\")\n@@ -282,8 +287,25 @@\n             and data.get(\"target_date\", None) is not None\n             and data.get(\"start_date\", None) > data.get(\"target_date\", None)\n         ):\n             raise serializers.ValidationError(\"Start date cannot exceed target date\")\n+\n+        # Validate description content for security\n+        if \"description\" in data and data[\"description\"]:\n+            is_valid, error_msg = validate_json_content(data[\"description\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description\": error_msg})\n+\n+        if \"description_html\" in data and data[\"description_html\"]:\n+            is_valid, error_msg = validate_html_content(data[\"description_html\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n+        if \"description_binary\" in data and data[\"description_binary\"]:\n+            is_valid, error_msg = validate_binary_data(data[\"description_binary\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_binary\": error_msg})\n+\n         return data\n \n     def create(self, validated_data):\n         assignees = validated_data.pop(\"assignees\", None)\n"
        },
        {
          "path": "apps/api/plane/utils/content_validator.py",
          "status": "added",
          "diff": "Index: apps/api/plane/utils/content_validator.py\n===================================================================\n--- apps/api/plane/utils/content_validator.py\tb93883f (parent)\n+++ apps/api/plane/utils/content_validator.py\t69d5cd1 (commit)\n@@ -0,0 +1,357 @@\n+# Python imports\n+import base64\n+import json\n+import re\n+\n+\n+# Maximum allowed size for binary data (10MB)\n+MAX_SIZE = 10 * 1024 * 1024\n+\n+# Maximum recursion depth to prevent stack overflow\n+MAX_RECURSION_DEPTH = 20\n+\n+# Dangerous text patterns that could indicate XSS or script injection\n+DANGEROUS_TEXT_PATTERNS = [\n+    r\"<script[^>]*>.*?</script>\",\n+    r\"javascript\\s*:\",\n+    r\"data\\s*:\\s*text/html\",\n+    r\"eval\\s*\\(\",\n+    r\"document\\s*\\.\",\n+    r\"window\\s*\\.\",\n+    r\"location\\s*\\.\",\n+]\n+\n+# Dangerous attribute patterns for HTML attributes\n+DANGEROUS_ATTR_PATTERNS = [\n+    r\"javascript\\s*:\",\n+    r\"data\\s*:\\s*text/html\",\n+    r\"eval\\s*\\(\",\n+    r\"alert\\s*\\(\",\n+    r\"document\\s*\\.\",\n+    r\"window\\s*\\.\",\n+]\n+\n+# Suspicious patterns for binary data content\n+SUSPICIOUS_BINARY_PATTERNS = [\n+    \"<html\",\n+    \"<!doctype\",\n+    \"<script\",\n+    \"javascript:\",\n+    \"data:\",\n+    \"<iframe\",\n+]\n+\n+# Malicious HTML patterns for content validation\n+MALICIOUS_HTML_PATTERNS = [\n+    # Script tags with any content\n+    r\"<script[^>]*>\",\n+    r\"</script>\",\n+    # JavaScript URLs in various attributes\n+    r'(?:href|src|action)\\s*=\\s*[\"\\']?\\s*javascript:',\n+    # Data URLs with text/html (potential XSS)\n+    r'(?:href|src|action)\\s*=\\s*[\"\\']?\\s*data:text/html',\n+    # Dangerous event handlers with JavaScript-like content\n+    r'on(?:load|error|click|focus|blur|change|submit|reset|select|resize|scroll|unload|beforeunload|hashchange|popstate|storage|message|offline|online)\\s*=\\s*[\"\\']?[^\"\\']*(?:javascript|alert|eval|document\\.|window\\.|location\\.|history\\.)[^\"\\']*[\"\\']?',\n+    # Object and embed tags that could load external content\n+    r\"<(?:object|embed)[^>]*(?:data|src)\\s*=\",\n+    # Base tag that could change relative URL resolution\n+    r\"<base[^>]*href\\s*=\",\n+    # Dangerous iframe sources\n+    r'<iframe[^>]*src\\s*=\\s*[\"\\']?(?:javascript:|data:text/html)',\n+    # Meta refresh redirects\n+    r'<meta[^>]*http-equiv\\s*=\\s*[\"\\']?refresh[\"\\']?',\n+    # Link tags - simplified patterns\n+    r'<link[^>]*rel\\s*=\\s*[\"\\']?stylesheet[\"\\']?',\n+    r'<link[^>]*href\\s*=\\s*[\"\\']?https?://',\n+    r'<link[^>]*href\\s*=\\s*[\"\\']?//',\n+    r'<link[^>]*href\\s*=\\s*[\"\\']?(?:data:|javascript:)',\n+    # Style tags with external imports\n+    r\"<style[^>]*>.*?@import.*?(?:https?://|//)\",\n+    # Link tags with dangerous rel types\n+    r'<link[^>]*rel\\s*=\\s*[\"\\']?(?:import|preload|prefetch|dns-prefetch|preconnect)[\"\\']?',\n+    # Forms with action attributes\n+    r\"<form[^>]*action\\s*=\",\n+]\n+\n+# Dangerous JavaScript patterns for event handlers\n+DANGEROUS_JS_PATTERNS = [\n+    r\"alert\\s*\\(\",\n+    r\"eval\\s*\\(\",\n+    r\"document\\s*\\.\",\n+    r\"window\\s*\\.\",\n+    r\"location\\s*\\.\",\n+    r\"fetch\\s*\\(\",\n+    r\"XMLHttpRequest\",\n+    r\"innerHTML\\s*=\",\n+    r\"outerHTML\\s*=\",\n+    r\"document\\.write\",\n+    r\"script\\s*>\",\n+]\n+\n+# HTML self-closing tags that don't need closing tags\n+SELF_CLOSING_TAGS = {\n+    \"img\",\n+    \"br\",\n+    \"hr\",\n+    \"input\",\n+    \"meta\",\n+    \"link\",\n+    \"area\",\n+    \"base\",\n+    \"col\",\n+    \"embed\",\n+    \"source\",\n+    \"track\",\n+    \"wbr\",\n+}\n+\n+\n+def validate_binary_data(data):\n+    \"\"\"\n+    Validate that binary data appears to be valid document format and doesn't contain malicious content.\n+\n+    Args:\n+        data (bytes or str): The binary data to validate, or base64-encoded string\n+\n+    Returns:\n+        tuple: (is_valid: bool, error_message: str or None)\n+    \"\"\"\n+    if not data:\n+        return True, None  # Empty is OK\n+\n+    # Handle base64-encoded strings by decoding them first\n+    if isinstance(data, str):\n+        try:\n+            binary_data = base64.b64decode(data)\n+        except Exception:\n+            return False, \"Invalid base64 encoding\"\n+    else:\n+        binary_data = data\n+\n+    # Size check - 10MB limit\n+    if len(binary_data) > MAX_SIZE:\n+        return False, \"Binary data exceeds maximum size limit (10MB)\"\n+\n+    # Basic format validation\n+    if len(binary_data) < 4:\n+        return False, \"Binary data too short to be valid document format\"\n+\n+    # Check for suspicious text patterns (HTML/JS)\n+    try:\n+        decoded_text = binary_data.decode(\"utf-8\", errors=\"ignore\")[:200]\n+        if any(\n+            pattern in decoded_text.lower() for pattern in SUSPICIOUS_BINARY_PATTERNS\n+        ):\n+            return False, \"Binary data contains suspicious content patterns\"\n+    except Exception:\n+        pass  # Binary data might not be decodable as text, which is fine\n+\n+    return True, None\n+\n+\n+def validate_html_content(html_content):\n+    \"\"\"\n+    Validate that HTML content is safe and doesn't contain malicious patterns.\n+\n+    Args:\n+        html_content (str): The HTML content to validate\n+\n+    Returns:\n+        tuple: (is_valid: bool, error_message: str or None)\n+    \"\"\"\n+    if not html_content:\n+        return True, None  # Empty is OK\n+\n+    # Size check - 10MB limit (consistent with binary validation)\n+    if len(html_content.encode(\"utf-8\")) > MAX_SIZE:\n+        return False, \"HTML content exceeds maximum size limit (10MB)\"\n+\n+    # Check for specific malicious patterns (simplified and more reliable)\n+    for pattern in MALICIOUS_HTML_PATTERNS:\n+        if re.search(pattern, html_content, re.IGNORECASE | re.DOTALL):\n+            return (\n+                False,\n+                f\"HTML content contains potentially malicious patterns: {pattern}\",\n+            )\n+\n+    # Additional check for inline event handlers that contain suspicious content\n+    # This is more permissive - only blocks if the event handler contains actual dangerous code\n+    event_handler_pattern = r'on\\w+\\s*=\\s*[\"\\']([^\"\\']*)[\"\\']'\n+    event_matches = re.findall(event_handler_pattern, html_content, re.IGNORECASE)\n+\n+    for handler_content in event_matches:\n+        for js_pattern in DANGEROUS_JS_PATTERNS:\n+            if re.search(js_pattern, handler_content, re.IGNORECASE):\n+                return (\n+                    False,\n+                    f\"HTML content contains dangerous JavaScript in event handler: {handler_content[:100]}\",\n+                )\n+\n+    # Basic HTML structure validation - check for common malformed tags\n+    try:\n+        # Count opening and closing tags for basic structure validation\n+        opening_tags = re.findall(r\"<(\\w+)[^>]*>\", html_content)\n+        closing_tags = re.findall(r\"</(\\w+)>\", html_content)\n+\n+        # Filter out self-closing tags from opening tags\n+        opening_tags_filtered = [\n+            tag for tag in opening_tags if tag.lower() not in SELF_CLOSING_TAGS\n+        ]\n+\n+        # Basic check - if we have significantly more opening than closing tags, it might be malformed\n+        if len(opening_tags_filtered) > len(closing_tags) + 10:  # Allow some tolerance\n+            return False, \"HTML content appears to be malformed (unmatched tags)\"\n+\n+    except Exception:\n+        # If HTML parsing fails, we'll allow it\n+        pass\n+\n+    return True, None\n+\n+\n+def validate_json_content(json_content):\n+    \"\"\"\n+    Validate that JSON content is safe and doesn't contain malicious patterns.\n+\n+    Args:\n+        json_content (dict): The JSON content to validate\n+\n+    Returns:\n+        tuple: (is_valid: bool, error_message: str or None)\n+    \"\"\"\n+    if not json_content:\n+        return True, None  # Empty is OK\n+\n+    try:\n+        # Size check - 10MB limit (consistent with other validations)\n+        json_str = json.dumps(json_content)\n+        if len(json_str.encode(\"utf-8\")) > MAX_SIZE:\n+            return False, \"JSON content exceeds maximum size limit (10MB)\"\n+\n+        # Basic structure validation for page description JSON\n+        if isinstance(json_content, dict):\n+            # Check for expected page description structure\n+            # This is based on ProseMirror/Tiptap JSON structure\n+            if \"type\" in json_content and json_content.get(\"type\") == \"doc\":\n+                # Valid document structure\n+                if \"content\" in json_content and isinstance(\n+                    json_content[\"content\"], list\n+                ):\n+                    # Recursively check content for suspicious patterns\n+                    is_valid, error_msg = _validate_json_content_array(\n+                        json_content[\"content\"]\n+                    )\n+                    if not is_valid:\n+                        return False, error_msg\n+            elif \"type\" not in json_content and \"content\" not in json_content:\n+                # Allow other JSON structures but validate for suspicious content\n+                is_valid, error_msg = _validate_json_content_recursive(json_content)\n+                if not is_valid:\n+                    return False, error_msg\n+        else:\n+            return False, \"JSON description must be a valid object\"\n+\n+    except (TypeError, ValueError) as e:\n+        return False, \"Invalid JSON structure\"\n+    except Exception as e:\n+        return False, \"Failed to validate JSON content\"\n+\n+    return True, None\n+\n+\n+def _validate_json_content_array(content, depth=0):\n+    \"\"\"\n+    Validate JSON content array for suspicious patterns.\n+\n+    Args:\n+        content (list): Array of content nodes to validate\n+        depth (int): Current recursion depth (default: 0)\n+\n+    Returns:\n+        tuple: (is_valid: bool, error_message: str or None)\n+    \"\"\"\n+    # Check recursion depth to prevent stack overflow\n+    if depth > MAX_RECURSION_DEPTH:\n+        return False, f\"Maximum recursion depth ({MAX_RECURSION_DEPTH}) exceeded\"\n+\n+    if not isinstance(content, list):\n+        return True, None\n+\n+    for node in content:\n+        if isinstance(node, dict):\n+            # Check text content for suspicious patterns (more targeted)\n+            if node.get(\"type\") == \"text\" and \"text\" in node:\n+                text_content = node[\"text\"]\n+                for pattern in DANGEROUS_TEXT_PATTERNS:\n+                    if re.search(pattern, text_content, re.IGNORECASE):\n+                        return (\n+                            False,\n+                            \"JSON content contains suspicious script patterns in text\",\n+                        )\n+\n+            # Check attributes for suspicious content (more targeted)\n+            if \"attrs\" in node and isinstance(node[\"attrs\"], dict):\n+                for attr_name, attr_value in node[\"attrs\"].items():\n+                    if isinstance(attr_value, str):\n+                        # Only check specific attributes that could be dangerous\n+                        if attr_name.lower() in [\n+                            \"href\",\n+                            \"src\",\n+                            \"action\",\n+                            \"onclick\",\n+                            \"onload\",\n+                            \"onerror\",\n+                        ]:\n+                            for pattern in DANGEROUS_ATTR_PATTERNS:\n+                                if re.search(pattern, attr_value, re.IGNORECASE):\n+                                    return (\n+                                        False,\n+                                        f\"JSON content contains dangerous pattern in {attr_name} attribute\",\n+                                    )\n+\n+            # Recursively check nested content\n+            if \"content\" in node and isinstance(node[\"content\"], list):\n+                is_valid, error_msg = _validate_json_content_array(\n+                    node[\"content\"], depth + 1\n+                )\n+                if not is_valid:\n+                    return False, error_msg\n+\n+    return True, None\n+\n+\n+def _validate_json_content_recursive(obj, depth=0):\n+    \"\"\"\n+    Recursively validate JSON object for suspicious content.\n+\n+    Args:\n+        obj: JSON object (dict, list, or primitive) to validate\n+        depth (int): Current recursion depth (default: 0)\n+\n+    Returns:\n+        tuple: (is_valid: bool, error_message: str or None)\n+    \"\"\"\n+    # Check recursion depth to prevent stack overflow\n+    if depth > MAX_RECURSION_DEPTH:\n+        return False, f\"Maximum recursion depth ({MAX_RECURSION_DEPTH}) exceeded\"\n+    if isinstance(obj, dict):\n+        for key, value in obj.items():\n+            if isinstance(value, str):\n+                # Check for dangerous patterns using module constants\n+                for pattern in DANGEROUS_TEXT_PATTERNS:\n+                    if re.search(pattern, value, re.IGNORECASE):\n+                        return (\n+                            False,\n+                            \"JSON content contains suspicious script patterns\",\n+                        )\n+            elif isinstance(value, (dict, list)):\n+                is_valid, error_msg = _validate_json_content_recursive(value, depth + 1)\n+                if not is_valid:\n+                    return False, error_msg\n+    elif isinstance(obj, list):\n+        for item in obj:\n+            is_valid, error_msg = _validate_json_content_recursive(item, depth + 1)\n+            if not is_valid:\n+                return False, error_msg\n+\n+    return True, None\n"
        }
      ]
    },
    {
      "id": "add-emoji-support",
      "sha": "ba6b822f607af7621cf5977f3a4e6a889022cf07",
      "parentSha": "757019bf43b2c492e58e93bd322661b41f3e6c7b",
      "spec": "Implement emoji support across all editors with a unified dropdown tracking mechanism and TipTap integration.\n\n1) Dependencies and constants\n- Add @tiptap/extension-emoji to packages/editor/package.json dependencies.\n- Add EMOJI to CORE_EXTENSIONS in packages/editor/src/core/constants/extension.ts.\n\n2) Emoji extension and suggestion\n- Create packages/editor/src/core/extensions/emoji/extension.ts extending @tiptap/extension-emoji:\n  - Configure emojis (e.g., gitHubEmojis) and enable emoticons.\n  - Provide custom suggestion via local suggestion.ts.\n  - Implement markdown serialization: prefer native emoji; if not, write fallback image markdown; else write :shortcode:.\n- Create packages/editor/src/core/extensions/emoji/suggestion.ts to:\n  - Use a ReactRenderer for EmojiList and show it with tippy.\n  - When no query, show a default subset; otherwise filter by shortcodes/tags (prefix), limited to 5.\n  - On start, push CORE_EXTENSIONS.EMOJI into active dropdown tracking; on exit, remove it; support Escape and keyboard delegation.\n- Create packages/editor/src/core/extensions/emoji/components/emojis-list.tsx:\n  - Render accessible listbox with keyboard navigation (ArrowUp/Down, Enter), scroll-to-selected behavior, and click/hover selection.\n  - Render emoji glyph or fallback image and show :name: label.\n\n3) Register extension in editor bundles\n- Add EmojiExtension to core extension sets in:\n  - packages/editor/src/core/extensions/extensions.ts (main configurable set).\n  - packages/editor/src/core/extensions/core-without-props.ts (minimal set).\n\n4) Slash command integration\n- In packages/editor/src/core/extensions/slash-commands/command-items-list.tsx, add a new \"Emoji\" command item that inserts a colon at the selection/range to trigger the emoji suggestion.\n\n5) Generic dropdown tracking in utility storage\n- In packages/editor/src/core/extensions/utility.ts:\n  - Add activeDropbarExtensions: an array tracking currently open suggestion/dropdown extensions.\n  - Type as union: CORE_EXTENSIONS.MENTION | CORE_EXTENSIONS.EMOJI | TAdditionalActiveDropbarExtensions.\n  - Initialize activeDropbarExtensions: [] in addStorage.\n- Provide CE type scaffold in packages/editor/src/ce/types/utils.ts exporting TAdditionalActiveDropbarExtensions = never.\n\n6) Update mentions to use generic tracking\n- In packages/editor/src/core/extensions/mentions/extension-config.ts, remove mention-specific storage (mentionsOpen) and its typing.\n- In packages/editor/src/core/extensions/mentions/utils.ts, on dropdown open push CORE_EXTENSIONS.MENTION to activeDropbarExtensions, and on exit remove it.\n\n7) Enter key handling\n- In packages/editor/src/core/extensions/enter-key.ts, replace mention-specific check with a generic one: if no active dropdowns (activeDropbarExtensions length 0), run the Enter handler; otherwise let the dropdown handle it and prevent default.\n\n8) Types and storage map\n- Update packages/editor/src/ce/types/storage.ts:\n  - import EmojiStorage and add [CORE_EXTENSIONS.EMOJI] entry.\n  - remove mention-specific storage mapping.\n- Update packages/editor/src/core/types/editor.ts to include \"emoji\" as a command/extension identifier where applicable.\n\n9) Styles\n- In packages/editor/src/styles/editor.css, add styles so emoji images (span[data-type=\"emoji\"] img) render inline, vertically centered, and sized appropriately.\n\n10) Lockfile\n- Ensure yarn.lock reflects the added emoji package and its transitive dependencies.\n\nBehavior\n- Typing \":\" opens an emoji suggestion dropdown with default results and live filtering by shortcode/tag. Selecting an item inserts the emoji.\n- The slash command \"Emoji\" inserts a colon to trigger suggestions.\n- When emoji or mention dropdowns are open, Enter should act on the dropdown (selection) and not perform normal Enter behavior.\n- Markdown serialization outputs the native emoji or, if unsupported, an image markdown fallback; otherwise uses :shortcode:.\n- Emoji is available in all editor configurations using the core extension sets.",
      "prompt": "Add emoji support to the TipTap editors. Provide an emoji picker triggered by a colon, with default and filtered suggestions, and an Emoji slash command. Integrate the emoji extension into both core extension bundles, serialize emoji appropriately to markdown, and update Enter key behavior so it defers to open suggestion dropdowns. Replace mention-specific open state with a generic active dropdown tracking in utility storage that both mentions and emoji use.",
      "supplementalFiles": [
        "packages/editor/src/core/helpers/get-extension-storage.ts",
        "packages/editor/src/core/components/menus/bubble-menu/root.tsx",
        "packages/editor/src/core/components/menus/block-menu.tsx",
        "packages/editor/src/core/helpers/editor-ref.ts",
        "packages/editor/src/core/hooks/use-editor.ts",
        "packages/editor/src/core/extensions/custom-image/extension.ts",
        "packages/editor/src/core/extensions/table/table/table.ts",
        "packages/editor/src/core/extensions/custom-link/extension.tsx"
      ],
      "fileDiffs": [
        {
          "path": "packages/editor/package.json",
          "status": "modified",
          "diff": "Index: packages/editor/package.json\n===================================================================\n--- packages/editor/package.json\t757019b (parent)\n+++ packages/editor/package.json\tba6b822 (commit)\n@@ -45,8 +45,9 @@\n     \"@tiptap/core\": \"2.10.4\",\n     \"@tiptap/extension-blockquote\": \"2.10.4\",\n     \"@tiptap/extension-character-count\": \"2.11.0\",\n     \"@tiptap/extension-collaboration\": \"2.11.0\",\n+    \"@tiptap/extension-emoji\": \"^2.22.3\",\n     \"@tiptap/extension-image\": \"2.11.0\",\n     \"@tiptap/extension-list-item\": \"2.11.0\",\n     \"@tiptap/extension-mention\": \"2.11.0\",\n     \"@tiptap/extension-placeholder\": \"2.11.0\",\n"
        },
        {
          "path": "packages/editor/src/ce/types/storage.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/ce/types/storage.ts\n===================================================================\n--- packages/editor/src/ce/types/storage.ts\t757019b (parent)\n+++ packages/editor/src/ce/types/storage.ts\tba6b822 (commit)\n@@ -1,22 +1,22 @@\n import { CharacterCountStorage } from \"@tiptap/extension-character-count\";\n // constants\n+import type { EmojiStorage } from \"@tiptap/extension-emoji\";\n import { CORE_EXTENSIONS } from \"@/constants/extension\";\n // extensions\n-import { type HeadingExtensionStorage } from \"@/extensions\";\n-import { type CustomImageExtensionStorage } from \"@/extensions/custom-image/types\";\n-import { type CustomLinkStorage } from \"@/extensions/custom-link\";\n-import { type ImageExtensionStorage } from \"@/extensions/image\";\n-import { type MentionExtensionStorage } from \"@/extensions/mentions\";\n-import { type UtilityExtensionStorage } from \"@/extensions/utility\";\n+import type { HeadingExtensionStorage } from \"@/extensions\";\n+import type { CustomImageExtensionStorage } from \"@/extensions/custom-image/types\";\n+import type { CustomLinkStorage } from \"@/extensions/custom-link\";\n+import type { ImageExtensionStorage } from \"@/extensions/image\";\n+import type { UtilityExtensionStorage } from \"@/extensions/utility\";\n \n export type ExtensionStorageMap = {\n   [CORE_EXTENSIONS.CUSTOM_IMAGE]: CustomImageExtensionStorage;\n   [CORE_EXTENSIONS.IMAGE]: ImageExtensionStorage;\n   [CORE_EXTENSIONS.CUSTOM_LINK]: CustomLinkStorage;\n   [CORE_EXTENSIONS.HEADINGS_LIST]: HeadingExtensionStorage;\n-  [CORE_EXTENSIONS.MENTION]: MentionExtensionStorage;\n   [CORE_EXTENSIONS.UTILITY]: UtilityExtensionStorage;\n+  [CORE_EXTENSIONS.EMOJI]: EmojiStorage;\n   [CORE_EXTENSIONS.CHARACTER_COUNT]: CharacterCountStorage;\n };\n \n export type ExtensionFileSetStorageKey = Extract<keyof ImageExtensionStorage, \"deletedImageSet\">;\n"
        },
        {
          "path": "packages/editor/src/ce/types/utils.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/ce/types/utils.ts\n===================================================================\n--- packages/editor/src/ce/types/utils.ts\t757019b (parent)\n+++ packages/editor/src/ce/types/utils.ts\tba6b822 (commit)\n@@ -1,1 +1,1 @@\n-[NEW FILE]\n\\ No newline at end of file\n+export type TAdditionalActiveDropbarExtensions = never;\n\\ No newline at end of file\n"
        },
        {
          "path": "packages/editor/src/core/constants/extension.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/constants/extension.ts\n===================================================================\n--- packages/editor/src/core/constants/extension.ts\t757019b (parent)\n+++ packages/editor/src/core/constants/extension.ts\tba6b822 (commit)\n@@ -40,5 +40,6 @@\n   TYPOGRAPHY = \"typography\",\n   UNDERLINE = \"underline\",\n   UTILITY = \"utility\",\n   WORK_ITEM_EMBED = \"issue-embed-component\",\n+  EMOJI = \"emoji\",\n }\n"
        },
        {
          "path": "packages/editor/src/core/extensions/core-without-props.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/core-without-props.ts\n===================================================================\n--- packages/editor/src/core/extensions/core-without-props.ts\t757019b (parent)\n+++ packages/editor/src/core/extensions/core-without-props.ts\tba6b822 (commit)\n@@ -13,8 +13,9 @@\n import { CustomCodeInlineExtension } from \"./code-inline\";\n import { CustomColorExtension } from \"./custom-color\";\n import { CustomImageExtensionConfig } from \"./custom-image/extension-config\";\n import { CustomLinkExtension } from \"./custom-link\";\n+import { EmojiExtension } from \"./emoji/extension\";\n import { CustomHorizontalRule } from \"./horizontal-rule\";\n import { ImageExtensionConfig } from \"./image\";\n import { CustomMentionExtensionConfig } from \"./mentions/extension-config\";\n import { CustomQuoteExtension } from \"./quote\";\n@@ -54,8 +55,9 @@\n       },\n     },\n     dropcursor: false,\n   }),\n+  EmojiExtension,\n   CustomQuoteExtension,\n   CustomHorizontalRule.configure({\n     HTMLAttributes: {\n       class: \"py-4 border-custom-border-400\",\n"
        },
        {
          "path": "packages/editor/src/core/extensions/emoji/components/emojis-list.tsx",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/emoji/components/emojis-list.tsx\n===================================================================\n--- packages/editor/src/core/extensions/emoji/components/emojis-list.tsx\t757019b (parent)\n+++ packages/editor/src/core/extensions/emoji/components/emojis-list.tsx\tba6b822 (commit)\n@@ -1,1 +1,151 @@\n-[NEW FILE]\n\\ No newline at end of file\n+import { Editor } from \"@tiptap/react\";\n+import { forwardRef, useCallback, useEffect, useImperativeHandle, useLayoutEffect, useRef, useState } from \"react\";\n+// plane imports\n+import { cn } from \"@plane/utils\";\n+\n+export interface EmojiItem {\n+  name: string;\n+  emoji: string;\n+  shortcodes: string[];\n+  tags: string[];\n+  fallbackImage?: string;\n+}\n+\n+export interface EmojiListProps {\n+  items: EmojiItem[];\n+  command: (item: { name: string }) => void;\n+  editor: Editor;\n+}\n+\n+export interface EmojiListRef {\n+  onKeyDown: (props: { event: KeyboardEvent }) => boolean;\n+}\n+\n+export const EmojiList = forwardRef<EmojiListRef, EmojiListProps>((props, ref) => {\n+  const { items, command } = props;\n+  const [selectedIndex, setSelectedIndex] = useState<number>(0);\n+  // refs\n+  const emojiListContainer = useRef<HTMLDivElement>(null);\n+\n+  const selectItem = useCallback(\n+    (index: number): void => {\n+      const item = items[index];\n+      if (item) {\n+        command({ name: item.name });\n+      }\n+    },\n+    [command, items]\n+  );\n+\n+  const upHandler = useCallback(() => {\n+    setSelectedIndex((prevIndex) => (prevIndex + items.length - 1) % items.length);\n+  }, [items.length]);\n+\n+  const downHandler = useCallback(() => {\n+    setSelectedIndex((prevIndex) => (prevIndex + 1) % items.length);\n+  }, [items.length]);\n+\n+  const enterHandler = useCallback(() => {\n+    setSelectedIndex((prevIndex) => {\n+      selectItem(prevIndex);\n+      return prevIndex;\n+    });\n+  }, [selectItem]);\n+\n+  useEffect(() => setSelectedIndex(0), [items]);\n+\n+  // scroll to the dropdown item when navigating via keyboard\n+  useLayoutEffect(() => {\n+    const container = emojiListContainer?.current;\n+    if (!container) return;\n+\n+    const item = container.querySelector(`#emoji-item-${selectedIndex}`) as HTMLElement;\n+    if (item) {\n+      const containerRect = container.getBoundingClientRect();\n+      const itemRect = item.getBoundingClientRect();\n+\n+      const isItemInView = itemRect.top >= containerRect.top && itemRect.bottom <= containerRect.bottom;\n+\n+      if (!isItemInView) {\n+        item.scrollIntoView({ block: \"nearest\" });\n+      }\n+    }\n+  }, [selectedIndex]);\n+\n+  useImperativeHandle(\n+    ref,\n+    () => ({\n+      onKeyDown: ({ event }: { event: KeyboardEvent }): boolean => {\n+        if (event.key === \"ArrowUp\") {\n+          upHandler();\n+          return true;\n+        }\n+\n+        if (event.key === \"ArrowDown\") {\n+          downHandler();\n+          return true;\n+        }\n+\n+        if (event.key === \"Enter\") {\n+          enterHandler();\n+          event.preventDefault();\n+          event.stopPropagation();\n+\n+          return true;\n+        }\n+\n+        return false;\n+      },\n+    }),\n+    [upHandler, downHandler, enterHandler]\n+  );\n+  return (\n+    <div\n+      ref={emojiListContainer}\n+      role=\"listbox\"\n+      aria-label=\"Emoji suggestions\"\n+      className=\"z-10 max-h-[90vh] w-[16rem] overflow-y-auto rounded-md border-[0.5px] border-custom-border-300 bg-custom-background-100 px-2 py-2.5 shadow-custom-shadow-rg space-y-1\"\n+    >\n+      {items.length ? (\n+        items.map((item, index) => {\n+          const isSelected = index === selectedIndex;\n+          const emojiKey = item.shortcodes.join(\" - \");\n+\n+          return (\n+            <button\n+              key={emojiKey}\n+              role=\"option\"\n+              aria-selected={isSelected}\n+              aria-label={`${item.name} emoji`}\n+              id={`emoji-item-${index}`}\n+              type=\"button\"\n+              className={cn(\n+                \"flex items-center gap-2 w-full rounded px-2 py-1.5 text-sm text-left truncate text-custom-text-200 hover:bg-custom-background-80 transition-colors duration-150\",\n+                {\n+                  \"bg-custom-background-80\": isSelected,\n+                }\n+              )}\n+              onClick={() => selectItem(index)}\n+              onMouseEnter={() => setSelectedIndex(index)}\n+            >\n+              <span className=\"size-5 grid place-items-center flex-shrink-0 text-base\">\n+                {item.fallbackImage ? (\n+                  <img src={item.fallbackImage} alt={item.name} className=\"size-4 object-contain\" />\n+                ) : (\n+                  item.emoji\n+                )}\n+              </span>\n+              <span className=\"flex-grow truncate\">\n+                <span className=\"font-medium\">:{item.name}:</span>\n+              </span>\n+            </button>\n+          );\n+        })\n+      ) : (\n+        <div className=\"text-center text-sm text-custom-text-400 py-2\">No emojis found</div>\n+      )}\n+    </div>\n+  );\n+});\n+\n+EmojiList.displayName = \"EmojiList\";\n"
        },
        {
          "path": "packages/editor/src/core/extensions/emoji/extension.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/emoji/extension.ts\n===================================================================\n--- packages/editor/src/core/extensions/emoji/extension.ts\t757019b (parent)\n+++ packages/editor/src/core/extensions/emoji/extension.ts\tba6b822 (commit)\n@@ -1,1 +1,30 @@\n-[NEW FILE]\n\\ No newline at end of file\n+import Emoji, { EmojiItem, gitHubEmojis, shortcodeToEmoji } from \"@tiptap/extension-emoji\";\n+// local imports\n+import { MarkdownSerializerState } from \"@tiptap/pm/markdown\";\n+import { Node as ProseMirrorNode } from \"@tiptap/pm/model\";\n+import suggestion from \"./suggestion\";\n+\n+export const EmojiExtension = Emoji.extend({\n+  addStorage() {\n+    return {\n+      ...this.parent?.(),\n+      markdown: {\n+        serialize(state: MarkdownSerializerState, node: ProseMirrorNode) {\n+          const emojiItem = shortcodeToEmoji(node.attrs.name, this.options.emojis)\n+          if(emojiItem?.emoji) {\n+            state.write(emojiItem?.emoji);\n+          } else if(emojiItem?.fallbackImage) {\n+            state.write(`\\n![${emojiItem.name}-${emojiItem.shortcodes[0]}](${emojiItem?.fallbackImage})\\n`);\n+          } else {\n+            state.write(`:${node.attrs.name}:`);\n+          }\n+        },\n+      },\n+\n+    };\n+  },\n+}).configure({\n+  emojis: gitHubEmojis,\n+  suggestion: suggestion,\n+  enableEmoticons: true,\n+});\n"
        },
        {
          "path": "packages/editor/src/core/extensions/emoji/suggestion.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/emoji/suggestion.ts\n===================================================================\n--- packages/editor/src/core/extensions/emoji/suggestion.ts\t757019b (parent)\n+++ packages/editor/src/core/extensions/emoji/suggestion.ts\tba6b822 (commit)\n@@ -1,1 +1,126 @@\n-[NEW FILE]\n\\ No newline at end of file\n+import type { EmojiOptions } from \"@tiptap/extension-emoji\";\n+import { ReactRenderer, Editor } from \"@tiptap/react\";\n+import { SuggestionProps, SuggestionKeyDownProps } from \"@tiptap/suggestion\";\n+import tippy, { Instance as TippyInstance } from \"tippy.js\";\n+// constants\n+import { CORE_EXTENSIONS } from \"@/constants/extension\";\n+// helpers\n+import { getExtensionStorage } from \"@/helpers/get-extension-storage\";\n+// local imports\n+import { EmojiItem, EmojiList, EmojiListRef, EmojiListProps } from \"./components/emojis-list\";\n+\n+const DEFAULT_EMOJIS = [\"+1\", \"-1\", \"smile\", \"orange_heart\", \"eyes\"];\n+\n+const emojiSuggestion: EmojiOptions[\"suggestion\"] = {\n+  items: ({ editor, query }: { editor: Editor; query: string }): EmojiItem[] => {\n+    if (query.trim() === \"\") {\n+      const { emojis } = getExtensionStorage(editor, CORE_EXTENSIONS.EMOJI);\n+      const defaultEmojis = DEFAULT_EMOJIS.map((name) =>\n+        emojis.find((emoji: EmojiItem) => emoji.shortcodes.includes(name) || emoji.name === name)\n+      )\n+        .filter(Boolean)\n+        .slice(0, 5);\n+      return defaultEmojis as EmojiItem[];\n+    }\n+    return getExtensionStorage(editor, CORE_EXTENSIONS.EMOJI)\n+      .emojis.filter(({ shortcodes, tags }) => {\n+        const lowerQuery = query.toLowerCase();\n+        return (\n+          shortcodes.find((shortcode: string) => shortcode.startsWith(lowerQuery)) ||\n+          tags.find((tag: string) => tag.startsWith(lowerQuery))\n+        );\n+      })\n+      .slice(0, 5) as EmojiItem[];\n+  },\n+\n+  allowSpaces: false,\n+\n+  render: () => {\n+    let component: ReactRenderer<EmojiListRef, EmojiListProps>;\n+    let popup: TippyInstance[] | null = null;\n+\n+    return {\n+      onStart: (props: SuggestionProps): void => {\n+        const emojiListProps: EmojiListProps = {\n+          items: props.items,\n+          command: props.command,\n+          editor: props.editor,\n+        };\n+\n+        getExtensionStorage(props.editor, CORE_EXTENSIONS.UTILITY).activeDropbarExtensions.push(CORE_EXTENSIONS.EMOJI);\n+\n+        component = new ReactRenderer(EmojiList, {\n+          props: emojiListProps,\n+          editor: props.editor,\n+        });\n+\n+        if (!props.clientRect) return;\n+\n+        popup = tippy(\"body\", {\n+          getReferenceClientRect: props.clientRect as () => DOMRect,\n+          appendTo: () =>\n+            document.querySelector(\".active-editor\") ??\n+            document.querySelector('[id^=\"editor-container\"]') ??\n+            document.body,\n+          content: component.element,\n+          showOnCreate: true,\n+          interactive: true,\n+          trigger: \"manual\",\n+          placement: \"bottom-start\",\n+          hideOnClick: false,\n+          sticky: \"reference\",\n+          animation: false,\n+          duration: 0,\n+          offset: [0, 8],\n+        });\n+      },\n+\n+      onUpdate: (props: SuggestionProps): void => {\n+        const emojiListProps: EmojiListProps = {\n+          items: props.items,\n+          command: props.command,\n+          editor: props.editor,\n+        };\n+\n+        component.updateProps(emojiListProps);\n+\n+        if (popup && props.clientRect) {\n+          popup[0]?.setProps({\n+            getReferenceClientRect: props.clientRect as () => DOMRect,\n+          });\n+        }\n+      },\n+\n+      onKeyDown: (props: SuggestionKeyDownProps): boolean => {\n+        if (props.event.key === \"Escape\") {\n+          if (popup) {\n+            popup[0]?.hide();\n+          }\n+          if (component) {\n+            component.destroy();\n+          }\n+          return true;\n+        }\n+\n+        return component.ref?.onKeyDown(props) || false;\n+      },\n+\n+      onExit: (props: SuggestionProps): void => {\n+        const utilityStorage = getExtensionStorage(props.editor, CORE_EXTENSIONS.UTILITY);\n+        const index = utilityStorage.activeDropbarExtensions.indexOf(CORE_EXTENSIONS.EMOJI);\n+        if (index > -1) {\n+          utilityStorage.activeDropbarExtensions.splice(index, 1);\n+        }\n+\n+        if (popup) {\n+          popup[0]?.destroy();\n+        }\n+        if (component) {\n+          component.destroy();\n+        }\n+      },\n+    };\n+  },\n+};\n+\n+export default emojiSuggestion;\n"
        },
        {
          "path": "packages/editor/src/core/extensions/enter-key.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/enter-key.ts\n===================================================================\n--- packages/editor/src/core/extensions/enter-key.ts\t757019b (parent)\n+++ packages/editor/src/core/extensions/enter-key.ts\tba6b822 (commit)\n@@ -10,13 +10,15 @@\n \n     addKeyboardShortcuts(this) {\n       return {\n         Enter: () => {\n-          const isMentionOpen = getExtensionStorage(this.editor, CORE_EXTENSIONS.MENTION)?.mentionsOpen;\n-          if (!isMentionOpen) {\n+          const { activeDropbarExtensions } = getExtensionStorage(this.editor, CORE_EXTENSIONS.UTILITY);\n+\n+          if (activeDropbarExtensions.length === 0) {\n             onEnterKeyPress?.();\n             return true;\n           }\n+\n           return false;\n         },\n         \"Shift-Enter\": ({ editor }) =>\n           editor.commands.first(({ commands }) => [\n"
        },
        {
          "path": "packages/editor/src/core/extensions/extensions.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/extensions.ts\n===================================================================\n--- packages/editor/src/core/extensions/extensions.ts\t757019b (parent)\n+++ packages/editor/src/core/extensions/extensions.ts\tba6b822 (commit)\n@@ -38,8 +38,9 @@\n // types\n import type { IEditorProps } from \"@/types\";\n // local imports\n import { CustomImageExtension } from \"./custom-image/extension\";\n+import { EmojiExtension } from \"./emoji/extension\";\n \n type TArguments = Pick<\n   IEditorProps,\n   \"disabledExtensions\" | \"flaggedExtensions\" | \"fileHandler\" | \"mentionHandler\" | \"placeholder\" | \"tabIndex\"\n@@ -96,8 +97,9 @@\n           \"text-custom-text-300 transition-all motion-reduce:transition-none motion-reduce:hover:transform-none duration-200 ease-[cubic-bezier(0.165, 0.84, 0.44, 1)]\",\n       },\n       ...(enableHistory ? {} : { history: false }),\n     }),\n+    EmojiExtension,\n     CustomQuoteExtension,\n     CustomHorizontalRule.configure({\n       HTMLAttributes: {\n         class: \"py-4 border-custom-border-400\",\n"
        },
        {
          "path": "packages/editor/src/core/extensions/mentions/extension-config.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/mentions/extension-config.ts\n===================================================================\n--- packages/editor/src/core/extensions/mentions/extension-config.ts\t757019b (parent)\n+++ packages/editor/src/core/extensions/mentions/extension-config.ts\tba6b822 (commit)\n@@ -11,13 +11,9 @@\n   renderComponent: TMentionHandler[\"renderComponent\"];\n   getMentionedEntityDetails: TMentionHandler[\"getMentionedEntityDetails\"];\n };\n \n-export type MentionExtensionStorage = {\n-  mentionsOpen: boolean;\n-};\n-\n-export const CustomMentionExtensionConfig = Mention.extend<TMentionExtensionOptions, MentionExtensionStorage>({\n+export const CustomMentionExtensionConfig = Mention.extend<TMentionExtensionOptions>({\n   addAttributes() {\n     return {\n       [EMentionComponentAttributeNames.ID]: {\n         default: null,\n@@ -53,9 +49,8 @@\n \n   addStorage() {\n     const options = this.options;\n     return {\n-      mentionsOpen: false,\n       markdown: {\n         serialize(state: MarkdownSerializerState, node: NodeType) {\n           state.write(getMentionDisplayText(options, node));\n         },\n"
        },
        {
          "path": "packages/editor/src/core/extensions/mentions/utils.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/mentions/utils.ts\n===================================================================\n--- packages/editor/src/core/extensions/mentions/utils.ts\t757019b (parent)\n+++ packages/editor/src/core/extensions/mentions/utils.ts\tba6b822 (commit)\n@@ -7,8 +7,10 @@\n // types\n import { TMentionHandler } from \"@/types\";\n // local components\n import { MentionsListDropdown, MentionsListDropdownProps } from \"./mentions-list-dropdown\";\n+import { getExtensionStorage } from \"@/helpers/get-extension-storage\";\n+import { CORE_EXTENSIONS } from \"@/constants/extension\";\n \n export const renderMentionsDropdown =\n   (props: Pick<TMentionHandler, \"searchCallback\">): SuggestionOptions[\"render\"] =>\n   // @ts-expect-error - Tiptap types are incorrect\n@@ -27,9 +29,11 @@\n             searchCallback,\n           },\n           editor: props.editor,\n         });\n-        props.editor.storage.mentionsOpen = true;\n+        getExtensionStorage(props.editor, CORE_EXTENSIONS.UTILITY).activeDropbarExtensions.push(\n+          CORE_EXTENSIONS.MENTION\n+        );\n         // @ts-expect-error - Tippy types are incorrect\n         popup = tippy(\"body\", {\n           getReferenceClientRect: props.clientRect,\n           appendTo: () =>\n@@ -63,9 +67,13 @@\n         }\n         return false;\n       },\n       onExit: (props: { editor: Editor; event: KeyboardEvent }) => {\n-        props.editor.storage.mentionsOpen = false;\n+        const utilityStorage = getExtensionStorage(props.editor, CORE_EXTENSIONS.UTILITY);\n+        const index = utilityStorage.activeDropbarExtensions.indexOf(CORE_EXTENSIONS.MENTION);\n+        if (index > -1) {\n+          utilityStorage.activeDropbarExtensions.splice(index, 1);\n+        }\n         popup?.[0]?.destroy();\n         component?.destroy();\n       },\n     };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/slash-commands/command-items-list.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/slash-commands/command-items-list.tsx\n===================================================================\n--- packages/editor/src/core/extensions/slash-commands/command-items-list.tsx\t757019b (parent)\n+++ packages/editor/src/core/extensions/slash-commands/command-items-list.tsx\tba6b822 (commit)\n@@ -13,8 +13,9 @@\n   ListOrdered,\n   ListTodo,\n   MessageSquareText,\n   MinusSquare,\n+  Smile,\n   Table,\n   TextQuote,\n } from \"lucide-react\";\n // constants\n@@ -188,8 +189,19 @@\n             searchTerms: [\"line\", \"divider\", \"horizontal\", \"rule\", \"separate\"],\n             icon: <MinusSquare className=\"size-3.5\" />,\n             command: ({ editor, range }) => editor.chain().focus().deleteRange(range).setHorizontalRule().run(),\n           },\n+          {\n+            commandKey: \"emoji\",\n+            key: \"emoji\",\n+            title: \"Emoji\",\n+            description: \"Insert an emoji\",\n+            searchTerms: [\"emoji\", \"icons\", \"reaction\", \"emoticon\", \"emotags\"],\n+            icon: <Smile className=\"size-3.5\" />,\n+            command: ({ editor, range }) => {\n+              editor.chain().focus().insertContentAt(range, \"<p>:</p>\").run();\n+            },\n+          },\n         ],\n       },\n       {\n         key: \"text-colors\",\n"
        },
        {
          "path": "packages/editor/src/core/extensions/utility.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/utility.ts\n===================================================================\n--- packages/editor/src/core/extensions/utility.ts\t757019b (parent)\n+++ packages/editor/src/core/extensions/utility.ts\tba6b822 (commit)\n@@ -1,14 +1,18 @@\n import { Extension } from \"@tiptap/core\";\n import codemark from \"prosemirror-codemark\";\n // helpers\n+import { CORE_EXTENSIONS } from \"@/constants/extension\";\n import { restorePublicImages } from \"@/helpers/image-helpers\";\n // plugins\n+import { TAdditionalActiveDropbarExtensions } from \"@/plane-editor/types/utils\";\n import { DropHandlerPlugin } from \"@/plugins/drop\";\n import { FilePlugins } from \"@/plugins/file/root\";\n import { MarkdownClipboardPlugin } from \"@/plugins/markdown-clipboard\";\n // types\n+\n import type { IEditorProps, TEditorAsset, TFileHandler, TReadOnlyFileHandler } from \"@/types\";\n+type TActiveDropbarExtensions = CORE_EXTENSIONS.MENTION | CORE_EXTENSIONS.EMOJI | TAdditionalActiveDropbarExtensions;\n \n declare module \"@tiptap/core\" {\n   interface Commands {\n     utility: {\n@@ -29,8 +33,9 @@\n export interface UtilityExtensionStorage {\n   assetsList: TEditorAsset[];\n   assetsUploadStatus: TFileHandler[\"assetsUploadStatus\"];\n   uploadInProgress: boolean;\n+  activeDropbarExtensions: TActiveDropbarExtensions[];\n }\n \n type Props = Pick<IEditorProps, \"disabledExtensions\"> & {\n   fileHandler: TFileHandler | TReadOnlyFileHandler;\n@@ -69,8 +74,9 @@\n       return {\n         assetsList: [],\n         assetsUploadStatus: isEditable && \"assetsUploadStatus\" in fileHandler ? fileHandler.assetsUploadStatus : {},\n         uploadInProgress: false,\n+        activeDropbarExtensions: [],\n       };\n     },\n \n     addCommands() {\n"
        },
        {
          "path": "packages/editor/src/core/types/editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/editor.ts\n===================================================================\n--- packages/editor/src/core/types/editor.ts\t757019b (parent)\n+++ packages/editor/src/core/types/editor.ts\tba6b822 (commit)\n@@ -46,9 +46,10 @@\n   | \"text-color\"\n   | \"background-color\"\n   | \"text-align\"\n   | \"callout\"\n-  | \"attachment\";\n+  | \"attachment\"\n+  | \"emoji\";\n \n export type TCommandExtraProps = {\n   image: {\n     savedSelection: Selection | null;\n"
        },
        {
          "path": "packages/editor/src/styles/editor.css",
          "status": "modified",
          "diff": "Index: packages/editor/src/styles/editor.css\n===================================================================\n--- packages/editor/src/styles/editor.css\t757019b (parent)\n+++ packages/editor/src/styles/editor.css\tba6b822 (commit)\n@@ -489,4 +489,14 @@\n [data-background-color=\"purple\"] {\n   background-color: var(--editor-colors-purple-background);\n }\n /* end background colors */\n+\n+/* emoji styles */\n+span[data-name][data-type=\"emoji\"] img {\n+  display: inline !important;\n+  vertical-align: middle;\n+  margin: 0;\n+  padding: 0;\n+  max-width: 1.25em;\n+  max-height: 1.25em;\n+}\n"
        },
        {
          "path": "yarn.lock",
          "status": "modified",
          "diff": "Index: yarn.lock\n===================================================================\n--- yarn.lock\t757019b (parent)\n+++ yarn.lock\tba6b822 (commit)\n@@ -147,8 +147,9 @@\n \n \"@babel/helpers@7.26.10\", \"@babel/helpers@^7.27.4\":\n   version \"7.26.10\"\n   resolved \"https://registry.yarnpkg.com/@babel/helpers/-/helpers-7.26.10.tgz#6baea3cd62ec2d0c1068778d63cb1314f6637384\"\n+  resolved \"https://registry.yarnpkg.com/@babel/helpers/-/helpers-7.26.10.tgz#6baea3cd62ec2d0c1068778d63cb1314f6637384\"\n   integrity sha512-UPYc3SauzZ3JGgj87GgZ89JVdC5dj0AoetR5Bw6wj4niittNyFh6+eOGonYvJ1ao6B8lEa3Q3klS7ADZ53bc5g==\n   dependencies:\n     \"@babel/template\" \"^7.26.9\"\n     \"@babel/types\" \"^7.26.10\"\n@@ -161,8 +162,588 @@\n     \"@babel/types\" \"^7.27.3\"\n \n \"@babel/runtime@7.26.10\", \"@babel/runtime@^7.0.0\", \"@babel/runtime@^7.1.2\", \"@babel/runtime@^7.12.5\", \"@babel/runtime@^7.17.8\", \"@babel/runtime@^7.18.3\", \"@babel/runtime@^7.20.13\", \"@babel/runtime@^7.23.9\", \"@babel/runtime@^7.5.5\", \"@babel/runtime@^7.8.7\":\n   version \"7.26.10\"\n+  resolved \"https://registry.npmjs.org/@babel/parser/-/parser-7.26.10.tgz#e9bdb82f14b97df6569b0b038edd436839c57749\"\n+  integrity sha512-6aQR2zGE/QFi8JpDLjUZEPYOs7+mhKXm86VaKFiLP35JQwQb6bwUE+XbvkH0EptsYhbNBSUGaUBLKqxH1xSgsA==\n+  dependencies:\n+    \"@babel/types\" \"^7.26.10\"\n+\n+\"@babel/plugin-bugfix-firefox-class-in-computed-class-key@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-bugfix-firefox-class-in-computed-class-key/-/plugin-bugfix-firefox-class-in-computed-class-key-7.25.9.tgz#cc2e53ebf0a0340777fff5ed521943e253b4d8fe\"\n+  integrity sha512-ZkRyVkThtxQ/J6nv3JFYv1RYY+JT5BvU0y3k5bWrmuG4woXypRa4PXmm9RhOwodRkYFWqC0C0cqcJ4OqR7kW+g==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/traverse\" \"^7.25.9\"\n+\n+\"@babel/plugin-bugfix-safari-class-field-initializer-scope@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-bugfix-safari-class-field-initializer-scope/-/plugin-bugfix-safari-class-field-initializer-scope-7.25.9.tgz#af9e4fb63ccb8abcb92375b2fcfe36b60c774d30\"\n+  integrity sha512-MrGRLZxLD/Zjj0gdU15dfs+HH/OXvnw/U4jJD8vpcP2CJQapPEv1IWwjc/qMg7ItBlPwSv1hRBbb7LeuANdcnw==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-bugfix-safari-id-destructuring-collision-in-function-expression@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-bugfix-safari-id-destructuring-collision-in-function-expression/-/plugin-bugfix-safari-id-destructuring-collision-in-function-expression-7.25.9.tgz#e8dc26fcd616e6c5bf2bd0d5a2c151d4f92a9137\"\n+  integrity sha512-2qUwwfAFpJLZqxd02YW9btUCZHl+RFvdDkNfZwaIJrvB8Tesjsk8pEQkTvGwZXLqXUx/2oyY3ySRhm6HOXuCug==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-bugfix-v8-spread-parameters-in-optional-chaining@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-bugfix-v8-spread-parameters-in-optional-chaining/-/plugin-bugfix-v8-spread-parameters-in-optional-chaining-7.25.9.tgz#807a667f9158acac6f6164b4beb85ad9ebc9e1d1\"\n+  integrity sha512-6xWgLZTJXwilVjlnV7ospI3xi+sl8lN8rXXbBD6vYn3UYDlGsag8wrZkKcSI8G6KgqKP7vNFaDgeDnfAABq61g==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/helper-skip-transparent-expression-wrappers\" \"^7.25.9\"\n+    \"@babel/plugin-transform-optional-chaining\" \"^7.25.9\"\n+\n+\"@babel/plugin-bugfix-v8-static-class-fields-redefine-readonly@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-bugfix-v8-static-class-fields-redefine-readonly/-/plugin-bugfix-v8-static-class-fields-redefine-readonly-7.25.9.tgz#de7093f1e7deaf68eadd7cc6b07f2ab82543269e\"\n+  integrity sha512-aLnMXYPnzwwqhYSCyXfKkIkYgJ8zv9RK+roo9DkTXz38ynIhd9XCbN08s3MGvqL2MYGVUGdRQLL/JqBIeJhJBg==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/traverse\" \"^7.25.9\"\n+\n+\"@babel/plugin-proposal-private-property-in-object@7.21.0-placeholder-for-preset-env.2\":\n+  version \"7.21.0-placeholder-for-preset-env.2\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-proposal-private-property-in-object/-/plugin-proposal-private-property-in-object-7.21.0-placeholder-for-preset-env.2.tgz#7844f9289546efa9febac2de4cfe358a050bd703\"\n+  integrity sha512-SOSkfJDddaM7mak6cPEpswyTRnuRltl429hMraQEglW+OkovnCzsiszTmsrlY//qLFjCpQDFRvjdm2wA5pPm9w==\n+\n+\"@babel/plugin-syntax-import-assertions@^7.26.0\":\n+  version \"7.26.0\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-syntax-import-assertions/-/plugin-syntax-import-assertions-7.26.0.tgz#620412405058efa56e4a564903b79355020f445f\"\n+  integrity sha512-QCWT5Hh830hK5EQa7XzuqIkQU9tT/whqbDz7kuaZMHFl1inRRg7JnuAEOQ0Ur0QUl0NufCk1msK2BeY79Aj/eg==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-syntax-import-attributes@^7.26.0\":\n+  version \"7.26.0\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-syntax-import-attributes/-/plugin-syntax-import-attributes-7.26.0.tgz#3b1412847699eea739b4f2602c74ce36f6b0b0f7\"\n+  integrity sha512-e2dttdsJ1ZTpi3B9UYGLw41hifAubg19AtCu/2I/F1QNVclOBr1dYpTdmdyZ84Xiz43BS/tCUkMAZNLv12Pi+A==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-syntax-jsx@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-syntax-jsx/-/plugin-syntax-jsx-7.25.9.tgz#a34313a178ea56f1951599b929c1ceacee719290\"\n+  integrity sha512-ld6oezHQMZsZfp6pWtbjaNDF2tiiCYYDqQszHt5VV437lewP9aSi2Of99CK0D0XB21k7FLgnLcmQKyKzynfeAA==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-syntax-typescript@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-syntax-typescript/-/plugin-syntax-typescript-7.25.9.tgz#67dda2b74da43727cf21d46cf9afef23f4365399\"\n+  integrity sha512-hjMgRy5hb8uJJjUcdWunWVcoi9bGpJp8p5Ol1229PoN6aytsLwNMgmdftO23wnCLMfVmTwZDWMPNq/D1SY60JQ==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-syntax-unicode-sets-regex@^7.18.6\":\n+  version \"7.18.6\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-syntax-unicode-sets-regex/-/plugin-syntax-unicode-sets-regex-7.18.6.tgz#d49a3b3e6b52e5be6740022317580234a6a47357\"\n+  integrity sha512-727YkEAPwSIQTv5im8QHz3upqp92JTWhidIC81Tdx4VJYIte/VndKf1qKrfnnhPLiPghStWfvC/iFaMCQu7Nqg==\n+  dependencies:\n+    \"@babel/helper-create-regexp-features-plugin\" \"^7.18.6\"\n+    \"@babel/helper-plugin-utils\" \"^7.18.6\"\n+\n+\"@babel/plugin-transform-arrow-functions@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-arrow-functions/-/plugin-transform-arrow-functions-7.25.9.tgz#7821d4410bee5daaadbb4cdd9a6649704e176845\"\n+  integrity sha512-6jmooXYIwn9ca5/RylZADJ+EnSxVUS5sjeJ9UPk6RWRzXCmOJCy6dqItPJFpw2cuCangPK4OYr5uhGKcmrm5Qg==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-async-generator-functions@^7.26.8\":\n+  version \"7.26.8\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-async-generator-functions/-/plugin-transform-async-generator-functions-7.26.8.tgz#5e3991135e3b9c6eaaf5eff56d1ae5a11df45ff8\"\n+  integrity sha512-He9Ej2X7tNf2zdKMAGOsmg2MrFc+hfoAhd3po4cWfo/NWjzEAKa0oQruj1ROVUdl0e6fb6/kE/G3SSxE0lRJOg==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.26.5\"\n+    \"@babel/helper-remap-async-to-generator\" \"^7.25.9\"\n+    \"@babel/traverse\" \"^7.26.8\"\n+\n+\"@babel/plugin-transform-async-to-generator@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-async-to-generator/-/plugin-transform-async-to-generator-7.25.9.tgz#c80008dacae51482793e5a9c08b39a5be7e12d71\"\n+  integrity sha512-NT7Ejn7Z/LjUH0Gv5KsBCxh7BH3fbLTV0ptHvpeMvrt3cPThHfJfst9Wrb7S8EvJ7vRTFI7z+VAvFVEQn/m5zQ==\n+  dependencies:\n+    \"@babel/helper-module-imports\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/helper-remap-async-to-generator\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-block-scoped-functions@^7.26.5\":\n+  version \"7.26.5\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-block-scoped-functions/-/plugin-transform-block-scoped-functions-7.26.5.tgz#3dc4405d31ad1cbe45293aa57205a6e3b009d53e\"\n+  integrity sha512-chuTSY+hq09+/f5lMj8ZSYgCFpppV2CbYrhNFJ1BFoXpiWPnnAb7R0MqrafCpN8E1+YRrtM1MXZHJdIx8B6rMQ==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.26.5\"\n+\n+\"@babel/plugin-transform-block-scoping@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-block-scoping/-/plugin-transform-block-scoping-7.25.9.tgz#c33665e46b06759c93687ca0f84395b80c0473a1\"\n+  integrity sha512-1F05O7AYjymAtqbsFETboN1NvBdcnzMerO+zlMyJBEz6WkMdejvGWw9p05iTSjC85RLlBseHHQpYaM4gzJkBGg==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-class-properties@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-class-properties/-/plugin-transform-class-properties-7.25.9.tgz#a8ce84fedb9ad512549984101fa84080a9f5f51f\"\n+  integrity sha512-bbMAII8GRSkcd0h0b4X+36GksxuheLFjP65ul9w6C3KgAamI3JqErNgSrosX6ZPj+Mpim5VvEbawXxJCyEUV3Q==\n+  dependencies:\n+    \"@babel/helper-create-class-features-plugin\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-class-static-block@^7.26.0\":\n+  version \"7.26.0\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-class-static-block/-/plugin-transform-class-static-block-7.26.0.tgz#6c8da219f4eb15cae9834ec4348ff8e9e09664a0\"\n+  integrity sha512-6J2APTs7BDDm+UMqP1useWqhcRAXo0WIoVj26N7kPFB6S73Lgvyka4KTZYIxtgYXiN5HTyRObA72N2iu628iTQ==\n+  dependencies:\n+    \"@babel/helper-create-class-features-plugin\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-classes@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-classes/-/plugin-transform-classes-7.25.9.tgz#7152457f7880b593a63ade8a861e6e26a4469f52\"\n+  integrity sha512-mD8APIXmseE7oZvZgGABDyM34GUmK45Um2TXiBUt7PnuAxrgoSVf123qUzPxEr/+/BHrRn5NMZCdE2m/1F8DGg==\n+  dependencies:\n+    \"@babel/helper-annotate-as-pure\" \"^7.25.9\"\n+    \"@babel/helper-compilation-targets\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/helper-replace-supers\" \"^7.25.9\"\n+    \"@babel/traverse\" \"^7.25.9\"\n+    globals \"^11.1.0\"\n+\n+\"@babel/plugin-transform-computed-properties@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-computed-properties/-/plugin-transform-computed-properties-7.25.9.tgz#db36492c78460e534b8852b1d5befe3c923ef10b\"\n+  integrity sha512-HnBegGqXZR12xbcTHlJ9HGxw1OniltT26J5YpfruGqtUHlz/xKf/G2ak9e+t0rVqrjXa9WOhvYPz1ERfMj23AA==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/template\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-destructuring@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-destructuring/-/plugin-transform-destructuring-7.25.9.tgz#966ea2595c498224340883602d3cfd7a0c79cea1\"\n+  integrity sha512-WkCGb/3ZxXepmMiX101nnGiU+1CAdut8oHyEOHxkKuS1qKpU2SMXE2uSvfz8PBuLd49V6LEsbtyPhWC7fnkgvQ==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-dotall-regex@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-dotall-regex/-/plugin-transform-dotall-regex-7.25.9.tgz#bad7945dd07734ca52fe3ad4e872b40ed09bb09a\"\n+  integrity sha512-t7ZQ7g5trIgSRYhI9pIJtRl64KHotutUJsh4Eze5l7olJv+mRSg4/MmbZ0tv1eeqRbdvo/+trvJD/Oc5DmW2cA==\n+  dependencies:\n+    \"@babel/helper-create-regexp-features-plugin\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-duplicate-keys@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-duplicate-keys/-/plugin-transform-duplicate-keys-7.25.9.tgz#8850ddf57dce2aebb4394bb434a7598031059e6d\"\n+  integrity sha512-LZxhJ6dvBb/f3x8xwWIuyiAHy56nrRG3PeYTpBkkzkYRRQ6tJLu68lEF5VIqMUZiAV7a8+Tb78nEoMCMcqjXBw==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-duplicate-named-capturing-groups-regex@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-duplicate-named-capturing-groups-regex/-/plugin-transform-duplicate-named-capturing-groups-regex-7.25.9.tgz#6f7259b4de127721a08f1e5165b852fcaa696d31\"\n+  integrity sha512-0UfuJS0EsXbRvKnwcLjFtJy/Sxc5J5jhLHnFhy7u4zih97Hz6tJkLU+O+FMMrNZrosUPxDi6sYxJ/EA8jDiAog==\n+  dependencies:\n+    \"@babel/helper-create-regexp-features-plugin\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-dynamic-import@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-dynamic-import/-/plugin-transform-dynamic-import-7.25.9.tgz#23e917de63ed23c6600c5dd06d94669dce79f7b8\"\n+  integrity sha512-GCggjexbmSLaFhqsojeugBpeaRIgWNTcgKVq/0qIteFEqY2A+b9QidYadrWlnbWQUrW5fn+mCvf3tr7OeBFTyg==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-exponentiation-operator@^7.26.3\":\n+  version \"7.26.3\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-exponentiation-operator/-/plugin-transform-exponentiation-operator-7.26.3.tgz#e29f01b6de302c7c2c794277a48f04a9ca7f03bc\"\n+  integrity sha512-7CAHcQ58z2chuXPWblnn1K6rLDnDWieghSOEmqQsrBenH0P9InCUtOJYD89pvngljmZlJcz3fcmgYsXFNGa1ZQ==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-export-namespace-from@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-export-namespace-from/-/plugin-transform-export-namespace-from-7.25.9.tgz#90745fe55053394f554e40584cda81f2c8a402a2\"\n+  integrity sha512-2NsEz+CxzJIVOPx2o9UsW1rXLqtChtLoVnwYHHiB04wS5sgn7mrV45fWMBX0Kk+ub9uXytVYfNP2HjbVbCB3Ww==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-for-of@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-for-of/-/plugin-transform-for-of-7.25.9.tgz#4bdc7d42a213397905d89f02350c5267866d5755\"\n+  integrity sha512-LqHxduHoaGELJl2uhImHwRQudhCM50pT46rIBNvtT/Oql3nqiS3wOwP+5ten7NpYSXrrVLgtZU3DZmPtWZo16A==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/helper-skip-transparent-expression-wrappers\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-function-name@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-function-name/-/plugin-transform-function-name-7.25.9.tgz#939d956e68a606661005bfd550c4fc2ef95f7b97\"\n+  integrity sha512-8lP+Yxjv14Vc5MuWBpJsoUCd3hD6V9DgBon2FVYL4jJgbnVQ9fTgYmonchzZJOVNgzEgbxp4OwAf6xz6M/14XA==\n+  dependencies:\n+    \"@babel/helper-compilation-targets\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/traverse\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-json-strings@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-json-strings/-/plugin-transform-json-strings-7.25.9.tgz#c86db407cb827cded902a90c707d2781aaa89660\"\n+  integrity sha512-xoTMk0WXceiiIvsaquQQUaLLXSW1KJ159KP87VilruQm0LNNGxWzahxSS6T6i4Zg3ezp4vA4zuwiNUR53qmQAw==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-literals@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-literals/-/plugin-transform-literals-7.25.9.tgz#1a1c6b4d4aa59bc4cad5b6b3a223a0abd685c9de\"\n+  integrity sha512-9N7+2lFziW8W9pBl2TzaNht3+pgMIRP74zizeCSrtnSKVdUl8mAjjOP2OOVQAfZ881P2cNjDj1uAMEdeD50nuQ==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-logical-assignment-operators@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-logical-assignment-operators/-/plugin-transform-logical-assignment-operators-7.25.9.tgz#b19441a8c39a2fda0902900b306ea05ae1055db7\"\n+  integrity sha512-wI4wRAzGko551Y8eVf6iOY9EouIDTtPb0ByZx+ktDGHwv6bHFimrgJM/2T021txPZ2s4c7bqvHbd+vXG6K948Q==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-member-expression-literals@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-member-expression-literals/-/plugin-transform-member-expression-literals-7.25.9.tgz#63dff19763ea64a31f5e6c20957e6a25e41ed5de\"\n+  integrity sha512-PYazBVfofCQkkMzh2P6IdIUaCEWni3iYEerAsRWuVd8+jlM1S9S9cz1dF9hIzyoZ8IA3+OwVYIp9v9e+GbgZhA==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-modules-amd@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-modules-amd/-/plugin-transform-modules-amd-7.25.9.tgz#49ba478f2295101544abd794486cd3088dddb6c5\"\n+  integrity sha512-g5T11tnI36jVClQlMlt4qKDLlWnG5pP9CSM4GhdRciTNMRgkfpo5cR6b4rGIOYPgRRuFAvwjPQ/Yk+ql4dyhbw==\n+  dependencies:\n+    \"@babel/helper-module-transforms\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-modules-commonjs@^7.25.9\", \"@babel/plugin-transform-modules-commonjs@^7.26.3\":\n+  version \"7.26.3\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-modules-commonjs/-/plugin-transform-modules-commonjs-7.26.3.tgz#8f011d44b20d02c3de44d8850d971d8497f981fb\"\n+  integrity sha512-MgR55l4q9KddUDITEzEFYn5ZsGDXMSsU9E+kh7fjRXTIC3RHqfCo8RPRbyReYJh44HQ/yomFkqbOFohXvDCiIQ==\n+  dependencies:\n+    \"@babel/helper-module-transforms\" \"^7.26.0\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-modules-systemjs@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-modules-systemjs/-/plugin-transform-modules-systemjs-7.25.9.tgz#8bd1b43836269e3d33307151a114bcf3ba6793f8\"\n+  integrity sha512-hyss7iIlH/zLHaehT+xwiymtPOpsiwIIRlCAOwBB04ta5Tt+lNItADdlXw3jAWZ96VJ2jlhl/c+PNIQPKNfvcA==\n+  dependencies:\n+    \"@babel/helper-module-transforms\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/helper-validator-identifier\" \"^7.25.9\"\n+    \"@babel/traverse\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-modules-umd@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-modules-umd/-/plugin-transform-modules-umd-7.25.9.tgz#6710079cdd7c694db36529a1e8411e49fcbf14c9\"\n+  integrity sha512-bS9MVObUgE7ww36HEfwe6g9WakQ0KF07mQF74uuXdkoziUPfKyu/nIm663kz//e5O1nPInPFx36z7WJmJ4yNEw==\n+  dependencies:\n+    \"@babel/helper-module-transforms\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-named-capturing-groups-regex@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-named-capturing-groups-regex/-/plugin-transform-named-capturing-groups-regex-7.25.9.tgz#454990ae6cc22fd2a0fa60b3a2c6f63a38064e6a\"\n+  integrity sha512-oqB6WHdKTGl3q/ItQhpLSnWWOpjUJLsOCLVyeFgeTktkBSCiurvPOsyt93gibI9CmuKvTUEtWmG5VhZD+5T/KA==\n+  dependencies:\n+    \"@babel/helper-create-regexp-features-plugin\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-new-target@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-new-target/-/plugin-transform-new-target-7.25.9.tgz#42e61711294b105c248336dcb04b77054ea8becd\"\n+  integrity sha512-U/3p8X1yCSoKyUj2eOBIx3FOn6pElFOKvAAGf8HTtItuPyB+ZeOqfn+mvTtg9ZlOAjsPdK3ayQEjqHjU/yLeVQ==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-nullish-coalescing-operator@^7.26.6\":\n+  version \"7.26.6\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-nullish-coalescing-operator/-/plugin-transform-nullish-coalescing-operator-7.26.6.tgz#fbf6b3c92cb509e7b319ee46e3da89c5bedd31fe\"\n+  integrity sha512-CKW8Vu+uUZneQCPtXmSBUC6NCAUdya26hWCElAWh5mVSlSRsmiCPUUDKb3Z0szng1hiAJa098Hkhg9o4SE35Qw==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.26.5\"\n+\n+\"@babel/plugin-transform-numeric-separator@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-numeric-separator/-/plugin-transform-numeric-separator-7.25.9.tgz#bfed75866261a8b643468b0ccfd275f2033214a1\"\n+  integrity sha512-TlprrJ1GBZ3r6s96Yq8gEQv82s8/5HnCVHtEJScUj90thHQbwe+E5MLhi2bbNHBEJuzrvltXSru+BUxHDoog7Q==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-object-rest-spread@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-object-rest-spread/-/plugin-transform-object-rest-spread-7.25.9.tgz#0203725025074164808bcf1a2cfa90c652c99f18\"\n+  integrity sha512-fSaXafEE9CVHPweLYw4J0emp1t8zYTXyzN3UuG+lylqkvYd7RMrsOQ8TYx5RF231be0vqtFC6jnx3UmpJmKBYg==\n+  dependencies:\n+    \"@babel/helper-compilation-targets\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/plugin-transform-parameters\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-object-super@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-object-super/-/plugin-transform-object-super-7.25.9.tgz#385d5de135162933beb4a3d227a2b7e52bb4cf03\"\n+  integrity sha512-Kj/Gh+Rw2RNLbCK1VAWj2U48yxxqL2x0k10nPtSdRa0O2xnHXalD0s+o1A6a0W43gJ00ANo38jxkQreckOzv5A==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/helper-replace-supers\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-optional-catch-binding@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-optional-catch-binding/-/plugin-transform-optional-catch-binding-7.25.9.tgz#10e70d96d52bb1f10c5caaac59ac545ea2ba7ff3\"\n+  integrity sha512-qM/6m6hQZzDcZF3onzIhZeDHDO43bkNNlOX0i8n3lR6zLbu0GN2d8qfM/IERJZYauhAHSLHy39NF0Ctdvcid7g==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-optional-chaining@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-optional-chaining/-/plugin-transform-optional-chaining-7.25.9.tgz#e142eb899d26ef715435f201ab6e139541eee7dd\"\n+  integrity sha512-6AvV0FsLULbpnXeBjrY4dmWF8F7gf8QnvTEoO/wX/5xm/xE1Xo8oPuD3MPS+KS9f9XBEAWN7X1aWr4z9HdOr7A==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/helper-skip-transparent-expression-wrappers\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-parameters@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-parameters/-/plugin-transform-parameters-7.25.9.tgz#b856842205b3e77e18b7a7a1b94958069c7ba257\"\n+  integrity sha512-wzz6MKwpnshBAiRmn4jR8LYz/g8Ksg0o80XmwZDlordjwEk9SxBzTWC7F5ef1jhbrbOW2DJ5J6ayRukrJmnr0g==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-private-methods@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-private-methods/-/plugin-transform-private-methods-7.25.9.tgz#847f4139263577526455d7d3223cd8bda51e3b57\"\n+  integrity sha512-D/JUozNpQLAPUVusvqMxyvjzllRaF8/nSrP1s2YGQT/W4LHK4xxsMcHjhOGTS01mp9Hda8nswb+FblLdJornQw==\n+  dependencies:\n+    \"@babel/helper-create-class-features-plugin\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-private-property-in-object@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-private-property-in-object/-/plugin-transform-private-property-in-object-7.25.9.tgz#9c8b73e64e6cc3cbb2743633885a7dd2c385fe33\"\n+  integrity sha512-Evf3kcMqzXA3xfYJmZ9Pg1OvKdtqsDMSWBDzZOPLvHiTt36E75jLDQo5w1gtRU95Q4E5PDttrTf25Fw8d/uWLw==\n+  dependencies:\n+    \"@babel/helper-annotate-as-pure\" \"^7.25.9\"\n+    \"@babel/helper-create-class-features-plugin\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-property-literals@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-property-literals/-/plugin-transform-property-literals-7.25.9.tgz#d72d588bd88b0dec8b62e36f6fda91cedfe28e3f\"\n+  integrity sha512-IvIUeV5KrS/VPavfSM/Iu+RE6llrHrYIKY1yfCzyO/lMXHQ+p7uGhonmGVisv6tSBSVgWzMBohTcvkC9vQcQFA==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-regenerator@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-regenerator/-/plugin-transform-regenerator-7.25.9.tgz#03a8a4670d6cebae95305ac6defac81ece77740b\"\n+  integrity sha512-vwDcDNsgMPDGP0nMqzahDWE5/MLcX8sv96+wfX7as7LoF/kr97Bo/7fI00lXY4wUXYfVmwIIyG80fGZ1uvt2qg==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    regenerator-transform \"^0.15.2\"\n+\n+\"@babel/plugin-transform-regexp-modifiers@^7.26.0\":\n+  version \"7.26.0\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-regexp-modifiers/-/plugin-transform-regexp-modifiers-7.26.0.tgz#2f5837a5b5cd3842a919d8147e9903cc7455b850\"\n+  integrity sha512-vN6saax7lrA2yA/Pak3sCxuD6F5InBjn9IcrIKQPjpsLvuHYLVroTxjdlVRHjjBWxKOqIwpTXDkOssYT4BFdRw==\n+  dependencies:\n+    \"@babel/helper-create-regexp-features-plugin\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-reserved-words@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-reserved-words/-/plugin-transform-reserved-words-7.25.9.tgz#0398aed2f1f10ba3f78a93db219b27ef417fb9ce\"\n+  integrity sha512-7DL7DKYjn5Su++4RXu8puKZm2XBPHyjWLUidaPEkCUBbE7IPcsrkRHggAOOKydH1dASWdcUBxrkOGNxUv5P3Jg==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-shorthand-properties@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-shorthand-properties/-/plugin-transform-shorthand-properties-7.25.9.tgz#bb785e6091f99f826a95f9894fc16fde61c163f2\"\n+  integrity sha512-MUv6t0FhO5qHnS/W8XCbHmiRWOphNufpE1IVxhK5kuN3Td9FT1x4rx4K42s3RYdMXCXpfWkGSbCSd0Z64xA7Ng==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-spread@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-spread/-/plugin-transform-spread-7.25.9.tgz#24a35153931b4ba3d13cec4a7748c21ab5514ef9\"\n+  integrity sha512-oNknIB0TbURU5pqJFVbOOFspVlrpVwo2H1+HUIsVDvp5VauGGDP1ZEvO8Nn5xyMEs3dakajOxlmkNW7kNgSm6A==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/helper-skip-transparent-expression-wrappers\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-sticky-regex@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-sticky-regex/-/plugin-transform-sticky-regex-7.25.9.tgz#c7f02b944e986a417817b20ba2c504dfc1453d32\"\n+  integrity sha512-WqBUSgeVwucYDP9U/xNRQam7xV8W5Zf+6Eo7T2SRVUFlhRiMNFdFz58u0KZmCVVqs2i7SHgpRnAhzRNmKfi2uA==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-template-literals@^7.26.8\":\n+  version \"7.26.8\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-template-literals/-/plugin-transform-template-literals-7.26.8.tgz#966b15d153a991172a540a69ad5e1845ced990b5\"\n+  integrity sha512-OmGDL5/J0CJPJZTHZbi2XpO0tyT2Ia7fzpW5GURwdtp2X3fMmN8au/ej6peC/T33/+CRiIpA8Krse8hFGVmT5Q==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.26.5\"\n+\n+\"@babel/plugin-transform-typeof-symbol@^7.26.7\":\n+  version \"7.26.7\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-typeof-symbol/-/plugin-transform-typeof-symbol-7.26.7.tgz#d0e33acd9223744c1e857dbd6fa17bd0a3786937\"\n+  integrity sha512-jfoTXXZTgGg36BmhqT3cAYK5qkmqvJpvNrPhaK/52Vgjhw4Rq29s9UqpWWV0D6yuRmgiFH/BUVlkl96zJWqnaw==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.26.5\"\n+\n+\"@babel/plugin-transform-typescript@^7.25.9\":\n+  version \"7.26.8\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-typescript/-/plugin-transform-typescript-7.26.8.tgz#2e9caa870aa102f50d7125240d9dbf91334b0950\"\n+  integrity sha512-bME5J9AC8ChwA7aEPJ6zym3w7aObZULHhbNLU0bKUhKsAkylkzUdq+0kdymh9rzi8nlNFl2bmldFBCKNJBUpuw==\n+  dependencies:\n+    \"@babel/helper-annotate-as-pure\" \"^7.25.9\"\n+    \"@babel/helper-create-class-features-plugin\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.26.5\"\n+    \"@babel/helper-skip-transparent-expression-wrappers\" \"^7.25.9\"\n+    \"@babel/plugin-syntax-typescript\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-unicode-escapes@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-unicode-escapes/-/plugin-transform-unicode-escapes-7.25.9.tgz#a75ef3947ce15363fccaa38e2dd9bc70b2788b82\"\n+  integrity sha512-s5EDrE6bW97LtxOcGj1Khcx5AaXwiMmi4toFWRDP9/y0Woo6pXC+iyPu/KuhKtfSrNFd7jJB+/fkOtZy6aIC6Q==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-unicode-property-regex@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-unicode-property-regex/-/plugin-transform-unicode-property-regex-7.25.9.tgz#a901e96f2c1d071b0d1bb5dc0d3c880ce8f53dd3\"\n+  integrity sha512-Jt2d8Ga+QwRluxRQ307Vlxa6dMrYEMZCgGxoPR8V52rxPyldHu3hdlHspxaqYmE7oID5+kB+UKUB/eWS+DkkWg==\n+  dependencies:\n+    \"@babel/helper-create-regexp-features-plugin\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-unicode-regex@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-unicode-regex/-/plugin-transform-unicode-regex-7.25.9.tgz#5eae747fe39eacf13a8bd006a4fb0b5d1fa5e9b1\"\n+  integrity sha512-yoxstj7Rg9dlNn9UQxzk4fcNivwv4nUYz7fYXBaKxvw/lnmPuOm/ikoELygbYq68Bls3D/D+NBPHiLwZdZZ4HA==\n+  dependencies:\n+    \"@babel/helper-create-regexp-features-plugin\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/plugin-transform-unicode-sets-regex@^7.25.9\":\n+  version \"7.25.9\"\n+  resolved \"https://registry.npmjs.org/@babel/plugin-transform-unicode-sets-regex/-/plugin-transform-unicode-sets-regex-7.25.9.tgz#65114c17b4ffc20fa5b163c63c70c0d25621fabe\"\n+  integrity sha512-8BYqO3GeVNHtx69fdPshN3fnzUNLrWdHhk/icSwigksJGczKSizZ+Z6SBCxTs723Fr5VSNorTIK7a+R2tISvwQ==\n+  dependencies:\n+    \"@babel/helper-create-regexp-features-plugin\" \"^7.25.9\"\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+\n+\"@babel/preset-env@^7.25.4\":\n+  version \"7.26.8\"\n+  resolved \"https://registry.npmjs.org/@babel/preset-env/-/preset-env-7.26.8.tgz#7af0090829b606d2046db99679004731e1dc364d\"\n+  integrity sha512-um7Sy+2THd697S4zJEfv/U5MHGJzkN2xhtsR3T/SWRbVSic62nbISh51VVfU9JiO/L/Z97QczHTaFVkOU8IzNg==\n+  dependencies:\n+    \"@babel/compat-data\" \"^7.26.8\"\n+    \"@babel/helper-compilation-targets\" \"^7.26.5\"\n+    \"@babel/helper-plugin-utils\" \"^7.26.5\"\n+    \"@babel/helper-validator-option\" \"^7.25.9\"\n+    \"@babel/plugin-bugfix-firefox-class-in-computed-class-key\" \"^7.25.9\"\n+    \"@babel/plugin-bugfix-safari-class-field-initializer-scope\" \"^7.25.9\"\n+    \"@babel/plugin-bugfix-safari-id-destructuring-collision-in-function-expression\" \"^7.25.9\"\n+    \"@babel/plugin-bugfix-v8-spread-parameters-in-optional-chaining\" \"^7.25.9\"\n+    \"@babel/plugin-bugfix-v8-static-class-fields-redefine-readonly\" \"^7.25.9\"\n+    \"@babel/plugin-proposal-private-property-in-object\" \"7.21.0-placeholder-for-preset-env.2\"\n+    \"@babel/plugin-syntax-import-assertions\" \"^7.26.0\"\n+    \"@babel/plugin-syntax-import-attributes\" \"^7.26.0\"\n+    \"@babel/plugin-syntax-unicode-sets-regex\" \"^7.18.6\"\n+    \"@babel/plugin-transform-arrow-functions\" \"^7.25.9\"\n+    \"@babel/plugin-transform-async-generator-functions\" \"^7.26.8\"\n+    \"@babel/plugin-transform-async-to-generator\" \"^7.25.9\"\n+    \"@babel/plugin-transform-block-scoped-functions\" \"^7.26.5\"\n+    \"@babel/plugin-transform-block-scoping\" \"^7.25.9\"\n+    \"@babel/plugin-transform-class-properties\" \"^7.25.9\"\n+    \"@babel/plugin-transform-class-static-block\" \"^7.26.0\"\n+    \"@babel/plugin-transform-classes\" \"^7.25.9\"\n+    \"@babel/plugin-transform-computed-properties\" \"^7.25.9\"\n+    \"@babel/plugin-transform-destructuring\" \"^7.25.9\"\n+    \"@babel/plugin-transform-dotall-regex\" \"^7.25.9\"\n+    \"@babel/plugin-transform-duplicate-keys\" \"^7.25.9\"\n+    \"@babel/plugin-transform-duplicate-named-capturing-groups-regex\" \"^7.25.9\"\n+    \"@babel/plugin-transform-dynamic-import\" \"^7.25.9\"\n+    \"@babel/plugin-transform-exponentiation-operator\" \"^7.26.3\"\n+    \"@babel/plugin-transform-export-namespace-from\" \"^7.25.9\"\n+    \"@babel/plugin-transform-for-of\" \"^7.25.9\"\n+    \"@babel/plugin-transform-function-name\" \"^7.25.9\"\n+    \"@babel/plugin-transform-json-strings\" \"^7.25.9\"\n+    \"@babel/plugin-transform-literals\" \"^7.25.9\"\n+    \"@babel/plugin-transform-logical-assignment-operators\" \"^7.25.9\"\n+    \"@babel/plugin-transform-member-expression-literals\" \"^7.25.9\"\n+    \"@babel/plugin-transform-modules-amd\" \"^7.25.9\"\n+    \"@babel/plugin-transform-modules-commonjs\" \"^7.26.3\"\n+    \"@babel/plugin-transform-modules-systemjs\" \"^7.25.9\"\n+    \"@babel/plugin-transform-modules-umd\" \"^7.25.9\"\n+    \"@babel/plugin-transform-named-capturing-groups-regex\" \"^7.25.9\"\n+    \"@babel/plugin-transform-new-target\" \"^7.25.9\"\n+    \"@babel/plugin-transform-nullish-coalescing-operator\" \"^7.26.6\"\n+    \"@babel/plugin-transform-numeric-separator\" \"^7.25.9\"\n+    \"@babel/plugin-transform-object-rest-spread\" \"^7.25.9\"\n+    \"@babel/plugin-transform-object-super\" \"^7.25.9\"\n+    \"@babel/plugin-transform-optional-catch-binding\" \"^7.25.9\"\n+    \"@babel/plugin-transform-optional-chaining\" \"^7.25.9\"\n+    \"@babel/plugin-transform-parameters\" \"^7.25.9\"\n+    \"@babel/plugin-transform-private-methods\" \"^7.25.9\"\n+    \"@babel/plugin-transform-private-property-in-object\" \"^7.25.9\"\n+    \"@babel/plugin-transform-property-literals\" \"^7.25.9\"\n+    \"@babel/plugin-transform-regenerator\" \"^7.25.9\"\n+    \"@babel/plugin-transform-regexp-modifiers\" \"^7.26.0\"\n+    \"@babel/plugin-transform-reserved-words\" \"^7.25.9\"\n+    \"@babel/plugin-transform-shorthand-properties\" \"^7.25.9\"\n+    \"@babel/plugin-transform-spread\" \"^7.25.9\"\n+    \"@babel/plugin-transform-sticky-regex\" \"^7.25.9\"\n+    \"@babel/plugin-transform-template-literals\" \"^7.26.8\"\n+    \"@babel/plugin-transform-typeof-symbol\" \"^7.26.7\"\n+    \"@babel/plugin-transform-unicode-escapes\" \"^7.25.9\"\n+    \"@babel/plugin-transform-unicode-property-regex\" \"^7.25.9\"\n+    \"@babel/plugin-transform-unicode-regex\" \"^7.25.9\"\n+    \"@babel/plugin-transform-unicode-sets-regex\" \"^7.25.9\"\n+    \"@babel/preset-modules\" \"0.1.6-no-external-plugins\"\n+    babel-plugin-polyfill-corejs2 \"^0.4.10\"\n+    babel-plugin-polyfill-corejs3 \"^0.11.0\"\n+    babel-plugin-polyfill-regenerator \"^0.6.1\"\n+    core-js-compat \"^3.40.0\"\n+    semver \"^6.3.1\"\n+\n+\"@babel/preset-modules@0.1.6-no-external-plugins\":\n+  version \"0.1.6-no-external-plugins\"\n+  resolved \"https://registry.npmjs.org/@babel/preset-modules/-/preset-modules-0.1.6-no-external-plugins.tgz#ccb88a2c49c817236861fee7826080573b8a923a\"\n+  integrity sha512-HrcgcIESLm9aIR842yhJ5RWan/gebQUJ6E/E5+rf0y9o6oj7w0Br+sWuL6kEQ/o/AdfvR1Je9jG18/gnpwjEyA==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.0.0\"\n+    \"@babel/types\" \"^7.4.4\"\n+    esutils \"^2.0.2\"\n+\n+\"@babel/preset-typescript@^7.24.7\":\n+  version \"7.26.0\"\n+  resolved \"https://registry.npmjs.org/@babel/preset-typescript/-/preset-typescript-7.26.0.tgz#4a570f1b8d104a242d923957ffa1eaff142a106d\"\n+  integrity sha512-NMk1IGZ5I/oHhoXEElcm+xUnL/szL6xflkFZmoEU9xj1qSJXpiS7rsspYo92B4DRCDvZn2erT5LdsCeXAKNCkg==\n+  dependencies:\n+    \"@babel/helper-plugin-utils\" \"^7.25.9\"\n+    \"@babel/helper-validator-option\" \"^7.25.9\"\n+    \"@babel/plugin-syntax-jsx\" \"^7.25.9\"\n+    \"@babel/plugin-transform-modules-commonjs\" \"^7.25.9\"\n+    \"@babel/plugin-transform-typescript\" \"^7.25.9\"\n+\n+\"@babel/runtime@7.26.10\", \"@babel/runtime@^7.0.0\", \"@babel/runtime@^7.1.2\", \"@babel/runtime@^7.12.5\", \"@babel/runtime@^7.17.8\", \"@babel/runtime@^7.18.3\", \"@babel/runtime@^7.20.13\", \"@babel/runtime@^7.23.9\", \"@babel/runtime@^7.5.5\", \"@babel/runtime@^7.8.4\", \"@babel/runtime@^7.8.7\":\n+  version \"7.26.10\"\n   resolved \"https://registry.yarnpkg.com/@babel/runtime/-/runtime-7.26.10.tgz#a07b4d8fa27af131a633d7b3524db803eb4764c2\"\n   integrity sha512-2WJMeRQPHKSPemqk/awGrAiuFfzBmOIPXKizAsVhWH9YJqLZ0H+HS4c8loHGgW6utJ3E/ejXQUsiGaQy2NZ9Fw==\n   dependencies:\n     regenerator-runtime \"^0.14.0\"\n@@ -2030,11 +2611,20 @@\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-document/-/extension-document-2.22.3.tgz#91462a9b46aa62b1524ed598a95c44f146fbd6f1\"\n   integrity sha512-7MnILbhRZRyROlMUgyntzRZ/EZlqNB8fO761RNjJxR2WMb49R4yc04fz7/+f/QH/hwxoS13bKfsNUDAsDxA5Aw==\n \n \"@tiptap/extension-dropcursor@^2.11.0\":\n+  version \"2.11.5\"\n+  resolved \"https://registry.npmjs.org/@tiptap/extension-dropcursor/-/extension-dropcursor-2.11.5.tgz#a1d6fad3379551449534bdb8135da2577a8ec8fb\"\n+  integrity sha512-uIN7L3FU0904ec7FFFbndO7RQE/yiON4VzAMhNn587LFMyWO8US139HXIL4O8dpZeYwYL3d1FnDTflZl6CwLlg==\n+\n+\"@tiptap/extension-emoji@^2.22.3\":\n   version \"2.22.3\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-dropcursor/-/extension-dropcursor-2.22.3.tgz#729ddd6d6b15432c2e15ba196162b7dce16c5fd4\"\n-  integrity sha512-yQxSfTWjdUQS+bh6KiNLR9KIMsn1SElzycQe4XE+0eoaetapGtKqxfwkTbbQdNgQOU5wQG1KOda221mnPvkpAA==\n+  resolved \"https://registry.yarnpkg.com/@tiptap/extension-emoji/-/extension-emoji-2.22.3.tgz#f149933a9f62eb65cb9b86c6a64852ea471c3e14\"\n+  integrity sha512-OuMQjlY5OjysJgLA75eBUe+RWoh+apwjWydUfimFpMcNa55HQTnFsPZXxIcbcTxqHbimhjgUlyd8S+F8/011VA==\n+  dependencies:\n+    emoji-regex \"^10.4.0\"\n+    emojibase-data \"^15\"\n+    is-emoji-supported \"^0.0.5\"\n \n \"@tiptap/extension-floating-menu@^2.11.0\":\n   version \"2.22.3\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-floating-menu/-/extension-floating-menu-2.22.3.tgz#403e237b46964035c8fdb30746de04c5119862e1\"\n@@ -4845,9 +5435,9 @@\n   integrity sha512-6PDYZGlhidt+Kc0ay890IU4HLNfIR7/OxPvcNxw+nJ4HQhMKd8pnGnPn4n2vqC/arRFCNWQhgJP8rpsYKsz0GQ==\n   dependencies:\n     flairup \"1.0.0\"\n \n-emoji-regex@^10.3.0:\n+emoji-regex@^10.3.0, emoji-regex@^10.4.0:\n   version \"10.4.0\"\n   resolved \"https://registry.yarnpkg.com/emoji-regex/-/emoji-regex-10.4.0.tgz#03553afea80b3975749cfcb36f776ca268e413d4\"\n   integrity sha512-EC+0oUMY1Rqm4O6LLrgjtYDvcVYTy7chDnM4Q7030tP4Kwj3u/pR6gP9ygnp2CJMK5Gq+9Q2oqmrFJAz01DXjw==\n \n@@ -4860,8 +5450,13 @@\n   version \"9.2.2\"\n   resolved \"https://registry.yarnpkg.com/emoji-regex/-/emoji-regex-9.2.2.tgz#840c8803b0d8047f4ff0cf963176b32d4ef3ed72\"\n   integrity sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==\n \n+emojibase-data@^15:\n+  version \"15.3.2\"\n+  resolved \"https://registry.yarnpkg.com/emojibase-data/-/emojibase-data-15.3.2.tgz#2742246bfe14f16a7829b42ca156dec09934cf85\"\n+  integrity sha512-TpDyTDDTdqWIJixV5sTA6OQ0P0JfIIeK2tFRR3q56G9LK65ylAZ7z3KyBXokpvTTJ+mLUXQXbLNyVkjvnTLE+A==\n+\n enabled@2.0.x:\n   version \"2.0.0\"\n   resolved \"https://registry.yarnpkg.com/enabled/-/enabled-2.0.0.tgz#f9dd92ec2d6f4bbc0d5d1e64e21d61cd4665e7c2\"\n   integrity sha512-AKrN98kuwOzMIdAizXGI86UFBoo26CL21UM763y1h/GMSJ4/OHU9k2YlsmBpyScFo/wbLzWQJBMCW4+IO3/+OQ==\n@@ -6406,8 +7001,13 @@\n   version \"2.2.1\"\n   resolved \"https://registry.yarnpkg.com/is-docker/-/is-docker-2.2.1.tgz#33eeabe23cfe86f14bde4408a02c0cfb853acdaa\"\n   integrity sha512-F+i2BKsFrH66iaUFc0woD8sLy8getkwTwtOBjvs56Cx4CgJDeKQeqfz8wAYiSb8JOprWhHH5p77PbmYCvvUuXQ==\n \n+is-emoji-supported@^0.0.5:\n+  version \"0.0.5\"\n+  resolved \"https://registry.yarnpkg.com/is-emoji-supported/-/is-emoji-supported-0.0.5.tgz#f22301b22c63d6322935e829f39dfa59d03a7fe2\"\n+  integrity sha512-WOlXUhDDHxYqcSmFZis+xWhhqXiK2SU0iYiqmth5Ip0FHLZQAt9rKL5ahnilE8/86WH8tZ3bmNNNC+bTzamqlw==\n+\n is-extglob@^2.1.1:\n   version \"2.1.1\"\n   resolved \"https://registry.yarnpkg.com/is-extglob/-/is-extglob-2.1.1.tgz#a88c02535791f02ed37c76a1b9ea9773c833f8c2\"\n   integrity sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==\n"
        }
      ]
    },
    {
      "id": "add-filters-toggle",
      "sha": "7ce21a6488fc7d38a394b02f5b09c01f7300a4ed",
      "parentSha": "992457efd2be0cc626ca7734f915ec08d9cf5d14",
      "spec": "Implement a work item filters row visibility toggle backed by shared-state visibility and integrate it across issue headers and views. Make the following changes:\n\n1) Add visibility options to rich filters constants\n- In packages/constants/src/rich-filters/option.ts:\n  - Define TAutoVisibilityOptions with two modes:\n    - autoSetVisibility: true\n    - autoSetVisibility: false with isVisibleOnMount: boolean\n  - Export DEFAULT_FILTER_VISIBILITY_OPTIONS = { autoSetVisibility: true }.\n  - Extend TFilterOptions<E> to include visibility: TAutoVisibilityOptions.\n\n2) Expose filter visibility in shared-state rich filters\n- In packages/shared-state/src/store/rich-filters/filter-helpers.ts:\n  - Introduce observable isVisible state managed by FilterInstanceHelper.\n  - Construct FilterInstanceHelper with a reference to the parent filter instance and an adapter, using MobX observables/actions.\n  - Implement setInitialVisibility(visibilityOption): set visibility based on options; if autoSetVisibility is true and the filter has active filters, set visible, else hidden. If autoSetVisibility is false, use isVisibleOnMount.\n  - Implement toggleVisibility(isVisible?): toggle or set explicit visibility.\n- In packages/shared-state/src/store/rich-filters/filter.ts:\n  - Construct FilterInstanceHelper with a reference to the FilterInstance and set initial visibility using options.visibility or DEFAULT_FILTER_VISIBILITY_OPTIONS.\n  - Add computed getter isVisible returning helper.isVisible.\n  - Add action toggleVisibility delegating to helper.\n- In packages/shared-state/src/store/rich-filters/config-manager.ts:\n  - Make the _filterInstance reference private.\n\n3) Update work item filters store to use visibility and a dedicated instance type\n- Create packages/shared-state/src/store/work-item-filters/shared.ts:\n  - Define TWorkItemFilterKey = `${EIssuesStoreType}-${string}`.\n  - Export IWorkItemFilterInstance = IFilterInstance<TWorkItemFilterProperty, TWorkItemFilterExpression>.\n- In packages/shared-state/src/store/work-item-filters/index.ts, export ./shared.\n- In packages/shared-state/src/store/work-item-filters/filter.store.ts:\n  - Update store to use Map<TWorkItemFilterKey, IWorkItemFilterInstance>.\n  - Extend getOrCreateFilter params with showOnMount?: boolean.\n  - For an existing filter, if showOnMount is provided, immediately apply toggleVisibility(showOnMount).\n  - When creating a new filter, pass visibility in options:\n    - If showOnMount is true, use { autoSetVisibility: false, isVisibleOnMount: true };\n    - Otherwise { autoSetVisibility: true }.\n\n4) Introduce a generic filters toggle UI and a work-item-specific wrapper\n- Create apps/web/core/components/rich-filters/filters-toggle.tsx:\n  - Accepts filter?: IFilterInstance and renders a compact control.\n  - Behavior:\n    - If no active conditions, row is hidden, and there are no unsaved changes, show an AddFilterButton (variant neutral-primary) that opens the filters row and allows adding the first condition.\n    - Otherwise, show an icon button (e.g., ListFilter) that toggles visibility; style reflects visible/hidden state; add a small pill when visible, when there are active conditions, or when there are unsaved changes.\n- Create apps/web/core/components/work-item-filters/filters-toggle.tsx:\n  - Takes { entityType: EIssuesStoreType; entityId: string }.\n  - Uses useWorkItemFilters().getFilter to fetch the filter instance and renders the rich-filters/FiltersToggle with that instance.\n\n5) Standardize WorkItemFiltersRow and support two variants\n- Rename apps/web/core/components/work-item-filters/work-item-filters-row.tsx to filters-row.tsx and update all imports accordingly.\n- In apps/web/core/components/rich-filters/add-filters-button.tsx:\n  - Change buttonConfig.label type to string | null and remove its default value.\n- In apps/web/core/components/rich-filters/filters-row.tsx:\n  - Replace visible prop with internal visibility using filter.isVisible and wrap output in a Transition.\n  - Support variant prop: \"header\" (default) and \"modal\". Header variant uses a ternary Header wrapper; modal variant uses a rounded container with background.\n  - Compute hasAnyConditions and hasAvailableOperations to control layout and left border for operation controls.\n  - Use AddFilterButton with ListFilterPlus icon, label null, and defaultOpen when there are no conditions.\n  - Protect handleUpdate with try/finally to avoid flicker.\n- In apps/web/core/components/work-item-filters/filters-row.tsx wrapper:\n  - Update prop types to require filter: IWorkItemFilterInstance.\n\n6) Update HOCs and hooks to wire initial visibility and instance typing\n- In apps/web/core/components/work-item-filters/filters-hoc/shared.ts and base.tsx:\n  - Replace IFilterInstance with IWorkItemFilterInstance in types.\n  - Add showOnMount?: boolean prop.\n  - Pass showOnMount to useWorkItemFilters().getOrCreateFilter so the store can set initial visibility.\n- In apps/web/core/hooks/store/work-item-filters/use-work-item-filter-instance.ts:\n  - Change return type to IWorkItemFilterInstance | undefined.\n\n7) Integrate the toggle control across pages and headers\n- Add WorkItemFiltersToggle to the following components and place it adjacent to layout/display controls:\n  - apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(detail)/header.tsx with entityType CYCLE and cycleId.\n  - apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(detail)/header.tsx with entityType MODULE and moduleId; also adjust router params to strings, guard nulls, and render ModuleQuickActions only when moduleId exists.\n  - apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(detail)/[viewId]/header.tsx with entityType PROJECT_VIEW and viewId; ensure layout and display dropdowns remain hidden when the view is locked but the toggle is still shown.\n  - apps/web/app/(all)/[workspaceSlug]/(projects)/workspace-views/header.tsx with entityType GLOBAL and globalViewId; ensure locked state hides layout and display but shows the toggle.\n  - apps/web/core/components/issues/archived-issues-header.tsx with entityType ARCHIVED and projectId; coerce route params to strings; return null when missing; update updateFilters calls to use the coerced strings.\n  - apps/web/core/components/issues/filters.tsx with storeType/entityType and projectId.\n  - apps/web/core/components/profile/profile-issues-filter.tsx with entityType PROFILE and userId; coerce route params and update filter calls accordingly.\n\n8) Update view forms to show the filters row on mount in modals\n- In apps/web/core/components/views/form.tsx and apps/web/core/components/workspace/views/form.tsx:\n  - Pass showOnMount to the HOC so temporary filter instances open by default.\n  - Render WorkItemFiltersRow with variant=\"modal\".\n\n9) Update import paths in all issue layout roots and profile issues\n- Update imports of WorkItemFiltersRow to the new location apps/web/core/components/work-item-filters/filters-row in:\n  - all-issue-layout-root.tsx\n  - archived-issue-layout-root.tsx\n  - cycle-layout-root.tsx\n  - module-layout-root.tsx\n  - project-layout-root.tsx\n  - project-view-layout-root.tsx\n  - profile-issues.tsx\n\n10) Ensure safe route param conversions\n- Where route params are used as IDs, convert via toString() and guard undefined cases to avoid runtime errors.\n\nAcceptance criteria\n- Filters row visibility state is managed per filter instance and persists during the session.\n- The new Filters toggle appears across all specified headers and respects locked view rules (toggle visible; layout/display hidden when locked).\n- Clicking the Add filter button when no conditions exist both opens the filters row and focuses adding a condition.\n- The row automatically shows when there are active filters; otherwise starts hidden unless showOnMount is true.\n- Modal usage displays the filters row in a rounded container; header usage uses the header styling.\n- All renamed imports and new types compile without type errors.",
      "prompt": "Add a toggle to show/hide the advanced Work Item Filters row across issue views and headers and wire it to shared filter state so visibility is per-view and persisted during the session. The toggle should indicate when filters are visible, when any conditions are active, or when there are unsaved changes, and it should surface an Add filter button when there are no active filters and the row is hidden. Support two visual variants for the filters row: a compact header variant and a modal variant used in view configuration forms. Ensure initial visibility is determined automatically based on whether filters are active, with an option to force the row visible on mount for temporary filters. Integrate the toggle in project, cycle, module, project view, workspace (global), archived, and profile contexts, and make route param usage safe. Update the filter store/types as needed to expose and update visibility and to rename and standardize the WorkItemFiltersRow component.",
      "supplementalFiles": [
        "apps/web/core/hooks/store/work-item-filters/use-work-item-filters.ts",
        "apps/web/core/components/work-item-filters/filters-hoc/project-level.tsx",
        "apps/web/core/components/work-item-filters/filters-hoc/workspace-level.tsx",
        "apps/web/core/components/rich-filters/filter-item.tsx",
        "packages/shared-state/src/store/rich-filters/index.ts",
        "packages/shared-state/src/store/work-item-filters/adapter.ts",
        "packages/types/src/rich-filters/index.ts",
        "packages/types/src/rich-filters/expression.ts"
      ],
      "fileDiffs": [
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(detail)/header.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(detail)/header.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(detail)/header.tsx\t992457e (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(detail)/header.tsx\t7ce21a6 (commit)\n@@ -37,8 +37,9 @@\n   FiltersDropdown,\n   LayoutSelection,\n   MobileLayoutSelection,\n } from \"@/components/issues/issue-layouts/filters\";\n+import { WorkItemFiltersToggle } from \"@/components/work-item-filters/filters-toggle\";\n // hooks\n import { useCommandPalette } from \"@/hooks/store/use-command-palette\";\n import { useCycle } from \"@/hooks/store/use-cycle\";\n import { useIssues } from \"@/hooks/store/use-issues\";\n@@ -208,8 +209,9 @@\n                 onChange={(layout) => handleLayoutChange(layout)}\n                 activeLayout={activeLayout}\n               />\n             </div>\n+            <WorkItemFiltersToggle entityType={EIssuesStoreType.CYCLE} entityId={cycleId} />\n             <FiltersDropdown\n               title={t(\"common.display\")}\n               placement=\"bottom-end\"\n               miniIcon={<SlidersHorizontal className=\"size-3.5\" />}\n"
        },
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(detail)/header.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(detail)/header.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(detail)/header.tsx\t992457e (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(detail)/header.tsx\t7ce21a6 (commit)\n@@ -34,10 +34,10 @@\n   FiltersDropdown,\n   LayoutSelection,\n   MobileLayoutSelection,\n } from \"@/components/issues/issue-layouts/filters\";\n-// helpers\n import { ModuleQuickActions } from \"@/components/modules\";\n+import { WorkItemFiltersToggle } from \"@/components/work-item-filters/filters-toggle\";\n // hooks\n import { useCommandPalette } from \"@/hooks/store/use-command-palette\";\n import { useIssues } from \"@/hooks/store/use-issues\";\n import { useModule } from \"@/hooks/store/use-module\";\n@@ -56,9 +56,10 @@\n   // states\n   const [analyticsModal, setAnalyticsModal] = useState(false);\n   // router\n   const router = useAppRouter();\n-  const { workspaceSlug, projectId, moduleId } = useParams();\n+  const { workspaceSlug, projectId, moduleId: routerModuleId } = useParams();\n+  const moduleId = routerModuleId ? routerModuleId.toString() : undefined;\n   // hooks\n   const { isMobile } = usePlatformOS();\n   // store hooks\n   const {\n@@ -74,9 +75,9 @@\n   const { setValue, storedValue } = useLocalStorage(\"module_sidebar_collapsed\", \"false\");\n   // derived values\n   const isSidebarCollapsed = storedValue ? (storedValue === \"true\" ? true : false) : false;\n   const activeLayout = issueFilters?.displayFilters?.layout;\n-  const moduleDetails = moduleId ? getModuleById(moduleId.toString()) : undefined;\n+  const moduleDetails = moduleId ? getModuleById(moduleId) : undefined;\n   const canUserCreateIssue = allowPermissions(\n     [EUserPermissions.ADMIN, EUserPermissions.MEMBER],\n     EUserPermissionsLevel.PROJECT\n   );\n@@ -196,8 +197,9 @@\n                 onChange={(layout) => handleLayoutChange(layout)}\n                 activeLayout={activeLayout}\n               />\n             </div>\n+            {moduleId && <WorkItemFiltersToggle entityType={EIssuesStoreType.MODULE} entityId={moduleId} />}\n             <FiltersDropdown\n               title=\"Display\"\n               placement=\"bottom-end\"\n               miniIcon={<SlidersHorizontal className=\"size-3.5\" />}\n@@ -250,15 +252,17 @@\n             onClick={toggleSidebar}\n           >\n             <PanelRight className={cn(\"h-4 w-4\", !isSidebarCollapsed ? \"text-[#3E63DD]\" : \"text-custom-text-200\")} />\n           </button>\n-          <ModuleQuickActions\n-            parentRef={parentRef}\n-            moduleId={moduleId?.toString()}\n-            projectId={projectId.toString()}\n-            workspaceSlug={workspaceSlug.toString()}\n-            customClassName=\"flex-shrink-0 flex items-center justify-center bg-custom-background-80/70 rounded size-[26px]\"\n-          />\n+          {moduleId && (\n+            <ModuleQuickActions\n+              parentRef={parentRef}\n+              moduleId={moduleId}\n+              projectId={projectId.toString()}\n+              workspaceSlug={workspaceSlug.toString()}\n+              customClassName=\"flex-shrink-0 flex items-center justify-center bg-custom-background-80/70 rounded size-[26px]\"\n+            />\n+          )}\n         </Header.RightItem>\n       </Header>\n     </>\n   );\n"
        },
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(detail)/[viewId]/header.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(detail)/[viewId]/header.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(detail)/[viewId]/header.tsx\t992457e (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(detail)/[viewId]/header.tsx\t7ce21a6 (commit)\n@@ -30,8 +30,9 @@\n import { SwitcherIcon, SwitcherLabel } from \"@/components/common/switcher-label\";\n import { DisplayFiltersSelection, FiltersDropdown, LayoutSelection } from \"@/components/issues/issue-layouts/filters\";\n // constants\n import { ViewQuickActions } from \"@/components/views/quick-actions\";\n+import { WorkItemFiltersToggle } from \"@/components/work-item-filters/filters-toggle\";\n // hooks\n import { useCommandPalette } from \"@/hooks/store/use-command-palette\";\n import { useIssues } from \"@/hooks/store/use-issues\";\n import { useProject } from \"@/hooks/store/use-project\";\n@@ -44,10 +45,11 @@\n export const ProjectViewIssuesHeader: React.FC = observer(() => {\n   // refs\n   const parentRef = useRef(null);\n   // router\n-  const { workspaceSlug, projectId, viewId } = useParams();\n   const router = useAppRouter();\n+  const { workspaceSlug, projectId, viewId: routerViewId } = useParams();\n+  const viewId = routerViewId ? routerViewId.toString() : undefined;\n   // store hooks\n   const {\n     issuesFilter: { issueFilters, updateFilters },\n   } = useIssues(EIssuesStoreType.PROJECT_VIEW);\n@@ -162,10 +164,10 @@\n           <></>\n         )}\n       </Header.LeftItem>\n       <Header.RightItem className=\"items-center\">\n-        {!viewDetails?.is_locked ? (\n-          <>\n+        <>\n+          {!viewDetails.is_locked && (\n             <LayoutSelection\n               layouts={[\n                 EIssueLayoutTypes.LIST,\n                 EIssueLayoutTypes.KANBAN,\n@@ -175,8 +177,11 @@\n               ]}\n               onChange={(layout) => handleLayoutChange(layout)}\n               selectedLayout={activeLayout}\n             />\n+          )}\n+          {viewId && <WorkItemFiltersToggle entityType={EIssuesStoreType.PROJECT_VIEW} entityId={viewId} />}\n+          {!viewDetails.is_locked && (\n             <FiltersDropdown title=\"Display\" placement=\"bottom-end\">\n               <DisplayFiltersSelection\n                 layoutDisplayFiltersOptions={\n                   activeLayout ? ISSUE_DISPLAY_FILTERS_BY_PAGE.issues.layoutOptions[activeLayout] : undefined\n@@ -188,12 +193,10 @@\n                 cycleViewDisabled={!currentProjectDetails?.cycle_view}\n                 moduleViewDisabled={!currentProjectDetails?.module_view}\n               />\n             </FiltersDropdown>\n-          </>\n-        ) : (\n-          <></>\n-        )}\n+          )}\n+        </>\n         {canUserCreateIssue ? (\n           <Button\n             onClick={() => {\n               toggleCreateIssueModal(true, EIssuesStoreType.PROJECT_VIEW);\n"
        },
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(projects)/workspace-views/header.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(projects)/workspace-views/header.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(projects)/workspace-views/header.tsx\t992457e (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(projects)/workspace-views/header.tsx\t7ce21a6 (commit)\n@@ -24,8 +24,9 @@\n // components\n import { BreadcrumbLink } from \"@/components/common/breadcrumb-link\";\n import { SwitcherLabel } from \"@/components/common/switcher-label\";\n import { DisplayFiltersSelection, FiltersDropdown } from \"@/components/issues/issue-layouts/filters\";\n+import { WorkItemFiltersToggle } from \"@/components/work-item-filters/filters-toggle\";\n import { DefaultWorkspaceViewQuickActions } from \"@/components/workspace/views/default-view-quick-action\";\n import { CreateUpdateWorkspaceViewModal } from \"@/components/workspace/views/modal\";\n import { WorkspaceViewQuickActions } from \"@/components/workspace/views/quick-action\";\n // hooks\n@@ -38,9 +39,10 @@\n   // states\n   const [createViewModal, setCreateViewModal] = useState(false);\n   // router\n   const router = useAppRouter();\n-  const { workspaceSlug, globalViewId } = useParams();\n+  const { workspaceSlug, globalViewId: routerGlobalViewId } = useParams();\n+  const globalViewId = routerGlobalViewId ? routerGlobalViewId.toString() : undefined;\n   // store hooks\n   const {\n     issuesFilter: { filters, updateFilters },\n   } = useIssues(EIssuesStoreType.GLOBAL);\n@@ -49,9 +51,9 @@\n \n   const issueFilters = globalViewId ? filters[globalViewId.toString()] : undefined;\n \n   const activeLayout = issueFilters?.displayFilters?.layout;\n-  const viewDetails = getViewDetailsById(globalViewId.toString());\n+  const viewDetails = globalViewId ? getViewDetailsById(globalViewId) : undefined;\n \n   const handleDisplayFilters = useCallback(\n     (updatedDisplayFilter: Partial<IIssueDisplayFilterOptions>) => {\n       if (!workspaceSlug || !globalViewId) return;\n@@ -59,24 +61,18 @@\n         workspaceSlug.toString(),\n         undefined,\n         EIssueFilterType.DISPLAY_FILTERS,\n         updatedDisplayFilter,\n-        globalViewId.toString()\n+        globalViewId\n       );\n     },\n     [workspaceSlug, updateFilters, globalViewId]\n   );\n \n   const handleDisplayProperties = useCallback(\n     (property: Partial<IIssueDisplayProperties>) => {\n       if (!workspaceSlug || !globalViewId) return;\n-      updateFilters(\n-        workspaceSlug.toString(),\n-        undefined,\n-        EIssueFilterType.DISPLAY_PROPERTIES,\n-        property,\n-        globalViewId.toString()\n-      );\n+      updateFilters(workspaceSlug.toString(), undefined, EIssueFilterType.DISPLAY_PROPERTIES, property, globalViewId);\n     },\n     [workspaceSlug, updateFilters, globalViewId]\n   );\n \n@@ -87,9 +83,9 @@\n         workspaceSlug.toString(),\n         undefined,\n         EIssueFilterType.DISPLAY_FILTERS,\n         { layout: layout },\n-        globalViewId.toString()\n+        globalViewId\n       );\n     },\n     [workspaceSlug, updateFilters, globalViewId]\n   );\n@@ -157,27 +153,26 @@\n           </Breadcrumbs>\n         </Header.LeftItem>\n \n         <Header.RightItem className=\"items-center\">\n-          {!isLocked ? (\n-            <>\n-              <GlobalViewLayoutSelection\n-                onChange={handleLayoutChange}\n-                selectedLayout={activeLayout ?? EIssueLayoutTypes.SPREADSHEET}\n-                workspaceSlug={workspaceSlug.toString()}\n+          {!isLocked && (\n+            <GlobalViewLayoutSelection\n+              onChange={handleLayoutChange}\n+              selectedLayout={activeLayout ?? EIssueLayoutTypes.SPREADSHEET}\n+              workspaceSlug={workspaceSlug.toString()}\n+            />\n+          )}\n+          {globalViewId && <WorkItemFiltersToggle entityType={EIssuesStoreType.GLOBAL} entityId={globalViewId} />}\n+          {!isLocked && (\n+            <FiltersDropdown title={t(\"common.display\")} placement=\"bottom-end\">\n+              <DisplayFiltersSelection\n+                layoutDisplayFiltersOptions={currentLayoutFilters}\n+                displayFilters={issueFilters?.displayFilters ?? {}}\n+                handleDisplayFiltersUpdate={handleDisplayFilters}\n+                displayProperties={issueFilters?.displayProperties ?? {}}\n+                handleDisplayPropertiesUpdate={handleDisplayProperties}\n               />\n-              <FiltersDropdown title={t(\"common.display\")} placement=\"bottom-end\">\n-                <DisplayFiltersSelection\n-                  layoutDisplayFiltersOptions={currentLayoutFilters}\n-                  displayFilters={issueFilters?.displayFilters ?? {}}\n-                  handleDisplayFiltersUpdate={handleDisplayFilters}\n-                  displayProperties={issueFilters?.displayProperties ?? {}}\n-                  handleDisplayPropertiesUpdate={handleDisplayProperties}\n-                />\n-              </FiltersDropdown>\n-            </>\n-          ) : (\n-            <></>\n+            </FiltersDropdown>\n           )}\n \n           <Button\n             variant=\"primary\"\n"
        },
        {
          "path": "apps/web/core/components/issues/archived-issues-header.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/archived-issues-header.tsx\n===================================================================\n--- apps/web/core/components/issues/archived-issues-header.tsx\t992457e (parent)\n+++ apps/web/core/components/issues/archived-issues-header.tsx\t7ce21a6 (commit)\n@@ -8,15 +8,18 @@\n import { EHeaderVariant, Header } from \"@plane/ui\";\n // components\n import { ArchiveTabsList } from \"@/components/archives\";\n import { DisplayFiltersSelection, FiltersDropdown } from \"@/components/issues/issue-layouts/filters\";\n+import { WorkItemFiltersToggle } from \"@/components/work-item-filters/filters-toggle\";\n // hooks\n import { useIssues } from \"@/hooks/store/use-issues\";\n import { useProject } from \"@/hooks/store/use-project\";\n \n export const ArchivedIssuesHeader: FC = observer(() => {\n   // router\n-  const { workspaceSlug, projectId } = useParams();\n+  const { workspaceSlug: routerWorkspaceSlug, projectId: routerProjectId } = useParams();\n+  const workspaceSlug = routerWorkspaceSlug ? routerWorkspaceSlug.toString() : undefined;\n+  const projectId = routerProjectId ? routerProjectId.toString() : undefined;\n   // store hooks\n   const { currentProjectDetails } = useProject();\n   const {\n     issuesFilter: { issueFilters, updateFilters },\n@@ -28,26 +31,28 @@\n \n   const handleDisplayFiltersUpdate = (updatedDisplayFilter: Partial<IIssueDisplayFilterOptions>) => {\n     if (!workspaceSlug || !projectId) return;\n \n-    updateFilters(workspaceSlug.toString(), projectId.toString(), EIssueFilterType.DISPLAY_FILTERS, {\n+    updateFilters(workspaceSlug, projectId, EIssueFilterType.DISPLAY_FILTERS, {\n       ...issueFilters?.displayFilters,\n       ...updatedDisplayFilter,\n     });\n   };\n \n   const handleDisplayPropertiesUpdate = (property: Partial<IIssueDisplayProperties>) => {\n     if (!workspaceSlug || !projectId) return;\n \n-    updateFilters(workspaceSlug.toString(), projectId.toString(), EIssueFilterType.DISPLAY_PROPERTIES, property);\n+    updateFilters(workspaceSlug, projectId, EIssueFilterType.DISPLAY_PROPERTIES, property);\n   };\n \n+  if (!workspaceSlug || !projectId) return null;\n   return (\n     <Header variant={EHeaderVariant.SECONDARY}>\n       <Header.LeftItem>\n         <ArchiveTabsList />\n       </Header.LeftItem>\n       <Header.RightItem className=\"items-center\">\n+        <WorkItemFiltersToggle entityType={EIssuesStoreType.ARCHIVED} entityId={projectId} />\n         <FiltersDropdown title={t(\"common.display\")} placement=\"bottom-end\">\n           <DisplayFiltersSelection\n             displayFilters={issueFilters?.displayFilters || {}}\n             displayProperties={issueFilters?.displayProperties || {}}\n"
        },
        {
          "path": "apps/web/core/components/issues/filters.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/filters.tsx\n===================================================================\n--- apps/web/core/components/issues/filters.tsx\t992457e (parent)\n+++ apps/web/core/components/issues/filters.tsx\t7ce21a6 (commit)\n@@ -13,8 +13,9 @@\n // plane web imports\n import { TProject } from \"@/plane-web/types\";\n // local imports\n import { WorkItemsModal } from \"../analytics/work-items/modal\";\n+import { WorkItemFiltersToggle } from \"../work-item-filters/filters-toggle\";\n import {\n   DisplayFiltersSelection,\n   FiltersDropdown,\n   LayoutSelection,\n@@ -101,8 +102,9 @@\n           onChange={(layout) => handleLayoutChange(layout)}\n           activeLayout={activeLayout}\n         />\n       </div>\n+      <WorkItemFiltersToggle entityType={storeType} entityId={projectId} />\n       <FiltersDropdown\n         miniIcon={<SlidersHorizontal className=\"size-3.5\" />}\n         title={t(\"common.display\")}\n         placement=\"bottom-end\"\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/roots/all-issue-layout-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/roots/all-issue-layout-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/roots/all-issue-layout-root.tsx\t992457e (parent)\n+++ apps/web/core/components/issues/issue-layouts/roots/all-issue-layout-root.tsx\t7ce21a6 (commit)\n@@ -9,9 +9,9 @@\n import { EmptyState } from \"@/components/common/empty-state\";\n import { IssuePeekOverview } from \"@/components/issues/peek-overview\";\n import { WorkspaceActiveLayout } from \"@/components/views/helper\";\n import { WorkspaceLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/workspace-level\";\n-import { WorkItemFiltersRow } from \"@/components/work-item-filters/work-item-filters-row\";\n+import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n // hooks\n import { useGlobalView } from \"@/hooks/store/use-global-view\";\n import { useIssues } from \"@/hooks/store/use-issues\";\n import { useAppRouter } from \"@/hooks/use-app-router\";\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/roots/archived-issue-layout-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/roots/archived-issue-layout-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/roots/archived-issue-layout-root.tsx\t992457e (parent)\n+++ apps/web/core/components/issues/issue-layouts/roots/archived-issue-layout-root.tsx\t7ce21a6 (commit)\n@@ -8,9 +8,9 @@\n // components\n import { LogoSpinner } from \"@/components/common/logo-spinner\";\n import { ProjectLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/project-level\";\n // hooks\n-import { WorkItemFiltersRow } from \"@/components/work-item-filters/work-item-filters-row\";\n+import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n import { useIssues } from \"@/hooks/store/use-issues\";\n import { IssuesStoreContext } from \"@/hooks/use-issue-layout-store\";\n // local imports\n import { IssuePeekOverview } from \"../../peek-overview\";\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/roots/cycle-layout-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/roots/cycle-layout-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/roots/cycle-layout-root.tsx\t992457e (parent)\n+++ apps/web/core/components/issues/issue-layouts/roots/cycle-layout-root.tsx\t7ce21a6 (commit)\n@@ -11,9 +11,9 @@\n import { TransferIssues } from \"@/components/cycles/transfer-issues\";\n import { TransferIssuesModal } from \"@/components/cycles/transfer-issues-modal\";\n // hooks\n import { ProjectLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/project-level\";\n-import { WorkItemFiltersRow } from \"@/components/work-item-filters/work-item-filters-row\";\n+import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n import { useCycle } from \"@/hooks/store/use-cycle\";\n import { useIssues } from \"@/hooks/store/use-issues\";\n import { IssuesStoreContext } from \"@/hooks/use-issue-layout-store\";\n // local imports\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/roots/module-layout-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/roots/module-layout-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/roots/module-layout-root.tsx\t992457e (parent)\n+++ apps/web/core/components/issues/issue-layouts/roots/module-layout-root.tsx\t7ce21a6 (commit)\n@@ -9,9 +9,9 @@\n // components\n import { LogoSpinner } from \"@/components/common/logo-spinner\";\n // hooks\n import { ProjectLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/project-level\";\n-import { WorkItemFiltersRow } from \"@/components/work-item-filters/work-item-filters-row\";\n+import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n import { useIssues } from \"@/hooks/store/use-issues\";\n import { IssuesStoreContext } from \"@/hooks/use-issue-layout-store\";\n // local imports\n import { IssuePeekOverview } from \"../../peek-overview\";\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/roots/project-layout-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/roots/project-layout-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/roots/project-layout-root.tsx\t992457e (parent)\n+++ apps/web/core/components/issues/issue-layouts/roots/project-layout-root.tsx\t7ce21a6 (commit)\n@@ -10,9 +10,9 @@\n import { Spinner } from \"@plane/ui\";\n // components\n import { LogoSpinner } from \"@/components/common/logo-spinner\";\n import { ProjectLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/project-level\";\n-import { WorkItemFiltersRow } from \"@/components/work-item-filters/work-item-filters-row\";\n+import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n // hooks\n import { useIssues } from \"@/hooks/store/use-issues\";\n import { IssuesStoreContext } from \"@/hooks/use-issue-layout-store\";\n // local imports\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/roots/project-view-layout-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/roots/project-view-layout-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/roots/project-view-layout-root.tsx\t992457e (parent)\n+++ apps/web/core/components/issues/issue-layouts/roots/project-view-layout-root.tsx\t7ce21a6 (commit)\n@@ -8,9 +8,9 @@\n // components\n import { LogoSpinner } from \"@/components/common/logo-spinner\";\n // hooks\n import { ProjectLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/project-level\";\n-import { WorkItemFiltersRow } from \"@/components/work-item-filters/work-item-filters-row\";\n+import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n import { useIssues } from \"@/hooks/store/use-issues\";\n import { useProjectView } from \"@/hooks/store/use-project-view\";\n import { IssuesStoreContext } from \"@/hooks/use-issue-layout-store\";\n // local imports\n"
        },
        {
          "path": "apps/web/core/components/profile/profile-issues-filter.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/profile/profile-issues-filter.tsx\n===================================================================\n--- apps/web/core/components/profile/profile-issues-filter.tsx\t992457e (parent)\n+++ apps/web/core/components/profile/profile-issues-filter.tsx\t7ce21a6 (commit)\n@@ -8,16 +8,18 @@\n // types\n import { EIssuesStoreType, IIssueDisplayFilterOptions, IIssueDisplayProperties, EIssueLayoutTypes } from \"@plane/types\";\n // components\n import { DisplayFiltersSelection, FiltersDropdown, LayoutSelection } from \"@/components/issues/issue-layouts/filters\";\n+import { WorkItemFiltersToggle } from \"@/components/work-item-filters/filters-toggle\";\n // hooks\n import { useIssues } from \"@/hooks/store/use-issues\";\n \n export const ProfileIssuesFilter = observer(() => {\n   // i18n\n   const { t } = useTranslation();\n   // router\n-  const { workspaceSlug, userId } = useParams();\n+  const { workspaceSlug, userId: routeUserId } = useParams();\n+  const userId = routeUserId ? routeUserId.toString() : undefined;\n   // store hook\n   const {\n     issuesFilter: { issueFilters, updateFilters },\n   } = useIssues(EIssuesStoreType.PROFILE);\n@@ -26,15 +28,9 @@\n \n   const handleLayoutChange = useCallback(\n     (layout: EIssueLayoutTypes) => {\n       if (!workspaceSlug || !userId) return;\n-      updateFilters(\n-        workspaceSlug.toString(),\n-        undefined,\n-        EIssueFilterType.DISPLAY_FILTERS,\n-        { layout: layout },\n-        userId.toString()\n-      );\n+      updateFilters(workspaceSlug.toString(), undefined, EIssueFilterType.DISPLAY_FILTERS, { layout: layout }, userId);\n     },\n     [workspaceSlug, updateFilters, userId]\n   );\n \n@@ -45,24 +41,18 @@\n         workspaceSlug.toString(),\n         undefined,\n         EIssueFilterType.DISPLAY_FILTERS,\n         updatedDisplayFilter,\n-        userId.toString()\n+        userId\n       );\n     },\n     [workspaceSlug, updateFilters, userId]\n   );\n \n   const handleDisplayProperties = useCallback(\n     (property: Partial<IIssueDisplayProperties>) => {\n       if (!workspaceSlug || !userId) return;\n-      updateFilters(\n-        workspaceSlug.toString(),\n-        undefined,\n-        EIssueFilterType.DISPLAY_PROPERTIES,\n-        property,\n-        userId.toString()\n-      );\n+      updateFilters(workspaceSlug.toString(), undefined, EIssueFilterType.DISPLAY_PROPERTIES, property, userId);\n     },\n     [workspaceSlug, updateFilters, userId]\n   );\n \n@@ -72,8 +62,9 @@\n         layouts={[EIssueLayoutTypes.LIST, EIssueLayoutTypes.KANBAN]}\n         onChange={(layout) => handleLayoutChange(layout)}\n         selectedLayout={activeLayout}\n       />\n+      {userId && <WorkItemFiltersToggle entityType={EIssuesStoreType.PROFILE} entityId={userId} />}\n       <FiltersDropdown title={t(\"common.display\")} placement=\"bottom-end\">\n         <DisplayFiltersSelection\n           layoutDisplayFiltersOptions={\n             activeLayout ? ISSUE_DISPLAY_FILTERS_BY_PAGE.profile_issues.layoutOptions[activeLayout] : undefined\n"
        },
        {
          "path": "apps/web/core/components/profile/profile-issues.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/profile/profile-issues.tsx\n===================================================================\n--- apps/web/core/components/profile/profile-issues.tsx\t992457e (parent)\n+++ apps/web/core/components/profile/profile-issues.tsx\t7ce21a6 (commit)\n@@ -9,9 +9,9 @@\n import { ProfileIssuesKanBanLayout } from \"@/components/issues/issue-layouts/kanban/roots/profile-issues-root\";\n import { ProfileIssuesListLayout } from \"@/components/issues/issue-layouts/list/roots/profile-issues-root\";\n import { IssuePeekOverview } from \"@/components/issues/peek-overview\";\n import { WorkspaceLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/workspace-level\";\n-import { WorkItemFiltersRow } from \"@/components/work-item-filters/work-item-filters-row\";\n+import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n // hooks\n import { useIssues } from \"@/hooks/store/use-issues\";\n import { IssuesStoreContext } from \"@/hooks/use-issue-layout-store\";\n \n"
        },
        {
          "path": "apps/web/core/components/rich-filters/add-filters-button.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/rich-filters/add-filters-button.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/add-filters-button.tsx\t992457e (parent)\n+++ apps/web/core/components/rich-filters/add-filters-button.tsx\t7ce21a6 (commit)\n@@ -9,9 +9,9 @@\n import { cn, getOperatorForPayload } from \"@plane/utils\";\n \n export type TAddFilterButtonProps<P extends TFilterProperty, E extends TExternalFilter> = {\n   buttonConfig?: {\n-    label?: string;\n+    label: string | null;\n     variant?: TButtonVariant;\n     className?: string;\n     defaultOpen?: boolean;\n     iconConfig?: {\n@@ -27,9 +27,9 @@\n export const AddFilterButton = observer(\n   <P extends TFilterProperty, E extends TExternalFilter>(props: TAddFilterButtonProps<P, E>) => {\n     const { filter, buttonConfig, onFilterSelect } = props;\n     const {\n-      label = \"Filters\",\n+      label,\n       variant = \"link-neutral\",\n       className,\n       defaultOpen = false,\n       iconConfig = { shouldShowIcon: true },\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filters-row.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/rich-filters/filters-row.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filters-row.tsx\t992457e (parent)\n+++ apps/web/core/components/rich-filters/filters-row.tsx\t7ce21a6 (commit)\n@@ -1,22 +1,22 @@\n import React, { useCallback, useState } from \"react\";\n import { observer } from \"mobx-react\";\n+import { ListFilterPlus } from \"lucide-react\";\n import { Transition } from \"@headlessui/react\";\n // plane imports\n import { Button } from \"@plane/propel/button\";\n import { IFilterInstance } from \"@plane/shared-state\";\n import { TExternalFilter, TFilterProperty } from \"@plane/types\";\n-import { EHeaderVariant, Header } from \"@plane/ui\";\n+import { cn, EHeaderVariant, Header } from \"@plane/ui\";\n // local imports\n import { AddFilterButton, TAddFilterButtonProps } from \"./add-filters-button\";\n import { FilterItem } from \"./filter-item\";\n \n export type TFiltersRowProps<K extends TFilterProperty, E extends TExternalFilter> = {\n   buttonConfig?: TAddFilterButtonProps<K, E>[\"buttonConfig\"];\n   disabledAllOperations?: boolean;\n   filter: IFilterInstance<K, E>;\n-  variant?: \"default\" | \"header\";\n-  visible?: boolean;\n+  variant?: \"modal\" | \"header\";\n   trackerElements?: {\n     clearFilter?: string;\n     saveView?: string;\n     updateView?: string;\n@@ -24,36 +24,52 @@\n };\n \n export const FiltersRow = observer(\n   <K extends TFilterProperty, E extends TExternalFilter>(props: TFiltersRowProps<K, E>) => {\n-    const {\n-      buttonConfig,\n-      disabledAllOperations = false,\n-      filter,\n-      variant = \"header\",\n-      visible = true,\n-      trackerElements,\n-    } = props;\n+    const { buttonConfig, disabledAllOperations = false, filter, variant = \"header\", trackerElements } = props;\n     // states\n     const [isUpdating, setIsUpdating] = useState(false);\n+    // derived values\n+    const hasAnyConditions = filter.allConditionsForDisplay.length > 0;\n+    const hasAvailableOperations =\n+      !disabledAllOperations && (filter.canClearFilters || filter.canSaveView || filter.canUpdateView);\n \n+    const headerButtonConfig: Partial<TAddFilterButtonProps<K, E>[\"buttonConfig\"]> = {\n+      variant: \"link-neutral\",\n+      className: \"bg-custom-background-90\",\n+      label: null,\n+    };\n+\n+    const modalButtonConfig: Partial<TAddFilterButtonProps<K, E>[\"buttonConfig\"]> = {\n+      variant: \"neutral-primary\",\n+      className: \"bg-custom-background-100\",\n+      label: !hasAnyConditions ? \"Filters\" : null,\n+    };\n+\n     const handleUpdate = useCallback(async () => {\n       setIsUpdating(true);\n-      await filter.updateView();\n-      setTimeout(() => setIsUpdating(false), 240); // To avoid flickering\n+      try {\n+        await filter.updateView();\n+      } finally {\n+        setTimeout(() => setIsUpdating(false), 240); // To avoid flickering\n+      }\n     }, [filter]);\n \n-    if (!visible) return null;\n-\n     const leftContent = (\n       <>\n         {filter.allConditionsForDisplay.map((condition) => (\n           <FilterItem key={condition.id} filter={filter} condition={condition} isDisabled={disabledAllOperations} />\n         ))}\n         <AddFilterButton\n           filter={filter}\n           buttonConfig={{\n-            variant: \"neutral-primary\",\n+            label: null,\n+            ...(variant === \"modal\" ? modalButtonConfig : headerButtonConfig),\n+            iconConfig: {\n+              shouldShowIcon: true,\n+              iconComponent: ListFilterPlus,\n+            },\n+            defaultOpen: buttonConfig?.defaultOpen ?? !hasAnyConditions,\n             ...buttonConfig,\n             isDisabled: disabledAllOperations,\n           }}\n         />\n@@ -99,25 +115,46 @@\n         </ElementTransition>\n       </>\n     );\n \n-    if (variant === \"default\") {\n-      return (\n-        <div className=\"w-full flex flex-wrap items-center gap-2\">\n-          {leftContent}\n+    const mainContent = (\n+      <div className=\"w-full flex items-start gap-2\">\n+        <div className=\"w-full flex flex-wrap items-center gap-2\">{leftContent}</div>\n+        <div\n+          className={cn(\"flex items-center gap-2 border-l border-custom-border-200 pl-4\", {\n+            \"border-l-transparent pl-0\": !hasAvailableOperations,\n+          })}\n+        >\n           {rightContent}\n         </div>\n-      );\n-    }\n+      </div>\n+    );\n \n-    return (\n-      <Header variant={EHeaderVariant.TERNARY}>\n-        <div className=\"w-full flex items-start gap-2\">\n-          <div className=\"w-full flex flex-wrap items-center gap-2\">{leftContent}</div>\n-          <div className=\"flex items-center gap-2\">{rightContent}</div>\n-        </div>\n+    const ModalVariant = (\n+      <div className=\"w-full flex flex-wrap items-center gap-2 min-h-11 bg-custom-background-90 rounded-lg p-2\">\n+        {mainContent}\n+      </div>\n+    );\n+\n+    const HeaderVariant = (\n+      <Header variant={EHeaderVariant.TERNARY} className=\"min-h-11\">\n+        {mainContent}\n       </Header>\n     );\n+\n+    return (\n+      <Transition\n+        show={filter.isVisible}\n+        enter=\"transition-all duration-150 ease-out\"\n+        enterFrom=\"opacity-0 -translate-y-1\"\n+        enterTo=\"opacity-100 translate-y-0\"\n+        leave=\"transition-all duration-100 ease-in\"\n+        leaveFrom=\"opacity-100 translate-y-0\"\n+        leaveTo=\"opacity-0 -translate-y-1\"\n+      >\n+        {variant === \"modal\" ? ModalVariant : HeaderVariant}\n+      </Transition>\n+    );\n   }\n );\n \n const COMMON_OPERATION_BUTTON_CLASSNAME = \"py-1\";\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filters-toggle.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/rich-filters/filters-toggle.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filters-toggle.tsx\t992457e (parent)\n+++ apps/web/core/components/rich-filters/filters-toggle.tsx\t7ce21a6 (commit)\n@@ -0,0 +1,76 @@\n+import { observer } from \"mobx-react\";\n+import { ListFilter } from \"lucide-react\";\n+// plane imports\n+import { IFilterInstance } from \"@plane/shared-state\";\n+import { TExternalFilter, TFilterProperty } from \"@plane/types\";\n+import { cn } from \"@plane/ui\";\n+// components\n+import { AddFilterButton } from \"@/components/rich-filters/add-filters-button\";\n+\n+type TFiltersToggleProps<P extends TFilterProperty, E extends TExternalFilter> = {\n+  filter: IFilterInstance<P, E> | undefined;\n+};\n+\n+const COMMON_CLASSNAME =\n+  \"grid place-items-center h-7 w-full py-0.5 px-2 rounded border transition-all duration-200 cursor-pointer\";\n+\n+export const FiltersToggle = observer(\n+  <P extends TFilterProperty, E extends TExternalFilter>(props: TFiltersToggleProps<P, E>) => {\n+    const { filter } = props;\n+    // derived values\n+    const hasAnyConditions = (filter?.allConditionsForDisplay.length ?? 0) > 0;\n+    const isFilterRowVisible = filter?.isVisible ?? false;\n+    const hasUpdates = filter?.canUpdateView === true && filter?.hasChanges === true;\n+    const showFilterRowChangesPill = hasUpdates || hasAnyConditions === true;\n+    const showAddFilterButton = !hasAnyConditions && !isFilterRowVisible && !hasUpdates;\n+\n+    const handleToggleFilter = () => {\n+      if (!filter) {\n+        console.error(\"Filters toggle error - filter instance not available\");\n+        return;\n+      }\n+      filter.toggleVisibility();\n+    };\n+\n+    // Show the add filter button when there are no active conditions, the filter row is hidden, and no unsaved changes exist\n+    if (filter && showAddFilterButton) {\n+      return (\n+        <AddFilterButton\n+          filter={filter}\n+          buttonConfig={{\n+            variant: \"neutral-primary\",\n+            className: COMMON_CLASSNAME,\n+            label: null,\n+          }}\n+          onFilterSelect={() => filter?.toggleVisibility(true)}\n+        />\n+      );\n+    }\n+\n+    return (\n+      <div\n+        className={cn(COMMON_CLASSNAME, {\n+          \"border-transparent bg-custom-primary-100/10 hover:bg-custom-primary-100/20\": isFilterRowVisible,\n+          \"border-custom-border-200 hover:bg-custom-background-90\": !isFilterRowVisible,\n+        })}\n+        onClick={handleToggleFilter}\n+      >\n+        <div className=\"relative\">\n+          <ListFilter\n+            className={cn(\"size-4\", {\n+              \"text-custom-primary-100\": isFilterRowVisible,\n+              \"text-custom-text-300\": !isFilterRowVisible,\n+            })}\n+          />\n+          {showFilterRowChangesPill && (\n+            <span\n+              className={cn(\"p-[3px] rounded-full bg-custom-primary-100 absolute top-[0.2px] -right-[0.4px]\", {\n+                \"bg-custom-text-300\": hasAnyConditions === false && filter?.hasChanges === true, // If there are no conditions and there are changes, show the pill in the background color\n+              })}\n+            />\n+          )}\n+        </div>\n+      </div>\n+    );\n+  }\n+);\n"
        },
        {
          "path": "apps/web/core/components/views/form.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/views/form.tsx\n===================================================================\n--- apps/web/core/components/views/form.tsx\t992457e (parent)\n+++ apps/web/core/components/views/form.tsx\t7ce21a6 (commit)\n@@ -22,9 +22,9 @@\n import { getComputedDisplayFilters, getComputedDisplayProperties, getTabIndex } from \"@plane/utils\";\n // components\n import { Logo } from \"@/components/common/logo\";\n import { DisplayFiltersSelection, FiltersDropdown } from \"@/components/issues/issue-layouts/filters\";\n-import { WorkItemFiltersRow } from \"@/components/work-item-filters/work-item-filters-row\";\n+import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n // hooks\n import { useProject } from \"@/hooks/store/use-project\";\n import { usePlatformOS } from \"@/hooks/use-platform-os\";\n // plane web imports\n@@ -264,13 +264,14 @@\n                   initialWorkItemFilters={workItemFilters}\n                   isTemporary\n                   updateFilters={(updateFilters) => onFiltersChange(updateFilters)}\n                   projectId={projectId}\n+                  showOnMount\n                   workspaceSlug={workspaceSlug}\n                 >\n                   {({ filter: projectViewWorkItemsFilter }) =>\n                     projectViewWorkItemsFilter && (\n-                      <WorkItemFiltersRow filter={projectViewWorkItemsFilter} variant=\"default\" />\n+                      <WorkItemFiltersRow filter={projectViewWorkItemsFilter} variant=\"modal\" />\n                     )\n                   }\n                 </ProjectLevelWorkItemFiltersHOC>\n               )}\n"
        },
        {
          "path": "apps/web/core/components/work-item-filters/filters-hoc/base.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/work-item-filters/filters-hoc/base.tsx\n===================================================================\n--- apps/web/core/components/work-item-filters/filters-hoc/base.tsx\t992457e (parent)\n+++ apps/web/core/components/work-item-filters/filters-hoc/base.tsx\t7ce21a6 (commit)\n@@ -2,10 +2,10 @@\n import { observer } from \"mobx-react\";\n import { v4 as uuidv4 } from \"uuid\";\n // plane imports\n import { TSaveViewOptions, TUpdateViewOptions } from \"@plane/constants\";\n-import { IFilterInstance } from \"@plane/shared-state\";\n-import { IIssueFilters, TWorkItemFilterExpression, TWorkItemFilterProperty } from \"@plane/types\";\n+import { IWorkItemFilterInstance } from \"@plane/shared-state\";\n+import { IIssueFilters, TWorkItemFilterExpression } from \"@plane/types\";\n // store hooks\n import { useWorkItemFilters } from \"@/hooks/store/work-item-filters/use-work-item-filters\";\n // plane web imports\n import {\n@@ -38,11 +38,9 @@\n \n type TWorkItemFilterProps = TSharedWorkItemFiltersProps &\n   TAdditionalWorkItemFiltersProps & {\n     initialWorkItemFilters: IIssueFilters;\n-    children:\n-      | React.ReactNode\n-      | ((props: { filter: IFilterInstance<TWorkItemFilterProperty, TWorkItemFilterExpression> }) => React.ReactNode);\n+    children: React.ReactNode | ((props: { filter: IWorkItemFilterInstance }) => React.ReactNode);\n   };\n \n const WorkItemFilterRoot = observer((props: TWorkItemFilterProps) => {\n   const {\n@@ -54,8 +52,9 @@\n     isTemporary,\n     saveViewOptions,\n     updateFilters,\n     updateViewOptions,\n+    showOnMount,\n     ...entityConfigProps\n   } = props;\n   // store hooks\n   const { getOrCreateFilter, deleteFilter } = useWorkItemFilters();\n@@ -83,8 +82,9 @@\n     expressionOptions: {\n       saveViewOptions,\n       updateViewOptions,\n     },\n+    showOnMount,\n   });\n \n   // delete filter instance when component unmounts\n   useEffect(\n"
        },
        {
          "path": "apps/web/core/components/work-item-filters/filters-hoc/shared.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/components/work-item-filters/filters-hoc/shared.ts\n===================================================================\n--- apps/web/core/components/work-item-filters/filters-hoc/shared.ts\t992457e (parent)\n+++ apps/web/core/components/work-item-filters/filters-hoc/shared.ts\t7ce21a6 (commit)\n@@ -1,22 +1,19 @@\n // plane imports\n import { TSaveViewOptions, TUpdateViewOptions } from \"@plane/constants\";\n-import { IFilterInstance } from \"@plane/shared-state\";\n+import { IWorkItemFilterInstance } from \"@plane/shared-state\";\n import { EIssuesStoreType, IIssueFilters, TWorkItemFilterExpression, TWorkItemFilterProperty } from \"@plane/types\";\n \n export type TSharedWorkItemFiltersProps = {\n   entityType: EIssuesStoreType; // entity type (project, cycle, workspace, teamspace, etc)\n   filtersToShowByLayout: TWorkItemFilterProperty[];\n   updateFilters: (updatedFilters: TWorkItemFilterExpression) => void;\n   isTemporary?: boolean;\n+  showOnMount?: boolean;\n } & ({ isTemporary: true; entityId?: string } | { isTemporary?: false; entityId: string }); // entity id (project_id, cycle_id, workspace_id, etc)\n \n export type TSharedWorkItemFiltersHOCProps = TSharedWorkItemFiltersProps & {\n-  children:\n-    | React.ReactNode\n-    | ((props: {\n-        filter: IFilterInstance<TWorkItemFilterProperty, TWorkItemFilterExpression> | undefined;\n-      }) => React.ReactNode);\n+  children: React.ReactNode | ((props: { filter: IWorkItemFilterInstance | undefined }) => React.ReactNode);\n   initialWorkItemFilters: IIssueFilters | undefined;\n };\n \n export type TEnableSaveViewProps = {\n"
        },
        {
          "path": "apps/web/core/components/work-item-filters/filters-row.tsx",
          "status": "renamed",
          "oldPath": "apps/web/core/components/work-item-filters/work-item-filters-row.tsx",
          "diff": "===================================================================\n--- apps/web/core/components/work-item-filters/work-item-filters-row.tsx\t992457e (parent)\n+++ apps/web/core/components/work-item-filters/filters-row.tsx\t7ce21a6 (commit)\n@@ -1,9 +1,12 @@\n import { observer } from \"mobx-react\";\n // plane imports\n+import { IWorkItemFilterInstance } from \"@plane/shared-state\";\n import { TWorkItemFilterExpression, TWorkItemFilterProperty } from \"@plane/types\";\n // components\n import { FiltersRow, TFiltersRowProps } from \"@/components/rich-filters/filters-row\";\n \n-type TWorkItemFiltersRowProps = TFiltersRowProps<TWorkItemFilterProperty, TWorkItemFilterExpression>;\n+type TWorkItemFiltersRowProps = TFiltersRowProps<TWorkItemFilterProperty, TWorkItemFilterExpression> & {\n+  filter: IWorkItemFilterInstance;\n+};\n \n export const WorkItemFiltersRow = observer((props: TWorkItemFiltersRowProps) => <FiltersRow {...props} />);\n"
        },
        {
          "path": "apps/web/core/components/work-item-filters/filters-toggle.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/work-item-filters/filters-toggle.tsx\n===================================================================\n--- apps/web/core/components/work-item-filters/filters-toggle.tsx\t992457e (parent)\n+++ apps/web/core/components/work-item-filters/filters-toggle.tsx\t7ce21a6 (commit)\n@@ -0,0 +1,22 @@\n+import { observer } from \"mobx-react\";\n+// plane imports\n+import { EIssuesStoreType } from \"@plane/types\";\n+// components\n+import { FiltersToggle } from \"@/components/rich-filters/filters-toggle\";\n+// hooks\n+import { useWorkItemFilters } from \"@/hooks/store/work-item-filters/use-work-item-filters\";\n+\n+type TWorkItemFiltersToggleProps = {\n+  entityType: EIssuesStoreType;\n+  entityId: string;\n+};\n+\n+export const WorkItemFiltersToggle = observer((props: TWorkItemFiltersToggleProps) => {\n+  const { entityType, entityId } = props;\n+  // store hooks\n+  const { getFilter } = useWorkItemFilters();\n+  // derived values\n+  const filter = getFilter(entityType, entityId);\n+\n+  return <FiltersToggle filter={filter} />;\n+});\n"
        },
        {
          "path": "apps/web/core/components/workspace/views/form.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/workspace/views/form.tsx\n===================================================================\n--- apps/web/core/components/workspace/views/form.tsx\t992457e (parent)\n+++ apps/web/core/components/workspace/views/form.tsx\t7ce21a6 (commit)\n@@ -20,9 +20,9 @@\n // components\n import { DisplayFiltersSelection, FiltersDropdown } from \"@/components/issues/issue-layouts/filters\";\n import { WorkspaceLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/workspace-level\";\n // plane web imports\n-import { WorkItemFiltersRow } from \"@/components/work-item-filters/work-item-filters-row\";\n+import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n import { AccessController } from \"@/plane-web/components/views/access-controller\";\n \n type Props = {\n   handleFormSubmit: (values: Partial<IWorkspaceView>) => Promise<void>;\n@@ -175,13 +175,14 @@\n                   filtersToShowByLayout={ISSUE_DISPLAY_FILTERS_BY_PAGE.my_issues.filters}\n                   initialWorkItemFilters={workItemFilters}\n                   isTemporary\n                   updateFilters={(updateFilters) => onFiltersChange(updateFilters)}\n+                  showOnMount\n                   workspaceSlug={workspaceSlug}\n                 >\n                   {({ filter: workspaceViewWorkItemsFilter }) =>\n                     workspaceViewWorkItemsFilter && (\n-                      <WorkItemFiltersRow filter={workspaceViewWorkItemsFilter} variant=\"default\" />\n+                      <WorkItemFiltersRow filter={workspaceViewWorkItemsFilter} variant=\"modal\" />\n                     )\n                   }\n                 </WorkspaceLevelWorkItemFiltersHOC>\n               )}\n"
        },
        {
          "path": "apps/web/core/hooks/store/work-item-filters/use-work-item-filter-instance.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/hooks/store/work-item-filters/use-work-item-filter-instance.ts\n===================================================================\n--- apps/web/core/hooks/store/work-item-filters/use-work-item-filter-instance.ts\t992457e (parent)\n+++ apps/web/core/hooks/store/work-item-filters/use-work-item-filter-instance.ts\t7ce21a6 (commit)\n@@ -1,13 +1,13 @@\n // plane imports\n-import { IFilterInstance } from \"@plane/shared-state\";\n-import { EIssuesStoreType, TWorkItemFilterExpression, TWorkItemFilterProperty } from \"@plane/types\";\n+import { IWorkItemFilterInstance } from \"@plane/shared-state\";\n+import { EIssuesStoreType } from \"@plane/types\";\n // local imports\n import { useWorkItemFilters } from \"./use-work-item-filters\";\n \n export const useWorkItemFilterInstance = (\n   entityType: EIssuesStoreType,\n   entityId: string\n-): IFilterInstance<TWorkItemFilterProperty, TWorkItemFilterExpression> | undefined => {\n+): IWorkItemFilterInstance | undefined => {\n   const { getFilter } = useWorkItemFilters();\n   return getFilter(entityType, entityId);\n };\n"
        },
        {
          "path": "packages/constants/src/rich-filters/option.ts",
          "status": "modified",
          "diff": "Index: packages/constants/src/rich-filters/option.ts\n===================================================================\n--- packages/constants/src/rich-filters/option.ts\t992457e (parent)\n+++ packages/constants/src/rich-filters/option.ts\t7ce21a6 (commit)\n@@ -52,12 +52,32 @@\n  */\n export const DEFAULT_FILTER_EXPRESSION_OPTIONS: TExpressionOptions<TExternalFilter> = {};\n \n /**\n+ * Auto visibility options.\n+ */\n+export type TAutoVisibilityOptions =\n+  | {\n+      autoSetVisibility: true;\n+    }\n+  | {\n+      autoSetVisibility: false;\n+      isVisibleOnMount: boolean;\n+    };\n+\n+/**\n+ * Default filter visibility options.\n+ */\n+export const DEFAULT_FILTER_VISIBILITY_OPTIONS: TAutoVisibilityOptions = {\n+  autoSetVisibility: true,\n+};\n+\n+/**\n  * Filter options.\n  * - expression: Filter expression options.\n  * - config: Filter config options.\n  */\n export type TFilterOptions<E extends TExternalFilter> = {\n   expression: Partial<TExpressionOptions<E>>;\n   config: Partial<TConfigOptions>;\n+  visibility: TAutoVisibilityOptions;\n };\n"
        },
        {
          "path": "packages/shared-state/src/store/rich-filters/config-manager.ts",
          "status": "modified",
          "diff": "Index: packages/shared-state/src/store/rich-filters/config-manager.ts\n===================================================================\n--- packages/shared-state/src/store/rich-filters/config-manager.ts\t992457e (parent)\n+++ packages/shared-state/src/store/rich-filters/config-manager.ts\t7ce21a6 (commit)\n@@ -57,9 +57,9 @@\n   // observables\n   filterConfigs: IFilterConfigManager<P>[\"filterConfigs\"];\n   configOptions: IFilterConfigManager<P>[\"configOptions\"];\n   // parent filter instance\n-  _filterInstance: IFilterInstance<P, E>;\n+  private _filterInstance: IFilterInstance<P, E>;\n \n   /**\n    * Creates a new FilterConfigManager instance.\n    *\n"
        },
        {
          "path": "packages/shared-state/src/store/rich-filters/filter-helpers.ts",
          "status": "modified",
          "diff": "Index: packages/shared-state/src/store/rich-filters/filter-helpers.ts\n===================================================================\n--- packages/shared-state/src/store/rich-filters/filter-helpers.ts\t992457e (parent)\n+++ packages/shared-state/src/store/rich-filters/filter-helpers.ts\t7ce21a6 (commit)\n@@ -1,8 +1,8 @@\n import { cloneDeep } from \"lodash-es\";\n-import { toJS } from \"mobx\";\n+import { action, makeObservable, observable, toJS } from \"mobx\";\n // plane imports\n-import { DEFAULT_FILTER_EXPRESSION_OPTIONS, TExpressionOptions } from \"@plane/constants\";\n+import { DEFAULT_FILTER_EXPRESSION_OPTIONS, TAutoVisibilityOptions, TExpressionOptions } from \"@plane/constants\";\n import {\n   IFilterAdapter,\n   LOGICAL_OPERATOR,\n   TSupportedOperators,\n@@ -13,20 +13,30 @@\n   TLogicalOperator,\n   TFilterConditionPayload,\n } from \"@plane/types\";\n import { addAndCondition, createConditionNode, updateNodeInExpression } from \"@plane/utils\";\n+// local imports\n+import { type IFilterInstance } from \"./filter\";\n \n+type TFilterInstanceHelperParams<P extends TFilterProperty, E extends TExternalFilter> = {\n+  adapter: IFilterAdapter<P, E>;\n+};\n+\n /**\n  * Interface for filter instance helper utilities.\n  * Provides comprehensive methods for filter expression manipulation, node operations,\n  * operator utilities, and expression restructuring.\n  * @template P - The filter property type extending TFilterProperty\n  * @template E - The external filter type extending TExternalFilter\n  */\n export interface IFilterInstanceHelper<P extends TFilterProperty, E extends TExternalFilter> {\n+  isVisible: boolean;\n   // initialization\n   initializeExpression: (initialExpression?: E) => TFilterExpression<P> | null;\n   initializeExpressionOptions: (expressionOptions?: Partial<TExpressionOptions<E>>) => TExpressionOptions<E>;\n+  // visibility\n+  setInitialVisibility: (visibilityOption: TAutoVisibilityOptions) => void;\n+  toggleVisibility: (isVisible?: boolean) => void;\n   // condition operations\n   addConditionToExpression: <V extends TFilterValue>(\n     expression: TFilterExpression<P> | null,\n     groupOperator: TLogicalOperator,\n@@ -53,17 +63,30 @@\n  */\n export class FilterInstanceHelper<P extends TFilterProperty, E extends TExternalFilter>\n   implements IFilterInstanceHelper<P, E>\n {\n+  // parent filter instance\n+  private _filterInstance: IFilterInstance<P, E>;\n+  // adapter\n   private adapter: IFilterAdapter<P, E>;\n+  // visibility\n+  isVisible: boolean;\n \n   /**\n    * Creates a new FilterInstanceHelper instance.\n    *\n    * @param adapter - The filter adapter for converting between internal and external formats\n    */\n-  constructor(adapter: IFilterAdapter<P, E>) {\n-    this.adapter = adapter;\n+  constructor(filterInstance: IFilterInstance<P, E>, params: TFilterInstanceHelperParams<P, E>) {\n+    this._filterInstance = filterInstance;\n+    this.adapter = params.adapter;\n+    this.isVisible = false;\n+\n+    makeObservable(this, {\n+      isVisible: observable,\n+      setInitialVisibility: action,\n+      toggleVisibility: action,\n+    });\n   }\n \n   // ------------ initialization ------------\n \n@@ -86,8 +109,43 @@\n     ...DEFAULT_FILTER_EXPRESSION_OPTIONS,\n     ...expressionOptions,\n   });\n \n+  /**\n+   * Sets the initial visibility state for the filter based on options and active filters.\n+   * @param visibilityOption - The visibility options for the filter instance.\n+   * @returns The initial visibility state\n+   */\n+  setInitialVisibility: IFilterInstanceHelper<P, E>[\"setInitialVisibility\"] = action((visibilityOption) => {\n+    // If explicit initial visibility is provided, use it\n+    if (visibilityOption.autoSetVisibility === false) {\n+      this.isVisible = visibilityOption.isVisibleOnMount;\n+      return;\n+    }\n+\n+    // If filter has active filters, make it visible\n+    if (this._filterInstance.hasActiveFilters) {\n+      this.isVisible = true;\n+      return;\n+    }\n+\n+    // Default to hidden if no active filters\n+    this.isVisible = false;\n+    return;\n+  });\n+\n+  /**\n+   * Toggles the visibility of the filter.\n+   * @param isVisible - The visibility to set.\n+   */\n+  toggleVisibility: IFilterInstanceHelper<P, E>[\"toggleVisibility\"] = action((isVisible) => {\n+    if (isVisible !== undefined) {\n+      this.isVisible = isVisible;\n+      return;\n+    }\n+    this.isVisible = !this.isVisible;\n+  });\n+\n   // ------------ condition operations ------------\n \n   /**\n    * Adds a condition to the filter expression based on the logical operator.\n"
        },
        {
          "path": "packages/shared-state/src/store/rich-filters/filter.ts",
          "status": "modified",
          "diff": "Index: packages/shared-state/src/store/rich-filters/filter.ts\n===================================================================\n--- packages/shared-state/src/store/rich-filters/filter.ts\t992457e (parent)\n+++ packages/shared-state/src/store/rich-filters/filter.ts\t7ce21a6 (commit)\n@@ -3,8 +3,9 @@\n import { computedFn } from \"mobx-utils\";\n import { v4 as uuidv4 } from \"uuid\";\n // plane imports\n import {\n+  DEFAULT_FILTER_VISIBILITY_OPTIONS,\n   TClearFilterOptions,\n   TExpressionOptions,\n   TFilterOptions,\n   TSaveViewOptions,\n@@ -70,8 +71,9 @@\n   onExpressionChange?: (expression: E) => void;\n   // computed\n   hasActiveFilters: boolean;\n   hasChanges: boolean;\n+  isVisible: boolean;\n   allConditions: TFilterConditionNode<P, TFilterValue>[];\n   allConditionsForDisplay: TFilterConditionNodeForDisplay<P, TFilterValue>[];\n   // computed option helpers\n   clearFilterOptions: TClearFilterOptions | undefined;\n@@ -80,8 +82,10 @@\n   // computed permissions\n   canClearFilters: boolean;\n   canSaveView: boolean;\n   canUpdateView: boolean;\n+  // visibility\n+  toggleVisibility: (isVisible?: boolean) => void;\n   // filter expression actions\n   resetExpression: (externalExpression: E, shouldResetInitialExpression?: boolean) => void;\n   // filter condition\n   findConditionsByPropertyAndOperator: (\n@@ -107,9 +111,9 @@\n   // expression options actions\n   updateExpressionOptions: (newOptions: Partial<TExpressionOptions<E>>) => void;\n }\n \n-export type TFilterParams<P extends TFilterProperty, E extends TExternalFilter> = {\n+type TFilterParams<P extends TFilterProperty, E extends TExternalFilter> = {\n   adapter: IFilterAdapter<P, E>;\n   options?: Partial<TFilterOptions<E>>;\n   initialExpression?: E;\n   onExpressionChange?: (expression: E) => void;\n@@ -130,9 +134,11 @@\n \n   constructor(params: TFilterParams<P, E>) {\n     this.id = uuidv4();\n     this.adapter = params.adapter;\n-    this.helper = new FilterInstanceHelper<P, E>(this.adapter);\n+    this.helper = new FilterInstanceHelper<P, E>(this, {\n+      adapter: this.adapter,\n+    });\n     this.configManager = new FilterConfigManager<P, E>(this, {\n       options: params.options?.config,\n     });\n     // initialize expression\n@@ -140,8 +146,9 @@\n     this.initialFilterExpression = cloneDeep(initialExpression);\n     this.expression = cloneDeep(initialExpression);\n     this.expressionOptions = this.helper.initializeExpressionOptions(params.options?.expression);\n     this.onExpressionChange = params.onExpressionChange;\n+    this.helper.setInitialVisibility(params.options?.visibility ?? DEFAULT_FILTER_VISIBILITY_OPTIONS);\n \n     makeObservable(this, {\n       // observables\n       id: observable,\n@@ -152,8 +159,9 @@\n       configManager: observable,\n       // computed\n       hasActiveFilters: computed,\n       hasChanges: computed,\n+      isVisible: computed,\n       allConditions: computed,\n       allConditionsForDisplay: computed,\n       // computed option helpers\n       clearFilterOptions: computed,\n@@ -201,8 +209,16 @@\n     return !deepCompareFilterExpressions(this.initialFilterExpression, this.expression);\n   }\n \n   /**\n+   * Returns the visibility of the filter instance.\n+   * @returns The visibility of the filter instance.\n+   */\n+  get isVisible(): IFilterInstance<P, E>[\"isVisible\"] {\n+    return this.helper.isVisible;\n+  }\n+\n+  /**\n    * Returns all conditions from the filter expression.\n    * @returns An array of filter conditions.\n    */\n   get allConditions(): IFilterInstance<P, E>[\"allConditions\"] {\n@@ -279,8 +295,16 @@\n \n   // ------------ actions ------------\n \n   /**\n+   * Toggles the visibility of the filter instance.\n+   * @param isVisible - The visibility to set.\n+   */\n+  toggleVisibility: IFilterInstance<P, E>[\"toggleVisibility\"] = action((isVisible) => {\n+    this.helper.toggleVisibility(isVisible);\n+  });\n+\n+  /**\n    * Resets the filter expression to the initial expression.\n    * @param externalExpression - The external expression to reset to.\n    */\n   resetExpression: IFilterInstance<P, E>[\"resetExpression\"] = action(\n"
        },
        {
          "path": "packages/shared-state/src/store/work-item-filters/filter.store.ts",
          "status": "modified",
          "diff": "Index: packages/shared-state/src/store/work-item-filters/filter.store.ts\n===================================================================\n--- packages/shared-state/src/store/work-item-filters/filter.store.ts\t992457e (parent)\n+++ packages/shared-state/src/store/work-item-filters/filter.store.ts\t7ce21a6 (commit)\n@@ -5,30 +5,25 @@\n import { EIssuesStoreType, LOGICAL_OPERATOR, TWorkItemFilterExpression, TWorkItemFilterProperty } from \"@plane/types\";\n import { getOperatorForPayload } from \"@plane/utils\";\n // local imports\n import { buildWorkItemFilterExpressionFromConditions, TWorkItemFilterCondition } from \"../../utils\";\n-import { FilterInstance, IFilterInstance } from \"../rich-filters/filter\";\n+import { FilterInstance } from \"../rich-filters/filter\";\n import { workItemFiltersAdapter } from \"./adapter\";\n+import { IWorkItemFilterInstance, TWorkItemFilterKey } from \"./shared\";\n \n type TGetOrCreateFilterParams = {\n+  showOnMount?: boolean;\n   entityId: string;\n   entityType: EIssuesStoreType;\n   expressionOptions?: TExpressionOptions<TWorkItemFilterExpression>;\n   initialExpression?: TWorkItemFilterExpression;\n   onExpressionChange?: (expression: TWorkItemFilterExpression) => void;\n };\n \n-type TWorkItemFilterKey = `${EIssuesStoreType}-${string}`;\n-\n export interface IWorkItemFilterStore {\n-  filters: Map<TWorkItemFilterKey, IFilterInstance<TWorkItemFilterProperty, TWorkItemFilterExpression>>; // key is the entity id (project, cycle, workspace, teamspace, etc)\n-  getFilter: (\n-    entityType: EIssuesStoreType,\n-    entityId: string\n-  ) => IFilterInstance<TWorkItemFilterProperty, TWorkItemFilterExpression> | undefined;\n-  getOrCreateFilter: (\n-    params: TGetOrCreateFilterParams\n-  ) => IFilterInstance<TWorkItemFilterProperty, TWorkItemFilterExpression>;\n+  filters: Map<TWorkItemFilterKey, IWorkItemFilterInstance>; // key is the entity id (project, cycle, workspace, teamspace, etc)\n+  getFilter: (entityType: EIssuesStoreType, entityId: string) => IWorkItemFilterInstance | undefined;\n+  getOrCreateFilter: (params: TGetOrCreateFilterParams) => IWorkItemFilterInstance;\n   resetExpression: (entityType: EIssuesStoreType, entityId: string, expression: TWorkItemFilterExpression) => void;\n   updateFilterExpressionFromConditions: (\n     entityType: EIssuesStoreType,\n     entityId: string,\n@@ -47,9 +42,9 @@\n   // observable\n   filters: IWorkItemFilterStore[\"filters\"];\n \n   constructor() {\n-    this.filters = new Map<TWorkItemFilterKey, IFilterInstance<TWorkItemFilterProperty, TWorkItemFilterExpression>>();\n+    this.filters = new Map<TWorkItemFilterKey, IWorkItemFilterInstance>();\n     makeObservable(this, {\n       filters: observable,\n       getOrCreateFilter: action,\n       resetExpression: action,\n@@ -86,14 +81,19 @@\n       // Update callback if provided\n       if (params.onExpressionChange) {\n         existingFilter.onExpressionChange = params.onExpressionChange;\n       }\n+      // Update visibility if provided\n+      if (params.showOnMount !== undefined) {\n+        existingFilter.toggleVisibility(params.showOnMount);\n+      }\n       return existingFilter;\n     }\n \n     // create new filter instance\n     const newFilter = this._initializeFilterInstance(params);\n-    this.filters.set(this._getFilterKey(params.entityType, params.entityId), newFilter);\n+    const filterKey = this._getFilterKey(params.entityType, params.entityId);\n+    this.filters.set(filterKey, newFilter);\n \n     return newFilter;\n   });\n \n@@ -209,7 +209,10 @@\n       initialExpression: params.initialExpression,\n       onExpressionChange: params.onExpressionChange,\n       options: {\n         expression: params.expressionOptions,\n+        visibility: params.showOnMount\n+          ? { autoSetVisibility: false, isVisibleOnMount: true }\n+          : { autoSetVisibility: true },\n       },\n     });\n }\n"
        },
        {
          "path": "packages/shared-state/src/store/work-item-filters/index.ts",
          "status": "modified",
          "diff": "Index: packages/shared-state/src/store/work-item-filters/index.ts\n===================================================================\n--- packages/shared-state/src/store/work-item-filters/index.ts\t992457e (parent)\n+++ packages/shared-state/src/store/work-item-filters/index.ts\t7ce21a6 (commit)\n@@ -1,2 +1,3 @@\n export * from \"./adapter\";\n export * from \"./filter.store\";\n+export * from \"./shared\";\n"
        },
        {
          "path": "packages/shared-state/src/store/work-item-filters/shared.ts",
          "status": "added",
          "diff": "Index: packages/shared-state/src/store/work-item-filters/shared.ts\n===================================================================\n--- packages/shared-state/src/store/work-item-filters/shared.ts\t992457e (parent)\n+++ packages/shared-state/src/store/work-item-filters/shared.ts\t7ce21a6 (commit)\n@@ -0,0 +1,8 @@\n+// plane imports\n+import { EIssuesStoreType, TWorkItemFilterExpression, TWorkItemFilterProperty } from \"@plane/types\";\n+// local imports\n+import { IFilterInstance } from \"../rich-filters\";\n+\n+export type TWorkItemFilterKey = `${EIssuesStoreType}-${string}`;\n+\n+export type IWorkItemFilterInstance = IFilterInstance<TWorkItemFilterProperty, TWorkItemFilterExpression>;\n"
        }
      ]
    },
    {
      "id": "add-gantt-layout",
      "sha": "cbfdcd563860edc595e42b4d34a1711764e07009",
      "parentSha": "a04d3b5c29e0fc8a9db1cbb1e1408c2d4e06b03b",
      "spec": "Implement Gantt layout support in the shared base layout system and refactor timeline type handling across web components and hooks.\n\n1) Add Gantt to base layouts UI\n- File: apps/web/core/components/base-layouts/constants.ts\n  - Import TimelineLayoutIcon from @plane/propel/icons alongside existing icons.\n  - Append a new layout config object to BASE_LAYOUTS with key \"gantt\", icon TimelineLayoutIcon, and label \"Gantt Layout\".\n\n2) Introduce Base Gantt layout and sidebar wrappers for base layouts\n- Files: apps/web/core/components/base-layouts/gantt/\n  - index.ts: Export BaseGanttLayout and BaseGanttSidebar.\n  - layout.tsx: Create BaseGanttLayout component that:\n    - Accepts IBaseLayoutsGanttProps<T> where T extends IBaseLayoutsGanttItem from @plane/types.\n    - Flattens groupedItemIds from groups into blockIds for the Gantt.\n    - Wraps user-provided renderBlock and optional renderSidebar to produce sidebarToRender.\n    - Converts onDateUpdate payloads from IBlockUpdateDependencyData[] to TGanttDateUpdate[] (id, start_date, target_date) before passing to onDateUpdate.\n    - Provides timeline type via TimeLineTypeContext.Provider using the timelineType prop (default ISSUE) mapped through GANTT_TIMELINE_TYPE.\n    - Renders GanttChartRoot with blockIds, blockUpdateHandler, blockToRender, sidebarToRender, quickAdd, showAllBlocks/showToday, capability flags, pagination callbacks (loadMoreBlocks, canLoadMoreBlocks) derived from loadMoreItems.\n  - sidebar.tsx: Create BaseGanttSidebar component that:\n    - Accepts items (map of id->item), blockIds, blockUpdateHandler, enableReorder, showAllBlocks, ganttContainerRef, optional pagination (canLoadMoreBlocks, loadMoreItems) and a renderItem callback.\n    - Uses useTimeLineChartStore() to access getBlockById, updateActiveBlockId, isBlockActive, getNumberOfDaysFromPosition.\n    - Renders a virtualized list with RenderIfVisible and GanttDnDHOC for reorder operations; calls handleOrderChange on drop to compute new sort_order and invoke blockUpdateHandler.\n    - Hides items without start and target dates unless showAllBlocks is true; shows duration indicator derived from block position.\n    - Shows an intersection sentinel and invokes loadMoreItems for pagination when canLoadMoreBlocks is true.\n\n3) Plumb \"showAllBlocks\" through Gantt chart UI\n- File: apps/web/core/components/gantt-chart/chart/main-content.tsx\n  - Add showAllBlocks prop when rendering the sidebar region from GanttChartMainContent so downstream sidebars can conditionally render items without dates.\n- File: apps/web/core/components/gantt-chart/sidebar/root.tsx\n  - Accept and pass through showAllBlocks to the specific sidebar renderer used by the chart.\n\n4) Replace local timeline type enum with shared @plane/types timeline type\n- File: apps/web/core/components/gantt-chart/contexts/index.tsx\n  - Remove ETimeLineTypeType. Replace context type with TTimelineType from @plane/types and export TimeLineTypeContext accordingly. useTimeLineType continues to read from context.\n\n5) Update existing Gantt consumers to use the new timeline type\n- Files:\n  - apps/web/core/components/gantt-chart/sidebar/issues/sidebar.tsx\n  - apps/web/core/components/gantt-chart/sidebar/modules/sidebar.tsx\n  - apps/web/core/components/issues/issue-layouts/gantt/base-gantt-root.tsx\n  - apps/web/core/components/modules/gantt-chart/modules-list-layout.tsx\n  - apps/web/core/layouts/auth-layout/project-wrapper.tsx\n  - Replace imports/usage of ETimeLineTypeType with GANTT_TIMELINE_TYPE from @plane/types.\n  - Update TimeLineTypeContext.Provider values to GANTT_TIMELINE_TYPE.<TYPE>.\n  - Update useTimeLineChart calls to pass GANTT_TIMELINE_TYPE.<TYPE>.\n\n6) Refactor timeline store access to a shared mapper\n- File: apps/web/ce/hooks/use-timeline-chart.ts\n  - Implement getTimelineStore(timelineStore: ITimelineStore, timelineType: TTimelineTypeCore) returning the correct timeline sub-store (issues, modules, project, grouped) based on GANTT_TIMELINE_TYPE.\n- File: apps/web/core/hooks/use-timeline-chart.ts\n  - Replace the switch on ETimeLineTypeType with getTimelineStore from the CE hook.\n  - Update types to use TTimelineType.\n  - Expose useTimeLineChart(timelineType: TTimelineType) and useTimeLineChartStore() that reads the type from TimeLineTypeContext and returns the mapped store. Both must throw if StoreContext or timelineType is missing.\n- File: apps/web/ee/hooks/use-timeline-chart.ts\n  - Re-export from ce/hooks/use-timeline-chart to allow future EE extensions.\n\n7) Extend shared types to include Gantt base layout and timeline types\n- Files under packages/types:\n  - src/base-layouts/base.ts: Extend TBaseLayoutType to include \"gantt\".\n  - src/base-layouts/gantt/core.ts: Define CORE_GANTT_TIMELINE_TYPE with ISSUE, MODULE, PROJECT, GROUPED.\n  - src/base-layouts/gantt/extended.ts: Define empty EXTENDED_GANTT_TIMELINE_TYPE export for future extension.\n  - src/base-layouts/gantt/index.ts: Define:\n    - IBaseLayoutsGanttItem with optional start_date and target_date.\n    - TGanttBlockUpdateData (start_date, target_date, sort_order with destinationIndex and newSortOrder).\n    - TGanttDateUpdate for bulk date updates.\n    - IGanttRenderProps, IGanttCapabilities, TGanttDisplayOptions, and IBaseLayoutsGanttProps that extend base layout props tailored for Gantt.\n    - GANTT_TIMELINE_TYPE combining CORE and EXTENDED.\n    - TTimelineTypeCore and TTimelineType types.\n  - src/base-layouts/index.ts: Re-export ./gantt.\n\n8) Ensure icon availability for Gantt layout selector\n- Confirm TimelineLayoutIcon is exported from @plane/propel/icons and ready for use in BASE_LAYOUTS. No changes required if already present.\n\nAcceptance criteria\n- Selecting \"Gantt Layout\" from the base layout selector renders a timeline view using BaseGanttLayout and BaseGanttSidebar with correct icons, title, and controls.\n- Sidebars and chart correctly include/exclude items without dates based on showAllBlocks.\n- Drag-and-drop reorder in the Gantt sidebar updates sort_order via blockUpdateHandler as described.\n- Date dependency updates are transformed and dispatched via onDateUpdate as TGanttDateUpdate.\n- All timeline type references use GANTT_TIMELINE_TYPE/TTimelineType, and timeline store access is centralized through getTimelineStore across CE/EE and core hooks.\n",
      "prompt": "Add first-class Gantt layout support to the shared base layout system and refactor the timeline type handling to use centralized types.\n\n- Extend the base layout selector to include a new Gantt option with the timeline layout icon.\n- Create base Gantt layout and sidebar wrappers that adapt the base layout item model to the existing GanttChartRoot and sidebar rendering, including pagination, selection, reordering, and optional display of items without dates.\n- Replace the local timeline type enum/context consumers to use a shared GANTT_TIMELINE_TYPE and TTimelineType exported from the types package, and update the Gantt hooks and providers accordingly.\n- Centralize timeline store resolution with a shared getTimelineStore that maps the current timeline type to the correct store (issues, modules, project, grouped) and use it in both the core hook and CE/EE exports.\n- Plumb a showAllBlocks flag through the main Gantt chart and sidebar to control whether items without start/target dates are rendered.\n- Update existing issue and module Gantt views to consume the new timeline type constants and context, and ensure drag-and-drop ordering and dependency date updates continue to work.\n\nKeep the implementation consistent with existing base layout and Gantt chart patterns; do not change unrelated behavior.",
      "supplementalFiles": [
        "apps/web/core/components/gantt-chart/root.tsx",
        "apps/web/core/components/gantt-chart/constants.ts",
        "apps/web/core/components/gantt-chart/sidebar/gantt-dnd-HOC.tsx",
        "apps/web/core/components/gantt-chart/sidebar/utils.ts",
        "apps/web/core/components/ui/loader/layouts/gantt-layout-loader.tsx",
        "apps/web/core/lib/store-context.tsx"
      ],
      "fileDiffs": [
        {
          "path": "apps/web/ce/hooks/use-timeline-chart.ts",
          "status": "added",
          "diff": "Index: apps/web/ce/hooks/use-timeline-chart.ts\n===================================================================\n--- apps/web/ce/hooks/use-timeline-chart.ts\ta04d3b5 (parent)\n+++ apps/web/ce/hooks/use-timeline-chart.ts\tcbfdcd5 (commit)\n@@ -0,0 +1,26 @@\n+// types\n+import type { TTimelineTypeCore } from \"@plane/types\";\n+import { GANTT_TIMELINE_TYPE } from \"@plane/types\";\n+// Plane-web\n+\n+import type { IBaseTimelineStore } from \"@/plane-web/store/timeline/base-timeline.store\";\n+import type { ITimelineStore } from \"../store/timeline\";\n+\n+export const getTimelineStore = (\n+  timelineStore: ITimelineStore,\n+  timelineType: TTimelineTypeCore\n+): IBaseTimelineStore => {\n+  if (timelineType === GANTT_TIMELINE_TYPE.ISSUE) {\n+    return timelineStore.issuesTimeLineStore as IBaseTimelineStore;\n+  }\n+  if (timelineType === GANTT_TIMELINE_TYPE.MODULE) {\n+    return timelineStore.modulesTimeLineStore as IBaseTimelineStore;\n+  }\n+  if (timelineType === GANTT_TIMELINE_TYPE.PROJECT) {\n+    return timelineStore.projectTimeLineStore as IBaseTimelineStore;\n+  }\n+  if (timelineType === GANTT_TIMELINE_TYPE.GROUPED) {\n+    return timelineStore.groupedTimeLineStore as IBaseTimelineStore;\n+  }\n+  throw new Error(`Unknown timeline type: ${timelineType}`);\n+};\n"
        },
        {
          "path": "apps/web/core/components/base-layouts/constants.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/components/base-layouts/constants.ts\n===================================================================\n--- apps/web/core/components/base-layouts/constants.ts\ta04d3b5 (parent)\n+++ apps/web/core/components/base-layouts/constants.ts\tcbfdcd5 (commit)\n@@ -1,5 +1,5 @@\n-import { BoardLayoutIcon, ListLayoutIcon } from \"@plane/propel/icons\";\n+import { BoardLayoutIcon, ListLayoutIcon, TimelineLayoutIcon } from \"@plane/propel/icons\";\n import type { IBaseLayoutConfig } from \"@plane/types\";\n \n export const BASE_LAYOUTS: IBaseLayoutConfig[] = [\n   {\n@@ -11,5 +11,10 @@\n     key: \"kanban\",\n     icon: BoardLayoutIcon,\n     label: \"Board Layout\",\n   },\n+  {\n+    key: \"gantt\",\n+    icon: TimelineLayoutIcon,\n+    label: \"Gantt Layout\",\n+  },\n ];\n"
        },
        {
          "path": "apps/web/core/components/base-layouts/gantt/index.ts",
          "status": "added",
          "diff": "Index: apps/web/core/components/base-layouts/gantt/index.ts\n===================================================================\n--- apps/web/core/components/base-layouts/gantt/index.ts\ta04d3b5 (parent)\n+++ apps/web/core/components/base-layouts/gantt/index.ts\tcbfdcd5 (commit)\n@@ -0,0 +1,2 @@\n+export { BaseGanttLayout } from \"./layout\";\n+export { BaseGanttSidebar } from \"./sidebar\";\n"
        },
        {
          "path": "apps/web/core/components/base-layouts/gantt/layout.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/base-layouts/gantt/layout.tsx\n===================================================================\n--- apps/web/core/components/base-layouts/gantt/layout.tsx\ta04d3b5 (parent)\n+++ apps/web/core/components/base-layouts/gantt/layout.tsx\tcbfdcd5 (commit)\n@@ -0,0 +1,140 @@\n+\"use client\";\n+\n+import { useCallback, useMemo } from \"react\";\n+import { observer } from \"mobx-react\";\n+import { GANTT_TIMELINE_TYPE } from \"@plane/types\";\n+import type {\n+  IBaseLayoutsGanttItem,\n+  IBaseLayoutsGanttProps,\n+  TGanttBlockUpdateData,\n+  IBlockUpdateDependencyData,\n+} from \"@plane/types\";\n+import { cn } from \"@plane/utils\";\n+import { TimeLineTypeContext } from \"@/components/gantt-chart/contexts\";\n+import { GanttChartRoot } from \"@/components/gantt-chart/root\";\n+import { BaseGanttSidebar } from \"./sidebar\";\n+\n+export const BaseGanttLayout = observer(<T extends IBaseLayoutsGanttItem>(props: IBaseLayoutsGanttProps<T>) => {\n+  const {\n+    items,\n+    groupedItemIds,\n+    groups,\n+    renderBlock,\n+    renderSidebar,\n+    onBlockUpdate,\n+    onDateUpdate,\n+    enableBlockLeftResize = false,\n+    enableBlockRightResize = false,\n+    enableBlockMove = false,\n+    enableReorder = false,\n+    enableAddBlock = false,\n+    enableSelection = false,\n+    enableDependency = false,\n+    showAllBlocks = false,\n+    showToday = true,\n+    border = false,\n+    title = \"Items\",\n+    loaderTitle = \"items\",\n+    quickAdd,\n+    loadMoreItems,\n+    isLoading: _isLoading,\n+    className,\n+    timelineType: timelineTypeKey = GANTT_TIMELINE_TYPE.ISSUE,\n+  } = props;\n+\n+  // Flatten all grouped item IDs into a single array for gantt\n+  // Gantt doesn't typically show groups, it shows all items on a timeline\n+  const blockIds = useMemo(() => {\n+    const allIds: string[] = [];\n+    groups.forEach((group) => {\n+      const itemIds = groupedItemIds[group.id] || [];\n+      allIds.push(...itemIds);\n+    });\n+    return allIds;\n+  }, [groups, groupedItemIds]);\n+\n+  // Block update handler - transforms base layout item updates to gantt block updates\n+  const handleBlockUpdate = useCallback(\n+    (block: T, payload: TGanttBlockUpdateData) => {\n+      if (onBlockUpdate) {\n+        onBlockUpdate(block, payload);\n+      }\n+    },\n+    [onBlockUpdate]\n+  );\n+\n+  // Block renderer - wraps the user's render function\n+  const blockToRender = useCallback((item: T) => renderBlock(item), [renderBlock]);\n+\n+  // Sidebar renderer - uses custom or default\n+  const sidebarToRender = useCallback(\n+    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n+    (sidebarProps: any) => {\n+      if (renderSidebar) {\n+        // If custom sidebar renderer provided, use it\n+        return (\n+          <BaseGanttSidebar {...sidebarProps} items={items} renderItem={renderSidebar} loadMoreItems={loadMoreItems} />\n+        );\n+      }\n+      // Otherwise use default sidebar\n+      return (\n+        <BaseGanttSidebar {...sidebarProps} items={items} renderItem={renderBlock} loadMoreItems={loadMoreItems} />\n+      );\n+    },\n+    [renderSidebar, renderBlock, items, loadMoreItems]\n+  );\n+\n+  const timelineType = GANTT_TIMELINE_TYPE[timelineTypeKey];\n+\n+  // Date update handler - transforms IBlockUpdateDependencyData to TGanttDateUpdate\n+  const handleDateUpdate = useCallback(\n+    async (updates: IBlockUpdateDependencyData[]) => {\n+      if (onDateUpdate) {\n+        // Transform IBlockUpdateDependencyData[] to TGanttDateUpdate[]\n+        const transformedUpdates = updates.map((update) => ({\n+          id: update.id,\n+          start_date: update.start_date,\n+          target_date: update.target_date,\n+        }));\n+        await onDateUpdate(transformedUpdates);\n+      }\n+    },\n+    [onDateUpdate]\n+  );\n+\n+  // Load more handler - wraps loadMoreItems to match expected signature\n+  const handleLoadMore = useCallback(() => {\n+    if (loadMoreItems) {\n+      loadMoreItems(\"\"); // Pass empty string as default group ID\n+    }\n+  }, [loadMoreItems]);\n+\n+  return (\n+    <TimeLineTypeContext.Provider value={timelineType}>\n+      <div className={cn(\"h-full w-full\", className)}>\n+        <GanttChartRoot\n+          border={border}\n+          title={title}\n+          loaderTitle={loaderTitle}\n+          blockIds={blockIds}\n+          blockUpdateHandler={handleBlockUpdate}\n+          blockToRender={blockToRender}\n+          sidebarToRender={sidebarToRender}\n+          enableBlockLeftResize={enableBlockLeftResize}\n+          enableBlockRightResize={enableBlockRightResize}\n+          enableBlockMove={enableBlockMove}\n+          enableReorder={enableReorder}\n+          enableAddBlock={enableAddBlock}\n+          enableSelection={enableSelection}\n+          enableDependency={enableDependency}\n+          showAllBlocks={showAllBlocks}\n+          showToday={showToday}\n+          quickAdd={quickAdd}\n+          updateBlockDates={onDateUpdate ? handleDateUpdate : undefined}\n+          loadMoreBlocks={loadMoreItems ? handleLoadMore : undefined}\n+          canLoadMoreBlocks={!!loadMoreItems} // Enable pagination if loadMoreItems is provided\n+        />\n+      </div>\n+    </TimeLineTypeContext.Provider>\n+  );\n+});\n"
        },
        {
          "path": "apps/web/core/components/base-layouts/gantt/sidebar.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/base-layouts/gantt/sidebar.tsx\n===================================================================\n--- apps/web/core/components/base-layouts/gantt/sidebar.tsx\ta04d3b5 (parent)\n+++ apps/web/core/components/base-layouts/gantt/sidebar.tsx\tcbfdcd5 (commit)\n@@ -0,0 +1,148 @@\n+\"use client\";\n+\n+import type { RefObject } from \"react\";\n+import { useState } from \"react\";\n+import { observer } from \"mobx-react\";\n+import type { IBaseLayoutsBaseItem, IBlockUpdateData } from \"@plane/types\";\n+import { Loader, Row } from \"@plane/ui\";\n+import { cn } from \"@plane/utils\";\n+import RenderIfVisible from \"@/components/core/render-if-visible-HOC\";\n+import { BLOCK_HEIGHT } from \"@/components/gantt-chart/constants\";\n+import { GanttDnDHOC } from \"@/components/gantt-chart/sidebar/gantt-dnd-HOC\";\n+import { handleOrderChange } from \"@/components/gantt-chart/sidebar/utils\";\n+import { GanttLayoutListItemLoader } from \"@/components/ui/loader/layouts/gantt-layout-loader\";\n+import { useIntersectionObserver } from \"@/hooks/use-intersection-observer\";\n+import { useTimeLineChartStore } from \"@/hooks/use-timeline-chart\";\n+\n+type Props<T extends IBaseLayoutsBaseItem> = {\n+  blockUpdateHandler: (block: T, payload: IBlockUpdateData) => void;\n+  canLoadMoreBlocks?: boolean;\n+  loadMoreItems?: (groupId: string) => void;\n+  ganttContainerRef: RefObject<HTMLDivElement>;\n+  blockIds: string[];\n+  enableReorder: boolean;\n+  showAllBlocks?: boolean;\n+  items: Record<string, T>;\n+  renderItem: (item: T) => React.ReactNode;\n+};\n+\n+export const BaseGanttSidebar = observer(<T extends IBaseLayoutsBaseItem>(props: Props<T>) => {\n+  const {\n+    blockUpdateHandler,\n+    blockIds,\n+    enableReorder,\n+    loadMoreItems,\n+    canLoadMoreBlocks,\n+    ganttContainerRef,\n+    showAllBlocks = false,\n+    items,\n+    renderItem,\n+  } = props;\n+\n+  const { getBlockById, updateActiveBlockId, isBlockActive, getNumberOfDaysFromPosition } = useTimeLineChartStore();\n+\n+  const [intersectionElement, setIntersectionElement] = useState<HTMLDivElement | null>(null);\n+\n+  const isPaginating = false; // TODO: Add proper pagination state\n+\n+  useIntersectionObserver(\n+    ganttContainerRef,\n+    isPaginating ? null : intersectionElement,\n+    loadMoreItems ? () => loadMoreItems(\"\") : undefined,\n+    \"100% 0% 100% 0%\"\n+  );\n+\n+  const handleOnDrop = (\n+    draggingBlockId: string | undefined,\n+    droppedBlockId: string | undefined,\n+    dropAtEndOfList: boolean\n+  ) => {\n+    handleOrderChange(draggingBlockId, droppedBlockId, dropAtEndOfList, blockIds, getBlockById, blockUpdateHandler);\n+  };\n+\n+  return (\n+    <div>\n+      {blockIds ? (\n+        <>\n+          {blockIds.map((blockId, index) => {\n+            const block = getBlockById(blockId);\n+            const item = items[blockId];\n+            const isBlockVisibleOnSidebar = block?.start_date && block?.target_date;\n+\n+            // hide the block if it doesn't have start and target dates and showAllBlocks is false\n+            if (!block || (!showAllBlocks && !isBlockVisibleOnSidebar)) return null;\n+\n+            if (!item) return null;\n+\n+            return (\n+              <RenderIfVisible\n+                key={blockId}\n+                root={ganttContainerRef}\n+                horizontalOffset={100}\n+                verticalOffset={200}\n+                shouldRecordHeights={false}\n+                placeholderChildren={<GanttLayoutListItemLoader />}\n+              >\n+                <GanttDnDHOC\n+                  id={blockId}\n+                  isLastChild={index === blockIds.length - 1}\n+                  isDragEnabled={enableReorder}\n+                  onDrop={handleOnDrop}\n+                >\n+                  {(isDragging: boolean) => {\n+                    const block = getBlockById(blockId);\n+                    const isBlockComplete = !!block?.start_date && !!block?.target_date;\n+                    const duration = isBlockComplete ? getNumberOfDaysFromPosition(block?.position?.width) : undefined;\n+                    const isBlockHoveredOn = isBlockActive(blockId);\n+\n+                    return (\n+                      <div\n+                        className={cn(\"group/list-block\", {\n+                          \"rounded bg-custom-background-80\": isDragging,\n+                        })}\n+                        onMouseEnter={() => updateActiveBlockId(blockId)}\n+                        onMouseLeave={() => updateActiveBlockId(null)}\n+                      >\n+                        <Row\n+                          className={cn(\"group w-full flex items-center gap-2 pr-4\", {\n+                            \"bg-custom-background-90\": isBlockHoveredOn,\n+                          })}\n+                          style={{\n+                            height: `${BLOCK_HEIGHT}px`,\n+                          }}\n+                        >\n+                          <div className=\"flex h-full flex-grow items-center justify-between gap-2 truncate\">\n+                            <div className=\"flex-grow truncate\">{renderItem(item)}</div>\n+                            {duration && (\n+                              <div className=\"flex-shrink-0 text-sm text-custom-text-200\">\n+                                <span>\n+                                  {duration} day{duration > 1 ? \"s\" : \"\"}\n+                                </span>\n+                              </div>\n+                            )}\n+                          </div>\n+                        </Row>\n+                      </div>\n+                    );\n+                  }}\n+                </GanttDnDHOC>\n+              </RenderIfVisible>\n+            );\n+          })}\n+          {canLoadMoreBlocks && (\n+            <div ref={setIntersectionElement} className=\"p-2\">\n+              <div className=\"flex h-10 md:h-8 w-full items-center justify-between gap-1.5 rounded md:px-1 px-4 py-1.5 bg-custom-background-80 animate-pulse\" />\n+            </div>\n+          )}\n+        </>\n+      ) : (\n+        <Loader className=\"space-y-3 pr-2\">\n+          <Loader.Item height=\"34px\" />\n+          <Loader.Item height=\"34px\" />\n+          <Loader.Item height=\"34px\" />\n+          <Loader.Item height=\"34px\" />\n+        </Loader>\n+      )}\n+    </div>\n+  );\n+});\n"
        },
        {
          "path": "apps/web/core/components/gantt-chart/chart/main-content.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/gantt-chart/chart/main-content.tsx\n===================================================================\n--- apps/web/core/components/gantt-chart/chart/main-content.tsx\ta04d3b5 (parent)\n+++ apps/web/core/components/gantt-chart/chart/main-content.tsx\tcbfdcd5 (commit)\n@@ -186,8 +186,9 @@\n                 sidebarToRender={sidebarToRender}\n                 title={title}\n                 quickAdd={quickAdd}\n                 selectionHelpers={helpers}\n+                showAllBlocks={showAllBlocks}\n                 isEpic={isEpic}\n               />\n               <div className=\"relative min-h-full h-max flex-shrink-0 flex-grow\">\n                 <ActiveChartView />\n"
        },
        {
          "path": "apps/web/core/components/gantt-chart/contexts/index.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/gantt-chart/contexts/index.tsx\n===================================================================\n--- apps/web/core/components/gantt-chart/contexts/index.tsx\ta04d3b5 (parent)\n+++ apps/web/core/components/gantt-chart/contexts/index.tsx\tcbfdcd5 (commit)\n@@ -1,16 +1,9 @@\n import { createContext, useContext } from \"react\";\n+import type { TTimelineType } from \"@plane/types\";\n \n-export enum ETimeLineTypeType {\n-  ISSUE = \"ISSUE\",\n-  MODULE = \"MODULE\",\n-  PROJECT = \"PROJECT\",\n-  GROUPED = \"GROUPED\",\n-}\n+export const TimeLineTypeContext = createContext<TTimelineType | undefined>(undefined);\n \n-export const TimeLineTypeContext = createContext<ETimeLineTypeType | undefined>(undefined);\n-\n export const useTimeLineType = () => {\n   const timelineType = useContext(TimeLineTypeContext);\n-\n   return timelineType;\n };\n"
        },
        {
          "path": "apps/web/core/components/gantt-chart/sidebar/issues/sidebar.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/gantt-chart/sidebar/issues/sidebar.tsx\n===================================================================\n--- apps/web/core/components/gantt-chart/sidebar/issues/sidebar.tsx\ta04d3b5 (parent)\n+++ apps/web/core/components/gantt-chart/sidebar/issues/sidebar.tsx\tcbfdcd5 (commit)\n@@ -3,8 +3,9 @@\n import type { RefObject } from \"react\";\n import { useState } from \"react\";\n import { observer } from \"mobx-react\";\n // ui\n+import { GANTT_TIMELINE_TYPE } from \"@plane/types\";\n import type { IBlockUpdateData } from \"@plane/types\";\n import { Loader } from \"@plane/ui\";\n // components\n import RenderIfVisible from \"@/components/core/render-if-visible-HOC\";\n@@ -14,9 +15,8 @@\n import { useIssuesStore } from \"@/hooks/use-issue-layout-store\";\n import type { TSelectionHelper } from \"@/hooks/use-multiple-select\";\n // local imports\n import { useTimeLineChart } from \"../../../../hooks/use-timeline-chart\";\n-import { ETimeLineTypeType } from \"../../contexts\";\n import { GanttDnDHOC } from \"../gantt-dnd-HOC\";\n import { handleOrderChange } from \"../utils\";\n import { IssuesSidebarBlock } from \"./block\";\n \n@@ -46,9 +46,9 @@\n     selectionHelpers,\n     isEpic = false,\n   } = props;\n \n-  const { getBlockById } = useTimeLineChart(ETimeLineTypeType.ISSUE);\n+  const { getBlockById } = useTimeLineChart(GANTT_TIMELINE_TYPE.ISSUE);\n \n   const {\n     issues: { getIssueLoader },\n   } = useIssuesStore();\n"
        },
        {
          "path": "apps/web/core/components/gantt-chart/sidebar/modules/sidebar.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/gantt-chart/sidebar/modules/sidebar.tsx\n===================================================================\n--- apps/web/core/components/gantt-chart/sidebar/modules/sidebar.tsx\ta04d3b5 (parent)\n+++ apps/web/core/components/gantt-chart/sidebar/modules/sidebar.tsx\tcbfdcd5 (commit)\n@@ -1,15 +1,14 @@\n \"use client\";\n \n import { observer } from \"mobx-react\";\n // ui\n+import { GANTT_TIMELINE_TYPE } from \"@plane/types\";\n import type { IBlockUpdateData } from \"@plane/types\";\n import { Loader } from \"@plane/ui\";\n // components\n // hooks\n import { useTimeLineChart } from \"@/hooks/use-timeline-chart\";\n-//\n-import { ETimeLineTypeType } from \"../../contexts\";\n import { GanttDnDHOC } from \"../gantt-dnd-HOC\";\n import { handleOrderChange } from \"../utils\";\n import { ModulesSidebarBlock } from \"./block\";\n // types\n@@ -23,9 +22,9 @@\n \n export const ModuleGanttSidebar: React.FC<Props> = observer((props) => {\n   const { blockUpdateHandler, blockIds, enableReorder } = props;\n \n-  const { getBlockById } = useTimeLineChart(ETimeLineTypeType.MODULE);\n+  const { getBlockById } = useTimeLineChart(GANTT_TIMELINE_TYPE.MODULE);\n \n   const handleOnDrop = (\n     draggingBlockId: string | undefined,\n     droppedBlockId: string | undefined,\n"
        },
        {
          "path": "apps/web/core/components/gantt-chart/sidebar/root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/gantt-chart/sidebar/root.tsx\n===================================================================\n--- apps/web/core/components/gantt-chart/sidebar/root.tsx\ta04d3b5 (parent)\n+++ apps/web/core/components/gantt-chart/sidebar/root.tsx\tcbfdcd5 (commit)\n@@ -23,8 +23,9 @@\n   sidebarToRender: (props: any) => React.ReactNode;\n   title: string;\n   quickAdd?: React.ReactNode | undefined;\n   selectionHelpers: TSelectionHelper;\n+  showAllBlocks?: boolean;\n   isEpic?: boolean;\n };\n \n export const GanttChartSidebar: React.FC<Props> = observer((props) => {\n@@ -40,8 +41,9 @@\n     ganttContainerRef,\n     title,\n     quickAdd,\n     selectionHelpers,\n+    showAllBlocks = false,\n     isEpic = false,\n   } = props;\n \n   const isGroupSelectionEmpty = selectionHelpers.isGroupSelected(GANTT_SELECT_GROUP) === \"empty\";\n@@ -93,8 +95,9 @@\n             canLoadMoreBlocks,\n             ganttContainerRef,\n             loadMoreBlocks,\n             selectionHelpers,\n+            showAllBlocks,\n             isEpic,\n           })}\n       </Row>\n       {quickAdd ? quickAdd : null}\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/gantt/base-gantt-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/gantt/base-gantt-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/gantt/base-gantt-root.tsx\ta04d3b5 (parent)\n+++ apps/web/core/components/issues/issue-layouts/gantt/base-gantt-root.tsx\tcbfdcd5 (commit)\n@@ -5,12 +5,12 @@\n import { ALL_ISSUES, EUserPermissions, EUserPermissionsLevel } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n import { TOAST_TYPE, setToast } from \"@plane/propel/toast\";\n import type { EIssuesStoreType, IBlockUpdateData, TIssue } from \"@plane/types\";\n-import { EIssueLayoutTypes } from \"@plane/types\";\n+import { EIssueLayoutTypes, GANTT_TIMELINE_TYPE } from \"@plane/types\";\n import { renderFormattedPayloadDate } from \"@plane/utils\";\n // components\n-import { ETimeLineTypeType, TimeLineTypeContext } from \"@/components/gantt-chart/contexts\";\n+import { TimeLineTypeContext } from \"@/components/gantt-chart/contexts\";\n import { GanttChartRoot } from \"@/components/gantt-chart/root\";\n import { IssueGanttSidebar } from \"@/components/gantt-chart/sidebar/issues/sidebar\";\n // hooks\n import { useIssues } from \"@/hooks/store/use-issues\";\n@@ -46,9 +46,9 @@\n \n   const storeType = useIssueStoreType() as GanttStoreType;\n   const { issues, issuesFilter } = useIssues(storeType);\n   const { fetchIssues, fetchNextIssues, updateIssue, quickAddIssue } = useIssuesActions(storeType);\n-  const { initGantt } = useTimeLineChart(ETimeLineTypeType.ISSUE);\n+  const { initGantt } = useTimeLineChart(GANTT_TIMELINE_TYPE.ISSUE);\n   // store hooks\n   const { allowPermissions } = useUserPermissions();\n \n   const appliedDisplayFilters = issuesFilter.issueFilters?.displayFilters;\n@@ -119,9 +119,9 @@\n     ) : undefined;\n \n   return (\n     <IssueLayoutHOC layout={EIssueLayoutTypes.GANTT}>\n-      <TimeLineTypeContext.Provider value={ETimeLineTypeType.ISSUE}>\n+      <TimeLineTypeContext.Provider value={GANTT_TIMELINE_TYPE.ISSUE}>\n         <div className=\"h-full w-full\">\n           <GanttChartRoot\n             border={false}\n             title={isEpic ? t(\"epic.label\", { count: 2 }) : t(\"issue.label\", { count: 2 })}\n"
        },
        {
          "path": "apps/web/core/components/modules/gantt-chart/modules-list-layout.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/modules/gantt-chart/modules-list-layout.tsx\n===================================================================\n--- apps/web/core/components/modules/gantt-chart/modules-list-layout.tsx\ta04d3b5 (parent)\n+++ apps/web/core/components/modules/gantt-chart/modules-list-layout.tsx\tcbfdcd5 (commit)\n@@ -1,11 +1,12 @@\n import { observer } from \"mobx-react\";\n import { useParams } from \"next/navigation\";\n // PLane\n+import { GANTT_TIMELINE_TYPE } from \"@plane/types\";\n import type { IBlockUpdateData, IBlockUpdateDependencyData, IModule } from \"@plane/types\";\n // components\n import { GanttChartRoot, ModuleGanttSidebar } from \"@/components/gantt-chart\";\n-import { ETimeLineTypeType, TimeLineTypeContext } from \"@/components/gantt-chart/contexts\";\n+import { TimeLineTypeContext } from \"@/components/gantt-chart/contexts\";\n import { ModuleGanttBlock } from \"@/components/modules\";\n // hooks\n import { useModule } from \"@/hooks/store/use-module\";\n import { useModuleFilter } from \"@/hooks/store/use-module-filter\";\n@@ -48,9 +49,9 @@\n \n   if (!filteredModuleIds) return null;\n \n   return (\n-    <TimeLineTypeContext.Provider value={ETimeLineTypeType.MODULE}>\n+    <TimeLineTypeContext.Provider value={GANTT_TIMELINE_TYPE.MODULE}>\n       <GanttChartRoot\n         title=\"Modules\"\n         loaderTitle=\"Modules\"\n         blockIds={filteredModuleIds}\n"
        },
        {
          "path": "apps/web/core/hooks/use-timeline-chart.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/hooks/use-timeline-chart.ts\n===================================================================\n--- apps/web/core/hooks/use-timeline-chart.ts\ta04d3b5 (parent)\n+++ apps/web/core/hooks/use-timeline-chart.ts\tcbfdcd5 (commit)\n@@ -1,31 +1,26 @@\n import { useContext } from \"react\";\n+// types\n+import type { TTimelineType } from \"@plane/types\";\n // lib\n import { StoreContext } from \"@/lib/store-context\";\n // Plane-web\n+import { getTimelineStore } from \"@/plane-web/hooks/use-timeline-chart\";\n import type { IBaseTimelineStore } from \"@/plane-web/store/timeline/base-timeline.store\";\n-//\n-import { ETimeLineTypeType, useTimeLineType } from \"../components/gantt-chart/contexts\";\n+import { useTimeLineType } from \"../components/gantt-chart/contexts\";\n \n-export const useTimeLineChart = (timeLineType: ETimeLineTypeType): IBaseTimelineStore => {\n+export const useTimeLineChart = (timelineType: TTimelineType): IBaseTimelineStore => {\n   const context = useContext(StoreContext);\n-  if (context === undefined) throw new Error(\"useTimeLineChart must be used within StoreProvider\");\n+  if (!context) throw new Error(\"useTimeLineChart must be used within StoreProvider\");\n \n-  switch (timeLineType) {\n-    case ETimeLineTypeType.ISSUE:\n-      return context.timelineStore.issuesTimeLineStore;\n-    case ETimeLineTypeType.MODULE:\n-      return context.timelineStore.modulesTimeLineStore as IBaseTimelineStore;\n-    case ETimeLineTypeType.PROJECT:\n-      return context.timelineStore.projectTimeLineStore as IBaseTimelineStore;\n-    case ETimeLineTypeType.GROUPED:\n-      return context.timelineStore.groupedTimeLineStore as IBaseTimelineStore;\n-  }\n+  return getTimelineStore(context.timelineStore, timelineType);\n };\n \n-export const useTimeLineChartStore = () => {\n+export const useTimeLineChartStore = (): IBaseTimelineStore => {\n+  const context = useContext(StoreContext);\n   const timelineType = useTimeLineType();\n \n+  if (!context) throw new Error(\"useTimeLineChartStore must be used within StoreProvider\");\n   if (!timelineType) throw new Error(\"useTimeLineChartStore must be used within TimeLineTypeContext\");\n \n-  return useTimeLineChart(timelineType);\n+  return getTimelineStore(context.timelineStore, timelineType);\n };\n"
        },
        {
          "path": "apps/web/core/layouts/auth-layout/project-wrapper.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/layouts/auth-layout/project-wrapper.tsx\n===================================================================\n--- apps/web/core/layouts/auth-layout/project-wrapper.tsx\ta04d3b5 (parent)\n+++ apps/web/core/layouts/auth-layout/project-wrapper.tsx\tcbfdcd5 (commit)\n@@ -7,13 +7,12 @@\n // plane imports\n import { EUserPermissions, EUserPermissionsLevel, PROJECT_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n import { EmptyStateDetailed } from \"@plane/propel/empty-state\";\n-import { EProjectNetwork } from \"@plane/types\";\n+import { EProjectNetwork, GANTT_TIMELINE_TYPE } from \"@plane/types\";\n // components\n import { JoinProject } from \"@/components/auth-screens/project/join-project\";\n import { LogoSpinner } from \"@/components/common/logo-spinner\";\n-import { ETimeLineTypeType } from \"@/components/gantt-chart/contexts\";\n import {\n   PROJECT_DETAILS,\n   PROJECT_ME_INFORMATION,\n   PROJECT_LABELS,\n@@ -56,9 +55,9 @@\n   const { fetchUserProjectInfo, allowPermissions, getProjectRoleByWorkspaceSlugAndProjectId } = useUserPermissions();\n   const { loader, getProjectById, fetchProjectDetails } = useProject();\n   const { fetchAllCycles } = useCycle();\n   const { fetchModulesSlim, fetchModules } = useModule();\n-  const { initGantt } = useTimeLineChart(ETimeLineTypeType.MODULE);\n+  const { initGantt } = useTimeLineChart(GANTT_TIMELINE_TYPE.MODULE);\n   const { fetchViews } = useProjectView();\n   const {\n     project: { fetchProjectMembers },\n   } = useMember();\n"
        },
        {
          "path": "apps/web/ee/hooks/use-timeline-chart.ts",
          "status": "added",
          "diff": "Index: apps/web/ee/hooks/use-timeline-chart.ts\n===================================================================\n--- apps/web/ee/hooks/use-timeline-chart.ts\ta04d3b5 (parent)\n+++ apps/web/ee/hooks/use-timeline-chart.ts\tcbfdcd5 (commit)\n@@ -0,0 +1,3 @@\n+// For now, just re-export from CE\n+// In the future, you can extend the timeline store mapping here for EE-specific timeline types\n+export * from \"ce/hooks/use-timeline-chart\";\n"
        },
        {
          "path": "packages/types/src/base-layouts/base.ts",
          "status": "modified",
          "diff": "Index: packages/types/src/base-layouts/base.ts\n===================================================================\n--- packages/types/src/base-layouts/base.ts\ta04d3b5 (parent)\n+++ packages/types/src/base-layouts/base.ts\tcbfdcd5 (commit)\n@@ -51,9 +51,9 @@\n export interface IRenderProps<T extends IBaseLayoutsBaseItem> extends IItemRenderProps<T>, IGroupRenderProps {}\n \n // Layout Configuration\n \n-export type TBaseLayoutType = \"list\" | \"kanban\";\n+export type TBaseLayoutType = \"list\" | \"kanban\" | \"gantt\";\n \n export interface IBaseLayoutConfig {\n   key: TBaseLayoutType;\n   icon: React.ComponentType<React.SVGProps<SVGSVGElement>>;\n"
        },
        {
          "path": "packages/types/src/base-layouts/gantt/core.ts",
          "status": "added",
          "diff": "Index: packages/types/src/base-layouts/gantt/core.ts\n===================================================================\n--- packages/types/src/base-layouts/gantt/core.ts\ta04d3b5 (parent)\n+++ packages/types/src/base-layouts/gantt/core.ts\tcbfdcd5 (commit)\n@@ -0,0 +1,6 @@\n+export const CORE_GANTT_TIMELINE_TYPE = {\n+  ISSUE: \"ISSUE\",\n+  MODULE: \"MODULE\",\n+  PROJECT: \"PROJECT\",\n+  GROUPED: \"GROUPED\",\n+} as const;\n"
        },
        {
          "path": "packages/types/src/base-layouts/gantt/extended.ts",
          "status": "added",
          "diff": "Index: packages/types/src/base-layouts/gantt/extended.ts\n===================================================================\n--- packages/types/src/base-layouts/gantt/extended.ts\ta04d3b5 (parent)\n+++ packages/types/src/base-layouts/gantt/extended.ts\tcbfdcd5 (commit)\n@@ -0,0 +1,1 @@\n+export const EXTENDED_GANTT_TIMELINE_TYPE = {} as const;\n"
        },
        {
          "path": "packages/types/src/base-layouts/gantt/index.ts",
          "status": "added",
          "diff": "Index: packages/types/src/base-layouts/gantt/index.ts\n===================================================================\n--- packages/types/src/base-layouts/gantt/index.ts\ta04d3b5 (parent)\n+++ packages/types/src/base-layouts/gantt/index.ts\tcbfdcd5 (commit)\n@@ -0,0 +1,78 @@\n+import type { ReactNode } from \"react\";\n+import type { IBaseLayoutsBaseItem, IBaseLayoutsBaseProps } from \"../base\";\n+import { CORE_GANTT_TIMELINE_TYPE } from \"./core\";\n+import { EXTENDED_GANTT_TIMELINE_TYPE } from \"./extended\";\n+\n+// Gantt-specific item with date fields\n+export interface IBaseLayoutsGanttItem extends IBaseLayoutsBaseItem {\n+  start_date?: string | null;\n+  target_date?: string | null;\n+}\n+\n+// Block update data (for drag/resize operations)\n+export type TGanttBlockUpdateData = {\n+  start_date?: string;\n+  target_date?: string;\n+  sort_order?: {\n+    destinationIndex: number;\n+    newSortOrder: number;\n+  };\n+};\n+\n+// Date update handler for bulk date changes (e.g., dependency updates)\n+export type TGanttDateUpdate = {\n+  id: string;\n+  start_date?: string;\n+  target_date?: string;\n+};\n+\n+// Render props specific to Gantt\n+export interface IGanttRenderProps<T extends IBaseLayoutsGanttItem> {\n+  renderBlock: (item: T) => ReactNode;\n+  renderSidebar?: (item: T) => ReactNode;\n+}\n+\n+// Gantt-specific capabilities\n+export interface IGanttCapabilities {\n+  enableBlockLeftResize?: boolean | ((itemId: string) => boolean);\n+  enableBlockRightResize?: boolean | ((itemId: string) => boolean);\n+  enableBlockMove?: boolean | ((itemId: string) => boolean);\n+  enableReorder?: boolean | ((itemId: string) => boolean);\n+  enableAddBlock?: boolean | ((itemId: string) => boolean);\n+  enableSelection?: boolean | ((itemId: string) => boolean);\n+  enableDependency?: boolean | ((itemId: string) => boolean);\n+}\n+\n+// Gantt display options\n+export type TGanttDisplayOptions = {\n+  showAllBlocks?: boolean; // Show blocks even without dates\n+  showToday?: boolean; // Highlight today on timeline\n+  border?: boolean;\n+  title?: string;\n+  loaderTitle?: string;\n+  quickAdd?: ReactNode;\n+  timelineType?: TTimelineType; // Type of timeline to use for store\n+};\n+\n+// Main Gantt Layout Props\n+export interface IBaseLayoutsGanttProps<T extends IBaseLayoutsGanttItem>\n+  extends Omit<IBaseLayoutsBaseProps<T>, \"renderItem\" | \"enableDragDrop\" | \"onDrop\" | \"canDrag\">,\n+    IGanttRenderProps<T>,\n+    IGanttCapabilities,\n+    TGanttDisplayOptions {\n+  // Handler for block updates (position, dates, order)\n+  onBlockUpdate?: (item: T, payload: TGanttBlockUpdateData) => void | Promise<void>;\n+\n+  // Handler for bulk date updates (dependencies, etc.)\n+  onDateUpdate?: (updates: TGanttDateUpdate[]) => void | Promise<void>;\n+}\n+\n+export const GANTT_TIMELINE_TYPE = {\n+  ...CORE_GANTT_TIMELINE_TYPE,\n+  ...EXTENDED_GANTT_TIMELINE_TYPE,\n+} as const;\n+\n+export type TTimelineTypeCore = (typeof CORE_GANTT_TIMELINE_TYPE)[keyof typeof CORE_GANTT_TIMELINE_TYPE];\n+export type TTimelineType =\n+  | TTimelineTypeCore\n+  | (typeof EXTENDED_GANTT_TIMELINE_TYPE)[keyof typeof EXTENDED_GANTT_TIMELINE_TYPE];\n"
        },
        {
          "path": "packages/types/src/base-layouts/index.ts",
          "status": "modified",
          "diff": "Index: packages/types/src/base-layouts/index.ts\n===================================================================\n--- packages/types/src/base-layouts/index.ts\ta04d3b5 (parent)\n+++ packages/types/src/base-layouts/index.ts\tcbfdcd5 (commit)\n@@ -1,3 +1,4 @@\n export * from \"./base\";\n export * from \"./list\";\n export * from \"./kanban\";\n+export * from \"./gantt\";\n"
        }
      ]
    },
    {
      "id": "add-image-tools",
      "sha": "f679628365e78889755ea81c039b57994f1a595a",
      "parentSha": "ba6b822f607af7621cf5977f3a4e6a889022cf07",
      "spec": "Implement image download, alignment, and fullscreen tooling for the custom image node, with supporting API and layout wiring.\n\nScope and behavior:\n1) Add a new alignment attribute to image nodes\n- Extend the image node attributes with a string attribute alignment that accepts left | center | right and defaults to left.\n- Update default attributes for the custom image to include alignment: \"left\".\n- The image container should visually align according to the attribute:\n  - left: normal flow\n  - center: centered using translateX with width-fit\n  - right: right-aligned using translateX with width-fit\n- Resizing behavior must respect alignment:\n  - For alignment = right, resizing should compute new width from the containers right edge; the resize handle should appear on the left with cursor-nesw-resize.\n  - For alignment != right, resizing should compute new width from the containers left edge; the handle is on the right with cursor-nwse-resize.\n\n2) Add a toolbar with Download, Alignment, and Fullscreen actions\n- Show the toolbar when the remote image src is resolved, the download src is resolved, and the initial resize has completed. Toolbar should be hidden while a filesystem preview is displayed and during initial image load/restore.\n- Toolbar controls:\n  - Download: opens the download URL in a new tab.\n  - Alignment: a dropdown with left, center, right options using Lucide icons; selecting an option updates the nodes alignment attribute. Clicking outside closes the dropdown (use outside-click detector hook).\n  - Fullscreen: opens a fullscreen viewer modal.\n- Accessibility: provide descriptive aria-labels for controls (e.g., \"Download image\", \"View image in full screen\").\n\n3) Fullscreen viewer modal\n- Render the fullscreen modal in a portal container with id #editor-portal. Add this container div to both space and web app layout bodies.\n- Modal behavior:\n  - Opens with a Maximize action from the toolbar.\n  - Displays the image at a size that fits 90% viewport width and 75% height, preserving aspect ratio, based on the original node width and aspect ratio.\n  - Supports zoom (steps: 0.5, 1, 1.5, 2) via +/- controls and keyboard (+/= to zoom in, - to zoom out). Clamp between 0.5 and 2.\n  - Supports pinch-to-zoom via wheel when ctrl/cmd pressed; prevent default scrolling.\n  - Panning/dragging is enabled when the scaled image exceeds viewport dimensions; cursor changes to grabbing during drag.\n  - Provide actions to Download (uses download URL) and Open in new tab (uses display URL). ESC closes the modal.\n  - Ensure z-index is above editor UI and that backdrop clicks close the modal.\n  - Provide aria attributes: role=\"dialog\", aria-modal, aria-label for dialog and buttons.\n\n4) Wire download source through file handlers and options\n- Extend the read-only file handler type to include getAssetDownloadSrc(path: string) -> Promise<string> and propagate it through the custom image extension options as getImageDownloadSource.\n- In the custom image node-view, resolve both display src (getImageSource) and download src (getImageDownloadSource) and pass both to the block component.\n- Update the editor hook that builds the read-only file handler to implement getAssetDownloadSrc using an existing util that generates a direct download URL; if the input path is already an http URL, return it as-is.\n\n5) Component integration details\n- CustomImageBlock should:\n  - Accept downloadSrc prop.\n  - Use alignment attribute to set the outer wrapper transform classes for center/right and to position the resize handle correctly.\n  - Compute resize math from left or right edges depending on alignment.\n  - Display the toolbar only when both src and downloadSrc are present and initial sizing is ready.\n- ImageToolbarRoot should:\n  - Receive alignment, width, height, aspectRatio, src, and downloadSrc props.\n  - Render Download, Alignment, and Fullscreen controls in an absolute positioned, hover-revealed container that remains visible when submenus/modals are active (toggle a local shouldShowToolbar flag when dropdown or modal are open).\n  - Invoke a callback to update alignment on selection.\n\n6) Package dependency\n- Add @plane/hooks to packages/editor/package.json to use the outside-click detector hook used by the alignment dropdown.\n\nFiles to update:\n- packages/editor/src/core/extensions/image/extension-config.tsx: add alignment attribute with default \"left\".\n- packages/editor/src/core/extensions/custom-image/utils.ts: add alignment default in DEFAULT_CUSTOM_IMAGE_ATTRIBUTES and export IMAGE_ALIGNMENT_OPTIONS with icons for left/center/right.\n- packages/editor/src/core/extensions/custom-image/types.ts: add ALIGNMENT to attribute names; add TCustomImageAlignment and extend TCustomImageAttributes; extend CustomImageExtensionOptions with getImageDownloadSource; update Pixel and related types as needed.\n- packages/editor/src/core/types/config.ts: extend TReadOnlyFileHandler with getAssetDownloadSrc(path: string) and ensure TFileHandler continues to extend it.\n- packages/editor/src/core/extensions/custom-image/extension.ts: accept getAssetDownloadSrc from fileHandler and expose as getImageDownloadSource in addOptions.\n- packages/editor/src/core/extensions/custom-image/components/node-view.tsx: resolve and manage resolvedDownloadSrc via extension.options.getImageDownloadSource, alongside resolved image src.\n- packages/editor/src/core/extensions/custom-image/components/block.tsx: accept downloadSrc; apply alignment classes on the outer wrapper; adjust resize logic and handle position depending on alignment; render ImageToolbarRoot with alignment, dimensions, src, downloadSrc, and an alignment change handler.\n- packages/editor/src/core/extensions/custom-image/components/toolbar/alignment.tsx: implement dropdown control with outside-click detection and Lucide icons for alignment options.\n- packages/editor/src/core/extensions/custom-image/components/toolbar/download.tsx: implement button that opens download URL in a new tab.\n- packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/index.ts: export * from ./root.\n- packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx: root component to toggle fullscreen and render modal; wire shouldShowToolbar to keep toolbar visible while open.\n- packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/modal.tsx: fullscreen modal implementation with portal, zoom, pan, keyboard/wheel handling, and download/open actions.\n- web/core/hooks/editor/use-editor-config.ts: import getEditorAssetDownloadSrc util and implement getAssetDownloadSrc in the read-only file handler (http passthrough; else build workspace/project aware download URL).\n- space/app/layout.tsx and web/app/layout.tsx: add <div id=\"editor-portal\" /> to body so the modal can render in a portal.\n- packages/editor/package.json: add dependency \"@plane/hooks\": \"*\".\n\nNon-functional/UX notes:\n- Keep hover interactions smooth; use opacity transitions and pointer-events to reveal the toolbar.\n- Maintain initial resize flow and image preview handling; do not show toolbar until remote src is available and preview is replaced.\n- Add aria-labels to interactive elements for accessibility.\n- Ensure modal overlay has a sufficiently high z-index and does not interfere with other overlays.\n\nValidation/acceptance:\n- Insert an image; before upload completes, toolbar is hidden; after upload and resolution, toolbar displays with three actions.\n- Alignment changes apply instantly, correctly repositioning and resizing from the correct edge.\n- Download opens the file in a new tab using a direct download path.\n- Fullscreen modal opens and closes as expected; ESC closes; +/- keys zoom; mouse wheel with ctrl/cmd zooms; panning works when image is larger than viewport; download and open-in-new-tab actions function.\n- Editor still restores public images where applicable (unchanged behavior).",
      "prompt": "Enhance the editors custom image block with a small toolbar that supports downloading the image, changing its alignment (left/center/right), and viewing it in a fullscreen viewer. The fullscreen viewer should render via a portal, support zooming and panning, and include keyboard shortcuts. Plumb a separate download URL for images through the existing file handler and hook, and make the image node support an alignment attribute that affects layout and resizing behavior. Update the relevant types, extension options, and layouts so this works end-to-end.",
      "supplementalFiles": [
        "packages/utils/src/editor.ts",
        "packages/editor/src/core/extensions/image/extension.tsx",
        "packages/editor/src/core/extensions/custom-image/components/uploader.tsx",
        "packages/editor/src/core/helpers/image-helpers.ts"
      ],
      "fileDiffs": [
        {
          "path": "packages/editor/package.json",
          "status": "modified",
          "diff": "Index: packages/editor/package.json\n===================================================================\n--- packages/editor/package.json\tba6b822 (parent)\n+++ packages/editor/package.json\tf679628 (commit)\n@@ -38,8 +38,9 @@\n     \"@floating-ui/react\": \"^0.26.4\",\n     \"@headlessui/react\": \"^1.7.3\",\n     \"@hocuspocus/provider\": \"^2.15.0\",\n     \"@plane/constants\": \"*\",\n+    \"@plane/hooks\": \"*\",\n     \"@plane/types\": \"*\",\n     \"@plane/ui\": \"*\",\n     \"@plane/utils\": \"*\",\n     \"@tiptap/core\": \"2.10.4\",\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/block.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/block.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/block.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/block.tsx\tf679628 (commit)\n@@ -16,8 +16,9 @@\n   imageFromFileSystem: string | undefined;\n   setEditorContainer: (editorContainer: HTMLDivElement | null) => void;\n   setFailedToLoadImage: (isError: boolean) => void;\n   src: string | undefined;\n+  downloadSrc: string | undefined;\n };\n \n export const CustomImageBlock: React.FC<CustomImageBlockProps> = (props) => {\n   // props\n@@ -31,11 +32,18 @@\n     selected,\n     setEditorContainer,\n     setFailedToLoadImage,\n     src: resolvedImageSrc,\n+    downloadSrc: resolvedDownloadSrc,\n     updateAttributes,\n   } = props;\n-  const { width: nodeWidth, height: nodeHeight, aspectRatio: nodeAspectRatio, src: imgNodeSrc } = node.attrs;\n+  const {\n+    width: nodeWidth,\n+    height: nodeHeight,\n+    aspectRatio: nodeAspectRatio,\n+    src: imgNodeSrc,\n+    alignment: nodeAlignment,\n+  } = node.attrs;\n   // states\n   const [size, setSize] = useState<TCustomImageSize>({\n     width: ensurePixelString(nodeWidth, \"35%\") ?? \"35%\",\n     height: ensurePixelString(nodeHeight, \"auto\") ?? \"auto\",\n@@ -130,14 +138,19 @@\n       if (!containerRef.current || !containerRect.current || !size.aspectRatio) return;\n \n       const clientX = \"touches\" in e ? e.touches[0].clientX : e.clientX;\n \n-      const newWidth = Math.max(clientX - containerRect.current.left, MIN_SIZE);\n-      const newHeight = newWidth / size.aspectRatio;\n-\n-      setSize((prevSize) => ({ ...prevSize, width: `${newWidth}px`, height: `${newHeight}px` }));\n+      if (nodeAlignment === \"right\") {\n+        const newWidth = Math.max(containerRect.current.right - clientX, MIN_SIZE);\n+        const newHeight = newWidth / size.aspectRatio;\n+        setSize((prevSize) => ({ ...prevSize, width: `${newWidth}px`, height: `${newHeight}px` }));\n+      } else {\n+        const newWidth = Math.max(clientX - containerRect.current.left, MIN_SIZE);\n+        const newHeight = newWidth / size.aspectRatio;\n+        setSize((prevSize) => ({ ...prevSize, width: `${newWidth}px`, height: `${newHeight}px` }));\n+      }\n     },\n-    [size.aspectRatio]\n+    [nodeAlignment, size.aspectRatio]\n   );\n \n   const handleResizeEnd = useCallback(() => {\n     setIsResizing(false);\n@@ -187,118 +200,127 @@\n   const showImageLoader = !(resolvedImageSrc || imageFromFileSystem) || !initialResizeComplete || hasErroredOnFirstLoad;\n   // show the image upload status only when the resolvedImageSrc is not ready\n   const showUploadStatus = !resolvedImageSrc;\n   // show the image utils only if the remote image's (post upload) src is set and the initial resize is complete (but not while we're showing the preview imageFromFileSystem)\n-  const showImageUtils = resolvedImageSrc && initialResizeComplete;\n+  const showImageToolbar = resolvedImageSrc && resolvedDownloadSrc && initialResizeComplete;\n   // show the image resizer only if the editor is editable, the remote image's (post upload) src is set and the initial resize is complete (but not while we're showing the preview imageFromFileSystem)\n   const showImageResizer = editor.isEditable && resolvedImageSrc && initialResizeComplete;\n   // show the preview image from the file system if the remote image's src is not set\n   const displayedImageSrc = resolvedImageSrc || imageFromFileSystem;\n \n   return (\n     <div\n       id={getImageBlockId(node.attrs.id ?? \"\")}\n-      ref={containerRef}\n-      className=\"group/image-component relative inline-block max-w-full\"\n-      onMouseDown={handleImageMouseDown}\n-      style={{\n-        width: size.width,\n-        ...(size.aspectRatio && { aspectRatio: size.aspectRatio }),\n-      }}\n+      className={cn(\"w-fit max-w-full transition-all\", {\n+        \"ml-[50%] -translate-x-1/2\": nodeAlignment === \"center\",\n+        \"ml-[100%] -translate-x-full\": nodeAlignment === \"right\",\n+      })}\n     >\n-      {showImageLoader && (\n-        <div\n-          className=\"animate-pulse bg-custom-background-80 rounded-md\"\n-          style={{ width: size.width, height: size.height }}\n-        />\n-      )}\n-      <img\n-        ref={imageRef}\n-        src={displayedImageSrc}\n-        onLoad={handleImageLoad}\n-        onError={async (e) => {\n-          // for old image extension this command doesn't exist or if the image failed to load for the first time\n-          if (!extension.options.restoreImage || hasTriedRestoringImageOnce) {\n-            setFailedToLoadImage(true);\n-            return;\n-          }\n-\n-          try {\n-            setHasErroredOnFirstLoad(true);\n-            // this is a type error from tiptap, don't remove await until it's fixed\n-            if (!imgNodeSrc) {\n-              throw new Error(\"No source image to restore from\");\n-            }\n-            await extension.options.restoreImage?.(imgNodeSrc);\n-            if (!imageRef.current) {\n-              throw new Error(\"Image reference not found\");\n-            }\n-            if (!resolvedImageSrc) {\n-              throw new Error(\"No resolved image source available\");\n-            }\n-            imageRef.current.src = resolvedImageSrc;\n-          } catch {\n-            // if the image failed to even restore, then show the error state\n-            setFailedToLoadImage(true);\n-            console.error(\"Error while loading image\", e);\n-          } finally {\n-            setHasErroredOnFirstLoad(false);\n-            setHasTriedRestoringImageOnce(true);\n-          }\n-        }}\n-        width={size.width}\n-        className={cn(\"image-component block rounded-md\", {\n-          // hide the image while the background calculations of the image loader are in progress (to avoid flickering) and show the loader until then\n-          hidden: showImageLoader,\n-          \"read-only-image\": !editor.isEditable,\n-          \"blur-sm opacity-80 loading-image\": !resolvedImageSrc,\n-        })}\n+      <div\n+        ref={containerRef}\n+        className=\"group/image-component relative inline-block max-w-full\"\n+        onMouseDown={handleImageMouseDown}\n         style={{\n           width: size.width,\n           ...(size.aspectRatio && { aspectRatio: size.aspectRatio }),\n         }}\n-      />\n-      {showUploadStatus && node.attrs.id && <ImageUploadStatus editor={editor} nodeId={node.attrs.id} />}\n-      {showImageUtils && (\n-        <ImageToolbarRoot\n-          containerClassName={\n-            \"absolute top-1 right-1 z-20 bg-black/40 rounded opacity-0 pointer-events-none group-hover/image-component:opacity-100 group-hover/image-component:pointer-events-auto transition-opacity\"\n-          }\n-          image={{\n+      >\n+        {showImageLoader && (\n+          <div\n+            className=\"animate-pulse bg-custom-background-80 rounded-md\"\n+            style={{ width: size.width, height: size.height }}\n+          />\n+        )}\n+        <img\n+          ref={imageRef}\n+          src={displayedImageSrc}\n+          onLoad={handleImageLoad}\n+          onError={async (e) => {\n+            // for old image extension this command doesn't exist or if the image failed to load for the first time\n+            if (!extension.options.restoreImage || hasTriedRestoringImageOnce) {\n+              setFailedToLoadImage(true);\n+              return;\n+            }\n+\n+            try {\n+              setHasErroredOnFirstLoad(true);\n+              // this is a type error from tiptap, don't remove await until it's fixed\n+              if (!imgNodeSrc) {\n+                throw new Error(\"No source image to restore from\");\n+              }\n+              await extension.options.restoreImage?.(imgNodeSrc);\n+              if (!imageRef.current) {\n+                throw new Error(\"Image reference not found\");\n+              }\n+              if (!resolvedImageSrc) {\n+                throw new Error(\"No resolved image source available\");\n+              }\n+              imageRef.current.src = resolvedImageSrc;\n+            } catch {\n+              // if the image failed to even restore, then show the error state\n+              setFailedToLoadImage(true);\n+              console.error(\"Error while loading image\", e);\n+            } finally {\n+              setHasErroredOnFirstLoad(false);\n+              setHasTriedRestoringImageOnce(true);\n+            }\n+          }}\n+          width={size.width}\n+          className={cn(\"image-component block rounded-md\", {\n+            // hide the image while the background calculations of the image loader are in progress (to avoid flickering) and show the loader until then\n+            hidden: showImageLoader,\n+            \"read-only-image\": !editor.isEditable,\n+            \"blur-sm opacity-80 loading-image\": !resolvedImageSrc,\n+          })}\n+          style={{\n             width: size.width,\n-            height: size.height,\n-            aspectRatio: size.aspectRatio === null ? 1 : size.aspectRatio,\n-            src: resolvedImageSrc,\n+            ...(size.aspectRatio && { aspectRatio: size.aspectRatio }),\n           }}\n         />\n-      )}\n-      {selected && displayedImageSrc === resolvedImageSrc && (\n-        <div className=\"absolute inset-0 size-full bg-custom-primary-500/30\" />\n-      )}\n-      {showImageResizer && (\n-        <>\n-          <div\n-            className={cn(\n-              \"absolute inset-0 border-2 border-custom-primary-100 pointer-events-none rounded-md transition-opacity duration-100 ease-in-out\",\n-              {\n-                \"opacity-100\": isResizing,\n-                \"opacity-0 group-hover/image-component:opacity-100\": !isResizing,\n-              }\n-            )}\n+        {showUploadStatus && node.attrs.id && <ImageUploadStatus editor={editor} nodeId={node.attrs.id} />}\n+        {showImageToolbar && (\n+          <ImageToolbarRoot\n+            alignment={nodeAlignment ?? \"left\"}\n+            width={size.width}\n+            height={size.height}\n+            aspectRatio={size.aspectRatio === null ? 1 : size.aspectRatio}\n+            src={resolvedImageSrc}\n+            downloadSrc={resolvedDownloadSrc}\n+            handleAlignmentChange={(alignment) =>\n+              updateAttributesSafely({ alignment }, \"Failed to update attributes while changing alignment:\")\n+            }\n           />\n-          <div\n-            className={cn(\n-              \"absolute bottom-0 right-0 translate-y-1/2 translate-x-1/2 size-4 rounded-full bg-custom-primary-100 border-2 border-white cursor-nwse-resize transition-opacity duration-100 ease-in-out\",\n-              {\n-                \"opacity-100 pointer-events-auto\": isResizing,\n-                \"opacity-0 pointer-events-none group-hover/image-component:opacity-100 group-hover/image-component:pointer-events-auto\":\n-                  !isResizing,\n-              }\n-            )}\n-            onMouseDown={handleResizeStart}\n-            onTouchStart={handleResizeStart}\n-          />\n-        </>\n-      )}\n+        )}\n+        {selected && displayedImageSrc === resolvedImageSrc && (\n+          <div className=\"absolute inset-0 size-full bg-custom-primary-500/30 pointer-events-none\" />\n+        )}\n+        {showImageResizer && (\n+          <>\n+            <div\n+              className={cn(\n+                \"absolute inset-0 border-2 border-custom-primary-100 pointer-events-none rounded-md transition-opacity duration-100 ease-in-out\",\n+                {\n+                  \"opacity-100\": isResizing,\n+                  \"opacity-0 group-hover/image-component:opacity-100\": !isResizing,\n+                }\n+              )}\n+            />\n+            <div\n+              className={cn(\n+                \"absolute bottom-0 translate-y-1/2 size-4 rounded-full bg-custom-primary-100 border-2 border-white transition-opacity duration-100 ease-in-out\",\n+                {\n+                  \"opacity-100 pointer-events-auto\": isResizing,\n+                  \"opacity-0 pointer-events-none group-hover/image-component:opacity-100 group-hover/image-component:pointer-events-auto\":\n+                    !isResizing,\n+                  \"left-0 -translate-x-1/2 cursor-nesw-resize\": nodeAlignment === \"right\",\n+                  \"right-0 translate-x-1/2 cursor-nwse-resize\": nodeAlignment !== \"right\",\n+                }\n+              )}\n+              onMouseDown={handleResizeStart}\n+              onTouchStart={handleResizeStart}\n+            />\n+          </>\n+        )}\n+      </div>\n     </div>\n   );\n };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/node-view.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/node-view.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/node-view.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/node-view.tsx\tf679628 (commit)\n@@ -25,8 +25,9 @@\n   const { src: imgNodeSrc } = node.attrs;\n \n   const [isUploaded, setIsUploaded] = useState(false);\n   const [resolvedSrc, setResolvedSrc] = useState<string | undefined>(undefined);\n+  const [resolvedDownloadSrc, setResolvedDownloadSrc] = useState<string | undefined>(undefined);\n   const [imageFromFileSystem, setImageFromFileSystem] = useState<string | undefined>(undefined);\n   const [failedToLoadImage, setFailedToLoadImage] = useState(false);\n \n   const [editorContainer, setEditorContainer] = useState<HTMLDivElement | null>(null);\n@@ -52,14 +53,17 @@\n \n   useEffect(() => {\n     if (!imgNodeSrc) {\n       setResolvedSrc(undefined);\n+      setResolvedDownloadSrc(undefined);\n       return;\n     }\n \n     const getImageSource = async () => {\n       const url = await extension.options.getImageSource?.(imgNodeSrc);\n       setResolvedSrc(url);\n+      const downloadUrl = await extension.options.getImageDownloadSource?.(imgNodeSrc);\n+      setResolvedDownloadSrc(downloadUrl);\n     };\n     getImageSource();\n   }, [imgNodeSrc, extension.options]);\n \n@@ -72,8 +76,9 @@\n             imageFromFileSystem={imageFromFileSystem}\n             setEditorContainer={setEditorContainer}\n             setFailedToLoadImage={setFailedToLoadImage}\n             src={resolvedSrc}\n+            downloadSrc={resolvedDownloadSrc}\n             {...props}\n           />\n         ) : (\n           <CustomImageUploader\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/alignment.tsx",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/alignment.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/alignment.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/alignment.tsx\tf679628 (commit)\n@@ -1,1 +1,63 @@\n-[NEW FILE]\n\\ No newline at end of file\n+import { ChevronDown } from \"lucide-react\";\n+import { useEffect, useRef, useState } from \"react\";\n+// plane imports\n+import { useOutsideClickDetector } from \"@plane/hooks\";\n+import { Tooltip } from \"@plane/ui\";\n+// local imports\n+import type { TCustomImageAlignment } from \"../../types\";\n+import { IMAGE_ALIGNMENT_OPTIONS } from \"../../utils\";\n+\n+type Props = {\n+  activeAlignment: TCustomImageAlignment;\n+  handleChange: (alignment: TCustomImageAlignment) => void;\n+  toggleToolbarViewStatus: (val: boolean) => void;\n+};\n+\n+export const ImageAlignmentAction: React.FC<Props> = (props) => {\n+  const { activeAlignment, handleChange, toggleToolbarViewStatus } = props;\n+  // states\n+  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n+  // refs\n+  const dropdownRef = useRef<HTMLDivElement>(null);\n+  // derived values\n+  const activeAlignmentDetails = IMAGE_ALIGNMENT_OPTIONS.find((option) => option.value === activeAlignment);\n+\n+  useOutsideClickDetector(dropdownRef, () => setIsDropdownOpen(false));\n+\n+  useEffect(() => {\n+    toggleToolbarViewStatus(isDropdownOpen);\n+  }, [isDropdownOpen, toggleToolbarViewStatus]);\n+\n+  return (\n+    <div ref={dropdownRef} className=\"h-full relative\">\n+      <Tooltip tooltipContent=\"Align\">\n+        <button\n+          type=\"button\"\n+          className=\"h-full flex items-center gap-1 text-white/60 hover:text-white transition-colors\"\n+          onClick={() => setIsDropdownOpen((prev) => !prev)}\n+        >\n+          {activeAlignmentDetails && <activeAlignmentDetails.icon className=\"flex-shrink-0 size-3\" />}\n+          <ChevronDown className=\"flex-shrink-0 size-2\" />\n+        </button>\n+      </Tooltip>\n+      {isDropdownOpen && (\n+        <div className=\"absolute top-full left-1/2 -translate-x-1/2 mt-0.5 h-7 bg-black/80 flex items-center gap-2 px-2 rounded\">\n+          {IMAGE_ALIGNMENT_OPTIONS.map((option) => (\n+            <Tooltip key={option.value} tooltipContent={option.label}>\n+              <button\n+                type=\"button\"\n+                className=\"flex-shrink-0 h-full grid place-items-center text-white/60 hover:text-white transition-colors\"\n+                onClick={() => {\n+                  handleChange(option.value);\n+                  setIsDropdownOpen(false);\n+                }}\n+              >\n+                <option.icon className=\"size-3\" />\n+              </button>\n+            </Tooltip>\n+          ))}\n+        </div>\n+      )}\n+    </div>\n+  );\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/download.tsx",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/download.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/download.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/download.tsx\tf679628 (commit)\n@@ -1,1 +1,24 @@\n-[NEW FILE]\n\\ No newline at end of file\n+import { Download } from \"lucide-react\";\n+// plane imports\n+import { Tooltip } from \"@plane/ui\";\n+\n+type Props = {\n+  src: string;\n+};\n+\n+export const ImageDownloadAction: React.FC<Props> = (props) => {\n+  const { src } = props;\n+\n+  return (\n+    <Tooltip tooltipContent=\"Download\">\n+      <button\n+        type=\"button\"\n+        onClick={() => window.open(src, \"_blank\")}\n+        className=\"flex-shrink-0 h-full grid place-items-center text-white/60 hover:text-white transition-colors\"\n+        aria-label=\"Download image\"\n+      >\n+        <Download className=\"size-3\" />\n+      </button>\n+    </Tooltip>\n+  );\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/index.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/index.ts\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/index.ts\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/index.ts\tf679628 (commit)\n@@ -1,1 +1,1 @@\n-[NEW FILE]\n\\ No newline at end of file\n+export * from \"./root\";\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/modal.tsx",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/modal.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/modal.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/modal.tsx\tf679628 (commit)\n@@ -1,1 +1,285 @@\n-[NEW FILE]\n\\ No newline at end of file\n+import { Download, ExternalLink, Minus, Plus, X } from \"lucide-react\";\n+import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\n+import ReactDOM from \"react-dom\";\n+// plane imports\n+import { cn } from \"@plane/utils\";\n+\n+const MIN_ZOOM = 0.5;\n+const MAX_ZOOM = 2;\n+const ZOOM_SPEED = 0.05;\n+const ZOOM_STEPS = [0.5, 1, 1.5, 2];\n+\n+type Props = {\n+  aspectRatio: number;\n+  isFullScreenEnabled: boolean;\n+  downloadSrc: string;\n+  src: string;\n+  toggleFullScreenMode: (val: boolean) => void;\n+  width: string;\n+};\n+\n+const ImageFullScreenModalWithoutPortal = (props: Props) => {\n+  const { aspectRatio, isFullScreenEnabled, downloadSrc, src, toggleFullScreenMode, width } = props;\n+  // refs\n+  const dragStart = useRef({ x: 0, y: 0 });\n+  const dragOffset = useRef({ x: 0, y: 0 });\n+\n+  const [magnification, setMagnification] = useState<number>(1);\n+  const [initialMagnification, setInitialMagnification] = useState(1);\n+  const [isDragging, setIsDragging] = useState(false);\n+  const modalRef = useRef<HTMLDivElement>(null);\n+  const imgRef = useRef<HTMLImageElement | null>(null);\n+\n+  const widthInNumber = useMemo(() => {\n+    if (!width) return 0;\n+    return Number(width.replace(\"px\", \"\"));\n+  }, [width]);\n+\n+  const setImageRef = useCallback(\n+    (node: HTMLImageElement | null) => {\n+      if (!node || !isFullScreenEnabled) return;\n+\n+      imgRef.current = node;\n+\n+      const viewportWidth = window.innerWidth * 0.9;\n+      const viewportHeight = window.innerHeight * 0.75;\n+      const imageWidth = widthInNumber;\n+      const imageHeight = imageWidth / aspectRatio;\n+\n+      const widthRatio = viewportWidth / imageWidth;\n+      const heightRatio = viewportHeight / imageHeight;\n+\n+      setInitialMagnification(Math.min(widthRatio, heightRatio));\n+      setMagnification(1);\n+\n+      // Reset image position\n+      node.style.left = \"0px\";\n+      node.style.top = \"0px\";\n+    },\n+    [isFullScreenEnabled, widthInNumber, aspectRatio]\n+  );\n+\n+  const handleClose = useCallback(() => {\n+    if (isDragging) return;\n+    toggleFullScreenMode(false);\n+    setMagnification(1);\n+    setInitialMagnification(1);\n+  }, [isDragging, toggleFullScreenMode]);\n+\n+  const handleMagnification = useCallback((direction: \"increase\" | \"decrease\") => {\n+    setMagnification((prev) => {\n+      // Find the appropriate target zoom level based on current magnification\n+      let targetZoom: number;\n+      if (direction === \"increase\") {\n+        targetZoom = ZOOM_STEPS.find((step) => step > prev) ?? MAX_ZOOM;\n+      } else {\n+        // Reverse the array to find the next lower step\n+        targetZoom = [...ZOOM_STEPS].reverse().find((step) => step < prev) ?? MIN_ZOOM;\n+      }\n+\n+      // Reset position when zoom matches initial magnification\n+      if (targetZoom === 1 && imgRef.current) {\n+        imgRef.current.style.left = \"0px\";\n+        imgRef.current.style.top = \"0px\";\n+      }\n+\n+      return targetZoom;\n+    });\n+  }, []);\n+\n+  const handleKeyDown = useCallback(\n+    (e: KeyboardEvent) => {\n+      if (e.key === \"Escape\" || e.key === \"+\" || e.key === \"=\" || e.key === \"-\") {\n+        e.preventDefault();\n+        e.stopPropagation();\n+\n+        if (e.key === \"Escape\") handleClose();\n+        if (e.key === \"+\" || e.key === \"=\") handleMagnification(\"increase\");\n+        if (e.key === \"-\") handleMagnification(\"decrease\");\n+      }\n+    },\n+    [handleClose, handleMagnification]\n+  );\n+\n+  const handleMouseDown = (e: React.MouseEvent) => {\n+    if (!imgRef.current) return;\n+\n+    const imgWidth = imgRef.current.offsetWidth * magnification;\n+    const imgHeight = imgRef.current.offsetHeight * magnification;\n+    const viewportWidth = window.innerWidth;\n+    const viewportHeight = window.innerHeight;\n+\n+    if (imgWidth > viewportWidth || imgHeight > viewportHeight) {\n+      e.preventDefault();\n+      e.stopPropagation();\n+      setIsDragging(true);\n+      dragStart.current = { x: e.clientX, y: e.clientY };\n+      dragOffset.current = {\n+        x: parseInt(imgRef.current.style.left || \"0\"),\n+        y: parseInt(imgRef.current.style.top || \"0\"),\n+      };\n+    }\n+  };\n+\n+  const handleMouseMove = useCallback(\n+    (e: MouseEvent) => {\n+      if (!isDragging || !imgRef.current) return;\n+\n+      const dx = e.clientX - dragStart.current.x;\n+      const dy = e.clientY - dragStart.current.y;\n+\n+      // Apply the scale factor to the drag movement\n+      const scaledDx = dx / magnification;\n+      const scaledDy = dy / magnification;\n+\n+      imgRef.current.style.left = `${dragOffset.current.x + scaledDx}px`;\n+      imgRef.current.style.top = `${dragOffset.current.y + scaledDy}px`;\n+    },\n+    [isDragging, magnification]\n+  );\n+\n+  const handleMouseUp = useCallback(() => {\n+    if (!isDragging || !imgRef.current) return;\n+    setIsDragging(false);\n+  }, [isDragging]);\n+\n+  const handleWheel = useCallback(\n+    (e: WheelEvent) => {\n+      if (!imgRef.current || !isFullScreenEnabled) return;\n+\n+      e.preventDefault();\n+\n+      // Handle pinch-to-zoom\n+      if (e.ctrlKey || e.metaKey) {\n+        const delta = e.deltaY;\n+        setMagnification((prev) => {\n+          const newZoom = prev * (1 - delta * ZOOM_SPEED);\n+          const clampedZoom = Math.min(Math.max(newZoom, MIN_ZOOM), MAX_ZOOM);\n+\n+          // Reset position when zoom matches initial magnification\n+          if (clampedZoom === 1 && imgRef.current) {\n+            imgRef.current.style.left = \"0px\";\n+            imgRef.current.style.top = \"0px\";\n+          }\n+\n+          return clampedZoom;\n+        });\n+        return;\n+      }\n+    },\n+    [isFullScreenEnabled]\n+  );\n+\n+  // Event listeners\n+  useEffect(() => {\n+    if (!isFullScreenEnabled) return;\n+\n+    document.addEventListener(\"keydown\", handleKeyDown);\n+    window.addEventListener(\"mousemove\", handleMouseMove);\n+    window.addEventListener(\"mouseup\", handleMouseUp);\n+    window.addEventListener(\"wheel\", handleWheel, { passive: false });\n+\n+    return () => {\n+      document.removeEventListener(\"keydown\", handleKeyDown);\n+      window.removeEventListener(\"mousemove\", handleMouseMove);\n+      window.removeEventListener(\"mouseup\", handleMouseUp);\n+      window.removeEventListener(\"wheel\", handleWheel);\n+    };\n+  }, [isFullScreenEnabled, handleKeyDown, handleMouseMove, handleMouseUp, handleWheel]);\n+\n+  if (!isFullScreenEnabled) return null;\n+\n+  return (\n+    <div\n+      className={cn(\"fixed inset-0 size-full z-30 bg-black/90 opacity-0 pointer-events-none transition-opacity\", {\n+        \"opacity-100 pointer-events-auto editor-image-full-screen-modal\": isFullScreenEnabled,\n+        \"cursor-default\": !isDragging,\n+        \"cursor-grabbing\": isDragging,\n+      })}\n+      role=\"dialog\"\n+      aria-modal=\"true\"\n+      aria-label=\"Fullscreen image viewer\"\n+    >\n+      <div\n+        ref={modalRef}\n+        onMouseDown={(e) => e.target === modalRef.current && handleClose()}\n+        className=\"relative size-full grid place-items-center overflow-hidden\"\n+      >\n+        <button\n+          type=\"button\"\n+          onClick={handleClose}\n+          className=\"absolute top-10 right-10 size-8 grid place-items-center\"\n+          aria-label=\"Close image viewer\"\n+        >\n+          <X className=\"size-8 text-white/60 hover:text-white transition-colors\" />\n+        </button>\n+        <img\n+          ref={setImageRef}\n+          src={src}\n+          className=\"read-only-image rounded-lg\"\n+          style={{\n+            width: `${widthInNumber * initialMagnification}px`,\n+            maxWidth: \"none\",\n+            maxHeight: \"none\",\n+            aspectRatio,\n+            position: \"relative\",\n+            transform: `scale(${magnification})`,\n+            transformOrigin: \"center\",\n+            transition: \"width 0.2s ease, transform 0.2s ease\",\n+          }}\n+          onMouseDown={handleMouseDown}\n+        />\n+        <div className=\"fixed bottom-10 left-1/2 -translate-x-1/2 flex items-center justify-center gap-1 rounded-md border border-white/20 py-2 divide-x divide-white/20 bg-black\">\n+          <div className=\"flex items-center\">\n+            <button\n+              type=\"button\"\n+              onClick={() => handleMagnification(\"decrease\")}\n+              className=\"size-6 grid place-items-center text-white/60 hover:text-white disabled:text-white/30 transition-colors duration-200\"\n+              disabled={magnification <= MIN_ZOOM}\n+              aria-label=\"Zoom out\"\n+            >\n+              <Minus className=\"size-4\" />\n+            </button>\n+            <span className=\"text-sm w-12 text-center text-white\">{Math.round(100 * magnification)}%</span>\n+            <button\n+              type=\"button\"\n+              onClick={() => handleMagnification(\"increase\")}\n+              className=\"size-6 grid place-items-center text-white/60 hover:text-white disabled:text-white/30 transition-colors duration-200\"\n+              disabled={magnification >= MAX_ZOOM}\n+              aria-label=\"Zoom in\"\n+            >\n+              <Plus className=\"size-4\" />\n+            </button>\n+          </div>\n+          <button\n+            type=\"button\"\n+            onClick={() => window.open(downloadSrc, \"_blank\")}\n+            className=\"flex-shrink-0 size-8 grid place-items-center text-white/60 hover:text-white transition-colors duration-200\"\n+            aria-label=\"Download image\"\n+          >\n+            <Download className=\"size-4\" />\n+          </button>\n+          <button\n+            type=\"button\"\n+            onClick={() => window.open(src, \"_blank\")}\n+            className=\"flex-shrink-0 size-8 grid place-items-center text-white/60 hover:text-white transition-colors duration-200\"\n+            aria-label=\"Open image in new tab\"\n+          >\n+            <ExternalLink className=\"size-4\" />\n+          </button>\n+        </div>\n+      </div>\n+    </div>\n+  );\n+};\n+\n+export const ImageFullScreenModal: React.FC<Props> = (props) => {\n+  let modal = <ImageFullScreenModalWithoutPortal {...props} />;\n+  const portal = document.querySelector(\"#editor-portal\");\n+  if (portal) {\n+    modal = ReactDOM.createPortal(modal, portal);\n+  } else {\n+    console.warn(\"Portal element #editor-portal not found. Rendering inline.\");\n+  }\n+  return modal;\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx\tf679628 (commit)\n@@ -1,1 +1,56 @@\n-[NEW FILE]\n\\ No newline at end of file\n+import { Maximize } from \"lucide-react\";\n+import { useEffect, useState } from \"react\";\n+// plane imports\n+import { Tooltip } from \"@plane/ui\";\n+// local imports\n+import { ImageFullScreenModal } from \"./modal\";\n+\n+type Props = {\n+  image: {\n+    downloadSrc: string;\n+    src: string;\n+    height: string;\n+    width: string;\n+    aspectRatio: number;\n+  };\n+  toggleToolbarViewStatus: (val: boolean) => void;\n+};\n+\n+export const ImageFullScreenActionRoot: React.FC<Props> = (props) => {\n+  const { image, toggleToolbarViewStatus } = props;\n+  // states\n+  const [isFullScreenEnabled, setIsFullScreenEnabled] = useState(false);\n+  // derived values\n+  const { downloadSrc, src, width, aspectRatio } = image;\n+\n+  useEffect(() => {\n+    toggleToolbarViewStatus(isFullScreenEnabled);\n+  }, [isFullScreenEnabled, toggleToolbarViewStatus]);\n+\n+  return (\n+    <>\n+      <ImageFullScreenModal\n+        aspectRatio={aspectRatio}\n+        isFullScreenEnabled={isFullScreenEnabled}\n+        src={src}\n+        downloadSrc={downloadSrc}\n+        width={width}\n+        toggleFullScreenMode={setIsFullScreenEnabled}\n+      />\n+      <Tooltip tooltipContent=\"View in full screen\">\n+        <button\n+          type=\"button\"\n+          onClick={(e) => {\n+            e.preventDefault();\n+            e.stopPropagation();\n+            setIsFullScreenEnabled(true);\n+          }}\n+          className=\"flex-shrink-0 h-full grid place-items-center text-white/60 hover:text-white transition-colors\"\n+          aria-label=\"View image in full screen\"\n+        >\n+          <Maximize className=\"size-3\" />\n+        </button>\n+      </Tooltip>\n+    </>\n+  );\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx\tf679628 (commit)\n@@ -1,37 +1,45 @@\n import { useState } from \"react\";\n // plane imports\n import { cn } from \"@plane/utils\";\n // local imports\n-import { ImageFullScreenAction } from \"./full-screen\";\n+import type { TCustomImageAlignment } from \"../../types\";\n+import { ImageAlignmentAction } from \"./alignment\";\n+import { ImageDownloadAction } from \"./download\";\n+import { ImageFullScreenActionRoot } from \"./full-screen\";\n \n type Props = {\n-  containerClassName?: string;\n-  image: {\n-    width: string;\n-    height: string;\n-    aspectRatio: number;\n-    src: string;\n-  };\n+  alignment: TCustomImageAlignment;\n+  width: string;\n+  height: string;\n+  aspectRatio: number;\n+  src: string;\n+  downloadSrc: string;\n+  handleAlignmentChange: (alignment: TCustomImageAlignment) => void;\n };\n \n export const ImageToolbarRoot: React.FC<Props> = (props) => {\n-  const { containerClassName, image } = props;\n-  // state\n-  const [isFullScreenEnabled, setIsFullScreenEnabled] = useState(false);\n+  const { alignment, downloadSrc, handleAlignmentChange } = props;\n+  // states\n+  const [shouldShowToolbar, setShouldShowToolbar] = useState(false);\n \n   return (\n     <>\n       <div\n-        className={cn(containerClassName, {\n-          \"opacity-100 pointer-events-auto\": isFullScreenEnabled,\n-        })}\n+        className={cn(\n+          \"absolute top-1 right-1 h-7 z-20 bg-black/80 rounded flex items-center gap-2 px-2 opacity-0 pointer-events-none group-hover/image-component:opacity-100 group-hover/image-component:pointer-events-auto transition-opacity\",\n+          {\n+            \"opacity-100 pointer-events-auto\": shouldShowToolbar,\n+          }\n+        )}\n       >\n-        <ImageFullScreenAction\n-          image={image}\n-          isOpen={isFullScreenEnabled}\n-          toggleFullScreenMode={(val) => setIsFullScreenEnabled(val)}\n+        <ImageDownloadAction src={downloadSrc} />\n+        <ImageAlignmentAction\n+          activeAlignment={alignment}\n+          handleChange={handleAlignmentChange}\n+          toggleToolbarViewStatus={setShouldShowToolbar}\n         />\n+        <ImageFullScreenActionRoot image={props} toggleToolbarViewStatus={setShouldShowToolbar} />\n       </div>\n     </>\n   );\n };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/extension.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/extension.ts\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/extension.ts\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/extension.ts\tf679628 (commit)\n@@ -19,9 +19,9 @@\n \n export const CustomImageExtension = (props: Props) => {\n   const { fileHandler, isEditable } = props;\n   // derived values\n-  const { getAssetSrc, restore: restoreImageFn } = fileHandler;\n+  const { getAssetSrc, getAssetDownloadSrc, restore: restoreImageFn } = fileHandler;\n \n   return CustomImageExtensionConfig.extend({\n     selectable: isEditable,\n     draggable: isEditable,\n@@ -30,8 +30,9 @@\n       const upload = \"upload\" in fileHandler ? fileHandler.upload : undefined;\n \n       return {\n         ...this.parent?.(),\n+        getImageDownloadSource: getAssetDownloadSrc,\n         getImageSource: getAssetSrc,\n         restoreImage: restoreImageFn,\n         uploadImage: upload,\n       };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/types.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/types.ts\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/types.ts\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/types.ts\tf679628 (commit)\n@@ -7,8 +7,9 @@\n   WIDTH = \"width\",\n   HEIGHT = \"height\",\n   ASPECT_RATIO = \"aspectRatio\",\n   SOURCE = \"src\",\n+  ALIGNMENT = \"alignment\",\n }\n \n export type Pixel = `${number}px`;\n \n@@ -19,14 +20,17 @@\n   height: PixelAttribute<\"auto\">;\n   aspectRatio: number | null;\n };\n \n+export type TCustomImageAlignment = \"left\" | \"center\" | \"right\";\n+\n export type TCustomImageAttributes = {\n   [ECustomImageAttributeNames.ID]: string | null;\n   [ECustomImageAttributeNames.WIDTH]: PixelAttribute<\"35%\" | number> | null;\n   [ECustomImageAttributeNames.HEIGHT]: PixelAttribute<\"auto\" | number> | null;\n   [ECustomImageAttributeNames.ASPECT_RATIO]: number | null;\n   [ECustomImageAttributeNames.SOURCE]: string | null;\n+  [ECustomImageAttributeNames.ALIGNMENT]: TCustomImageAlignment;\n };\n \n export type UploadEntity = ({ event: \"insert\" } | { event: \"drop\"; file: File }) & { hasOpenedFileInputOnce?: boolean };\n \n@@ -36,8 +40,9 @@\n   event: \"insert\" | \"drop\";\n };\n \n export type CustomImageExtensionOptions = {\n+  getImageDownloadSource: TFileHandler[\"getAssetDownloadSrc\"];\n   getImageSource: TFileHandler[\"getAssetSrc\"];\n   restoreImage: TFileHandler[\"restore\"];\n   uploadImage?: TFileHandler[\"upload\"];\n };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/utils.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/utils.ts\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/utils.ts\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/utils.ts\tf679628 (commit)\n@@ -1,18 +1,20 @@\n import type { Editor } from \"@tiptap/core\";\n+import { AlignCenter, AlignLeft, AlignRight, type LucideIcon } from \"lucide-react\";\n // constants\n import { CORE_EXTENSIONS } from \"@/constants/extension\";\n // helpers\n import { getExtensionStorage } from \"@/helpers/get-extension-storage\";\n // local imports\n-import { ECustomImageAttributeNames, type Pixel, type TCustomImageAttributes } from \"./types\";\n+import { ECustomImageAttributeNames, TCustomImageAlignment, type Pixel, type TCustomImageAttributes } from \"./types\";\n \n export const DEFAULT_CUSTOM_IMAGE_ATTRIBUTES: TCustomImageAttributes = {\n   [ECustomImageAttributeNames.SOURCE]: null,\n   [ECustomImageAttributeNames.ID]: null,\n   [ECustomImageAttributeNames.WIDTH]: \"35%\",\n   [ECustomImageAttributeNames.HEIGHT]: \"auto\",\n   [ECustomImageAttributeNames.ASPECT_RATIO]: null,\n+  [ECustomImageAttributeNames.ALIGNMENT]: \"left\",\n };\n \n export const getImageComponentImageFileMap = (editor: Editor) =>\n   getExtensionStorage(editor, CORE_EXTENSIONS.CUSTOM_IMAGE)?.fileMap;\n@@ -31,5 +33,26 @@\n \n   return value;\n };\n \n+export const IMAGE_ALIGNMENT_OPTIONS: {\n+  label: string;\n+  value: TCustomImageAlignment;\n+  icon: LucideIcon;\n+}[] = [\n+  {\n+    label: \"Left\",\n+    value: \"left\",\n+    icon: AlignLeft,\n+  },\n+  {\n+    label: \"Center\",\n+    value: \"center\",\n+    icon: AlignCenter,\n+  },\n+  {\n+    label: \"Right\",\n+    value: \"right\",\n+    icon: AlignRight,\n+  },\n+];\n export const getImageBlockId = (id: string) => `editor-image-block-${id}`;\n"
        },
        {
          "path": "packages/editor/src/core/extensions/image/extension-config.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/image/extension-config.tsx\n===================================================================\n--- packages/editor/src/core/extensions/image/extension-config.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/image/extension-config.tsx\tf679628 (commit)\n@@ -18,7 +18,10 @@\n       },\n       aspectRatio: {\n         default: null,\n       },\n+      alignment: {\n+        default: \"left\",\n+      },\n     };\n   },\n });\n"
        },
        {
          "path": "packages/editor/src/core/types/config.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/config.ts\n===================================================================\n--- packages/editor/src/core/types/config.ts\tba6b822 (parent)\n+++ packages/editor/src/core/types/config.ts\tf679628 (commit)\n@@ -2,8 +2,9 @@\n import { TWebhookConnectionQueryParams } from \"@plane/types\";\n \n export type TReadOnlyFileHandler = {\n   checkIfAssetExists: (assetId: string) => Promise<boolean>;\n+  getAssetDownloadSrc: (path: string) => Promise<string>;\n   getAssetSrc: (path: string) => Promise<string>;\n   restore: (assetSrc: string) => Promise<void>;\n };\n \n"
        },
        {
          "path": "space/app/layout.tsx",
          "status": "modified",
          "diff": "Index: space/app/layout.tsx\n===================================================================\n--- space/app/layout.tsx\tba6b822 (parent)\n+++ space/app/layout.tsx\tf679628 (commit)\n@@ -32,8 +32,9 @@\n         <link rel=\"shortcut icon\" href={`${SPACE_BASE_PATH}/favicon/favicon.ico`} />\n         <meta name=\"robots\" content=\"noindex, nofollow\" />\n       </head>\n       <body>\n+        <div id=\"editor-portal\" />\n         <AppProvider>\n           <>{children}</>\n         </AppProvider>\n       </body>\n"
        },
        {
          "path": "web/app/layout.tsx",
          "status": "modified",
          "diff": "Index: web/app/layout.tsx\n===================================================================\n--- web/app/layout.tsx\tba6b822 (parent)\n+++ web/app/layout.tsx\tf679628 (commit)\n@@ -79,8 +79,9 @@\n         <link rel=\"manifest\" href=\"/manifest.json\" />\n       </head>\n       <body>\n         <div id=\"context-menu-portal\" />\n+        <div id=\"editor-portal\" />\n         <AppProvider>\n           <div\n             className={cn(\n               \"h-screen w-full overflow-hidden bg-custom-background-100 relative flex flex-col\",\n"
        },
        {
          "path": "web/core/hooks/editor/use-editor-config.ts",
          "status": "modified",
          "diff": "Index: web/core/hooks/editor/use-editor-config.ts\n===================================================================\n--- web/core/hooks/editor/use-editor-config.ts\tba6b822 (parent)\n+++ web/core/hooks/editor/use-editor-config.ts\tf679628 (commit)\n@@ -1,9 +1,9 @@\n import { useCallback } from \"react\";\n // plane editor\n import { TFileHandler, TReadOnlyFileHandler } from \"@plane/editor\";\n // helpers\n-import { getEditorAssetSrc } from \"@plane/utils\";\n+import { getEditorAssetDownloadSrc, getEditorAssetSrc } from \"@plane/utils\";\n // hooks\n import { useEditorAsset } from \"@/hooks/store\";\n // plane web hooks\n import { useFileSize } from \"@/plane-web/hooks/use-file-size\";\n@@ -32,8 +32,22 @@\n         checkIfAssetExists: async (assetId: string) => {\n           const res = await fileService.checkIfAssetExists(workspaceSlug, assetId);\n           return res?.exists ?? false;\n         },\n+        getAssetDownloadSrc: async (path) => {\n+          if (!path) return \"\";\n+          if (path?.startsWith(\"http\")) {\n+            return path;\n+          } else {\n+            return (\n+              getEditorAssetDownloadSrc({\n+                assetId: path,\n+                projectId,\n+                workspaceSlug,\n+              }) ?? \"\"\n+            );\n+          }\n+        },\n         getAssetSrc: async (path) => {\n           if (!path) return \"\";\n           if (path?.startsWith(\"http\")) {\n             return path;\n"
        }
      ]
    },
    {
      "id": "add-member-filters",
      "sha": "586a7a48ba1320cbc927b30ebd45b574c828f476",
      "parentSha": "85bffaa231cd18252d664232754094aa73e29976",
      "spec": "Implement role filters and sortable column headers for project and workspace member lists across web apps.\n\nScope and behavior\n- Add a Filters dropdown to both Project Members and Workspace Members pages that allows toggling role filters (Admin/Member/Guest, mapped to EUserProjectRoles/EUserWorkspaceRoles). Display a small dot indicator on the button when any role filter is active. Toggling a role adds/removes it; if no roles remain, clear the roles filter (set to undefined).\n- Add sortable column headers for Full name, Display name, Email, Role, and Joining date. Each header opens a menu to set ascending/descending order for that property and to clear sorting. Sorting state is stored in a central filter store. When sorting is applied, member lists must be re-ordered accordingly. Clearing sorting removes the order_by filter.\n- Apply role filters before search, and apply search against the filtered set. For project members, use filtered member details when rendering each item so excluded members do not appear.\n- Joining date cells should use a shared formatted render function rather than manual date formatting.\n\nUI components\n- Create a MemberListFiltersDropdown that uses the existing FilterHeader and FilterOption components to render a role filter group for either project or workspace contexts. The button should show an indicator when filters are applied.\n- Create a MemberHeaderColumn component that:\n  - Reads property metadata from constants (MEMBER_PROPERTY_DETAILS) to render a column title and icons.\n  - Reflects current sorting state (ascending/descending icon) for the active property.\n  - Provides menu actions to set ascending or descending order for the given property, and to clear sorting.\n  - Calls a provided handler to update the filter store with order_by.\n\nState management\n- Add a new ProjectMemberFiltersStore that maintains per-project filters (roles?: string[], order_by?: TMemberOrderByOptions), with:\n  - filtersMap keyed by projectId\n  - updateFilters(projectId, filters: Partial<IMemberFilters>) to merge updates\n  - getFilters(projectId) to retrieve current filters\n  - getFilteredMemberIds(...) to return filtered and sorted user IDs based on current filters\n- Add a new WorkspaceMemberFiltersStore that maintains workspace-level filters (shared across the workspace membership view), with:\n  - filters: IMemberFilters\n  - updateFilters(filters: Partial<IMemberFilters>) to merge updates\n  - getFilteredMemberIds(...) to return filtered and sorted user IDs based on current filters\n- Add shared utilities in a member utils module to:\n  - Describe IMemberFilters and parse order keys\n  - Filter by role (project vs workspace)\n  - Compute sort key by property (display_name, full_name, email, joining_date, role)\n  - Sort members generically by the provided property and direction\n  - Compose project and workspace specific sorting/filtering via sortProjectMembers and sortWorkspaceMembers\n\nStores integration\n- For the project member store (base-project-member.store):\n  - Initialize and expose a ProjectMemberFiltersStore instance as filters.\n  - Update projectMemberIds computed to apply sortProjectMembers with current filters (ensuring MobX tracking by accessing filtersMap for the current project ID).\n  - Add getFilteredProjectMemberDetails(userId, projectId) that returns null if the user is filtered out by current filters; otherwise return member details with joining_date derived from membership created_at.\n- For the workspace member store:\n  - Initialize and expose a WorkspaceMemberFiltersStore instance as filtersStore.\n  - Add getFilteredWorkspaceMemberIds(workspaceSlug) that returns member IDs after applying filters and sorting.\n  - Update getSearchedWorkspaceMemberIds to search only within filtered results.\n\nPage and component integration\n- Workspace members page (settings view):\n  - Inject filtersStore from useMember().workspace.\n  - Add MemberListFiltersDropdown next to the search field.\n  - Maintain appliedRoleFilters from filtersStore.filters.roles.\n  - Implement handleRoleFilterUpdate to toggle roles in filtersStore; clear to undefined when none.\n  - Ensure header action buttons retain existing behavior (invite/Billing actions), with layout adjusted to include the new filter dropdown.\n- Workspace useMemberColumns hook:\n  - Use MemberHeaderColumn for the Full name, Display name, Email, Role, and Joining date headers.\n  - Use renderFormattedDate for the Joining date cell rendering.\n  - Wire thRender handlers to update filtersStore.updateFilters via a local handleDisplayFilterUpdate.\n- Project useProjectColumns hook:\n  - Access project filters via useMember().project.filters.getFilters/updateFilters.\n  - Provide displayFilters and handleDisplayFilterUpdate.\n  - Use MemberHeaderColumn for the same headers, and renderFormattedDate for Joining date.\n  - Add Email column to the table with header sorting enabled.\n- Project member list:\n  - Replace getProjectMemberDetails with getFilteredProjectMemberDetails for mapping.\n  - Use filters.getFilters(projectId)/filters.updateFilters(projectId, ...) to manage role filter state in the list header.\n  - Add MemberListFiltersDropdown next to the search field.\n- Workspace members list:\n  - Use getFilteredWorkspaceMemberIds(workspaceSlug) to compute filtered list, and apply search only if searchQuery is non-empty, otherwise use the filtered list.\n\nConstants and i18n\n- Add member property constants in packages/constants members.ts, export from constants index, to define:\n  - TMemberOrderByOptions set including asc/desc forms of display_name, full_name, email, joining_date, role\n  - IProjectMemberDisplayProperties keys for column properties\n  - MEMBER_PROPERTY_DETAILS with i18n keys, ascending/descending order keys and titles, icon names, and sorting support flag\n- Add i18n strings for project_members.full_name, display_name, email, joining_date, role in English translations.\n\nRefactors and path updates\n- Move core/store/member/base-project-member.store.ts to core/store/member/project/base-project-member.store.ts and update all imports accordingly (e.g., in project-member.store.ts and components using IProjectMemberDetails).\n- Move core/store/member/workspace-member.store.ts to core/store/member/workspace/workspace-member.store.ts and update imports in root stores and any dependents.\n- Ensure all imports referencing these moved modules point to the new paths.\n\nFormatting changes\n- Use renderFormattedDate from @plane/utils instead of local date formatting in both project and workspace column hooks.\n- Keep import ordering consistent as in the codebase style.\n\nAcceptance criteria\n- In Project Members and Workspace Members UIs, a Filters dropdown appears next to the search input. Selecting Admin/Member/Guest filters the list accordingly; clearing all role selections removes the filter.\n- Column headers for Full name, Display name, Email, Role, and Joining date display a dropdown allowing ascending/descending sorting and clearing sorting. The current sort direction is reflected via icon on the header.\n- Search applies after filters. Members filtered out are not shown in the list or in computed details mapping.\n- Joining date displays with the shared renderFormattedDate utility.\n- All existing functionality such as invite buttons and billing actions remain intact.\n- All imports compile with updated store paths and new modules available.",
      "prompt": "Add role-based filtering and sortable column headers to the project and workspace member lists. Provide a filter dropdown for roles (Admin/Member/Guest) and update the list header to include sortable column headers for common member properties. Persist the sorting and role filters in appropriate stores so they drive the rendered list order and filtering. Ensure search applies to the filtered results. Update the column hooks to render sortable headers and use a shared date formatting utility for joining dates. Add any missing constants and i18n strings necessary to support the UI. Keep existing invite/billing actions and adjust the header layout to accommodate the new filters.",
      "supplementalFiles": [
        "apps/web/core/components/issues/issue-layouts/filters/header/helpers/filter-header.tsx",
        "apps/web/core/hooks/store/use-member.ts",
        "apps/web/core/store/root.store.ts",
        "apps/web/core/services/project/index.ts",
        "packages/ui/src/dropdowns/custom-menu.tsx",
        "packages/ui/src/button/button.tsx",
        "packages/types/src/index.ts",
        "packages/utils/src/datetime.ts",
        "apps/web/core/components/ui/loader/settings/members.tsx"
      ],
      "fileDiffs": [
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(settings)/settings/(workspace)/members/page.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(settings)/settings/(workspace)/members/page.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(settings)/settings/(workspace)/members/page.tsx\t85bffaa (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(settings)/settings/(workspace)/members/page.tsx\t586a7a4 (commit)\n@@ -19,8 +19,9 @@\n // components\n import { NotAuthorizedView } from \"@/components/auth-screens/not-authorized-view\";\n import { CountChip } from \"@/components/common/count-chip\";\n import { PageHead } from \"@/components/core/page-title\";\n+import { MemberListFiltersDropdown } from \"@/components/project/dropdowns/filters/member-list\";\n import { SettingsContentWrapper } from \"@/components/settings/content-wrapper\";\n import { WorkspaceMembersList } from \"@/components/workspace/settings/members-list\";\n // helpers\n import { captureError, captureSuccess } from \"@/helpers/event-tracker.helper\";\n@@ -40,9 +41,9 @@\n   const { workspaceSlug } = useParams();\n   // store hooks\n   const { workspaceUserInfo, allowPermissions } = useUserPermissions();\n   const {\n-    workspace: { workspaceMemberIds, inviteMembersToWorkspace },\n+    workspace: { workspaceMemberIds, inviteMembersToWorkspace, filtersStore },\n   } = useMember();\n   const { currentWorkspace } = useWorkspace();\n   const { t } = useTranslation();\n \n@@ -87,10 +88,22 @@\n         throw err;\n       });\n   };\n \n+  // Handler for role filter updates\n+  const handleRoleFilterUpdate = (role: string) => {\n+    const currentFilters = filtersStore.filters;\n+    const currentRoles = currentFilters?.roles || [];\n+    const updatedRoles = currentRoles.includes(role) ? currentRoles.filter((r) => r !== role) : [...currentRoles, role];\n+\n+    filtersStore.updateFilters({\n+      roles: updatedRoles.length > 0 ? updatedRoles : undefined,\n+    });\n+  };\n+\n   // derived values\n   const pageTitle = currentWorkspace?.name ? `${currentWorkspace.name} - Members` : undefined;\n+  const appliedRoleFilters = filtersStore.filters?.roles || [];\n \n   // if user is not authorized to view this page\n   if (workspaceUserInfo && !canPerformWorkspaceMemberActions) {\n     return <NotAuthorizedView section=\"settings\" className=\"h-auto\" />;\n@@ -115,29 +128,36 @@\n             {workspaceMemberIds && workspaceMemberIds.length > 0 && (\n               <CountChip count={workspaceMemberIds.length} className=\"h-5 m-auto\" />\n             )}\n           </h4>\n-          <div className=\"ml-auto flex items-center gap-1.5 rounded-md border border-custom-border-200 bg-custom-background-100 px-2.5 py-1.5\">\n-            <Search className=\"h-3.5 w-3.5 text-custom-text-400\" />\n-            <input\n-              className=\"w-full max-w-[234px] border-none bg-transparent text-sm outline-none placeholder:text-custom-text-400\"\n-              placeholder={`${t(\"search\")}...`}\n-              value={searchQuery}\n-              autoFocus\n-              onChange={(e) => setSearchQuery(e.target.value)}\n+          <div className=\"flex items-center gap-2\">\n+            <div className=\"flex items-center gap-1.5 rounded-md border border-custom-border-200 bg-custom-background-100 px-2.5 py-1.5\">\n+              <Search className=\"h-3.5 w-3.5 text-custom-text-400\" />\n+              <input\n+                className=\"w-full max-w-[234px] border-none bg-transparent text-sm outline-none placeholder:text-custom-text-400\"\n+                placeholder={`${t(\"search\")}...`}\n+                value={searchQuery}\n+                autoFocus\n+                onChange={(e) => setSearchQuery(e.target.value)}\n+              />\n+            </div>\n+            <MemberListFiltersDropdown\n+              appliedFilters={appliedRoleFilters}\n+              handleUpdate={handleRoleFilterUpdate}\n+              memberType=\"workspace\"\n             />\n+            {canPerformWorkspaceAdminActions && (\n+              <Button\n+                variant=\"primary\"\n+                size=\"sm\"\n+                onClick={() => setInviteModal(true)}\n+                data-ph-element={MEMBER_TRACKER_ELEMENTS.HEADER_ADD_BUTTON}\n+              >\n+                {t(\"workspace_settings.settings.members.add_member\")}\n+              </Button>\n+            )}\n+            <BillingActionsButton canPerformWorkspaceAdminActions={canPerformWorkspaceAdminActions} />\n           </div>\n-          {canPerformWorkspaceAdminActions && (\n-            <Button\n-              variant=\"primary\"\n-              size=\"sm\"\n-              onClick={() => setInviteModal(true)}\n-              data-ph-element={MEMBER_TRACKER_ELEMENTS.HEADER_ADD_BUTTON}\n-            >\n-              {t(\"workspace_settings.settings.members.add_member\")}\n-            </Button>\n-          )}\n-          <BillingActionsButton canPerformWorkspaceAdminActions={canPerformWorkspaceAdminActions} />\n         </div>\n         <WorkspaceMembersList searchQuery={searchQuery} isAdmin={canPerformWorkspaceAdminActions} />\n       </section>\n     </SettingsContentWrapper>\n"
        },
        {
          "path": "apps/web/ce/components/projects/settings/useProjectColumns.tsx",
          "status": "modified",
          "diff": "Index: apps/web/ce/components/projects/settings/useProjectColumns.tsx\n===================================================================\n--- apps/web/ce/components/projects/settings/useProjectColumns.tsx\t85bffaa (parent)\n+++ apps/web/ce/components/projects/settings/useProjectColumns.tsx\t586a7a4 (commit)\n@@ -1,12 +1,16 @@\n import { useState } from \"react\";\n // plane imports\n import { EUserPermissions, EUserPermissionsLevel } from \"@plane/constants\";\n import { IWorkspaceMember, TProjectMembership } from \"@plane/types\";\n+import { renderFormattedDate } from \"@plane/utils\";\n // components\n+import { MemberHeaderColumn } from \"@/components/project/member-header-column\";\n import { AccountTypeColumn, NameColumn } from \"@/components/project/settings/member-columns\";\n // hooks\n+import { useMember } from \"@/hooks/store/use-member\";\n import { useUser, useUserPermissions } from \"@/hooks/store/user\";\n+import { IMemberFilters } from \"@/store/member/utils\";\n \n export interface RowData extends Pick<TProjectMembership, \"original_role\"> {\n   member: IWorkspaceMember;\n }\n@@ -19,11 +23,17 @@\n export const useProjectColumns = (props: TUseProjectColumnsProps) => {\n   const { projectId, workspaceSlug } = props;\n   // states\n   const [removeMemberModal, setRemoveMemberModal] = useState<RowData | null>(null);\n+\n   // store hooks\n   const { data: currentUser } = useUser();\n   const { allowPermissions, getProjectRoleByWorkspaceSlugAndProjectId } = useUserPermissions();\n+  const {\n+    project: {\n+      filters: { getFilters, updateFilters },\n+    },\n+  } = useMember();\n   // derived values\n   const isAdmin = allowPermissions(\n     [EUserPermissions.ADMIN],\n     EUserPermissionsLevel.PROJECT,\n@@ -32,20 +42,27 @@\n   );\n   const currentProjectRole =\n     getProjectRoleByWorkspaceSlugAndProjectId(workspaceSlug.toString(), projectId.toString()) ?? EUserPermissions.GUEST;\n \n-  const getFormattedDate = (dateStr: string) => {\n-    const date = new Date(dateStr);\n+  const displayFilters = getFilters(projectId);\n \n-    const options: Intl.DateTimeFormatOptions = { year: \"numeric\", month: \"long\", day: \"numeric\" };\n-    return date.toLocaleDateString(\"en-US\", options);\n+  // handlers\n+  const handleDisplayFilterUpdate = (filters: Partial<IMemberFilters>) => {\n+    updateFilters(projectId, filters);\n   };\n \n   const columns = [\n     {\n       key: \"Full Name\",\n       content: \"Full name\",\n       thClassName: \"text-left\",\n+      thRender: () => (\n+        <MemberHeaderColumn\n+          property=\"full_name\"\n+          displayFilters={displayFilters}\n+          handleDisplayFilterUpdate={handleDisplayFilterUpdate}\n+        />\n+      ),\n       tdRender: (rowData: RowData) => (\n         <NameColumn\n           rowData={rowData}\n           workspaceSlug={workspaceSlug as string}\n@@ -57,14 +74,39 @@\n     },\n     {\n       key: \"Display Name\",\n       content: \"Display name\",\n+      thRender: () => (\n+        <MemberHeaderColumn\n+          property=\"display_name\"\n+          displayFilters={displayFilters}\n+          handleDisplayFilterUpdate={handleDisplayFilterUpdate}\n+        />\n+      ),\n       tdRender: (rowData: RowData) => <div className=\"w-32\">{rowData.member.display_name}</div>,\n     },\n-\n     {\n+      key: \"Email\",\n+      content: \"Email\",\n+      thRender: () => (\n+        <MemberHeaderColumn\n+          property=\"email\"\n+          displayFilters={displayFilters}\n+          handleDisplayFilterUpdate={handleDisplayFilterUpdate}\n+        />\n+      ),\n+      tdRender: (rowData: RowData) => <div className=\"w-48 text-custom-text-200\">{rowData.member.email}</div>,\n+    },\n+    {\n       key: \"Account Type\",\n       content: \"Account type\",\n+      thRender: () => (\n+        <MemberHeaderColumn\n+          property=\"role\"\n+          displayFilters={displayFilters}\n+          handleDisplayFilterUpdate={handleDisplayFilterUpdate}\n+        />\n+      ),\n       tdRender: (rowData: RowData) => (\n         <AccountTypeColumn\n           rowData={rowData}\n           currentProjectRole={currentProjectRole}\n@@ -75,9 +117,22 @@\n     },\n     {\n       key: \"Joining Date\",\n       content: \"Joining date\",\n-      tdRender: (rowData: RowData) => <div>{getFormattedDate(rowData?.member?.joining_date || \"\")}</div>,\n+      thRender: () => (\n+        <MemberHeaderColumn\n+          property=\"joining_date\"\n+          displayFilters={displayFilters}\n+          handleDisplayFilterUpdate={handleDisplayFilterUpdate}\n+        />\n+      ),\n+      tdRender: (rowData: RowData) => <div>{renderFormattedDate(rowData?.member?.joining_date)}</div>,\n     },\n   ];\n-  return { columns, removeMemberModal, setRemoveMemberModal };\n+  return {\n+    columns,\n+    removeMemberModal,\n+    setRemoveMemberModal,\n+    displayFilters,\n+    handleDisplayFilterUpdate,\n+  };\n };\n"
        },
        {
          "path": "apps/web/ce/components/workspace/settings/useMemberColumns.tsx",
          "status": "modified",
          "diff": "Index: apps/web/ce/components/workspace/settings/useMemberColumns.tsx\n===================================================================\n--- apps/web/ce/components/workspace/settings/useMemberColumns.tsx\t85bffaa (parent)\n+++ apps/web/ce/components/workspace/settings/useMemberColumns.tsx\t586a7a4 (commit)\n@@ -1,10 +1,14 @@\n import { useState } from \"react\";\n import { useParams } from \"next/navigation\";\n import { EUserPermissions, EUserPermissionsLevel } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n+import { renderFormattedDate } from \"@plane/utils\";\n+import { MemberHeaderColumn } from \"@/components/project/member-header-column\";\n import { AccountTypeColumn, NameColumn, RowData } from \"@/components/workspace/settings/member-columns\";\n+import { useMember } from \"@/hooks/store/use-member\";\n import { useUser, useUserPermissions } from \"@/hooks/store/user\";\n+import { IMemberFilters } from \"@/store/member/utils\";\n \n export const useMemberColumns = () => {\n   // states\n   const [removeMemberModal, setRemoveMemberModal] = useState<RowData | null>(null);\n@@ -12,25 +16,35 @@\n   const { workspaceSlug } = useParams();\n \n   const { data: currentUser } = useUser();\n   const { allowPermissions } = useUserPermissions();\n+  const {\n+    workspace: {\n+      filtersStore: { filters, updateFilters },\n+    },\n+  } = useMember();\n   const { t } = useTranslation();\n \n-  const getFormattedDate = (dateStr: string) => {\n-    const date = new Date(dateStr);\n-\n-    const options: Intl.DateTimeFormatOptions = { year: \"numeric\", month: \"long\", day: \"numeric\" };\n-    return date.toLocaleDateString(\"en-US\", options);\n-  };\n-\n   // derived values\n   const isAdmin = allowPermissions([EUserPermissions.ADMIN], EUserPermissionsLevel.WORKSPACE);\n \n+  // handlers\n+  const handleDisplayFilterUpdate = (filterUpdates: Partial<IMemberFilters>) => {\n+    updateFilters(filterUpdates);\n+  };\n+\n   const columns = [\n     {\n       key: \"Full name\",\n       content: t(\"workspace_settings.settings.members.details.full_name\"),\n       thClassName: \"text-left\",\n+      thRender: () => (\n+        <MemberHeaderColumn\n+          property=\"full_name\"\n+          displayFilters={filters}\n+          handleDisplayFilterUpdate={handleDisplayFilterUpdate}\n+        />\n+      ),\n       tdRender: (rowData: RowData) => (\n         <NameColumn\n           rowData={rowData}\n           workspaceSlug={workspaceSlug as string}\n@@ -43,20 +57,41 @@\n \n     {\n       key: \"Display name\",\n       content: t(\"workspace_settings.settings.members.details.display_name\"),\n+      thRender: () => (\n+        <MemberHeaderColumn\n+          property=\"display_name\"\n+          displayFilters={filters}\n+          handleDisplayFilterUpdate={handleDisplayFilterUpdate}\n+        />\n+      ),\n       tdRender: (rowData: RowData) => <div className=\"w-32\">{rowData.member.display_name}</div>,\n     },\n \n     {\n       key: \"Email address\",\n       content: t(\"workspace_settings.settings.members.details.email_address\"),\n+      thRender: () => (\n+        <MemberHeaderColumn\n+          property=\"email\"\n+          displayFilters={filters}\n+          handleDisplayFilterUpdate={handleDisplayFilterUpdate}\n+        />\n+      ),\n       tdRender: (rowData: RowData) => <div className=\"w-48 truncate\">{rowData.member.email}</div>,\n     },\n \n     {\n       key: \"Account type\",\n       content: t(\"workspace_settings.settings.members.details.account_type\"),\n+      thRender: () => (\n+        <MemberHeaderColumn\n+          property=\"role\"\n+          displayFilters={filters}\n+          handleDisplayFilterUpdate={handleDisplayFilterUpdate}\n+        />\n+      ),\n       tdRender: (rowData: RowData) => <AccountTypeColumn rowData={rowData} workspaceSlug={workspaceSlug as string} />,\n     },\n \n     {\n@@ -69,9 +104,16 @@\n \n     {\n       key: \"Joining date\",\n       content: t(\"workspace_settings.settings.members.details.joining_date\"),\n-      tdRender: (rowData: RowData) => <div>{getFormattedDate(rowData?.member?.joining_date || \"\")}</div>,\n+      thRender: () => (\n+        <MemberHeaderColumn\n+          property=\"joining_date\"\n+          displayFilters={filters}\n+          handleDisplayFilterUpdate={handleDisplayFilterUpdate}\n+        />\n+      ),\n+      tdRender: (rowData: RowData) => <div>{renderFormattedDate(rowData?.member?.joining_date)}</div>,\n     },\n   ];\n   return { columns, workspaceSlug, removeMemberModal, setRemoveMemberModal };\n };\n"
        },
        {
          "path": "apps/web/ce/store/member/project-member.store.ts",
          "status": "modified",
          "diff": "Index: apps/web/ce/store/member/project-member.store.ts\n===================================================================\n--- apps/web/ce/store/member/project-member.store.ts\t85bffaa (parent)\n+++ apps/web/ce/store/member/project-member.store.ts\t586a7a4 (commit)\n@@ -4,9 +4,9 @@\n // plane web imports\n import type { RootStore } from \"@/plane-web/store/root.store\";\n // store\n import type { IMemberRootStore } from \"@/store/member\";\n-import { BaseProjectMemberStore, IBaseProjectMemberStore } from \"@/store/member/base-project-member.store\";\n+import { BaseProjectMemberStore, IBaseProjectMemberStore } from \"@/store/member/project/base-project-member.store\";\n \n export type IProjectMemberStore = IBaseProjectMemberStore;\n \n export class ProjectMemberStore extends BaseProjectMemberStore implements IProjectMemberStore {\n"
        },
        {
          "path": "apps/web/core/components/pages/version/editor.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/pages/version/editor.tsx\n===================================================================\n--- apps/web/core/components/pages/version/editor.tsx\t85bffaa (parent)\n+++ apps/web/core/components/pages/version/editor.tsx\t586a7a4 (commit)\n@@ -2,10 +2,10 @@\n import { useParams } from \"next/navigation\";\n // plane imports\n import type { TDisplayConfig } from \"@plane/editor\";\n import type { JSONContent, TPageVersion } from \"@plane/types\";\n-import { isJSONContentEmpty } from \"@plane/utils\";\n import { Loader } from \"@plane/ui\";\n+import { isJSONContentEmpty } from \"@plane/utils\";\n // components\n import { DocumentEditor } from \"@/components/editor/document/editor\";\n // hooks\n import { useWorkspace } from \"@/hooks/store/use-workspace\";\n"
        },
        {
          "path": "apps/web/core/components/project/dropdowns/filters/member-list.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/project/dropdowns/filters/member-list.tsx\n===================================================================\n--- apps/web/core/components/project/dropdowns/filters/member-list.tsx\t85bffaa (parent)\n+++ apps/web/core/components/project/dropdowns/filters/member-list.tsx\t586a7a4 (commit)\n@@ -0,0 +1,106 @@\n+import { useState } from \"react\";\n+import { observer } from \"mobx-react\";\n+import { ChevronDown } from \"lucide-react\";\n+// plane imports\n+import { EUserProjectRoles, EUserWorkspaceRoles } from \"@plane/types\";\n+// plane ui\n+import { Button, CustomMenu } from \"@plane/ui\";\n+// components\n+import { FilterHeader, FilterOption } from \"@/components/issues/issue-layouts/filters\";\n+\n+interface IRoleOption {\n+  value: string;\n+  label: string;\n+}\n+\n+type Props = {\n+  appliedFilters: string[] | null;\n+  handleUpdate: (role: string) => void;\n+  memberType: \"project\" | \"workspace\";\n+};\n+\n+const PROJECT_ROLE_OPTIONS: IRoleOption[] = [\n+  { value: String(EUserProjectRoles.ADMIN), label: \"Admin\" },\n+  { value: String(EUserProjectRoles.MEMBER), label: \"Member\" },\n+  { value: String(EUserProjectRoles.GUEST), label: \"Guest\" },\n+];\n+\n+const WORKSPACE_ROLE_OPTIONS: IRoleOption[] = [\n+  { value: String(EUserWorkspaceRoles.ADMIN), label: \"Admin\" },\n+  { value: String(EUserWorkspaceRoles.MEMBER), label: \"Member\" },\n+  { value: String(EUserWorkspaceRoles.GUEST), label: \"Guest\" },\n+];\n+\n+// Role filter group component\n+const RoleFilterGroup: React.FC<{\n+  appliedFilters: string[] | null;\n+  handleUpdate: (role: string) => void;\n+  memberType: \"project\" | \"workspace\";\n+}> = observer(({ appliedFilters, handleUpdate, memberType }) => {\n+  const [isExpanded, setIsExpanded] = useState(true);\n+  const appliedFiltersCount = appliedFilters?.length ?? 0;\n+  const roleOptions = memberType === \"project\" ? PROJECT_ROLE_OPTIONS : WORKSPACE_ROLE_OPTIONS;\n+\n+  return (\n+    <div className=\"space-y-2\">\n+      <FilterHeader\n+        title={`Roles${appliedFiltersCount > 0 ? ` (${appliedFiltersCount})` : \"\"}`}\n+        isPreviewEnabled={isExpanded}\n+        handleIsPreviewEnabled={() => setIsExpanded(!isExpanded)}\n+      />\n+\n+      {isExpanded && (\n+        <div className=\"space-y-1\">\n+          {roleOptions.map((role) => {\n+            const isSelected = appliedFilters?.includes(role.value) ?? false;\n+            return (\n+              <FilterOption\n+                key={`role-${role.value}`}\n+                isChecked={isSelected}\n+                title={role.label}\n+                onClick={() => handleUpdate(role.value)}\n+              />\n+            );\n+          })}\n+        </div>\n+      )}\n+    </div>\n+  );\n+});\n+\n+export const MemberListFilters: React.FC<Props> = observer((props) => {\n+  const { appliedFilters, handleUpdate, memberType } = props;\n+\n+  return (\n+    <div className=\"space-y-4\">\n+      {/* Role Filter Group */}\n+      <RoleFilterGroup appliedFilters={appliedFilters} handleUpdate={handleUpdate} memberType={memberType} />\n+    </div>\n+  );\n+});\n+\n+// Dropdown component for member list filters\n+export const MemberListFiltersDropdown: React.FC<Props> = observer((props) => {\n+  const { appliedFilters, handleUpdate, memberType } = props;\n+\n+  const appliedFiltersCount = appliedFilters?.length ?? 0;\n+\n+  return (\n+    <CustomMenu\n+      customButton={\n+        <div className=\"relative\">\n+          <Button variant=\"neutral-primary\" size=\"sm\" className=\"flex items-center gap-2\">\n+            <span>Filters</span>\n+            <ChevronDown className=\"h-3 w-3\" />\n+          </Button>\n+          {appliedFiltersCount > 0 && (\n+            <div className=\"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-custom-primary-100\" />\n+          )}\n+        </div>\n+      }\n+      placement=\"bottom-start\"\n+    >\n+      <MemberListFilters appliedFilters={appliedFilters} handleUpdate={handleUpdate} memberType={memberType} />\n+    </CustomMenu>\n+  );\n+});\n"
        },
        {
          "path": "apps/web/core/components/project/member-header-column.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/project/member-header-column.tsx\n===================================================================\n--- apps/web/core/components/project/member-header-column.tsx\t85bffaa (parent)\n+++ apps/web/core/components/project/member-header-column.tsx\t586a7a4 (commit)\n@@ -0,0 +1,114 @@\n+// ui\n+import { observer } from \"mobx-react\";\n+import { ArrowDownWideNarrow, ArrowUpNarrowWide, CheckIcon, ChevronDownIcon, Eraser, MoveRight } from \"lucide-react\";\n+// constants\n+import { MEMBER_PROPERTY_DETAILS, IProjectMemberDisplayProperties, TMemberOrderByOptions } from \"@plane/constants\";\n+// i18n\n+import { useTranslation } from \"@plane/i18n\";\n+// types\n+import { CustomMenu } from \"@plane/ui\";\n+import { IMemberFilters } from \"@/store/member/utils\";\n+\n+interface Props {\n+  property: keyof IProjectMemberDisplayProperties;\n+  displayFilters?: IMemberFilters;\n+  handleDisplayFilterUpdate: (data: Partial<IMemberFilters>) => void;\n+}\n+\n+export const MemberHeaderColumn = observer((props: Props) => {\n+  const { displayFilters, handleDisplayFilterUpdate, property } = props;\n+  // i18n\n+  const { t } = useTranslation();\n+\n+  const propertyDetails = MEMBER_PROPERTY_DETAILS[property];\n+\n+  const activeSortingProperty = displayFilters?.order_by;\n+\n+  const handleOrderBy = (order: TMemberOrderByOptions, _itemKey: keyof IProjectMemberDisplayProperties) => {\n+    handleDisplayFilterUpdate({ order_by: order });\n+  };\n+\n+  const handleClearSorting = () => {\n+    handleDisplayFilterUpdate({ order_by: undefined });\n+  };\n+\n+  if (!propertyDetails) return null;\n+\n+  return (\n+    <CustomMenu\n+      customButtonClassName=\"clickable !w-full\"\n+      customButtonTabIndex={-1}\n+      className=\"!w-full\"\n+      customButton={\n+        <div className=\"flex w-full cursor-pointer items-center justify-between gap-1.5 py-2 text-sm text-custom-text-200 hover:text-custom-text-100\">\n+          <span>{t(propertyDetails.i18n_title)}</span>\n+          <div className=\"ml-3 flex\">\n+            {(activeSortingProperty === propertyDetails.ascendingOrderKey ||\n+              activeSortingProperty === propertyDetails.descendingOrderKey) && (\n+              <div className=\"flex h-3.5 w-3.5 items-center justify-center rounded-full\">\n+                {propertyDetails.ascendingOrderKey === activeSortingProperty ? (\n+                  <ArrowDownWideNarrow className=\"h-3 w-3\" />\n+                ) : (\n+                  <ArrowUpNarrowWide className=\"h-3 w-3\" />\n+                )}\n+              </div>\n+            )}\n+            <ChevronDownIcon className=\"h-3 w-3\" aria-hidden=\"true\" />\n+          </div>\n+        </div>\n+      }\n+      placement=\"bottom-end\"\n+      closeOnSelect\n+    >\n+      {propertyDetails.isSortingAllowed && (\n+        <>\n+          <CustomMenu.MenuItem onClick={() => handleOrderBy(propertyDetails.ascendingOrderKey, property)}>\n+            <div\n+              className={`flex items-center justify-between gap-1.5 px-1 ${\n+                activeSortingProperty === propertyDetails.ascendingOrderKey\n+                  ? \"text-custom-text-100\"\n+                  : \"text-custom-text-200 hover:text-custom-text-100\"\n+              }`}\n+            >\n+              <div className=\"flex items-center gap-2\">\n+                <ArrowDownWideNarrow className=\"h-3 w-3 stroke-[1.5]\" />\n+                <span>{propertyDetails.ascendingOrderTitle}</span>\n+                <MoveRight className=\"h-3 w-3\" />\n+                <span>{propertyDetails.descendingOrderTitle}</span>\n+              </div>\n+              {activeSortingProperty === propertyDetails.ascendingOrderKey && <CheckIcon className=\"h-3 w-3\" />}\n+            </div>\n+          </CustomMenu.MenuItem>\n+\n+          <CustomMenu.MenuItem onClick={() => handleOrderBy(propertyDetails.descendingOrderKey, property)}>\n+            <div\n+              className={`flex items-center justify-between gap-1.5 px-1 ${\n+                activeSortingProperty === propertyDetails.descendingOrderKey\n+                  ? \"text-custom-text-100\"\n+                  : \"text-custom-text-200 hover:text-custom-text-100\"\n+              }`}\n+            >\n+              <div className=\"flex items-center gap-2\">\n+                <ArrowUpNarrowWide className=\"h-3 w-3 stroke-[1.5]\" />\n+                <span>{propertyDetails.descendingOrderTitle}</span>\n+                <MoveRight className=\"h-3 w-3\" />\n+                <span>{propertyDetails.ascendingOrderTitle}</span>\n+              </div>\n+              {activeSortingProperty === propertyDetails.descendingOrderKey && <CheckIcon className=\"h-3 w-3\" />}\n+            </div>\n+          </CustomMenu.MenuItem>\n+\n+          {(activeSortingProperty === propertyDetails.ascendingOrderKey ||\n+            activeSortingProperty === propertyDetails.descendingOrderKey) && (\n+            <CustomMenu.MenuItem className=\"mt-0.5\" key={property} onClick={handleClearSorting}>\n+              <div className=\"flex items-center gap-2 px-1\">\n+                <Eraser className=\"h-3 w-3\" />\n+                <span>{t(\"common.actions.clear_sorting\")}</span>\n+              </div>\n+            </CustomMenu.MenuItem>\n+          )}\n+        </>\n+      )}\n+    </CustomMenu>\n+  );\n+});\n"
        },
        {
          "path": "apps/web/core/components/project/member-list-item.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/project/member-list-item.tsx\n===================================================================\n--- apps/web/core/components/project/member-list-item.tsx\t85bffaa (parent)\n+++ apps/web/core/components/project/member-list-item.tsx\t586a7a4 (commit)\n@@ -12,9 +12,9 @@\n import { useAppRouter } from \"@/hooks/use-app-router\";\n // plane web imports\n import { useProjectColumns } from \"@/plane-web/components/projects/settings/useProjectColumns\";\n // store\n-import { IProjectMemberDetails } from \"@/store/member/base-project-member.store\";\n+import { IProjectMemberDetails } from \"@/store/member/project/base-project-member.store\";\n // local imports\n import { ConfirmProjectMemberRemove } from \"./confirm-project-member-remove\";\n \n type Props = {\n"
        },
        {
          "path": "apps/web/core/components/project/member-list.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/project/member-list.tsx\n===================================================================\n--- apps/web/core/components/project/member-list.tsx\t85bffaa (parent)\n+++ apps/web/core/components/project/member-list.tsx\t586a7a4 (commit)\n@@ -12,8 +12,9 @@\n // hooks\n import { useMember } from \"@/hooks/store/use-member\";\n import { useUserPermissions } from \"@/hooks/store/user\";\n // local imports\n+import { MemberListFiltersDropdown } from \"./dropdowns/filters/member-list\";\n import { ProjectMemberListItem } from \"./member-list-item\";\n import { SendProjectInvitationModal } from \"./send-project-invitation-modal\";\n \n type TProjectMemberListProps = {\n@@ -26,30 +27,49 @@\n   // states\n   const [inviteModal, setInviteModal] = useState(false);\n   const [searchQuery, setSearchQuery] = useState(\"\");\n   const {\n-    project: { projectMemberIds, getProjectMemberDetails },\n+    project: { projectMemberIds, getFilteredProjectMemberDetails, filters },\n   } = useMember();\n   const { allowPermissions } = useUserPermissions();\n \n   const { t } = useTranslation();\n \n   const searchedProjectMembers = (projectMemberIds ?? []).filter((userId) => {\n-    const memberDetails = projectId ? getProjectMemberDetails(userId, projectId.toString()) : null;\n+    const memberDetails = projectId ? getFilteredProjectMemberDetails(userId, projectId.toString()) : null;\n \n     if (!memberDetails?.member || !memberDetails.original_role) return false;\n \n     const fullName = `${memberDetails?.member.first_name} ${memberDetails?.member.last_name}`.toLowerCase();\n     const displayName = memberDetails?.member.display_name.toLowerCase();\n \n     return displayName?.includes(searchQuery.toLowerCase()) || fullName.includes(searchQuery.toLowerCase());\n   });\n+\n   const memberDetails = searchedProjectMembers?.map((memberId) =>\n-    projectId ? getProjectMemberDetails(memberId, projectId.toString()) : null\n+    projectId ? getFilteredProjectMemberDetails(memberId, projectId.toString()) : null\n   );\n \n   const isAdmin = allowPermissions([EUserPermissions.ADMIN], EUserPermissionsLevel.PROJECT);\n \n+  // Handler for role filter updates\n+  const handleRoleFilterUpdate = (role: string) => {\n+    if (projectId) {\n+      const currentFilters = filters.getFilters(projectId);\n+      const currentRoles = currentFilters?.roles || [];\n+      const updatedRoles = currentRoles.includes(role)\n+        ? currentRoles.filter((r) => r !== role)\n+        : [...currentRoles, role];\n+\n+      filters.updateFilters(projectId, {\n+        roles: updatedRoles.length > 0 ? updatedRoles : undefined,\n+      });\n+    }\n+  };\n+\n+  // Get current role filters\n+  const appliedRoleFilters = projectId ? filters.getFilters(projectId)?.roles || [] : [];\n+\n   return (\n     <>\n       <SendProjectInvitationModal\n         isOpen={inviteModal}\n@@ -58,30 +78,37 @@\n         workspaceSlug={workspaceSlug}\n       />\n       <div className=\"flex items-center justify-between gap-4 py-2 overflow-x-hidden border-b border-custom-border-100\">\n         <div className=\"text-base font-semibold\">{t(\"common.members\")}</div>\n-        <div className=\"ml-auto flex items-center justify-start gap-1.5 rounded-md border border-custom-border-200 bg-custom-background-100 px-2 py-1\">\n-          <Search className=\"h-3.5 w-3.5\" />\n-          <input\n-            className=\"w-full max-w-[234px] border-none bg-transparent text-sm focus:outline-none placeholder:text-custom-text-400\"\n-            placeholder=\"Search\"\n-            value={searchQuery}\n-            autoFocus\n-            onChange={(e) => setSearchQuery(e.target.value)}\n+        <div className=\"flex items-center gap-2\">\n+          <div className=\"flex items-center justify-start gap-1.5 rounded-md border border-custom-border-200 bg-custom-background-100 px-2 py-1\">\n+            <Search className=\"h-3.5 w-3.5\" />\n+            <input\n+              className=\"w-full max-w-[234px] border-none bg-transparent text-sm focus:outline-none placeholder:text-custom-text-400\"\n+              placeholder=\"Search\"\n+              value={searchQuery}\n+              autoFocus\n+              onChange={(e) => setSearchQuery(e.target.value)}\n+            />\n+          </div>\n+          <MemberListFiltersDropdown\n+            appliedFilters={appliedRoleFilters}\n+            handleUpdate={handleRoleFilterUpdate}\n+            memberType=\"project\"\n           />\n+          {isAdmin && (\n+            <Button\n+              variant=\"primary\"\n+              size=\"sm\"\n+              onClick={() => {\n+                setInviteModal(true);\n+              }}\n+              data-ph-element={MEMBER_TRACKER_ELEMENTS.HEADER_ADD_BUTTON}\n+            >\n+              {t(\"add_member\")}\n+            </Button>\n+          )}\n         </div>\n-        {isAdmin && (\n-          <Button\n-            variant=\"primary\"\n-            size=\"sm\"\n-            onClick={() => {\n-              setInviteModal(true);\n-            }}\n-            data-ph-element={MEMBER_TRACKER_ELEMENTS.HEADER_ADD_BUTTON}\n-          >\n-            {t(\"add_member\")}\n-          </Button>\n-        )}\n       </div>\n       {!projectMemberIds ? (\n         <MembersSettingsLoader />\n       ) : (\n"
        },
        {
          "path": "apps/web/core/components/workspace/settings/members-list.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/workspace/settings/members-list.tsx\n===================================================================\n--- apps/web/core/components/workspace/settings/members-list.tsx\t85bffaa (parent)\n+++ apps/web/core/components/workspace/settings/members-list.tsx\t586a7a4 (commit)\n@@ -27,8 +27,9 @@\n     workspace: {\n       fetchWorkspaceMembers,\n       fetchWorkspaceMemberInvitations,\n       workspaceMemberIds,\n+      getFilteredWorkspaceMemberIds,\n       getSearchedWorkspaceMemberIds,\n       workspaceMemberInvitationIds,\n       getSearchedWorkspaceInvitationIds,\n       getWorkspaceMemberDetails,\n@@ -48,9 +49,10 @@\n \n   if (!workspaceMemberIds && !workspaceMemberInvitationIds) return <MembersSettingsLoader />;\n \n   // derived values\n-  const searchedMemberIds = getSearchedWorkspaceMemberIds(searchQuery);\n+  const filteredMemberIds = workspaceSlug ? getFilteredWorkspaceMemberIds(workspaceSlug.toString()) : [];\n+  const searchedMemberIds = searchQuery ? getSearchedWorkspaceMemberIds(searchQuery) : filteredMemberIds;\n   const searchedInvitationsIds = getSearchedWorkspaceInvitationIds(searchQuery);\n   const memberDetails = searchedMemberIds?.map((memberId) => getWorkspaceMemberDetails(memberId));\n \n   return (\n"
        },
        {
          "path": "apps/web/core/store/issue/root.store.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/store/issue/root.store.ts\n===================================================================\n--- apps/web/core/store/issue/root.store.ts\t85bffaa (parent)\n+++ apps/web/core/store/issue/root.store.ts\t586a7a4 (commit)\n@@ -28,9 +28,9 @@\n } from \"@/plane-web/store/issue/team-views\";\n // root store\n import { IWorkspaceIssues, WorkspaceIssues } from \"@/plane-web/store/issue/workspace/issue.store\";\n import type { RootStore } from \"@/plane-web/store/root.store\";\n-import { IWorkspaceMembership } from \"@/store/member/workspace-member.store\";\n+import { IWorkspaceMembership } from \"@/store/member/workspace/workspace-member.store\";\n // issues data store\n import { IArchivedIssuesFilter, ArchivedIssuesFilter, IArchivedIssues, ArchivedIssues } from \"./archived\";\n import { ICycleIssuesFilter, CycleIssuesFilter, ICycleIssues, CycleIssues } from \"./cycle\";\n import { IIssueStore, IssueStore } from \"./issue.store\";\n"
        },
        {
          "path": "apps/web/core/store/member/index.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/store/member/index.ts\n===================================================================\n--- apps/web/core/store/member/index.ts\t85bffaa (parent)\n+++ apps/web/core/store/member/index.ts\t586a7a4 (commit)\n@@ -5,9 +5,9 @@\n // plane web imports\n import { IProjectMemberStore, ProjectMemberStore } from \"@/plane-web/store/member/project-member.store\";\n import type { RootStore } from \"@/plane-web/store/root.store\";\n // local imports\n-import { IWorkspaceMemberStore, WorkspaceMemberStore } from \"./workspace-member.store\";\n+import { IWorkspaceMemberStore, WorkspaceMemberStore } from \"./workspace/workspace-member.store\";\n \n export interface IMemberRootStore {\n   // observables\n   memberMap: Record<string, IUserLite>;\n"
        },
        {
          "path": "apps/web/core/store/member/project/base-project-member.store.ts",
          "status": "renamed",
          "oldPath": "apps/web/core/store/member/base-project-member.store.ts",
          "diff": "===================================================================\n--- apps/web/core/store/member/base-project-member.store.ts\t85bffaa (parent)\n+++ apps/web/core/store/member/project/base-project-member.store.ts\t586a7a4 (commit)\n@@ -12,13 +12,15 @@\n import type { RootStore } from \"@/plane-web/store/root.store\";\n // services\n import { ProjectMemberService } from \"@/services/project\";\n // store\n+import { IProjectStore } from \"@/store/project/project.store\";\n import { IRouterStore } from \"@/store/router.store\";\n import { IUserStore } from \"@/store/user\";\n // local imports\n-import { IProjectStore } from \"../project/project.store\";\n-import { IMemberRootStore } from \".\";\n+import { IMemberRootStore } from \"../index\";\n+import { sortProjectMembers } from \"../utils\";\n+import { ProjectMemberFiltersStore, IProjectMemberFiltersStore } from \"./project-member-filters.store\";\n \n export interface IProjectMemberDetails extends Omit<TProjectMembership, \"member\"> {\n   member: IUserLite;\n }\n@@ -30,14 +32,17 @@\n   };\n   projectMemberMap: {\n     [projectId: string]: Record<string, TProjectMembership>;\n   };\n+  // filters store\n+  filters: IProjectMemberFiltersStore;\n   // computed\n   projectMemberIds: string[] | null;\n   // computed actions\n   getProjectMemberFetchStatus: (projectId: string) => boolean;\n   getProjectMemberDetails: (userId: string, projectId: string) => IProjectMemberDetails | null;\n   getProjectMemberIds: (projectId: string, includeGuestUsers: boolean) => string[] | null;\n+  getFilteredProjectMemberDetails: (userId: string, projectId: string) => IProjectMemberDetails | null;\n   // fetch actions\n   fetchProjectMembers: (\n     workspaceSlug: string,\n     projectId: string,\n@@ -66,8 +71,10 @@\n   } = {};\n   projectMemberMap: {\n     [projectId: string]: Record<string, TProjectMembership>;\n   } = {};\n+  // filters store\n+  filters: IProjectMemberFiltersStore;\n   // stores\n   routerStore: IRouterStore;\n   userStore: IUserStore;\n   memberRoot: IMemberRootStore;\n@@ -87,33 +94,42 @@\n       bulkAddMembersToProject: action,\n       updateMemberRole: action,\n       removeMemberFromProject: action,\n     });\n-\n     // root store\n     this.rootStore = _rootStore;\n     this.routerStore = _rootStore.router;\n     this.userStore = _rootStore.user;\n     this.memberRoot = _memberRoot;\n     this.projectRoot = _rootStore.projectRoot.project;\n+    this.filters = new ProjectMemberFiltersStore();\n     // services\n     this.projectMemberService = new ProjectMemberService();\n   }\n \n   /**\n    * @description get the list of all the user ids of all the members of the current project\n+   * Returns filtered and sorted member IDs based on current filters\n    */\n   get projectMemberIds() {\n     const projectId = this.routerStore.projectId;\n     if (!projectId) return null;\n-    let members = Object.values(this.projectMemberMap?.[projectId] ?? {});\n+\n+    const members = Object.values(this.projectMemberMap?.[projectId] ?? {});\n     if (members.length === 0) return null;\n-    members = sortBy(members, [\n-      (m) => m.member !== this.userStore.data?.id,\n-      (m) => this.memberRoot.memberMap?.[m.member]?.display_name.toLowerCase(),\n-    ]);\n-    const memberIds = members.map((m) => m.member);\n-    return memberIds;\n+\n+    // Access the filters directly to ensure MobX tracking\n+    const currentFilters = this.filters.filtersMap[projectId];\n+\n+    // Apply filters and sorting directly here to ensure MobX tracking\n+    const sortedMembers = sortProjectMembers(\n+      members,\n+      this.memberRoot?.memberMap || {},\n+      (member) => member.member,\n+      currentFilters\n+    );\n+\n+    return sortedMembers.map((member) => member.member);\n   }\n \n   /**\n    * @description get the fetch status of a project member\n@@ -202,8 +218,43 @@\n     return memberIds;\n   });\n \n   /**\n+   * @description get the filtered project member details for a specific user\n+   * @param userId\n+   * @param projectId\n+   */\n+  getFilteredProjectMemberDetails = computedFn((userId: string, projectId: string) => {\n+    const projectMember = this.getProjectMembershipByUserId(userId, projectId);\n+    const userDetails = this.memberRoot?.memberMap?.[projectMember?.member];\n+    if (!projectMember || !userDetails) return null;\n+\n+    // Check if this member passes the current filters\n+    const allMembers = this.getProjectMemberships(projectId);\n+    const filteredMemberIds = this.filters.getFilteredMemberIds(\n+      allMembers,\n+      this.memberRoot?.memberMap || {},\n+      (member) => member.member,\n+      projectId\n+    );\n+\n+    // Return null if this user doesn't pass the filters\n+    if (!filteredMemberIds.includes(userId)) return null;\n+\n+    const memberDetails: IProjectMemberDetails = {\n+      id: projectMember.id,\n+      role: projectMember.role,\n+      original_role: projectMember.original_role,\n+      member: {\n+        ...userDetails,\n+        joining_date: projectMember.created_at ?? undefined,\n+      },\n+      created_at: projectMember.created_at,\n+    };\n+    return memberDetails;\n+  });\n+\n+  /**\n    * @description fetch the list of all the members of a project\n    * @param workspaceSlug\n    * @param projectId\n    */\n"
        },
        {
          "path": "apps/web/core/store/member/project/project-member-filters.store.ts",
          "status": "added",
          "diff": "Index: apps/web/core/store/member/project/project-member-filters.store.ts\n===================================================================\n--- apps/web/core/store/member/project/project-member-filters.store.ts\t85bffaa (parent)\n+++ apps/web/core/store/member/project/project-member-filters.store.ts\t586a7a4 (commit)\n@@ -0,0 +1,70 @@\n+import { action, makeObservable, observable } from \"mobx\";\n+import { computedFn } from \"mobx-utils\";\n+// types\n+import type { IUserLite, TProjectMembership } from \"@plane/types\";\n+// local imports\n+import { IMemberFilters, sortProjectMembers } from \"../utils\";\n+\n+export interface IProjectMemberFiltersStore {\n+  // observables\n+  filtersMap: Record<string, IMemberFilters>;\n+  // computed actions\n+  getFilteredMemberIds: (\n+    members: TProjectMembership[],\n+    memberDetailsMap: Record<string, IUserLite>,\n+    getMemberKey: (member: TProjectMembership) => string,\n+    projectId: string\n+  ) => string[];\n+  // actions\n+  updateFilters: (projectId: string, filters: Partial<IMemberFilters>) => void;\n+  getFilters: (projectId: string) => IMemberFilters | undefined;\n+}\n+\n+export class ProjectMemberFiltersStore implements IProjectMemberFiltersStore {\n+  // observables\n+  filtersMap: Record<string, IMemberFilters> = {};\n+\n+  constructor() {\n+    makeObservable(this, {\n+      // observables\n+      filtersMap: observable,\n+      // actions\n+      updateFilters: action,\n+    });\n+  }\n+\n+  /**\n+   * @description get filtered and sorted member ids\n+   * @param members - array of project membership objects\n+   * @param memberDetailsMap - map of member details by user id\n+   * @param getMemberKey - function to get member key from membership object\n+   * @param projectId - project id to get filters for\n+   */\n+  getFilteredMemberIds = computedFn(\n+    (\n+      members: TProjectMembership[],\n+      memberDetailsMap: Record<string, IUserLite>,\n+      getMemberKey: (member: TProjectMembership) => string,\n+      projectId: string\n+    ): string[] => {\n+      if (!members || members.length === 0) return [];\n+\n+      // Apply filters and sorting\n+      const sortedMembers = sortProjectMembers(members, memberDetailsMap, getMemberKey, this.filtersMap[projectId]);\n+\n+      return sortedMembers.map(getMemberKey);\n+    }\n+  );\n+\n+  getFilters = (projectId: string) => this.filtersMap[projectId];\n+\n+  /**\n+   * @description update filters\n+   * @param projectId - project id\n+   * @param filters - partial filters to update\n+   */\n+  updateFilters = (projectId: string, filters: Partial<IMemberFilters>) => {\n+    const current = this.filtersMap[projectId] ?? {};\n+    this.filtersMap[projectId] = { ...current, ...filters };\n+  };\n+}\n"
        },
        {
          "path": "apps/web/core/store/member/utils.ts",
          "status": "added",
          "diff": "Index: apps/web/core/store/member/utils.ts\n===================================================================\n--- apps/web/core/store/member/utils.ts\t85bffaa (parent)\n+++ apps/web/core/store/member/utils.ts\t586a7a4 (commit)\n@@ -0,0 +1,163 @@\n+// Types and utilities for member filtering\n+import type { EUserPermissions, TMemberOrderByOptions } from \"@plane/constants\";\n+import type { IUserLite, TProjectMembership } from \"@plane/types\";\n+\n+export interface IMemberFilters {\n+  order_by?: TMemberOrderByOptions;\n+  roles?: string[];\n+}\n+\n+// Helper function to parse order key and direction\n+export const parseOrderKey = (orderKey?: TMemberOrderByOptions): { field: string; direction: \"asc\" | \"desc\" } => {\n+  // Default to sorting by display_name in ascending order when no order key is provided\n+  if (!orderKey) {\n+    return {\n+      field: \"display_name\",\n+      direction: \"asc\",\n+    };\n+  }\n+\n+  const isDescending = orderKey.startsWith(\"-\");\n+  const field = isDescending ? orderKey.slice(1) : orderKey;\n+  return {\n+    field,\n+    direction: isDescending ? \"desc\" : \"asc\",\n+  };\n+};\n+\n+// Unified function to get sort key for any member type\n+export const getMemberSortKey = (memberDetails: IUserLite, field: string, memberRole?: string): string | Date => {\n+  switch (field) {\n+    case \"display_name\":\n+      return memberDetails.display_name?.toLowerCase() || \"\";\n+    case \"full_name\": {\n+      const firstName = memberDetails.first_name || \"\";\n+      const lastName = memberDetails.last_name || \"\";\n+      return `${firstName} ${lastName}`.toLowerCase().trim();\n+    }\n+    case \"email\":\n+      return memberDetails.email?.toLowerCase() || \"\";\n+    case \"joining_date\":\n+      return memberDetails.joining_date ? new Date(memberDetails.joining_date) : new Date(NaN);\n+    case \"role\":\n+      return (memberRole ?? \"\").toString().toLowerCase();\n+    default:\n+      return \"\";\n+  }\n+};\n+\n+// Filter functions\n+export const filterProjectMembersByRole = (\n+  members: TProjectMembership[],\n+  roleFilters: string[]\n+): TProjectMembership[] => {\n+  if (roleFilters.length === 0) return members;\n+\n+  return members.filter((member) => {\n+    const memberRole = String(member.role ?? member.original_role ?? \"\");\n+    return roleFilters.includes(memberRole);\n+  });\n+};\n+\n+export const filterWorkspaceMembersByRole = <T extends { role: string | EUserPermissions }>(\n+  members: T[],\n+  roleFilters: string[]\n+): T[] => {\n+  if (roleFilters.length === 0) return members;\n+\n+  return members.filter((member) => {\n+    const memberRole = String(member.role ?? \"\");\n+    return roleFilters.includes(memberRole);\n+  });\n+};\n+\n+// Unified sorting function\n+export const sortMembers = <T>(\n+  members: T[],\n+  memberDetailsMap: Record<string, IUserLite>,\n+  getMemberKey: (member: T) => string,\n+  getMemberRole: (member: T) => string,\n+  orderBy?: TMemberOrderByOptions\n+): T[] => {\n+  if (!orderBy) return members;\n+\n+  const { field, direction } = parseOrderKey(orderBy);\n+\n+  return [...members].sort((a, b) => {\n+    const aKey = getMemberKey(a);\n+    const bKey = getMemberKey(b);\n+    const aMemberDetails = memberDetailsMap[aKey];\n+    const bMemberDetails = memberDetailsMap[bKey];\n+\n+    if (!aMemberDetails || !bMemberDetails) return 0;\n+\n+    const aRole = getMemberRole(a);\n+    const bRole = getMemberRole(b);\n+\n+    const aValue = getMemberSortKey(aMemberDetails, field, aRole);\n+    const bValue = getMemberSortKey(bMemberDetails, field, bRole);\n+\n+    let comparison = 0;\n+\n+    if (field === \"joining_date\") {\n+      // For dates, we need to handle Date objects\n+      const aDate = aValue instanceof Date ? aValue : new Date(aValue);\n+      const bDate = bValue instanceof Date ? bValue : new Date(bValue);\n+      comparison = aDate.getTime() - bDate.getTime();\n+    } else {\n+      // For strings, use localeCompare for proper alphabetical sorting\n+      const aStr = String(aValue);\n+      const bStr = String(bValue);\n+      comparison = aStr.localeCompare(bStr);\n+    }\n+\n+    return direction === \"desc\" ? -comparison : comparison;\n+  });\n+};\n+\n+// Specific implementations using the unified functions\n+export const sortProjectMembers = (\n+  members: TProjectMembership[],\n+  memberDetailsMap: Record<string, IUserLite>,\n+  getMemberKey: (member: TProjectMembership) => string,\n+  filters?: IMemberFilters\n+): TProjectMembership[] => {\n+  // Apply role filtering first\n+  const filteredMembers =\n+    filters?.roles && filters.roles.length > 0 ? filterProjectMembersByRole(members, filters.roles) : members;\n+\n+  // If no order_by filter, return filtered members\n+  if (!filters?.order_by) return filteredMembers;\n+\n+  // Apply sorting\n+  return sortMembers(\n+    filteredMembers,\n+    memberDetailsMap,\n+    getMemberKey,\n+    (member) => String(member.role ?? member.original_role ?? \"\"),\n+    filters.order_by\n+  );\n+};\n+\n+export const sortWorkspaceMembers = <T extends { role: string | EUserPermissions }>(\n+  members: T[],\n+  memberDetailsMap: Record<string, IUserLite>,\n+  getMemberKey: (member: T) => string,\n+  filters?: IMemberFilters\n+): T[] => {\n+  // Apply role filtering first\n+  const filteredMembers =\n+    filters?.roles && filters.roles.length > 0 ? filterWorkspaceMembersByRole(members, filters.roles) : members;\n+\n+  // If no order_by filter, return filtered members\n+  if (!filters?.order_by) return filteredMembers;\n+\n+  // Apply sorting\n+  return sortMembers(\n+    filteredMembers,\n+    memberDetailsMap,\n+    getMemberKey,\n+    (member) => String(member.role ?? \"\"),\n+    filters.order_by\n+  );\n+};\n"
        },
        {
          "path": "apps/web/core/store/member/workspace/workspace-member-filters.store.ts",
          "status": "added",
          "diff": "Index: apps/web/core/store/member/workspace/workspace-member-filters.store.ts\n===================================================================\n--- apps/web/core/store/member/workspace/workspace-member-filters.store.ts\t85bffaa (parent)\n+++ apps/web/core/store/member/workspace/workspace-member-filters.store.ts\t586a7a4 (commit)\n@@ -0,0 +1,71 @@\n+import { action, makeObservable, observable } from \"mobx\";\n+import { computedFn } from \"mobx-utils\";\n+// types\n+import type { EUserPermissions } from \"@plane/constants\";\n+import type { IUserLite } from \"@plane/types\";\n+// local imports\n+import { IMemberFilters, sortWorkspaceMembers } from \"../utils\";\n+\n+// Workspace membership interface matching the store structure\n+interface IWorkspaceMembership {\n+  id: string;\n+  member: string;\n+  role: EUserPermissions;\n+  is_active?: boolean;\n+}\n+\n+export interface IWorkspaceMemberFiltersStore {\n+  // observables\n+  filters: IMemberFilters;\n+  // computed actions\n+  getFilteredMemberIds: (\n+    members: IWorkspaceMembership[],\n+    memberDetailsMap: Record<string, IUserLite>,\n+    getMemberKey: (member: IWorkspaceMembership) => string\n+  ) => string[];\n+  // actions\n+  updateFilters: (filters: Partial<IMemberFilters>) => void;\n+}\n+\n+export class WorkspaceMemberFiltersStore implements IWorkspaceMemberFiltersStore {\n+  // observables\n+  filters: IMemberFilters = {};\n+\n+  constructor() {\n+    makeObservable(this, {\n+      // observables\n+      filters: observable,\n+      // actions\n+      updateFilters: action,\n+    });\n+  }\n+\n+  /**\n+   * @description get filtered and sorted member ids\n+   * @param members - array of workspace membership objects\n+   * @param memberDetailsMap - map of member details by user id\n+   * @param getMemberKey - function to get member key from membership object\n+   */\n+  getFilteredMemberIds = computedFn(\n+    (\n+      members: IWorkspaceMembership[],\n+      memberDetailsMap: Record<string, IUserLite>,\n+      getMemberKey: (member: IWorkspaceMembership) => string\n+    ): string[] => {\n+      if (!members || members.length === 0) return [];\n+\n+      // Apply filters and sorting\n+      const sortedMembers = sortWorkspaceMembers(members, memberDetailsMap, getMemberKey, this.filters);\n+\n+      return sortedMembers.map(getMemberKey);\n+    }\n+  );\n+\n+  /**\n+   * @description update filters\n+   * @param filters - partial filters to update\n+   */\n+  updateFilters = (filters: Partial<IMemberFilters>) => {\n+    this.filters = { ...this.filters, ...filters };\n+  };\n+}\n"
        },
        {
          "path": "apps/web/core/store/member/workspace/workspace-member.store.ts",
          "status": "renamed",
          "oldPath": "apps/web/core/store/member/workspace-member.store.ts",
          "diff": "===================================================================\n--- apps/web/core/store/member/workspace-member.store.ts\t85bffaa (parent)\n+++ apps/web/core/store/member/workspace/workspace-member.store.ts\t586a7a4 (commit)\n@@ -11,10 +11,11 @@\n // types\n import type { IRouterStore } from \"@/store/router.store\";\n import type { IUserStore } from \"@/store/user\";\n // store\n-import type { CoreRootStore } from \"../root.store\";\n-import type { IMemberRootStore } from \".\";\n+import type { CoreRootStore } from \"../../root.store\";\n+import type { IMemberRootStore } from \"../index.ts\";\n+import { WorkspaceMemberFiltersStore, IWorkspaceMemberFiltersStore } from \"./workspace-member-filters.store\";\n \n export interface IWorkspaceMembership {\n   id: string;\n   member: string;\n@@ -25,14 +26,17 @@\n export interface IWorkspaceMemberStore {\n   // observables\n   workspaceMemberMap: Record<string, Record<string, IWorkspaceMembership>>;\n   workspaceMemberInvitations: Record<string, IWorkspaceMemberInvitation[]>;\n+  // filters store\n+  filtersStore: IWorkspaceMemberFiltersStore;\n   // computed\n   workspaceMemberIds: string[] | null;\n   workspaceMemberInvitationIds: string[] | null;\n   memberMap: Record<string, IWorkspaceMembership> | null;\n   // computed actions\n   getWorkspaceMemberIds: (workspaceSlug: string) => string[];\n+  getFilteredWorkspaceMemberIds: (workspaceSlug: string) => string[];\n   getSearchedWorkspaceMemberIds: (searchQuery: string) => string[] | null;\n   getSearchedWorkspaceInvitationIds: (searchQuery: string) => string[] | null;\n   getWorkspaceMemberDetails: (workspaceMemberId: string) => IWorkspaceMember | null;\n   getWorkspaceInvitationDetails: (invitationId: string) => IWorkspaceMemberInvitation | null;\n@@ -57,8 +61,10 @@\n   workspaceMemberMap: {\n     [workspaceSlug: string]: Record<string, IWorkspaceMembership>;\n   } = {}; // { workspaceSlug: { userId: userDetails } }\n   workspaceMemberInvitations: Record<string, IWorkspaceMemberInvitation[]> = {}; // { workspaceSlug: [invitations] }\n+  // filters store\n+  filtersStore: IWorkspaceMemberFiltersStore;\n   // stores\n   routerStore: IRouterStore;\n   userStore: IUserStore;\n   memberRoot: IMemberRootStore;\n@@ -81,9 +87,10 @@\n       fetchWorkspaceMemberInvitations: action,\n       updateMemberInvitation: action,\n       deleteMemberInvitation: action,\n     });\n-\n+    // initialize filters store\n+    this.filtersStore = new WorkspaceMemberFiltersStore();\n     // root store\n     this.routerStore = _rootStore.router;\n     this.userStore = _rootStore.user;\n     this.memberRoot = _memberRoot;\n@@ -126,17 +133,36 @@\n     return memberIds;\n   });\n \n   /**\n+   * @description get the filtered and sorted list of all the user ids of all the members of the workspace\n+   * @param workspaceSlug\n+   */\n+  getFilteredWorkspaceMemberIds = computedFn((workspaceSlug: string) => {\n+    let members = Object.values(this.workspaceMemberMap?.[workspaceSlug] ?? {});\n+    //filter out bots and inactive members\n+    members = members.filter((m) => m.is_active && !this.memberRoot?.memberMap?.[m.member]?.is_bot);\n+\n+    // Use filters store to get filtered member ids\n+    const memberIds = this.filtersStore.getFilteredMemberIds(\n+      members,\n+      this.memberRoot?.memberMap || {},\n+      (member) => member.member\n+    );\n+\n+    return memberIds;\n+  });\n+\n+  /**\n    * @description get the list of all the user ids that match the search query of all the members of the current workspace\n    * @param searchQuery\n    */\n   getSearchedWorkspaceMemberIds = computedFn((searchQuery: string) => {\n     const workspaceSlug = this.routerStore.workspaceSlug;\n     if (!workspaceSlug) return null;\n-    const workspaceMemberIds = this.workspaceMemberIds;\n-    if (!workspaceMemberIds) return null;\n-    const searchedWorkspaceMemberIds = workspaceMemberIds?.filter((userId) => {\n+    const filteredMemberIds = this.getFilteredWorkspaceMemberIds(workspaceSlug);\n+    if (!filteredMemberIds) return null;\n+    const searchedWorkspaceMemberIds = filteredMemberIds.filter((userId) => {\n       const memberDetails = this.getWorkspaceMemberDetails(userId);\n       if (!memberDetails) return false;\n       const memberSearchQuery = `${memberDetails.member.first_name} ${memberDetails.member.last_name} ${\n         memberDetails.member?.display_name\n"
        },
        {
          "path": "packages/constants/src/index.ts",
          "status": "modified",
          "diff": "Index: packages/constants/src/index.ts\n===================================================================\n--- packages/constants/src/index.ts\t85bffaa (parent)\n+++ packages/constants/src/index.ts\t586a7a4 (commit)\n@@ -14,8 +14,9 @@\n export * from \"./icon\";\n export * from \"./instance\";\n export * from \"./intake\";\n export * from \"./issue\";\n+export * from \"./members\";\n export * from \"./label\";\n export * from \"./metadata\";\n export * from \"./module\";\n export * from \"./notification\";\n"
        },
        {
          "path": "packages/constants/src/members.ts",
          "status": "added",
          "diff": "Index: packages/constants/src/members.ts\n===================================================================\n--- packages/constants/src/members.ts\t85bffaa (parent)\n+++ packages/constants/src/members.ts\t586a7a4 (commit)\n@@ -0,0 +1,79 @@\n+// Member property constants - Single source of truth for member spreadsheet properties\n+\n+export type TMemberOrderByOptions =\n+  | \"display_name\"\n+  | \"-display_name\"\n+  | \"full_name\"\n+  | \"-full_name\"\n+  | \"email\"\n+  | \"-email\"\n+  | \"joining_date\"\n+  | \"-joining_date\"\n+  | \"role\"\n+  | \"-role\";\n+\n+export interface IProjectMemberDisplayProperties {\n+  full_name: boolean;\n+  display_name: boolean;\n+  email: boolean;\n+  joining_date: boolean;\n+  role: boolean;\n+}\n+\n+export const MEMBER_PROPERTY_DETAILS: {\n+  [key in keyof IProjectMemberDisplayProperties]: {\n+    i18n_title: string;\n+    ascendingOrderKey: TMemberOrderByOptions;\n+    ascendingOrderTitle: string;\n+    descendingOrderKey: TMemberOrderByOptions;\n+    descendingOrderTitle: string;\n+    iconName: string;\n+    isSortingAllowed: boolean;\n+  };\n+} = {\n+  full_name: {\n+    i18n_title: \"project_members.full_name\",\n+    ascendingOrderKey: \"full_name\",\n+    ascendingOrderTitle: \"A\",\n+    descendingOrderKey: \"-full_name\",\n+    descendingOrderTitle: \"Z\",\n+    iconName: \"User\",\n+    isSortingAllowed: true,\n+  },\n+  display_name: {\n+    i18n_title: \"project_members.display_name\",\n+    ascendingOrderKey: \"display_name\",\n+    ascendingOrderTitle: \"A\",\n+    descendingOrderKey: \"-display_name\",\n+    descendingOrderTitle: \"Z\",\n+    iconName: \"User\",\n+    isSortingAllowed: true,\n+  },\n+  email: {\n+    i18n_title: \"project_members.email\",\n+    ascendingOrderKey: \"email\",\n+    ascendingOrderTitle: \"A\",\n+    descendingOrderKey: \"-email\",\n+    descendingOrderTitle: \"Z\",\n+    iconName: \"Mail\",\n+    isSortingAllowed: true,\n+  },\n+  joining_date: {\n+    i18n_title: \"project_members.joining_date\",\n+    ascendingOrderKey: \"joining_date\",\n+    ascendingOrderTitle: \"Old\",\n+    descendingOrderKey: \"-joining_date\",\n+    descendingOrderTitle: \"New\",\n+    iconName: \"Calendar\",\n+    isSortingAllowed: true,\n+  },\n+  role: {\n+    i18n_title: \"project_members.role\",\n+    ascendingOrderKey: \"role\",\n+    ascendingOrderTitle: \"Guest\",\n+    descendingOrderKey: \"-role\",\n+    descendingOrderTitle: \"Admin\",\n+    iconName: \"Shield\",\n+    isSortingAllowed: true,\n+  },\n+};\n"
        },
        {
          "path": "packages/i18n/src/locales/en/translations.json",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/en/translations.json\n===================================================================\n--- packages/i18n/src/locales/en/translations.json\t85bffaa (parent)\n+++ packages/i18n/src/locales/en/translations.json\t586a7a4 (commit)\n@@ -2404,6 +2404,13 @@\n     },\n     \"open_button\": \"Open navigation pane\",\n     \"close_button\": \"Close navigation pane\",\n     \"outline_floating_button\": \"Open outline\"\n+  },\n+  \"project_members\": {\n+    \"full_name\": \"Full name\",\n+    \"display_name\": \"Display name\",\n+    \"email\": \"Email\",\n+    \"joining_date\": \"Joining date\",\n+    \"role\": \"Role\"\n   }\n }\n"
        }
      ]
    },
    {
      "id": "add-subwork-sorting",
      "sha": "14dc6a56bcdc65fc3c8179f991d61c2c8784484f",
      "parentSha": "55340f9f480b04c41077623ca3cf0efb2fc5572b",
      "spec": "Implement sub-work items sorting and display property toggles across backend and frontend.\n\nBackend (Django, sub-issues endpoint):\n- Endpoint: apiserver/plane/app/views/issue/sub_issue.py\n  - Accept two new query params: order_by (default \"-created_at\") and group_by (optional). order_by must be applied using plane.utils.order_queryset.order_issue_queryset, returning an ordered queryset and the resolved ordering field. group_by, when present, must return the sub_issues field as a mapping of group keys to arrays of issues instead of a flat array.\n  - Special-case grouping for assignees__ids: if an issue has multiple assignees, include the issue under each assignee_id; if assignee_ids is an empty array, use the \"None\" key.\n  - Preserve the existing state_distribution behavior. When group_by is not provided, return the original flat array under sub_issues.\n\n- Utility: apiserver/plane/utils/order_queryset.py\n  - Ensure order_issue_queryset(issue_queryset, order_by_param) supports ordering by created_at, updated_at, start_date, priority, and any annotated priority/state fields, consistent with usage in other issue endpoints.\n\nConstants and Types:\n- Constants: packages/constants/src/issue/common.ts\n  - Add SUB_ISSUES_DISPLAY_PROPERTIES_KEYS: [\"key\", \"assignee\", \"start_date\", \"due_date\", \"priority\", \"state\"].\n\n- Filters: packages/constants/src/issue/filter.ts\n  - Add a new page key sub_work_items with list layout:\n    - display_properties uses SUB_ISSUES_DISPLAY_PROPERTIES_KEYS.\n    - filters: [] (none).\n    - display_filters: include order_by options [\"-created_at\", \"-updated_at\", \"start_date\", \"-priority\"].\n    - extra_options: { access: true, values: [\"sub_issue\"] }.\n\n- Types: packages/types/src/issues/issue_sub_issues.d.ts\n  - Change TIssueSubIssues.sub_issues to a union type TSubIssueResponse = TIssue[] | { [key: string]: TIssue[] } to support grouped responses.\n  - Introduce TSubIssueOperations describing sub-issue operations used by the UI (copyLink, fetchSubIssues, addSubIssue, updateSubIssue, removeSubIssue, deleteSubIssue).\n\nUI/Icons:\n- Create and export a DisplayProperties icon:\n  - packages/ui/src/icons/display-properties.tsx with a 12x12 SVG matching the style of existing icons.\n  - Re-export from packages/ui/src/icons/index.ts as DisplayPropertiesIcon.\n\nWeb service and utilities:\n- Service: web/core/services/issue/issue.service.ts\n  - Modify subIssues(workspaceSlug, projectId, issueId, queries?) to accept query params and send them via params in the GET request.\n\n- Clipboard utility usage:\n  - Replace custom URL-building clipboard methods with copyUrlToClipboard from @plane/utils, and rename operation methods to copyLink(path) where used by relations and sub-issues helpers.\n\nIssue detail widget  sub-issues UI refactor:\n- Replace old sub-issues components (under web/core/components/issues/sub-issues/) with new modular components under web/core/components/issues/issue-detail-widgets/sub-issues/:\n  - issues-list/root.tsx: Render a list of sub-issue IDs for a parent and map to item renderers.\n  - issues-list/list-item.tsx: Render each sub-issue row, including conditionally visible key (identifier), name, menu actions, and a properties section.\n  - issues-list/properties.tsx: Provide StateDropdown, PriorityDropdown, MemberDropdown, DateDropdown (start_date, due_date), gated by WithDisplayPropertiesHOC per property key.\n  - display-filters.tsx: SubIssueDisplayFilters component wrapping FilterDisplayProperties and FilterOrderBy, in a FiltersDropdown with DisplayPropertiesIcon as the trigger.\n  - title-actions.tsx: SubWorkItemTitleActions component that reads/updates per-parent displayProperties and displayFilters in the sub-issue filter store; trigger a refetch on display_filters updates.\n  - title.tsx: Replace action area with SubWorkItemTitleActions; pass workspaceSlug and projectId to enable updates.\n  - content.tsx: Use SubIssuesListRoot (instead of the old IssueList); keep CRUD modal logic and visibility toggling; memoize handlers with useCallback.\n\nMobX store  sub-issues filtering and grouping:\n- Extend sub-issues store: web/core/store/issue/issue-details/sub_issues.store.ts\n  - Add observables: groupedSubIssuesMap (Record<string, TGroupedIssues>), groupedSubIssuesCount (Record<string, number>), loader (TLoader), and filters (instance of WorkItemSubIssueFiltersStore).\n  - Add groupedSubIssuesByIssueId(issueId) getter to expose grouped results for the parent.\n  - Update fetchSubIssues to:\n    - Compute query params from filters.computedFilterParams(parentIssueId) (order_by and optional group_by mapping).\n    - Call IssueService.subIssues with params.\n    - Process response via filters.processSubIssueResponse to obtain issueList and groupedIssues.\n    - Update groupedSubIssuesMap[parentIssueId] with groupedIssues and update issues and sub_issues_count safely.\n\n- Create sub-issue filter store: web/core/store/issue/issue-details/sub_issues_filter.store.ts\n  - Maintain subIssueFiltersMap keyed by parentId with structure Partial<IIssueFilters>.\n  - Initialize defaults: displayProperties enabling key, issue_type, assignee, start_date, due_date, labels, priority, state; displayFilters empty.\n  - Provide getSubIssueFilters(parentId) to return current filters, initializing if needed.\n  - Provide computedFilterParams(parentId) to convert displayFilters to request params (stringify order_by, map group_by using EIssueGroupByToServerOptions).\n  - Provide processSubIssueResponse(response) to output a flat issue list and grouped mapping:\n    - If response is an array, create a single ALL_ISSUES group with all issue IDs and counts.\n    - If response is an object, flatten its values to issueList and create group-to-IDs mapping with counts and total under ALL_ISSUES.\n  - Provide updateSubIssueFilters(workspaceSlug, projectId, filterType, filters, parentId): merge and, for display_filters, refetch sub-issues; for display_properties, update in-place without refetch.\n\nInteraction expectations:\n- In issue detail sub-work items:\n  - Display menu toggles visibility of key, assignee, start date, due date, priority, and state properties.\n  - Changing order_by triggers a refetch and updates the rendered order accordingly.\n  - If grouping is later added to the UI, the backend can return grouped sub_issues and the store must handle both shapes.\n  - Copy link actions use shared copyUrlToClipboard.\n\nReplacement and cleanup:\n- Remove references to legacy components under web/core/components/issues/sub-issues/ (index.ts, issues-list.tsx, progressbar.tsx, properties.tsx, root.tsx) and update imports to the new issue-detail-widgets/sub-issues/ equivalents.",
      "prompt": "Add sorting and display property controls to the sub-work items section of an issue detail view.\n\nRequirements:\n- Accept order_by and optional group_by on the sub-work items API and apply ordering. When group_by is present, return grouped results keyed by the selected grouping while keeping state distribution.\n- Update the UI to include a Display menu for sub-work items where users can toggle visible properties (key, assignee, start date, due date, priority, state) and choose a sort order. Reflect choices in the rendered list and API requests.\n- Update the data model and client logic to handle both flat and grouped responses for sub-work items. Implement a filter store that computes query params from UI state and processes the API response to normalize data for rendering.\n- Refactor sub-work items into modular list, item, and properties components that respect the current display properties. Ensure link copying uses a shared utility.\n- Ensure the sub-issues service method accepts query params and that the store refetches when sorting (and future grouping) changes.\n\nDeliverables:\n- Backend endpoint update for ordering/grouping and appropriate response shapes.\n- Frontend constants and types updates for sub-work item display properties and grouped responses.\n- UI components for sub-work item filter and display controls, integrated into the issue detail widget.\n- Store changes to compute query params, fetch with them, and normalize responses.\n- Removal of old sub-work items components in favor of the new structure.",
      "supplementalFiles": [
        "apiserver/plane/utils/order_queryset.py",
        "apiserver/plane/app/views/issue/base.py",
        "packages/constants/src/issue/index.ts",
        "packages/constants/src/index.ts",
        "packages/utils/src/string.ts",
        "packages/types/src/view-props.d.ts",
        "packages/types/src/issues/base.d.ts",
        "web/core/components/issues/issue-layouts/filters/header/display-filters/display-properties.tsx",
        "web/core/components/issues/issue-layouts/filters/header/display-filters/order-by.tsx",
        "web/core/components/issues/issue-layouts/filters/header/helpers/dropdown.tsx",
        "web/core/components/issues/issue-layouts/properties/with-display-properties-HOC.tsx",
        "web/core/store/issue/issue-details/root.store.ts",
        "web/core/store/issue/root.store.ts"
      ],
      "fileDiffs": [
        {
          "path": "apiserver/plane/app/views/issue/sub_issue.py",
          "status": "modified",
          "diff": "Index: apiserver/plane/app/views/issue/sub_issue.py\n===================================================================\n--- apiserver/plane/app/views/issue/sub_issue.py\t55340f9 (parent)\n+++ apiserver/plane/app/views/issue/sub_issue.py\t14dc6a5 (commit)\n@@ -22,8 +22,9 @@\n from plane.bgtasks.issue_activities_task import issue_activity\n from plane.utils.timezone_converter import user_timezone_converter\n from collections import defaultdict\n from plane.utils.host import base_host\n+from plane.utils.order_queryset import order_issue_queryset\n \n class SubIssuesEndpoint(BaseAPIView):\n     permission_classes = [ProjectEntityPermission]\n \n@@ -101,8 +102,17 @@\n             .annotate(state_group=F(\"state__group\"))\n             .order_by(\"-created_at\")\n         )\n \n+        # Ordering\n+        order_by_param = request.GET.get(\"order_by\", \"-created_at\")\n+        group_by = request.GET.get(\"group_by\", False)\n+\n+        if order_by_param:\n+            sub_issues, order_by_param = order_issue_queryset(\n+                sub_issues, order_by_param\n+            )\n+\n         # create's a dict with state group name with their respective issue id's\n         result = defaultdict(list)\n         for sub_issue in sub_issues:\n             result[sub_issue.state_group].append(str(sub_issue.id))\n@@ -137,8 +147,28 @@\n         datetime_fields = [\"created_at\", \"updated_at\"]\n         sub_issues = user_timezone_converter(\n             sub_issues, datetime_fields, request.user.user_timezone\n         )\n+        # Grouping\n+        if group_by:\n+            result_dict = defaultdict(list)\n+\n+            for issue in sub_issues:\n+                if group_by == \"assignees__ids\":\n+                    if issue[\"assignee_ids\"]:\n+                        assignee_ids = issue[\"assignee_ids\"]\n+                        for assignee_id in assignee_ids:\n+                            result_dict[str(assignee_id)].append(issue)\n+                    elif issue[\"assignee_ids\"] == []:\n+                        result_dict[\"None\"].append(issue)\n+\n+                elif group_by:\n+                    result_dict[str(issue[group_by])].append(issue)\n+\n+            return Response(\n+                {\"sub_issues\": result_dict, \"state_distribution\": result},\n+                status=status.HTTP_200_OK,\n+            )\n         return Response(\n             {\"sub_issues\": sub_issues, \"state_distribution\": result},\n             status=status.HTTP_200_OK,\n         )\n"
        },
        {
          "path": "packages/constants/src/issue/common.ts",
          "status": "modified",
          "diff": "Index: packages/constants/src/issue/common.ts\n===================================================================\n--- packages/constants/src/issue/common.ts\t55340f9 (parent)\n+++ packages/constants/src/issue/common.ts\t14dc6a5 (commit)\n@@ -164,8 +164,17 @@\n   \"cycle\",\n   \"issue_type\",\n ];\n \n+export const SUB_ISSUES_DISPLAY_PROPERTIES_KEYS: (keyof IIssueDisplayProperties)[] = [\n+  \"key\",\n+  \"assignee\",\n+  \"start_date\",\n+  \"due_date\",\n+  \"priority\",\n+  \"state\",\n+];\n+\n export const ISSUE_DISPLAY_PROPERTIES: {\n   key: keyof IIssueDisplayProperties;\n   titleTranslationKey: string;\n }[] = [\n"
        },
        {
          "path": "packages/constants/src/issue/filter.ts",
          "status": "modified",
          "diff": "Index: packages/constants/src/issue/filter.ts\n===================================================================\n--- packages/constants/src/issue/filter.ts\t55340f9 (parent)\n+++ packages/constants/src/issue/filter.ts\t14dc6a5 (commit)\n@@ -5,8 +5,9 @@\n import {\n   TIssueFilterPriorityObject,\n   ISSUE_DISPLAY_PROPERTIES_KEYS,\n   EIssuesStoreType,\n+  SUB_ISSUES_DISPLAY_PROPERTIES_KEYS,\n } from \"./common\";\n \n import { TIssueLayout } from \"./layout\";\n \n@@ -95,50 +96,26 @@\n \n export const ISSUE_DISPLAY_FILTERS_BY_PAGE: TIssueFiltersToDisplayByPageType = {\n   profile_issues: {\n     list: {\n-      filters: [\n-        \"priority\",\n-        \"state_group\",\n-        \"labels\",\n-        \"start_date\",\n-        \"target_date\",\n-      ],\n+      filters: [\"priority\", \"state_group\", \"labels\", \"start_date\", \"target_date\"],\n       display_properties: ISSUE_DISPLAY_PROPERTIES_KEYS,\n       display_filters: {\n         group_by: [\"state_detail.group\", \"priority\", \"project\", \"labels\", null],\n-        order_by: [\n-          \"sort_order\",\n-          \"-created_at\",\n-          \"-updated_at\",\n-          \"start_date\",\n-          \"-priority\",\n-        ],\n+        order_by: [\"sort_order\", \"-created_at\", \"-updated_at\", \"start_date\", \"-priority\"],\n         type: [null, \"active\", \"backlog\"],\n       },\n       extra_options: {\n         access: true,\n         values: [\"show_empty_groups\", \"sub_issue\"],\n       },\n     },\n     kanban: {\n-      filters: [\n-        \"priority\",\n-        \"state_group\",\n-        \"labels\",\n-        \"start_date\",\n-        \"target_date\",\n-      ],\n+      filters: [\"priority\", \"state_group\", \"labels\", \"start_date\", \"target_date\"],\n       display_properties: ISSUE_DISPLAY_PROPERTIES_KEYS,\n       display_filters: {\n         group_by: [\"state_detail.group\", \"priority\", \"project\", \"labels\"],\n-        order_by: [\n-          \"sort_order\",\n-          \"-created_at\",\n-          \"-updated_at\",\n-          \"start_date\",\n-          \"-priority\",\n-        ],\n+        order_by: [\"sort_order\", \"-created_at\", \"-updated_at\", \"start_date\", \"-priority\"],\n         type: [null, \"active\", \"backlog\"],\n       },\n       extra_options: {\n         access: true,\n@@ -172,15 +149,9 @@\n           \"assignees\",\n           \"created_by\",\n           null,\n         ],\n-        order_by: [\n-          \"sort_order\",\n-          \"-created_at\",\n-          \"-updated_at\",\n-          \"start_date\",\n-          \"-priority\",\n-        ],\n+        order_by: [\"sort_order\", \"-created_at\", \"-updated_at\", \"start_date\", \"-priority\"],\n         type: [null, \"active\", \"backlog\"],\n       },\n       extra_options: {\n         access: true,\n@@ -189,71 +160,26 @@\n     },\n   },\n   draft_issues: {\n     list: {\n-      filters: [\n-        \"priority\",\n-        \"state_group\",\n-        \"cycle\",\n-        \"module\",\n-        \"labels\",\n-        \"start_date\",\n-        \"target_date\",\n-        \"issue_type\",\n-      ],\n+      filters: [\"priority\", \"state_group\", \"cycle\", \"module\", \"labels\", \"start_date\", \"target_date\", \"issue_type\"],\n       display_properties: ISSUE_DISPLAY_PROPERTIES_KEYS,\n       display_filters: {\n-        group_by: [\n-          \"state_detail.group\",\n-          \"cycle\",\n-          \"module\",\n-          \"priority\",\n-          \"project\",\n-          \"labels\",\n-          null,\n-        ],\n-        order_by: [\n-          \"sort_order\",\n-          \"-created_at\",\n-          \"-updated_at\",\n-          \"start_date\",\n-          \"-priority\",\n-        ],\n+        group_by: [\"state_detail.group\", \"cycle\", \"module\", \"priority\", \"project\", \"labels\", null],\n+        order_by: [\"sort_order\", \"-created_at\", \"-updated_at\", \"start_date\", \"-priority\"],\n         type: [null, \"active\", \"backlog\"],\n       },\n       extra_options: {\n         access: true,\n         values: [\"show_empty_groups\"],\n       },\n     },\n     kanban: {\n-      filters: [\n-        \"priority\",\n-        \"state_group\",\n-        \"cycle\",\n-        \"module\",\n-        \"labels\",\n-        \"start_date\",\n-        \"target_date\",\n-        \"issue_type\",\n-      ],\n+      filters: [\"priority\", \"state_group\", \"cycle\", \"module\", \"labels\", \"start_date\", \"target_date\", \"issue_type\"],\n       display_properties: ISSUE_DISPLAY_PROPERTIES_KEYS,\n       display_filters: {\n-        group_by: [\n-          \"state_detail.group\",\n-          \"cycle\",\n-          \"module\",\n-          \"priority\",\n-          \"project\",\n-          \"labels\",\n-        ],\n-        order_by: [\n-          \"sort_order\",\n-          \"-created_at\",\n-          \"-updated_at\",\n-          \"start_date\",\n-          \"-priority\",\n-        ],\n+        group_by: [\"state_detail.group\", \"cycle\", \"module\", \"priority\", \"project\", \"labels\"],\n+        order_by: [\"sort_order\", \"-created_at\", \"-updated_at\", \"start_date\", \"-priority\"],\n         type: [null, \"active\", \"backlog\"],\n       },\n       extra_options: {\n         access: true,\n@@ -322,26 +248,10 @@\n         \"issue_type\",\n       ],\n       display_properties: ISSUE_DISPLAY_PROPERTIES_KEYS,\n       display_filters: {\n-        group_by: [\n-          \"state\",\n-          \"priority\",\n-          \"cycle\",\n-          \"module\",\n-          \"labels\",\n-          \"assignees\",\n-          \"created_by\",\n-          null,\n-        ],\n-        order_by: [\n-          \"sort_order\",\n-          \"-created_at\",\n-          \"-updated_at\",\n-          \"start_date\",\n-          \"-priority\",\n-          \"target_date\",\n-        ],\n+        group_by: [\"state\", \"priority\", \"cycle\", \"module\", \"labels\", \"assignees\", \"created_by\", null],\n+        order_by: [\"sort_order\", \"-created_at\", \"-updated_at\", \"start_date\", \"-priority\", \"target_date\"],\n         type: [null, \"active\", \"backlog\"],\n       },\n       extra_options: {\n         access: true,\n@@ -363,35 +273,11 @@\n         \"issue_type\",\n       ],\n       display_properties: ISSUE_DISPLAY_PROPERTIES_KEYS,\n       display_filters: {\n-        group_by: [\n-          \"state\",\n-          \"priority\",\n-          \"cycle\",\n-          \"module\",\n-          \"labels\",\n-          \"assignees\",\n-          \"created_by\",\n-        ],\n-        sub_group_by: [\n-          \"state\",\n-          \"priority\",\n-          \"cycle\",\n-          \"module\",\n-          \"labels\",\n-          \"assignees\",\n-          \"created_by\",\n-          null,\n-        ],\n-        order_by: [\n-          \"sort_order\",\n-          \"-created_at\",\n-          \"-updated_at\",\n-          \"start_date\",\n-          \"-priority\",\n-          \"target_date\",\n-        ],\n+        group_by: [\"state\", \"priority\", \"cycle\", \"module\", \"labels\", \"assignees\", \"created_by\"],\n+        sub_group_by: [\"state\", \"priority\", \"cycle\", \"module\", \"labels\", \"assignees\", \"created_by\", null],\n+        order_by: [\"sort_order\", \"-created_at\", \"-updated_at\", \"start_date\", \"-priority\", \"target_date\"],\n         type: [null, \"active\", \"backlog\"],\n       },\n       extra_options: {\n         access: true,\n@@ -435,15 +321,9 @@\n         \"issue_type\",\n       ],\n       display_properties: ISSUE_DISPLAY_PROPERTIES_KEYS,\n       display_filters: {\n-        order_by: [\n-          \"sort_order\",\n-          \"-created_at\",\n-          \"-updated_at\",\n-          \"start_date\",\n-          \"-priority\",\n-        ],\n+        order_by: [\"sort_order\", \"-created_at\", \"-updated_at\", \"start_date\", \"-priority\"],\n         type: [null, \"active\", \"backlog\"],\n       },\n       extra_options: {\n         access: true,\n@@ -465,23 +345,30 @@\n         \"issue_type\",\n       ],\n       display_properties: [\"key\", \"issue_type\"],\n       display_filters: {\n-        order_by: [\n-          \"sort_order\",\n-          \"-created_at\",\n-          \"-updated_at\",\n-          \"start_date\",\n-          \"-priority\",\n-        ],\n+        order_by: [\"sort_order\", \"-created_at\", \"-updated_at\", \"start_date\", \"-priority\"],\n         type: [null, \"active\", \"backlog\"],\n       },\n       extra_options: {\n         access: true,\n         values: [\"sub_issue\"],\n       },\n     },\n   },\n+  sub_work_items: {\n+    list: {\n+      display_properties: SUB_ISSUES_DISPLAY_PROPERTIES_KEYS,\n+      filters: [],\n+      display_filters: {\n+        order_by: [\"-created_at\", \"-updated_at\", \"start_date\", \"-priority\"],\n+      },\n+      extra_options: {\n+        access: true,\n+        values: [\"sub_issue\"],\n+      },\n+    },\n+  },\n };\n \n export const ISSUE_STORE_TO_FILTERS_MAP: Partial<\n   Record<EIssuesStoreType, TFiltersByLayout>\n"
        },
        {
          "path": "packages/types/src/issues/issue_sub_issues.d.ts",
          "status": "modified",
          "diff": "Index: packages/types/src/issues/issue_sub_issues.d.ts\n===================================================================\n--- packages/types/src/issues/issue_sub_issues.d.ts\t55340f9 (parent)\n+++ packages/types/src/issues/issue_sub_issues.d.ts\t14dc6a5 (commit)\n@@ -9,14 +9,33 @@\n };\n \n export type TIssueSubIssues = {\n   state_distribution: TSubIssuesStateDistribution;\n-  sub_issues: TIssue[];\n+  sub_issues: TSubIssueResponse;\n };\n \n+export type TSubIssueResponse = TIssue[] | { [key: string]: TIssue[] };\n+\n export type TIssueSubIssuesStateDistributionMap = {\n   [issue_id: string]: TSubIssuesStateDistribution;\n };\n \n export type TIssueSubIssuesIdMap = {\n   [issue_id: string]: string[];\n };\n+\n+export type TSubIssueOperations = {\n+  copyLink: (path: string) => void;\n+  fetchSubIssues: (workspaceSlug: string, projectId: string, parentIssueId: string) => Promise<void>;\n+  addSubIssue: (workspaceSlug: string, projectId: string, parentIssueId: string, issueIds: string[]) => Promise<void>;\n+  updateSubIssue: (\n+    workspaceSlug: string,\n+    projectId: string,\n+    parentIssueId: string,\n+    issueId: string,\n+    issueData: Partial<TIssue>,\n+    oldIssue?: Partial<TIssue>,\n+    fromModal?: boolean\n+  ) => Promise<void>;\n+  removeSubIssue: (workspaceSlug: string, projectId: string, parentIssueId: string, issueId: string) => Promise<void>;\n+  deleteSubIssue: (workspaceSlug: string, projectId: string, parentIssueId: string, issueId: string) => Promise<void>;\n+};\n"
        },
        {
          "path": "packages/ui/src/icons/display-properties.tsx",
          "status": "added",
          "diff": "Index: packages/ui/src/icons/display-properties.tsx\n===================================================================\n--- packages/ui/src/icons/display-properties.tsx\t55340f9 (parent)\n+++ packages/ui/src/icons/display-properties.tsx\t14dc6a5 (commit)\n@@ -0,0 +1,14 @@\n+import * as React from \"react\";\n+\n+import { ISvgIcons } from \"./type\";\n+\n+export const DisplayPropertiesIcon: React.FC<ISvgIcons> = ({ className = \"text-current\", ...rest }) => (\n+  <svg viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...rest} className={className}>\n+    <path\n+      fillRule=\"evenodd\"\n+      clipRule=\"evenodd\"\n+      d=\"M2.93934 0.93934C3.22064 0.658035 3.60218 0.5 4 0.5C4.39782 0.5 4.77936 0.658035 5.06066 0.93934C5.22036 1.09904 5.34033 1.29105 5.41421 1.5H11.5C11.7761 1.5 12 1.72386 12 2C12 2.27614 11.7761 2.5 11.5 2.5H5.41421C5.34033 2.70895 5.22036 2.90096 5.06066 3.06066C4.77936 3.34197 4.39782 3.5 4 3.5C3.60218 3.5 3.22064 3.34197 2.93934 3.06066C2.77964 2.90096 2.65967 2.70895 2.58579 2.5H0.5C0.223858 2.5 0 2.27614 0 2C0 1.72386 0.223858 1.5 0.5 1.5H2.58579C2.65967 1.29105 2.77964 1.09904 2.93934 0.93934ZM4 1.5C3.86739 1.5 3.74021 1.55268 3.64645 1.64645C3.55268 1.74021 3.5 1.86739 3.5 2C3.5 2.13261 3.55268 2.25979 3.64645 2.35355C3.74021 2.44732 3.86739 2.5 4 2.5C4.13261 2.5 4.25979 2.44732 4.35355 2.35355C4.44732 2.25979 4.5 2.13261 4.5 2C4.5 1.86739 4.44732 1.74021 4.35355 1.64645C4.25979 1.55268 4.13261 1.5 4 1.5ZM6.93934 4.93934C7.22064 4.65804 7.60218 4.5 8 4.5C8.39783 4.5 8.77936 4.65804 9.06066 4.93934C9.22036 5.09904 9.34033 5.29105 9.41422 5.5H11.5C11.7761 5.5 12 5.72386 12 6C12 6.27614 11.7761 6.5 11.5 6.5H9.41422C9.34033 6.70895 9.22036 6.90096 9.06066 7.06066C8.77936 7.34196 8.39783 7.5 8 7.5C7.60218 7.5 7.22064 7.34196 6.93934 7.06066C6.77964 6.90096 6.65967 6.70895 6.58579 6.5H0.5C0.223858 6.5 0 6.27614 0 6C0 5.72386 0.223858 5.5 0.5 5.5H6.58579C6.65967 5.29105 6.77964 5.09904 6.93934 4.93934ZM8 5.5C7.86739 5.5 7.74021 5.55268 7.64645 5.64645C7.55268 5.74021 7.5 5.86739 7.5 6C7.5 6.13261 7.55268 6.25979 7.64645 6.35355C7.74021 6.44732 7.86739 6.5 8 6.5C8.13261 6.5 8.25978 6.44732 8.35355 6.35355C8.44732 6.25979 8.5 6.13261 8.5 6C8.5 5.86739 8.44732 5.74022 8.35355 5.64645C8.25978 5.55268 8.13261 5.5 8 5.5ZM2.93934 8.93934C3.22064 8.65804 3.60217 8.5 4 8.5C4.39783 8.5 4.77936 8.65804 5.06066 8.93934C5.22036 9.09904 5.34033 9.29105 5.41421 9.5H11.5C11.7761 9.5 12 9.72386 12 10C12 10.2761 11.7761 10.5 11.5 10.5H5.41421C5.34033 10.709 5.22036 10.901 5.06066 11.0607C4.77936 11.342 4.39783 11.5 4 11.5C3.60217 11.5 3.22064 11.342 2.93934 11.0607C2.77964 10.901 2.65967 10.709 2.58579 10.5H0.5C0.223858 10.5 0 10.2761 0 10C0 9.72386 0.223858 9.5 0.5 9.5H2.58579C2.65967 9.29105 2.77964 9.09904 2.93934 8.93934ZM4 9.5C3.86739 9.5 3.74022 9.55268 3.64645 9.64645C3.55268 9.74022 3.5 9.86739 3.5 10C3.5 10.1326 3.55268 10.2598 3.64645 10.3536C3.74022 10.4473 3.86739 10.5 4 10.5C4.13261 10.5 4.25979 10.4473 4.35355 10.3536C4.44732 10.2598 4.5 10.1326 4.5 10C4.5 9.86739 4.44732 9.74022 4.35355 9.64645C4.25979 9.55268 4.13261 9.5 4 9.5Z\"\n+      fill=\"currentColor\"\n+    />\n+  </svg>\n+);\n"
        },
        {
          "path": "packages/ui/src/icons/index.ts",
          "status": "modified",
          "diff": "Index: packages/ui/src/icons/index.ts\n===================================================================\n--- packages/ui/src/icons/index.ts\t55340f9 (parent)\n+++ packages/ui/src/icons/index.ts\t14dc6a5 (commit)\n@@ -50,4 +50,5 @@\n export * from \"./multiple-sticky\";\n export * from \"./sticky-note-icon\";\n export * from \"./bar-icon\";\n export * from \"./tree-map-icon\";\n+export * from \"./display-properties\";\n"
        },
        {
          "path": "web/core/components/issues/issue-detail-widgets/relations/helper.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/issues/issue-detail-widgets/relations/helper.tsx\n===================================================================\n--- web/core/components/issues/issue-detail-widgets/relations/helper.tsx\t55340f9 (parent)\n+++ web/core/components/issues/issue-detail-widgets/relations/helper.tsx\t14dc6a5 (commit)\n@@ -1,19 +1,18 @@\n \"use client\";\n import { useMemo } from \"react\";\n import { usePathname } from \"next/navigation\";\n+// plane imports\n import { EIssueServiceType, ISSUE_DELETED, ISSUE_UPDATED } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n import { TIssue, TIssueServiceType } from \"@plane/types\";\n import { TOAST_TYPE, setToast } from \"@plane/ui\";\n-// constants\n-// helper\n-import { copyTextToClipboard } from \"@/helpers/string.helper\";\n+import { copyUrlToClipboard } from \"@plane/utils\";\n // hooks\n import { useEventTracker, useIssueDetail } from \"@/hooks/store\";\n \n export type TRelationIssueOperations = {\n-  copyText: (text: string) => void;\n+  copyLink: (path: string) => void;\n   update: (workspaceSlug: string, projectId: string, issueId: string, data: Partial<TIssue>) => Promise<void>;\n   remove: (workspaceSlug: string, projectId: string, issueId: string) => Promise<void>;\n };\n \n@@ -28,19 +27,18 @@\n   const entityName = issueServiceType === EIssueServiceType.ISSUES ? \"Work item\" : \"Epic\";\n \n   const issueOperations: TRelationIssueOperations = useMemo(\n     () => ({\n-      copyText: (text: string) => {\n-        const originURL = typeof window !== \"undefined\" && window.location.origin ? window.location.origin : \"\";\n-        copyTextToClipboard(`${originURL}${text}`).then(() => {\n+      copyLink: (path) => {\n+        copyUrlToClipboard(path).then(() => {\n           setToast({\n             type: TOAST_TYPE.SUCCESS,\n             title: t(\"common.link_copied\"),\n             message: t(\"entity.link_copied_to_clipboard\", { entity: entityName }),\n           });\n         });\n       },\n-      update: async (workspaceSlug: string, projectId: string, issueId: string, data: Partial<TIssue>) => {\n+      update: async (workspaceSlug, projectId, issueId, data) => {\n         try {\n           await updateIssue(workspaceSlug, projectId, issueId, data);\n           captureIssueEvent({\n             eventName: ISSUE_UPDATED,\n@@ -55,9 +53,9 @@\n             title: t(\"toast.success\"),\n             type: TOAST_TYPE.SUCCESS,\n             message: t(\"entity.update.success\", { entity: entityName }),\n           });\n-        } catch (error) {\n+        } catch {\n           captureIssueEvent({\n             eventName: ISSUE_UPDATED,\n             payload: { state: \"FAILED\", element: \"Issue detail page\" },\n             updates: {\n@@ -72,27 +70,27 @@\n             message: t(\"entity.update.failed\", { entity: entityName }),\n           });\n         }\n       },\n-      remove: async (workspaceSlug: string, projectId: string, issueId: string) => {\n+      remove: async (workspaceSlug, projectId, issueId) => {\n         try {\n           return removeIssue(workspaceSlug, projectId, issueId).then(() => {\n             captureIssueEvent({\n               eventName: ISSUE_DELETED,\n               payload: { id: issueId, state: \"SUCCESS\", element: \"Issue detail page\" },\n               path: pathname,\n             });\n           });\n-        } catch (error) {\n+        } catch {\n           captureIssueEvent({\n             eventName: ISSUE_DELETED,\n             payload: { id: issueId, state: \"FAILED\", element: \"Issue detail page\" },\n             path: pathname,\n           });\n         }\n       },\n     }),\n-    [pathname, removeIssue, updateIssue]\n+    [captureIssueEvent, entityName, pathname, removeIssue, t, updateIssue]\n   );\n \n   return issueOperations;\n };\n"
        },
        {
          "path": "web/core/components/issues/issue-detail-widgets/sub-issues/content.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/issues/issue-detail-widgets/sub-issues/content.tsx\n===================================================================\n--- web/core/components/issues/issue-detail-widgets/sub-issues/content.tsx\t55340f9 (parent)\n+++ web/core/components/issues/issue-detail-widgets/sub-issues/content.tsx\t14dc6a5 (commit)\n@@ -5,13 +5,13 @@\n import { TIssue, TIssueServiceType } from \"@plane/types\";\n // components\n import { DeleteIssueModal } from \"@/components/issues/delete-issue-modal\";\n import { CreateUpdateIssueModal } from \"@/components/issues/issue-modal\";\n-import { IssueList } from \"@/components/issues/sub-issues/issues-list\";\n // hooks\n import { useIssueDetail } from \"@/hooks/store\";\n-// helper\n+// local imports\n import { useSubIssueOperations } from \"./helper\";\n+import { SubIssuesListRoot } from \"./issues-list/root\";\n \n type Props = {\n   workspaceSlug: string;\n   projectId: string;\n@@ -52,32 +52,32 @@\n       issue: undefined,\n     },\n   });\n   // store hooks\n-  const { toggleCreateIssueModal, toggleDeleteIssueModal } = useIssueDetail();\n   const {\n+    toggleCreateIssueModal,\n+    toggleDeleteIssueModal,\n     subIssues: { subIssueHelpersByIssueId, setSubIssueHelpers },\n   } = useIssueDetail(issueServiceType);\n \n   // helpers\n   const subIssueOperations = useSubIssueOperations(issueServiceType);\n   const subIssueHelpers = subIssueHelpersByIssueId(`${parentIssueId}_root`);\n \n   // handler\n-  const handleIssueCrudState = (\n-    key: \"create\" | \"existing\" | \"update\" | \"delete\",\n-    _parentIssueId: string | null,\n-    issue: TIssue | null = null\n-  ) => {\n-    setIssueCrudState({\n-      ...issueCrudState,\n-      [key]: {\n-        toggle: !issueCrudState[key].toggle,\n-        parentIssueId: _parentIssueId,\n-        issue: issue,\n-      },\n-    });\n-  };\n+  const handleIssueCrudState = useCallback(\n+    (key: \"create\" | \"existing\" | \"update\" | \"delete\", _parentIssueId: string | null, issue: TIssue | null = null) => {\n+      setIssueCrudState({\n+        ...issueCrudState,\n+        [key]: {\n+          toggle: !issueCrudState[key].toggle,\n+          parentIssueId: _parentIssueId,\n+          issue,\n+        },\n+      });\n+    },\n+    [issueCrudState]\n+  );\n \n   const handleFetchSubIssues = useCallback(async () => {\n     if (!subIssueHelpers.issue_visibility.includes(parentIssueId)) {\n       try {\n@@ -115,9 +115,9 @@\n \n   return (\n     <>\n       {subIssueHelpers.issue_visibility.includes(parentIssueId) && (\n-        <IssueList\n+        <SubIssuesListRoot\n           workspaceSlug={workspaceSlug}\n           projectId={projectId}\n           parentIssueId={parentIssueId}\n           rootIssueId={parentIssueId}\n"
        },
        {
          "path": "web/core/components/issues/issue-detail-widgets/sub-issues/display-filters.tsx",
          "status": "added",
          "diff": "Index: web/core/components/issues/issue-detail-widgets/sub-issues/display-filters.tsx\n===================================================================\n--- web/core/components/issues/issue-detail-widgets/sub-issues/display-filters.tsx\t55340f9 (parent)\n+++ web/core/components/issues/issue-detail-widgets/sub-issues/display-filters.tsx\t14dc6a5 (commit)\n@@ -0,0 +1,70 @@\n+import { FC } from \"react\";\n+import isEmpty from \"lodash/isEmpty\";\n+import { observer } from \"mobx-react\";\n+import { IIssueDisplayFilterOptions, ILayoutDisplayFiltersOptions, IIssueDisplayProperties } from \"@plane/types\";\n+import { DisplayPropertiesIcon } from \"@plane/ui\";\n+import { FilterDisplayProperties, FilterOrderBy, FiltersDropdown } from \"@/components/issues\";\n+\n+type TSubIssueDisplayFiltersProps = {\n+  displayProperties: IIssueDisplayProperties;\n+  displayFilters: IIssueDisplayFilterOptions;\n+  handleDisplayFiltersUpdate: (updatedDisplayFilter: Partial<IIssueDisplayFilterOptions>) => void;\n+  handleDisplayPropertiesUpdate: (updatedDisplayProperties: Partial<IIssueDisplayProperties>) => void;\n+  layoutDisplayFiltersOptions: ILayoutDisplayFiltersOptions | undefined;\n+  isEpic?: boolean;\n+};\n+\n+export const SubIssueDisplayFilters: FC<TSubIssueDisplayFiltersProps> = observer((props) => {\n+  const {\n+    isEpic = false,\n+    displayProperties,\n+    layoutDisplayFiltersOptions,\n+    handleDisplayPropertiesUpdate,\n+    handleDisplayFiltersUpdate,\n+    displayFilters,\n+  } = props;\n+\n+  return (\n+    <>\n+      {layoutDisplayFiltersOptions?.display_filters && layoutDisplayFiltersOptions?.display_properties.length > 0 && (\n+        <FiltersDropdown\n+          placement=\"bottom-end\"\n+          menuButton={<DisplayPropertiesIcon className=\"h-3.5 w-3.5 text-custom-text-100\" />}\n+        >\n+          <div\n+            onClick={(e) => {\n+              e.stopPropagation();\n+              e.preventDefault();\n+            }}\n+            className=\"vertical-scrollbar scrollbar-sm relative h-full w-full divide-y divide-custom-border-200 overflow-hidden overflow-y-auto px-2.5 max-h-[25rem] text-left\"\n+          >\n+            {/* display properties */}\n+            <div className=\"py-2\">\n+              <FilterDisplayProperties\n+                displayProperties={displayProperties}\n+                displayPropertiesToRender={layoutDisplayFiltersOptions.display_properties}\n+                handleUpdate={handleDisplayPropertiesUpdate}\n+                isEpic={isEpic}\n+              />\n+            </div>\n+\n+            {/* order by */}\n+            {!isEmpty(layoutDisplayFiltersOptions?.display_filters?.order_by) && (\n+              <div className=\"py-2\">\n+                <FilterOrderBy\n+                  selectedOrderBy={displayFilters?.order_by}\n+                  handleUpdate={(val) =>\n+                    handleDisplayFiltersUpdate({\n+                      order_by: val,\n+                    })\n+                  }\n+                  orderByOptions={layoutDisplayFiltersOptions?.display_filters.order_by ?? []}\n+                />\n+              </div>\n+            )}\n+          </div>\n+        </FiltersDropdown>\n+      )}\n+    </>\n+  );\n+});\n"
        },
        {
          "path": "web/core/components/issues/issue-detail-widgets/sub-issues/helper.ts",
          "status": "renamed",
          "oldPath": "web/core/components/issues/issue-detail-widgets/sub-issues/helper.tsx",
          "diff": "===================================================================\n--- web/core/components/issues/issue-detail-widgets/sub-issues/helper.tsx\t55340f9 (parent)\n+++ web/core/components/issues/issue-detail-widgets/sub-issues/helper.ts\t14dc6a5 (commit)\n@@ -1,30 +1,24 @@\n \"use client\";\n+\n import { useMemo } from \"react\";\n import { useParams, usePathname } from \"next/navigation\";\n+// plane imports\n import { EIssueServiceType } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n-import { TIssue, TIssueServiceType } from \"@plane/types\";\n+import { TIssueServiceType, TSubIssueOperations } from \"@plane/types\";\n import { TOAST_TYPE, setToast } from \"@plane/ui\";\n-// helper\n-import { copyTextToClipboard } from \"@/helpers/string.helper\";\n+import { copyUrlToClipboard } from \"@plane/utils\";\n // hooks\n import { useEventTracker, useIssueDetail, useProjectState } from \"@/hooks/store\";\n-// plane-web\n+// plane web helpers\n import { updateEpicAnalytics } from \"@/plane-web/helpers/epic-analytics\";\n-// type\n-import { TSubIssueOperations } from \"../../sub-issues\";\n \n-export type TRelationIssueOperations = {\n-  copyText: (text: string) => void;\n-  update: (workspaceSlug: string, projectId: string, issueId: string, data: Partial<TIssue>) => Promise<void>;\n-  remove: (workspaceSlug: string, projectId: string, issueId: string) => Promise<void>;\n-};\n-\n export const useSubIssueOperations = (issueServiceType: TIssueServiceType): TSubIssueOperations => {\n   // router\n   const { epicId: epicIdParam } = useParams();\n   const pathname = usePathname();\n+  // translation\n   const { t } = useTranslation();\n   // store hooks\n   const {\n     issue: { getIssueById },\n@@ -45,11 +39,10 @@\n   const epicId = epicIdParam || epicPeekIssue?.issueId;\n \n   const subIssueOperations: TSubIssueOperations = useMemo(\n     () => ({\n-      copyText: (text: string) => {\n-        const originURL = typeof window !== \"undefined\" && window.location.origin ? window.location.origin : \"\";\n-        copyTextToClipboard(`${originURL}/${text}`).then(() => {\n+      copyLink: (path) => {\n+        copyUrlToClipboard(`/${path}`).then(() => {\n           setToast({\n             type: TOAST_TYPE.SUCCESS,\n             title: t(\"common.link_copied\"),\n             message: t(\"entity.link_copied_to_clipboard\", {\n@@ -60,9 +53,9 @@\n             }),\n           });\n         });\n       },\n-      fetchSubIssues: async (workspaceSlug: string, projectId: string, parentIssueId: string) => {\n+      fetchSubIssues: async (workspaceSlug, projectId, parentIssueId) => {\n         try {\n           await fetchSubIssues(workspaceSlug, projectId, parentIssueId);\n         } catch {\n           setToast({\n@@ -76,9 +69,9 @@\n             }),\n           });\n         }\n       },\n-      addSubIssue: async (workspaceSlug: string, projectId: string, parentIssueId: string, issueIds: string[]) => {\n+      addSubIssue: async (workspaceSlug, projectId, parentIssueId, issueIds) => {\n         try {\n           await createSubIssues(workspaceSlug, projectId, parentIssueId, issueIds);\n           setToast({\n             type: TOAST_TYPE.SUCCESS,\n@@ -93,9 +86,8 @@\n         } catch {\n           setToast({\n             type: TOAST_TYPE.ERROR,\n             title: t(\"toast.error\"),\n-            // message: `Error adding ${issueServiceType === EIssueServiceType.ISSUES ? \"sub-issues\" : \"issues\"}`,\n             message: t(\"entity.add.failed\", {\n               entity:\n                 issueServiceType === EIssueServiceType.ISSUES\n                   ? t(\"common.sub_work_items\")\n@@ -104,15 +96,15 @@\n           });\n         }\n       },\n       updateSubIssue: async (\n-        workspaceSlug: string,\n-        projectId: string,\n-        parentIssueId: string,\n-        issueId: string,\n-        issueData: Partial<TIssue>,\n-        oldIssue: Partial<TIssue> = {},\n-        fromModal: boolean = false\n+        workspaceSlug,\n+        projectId,\n+        parentIssueId,\n+        issueId,\n+        issueData,\n+        oldIssue = {},\n+        fromModal = false\n       ) => {\n         try {\n           setSubIssueHelpers(parentIssueId, \"issue_loader\", issueId);\n           await updateSubIssue(workspaceSlug, projectId, parentIssueId, issueId, issueData, oldIssue, fromModal);\n@@ -171,9 +163,9 @@\n             message: t(\"sub_work_item.update.error\"),\n           });\n         }\n       },\n-      removeSubIssue: async (workspaceSlug: string, projectId: string, parentIssueId: string, issueId: string) => {\n+      removeSubIssue: async (workspaceSlug, projectId, parentIssueId, issueId) => {\n         try {\n           setSubIssueHelpers(parentIssueId, \"issue_loader\", issueId);\n           await removeSubIssue(workspaceSlug, projectId, parentIssueId, issueId);\n           if (issueServiceType === EIssueServiceType.EPICS) {\n@@ -217,9 +209,9 @@\n             message: t(\"sub_work_item.remove.error\"),\n           });\n         }\n       },\n-      deleteSubIssue: async (workspaceSlug: string, projectId: string, parentIssueId: string, issueId: string) => {\n+      deleteSubIssue: async (workspaceSlug, projectId, parentIssueId, issueId) => {\n         try {\n           setSubIssueHelpers(parentIssueId, \"issue_loader\", issueId);\n           return deleteSubIssue(workspaceSlug, projectId, parentIssueId, issueId).then(() => {\n             captureIssueEvent({\n@@ -243,22 +235,22 @@\n         }\n       },\n     }),\n     [\n-      fetchSubIssues,\n+      captureIssueEvent,\n       createSubIssues,\n-      epicId,\n-      updateSubIssue,\n-      removeSubIssue,\n       deleteSubIssue,\n-      setSubIssueHelpers,\n+      epicId,\n+      fetchSubIssues,\n       getIssueById,\n       getStateById,\n-      updateAnalytics,\n-      captureIssueEvent,\n+      issueServiceType,\n       pathname,\n+      removeSubIssue,\n+      setSubIssueHelpers,\n       t,\n-      issueServiceType,\n+      updateAnalytics,\n+      updateSubIssue,\n     ]\n   );\n \n   return subIssueOperations;\n"
        },
        {
          "path": "web/core/components/issues/issue-detail-widgets/sub-issues/index.ts",
          "status": "modified",
          "diff": "Index: web/core/components/issues/issue-detail-widgets/sub-issues/index.ts\n===================================================================\n--- web/core/components/issues/issue-detail-widgets/sub-issues/index.ts\t55340f9 (parent)\n+++ web/core/components/issues/issue-detail-widgets/sub-issues/index.ts\t14dc6a5 (commit)\n@@ -1,4 +1,5 @@\n export * from \"./content\";\n export * from \"./title\";\n export * from \"./root\";\n export * from \"./quick-action-button\";\n+export * from \"./display-filters\";\n"
        },
        {
          "path": "web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/list-item.tsx",
          "status": "renamed",
          "oldPath": "web/core/components/issues/sub-issues/issue-list-item.tsx",
          "diff": "===================================================================\n--- web/core/components/issues/sub-issues/issue-list-item.tsx\t55340f9 (parent)\n+++ web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/list-item.tsx\t14dc6a5 (commit)\n@@ -1,15 +1,16 @@\n \"use client\";\n \n-import React from \"react\";\n import { observer } from \"mobx-react\";\n import { ChevronRight, X, Pencil, Trash, Link as LinkIcon, Loader } from \"lucide-react\";\n+// plane imports\n import { EIssueServiceType } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n-import { TIssue, TIssueServiceType } from \"@plane/types\";\n-// ui\n+import { TIssue, TIssueServiceType, TSubIssueOperations } from \"@plane/types\";\n import { ControlLink, CustomMenu, Tooltip } from \"@plane/ui\";\n // helpers\n+import { useSubIssueOperations } from \"@/components/issues/issue-detail-widgets/sub-issues/helper\";\n+import { WithDisplayPropertiesHOC } from \"@/components/issues/issue-layouts/properties/with-display-properties-HOC\";\n import { cn } from \"@/helpers/common.helper\";\n import { generateWorkItemLink } from \"@/helpers/issue.helper\";\n // hooks\n import { useIssueDetail, useProject, useProjectState } from \"@/hooks/store\";\n@@ -17,17 +18,12 @@\n import { usePlatformOS } from \"@/hooks/use-platform-os\";\n // plane web components\n import { IssueIdentifier } from \"@/plane-web/components/issues\";\n // local components\n-import { useSubIssueOperations } from \"../issue-detail-widgets/sub-issues/helper\";\n-import { IssueList } from \"./issues-list\";\n-import { IssueProperty } from \"./properties\";\n-// ui\n-// types\n-import { TSubIssueOperations } from \"./root\";\n-// import { ISubIssuesRootLoaders, ISubIssuesRootLoadersHandler } from \"./root\";\n+import { SubIssuesListItemProperties } from \"./properties\";\n+import { SubIssuesListRoot } from \"./root\";\n \n-export interface ISubIssues {\n+type Props = {\n   workspaceSlug: string;\n   projectId: string;\n   parentIssueId: string;\n   rootIssueId: string;\n@@ -40,11 +36,11 @@\n   ) => void;\n   subIssueOperations: TSubIssueOperations;\n   issueId: string;\n   issueServiceType?: TIssueServiceType;\n-}\n+};\n \n-export const IssueListItem: React.FC<ISubIssues> = observer((props) => {\n+export const SubIssuesListItem: React.FC<Props> = observer((props) => {\n   const {\n     workspaceSlug,\n     projectId,\n     parentIssueId,\n@@ -58,8 +54,11 @@\n   } = props;\n   const { t } = useTranslation();\n   const {\n     issue: { getIssueById },\n+    subIssues: {\n+      filters: { getSubIssueFilters },\n+    },\n   } = useIssueDetail(issueServiceType);\n   const {\n     subIssues: { subIssueHelpersByIssueId, setSubIssueHelpers },\n   } = useIssueDetail();\n@@ -79,8 +78,12 @@\n \n   const subIssueHelpers = subIssueHelpersByIssueId(parentIssueId);\n   const subIssueCount = issue?.sub_issues_count ?? 0;\n \n+  // derived values\n+  const subIssueFilters = getSubIssueFilters(parentIssueId);\n+  const displayProperties = subIssueFilters.displayProperties ?? {};\n+\n   //\n   const handleIssuePeekOverview = (issue: TIssue) => handleRedirection(workspaceSlug, issue, isMobile);\n \n   if (!issue) return <></>;\n@@ -149,19 +152,21 @@\n                 style={{\n                   backgroundColor: currentIssueStateDetail?.color ?? \"#737373\",\n                 }}\n               />\n-              <div className=\"flex-shrink-0\">\n-                {projectDetail && (\n-                  <IssueIdentifier\n-                    projectId={projectDetail.id}\n-                    issueTypeId={issue.type_id}\n-                    projectIdentifier={projectDetail.identifier}\n-                    issueSequenceId={issue.sequence_id}\n-                    textContainerClassName=\"text-xs text-custom-text-200\"\n-                  />\n-                )}\n-              </div>\n+              <WithDisplayPropertiesHOC displayProperties={displayProperties || {}} displayPropertyKey=\"key\">\n+                <div className=\"flex-shrink-0\">\n+                  {projectDetail && (\n+                    <IssueIdentifier\n+                      projectId={projectDetail.id}\n+                      issueTypeId={issue.type_id}\n+                      projectIdentifier={projectDetail.identifier}\n+                      issueSequenceId={issue.sequence_id}\n+                      textContainerClassName=\"text-xs text-custom-text-200\"\n+                    />\n+                  )}\n+                </div>\n+              </WithDisplayPropertiesHOC>\n               <Tooltip tooltipContent={issue.name} isMobile={isMobile}>\n                 <span className=\"w-full truncate text-sm text-custom-text-100\">{issue.name}</span>\n               </Tooltip>\n             </div>\n@@ -172,15 +177,16 @@\n                 e.preventDefault();\n                 e.stopPropagation();\n               }}\n             >\n-              <IssueProperty\n+              <SubIssuesListItemProperties\n                 workspaceSlug={workspaceSlug}\n                 parentIssueId={parentIssueId}\n                 issueId={issueId}\n                 disabled={disabled}\n-                subIssueOperations={subIssueOperations}\n-                issueServiceType={issueServiceType}\n+                updateSubIssue={subIssueOperations.updateSubIssue}\n+                displayProperties={displayProperties}\n+                issue={issue}\n               />\n             </div>\n \n             <div className=\"flex-shrink-0 text-sm\">\n@@ -204,9 +210,9 @@\n                 <CustomMenu.MenuItem\n                   onClick={(e) => {\n                     e.stopPropagation();\n                     e.preventDefault();\n-                    subIssueOperations.copyText(workItemLink);\n+                    subIssueOperations.copyLink(workItemLink);\n                   }}\n                 >\n                   <div className=\"flex items-center gap-2\">\n                     <LinkIcon className=\"h-3.5 w-3.5\" strokeWidth={2} />\n@@ -257,9 +263,9 @@\n       {subIssueHelpers.issue_visibility.includes(issueId) &&\n         issue.project_id &&\n         subIssueCount > 0 &&\n         !isCurrentIssueRoot && (\n-          <IssueList\n+          <SubIssuesListRoot\n             workspaceSlug={workspaceSlug}\n             projectId={issue.project_id}\n             parentIssueId={issue.id}\n             rootIssueId={rootIssueId}\n"
        },
        {
          "path": "web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/properties.tsx",
          "status": "added",
          "diff": "Index: web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/properties.tsx\n===================================================================\n--- web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/properties.tsx\t55340f9 (parent)\n+++ web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/properties.tsx\t14dc6a5 (commit)\n@@ -0,0 +1,161 @@\n+// plane imports\n+import { SyntheticEvent } from \"react\";\n+import { observer } from \"mobx-react\";\n+import { CalendarClock } from \"lucide-react\";\n+import { useTranslation } from \"@plane/i18n\";\n+import { IIssueDisplayProperties, TIssue } from \"@plane/types\";\n+// components\n+import { PriorityDropdown, MemberDropdown, StateDropdown, DateDropdown } from \"@/components/dropdowns\";\n+// hooks\n+import { WithDisplayPropertiesHOC } from \"@/components/issues/issue-layouts/properties/with-display-properties-HOC\";\n+import { getDate, renderFormattedPayloadDate } from \"@/helpers/date-time.helper\";\n+\n+type Props = {\n+  workspaceSlug: string;\n+  parentIssueId: string;\n+  issueId: string;\n+  disabled: boolean;\n+  updateSubIssue: (\n+    workspaceSlug: string,\n+    projectId: string,\n+    parentIssueId: string,\n+    issueId: string,\n+    issueData: Partial<TIssue>,\n+    oldIssue?: Partial<TIssue>\n+  ) => Promise<void>;\n+  displayProperties?: IIssueDisplayProperties;\n+  issue: TIssue;\n+};\n+\n+export const SubIssuesListItemProperties: React.FC<Props> = observer((props) => {\n+  const { workspaceSlug, parentIssueId, issueId, disabled, updateSubIssue, displayProperties, issue } = props;\n+  // hooks\n+  const { t } = useTranslation();\n+\n+  const handleEventPropagation = (e: SyntheticEvent<HTMLDivElement>) => {\n+    e.stopPropagation();\n+    e.preventDefault();\n+  };\n+\n+  if (!displayProperties) return <></>;\n+\n+  const maxDate = getDate(issue.target_date);\n+  maxDate?.setDate(maxDate.getDate());\n+  return (\n+    <div className=\"relative flex items-center gap-2\">\n+      <WithDisplayPropertiesHOC displayProperties={displayProperties} displayPropertyKey=\"start_date\">\n+        <div className=\"h-5 flex-shrink-0\" onFocus={handleEventPropagation} onClick={handleEventPropagation}>\n+          <DateDropdown\n+            value={issue.start_date ?? null}\n+            onChange={(val) =>\n+              issue.project_id &&\n+              updateSubIssue(\n+                workspaceSlug,\n+                issue.project_id,\n+                parentIssueId,\n+                issueId,\n+                {\n+                  start_date: val ? renderFormattedPayloadDate(val) : null,\n+                },\n+                { ...issue }\n+              )\n+            }\n+            maxDate={maxDate}\n+            placeholder={t(\"common.order_by.start_date\")}\n+            icon={<CalendarClock className=\"h-3 w-3 flex-shrink-0\" />}\n+            buttonVariant={issue.start_date ? \"border-with-text\" : \"border-without-text\"}\n+            optionsClassName=\"z-30\"\n+            disabled={!disabled}\n+          />\n+        </div>\n+      </WithDisplayPropertiesHOC>\n+\n+      <WithDisplayPropertiesHOC displayProperties={displayProperties} displayPropertyKey=\"due_date\">\n+        <div className=\"h-5 flex-shrink-0\" onFocus={handleEventPropagation} onClick={handleEventPropagation}>\n+          <DateDropdown\n+            value={issue.target_date ?? null}\n+            onChange={(val) =>\n+              issue.project_id &&\n+              updateSubIssue(\n+                workspaceSlug,\n+                issue.project_id,\n+                parentIssueId,\n+                issueId,\n+                {\n+                  target_date: val ? renderFormattedPayloadDate(val) : null,\n+                },\n+                { ...issue }\n+              )\n+            }\n+            maxDate={maxDate}\n+            placeholder={t(\"common.order_by.due_date\")}\n+            icon={<CalendarClock className=\"h-3 w-3 flex-shrink-0\" />}\n+            buttonVariant={issue.target_date ? \"border-with-text\" : \"border-without-text\"}\n+            optionsClassName=\"z-30\"\n+            disabled={!disabled}\n+          />\n+        </div>\n+      </WithDisplayPropertiesHOC>\n+\n+      <WithDisplayPropertiesHOC displayProperties={displayProperties} displayPropertyKey=\"state\">\n+        <div className=\"h-5 flex-shrink-0\">\n+          <StateDropdown\n+            value={issue.state_id}\n+            projectId={issue.project_id ?? undefined}\n+            onChange={(val) =>\n+              issue.project_id &&\n+              updateSubIssue(\n+                workspaceSlug,\n+                issue.project_id,\n+                parentIssueId,\n+                issueId,\n+                {\n+                  state_id: val,\n+                },\n+                { ...issue }\n+              )\n+            }\n+            disabled={!disabled}\n+            buttonVariant=\"border-with-text\"\n+          />\n+        </div>\n+      </WithDisplayPropertiesHOC>\n+\n+      <WithDisplayPropertiesHOC displayProperties={displayProperties} displayPropertyKey=\"priority\">\n+        <div className=\"h-5 flex-shrink-0\">\n+          <PriorityDropdown\n+            value={issue.priority}\n+            onChange={(val) =>\n+              issue.project_id &&\n+              updateSubIssue(workspaceSlug, issue.project_id, parentIssueId, issueId, {\n+                priority: val,\n+              })\n+            }\n+            disabled={!disabled}\n+            buttonVariant=\"border-without-text\"\n+            buttonClassName=\"border\"\n+          />\n+        </div>\n+      </WithDisplayPropertiesHOC>\n+\n+      <WithDisplayPropertiesHOC displayProperties={displayProperties} displayPropertyKey=\"assignee\">\n+        <div className=\"h-5 flex-shrink-0\">\n+          <MemberDropdown\n+            value={issue.assignee_ids}\n+            projectId={issue.project_id ?? undefined}\n+            onChange={(val) =>\n+              issue.project_id &&\n+              updateSubIssue(workspaceSlug, issue.project_id, parentIssueId, issueId, {\n+                assignee_ids: val,\n+              })\n+            }\n+            disabled={!disabled}\n+            multiple\n+            buttonVariant={(issue?.assignee_ids || []).length > 0 ? \"transparent-without-text\" : \"border-without-text\"}\n+            buttonClassName={(issue?.assignee_ids || []).length > 0 ? \"hover:bg-transparent px-0\" : \"\"}\n+          />\n+        </div>\n+      </WithDisplayPropertiesHOC>\n+    </div>\n+  );\n+});\n"
        },
        {
          "path": "web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/root.tsx",
          "status": "added",
          "diff": "Index: web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/root.tsx\n===================================================================\n--- web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/root.tsx\t55340f9 (parent)\n+++ web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/root.tsx\t14dc6a5 (commit)\n@@ -0,0 +1,64 @@\n+import { observer } from \"mobx-react\";\n+// plane imports\n+import { EIssueServiceType } from \"@plane/constants\";\n+import { TIssue, TIssueServiceType, TSubIssueOperations } from \"@plane/types\";\n+// hooks\n+import { useIssueDetail } from \"@/hooks/store\";\n+// local imports\n+import { SubIssuesListItem } from \"./list-item\";\n+\n+type Props = {\n+  workspaceSlug: string;\n+  projectId: string;\n+  parentIssueId: string;\n+  rootIssueId: string;\n+  spacingLeft: number;\n+  disabled: boolean;\n+  handleIssueCrudState: (\n+    key: \"create\" | \"existing\" | \"update\" | \"delete\",\n+    issueId: string,\n+    issue?: TIssue | null\n+  ) => void;\n+  subIssueOperations: TSubIssueOperations;\n+  issueServiceType?: TIssueServiceType;\n+};\n+\n+export const SubIssuesListRoot: React.FC<Props> = observer((props) => {\n+  const {\n+    workspaceSlug,\n+    projectId,\n+    parentIssueId,\n+    rootIssueId,\n+    spacingLeft = 10,\n+    disabled,\n+    handleIssueCrudState,\n+    subIssueOperations,\n+    issueServiceType = EIssueServiceType.ISSUES,\n+  } = props;\n+  // store hooks\n+  const {\n+    subIssues: { subIssuesByIssueId },\n+  } = useIssueDetail(issueServiceType);\n+  // derived values\n+  const subIssueIds = subIssuesByIssueId(parentIssueId);\n+\n+  return (\n+    <div className=\"relative\">\n+      {subIssueIds?.map((issueId) => (\n+        <SubIssuesListItem\n+          key={issueId}\n+          workspaceSlug={workspaceSlug}\n+          projectId={projectId}\n+          parentIssueId={parentIssueId}\n+          rootIssueId={rootIssueId}\n+          issueId={issueId}\n+          spacingLeft={spacingLeft}\n+          disabled={disabled}\n+          handleIssueCrudState={handleIssueCrudState}\n+          subIssueOperations={subIssueOperations}\n+          issueServiceType={issueServiceType}\n+        />\n+      ))}\n+    </div>\n+  );\n+});\n"
        },
        {
          "path": "web/core/components/issues/issue-detail-widgets/sub-issues/root.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/issues/issue-detail-widgets/sub-issues/root.tsx\n===================================================================\n--- web/core/components/issues/issue-detail-widgets/sub-issues/root.tsx\t55340f9 (parent)\n+++ web/core/components/issues/issue-detail-widgets/sub-issues/root.tsx\t14dc6a5 (commit)\n@@ -20,9 +20,9 @@\n export const SubIssuesCollapsible: FC<Props> = observer((props) => {\n   const { workspaceSlug, projectId, issueId, disabled = false, issueServiceType } = props;\n   // store hooks\n   const { openWidgets, toggleOpenWidget } = useIssueDetail(issueServiceType);\n-  // derived state\n+  // derived values\n   const isCollapsibleOpen = openWidgets.includes(\"sub-issues\");\n \n   return (\n     <Collapsible\n@@ -32,9 +32,10 @@\n         <SubIssuesCollapsibleTitle\n           isOpen={isCollapsibleOpen}\n           parentIssueId={issueId}\n           disabled={disabled}\n-          issueServiceType={issueServiceType}\n+          projectId={projectId}\n+          workspaceSlug={workspaceSlug}\n         />\n       }\n       buttonClassName=\"w-full\"\n     >\n"
        },
        {
          "path": "web/core/components/issues/issue-detail-widgets/sub-issues/title-actions.tsx",
          "status": "added",
          "diff": "Index: web/core/components/issues/issue-detail-widgets/sub-issues/title-actions.tsx\n===================================================================\n--- web/core/components/issues/issue-detail-widgets/sub-issues/title-actions.tsx\t55340f9 (parent)\n+++ web/core/components/issues/issue-detail-widgets/sub-issues/title-actions.tsx\t14dc6a5 (commit)\n@@ -0,0 +1,69 @@\n+import { FC, useCallback } from \"react\";\n+import { observer } from \"mobx-react\";\n+import { EIssueFilterType, EIssueServiceType, ISSUE_DISPLAY_FILTERS_BY_PAGE } from \"@plane/constants\";\n+import { IIssueDisplayFilterOptions, IIssueDisplayProperties, TIssueServiceType } from \"@plane/types\";\n+import { useIssueDetail } from \"@/hooks/store\";\n+import { SubIssueDisplayFilters } from \"./display-filters\";\n+import { SubIssuesActionButton } from \"./quick-action-button\";\n+\n+type TSubWorkItemTitleActionsProps = {\n+  disabled: boolean;\n+  issueServiceType?: TIssueServiceType;\n+  parentId: string;\n+  workspaceSlug: string;\n+  projectId: string;\n+};\n+\n+export const SubWorkItemTitleActions: FC<TSubWorkItemTitleActionsProps> = observer((props) => {\n+  const { disabled, issueServiceType = EIssueServiceType.ISSUES, parentId, workspaceSlug, projectId } = props;\n+\n+  // store hooks\n+  const {\n+    subIssues: {\n+      filters: { getSubIssueFilters, updateSubIssueFilters },\n+    },\n+  } = useIssueDetail(issueServiceType);\n+\n+  // derived values\n+  const subIssueFilters = getSubIssueFilters(parentId);\n+\n+  const layoutDisplayFiltersOptions = ISSUE_DISPLAY_FILTERS_BY_PAGE[\"sub_work_items\"].list;\n+\n+  const handleDisplayFilters = useCallback(\n+    (updatedDisplayFilter: Partial<IIssueDisplayFilterOptions>) => {\n+      if (!workspaceSlug || !projectId) return;\n+      updateSubIssueFilters(workspaceSlug, projectId, EIssueFilterType.DISPLAY_FILTERS, updatedDisplayFilter, parentId);\n+    },\n+    [workspaceSlug, projectId, parentId, updateSubIssueFilters]\n+  );\n+\n+  const handleDisplayPropertiesUpdate = useCallback(\n+    (updatedDisplayProperties: Partial<IIssueDisplayProperties>) => {\n+      if (!workspaceSlug || !projectId) return;\n+      updateSubIssueFilters(\n+        workspaceSlug,\n+        projectId,\n+        EIssueFilterType.DISPLAY_PROPERTIES,\n+        updatedDisplayProperties,\n+        parentId\n+      );\n+    },\n+    [workspaceSlug, projectId, parentId, updateSubIssueFilters]\n+  );\n+\n+  return (\n+    <div className=\"flex items-center gap-2\">\n+      <SubIssueDisplayFilters\n+        isEpic={issueServiceType === EIssueServiceType.EPICS}\n+        layoutDisplayFiltersOptions={layoutDisplayFiltersOptions}\n+        displayProperties={subIssueFilters?.displayProperties ?? {}}\n+        displayFilters={subIssueFilters?.displayFilters ?? {}}\n+        handleDisplayPropertiesUpdate={handleDisplayPropertiesUpdate}\n+        handleDisplayFiltersUpdate={handleDisplayFilters}\n+      />\n+      {!disabled && (\n+        <SubIssuesActionButton issueId={parentId} disabled={disabled} issueServiceType={issueServiceType} />\n+      )}\n+    </div>\n+  );\n+});\n"
        },
        {
          "path": "web/core/components/issues/issue-detail-widgets/sub-issues/title.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/issues/issue-detail-widgets/sub-issues/title.tsx\n===================================================================\n--- web/core/components/issues/issue-detail-widgets/sub-issues/title.tsx\t55340f9 (parent)\n+++ web/core/components/issues/issue-detail-widgets/sub-issues/title.tsx\t14dc6a5 (commit)\n@@ -1,35 +1,47 @@\n \"use client\";\n-import React, { FC } from \"react\";\n+\n+import { FC } from \"react\";\n import { observer } from \"mobx-react\";\n+// plane imports\n import { EIssueServiceType } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n import { TIssueServiceType } from \"@plane/types\";\n import { CircularProgressIndicator, CollapsibleButton } from \"@plane/ui\";\n-// components\n-import { SubIssuesActionButton } from \"@/components/issues/issue-detail-widgets\";\n // hooks\n import { useIssueDetail } from \"@/hooks/store\";\n+import { SubWorkItemTitleActions } from \"./title-actions\";\n \n type Props = {\n   isOpen: boolean;\n   parentIssueId: string;\n   disabled: boolean;\n   issueServiceType?: TIssueServiceType;\n+  projectId: string;\n+  workspaceSlug: string;\n };\n \n export const SubIssuesCollapsibleTitle: FC<Props> = observer((props) => {\n-  const { isOpen, parentIssueId, disabled, issueServiceType = EIssueServiceType.ISSUES } = props;\n+  const {\n+    isOpen,\n+    parentIssueId,\n+    disabled,\n+    issueServiceType = EIssueServiceType.ISSUES,\n+    projectId,\n+    workspaceSlug,\n+  } = props;\n+  // translation\n   const { t } = useTranslation();\n   // store hooks\n   const {\n-    subIssues: { subIssuesByIssueId, stateDistributionByIssueId },\n+    subIssues: {\n+      subIssuesByIssueId,\n+      stateDistributionByIssueId,\n+    },\n   } = useIssueDetail(issueServiceType);\n-\n-  // derived data\n+  // derived values\n   const subIssuesDistribution = stateDistributionByIssueId(parentIssueId);\n   const subIssues = subIssuesByIssueId(parentIssueId);\n-\n   // if there are no sub-issues, return null\n   if (!subIssues) return null;\n \n   // calculate percentage of completed sub-issues\n@@ -49,11 +61,15 @@\n           </span>\n         </div>\n       }\n       actionItemElement={\n-        !disabled && (\n-          <SubIssuesActionButton issueId={parentIssueId} disabled={disabled} issueServiceType={issueServiceType} />\n-        )\n+        <SubWorkItemTitleActions\n+          workspaceSlug={workspaceSlug}\n+          projectId={projectId}\n+          parentId={parentIssueId}\n+          disabled={disabled}\n+          issueServiceType={issueServiceType}\n+        />\n       }\n     />\n   );\n });\n"
        },
        {
          "path": "web/core/components/issues/relations/issue-list-item.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/issues/relations/issue-list-item.tsx\n===================================================================\n--- web/core/components/issues/relations/issue-list-item.tsx\t55340f9 (parent)\n+++ web/core/components/issues/relations/issue-list-item.tsx\t14dc6a5 (commit)\n@@ -108,9 +108,9 @@\n \n   const handleCopyIssueLink = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n     e.stopPropagation();\n     e.preventDefault();\n-    issueOperations.copyText(workItemLink);\n+    issueOperations.copyLink(workItemLink);\n   };\n \n   const handleRemoveRelation = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n     e.preventDefault();\n"
        },
        {
          "path": "web/core/components/issues/sub-issues/index.ts",
          "status": "deleted",
          "diff": "Index: web/core/components/issues/sub-issues/index.ts\n===================================================================\n--- web/core/components/issues/sub-issues/index.ts\t55340f9 (parent)\n+++ web/core/components/issues/sub-issues/index.ts\t14dc6a5 (commit)\n@@ -1,1 +0,0 @@\n-export * from \"./root\";\n"
        },
        {
          "path": "web/core/components/issues/sub-issues/issues-list.tsx",
          "status": "deleted",
          "diff": "Index: web/core/components/issues/sub-issues/issues-list.tsx\n===================================================================\n--- web/core/components/issues/sub-issues/issues-list.tsx\t55340f9 (parent)\n+++ web/core/components/issues/sub-issues/issues-list.tsx\t14dc6a5 (commit)\n@@ -1,69 +0,0 @@\n-import { FC, Fragment } from \"react\";\n-import { observer } from \"mobx-react\";\n-import { EIssueServiceType } from \"@plane/constants\";\n-import { TIssue, TIssueServiceType } from \"@plane/types\";\n-// hooks\n-import { useIssueDetail } from \"@/hooks/store\";\n-// components\n-import { IssueListItem } from \"./issue-list-item\";\n-// types\n-import { TSubIssueOperations } from \"./root\";\n-\n-export interface IIssueList {\n-  workspaceSlug: string;\n-  projectId: string;\n-  parentIssueId: string;\n-  rootIssueId: string;\n-  spacingLeft: number;\n-  disabled: boolean;\n-  handleIssueCrudState: (\n-    key: \"create\" | \"existing\" | \"update\" | \"delete\",\n-    issueId: string,\n-    issue?: TIssue | null\n-  ) => void;\n-  subIssueOperations: TSubIssueOperations;\n-  issueServiceType?: TIssueServiceType;\n-}\n-\n-export const IssueList: FC<IIssueList> = observer((props) => {\n-  const {\n-    workspaceSlug,\n-    projectId,\n-    parentIssueId,\n-    rootIssueId,\n-    spacingLeft = 10,\n-    disabled,\n-    handleIssueCrudState,\n-    subIssueOperations,\n-    issueServiceType = EIssueServiceType.ISSUES,\n-  } = props;\n-  // hooks\n-  const {\n-    subIssues: { subIssuesByIssueId },\n-  } = useIssueDetail(issueServiceType);\n-\n-  const subIssueIds = subIssuesByIssueId(parentIssueId);\n-\n-  return (\n-    <div className=\"relative\">\n-      {subIssueIds &&\n-        subIssueIds.length > 0 &&\n-        subIssueIds.map((issueId) => (\n-          <Fragment key={issueId}>\n-            <IssueListItem\n-              workspaceSlug={workspaceSlug}\n-              projectId={projectId}\n-              parentIssueId={parentIssueId}\n-              rootIssueId={rootIssueId}\n-              issueId={issueId}\n-              spacingLeft={spacingLeft}\n-              disabled={disabled}\n-              handleIssueCrudState={handleIssueCrudState}\n-              subIssueOperations={subIssueOperations}\n-              issueServiceType={issueServiceType}\n-            />\n-          </Fragment>\n-        ))}\n-    </div>\n-  );\n-});\n"
        },
        {
          "path": "web/core/components/issues/sub-issues/progressbar.tsx",
          "status": "deleted",
          "diff": "Index: web/core/components/issues/sub-issues/progressbar.tsx\n===================================================================\n--- web/core/components/issues/sub-issues/progressbar.tsx\t55340f9 (parent)\n+++ web/core/components/issues/sub-issues/progressbar.tsx\t14dc6a5 (commit)\n@@ -1,25 +0,0 @@\n-export interface IProgressBar {\n-  total: number;\n-  done: number;\n-}\n-\n-export const ProgressBar = ({ total = 0, done = 0 }: IProgressBar) => {\n-  const calPercentage = (doneValue: number, totalValue: number): string => {\n-    if (doneValue === 0 || totalValue === 0) return (0).toFixed(0);\n-    return ((100 * doneValue) / totalValue).toFixed(0);\n-  };\n-\n-  return (\n-    <div className=\"relative flex items-center gap-2\">\n-      <div className=\"w-full\">\n-        <div className=\"w-full overflow-hidden rounded-full bg-custom-background-80 shadow\">\n-          <div\n-            className=\"h-[6px] rounded-full bg-green-500 transition-all\"\n-            style={{ width: `${calPercentage(done, total)}%` }}\n-          />\n-        </div>\n-      </div>\n-      <div className=\"flex-shrink-0 text-xs font-medium\">{calPercentage(done, total)}% Done</div>\n-    </div>\n-  );\n-};\n"
        },
        {
          "path": "web/core/components/issues/sub-issues/properties.tsx",
          "status": "deleted",
          "diff": "Index: web/core/components/issues/sub-issues/properties.tsx\n===================================================================\n--- web/core/components/issues/sub-issues/properties.tsx\t55340f9 (parent)\n+++ web/core/components/issues/sub-issues/properties.tsx\t14dc6a5 (commit)\n@@ -1,86 +0,0 @@\n-import React from \"react\";\n-import { TIssueServiceType } from \"@plane/types\";\n-// hooks\n-import { PriorityDropdown, MemberDropdown, StateDropdown } from \"@/components/dropdowns\";\n-import { useIssueDetail } from \"@/hooks/store\";\n-// components\n-// types\n-import { TSubIssueOperations } from \"./root\";\n-\n-export interface IIssueProperty {\n-  workspaceSlug: string;\n-  parentIssueId: string;\n-  issueId: string;\n-  disabled: boolean;\n-  subIssueOperations: TSubIssueOperations;\n-  issueServiceType?: TIssueServiceType;\n-}\n-\n-export const IssueProperty: React.FC<IIssueProperty> = (props) => {\n-  const { workspaceSlug, parentIssueId, issueId, disabled, subIssueOperations, issueServiceType } = props;\n-  // hooks\n-  const {\n-    issue: { getIssueById },\n-  } = useIssueDetail(issueServiceType);\n-\n-  const issue = getIssueById(issueId);\n-\n-  if (!issue) return <></>;\n-  return (\n-    <div className=\"relative flex items-center gap-2\">\n-      <div className=\"h-5 flex-shrink-0\">\n-        <StateDropdown\n-          value={issue.state_id}\n-          projectId={issue.project_id ?? undefined}\n-          onChange={(val) =>\n-            issue.project_id &&\n-            subIssueOperations.updateSubIssue(\n-              workspaceSlug,\n-              issue.project_id,\n-              parentIssueId,\n-              issueId,\n-              {\n-                state_id: val,\n-              },\n-              { ...issue }\n-            )\n-          }\n-          disabled={!disabled}\n-          buttonVariant=\"border-with-text\"\n-        />\n-      </div>\n-\n-      <div className=\"h-5 flex-shrink-0\">\n-        <PriorityDropdown\n-          value={issue.priority}\n-          onChange={(val) =>\n-            issue.project_id &&\n-            subIssueOperations.updateSubIssue(workspaceSlug, issue.project_id, parentIssueId, issueId, {\n-              priority: val,\n-            })\n-          }\n-          disabled={!disabled}\n-          buttonVariant=\"border-without-text\"\n-          buttonClassName=\"border\"\n-        />\n-      </div>\n-\n-      <div className=\"h-5 flex-shrink-0\">\n-        <MemberDropdown\n-          value={issue.assignee_ids}\n-          projectId={issue.project_id ?? undefined}\n-          onChange={(val) =>\n-            issue.project_id &&\n-            subIssueOperations.updateSubIssue(workspaceSlug, issue.project_id, parentIssueId, issueId, {\n-              assignee_ids: val,\n-            })\n-          }\n-          disabled={!disabled}\n-          multiple\n-          buttonVariant={(issue?.assignee_ids || []).length > 0 ? \"transparent-without-text\" : \"border-without-text\"}\n-          buttonClassName={(issue?.assignee_ids || []).length > 0 ? \"hover:bg-transparent px-0\" : \"\"}\n-        />\n-      </div>\n-    </div>\n-  );\n-};\n"
        },
        {
          "path": "web/core/components/issues/sub-issues/root.tsx",
          "status": "deleted",
          "diff": "Index: web/core/components/issues/sub-issues/root.tsx\n===================================================================\n--- web/core/components/issues/sub-issues/root.tsx\t55340f9 (parent)\n+++ web/core/components/issues/sub-issues/root.tsx\t14dc6a5 (commit)\n@@ -1,546 +0,0 @@\n-\"use client\";\n-\n-import { FC, useCallback, useEffect, useMemo, useState } from \"react\";\n-import { observer } from \"mobx-react\";\n-import { usePathname } from \"next/navigation\";\n-// icons\n-import { Plus, ChevronRight, Loader, Pencil } from \"lucide-react\";\n-// types\n-import { IUser, TIssue } from \"@plane/types\";\n-// ui\n-import { CircularProgressIndicator, CustomMenu, LayersIcon, TOAST_TYPE, setToast } from \"@plane/ui\";\n-// components\n-import { ExistingIssuesListModal } from \"@/components/core\";\n-import { CreateUpdateIssueModal, DeleteIssueModal } from \"@/components/issues\";\n-// helpers\n-import { cn } from \"@/helpers/common.helper\";\n-import { copyTextToClipboard } from \"@/helpers/string.helper\";\n-// hooks\n-import { useEventTracker, useIssueDetail } from \"@/hooks/store\";\n-// local components\n-import useURLHash from \"@/hooks/use-url-hash\";\n-import { IssueList } from \"./issues-list\";\n-\n-export interface ISubIssuesRoot {\n-  workspaceSlug: string;\n-  projectId: string;\n-  parentIssueId: string;\n-  currentUser: IUser;\n-  disabled: boolean;\n-}\n-\n-export type TSubIssueOperations = {\n-  copyText: (text: string) => void;\n-  fetchSubIssues: (workspaceSlug: string, projectId: string, parentIssueId: string) => Promise<void>;\n-  addSubIssue: (workspaceSlug: string, projectId: string, parentIssueId: string, issueIds: string[]) => Promise<void>;\n-  updateSubIssue: (\n-    workspaceSlug: string,\n-    projectId: string,\n-    parentIssueId: string,\n-    issueId: string,\n-    issueData: Partial<TIssue>,\n-    oldIssue?: Partial<TIssue>,\n-    fromModal?: boolean\n-  ) => Promise<void>;\n-  removeSubIssue: (workspaceSlug: string, projectId: string, parentIssueId: string, issueId: string) => Promise<void>;\n-  deleteSubIssue: (workspaceSlug: string, projectId: string, parentIssueId: string, issueId: string) => Promise<void>;\n-};\n-\n-export const SubIssuesRoot: FC<ISubIssuesRoot> = observer((props) => {\n-  const { workspaceSlug, projectId, parentIssueId, disabled = false } = props;\n-  // router\n-  const pathname = usePathname();\n-  const hashValue = useURLHash();\n-  const {\n-    issue: { getIssueById },\n-    subIssues: { subIssuesByIssueId, stateDistributionByIssueId, subIssueHelpersByIssueId, setSubIssueHelpers },\n-    fetchSubIssues,\n-    createSubIssues,\n-    updateSubIssue,\n-    removeSubIssue,\n-    deleteSubIssue,\n-    isCreateIssueModalOpen,\n-    toggleCreateIssueModal,\n-    isSubIssuesModalOpen,\n-    toggleSubIssuesModal,\n-    toggleDeleteIssueModal,\n-  } = useIssueDetail();\n-  const { setTrackElement, captureIssueEvent } = useEventTracker();\n-  // state\n-\n-  type TIssueCrudState = { toggle: boolean; parentIssueId: string | undefined; issue: TIssue | undefined };\n-  const [issueCrudState, setIssueCrudState] = useState<{\n-    create: TIssueCrudState;\n-    existing: TIssueCrudState;\n-    update: TIssueCrudState;\n-    delete: TIssueCrudState;\n-  }>({\n-    create: {\n-      toggle: false,\n-      parentIssueId: undefined,\n-      issue: undefined,\n-    },\n-    existing: {\n-      toggle: false,\n-      parentIssueId: undefined,\n-      issue: undefined,\n-    },\n-    update: {\n-      toggle: false,\n-      parentIssueId: undefined,\n-      issue: undefined,\n-    },\n-    delete: {\n-      toggle: false,\n-      parentIssueId: undefined,\n-      issue: undefined,\n-    },\n-  });\n-\n-  const scrollToSubIssuesView = useCallback(() => {\n-    if (hashValue === \"sub-issues\") {\n-      setTimeout(() => {\n-        const subIssueDiv = document.getElementById(`sub-issues`);\n-        if (subIssueDiv)\n-          subIssueDiv.scrollIntoView({\n-            behavior: \"smooth\",\n-            block: \"start\",\n-          });\n-      }, 200);\n-    }\n-  }, [hashValue]);\n-\n-  useEffect(() => {\n-    if (hashValue) {\n-      scrollToSubIssuesView();\n-    }\n-  }, [hashValue, scrollToSubIssuesView]);\n-\n-  const handleIssueCrudState = (\n-    key: \"create\" | \"existing\" | \"update\" | \"delete\",\n-    _parentIssueId: string | null,\n-    issue: TIssue | null = null\n-  ) => {\n-    setIssueCrudState({\n-      ...issueCrudState,\n-      [key]: {\n-        toggle: !issueCrudState[key].toggle,\n-        parentIssueId: _parentIssueId,\n-        issue: issue,\n-      },\n-    });\n-  };\n-\n-  const subIssueOperations: TSubIssueOperations = useMemo(\n-    () => ({\n-      copyText: (text: string) => {\n-        const originURL = typeof window !== \"undefined\" && window.location.origin ? window.location.origin : \"\";\n-        copyTextToClipboard(`${originURL}${text}`).then(() => {\n-          setToast({\n-            type: TOAST_TYPE.SUCCESS,\n-            title: \"Link Copied!\",\n-            message: \"Work item link copied to clipboard.\",\n-          });\n-        });\n-      },\n-      fetchSubIssues: async (workspaceSlug: string, projectId: string, parentIssueId: string) => {\n-        try {\n-          await fetchSubIssues(workspaceSlug, projectId, parentIssueId);\n-        } catch (error) {\n-          setToast({\n-            type: TOAST_TYPE.ERROR,\n-            title: \"Error!\",\n-            message: \"Error fetching sub-work items\",\n-          });\n-        }\n-      },\n-      addSubIssue: async (workspaceSlug: string, projectId: string, parentIssueId: string, issueIds: string[]) => {\n-        try {\n-          await createSubIssues(workspaceSlug, projectId, parentIssueId, issueIds);\n-          setToast({\n-            type: TOAST_TYPE.SUCCESS,\n-            title: \"Success!\",\n-            message: \"Sub-work items added successfully\",\n-          });\n-        } catch (error) {\n-          setToast({\n-            type: TOAST_TYPE.ERROR,\n-            title: \"Error!\",\n-            message: \"Error adding sub-work item\",\n-          });\n-        }\n-      },\n-      updateSubIssue: async (\n-        workspaceSlug: string,\n-        projectId: string,\n-        parentIssueId: string,\n-        issueId: string,\n-        issueData: Partial<TIssue>,\n-        oldIssue: Partial<TIssue> = {},\n-        fromModal: boolean = false\n-      ) => {\n-        try {\n-          setSubIssueHelpers(parentIssueId, \"issue_loader\", issueId);\n-          await updateSubIssue(workspaceSlug, projectId, parentIssueId, issueId, issueData, oldIssue, fromModal);\n-          captureIssueEvent({\n-            eventName: \"Sub-issue updated\",\n-            payload: { ...oldIssue, ...issueData, state: \"SUCCESS\", element: \"Issue detail page\" },\n-            updates: {\n-              changed_property: Object.keys(issueData).join(\",\"),\n-              change_details: Object.values(issueData).join(\",\"),\n-            },\n-            path: pathname,\n-          });\n-          setToast({\n-            type: TOAST_TYPE.SUCCESS,\n-            title: \"Success!\",\n-            message: \"Sub-work item updated successfully\",\n-          });\n-          setSubIssueHelpers(parentIssueId, \"issue_loader\", issueId);\n-        } catch (error) {\n-          captureIssueEvent({\n-            eventName: \"Sub-issue updated\",\n-            payload: { ...oldIssue, ...issueData, state: \"FAILED\", element: \"Issue detail page\" },\n-            updates: {\n-              changed_property: Object.keys(issueData).join(\",\"),\n-              change_details: Object.values(issueData).join(\",\"),\n-            },\n-            path: pathname,\n-          });\n-          setToast({\n-            type: TOAST_TYPE.ERROR,\n-            title: \"Error!\",\n-            message: \"Error updating sub-work item\",\n-          });\n-        }\n-      },\n-      removeSubIssue: async (workspaceSlug: string, projectId: string, parentIssueId: string, issueId: string) => {\n-        try {\n-          setSubIssueHelpers(parentIssueId, \"issue_loader\", issueId);\n-          await removeSubIssue(workspaceSlug, projectId, parentIssueId, issueId);\n-          setToast({\n-            type: TOAST_TYPE.SUCCESS,\n-            title: \"Success!\",\n-            message: \"Sub-work item removed successfully\",\n-          });\n-          captureIssueEvent({\n-            eventName: \"Sub-issue removed\",\n-            payload: { id: issueId, state: \"SUCCESS\", element: \"Issue detail page\" },\n-            updates: {\n-              changed_property: \"parent_id\",\n-              change_details: parentIssueId,\n-            },\n-            path: pathname,\n-          });\n-          setSubIssueHelpers(parentIssueId, \"issue_loader\", issueId);\n-        } catch (error) {\n-          captureIssueEvent({\n-            eventName: \"Sub-issue removed\",\n-            payload: { id: issueId, state: \"FAILED\", element: \"Issue detail page\" },\n-            updates: {\n-              changed_property: \"parent_id\",\n-              change_details: parentIssueId,\n-            },\n-            path: pathname,\n-          });\n-          setToast({\n-            type: TOAST_TYPE.ERROR,\n-            title: \"Error!\",\n-            message: \"Error removing sub-work item\",\n-          });\n-        }\n-      },\n-      deleteSubIssue: async (workspaceSlug: string, projectId: string, parentIssueId: string, issueId: string) => {\n-        try {\n-          setSubIssueHelpers(parentIssueId, \"issue_loader\", issueId);\n-          await deleteSubIssue(workspaceSlug, projectId, parentIssueId, issueId);\n-          captureIssueEvent({\n-            eventName: \"Sub-issue deleted\",\n-            payload: { id: issueId, state: \"SUCCESS\", element: \"Issue detail page\" },\n-            path: pathname,\n-          });\n-          setSubIssueHelpers(parentIssueId, \"issue_loader\", issueId);\n-        } catch (error) {\n-          captureIssueEvent({\n-            eventName: \"Sub-issue removed\",\n-            payload: { id: issueId, state: \"FAILED\", element: \"Issue detail page\" },\n-            path: pathname,\n-          });\n-          setToast({\n-            type: TOAST_TYPE.ERROR,\n-            title: \"Error!\",\n-            message: \"Error deleting work item\",\n-          });\n-        }\n-      },\n-    }),\n-    [fetchSubIssues, createSubIssues, updateSubIssue, removeSubIssue, deleteSubIssue, setSubIssueHelpers]\n-  );\n-\n-  const issue = getIssueById(parentIssueId);\n-  const subIssuesDistribution = stateDistributionByIssueId(parentIssueId);\n-  const subIssues = subIssuesByIssueId(parentIssueId);\n-  const subIssueHelpers = subIssueHelpersByIssueId(`${parentIssueId}_root`);\n-\n-  const handleFetchSubIssues = useCallback(async () => {\n-    if (!subIssueHelpers.issue_visibility.includes(parentIssueId)) {\n-      setSubIssueHelpers(`${parentIssueId}_root`, \"preview_loader\", parentIssueId);\n-      await subIssueOperations.fetchSubIssues(workspaceSlug, projectId, parentIssueId);\n-      setSubIssueHelpers(`${parentIssueId}_root`, \"preview_loader\", parentIssueId);\n-    }\n-    setSubIssueHelpers(`${parentIssueId}_root`, \"issue_visibility\", parentIssueId);\n-  }, [\n-    parentIssueId,\n-    projectId,\n-    setSubIssueHelpers,\n-    subIssueHelpers.issue_visibility,\n-    subIssueOperations,\n-    workspaceSlug,\n-  ]);\n-\n-  useEffect(() => {\n-    handleFetchSubIssues();\n-\n-    return () => {\n-      handleFetchSubIssues();\n-    };\n-    // eslint-disable-next-line react-hooks/exhaustive-deps\n-  }, [parentIssueId]);\n-\n-  if (!issue) return <></>;\n-  return (\n-    <div id=\"sub-issues\" className=\"h-full w-full space-y-2\">\n-      {!subIssues ? (\n-        <div className=\"py-3 text-center text-sm  font-medium text-custom-text-300\">Loading...</div>\n-      ) : (\n-        <>\n-          {subIssues && subIssues?.length > 0 ? (\n-            <>\n-              <div className=\"relative flex items-center justify-between gap-2 text-xs\">\n-                <div className=\"flex items-center gap-2\">\n-                  <button\n-                    type=\"button\"\n-                    className=\"flex items-center gap-1 rounded py-1 px-2 transition-all hover:bg-custom-background-80 font-medium\"\n-                    onClick={handleFetchSubIssues}\n-                  >\n-                    <div className=\"flex flex-shrink-0 items-center justify-center\">\n-                      {subIssueHelpers.preview_loader.includes(parentIssueId) ? (\n-                        <Loader strokeWidth={2} className=\"h-3 w-3 animate-spin\" />\n-                      ) : (\n-                        <ChevronRight\n-                          className={cn(\"h-3 w-3 transition-all\", {\n-                            \"rotate-90\": subIssueHelpers.issue_visibility.includes(parentIssueId),\n-                          })}\n-                          strokeWidth={2}\n-                        />\n-                      )}\n-                    </div>\n-                    <div>Sub-work items</div>\n-                  </button>\n-                  <div className=\"flex items-center gap-2 text-custom-text-300\">\n-                    <CircularProgressIndicator\n-                      size={16}\n-                      percentage={\n-                        subIssuesDistribution?.completed?.length && subIssues.length\n-                          ? (subIssuesDistribution?.completed?.length / subIssues.length) * 100\n-                          : 0\n-                      }\n-                      strokeWidth={3}\n-                    />\n-                    <span>\n-                      {subIssuesDistribution?.completed?.length ?? 0}/{subIssues.length} Done\n-                    </span>\n-                  </div>\n-                </div>\n-\n-                {!disabled && (\n-                  <CustomMenu\n-                    label={\n-                      <>\n-                        <Plus className=\"h-3 w-3\" />\n-                        Add sub-work item\n-                      </>\n-                    }\n-                    buttonClassName=\"whitespace-nowrap\"\n-                    placement=\"bottom-end\"\n-                    noBorder\n-                    noChevron\n-                  >\n-                    <CustomMenu.MenuItem\n-                      onClick={() => {\n-                        setTrackElement(\"Issue detail nested sub-issue\");\n-                        handleIssueCrudState(\"create\", parentIssueId, null);\n-                        toggleCreateIssueModal(true);\n-                      }}\n-                    >\n-                      <div className=\"flex items-center gap-2\">\n-                        <Pencil className=\"h-3 w-3\" />\n-                        <span>Create new</span>\n-                      </div>\n-                    </CustomMenu.MenuItem>\n-                    <CustomMenu.MenuItem\n-                      onClick={() => {\n-                        setTrackElement(\"Issue detail nested sub-issue\");\n-                        handleIssueCrudState(\"existing\", parentIssueId, null);\n-                        toggleSubIssuesModal(issue.id);\n-                      }}\n-                    >\n-                      <div className=\"flex items-center gap-2\">\n-                        <LayersIcon className=\"h-3 w-3\" />\n-                        <span>Add existing</span>\n-                      </div>\n-                    </CustomMenu.MenuItem>\n-                  </CustomMenu>\n-                )}\n-              </div>\n-\n-              {subIssueHelpers.issue_visibility.includes(parentIssueId) && (\n-                <IssueList\n-                  workspaceSlug={workspaceSlug}\n-                  projectId={projectId}\n-                  parentIssueId={parentIssueId}\n-                  rootIssueId={parentIssueId}\n-                  spacingLeft={10}\n-                  disabled={!disabled}\n-                  handleIssueCrudState={handleIssueCrudState}\n-                  subIssueOperations={subIssueOperations}\n-                />\n-              )}\n-            </>\n-          ) : (\n-            !disabled && (\n-              <div className=\"flex items-center justify-between\">\n-                <div className=\"text-xs italic text-custom-text-300\">No sub-work items yet</div>\n-                <CustomMenu\n-                  label={\n-                    <>\n-                      <Plus className=\"h-3 w-3\" />\n-                      Add sub-work item\n-                    </>\n-                  }\n-                  buttonClassName=\"whitespace-nowrap\"\n-                  placement=\"bottom-end\"\n-                  noBorder\n-                  noChevron\n-                >\n-                  <CustomMenu.MenuItem\n-                    onClick={() => {\n-                      setTrackElement(\"Issue detail nested sub-issue\");\n-                      handleIssueCrudState(\"create\", parentIssueId, null);\n-                      toggleCreateIssueModal(true);\n-                    }}\n-                  >\n-                    <div className=\"flex items-center gap-2\">\n-                      <Pencil className=\"h-3 w-3\" />\n-                      <span>Create new</span>\n-                    </div>\n-                  </CustomMenu.MenuItem>\n-                  <CustomMenu.MenuItem\n-                    onClick={() => {\n-                      setTrackElement(\"Issue detail nested sub-issue\");\n-                      handleIssueCrudState(\"existing\", parentIssueId, null);\n-                      toggleSubIssuesModal(issue.id);\n-                    }}\n-                  >\n-                    <div className=\"flex items-center gap-2\">\n-                      <LayersIcon className=\"h-3 w-3\" />\n-                      <span>Add existing</span>\n-                    </div>\n-                  </CustomMenu.MenuItem>\n-                </CustomMenu>\n-              </div>\n-            )\n-          )}\n-\n-          {/* issue create, add from existing , update and delete modals */}\n-          {issueCrudState?.create?.toggle && issueCrudState?.create?.parentIssueId && isCreateIssueModalOpen && (\n-            <CreateUpdateIssueModal\n-              isOpen={issueCrudState?.create?.toggle}\n-              data={{\n-                parent_id: issueCrudState?.create?.parentIssueId,\n-              }}\n-              onClose={() => {\n-                handleIssueCrudState(\"create\", null, null);\n-                toggleCreateIssueModal(false);\n-              }}\n-              onSubmit={async (_issue: TIssue) => {\n-                if (_issue.parent_id) {\n-                  await subIssueOperations.addSubIssue(workspaceSlug, projectId, _issue.parent_id, [_issue.id]);\n-                }\n-              }}\n-            />\n-          )}\n-\n-          {issueCrudState?.existing?.toggle && issueCrudState?.existing?.parentIssueId && isSubIssuesModalOpen && (\n-            <ExistingIssuesListModal\n-              workspaceSlug={workspaceSlug}\n-              projectId={projectId}\n-              isOpen={issueCrudState?.existing?.toggle}\n-              handleClose={() => {\n-                handleIssueCrudState(\"existing\", null, null);\n-                toggleSubIssuesModal(null);\n-              }}\n-              searchParams={{ sub_issue: true, issue_id: issueCrudState?.existing?.parentIssueId }}\n-              handleOnSubmit={(_issue) =>\n-                subIssueOperations.addSubIssue(\n-                  workspaceSlug,\n-                  projectId,\n-                  parentIssueId,\n-                  _issue.map((issue) => issue.id)\n-                )\n-              }\n-              workspaceLevelToggle\n-            />\n-          )}\n-\n-          {issueCrudState?.update?.toggle && issueCrudState?.update?.issue && (\n-            <>\n-              <CreateUpdateIssueModal\n-                isOpen={issueCrudState?.update?.toggle}\n-                onClose={() => {\n-                  handleIssueCrudState(\"update\", null, null);\n-                  toggleCreateIssueModal(false);\n-                }}\n-                data={issueCrudState?.update?.issue ?? undefined}\n-                onSubmit={async (_issue: TIssue) => {\n-                  await subIssueOperations.updateSubIssue(\n-                    workspaceSlug,\n-                    projectId,\n-                    parentIssueId,\n-                    _issue.id,\n-                    _issue,\n-                    issueCrudState?.update?.issue,\n-                    true\n-                  );\n-                }}\n-              />\n-            </>\n-          )}\n-\n-          {issueCrudState?.delete?.toggle &&\n-            issueCrudState?.delete?.issue &&\n-            issueCrudState.delete.parentIssueId &&\n-            issueCrudState.delete.issue.id && (\n-              <DeleteIssueModal\n-                isOpen={issueCrudState?.delete?.toggle}\n-                handleClose={() => {\n-                  handleIssueCrudState(\"delete\", null, null);\n-                  toggleDeleteIssueModal(null);\n-                }}\n-                data={issueCrudState?.delete?.issue as TIssue}\n-                onSubmit={async () =>\n-                  await subIssueOperations.deleteSubIssue(\n-                    workspaceSlug,\n-                    projectId,\n-                    issueCrudState?.delete?.parentIssueId as string,\n-                    issueCrudState?.delete?.issue?.id as string\n-                  )\n-                }\n-                isSubIssue\n-              />\n-            )}\n-        </>\n-      )}\n-    </div>\n-  );\n-});\n"
        },
        {
          "path": "web/core/services/issue/issue.service.ts",
          "status": "modified",
          "diff": "Index: web/core/services/issue/issue.service.ts\n===================================================================\n--- web/core/services/issue/issue.service.ts\t55340f9 (parent)\n+++ web/core/services/issue/issue.service.ts\t14dc6a5 (commit)\n@@ -266,11 +266,17 @@\n         throw error?.response?.data;\n       });\n   }\n \n-  async subIssues(workspaceSlug: string, projectId: string, issueId: string): Promise<TIssueSubIssues> {\n+  async subIssues(\n+    workspaceSlug: string,\n+    projectId: string,\n+    issueId: string,\n+    queries?: Partial<Record<TIssueParams, string | boolean>>\n+  ): Promise<TIssueSubIssues> {\n     return this.get(\n-      `/api/workspaces/${workspaceSlug}/projects/${projectId}/${this.serviceType}/${issueId}/${this.serviceType === EIssueServiceType.EPICS ? \"issues\" : \"sub-issues\"}/`\n+      `/api/workspaces/${workspaceSlug}/projects/${projectId}/${this.serviceType}/${issueId}/${this.serviceType === EIssueServiceType.EPICS ? \"issues\" : \"sub-issues\"}/`,\n+      { params: queries }\n     )\n       .then((response) => response?.data)\n       .catch((error) => {\n         throw error?.response?.data;\n"
        },
        {
          "path": "web/core/store/issue/issue-details/sub_issues.store.ts",
          "status": "modified",
          "diff": "Index: web/core/store/issue/issue-details/sub_issues.store.ts\n===================================================================\n--- web/core/store/issue/issue-details/sub_issues.store.ts\t55340f9 (parent)\n+++ web/core/store/issue/issue-details/sub_issues.store.ts\t14dc6a5 (commit)\n@@ -12,14 +12,18 @@\n   TIssueSubIssuesStateDistributionMap,\n   TIssueSubIssuesIdMap,\n   TSubIssuesStateDistribution,\n   TIssueServiceType,\n+  TLoader,\n+  TGroupedIssues,\n+  TGroupedIssueCount,\n } from \"@plane/types\";\n // services\n import { updatePersistentLayer } from \"@/local-db/utils/utils\";\n import { IssueService } from \"@/services/issue\";\n // store\n import { IIssueDetail } from \"./root.store\";\n+import { IWorkItemSubIssueFiltersStore, WorkItemSubIssueFiltersStore } from \"./sub_issues_filter.store\";\n \n export interface IIssueSubIssuesStoreActions {\n   fetchSubIssues: (workspaceSlug: string, projectId: string, parentIssueId: string) => Promise<TIssueSubIssues>;\n   createSubIssues: (\n@@ -46,13 +50,18 @@\n export interface IIssueSubIssuesStore extends IIssueSubIssuesStoreActions {\n   // observables\n   subIssuesStateDistribution: TIssueSubIssuesStateDistributionMap;\n   subIssues: TIssueSubIssuesIdMap;\n+  groupedSubIssuesMap: Record<string, TGroupedIssues>;\n+  groupedSubIssuesCount: TGroupedIssueCount;\n   subIssueHelpers: Record<string, TSubIssueHelpers>; // parent_issue_id -> TSubIssueHelpers\n+  loader: TLoader;\n+  filters: IWorkItemSubIssueFiltersStore;\n   // helper methods\n   stateDistributionByIssueId: (issueId: string) => TSubIssuesStateDistribution | undefined;\n   subIssuesByIssueId: (issueId: string) => string[] | undefined;\n   subIssueHelpersByIssueId: (issueId: string) => TSubIssueHelpers;\n+  groupedSubIssuesByIssueId: (issueId: string) => TGroupedIssues | undefined;\n   // actions\n   fetchOtherProjectProperties: (workspaceSlug: string, projectIds: string[]) => Promise<void>;\n   setSubIssueHelpers: (parentIssueId: string, key: TSubIssueHelpersKeys, value: string) => void;\n }\n@@ -60,9 +69,14 @@\n export class IssueSubIssuesStore implements IIssueSubIssuesStore {\n   // observables\n   subIssuesStateDistribution: TIssueSubIssuesStateDistributionMap = {};\n   subIssues: TIssueSubIssuesIdMap = {};\n+  groupedSubIssuesMap: Record<string, TGroupedIssues> = {};\n+  groupedSubIssuesCount: TGroupedIssueCount = {};\n   subIssueHelpers: Record<string, TSubIssueHelpers> = {};\n+  loader: TLoader = undefined;\n+\n+  filters: IWorkItemSubIssueFiltersStore;\n   // root store\n   rootIssueDetailStore: IIssueDetail;\n   // services\n   serviceType;\n@@ -73,17 +87,21 @@\n       // observables\n       subIssuesStateDistribution: observable,\n       subIssues: observable,\n       subIssueHelpers: observable,\n+      groupedSubIssuesMap: observable,\n+      loader: observable.ref,\n       // actions\n       setSubIssueHelpers: action,\n       fetchSubIssues: action,\n       createSubIssues: action,\n       updateSubIssue: action,\n       removeSubIssue: action,\n       deleteSubIssue: action,\n       fetchOtherProjectProperties: action,\n+      groupedSubIssuesByIssueId: action,\n     });\n+    this.filters = new WorkItemSubIssueFiltersStore(this);\n     // root store\n     this.rootIssueDetailStore = rootStore;\n     // services\n     this.serviceType = serviceType;\n@@ -100,8 +118,10 @@\n     if (!issueId) return undefined;\n     return this.subIssues[issueId] ?? undefined;\n   };\n \n+  groupedSubIssuesByIssueId = (issueId: string) => this.groupedSubIssuesMap[issueId] ?? undefined;\n+\n   subIssueHelpersByIssueId = (issueId: string) => ({\n     preview_loader: this.subIssueHelpers?.[issueId]?.preview_loader || [],\n     issue_visibility: this.subIssueHelpers?.[issueId]?.issue_visibility || [],\n     issue_loader: this.subIssueHelpers?.[issueId]?.issue_loader || [],\n@@ -117,30 +137,39 @@\n     });\n   };\n \n   fetchSubIssues = async (workspaceSlug: string, projectId: string, parentIssueId: string) => {\n-    const response = await this.issueService.subIssues(workspaceSlug, projectId, parentIssueId);\n+    // get filter params\n+    const filterParams = this.filters.computedFilterParams(parentIssueId);\n+    const response = await this.issueService.subIssues(workspaceSlug, projectId, parentIssueId, filterParams);\n+\n     const subIssuesStateDistribution = response?.state_distribution ?? {};\n-    const subIssues = (response.sub_issues ?? []) as TIssue[];\n-    this.rootIssueDetailStore.rootIssueStore.issues.addIssue(subIssues);\n-    // fetch other issues states and members when sub-issues are from different project\n-    if (subIssues && subIssues.length > 0) {\n+\n+    // process sub issues response\n+    const { issueList, groupedIssues } = this.filters.processSubIssueResponse(response.sub_issues);\n+\n+    // set grouped issues count\n+    set(this.groupedSubIssuesMap, [parentIssueId], groupedIssues);\n+\n+    this.rootIssueDetailStore.rootIssueStore.issues.addIssue(issueList);\n+\n+    if (issueList && issueList.length > 0) {\n       const otherProjectIds = uniq(\n-        subIssues.map((issue) => issue.project_id).filter((id) => !!id && id !== projectId)\n+        issueList.map((issue) => issue.project_id).filter((id) => !!id && id !== projectId)\n       ) as string[];\n       this.fetchOtherProjectProperties(workspaceSlug, otherProjectIds);\n     }\n-    if (subIssues) {\n+    if (issueList) {\n       this.rootIssueDetailStore.rootIssueStore.issues.updateIssue(parentIssueId, {\n-        sub_issues_count: subIssues.length,\n+        sub_issues_count: issueList.length,\n       });\n     }\n     runInAction(() => {\n       set(this.subIssuesStateDistribution, parentIssueId, subIssuesStateDistribution);\n       set(\n         this.subIssues,\n         parentIssueId,\n-        subIssues.map((issue) => issue.id)\n+        issueList.map((issue) => issue.id)\n       );\n     });\n     return response;\n   };\n@@ -281,9 +310,9 @@\n       // update sub-issues_count of the parent issue\n       set(\n         this.rootIssueDetailStore.rootIssueStore.issues.issuesMap,\n         [parentIssueId, \"sub_issues_count\"],\n-        this.subIssues[parentIssueId].length\n+        this.subIssues[parentIssueId]?.length\n       );\n     });\n \n     if (this.serviceType === EIssueServiceType.ISSUES) {\n@@ -318,9 +347,9 @@\n       // update sub-issues_count of the parent issue\n       set(\n         this.rootIssueDetailStore.rootIssueStore.issues.issuesMap,\n         [parentIssueId, \"sub_issues_count\"],\n-        this.subIssues[parentIssueId].length\n+        this.subIssues[parentIssueId]?.length\n       );\n     });\n \n     if (this.serviceType === EIssueServiceType.ISSUES) {\n"
        },
        {
          "path": "web/core/store/issue/issue-details/sub_issues_filter.store.ts",
          "status": "added",
          "diff": "Index: web/core/store/issue/issue-details/sub_issues_filter.store.ts\n===================================================================\n--- web/core/store/issue/issue-details/sub_issues_filter.store.ts\t55340f9 (parent)\n+++ web/core/store/issue/issue-details/sub_issues_filter.store.ts\t14dc6a5 (commit)\n@@ -0,0 +1,202 @@\n+import set from \"lodash/set\";\n+import { action, makeObservable, observable } from \"mobx\";\n+import { ALL_ISSUES, EIssueFilterType, EIssueGroupByToServerOptions } from \"@plane/constants\";\n+import {\n+  IIssueDisplayFilterOptions,\n+  IIssueDisplayProperties,\n+  IIssueFilters,\n+  TGroupedIssueCount,\n+  TGroupedIssues,\n+  TIssue,\n+  TIssueParams,\n+  TIssues,\n+  TSubGroupedIssues,\n+  TSubIssueResponse,\n+} from \"@plane/types\";\n+import { IIssueSubIssuesStore } from \"./sub_issues.store\";\n+\n+export interface IWorkItemSubIssueFiltersStore {\n+  subIssueFiltersMap: Record<string, Partial<IIssueFilters>>;\n+  // helpers methods\n+  updateSubIssueFilters: (\n+    workspaceSlug: string,\n+    projectId: string,\n+    filterType: EIssueFilterType,\n+    filters: IIssueDisplayFilterOptions | IIssueDisplayProperties,\n+    parentId: string\n+  ) => Promise<void>;\n+  getSubIssueFilters: (parentId: string) => Partial<IIssueFilters>;\n+  computedFilterParams: (parentId: string) => Partial<Record<TIssueParams, string | boolean>>;\n+  processSubIssueResponse: (issueResponse: TSubIssueResponse) => {\n+    issueList: TIssue[];\n+    groupedIssues: TIssues;\n+    groupedIssueCount: TGroupedIssueCount;\n+  };\n+}\n+\n+export class WorkItemSubIssueFiltersStore implements IWorkItemSubIssueFiltersStore {\n+  // observables\n+  subIssueFiltersMap: Record<string, Partial<IIssueFilters>> = {};\n+\n+  subIssueStore: IIssueSubIssuesStore;\n+\n+  constructor(subIssueStore: IIssueSubIssuesStore) {\n+    makeObservable(this, {\n+      subIssueFiltersMap: observable,\n+      updateSubIssueFilters: action,\n+      getSubIssueFilters: action,\n+    });\n+    // sub issue store\n+    this.subIssueStore = subIssueStore;\n+  }\n+\n+  /**\n+   * @description This method is used to initialize the sub issue filters\n+   * @param parentId\n+   */\n+  initSubIssueFilters = (parentId: string) => {\n+    set(this.subIssueFiltersMap, [parentId], {\n+      displayFilters: {},\n+      displayProperties: {\n+        key: true,\n+        issue_type: true,\n+        assignee: true,\n+        start_date: true,\n+        due_date: true,\n+        labels: true,\n+        priority: true,\n+        state: true,\n+      },\n+    });\n+  };\n+\n+  /**\n+   * @description This method is used to process the sub issue response to provide the data to update the store\n+   * @param issueResponse\n+   * @returns issueList, list of issues data\n+   * @returns groupedIssues, grouped issue ids\n+   * @returns groupedIssueCount, object containing issue counts of individual groups\n+   */\n+  processSubIssueResponse = (\n+    issueResponse: TSubIssueResponse\n+  ): {\n+    issueList: TIssue[];\n+    groupedIssues: TIssues;\n+    groupedIssueCount: TGroupedIssueCount;\n+  } => {\n+    const issueResult = issueResponse;\n+\n+    if (!issueResult) {\n+      return {\n+        issueList: [],\n+        groupedIssues: {},\n+        groupedIssueCount: {},\n+      };\n+    }\n+\n+    //if is an array then it's an ungrouped response. return values with groupId as ALL_ISSUES\n+    if (Array.isArray(issueResult)) {\n+      return {\n+        issueList: issueResult,\n+        groupedIssues: {\n+          [ALL_ISSUES]: issueResult.map((issue) => issue.id),\n+        },\n+        groupedIssueCount: {\n+          [ALL_ISSUES]: issueResult.length,\n+        },\n+      };\n+    }\n+\n+    const issueList: TIssue[] = [];\n+    const groupedIssues: TGroupedIssues | TSubGroupedIssues = {};\n+    const groupedIssueCount: TGroupedIssueCount = {};\n+\n+    // update total issue count to ALL_ISSUES\n+    set(groupedIssueCount, [ALL_ISSUES], issueResult.length);\n+\n+    // loop through all the groupIds from issue Result\n+    for (const groupId in issueResult) {\n+      const groupIssueResult = issueResult[groupId];\n+\n+      // if groupIssueResult is undefined then continue the loop\n+      if (!groupIssueResult) continue;\n+\n+      // set grouped Issue count of the current groupId\n+      set(groupedIssueCount, [groupId], groupIssueResult.length);\n+\n+      // add the result to issueList\n+      issueList.push(...groupIssueResult);\n+      // set the issue Ids to the groupId path\n+      set(\n+        groupedIssues,\n+        [groupId],\n+        groupIssueResult.map((issue) => issue.id)\n+      );\n+    }\n+\n+    return { issueList, groupedIssues, groupedIssueCount };\n+  };\n+\n+  /**\n+   * @description This method is used to get the sub issue filters\n+   * @param parentId\n+   * @returns IIssueFilters\n+   */\n+  getSubIssueFilters = (parentId: string) => {\n+    if (!this.subIssueFiltersMap[parentId]) {\n+      this.initSubIssueFilters(parentId);\n+    }\n+    return this.subIssueFiltersMap[parentId];\n+  };\n+\n+  computedFilterParams = (parentId: string) => {\n+    const displayFilters = this.getSubIssueFilters(parentId).displayFilters;\n+\n+    const computedFilters: Partial<Record<TIssueParams, undefined | string[] | boolean | string>> = {\n+      order_by: displayFilters?.order_by || undefined,\n+      group_by: displayFilters?.group_by ? EIssueGroupByToServerOptions[displayFilters.group_by] : undefined,\n+    };\n+\n+    const issueFiltersParams: Partial<Record<TIssueParams, boolean | string>> = {};\n+    Object.keys(computedFilters).forEach((key) => {\n+      const _key = key as TIssueParams;\n+      const _value: string | boolean | string[] | undefined = computedFilters[_key];\n+      const nonEmptyArrayValue = Array.isArray(_value) && _value.length === 0 ? undefined : _value;\n+      if (nonEmptyArrayValue != undefined)\n+        issueFiltersParams[_key] = Array.isArray(nonEmptyArrayValue)\n+          ? nonEmptyArrayValue.join(\",\")\n+          : nonEmptyArrayValue;\n+    });\n+\n+    return issueFiltersParams;\n+  };\n+\n+  /**\n+   * @description This method is used to update the sub issue filters\n+   * @param projectId\n+   * @param filterType\n+   * @param filters\n+   */\n+  updateSubIssueFilters = async (\n+    workspaceSlug: string,\n+    projectId: string,\n+    filterType: EIssueFilterType,\n+    filters: IIssueDisplayFilterOptions | IIssueDisplayProperties,\n+    parentId: string\n+  ) => {\n+    const _filters = this.getSubIssueFilters(parentId);\n+    switch (filterType) {\n+      case EIssueFilterType.DISPLAY_FILTERS: {\n+        set(this.subIssueFiltersMap, [parentId, \"displayFilters\"], { ..._filters.displayFilters, ...filters });\n+        this.subIssueStore.fetchSubIssues(workspaceSlug, projectId, parentId);\n+        break;\n+      }\n+      case EIssueFilterType.DISPLAY_PROPERTIES:\n+        set(this.subIssueFiltersMap, [parentId, \"displayProperties\"], {\n+          ..._filters.displayProperties,\n+          ...filters,\n+        });\n+        break;\n+    }\n+  };\n+}\n"
        }
      ]
    },
    {
      "id": "add-table-handles",
      "sha": "fcb6e269a0a5ceca2f4b2951e3cccdbd6c312f3a",
      "parentSha": "853423608c884f38fedbf6cf66672528f29dce45",
      "spec": "Implement table selection outline and interactive insert handles for TipTap tables, and wire them into the table extensions with accompanying styles.\n\n1) Add table cell selection outline plugin\n- Create packages/editor/src/core/extensions/table/plugins/selection-outline/plugin.ts that:\n  - Registers a ProseMirror Plugin keyed uniquely for table cell selection outlines.\n  - When the editor is editable and the selection is a CellSelection inside a table, compute DecorationSet for each selected cell adding CSS classes that render an outline only on the outer perimeter of the selection.\n  - Use TableMap to determine adjacency and only add top/left/right/bottom classes when the neighboring cell is not part of the selection or is out of bounds.\n  - Do not decorate when the editor is not editable or when selection is not a CellSelection.\n  - Expose the decorations via props.decorations.\n- Create packages/editor/src/core/extensions/table/plugins/selection-outline/utils.ts with helpers to:\n  - Given a cell start position and a TableMap, find adjacent cell positions (top, bottom, left, right) or undefined when out of bounds.\n  - Given the current cell start and the set of selected cell starts, return an array of CSS class names to apply (selectedCell-border-top, -right, -bottom, -left) only for the edges of the selection.\n- Update packages/editor/src/core/extensions/table/table-cell.ts to import the new plugin from ./plugins/selection-outline/plugin and to include it in addProseMirrorPlugins so that cell selections render with the correct visual outline.\n\n2) Add table insert column/row handles plugin\n- Create packages/editor/src/core/extensions/table/plugins/insert-handlers/plugin.ts that:\n  - Registers a ProseMirror Plugin keyed for table insert handles.\n  - Maintains a map of DOM table elements to their associated TableInfo, which includes the ProseMirror node and position, plus references to appended UI buttons.\n  - On view init and when the document changes, scans the current editor DOM to find all table elements, maps them to their PM table nodes/positions, and ensures each table has exactly one column-insert button and one row-insert button appended. Remove any UI elements for tables no longer present. When the editor is not editable, remove all buttons.\n  - On plugin destroy, clean up all appended buttons and clear the map.\n- Create packages/editor/src/core/extensions/table/plugins/insert-handlers/utils.ts that:\n  - Defines TableInfo (tableElement, tableNode, tablePos, optional columnButtonElement/rowButtonElement).\n  - Exposes a findAllTables(editor) utility to locate each DOM table and resolve its PM node and position within the document.\n  - Provides createColumnInsertButton(editor, tableInfo) and createRowInsertButton(editor, tableInfo) that return positioned button elements with ARIA labels and an add icon. The buttons must support:\n    - Click: insert a new column (for the column button) or a new row (for the row button) at the end of the table.\n    - Drag: while holding the mouse button, moving in the positive direction repeatedly inserts new columns (drag right) or rows (drag down) when a movement threshold is crossed; moving in the negative direction removes the last column/row only if it is empty, again on crossing thresholds. Use separate drag thresholds to start dragging and action thresholds to trigger inserts/deletes. Ensure drag state cleans up on mouseup and prevent text selection while dragging.\n  - Implement helpers to insert after the last column/row using @tiptap/pm/tables addColumn/addRow and to remove the last column/row using removeColumn/removeRow only if that final column/row is empty. Use TableMap to compute sizes and positions, and helpers to determine whether a given cell, column, or row is empty.\n- Update packages/editor/src/core/extensions/table/table/table.ts to register the insert-handles plugin in addProseMirrorPlugins by importing TableInsertPlugin from ../plugins/insert-handlers/plugin and including TableInsertPlugin(this.editor) in the returned plugin list (alongside existing table editing/controls and optional columnResizing).\n\n3) Update styles for tables, selection outline, and insert handles\n- Modify packages/editor/src/styles/table.css to:\n  - Ensure .table-wrapper has enough space for the bottom row insert handle (e.g., padding-bottom) and that table has position: relative.\n  - Adjust table margins to remove bottom margin that would interfere with the bottom handle.\n  - Add CSS to render the selection perimeter using classes selectedCell-border-top/left/right/bottom applied to td/th.selectedCell, using a 2px highlight color for borders.\n  - Add styles for the column/row insert buttons (.table-column-insert-button and .table-row-insert-button) so they are absolutely positioned at the right side and bottom of the table respectively, have subtle background/border, are shown on table hover, and gain a visual active/dragging state. Include a small plus icon and appropriate transitions.\n  - Preserve existing column resize handle styling and table-controls styling.\n\nBehavioral expectations\n- When selecting multiple cells, only the outer perimeter shows highlighted borders; internal borders are not doubled.\n- When hovering a table in editable mode, a vertical handle appears at the right edge (column insert) and a horizontal handle at the bottom (row insert). Clicking inserts one at the end. Dragging beyond the action threshold inserts more in the drag direction; dragging backwards deletes only if the last column/row is empty. No UI should appear or persist in read-only mode. All appended DOM is cleaned up on plugin destroy or when tables are removed.\n",
      "prompt": "Enhance the TipTap table experience with two features: a visual outline for multi-cell selections and interactive insert handles for adding/removing rows and columns. The selection outline should highlight only the perimeter of a contiguous cell selection. The insert handles should appear on hover at the tables right and bottom edges, allow single-click insertion at the end, support drag-to-insert multiple, and allow drag-back to remove only if the trailing column/row is empty. Integrate these as ProseMirror plugins with the existing table extensions so they are automatically enabled when the editor is editable, and add the necessary CSS for the outline and handles. Ensure DOM elements are created/removed appropriately as tables appear/disappear or when the editor becomes read-only.",
      "supplementalFiles": [
        "packages/editor/src/core/extensions/table/table/utilities/create-table.ts",
        "packages/editor/src/core/extensions/table/table/table-controls.ts",
        "packages/editor/src/core/extensions/table/index.ts",
        "packages/editor/src/core/extensions/table/table/index.ts",
        "packages/editor/src/core/extensions/table/table/utilities/delete-table-when-all-cells-selected.ts"
      ],
      "fileDiffs": [
        {
          "path": "packages/editor/src/core/extensions/table/plugins/insert-handlers/plugin.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/table/plugins/insert-handlers/plugin.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/plugins/insert-handlers/plugin.ts\t8534236 (parent)\n+++ packages/editor/src/core/extensions/table/plugins/insert-handlers/plugin.ts\tfcb6e26 (commit)\n@@ -0,0 +1,87 @@\n+import { type Editor } from \"@tiptap/core\";\n+import { Plugin, PluginKey } from \"@tiptap/pm/state\";\n+// local imports\n+import { createColumnInsertButton, createRowInsertButton, findAllTables, TableInfo } from \"./utils\";\n+\n+const TABLE_INSERT_PLUGIN_KEY = new PluginKey(\"table-insert\");\n+\n+export const TableInsertPlugin = (editor: Editor): Plugin => {\n+  const tableMap = new Map<HTMLElement, TableInfo>();\n+\n+  const setupTable = (tableInfo: TableInfo) => {\n+    const { tableElement } = tableInfo;\n+\n+    // Create and add column button if it doesn't exist\n+    if (!tableInfo.columnButtonElement) {\n+      const columnButton = createColumnInsertButton(editor, tableInfo);\n+      tableElement.appendChild(columnButton);\n+      tableInfo.columnButtonElement = columnButton;\n+    }\n+\n+    // Create and add row button if it doesn't exist\n+    if (!tableInfo.rowButtonElement) {\n+      const rowButton = createRowInsertButton(editor, tableInfo);\n+      tableElement.appendChild(rowButton);\n+      tableInfo.rowButtonElement = rowButton;\n+    }\n+\n+    tableMap.set(tableElement, tableInfo);\n+  };\n+\n+  const cleanupTable = (tableElement: HTMLElement) => {\n+    const tableInfo = tableMap.get(tableElement);\n+    tableInfo?.columnButtonElement?.remove();\n+    tableInfo?.rowButtonElement?.remove();\n+    tableMap.delete(tableElement);\n+  };\n+\n+  const updateAllTables = () => {\n+    if (!editor.isEditable) {\n+      // Clean up all tables if editor is not editable\n+      tableMap.forEach((_, tableElement) => {\n+        cleanupTable(tableElement);\n+      });\n+      return;\n+    }\n+\n+    const currentTables = findAllTables(editor);\n+    const currentTableElements = new Set(currentTables.map((t) => t.tableElement));\n+\n+    // Remove buttons from tables that no longer exist\n+    tableMap.forEach((_, tableElement) => {\n+      if (!currentTableElements.has(tableElement)) {\n+        cleanupTable(tableElement);\n+      }\n+    });\n+\n+    // Add buttons to new tables\n+    currentTables.forEach((tableInfo) => {\n+      if (!tableMap.has(tableInfo.tableElement)) {\n+        setupTable(tableInfo);\n+      }\n+    });\n+  };\n+\n+  return new Plugin({\n+    key: TABLE_INSERT_PLUGIN_KEY,\n+    view() {\n+      setTimeout(updateAllTables, 0);\n+\n+      return {\n+        update(view, prevState) {\n+          // Update when document changes\n+          if (!prevState.doc.eq(view.state.doc)) {\n+            updateAllTables();\n+          }\n+        },\n+        destroy() {\n+          // Clean up all tables\n+          tableMap.forEach((_, tableElement) => {\n+            cleanupTable(tableElement);\n+          });\n+          tableMap.clear();\n+        },\n+      };\n+    },\n+  });\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/plugins/insert-handlers/utils.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/table/plugins/insert-handlers/utils.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/plugins/insert-handlers/utils.ts\t8534236 (parent)\n+++ packages/editor/src/core/extensions/table/plugins/insert-handlers/utils.ts\tfcb6e26 (commit)\n@@ -0,0 +1,430 @@\n+import type { Editor } from \"@tiptap/core\";\n+import type { Node as ProseMirrorNode } from \"@tiptap/pm/model\";\n+import { addColumn, removeColumn, addRow, removeRow, TableMap } from \"@tiptap/pm/tables\";\n+\n+const addSvg = `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n+<path\n+  d=\"M8.5 7.49988V3.49988C8.5 3.22374 8.27614 2.99988 8 2.99988C7.72386 2.99988 7.5 3.22374 7.5 3.49988L7.5 7.49988L3.5 7.49988C3.22386 7.49988 3 7.72374 3 7.99988C3 8.27602 3.22386 8.49988 3.5 8.49988H7.5L7.5 12.4999C7.5 12.776 7.72386 12.9999 8 12.9999C8.27614 12.9999 8.5 12.776 8.5 12.4999L8.5 8.49988L12.5 8.49988C12.7761 8.49988 13 8.27602 13 7.99988C13 7.72374 12.7761 7.49988 12.5 7.49988L8.5 7.49988Z\"\n+  fill=\"currentColor\"\n+/>\n+</svg>`;\n+\n+export type TableInfo = {\n+  tableElement: HTMLElement;\n+  tableNode: ProseMirrorNode;\n+  tablePos: number;\n+  columnButtonElement?: HTMLElement;\n+  rowButtonElement?: HTMLElement;\n+};\n+\n+export const createColumnInsertButton = (editor: Editor, tableInfo: TableInfo): HTMLElement => {\n+  const button = document.createElement(\"button\");\n+  button.type = \"button\";\n+  button.className = \"table-column-insert-button\";\n+  button.title = \"Insert columns\";\n+  button.ariaLabel = \"Insert columns\";\n+\n+  const icon = document.createElement(\"span\");\n+  icon.innerHTML = addSvg;\n+  button.appendChild(icon);\n+\n+  let mouseDownX = 0;\n+  let isDragging = false;\n+  let dragStarted = false;\n+  let lastActionX = 0;\n+  const DRAG_THRESHOLD = 5; // pixels to start drag\n+  const ACTION_THRESHOLD = 150; // pixels total distance to trigger action\n+\n+  const onMouseDown = (e: MouseEvent) => {\n+    if (e.button !== 0) return; // Only left mouse button\n+\n+    e.preventDefault();\n+    e.stopPropagation();\n+\n+    mouseDownX = e.clientX;\n+    lastActionX = e.clientX;\n+    isDragging = false;\n+    dragStarted = false;\n+\n+    document.addEventListener(\"mousemove\", onMouseMove);\n+    document.addEventListener(\"mouseup\", onMouseUp);\n+  };\n+\n+  const onMouseMove = (e: MouseEvent) => {\n+    const deltaX = e.clientX - mouseDownX;\n+    const distance = Math.abs(deltaX);\n+\n+    // Start dragging if moved more than threshold\n+    if (!isDragging && distance > DRAG_THRESHOLD) {\n+      isDragging = true;\n+      dragStarted = true;\n+\n+      // Visual feedback\n+      button.classList.add(\"dragging\");\n+      document.body.style.userSelect = \"none\";\n+    }\n+\n+    if (isDragging) {\n+      const totalDistance = Math.abs(e.clientX - lastActionX);\n+\n+      // Only trigger action when total distance reaches threshold\n+      if (totalDistance >= ACTION_THRESHOLD) {\n+        // Determine direction based on current movement relative to last action point\n+        const directionFromLastAction = e.clientX - lastActionX;\n+\n+        // Right direction - add columns\n+        if (directionFromLastAction > 0) {\n+          insertColumnAfterLast(editor, tableInfo);\n+          lastActionX = e.clientX; // Reset action point\n+        }\n+        // Left direction - delete empty columns\n+        else if (directionFromLastAction < 0) {\n+          const deleted = removeLastColumn(editor, tableInfo);\n+          if (deleted) {\n+            lastActionX = e.clientX; // Reset action point\n+          }\n+        }\n+      }\n+    }\n+  };\n+\n+  const onMouseUp = () => {\n+    document.removeEventListener(\"mousemove\", onMouseMove);\n+    document.removeEventListener(\"mouseup\", onMouseUp);\n+\n+    if (isDragging) {\n+      // Clean up drag state\n+      button.classList.remove(\"dragging\");\n+      document.body.style.cursor = \"\";\n+      document.body.style.userSelect = \"\";\n+    } else if (!dragStarted) {\n+      // Handle as click if no dragging occurred\n+      insertColumnAfterLast(editor, tableInfo);\n+    }\n+\n+    isDragging = false;\n+    dragStarted = false;\n+  };\n+\n+  button.addEventListener(\"mousedown\", onMouseDown);\n+\n+  // Prevent context menu and text selection\n+  button.addEventListener(\"contextmenu\", (e) => e.preventDefault());\n+  button.addEventListener(\"selectstart\", (e) => e.preventDefault());\n+\n+  return button;\n+};\n+\n+export const createRowInsertButton = (editor: Editor, tableInfo: TableInfo): HTMLElement => {\n+  const button = document.createElement(\"button\");\n+  button.type = \"button\";\n+  button.className = \"table-row-insert-button\";\n+  button.title = \"Insert rows\";\n+  button.ariaLabel = \"Insert rows\";\n+\n+  const icon = document.createElement(\"span\");\n+  icon.innerHTML = addSvg;\n+  button.appendChild(icon);\n+\n+  let mouseDownY = 0;\n+  let isDragging = false;\n+  let dragStarted = false;\n+  let lastActionY = 0;\n+  const DRAG_THRESHOLD = 5; // pixels to start drag\n+  const ACTION_THRESHOLD = 40; // pixels total distance to trigger action\n+\n+  const onMouseDown = (e: MouseEvent) => {\n+    if (e.button !== 0) return; // Only left mouse button\n+\n+    e.preventDefault();\n+    e.stopPropagation();\n+\n+    mouseDownY = e.clientY;\n+    lastActionY = e.clientY;\n+    isDragging = false;\n+    dragStarted = false;\n+\n+    document.addEventListener(\"mousemove\", onMouseMove);\n+    document.addEventListener(\"mouseup\", onMouseUp);\n+  };\n+\n+  const onMouseMove = (e: MouseEvent) => {\n+    const deltaY = e.clientY - mouseDownY;\n+    const distance = Math.abs(deltaY);\n+\n+    // Start dragging if moved more than threshold\n+    if (!isDragging && distance > DRAG_THRESHOLD) {\n+      isDragging = true;\n+      dragStarted = true;\n+\n+      // Visual feedback\n+      button.classList.add(\"dragging\");\n+      document.body.style.userSelect = \"none\";\n+    }\n+\n+    if (isDragging) {\n+      const totalDistance = Math.abs(e.clientY - lastActionY);\n+\n+      // Only trigger action when total distance reaches threshold\n+      if (totalDistance >= ACTION_THRESHOLD) {\n+        // Determine direction based on current movement relative to last action point\n+        const directionFromLastAction = e.clientY - lastActionY;\n+\n+        // Down direction - add rows\n+        if (directionFromLastAction > 0) {\n+          insertRowAfterLast(editor, tableInfo);\n+          lastActionY = e.clientY; // Reset action point\n+        }\n+        // Up direction - delete empty rows\n+        else if (directionFromLastAction < 0) {\n+          const deleted = removeLastRow(editor, tableInfo);\n+          if (deleted) {\n+            lastActionY = e.clientY; // Reset action point\n+          }\n+        }\n+      }\n+    }\n+  };\n+\n+  const onMouseUp = () => {\n+    document.removeEventListener(\"mousemove\", onMouseMove);\n+    document.removeEventListener(\"mouseup\", onMouseUp);\n+\n+    if (isDragging) {\n+      // Clean up drag state\n+      button.classList.remove(\"dragging\");\n+      document.body.style.cursor = \"\";\n+      document.body.style.userSelect = \"\";\n+    } else if (!dragStarted) {\n+      // Handle as click if no dragging occurred\n+      insertRowAfterLast(editor, tableInfo);\n+    }\n+\n+    isDragging = false;\n+    dragStarted = false;\n+  };\n+\n+  button.addEventListener(\"mousedown\", onMouseDown);\n+\n+  // Prevent context menu and text selection\n+  button.addEventListener(\"contextmenu\", (e) => e.preventDefault());\n+  button.addEventListener(\"selectstart\", (e) => e.preventDefault());\n+\n+  return button;\n+};\n+\n+export const findAllTables = (editor: Editor): TableInfo[] => {\n+  const tables: TableInfo[] = [];\n+  const tableElements = editor.view.dom.querySelectorAll(\"table\");\n+\n+  tableElements.forEach((tableElement) => {\n+    // Find the table's ProseMirror position\n+    let tablePos = -1;\n+    let tableNode: ProseMirrorNode | null = null;\n+\n+    // Walk through the document to find matching table nodes\n+    editor.state.doc.descendants((node, pos) => {\n+      if (node.type.spec.tableRole === \"table\") {\n+        const domAtPos = editor.view.domAtPos(pos + 1);\n+        let domTable = domAtPos.node;\n+\n+        // Navigate to find the table element\n+        while (domTable && domTable.parentNode && domTable.nodeType !== Node.ELEMENT_NODE) {\n+          domTable = domTable.parentNode;\n+        }\n+\n+        while (domTable && domTable.parentNode && (domTable as HTMLElement).tagName !== \"TABLE\") {\n+          domTable = domTable.parentNode;\n+        }\n+\n+        if (domTable === tableElement) {\n+          tablePos = pos;\n+          tableNode = node;\n+          return false; // Stop iteration\n+        }\n+      }\n+    });\n+\n+    if (tablePos !== -1 && tableNode) {\n+      tables.push({\n+        tableElement,\n+        tableNode,\n+        tablePos,\n+      });\n+    }\n+  });\n+\n+  return tables;\n+};\n+\n+const getCurrentTableInfo = (editor: Editor, tableInfo: TableInfo): TableInfo => {\n+  // Refresh table info to get latest state\n+  const tables = findAllTables(editor);\n+  const updated = tables.find((t) => t.tableElement === tableInfo.tableElement);\n+  return updated || tableInfo;\n+};\n+\n+// Column functions\n+const insertColumnAfterLast = (editor: Editor, tableInfo: TableInfo) => {\n+  const currentTableInfo = getCurrentTableInfo(editor, tableInfo);\n+  const { tableNode, tablePos } = currentTableInfo;\n+  const tableMapData = TableMap.get(tableNode);\n+  const lastColumnIndex = tableMapData.width;\n+\n+  const tr = editor.state.tr;\n+  const rect = {\n+    map: tableMapData,\n+    tableStart: tablePos,\n+    table: tableNode,\n+    top: 0,\n+    left: 0,\n+    bottom: tableMapData.height - 1,\n+    right: tableMapData.width - 1,\n+  };\n+\n+  const newTr = addColumn(tr, rect, lastColumnIndex);\n+  editor.view.dispatch(newTr);\n+};\n+\n+const removeLastColumn = (editor: Editor, tableInfo: TableInfo): boolean => {\n+  const currentTableInfo = getCurrentTableInfo(editor, tableInfo);\n+  const { tableNode, tablePos } = currentTableInfo;\n+  const tableMapData = TableMap.get(tableNode);\n+\n+  // Don't delete if only one column left\n+  if (tableMapData.width <= 1) {\n+    return false;\n+  }\n+\n+  const lastColumnIndex = tableMapData.width - 1;\n+\n+  // Check if last column is empty\n+  if (!isColumnEmpty(currentTableInfo, lastColumnIndex)) {\n+    return false;\n+  }\n+\n+  const tr = editor.state.tr;\n+  const rect = {\n+    map: tableMapData,\n+    tableStart: tablePos,\n+    table: tableNode,\n+    top: 0,\n+    left: 0,\n+    bottom: tableMapData.height - 1,\n+    right: tableMapData.width - 1,\n+  };\n+\n+  removeColumn(tr, rect, lastColumnIndex);\n+  editor.view.dispatch(tr);\n+  return true;\n+};\n+\n+// Helper function to check if a single cell is empty\n+const isCellEmpty = (cell: ProseMirrorNode | null | undefined): boolean => {\n+  if (!cell || cell.content.size === 0) {\n+    return true;\n+  }\n+\n+  // Check if cell has any non-empty content\n+  let hasContent = false;\n+  cell.content.forEach((node) => {\n+    if (node.type.name === \"paragraph\") {\n+      if (node.content.size > 0) {\n+        hasContent = true;\n+      }\n+    } else if (node.content.size > 0 || node.isText) {\n+      hasContent = true;\n+    }\n+  });\n+\n+  return !hasContent;\n+};\n+\n+const isColumnEmpty = (tableInfo: TableInfo, columnIndex: number): boolean => {\n+  const { tableNode } = tableInfo;\n+  const tableMapData = TableMap.get(tableNode);\n+\n+  // Check each cell in the column\n+  for (let row = 0; row < tableMapData.height; row++) {\n+    const cellIndex = row * tableMapData.width + columnIndex;\n+    const cellPos = tableMapData.map[cellIndex];\n+    const cell = tableNode.nodeAt(cellPos);\n+\n+    if (!isCellEmpty(cell)) {\n+      return false;\n+    }\n+  }\n+  return true;\n+};\n+\n+// Row functions\n+const insertRowAfterLast = (editor: Editor, tableInfo: TableInfo) => {\n+  const currentTableInfo = getCurrentTableInfo(editor, tableInfo);\n+  const { tableNode, tablePos } = currentTableInfo;\n+  const tableMapData = TableMap.get(tableNode);\n+  const lastRowIndex = tableMapData.height;\n+\n+  const tr = editor.state.tr;\n+  const rect = {\n+    map: tableMapData,\n+    tableStart: tablePos,\n+    table: tableNode,\n+    top: 0,\n+    left: 0,\n+    bottom: tableMapData.height - 1,\n+    right: tableMapData.width - 1,\n+  };\n+\n+  const newTr = addRow(tr, rect, lastRowIndex);\n+  editor.view.dispatch(newTr);\n+};\n+\n+const removeLastRow = (editor: Editor, tableInfo: TableInfo): boolean => {\n+  const currentTableInfo = getCurrentTableInfo(editor, tableInfo);\n+  const { tableNode, tablePos } = currentTableInfo;\n+  const tableMapData = TableMap.get(tableNode);\n+\n+  // Don't delete if only one row left\n+  if (tableMapData.height <= 1) {\n+    return false;\n+  }\n+\n+  const lastRowIndex = tableMapData.height - 1;\n+\n+  // Check if last row is empty\n+  if (!isRowEmpty(currentTableInfo, lastRowIndex)) {\n+    return false;\n+  }\n+\n+  const tr = editor.state.tr;\n+  const rect = {\n+    map: tableMapData,\n+    tableStart: tablePos,\n+    table: tableNode,\n+    top: 0,\n+    left: 0,\n+    bottom: tableMapData.height - 1,\n+    right: tableMapData.width - 1,\n+  };\n+\n+  removeRow(tr, rect, lastRowIndex);\n+  editor.view.dispatch(tr);\n+  return true;\n+};\n+\n+const isRowEmpty = (tableInfo: TableInfo, rowIndex: number): boolean => {\n+  const { tableNode } = tableInfo;\n+  const tableMapData = TableMap.get(tableNode);\n+\n+  // Check each cell in the row\n+  for (let col = 0; col < tableMapData.width; col++) {\n+    const cellIndex = rowIndex * tableMapData.width + col;\n+    const cellPos = tableMapData.map[cellIndex];\n+    const cell = tableNode.nodeAt(cellPos);\n+\n+    if (!isCellEmpty(cell)) {\n+      return false;\n+    }\n+  }\n+  return true;\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/plugins/selection-outline/plugin.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/table/plugins/selection-outline/plugin.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/plugins/selection-outline/plugin.ts\t8534236 (parent)\n+++ packages/editor/src/core/extensions/table/plugins/selection-outline/plugin.ts\tfcb6e26 (commit)\n@@ -0,0 +1,58 @@\n+import { findParentNode, type Editor } from \"@tiptap/core\";\n+import { Plugin, PluginKey } from \"@tiptap/pm/state\";\n+import { CellSelection, TableMap } from \"@tiptap/pm/tables\";\n+import { Decoration, DecorationSet } from \"@tiptap/pm/view\";\n+// local imports\n+import { getCellBorderClasses } from \"./utils\";\n+\n+type TableCellSelectionOutlinePluginState = {\n+  decorations?: DecorationSet;\n+};\n+\n+const TABLE_SELECTION_OUTLINE_PLUGIN_KEY = new PluginKey(\"table-cell-selection-outline\");\n+\n+export const TableCellSelectionOutlinePlugin = (editor: Editor): Plugin<TableCellSelectionOutlinePluginState> =>\n+  new Plugin<TableCellSelectionOutlinePluginState>({\n+    key: TABLE_SELECTION_OUTLINE_PLUGIN_KEY,\n+    state: {\n+      init: () => ({}),\n+      apply(tr, prev, oldState, newState) {\n+        if (!editor.isEditable) return {};\n+        const table = findParentNode((node) => node.type.spec.tableRole === \"table\")(newState.selection);\n+        const hasDocChanged = tr.docChanged || !newState.selection.eq(oldState.selection);\n+        if (!table || !hasDocChanged) {\n+          return table === undefined ? {} : prev;\n+        }\n+\n+        const { selection } = newState;\n+        if (!(selection instanceof CellSelection)) return {};\n+\n+        const decorations: Decoration[] = [];\n+        const tableMap = TableMap.get(table.node);\n+        const selectedCells: number[] = [];\n+\n+        // First, collect all selected cell positions\n+        selection.forEachCell((_node, pos) => {\n+          const start = pos - table.pos - 1;\n+          selectedCells.push(start);\n+        });\n+\n+        // Then, add decorations with appropriate border classes\n+        selection.forEachCell((node, pos) => {\n+          const start = pos - table.pos - 1;\n+          const classes = getCellBorderClasses(start, selectedCells, tableMap);\n+\n+          decorations.push(Decoration.node(pos, pos + node.nodeSize, { class: classes.join(\" \") }));\n+        });\n+\n+        return {\n+          decorations: DecorationSet.create(newState.doc, decorations),\n+        };\n+      },\n+    },\n+    props: {\n+      decorations(state) {\n+        return TABLE_SELECTION_OUTLINE_PLUGIN_KEY.getState(state).decorations;\n+      },\n+    },\n+  });\n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/plugins/selection-outline/utils.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/table/plugins/selection-outline/utils.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/plugins/selection-outline/utils.ts\t8534236 (parent)\n+++ packages/editor/src/core/extensions/table/plugins/selection-outline/utils.ts\tfcb6e26 (commit)\n@@ -0,0 +1,75 @@\n+import type { TableMap } from \"@tiptap/pm/tables\";\n+\n+/**\n+ * Calculates the positions of cells adjacent to a given cell in a table\n+ * @param cellStart - The start position of the current cell in the document\n+ * @param tableMap - ProseMirror's table mapping structure containing cell positions and dimensions\n+ * @returns Object with positions of adjacent cells (undefined if cell doesn't exist at table edge)\n+ */\n+const getAdjacentCellPositions = (\n+  cellStart: number,\n+  tableMap: TableMap\n+): { top?: number; bottom?: number; left?: number; right?: number } => {\n+  // Extract table dimensions\n+  // width -> number of columns in the table\n+  // height -> number of rows in the table\n+  const { width, height } = tableMap;\n+\n+  // Find the index of our cell in the flat tableMap.map array\n+  // tableMap.map contains start positions of all cells in row-by-row order\n+  const cellIndex = tableMap.map.indexOf(cellStart);\n+\n+  // Safety check: if cell position not found in table map, return empty object\n+  if (cellIndex === -1) return {};\n+\n+  // Convert flat array index to 2D grid coordinates\n+  // row = which row the cell is in (0-based from top)\n+  // col = which column the cell is in (0-based from left)\n+  const row = Math.floor(cellIndex / width); // Integer division gives row number\n+  const col = cellIndex % width; // Remainder gives column number\n+\n+  return {\n+    // Top cell: same column, one row up\n+    // Check if we're not in the first row (row > 0) before calculating\n+    top: row > 0 ? tableMap.map[(row - 1) * width + col] : undefined,\n+\n+    // Bottom cell: same column, one row down\n+    // Check if we're not in the last row (row < height - 1) before calculating\n+    bottom: row < height - 1 ? tableMap.map[(row + 1) * width + col] : undefined,\n+\n+    // Left cell: same row, one column left\n+    // Check if we're not in the first column (col > 0) before calculating\n+    left: col > 0 ? tableMap.map[row * width + (col - 1)] : undefined,\n+\n+    // Right cell: same row, one column right\n+    // Check if we're not in the last column (col < width - 1) before calculating\n+    right: col < width - 1 ? tableMap.map[row * width + (col + 1)] : undefined,\n+  };\n+};\n+\n+export const getCellBorderClasses = (cellStart: number, selectedCells: number[], tableMap: TableMap): string[] => {\n+  const adjacent = getAdjacentCellPositions(cellStart, tableMap);\n+  const classes: string[] = [];\n+\n+  // Add border-right if right cell is not selected or doesn't exist\n+  if (adjacent.right === undefined || !selectedCells.includes(adjacent.right)) {\n+    classes.push(\"selectedCell-border-right\");\n+  }\n+\n+  // Add border-left if left cell is not selected or doesn't exist\n+  if (adjacent.left === undefined || !selectedCells.includes(adjacent.left)) {\n+    classes.push(\"selectedCell-border-left\");\n+  }\n+\n+  // Add border-top if top cell is not selected or doesn't exist\n+  if (adjacent.top === undefined || !selectedCells.includes(adjacent.top)) {\n+    classes.push(\"selectedCell-border-top\");\n+  }\n+\n+  // Add border-bottom if bottom cell is not selected or doesn't exist\n+  if (adjacent.bottom === undefined || !selectedCells.includes(adjacent.bottom)) {\n+    classes.push(\"selectedCell-border-bottom\");\n+  }\n+\n+  return classes;\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/table-cell.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/table/table-cell.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/table-cell.ts\t8534236 (parent)\n+++ packages/editor/src/core/extensions/table/table-cell.ts\tfcb6e26 (commit)\n@@ -1,9 +1,9 @@\n import { mergeAttributes, Node } from \"@tiptap/core\";\n // constants\n import { CORE_EXTENSIONS } from \"@/constants/extension\";\n // local imports\n-import { TableCellSelectionOutlinePlugin } from \"./plugins/table-selection-outline/plugin\";\n+import { TableCellSelectionOutlinePlugin } from \"./plugins/selection-outline/plugin\";\n import { DEFAULT_COLUMN_WIDTH } from \"./table\";\n \n export interface TableCellOptions {\n   HTMLAttributes: Record<string, any>;\n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/table/table.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/table/table/table.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/table/table.ts\t8534236 (parent)\n+++ packages/editor/src/core/extensions/table/table/table.ts\tfcb6e26 (commit)\n@@ -22,8 +22,9 @@\n import { Decoration } from \"@tiptap/pm/view\";\n // constants\n import { CORE_EXTENSIONS } from \"@/constants/extension\";\n // local imports\n+import { TableInsertPlugin } from \"../plugins/insert-handlers/plugin\";\n import { tableControls } from \"./table-controls\";\n import { TableView } from \"./table-view\";\n import { createTable } from \"./utilities/create-table\";\n import { deleteTableWhenAllCellsSelected } from \"./utilities/delete-table-when-all-cells-selected\";\n@@ -265,8 +266,9 @@\n       tableEditing({\n         allowTableNodeSelection: this.options.allowTableNodeSelection,\n       }),\n       tableControls(),\n+      TableInsertPlugin(this.editor),\n     ];\n \n     if (isResizable) {\n       plugins.unshift(\n"
        },
        {
          "path": "packages/editor/src/styles/table.css",
          "status": "modified",
          "diff": "Index: packages/editor/src/styles/table.css\n===================================================================\n--- packages/editor/src/styles/table.css\t8534236 (parent)\n+++ packages/editor/src/styles/table.css\tfcb6e26 (commit)\n@@ -1,11 +1,13 @@\n .table-wrapper {\n   overflow-x: auto;\n+  padding-bottom: 30px;\n \n   table {\n+    position: relative;\n     border-collapse: collapse;\n     table-layout: fixed;\n-    margin: 0.5rem 0 1rem 0;\n+    margin: 0.5rem 0 0 0;\n     border: 1px solid rgba(var(--color-border-200));\n     width: 100%;\n \n     td,\n@@ -21,8 +23,9 @@\n       > * {\n         margin-bottom: 0;\n       }\n \n+      /* Selected cell outline */\n       &.selectedCell {\n         user-select: none;\n \n         &::after {\n@@ -49,8 +52,9 @@\n         &.selectedCell-border-right::after {\n           border-right: 2px solid rgba(var(--color-primary-100));\n         }\n       }\n+      /* End selected cell outline */\n     }\n \n     th {\n       font-weight: 500;\n@@ -64,16 +68,18 @@\n       }\n     }\n   }\n \n+  /* Selected status */\n   &.ProseMirror-selectednode {\n     table {\n       background-color: rgba(var(--color-primary-100), 0.2);\n     }\n   }\n+  /* End selected status */\n }\n \n-/* table dropdown */\n+/* Column resizer */\n .table-wrapper table .column-resize-handle {\n   position: absolute;\n   right: -1px;\n   top: -1px;\n@@ -82,8 +88,9 @@\n   z-index: 5;\n   background-color: rgba(var(--color-primary-100));\n   pointer-events: none;\n }\n+/* End column resizer */\n \n .table-wrapper .table-controls {\n   position: absolute;\n \n@@ -145,4 +152,66 @@\n .table-wrapper.controls--disabled .table-controls .columns-control {\n   opacity: 0;\n   pointer-events: none;\n }\n+\n+/* Insert buttons */\n+.table-wrapper {\n+  .table-column-insert-button,\n+  .table-row-insert-button {\n+    position: absolute;\n+    background-color: rgba(var(--color-background-90));\n+    color: rgba(var(--color-text-300));\n+    border: 1px solid rgba(var(--color-border-200));\n+    border-radius: 4px;\n+    display: grid;\n+    place-items: center;\n+    opacity: 0;\n+    pointer-events: none;\n+    outline: none;\n+    z-index: 1000;\n+    transition: all 0.2s ease;\n+\n+    &:hover {\n+      background-color: rgba(var(--color-background-80));\n+      color: rgba(var(--color-text-100));\n+    }\n+\n+    &.dragging {\n+      opacity: 1;\n+      pointer-events: auto;\n+      background-color: rgba(var(--color-primary-100), 0.2);\n+      color: rgba(var(--color-text-100));\n+    }\n+\n+    svg {\n+      width: 12px;\n+      height: 12px;\n+    }\n+  }\n+\n+  .table-column-insert-button {\n+    top: 0;\n+    right: -20px;\n+    width: 20px;\n+    height: 100%;\n+    transform: translateX(50%);\n+  }\n+\n+  .table-row-insert-button {\n+    bottom: -20px;\n+    left: 0;\n+    width: 100%;\n+    height: 20px;\n+    transform: translateY(50%);\n+  }\n+\n+  /* Show buttons on table hover */\n+  &:hover {\n+    .table-column-insert-button,\n+    .table-row-insert-button {\n+      opacity: 1;\n+      pointer-events: auto;\n+    }\n+  }\n+}\n+/* End insert buttons */\n"
        }
      ]
    },
    {
      "id": "add-touch-support",
      "sha": "c3273b1a857dfe5c0d9c8f33b9e078d756f0b233",
      "parentSha": "7cec92113f091c8fa2cd540dbffb38d0ecf4e7ab",
      "spec": "- Add touch-device awareness end to end\n  - Introduce and propagate isTouchDevice?: boolean through the editor stack.\n    - Accept isTouchDevice in IEditorProps and thread it through EditorWrapper and CollaborativeDocumentEditor to PageRenderer and EditorContainer, then into hooks use-editor and use-collaborative-editor, and into CoreEditorExtensions and UtilityExtension storage.\n    - In UtilityExtension storage, add isTouchDevice: boolean and initialize it from props so extensions/components can read it via getExtensionStorage(editor, CORE_EXTENSIONS.UTILITY).\n    - In CoreEditorExtensions, accept isTouchDevice and pass it to UtilityExtension.\n  - Adjust UI behavior for touch devices:\n    - PageRenderer: add props isTouchDevice and documentLoaderClassName; pass className to DocumentContentLoader; pass isTouchDevice to EditorContainer; when editor.isEditable, suppress BubbleMenu and BlockMenu on touch devices.\n    - EditorContainer: add isTouchDevice and, when true, do not render LinkViewContainer.\n    - Custom Image extension UI:\n      - In block component: read isTouchDevice from UtilityExtension storage; on image mousedown prevent default and blur on touch; on image restore, use extension.options.getImageSource for refreshed src on touch; pass isTouchDevice to ImageToolbarRoot.\n      - In toolbar root: accept isTouchDevice and hide ImageDownloadAction when true; pass isTouchDevice into full-screen action root.\n      - In full-screen action root: accept isTouchDevice and forward it to the modal; disable tooltip when touch.\n      - In full-screen modal: accept isTouchDevice; for zoom buttons, prevent default/stop propagation on touch; hide Download and Open-in-new-tab buttons on touch devices; when #editor-portal is missing, portal the modal to document.body instead of just logging.\n      - In uploader: read isTouchDevice from UtilityExtension storage and avoid programmatic file input clicks on touch devices for the \"insert\" flow.\n- Collaborative editor configuration and prop plumbing\n  - In CollaborativeDocumentEditor: accept new props documentLoaderClassName?, editorProps?, dragDropEnabled? (default true), isTouchDevice?, onEditorFocus?. Build extensions via useMemo from external extensions and conditionally append WorkItemEmbedExtension when embedHandler.issue exists. Pass new props to useCollaborativeEditor and PageRenderer.\n  - In use-collaborative-editor: accept dragDropEnabled (default true), isTouchDevice, onEditorFocus; pass dragDropEnabled to SideMenuExtension; pass isTouchDevice and onEditorFocus through to useEditor.\n- Core editor hook and wrapper updates\n  - In EditorWrapper: accept editorProps, isTouchDevice, onEditorFocus; forward isTouchDevice to EditorContainer; pass editorProps and onEditorFocus into useEditor.\n  - In use-editor: accept isTouchDevice and onEditorFocus; pass isTouchDevice to CoreEditorExtensions and set onFocus handler in Editor options.\n- Menu: add a Link command\n  - In menu-items.ts: import LinkIcon and editor link commands; define LinkItem with key \"link\" that applies or unsets link, optionally replacing selection text; include LinkItem in getEditorMenuItems; ensure HorizontalRuleItem is explicitly typed as EditorMenuItem<\"divider\">.\n- Editor commands for links\n  - In editor-commands.ts: update setLinkEditor(editor, url, text?) to optionally replace the selection with provided text, select it, then set the link href; retain unsetLinkEditor unchanged.\n- Editor ref API extensions and signature adjustment\n  - In editor-ref.ts and corresponding types: add methods to EditorRefApi: createSelectionAtCursorPosition (selects word under caret if selection empty), focus(options), getCoordsFromPos(pos?), getAttributesWithExtendedMark(mark, attribute), redo(), undo().\n  - Change scrollToNodeViaDOMCoordinates signature to accept an object { pos?: number; behavior?: ScrollBehavior } and default behavior to \"smooth\".\n- Type and contract updates\n  - In types/editor.ts: extend TEditorCommands with \"link\" and TCommandExtraProps with link { url: string; text?: string }. Add editorProps?: EditorProps, isTouchDevice?: boolean, onEditorFocus?: () => void to IEditorProps. Update ICollaborativeDocumentEditorProps to include documentLoaderClassName?, dragDropEnabled?, editable and allow external extensions. Extend EditorRefApi with new methods and updated scrollToNodeViaDOMCoordinates signature.\n  - In types/hook.ts: include editorProps, isTouchDevice, onEditorFocus in TCoreHookProps; include dragDropEnabled in TCollaborativeEditorHookProps.\n  - In types/config.ts: add \"mobile-font\" to TEditorFontSize and \"mobile-regular\" to TEditorLineSpacing.\n- Mobile typography tokens\n  - In styles/variables.css: add .mobile-font font size/line-height tokens for headings, regular, code, list; add .line-spacing-mobile-regular spacing tokens for headings, paragraphs, lists, and divider.\n- Behavioral acceptance criteria\n  - On touch devices: bubble and block menus are hidden; link view overlay is not rendered; image toolbar hides Download/Open controls and tooltip is disabled; zoom controls handle touch events without side effects; uploader does not auto-invoke file picker; tapping an image does not propagate focus and blurs the editor.\n  - Link menu item appears in editor item registry and can set a link with optional replacement text or unset a link when no URL is provided.\n  - Editor ref exposes new utility methods and adjusted scrollToNodeViaDOMCoordinates signature.\n  - Collaborative editor respects dragDropEnabled and document loader can be styled via documentLoaderClassName.\n  - Mobile typography classes are available for use by displayConfig to render compact text on mobile.",
      "prompt": "Implement touch device support and link tooling across the rich text editor. Add an isTouchDevice flag that flows through editor props, hooks, and extensions, and conditionally disable desktop-only UI on touch (bubble/block menus, link overlay, image download/open controls, tooltips, and automatic file picker). Provide mobile-friendly typography and spacing tokens. Expose a dragDropEnabled toggle for collaborative mode and a className override for the document loader. Add a Link menu command that can set or unset links and optionally replace the current selection with provided text. Expand the editor ref API with utilities to select the word at the cursor, focus with options, get coordinates at a position, extend mark range when retrieving attributes, and perform undo/redo, and change the scroll-to-node method to accept an options object.",
      "supplementalFiles": [
        "packages/editor/src/core/constants/extension.ts",
        "packages/editor/src/core/helpers/get-extension-storage.ts",
        "packages/editor/src/core/helpers/scroll-to-node.ts",
        "packages/editor/src/core/extensions/custom-link/extension.tsx"
      ],
      "fileDiffs": [
        {
          "path": "packages/editor/src/core/components/editors/document/collaborative-editor.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/document/collaborative-editor.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/document/collaborative-editor.tsx\t7cec921 (parent)\n+++ packages/editor/src/core/components/editors/document/collaborative-editor.tsx\tc3273b1 (commit)\n@@ -1,6 +1,6 @@\n-import { Extensions } from \"@tiptap/core\";\n-import React from \"react\";\n+import type { Extensions } from \"@tiptap/core\";\n+import React, { useMemo } from \"react\";\n // plane imports\n import { cn } from \"@plane/utils\";\n // components\n import { PageRenderer } from \"@/components/editors\";\n@@ -12,61 +12,75 @@\n import { getEditorClassNames } from \"@/helpers/common\";\n // hooks\n import { useCollaborativeEditor } from \"@/hooks/use-collaborative-editor\";\n // types\n-import { EditorRefApi, ICollaborativeDocumentEditorProps } from \"@/types\";\n+import type { EditorRefApi, ICollaborativeDocumentEditorProps } from \"@/types\";\n \n const CollaborativeDocumentEditor: React.FC<ICollaborativeDocumentEditorProps> = (props) => {\n   const {\n     aiHandler,\n     bubbleMenuEnabled = true,\n     containerClassName,\n+    documentLoaderClassName,\n+    extensions: externalExtensions = [],\n     disabledExtensions,\n     displayConfig = DEFAULT_DISPLAY_CONFIG,\n     editable,\n     editorClassName = \"\",\n+    editorProps,\n     embedHandler,\n     fileHandler,\n     flaggedExtensions,\n     forwardedRef,\n     handleEditorReady,\n     id,\n+    dragDropEnabled = true,\n+    isTouchDevice,\n     mentionHandler,\n     onAssetChange,\n     onChange,\n+    onEditorFocus,\n     onTransaction,\n     placeholder,\n     realtimeConfig,\n     serverHandler,\n     tabIndex,\n     user,\n   } = props;\n \n-  const extensions: Extensions = [];\n+  const extensions: Extensions = useMemo(() => {\n+    const allExtensions = [...externalExtensions];\n \n-  if (embedHandler?.issue) {\n-    extensions.push(\n-      WorkItemEmbedExtension({\n-        widgetCallback: embedHandler.issue.widgetCallback,\n-      })\n-    );\n-  }\n+    if (embedHandler?.issue) {\n+      allExtensions.push(\n+        WorkItemEmbedExtension({\n+          widgetCallback: embedHandler.issue.widgetCallback,\n+        })\n+      );\n+    }\n \n+    return allExtensions;\n+  }, [externalExtensions, embedHandler.issue]);\n+\n   // use document editor\n   const { editor, hasServerConnectionFailed, hasServerSynced } = useCollaborativeEditor({\n     disabledExtensions,\n     editable,\n     editorClassName,\n+    editorProps,\n     embedHandler,\n     extensions,\n     fileHandler,\n     flaggedExtensions,\n     forwardedRef,\n     handleEditorReady,\n     id,\n+    dragDropEnabled,\n+    isTouchDevice,\n     mentionHandler,\n     onAssetChange,\n     onChange,\n+    onEditorFocus,\n     onTransaction,\n     placeholder,\n     realtimeConfig,\n     serverHandler,\n@@ -86,11 +100,13 @@\n     <PageRenderer\n       aiHandler={aiHandler}\n       bubbleMenuEnabled={bubbleMenuEnabled}\n       displayConfig={displayConfig}\n+      documentLoaderClassName={documentLoaderClassName}\n       editor={editor}\n       editorContainerClassName={cn(editorContainerClassNames, \"document-editor\")}\n       id={id}\n+      isTouchDevice={!!isTouchDevice}\n       isLoading={!hasServerSynced && !hasServerConnectionFailed}\n       tabIndex={tabIndex}\n     />\n   );\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/document/page-renderer.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/document/page-renderer.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/document/page-renderer.tsx\t7cec921 (parent)\n+++ packages/editor/src/core/components/editors/document/page-renderer.tsx\tc3273b1 (commit)\n@@ -10,36 +10,49 @@\n type Props = {\n   aiHandler?: TAIHandler;\n   bubbleMenuEnabled: boolean;\n   displayConfig: TDisplayConfig;\n+  documentLoaderClassName?: string;\n   editor: Editor;\n   editorContainerClassName: string;\n   id: string;\n   isLoading?: boolean;\n+  isTouchDevice: boolean;\n   tabIndex?: number;\n };\n \n export const PageRenderer = (props: Props) => {\n-  const { aiHandler, bubbleMenuEnabled, displayConfig, editor, editorContainerClassName, id, isLoading, tabIndex } =\n-    props;\n+  const {\n+    aiHandler,\n+    bubbleMenuEnabled,\n+    displayConfig,\n+    documentLoaderClassName,\n+    editor,\n+    editorContainerClassName,\n+    id,\n+    isLoading,\n+    isTouchDevice,\n+    tabIndex,\n+  } = props;\n \n   return (\n     <div\n       className={cn(\"frame-renderer flex-grow w-full\", {\n         \"wide-layout\": displayConfig.wideLayout,\n       })}\n     >\n       {isLoading ? (\n-        <DocumentContentLoader />\n+        <DocumentContentLoader className={documentLoaderClassName} />\n       ) : (\n         <EditorContainer\n           displayConfig={displayConfig}\n           editor={editor}\n           editorContainerClassName={editorContainerClassName}\n           id={id}\n+          isTouchDevice={isTouchDevice}\n         >\n           <EditorContentWrapper editor={editor} id={id} tabIndex={tabIndex} />\n-          {editor.isEditable && (\n+          {editor.isEditable && !isTouchDevice && (\n             <div>\n               {bubbleMenuEnabled && <EditorBubbleMenu editor={editor} />}\n               <BlockMenu editor={editor} />\n               <AIFeaturesMenu menu={aiHandler?.menu} />\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/editor-container.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/editor-container.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/editor-container.tsx\t7cec921 (parent)\n+++ packages/editor/src/core/components/editors/editor-container.tsx\tc3273b1 (commit)\n@@ -1,5 +1,5 @@\n-import { Editor } from \"@tiptap/react\";\n+import type { Editor } from \"@tiptap/react\";\n import { FC, ReactNode, useRef } from \"react\";\n // plane utils\n import { cn } from \"@plane/utils\";\n // constants\n@@ -9,18 +9,20 @@\n import { TDisplayConfig } from \"@/types\";\n // components\n import { LinkViewContainer } from \"./link-view-container\";\n \n-interface EditorContainerProps {\n+type Props = {\n   children: ReactNode;\n   displayConfig: TDisplayConfig;\n   editor: Editor;\n   editorContainerClassName: string;\n   id: string;\n-}\n+  isTouchDevice: boolean;\n+};\n \n-export const EditorContainer: FC<EditorContainerProps> = (props) => {\n-  const { children, displayConfig, editor, editorContainerClassName, id } = props;\n+export const EditorContainer: FC<Props> = (props) => {\n+  const { children, displayConfig, editor, editorContainerClassName, id, isTouchDevice } = props;\n+  // refs\n   const containerRef = useRef<HTMLDivElement>(null);\n \n   const handleContainerClick = (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n     if (event.target !== event.currentTarget) return;\n@@ -93,9 +95,9 @@\n           editorContainerClassName\n         )}\n       >\n         {children}\n-        <LinkViewContainer editor={editor} containerRef={containerRef} />\n+        {!isTouchDevice && <LinkViewContainer editor={editor} containerRef={containerRef} />}\n       </div>\n     </>\n   );\n };\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/editor-wrapper.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/editor-wrapper.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/editor-wrapper.tsx\t7cec921 (parent)\n+++ packages/editor/src/core/components/editors/editor-wrapper.tsx\tc3273b1 (commit)\n@@ -23,16 +23,19 @@\n     disabledExtensions,\n     displayConfig = DEFAULT_DISPLAY_CONFIG,\n     editable,\n     editorClassName = \"\",\n+    editorProps,\n     extensions,\n     id,\n     initialValue,\n+    isTouchDevice,\n     fileHandler,\n     flaggedExtensions,\n     forwardedRef,\n     mentionHandler,\n     onChange,\n+    onEditorFocus,\n     onTransaction,\n     handleEditorReady,\n     autofocus,\n     placeholder,\n@@ -43,17 +46,20 @@\n   const editor = useEditor({\n     editable,\n     disabledExtensions,\n     editorClassName,\n+    editorProps,\n     enableHistory: true,\n     extensions,\n     fileHandler,\n     flaggedExtensions,\n     forwardedRef,\n     id,\n+    isTouchDevice,\n     initialValue,\n     mentionHandler,\n     onChange,\n+    onEditorFocus,\n     onTransaction,\n     handleEditorReady,\n     autofocus,\n     placeholder,\n@@ -74,8 +80,9 @@\n       displayConfig={displayConfig}\n       editor={editor}\n       editorContainerClassName={editorContainerClassName}\n       id={id}\n+      isTouchDevice={!!isTouchDevice}\n     >\n       {children?.(editor)}\n       <div className=\"flex flex-col\">\n         <EditorContentWrapper editor={editor} id={id} tabIndex={tabIndex} />\n"
        },
        {
          "path": "packages/editor/src/core/components/menus/menu-items.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/menus/menu-items.ts\n===================================================================\n--- packages/editor/src/core/components/menus/menu-items.ts\t7cec921 (parent)\n+++ packages/editor/src/core/components/menus/menu-items.ts\tc3273b1 (commit)\n@@ -21,16 +21,18 @@\n   LucideIcon,\n   MinusSquare,\n   Palette,\n   AlignCenter,\n+  LinkIcon,\n } from \"lucide-react\";\n // constants\n import { CORE_EXTENSIONS } from \"@/constants/extension\";\n // helpers\n import {\n   insertHorizontalRule,\n   insertImage,\n   insertTableCommand,\n+  setLinkEditor,\n   setText,\n   setTextAlign,\n   toggleBackgroundColor,\n   toggleBlockquote,\n@@ -43,8 +45,9 @@\n   toggleStrike,\n   toggleTaskList,\n   toggleTextColor,\n   toggleUnderline,\n+  unsetLinkEditor,\n } from \"@/helpers/editor-commands\";\n // types\n import { TCommandWithProps, TEditorCommands } from \"@/types\";\n \n@@ -188,17 +191,30 @@\n   command: () => insertImage({ editor, event: \"insert\", pos: editor.state.selection.from }),\n   icon: ImageIcon,\n });\n \n-export const HorizontalRuleItem = (editor: Editor) =>\n+export const HorizontalRuleItem = (editor: Editor): EditorMenuItem<\"divider\"> =>\n   ({\n     key: \"divider\",\n     name: \"Divider\",\n     isActive: () => editor?.isActive(CORE_EXTENSIONS.HORIZONTAL_RULE),\n     command: () => insertHorizontalRule(editor),\n     icon: MinusSquare,\n   }) as const;\n \n+export const LinkItem = (editor: Editor): EditorMenuItem<\"link\"> =>\n+  ({\n+    key: \"link\",\n+    name: \"Link\",\n+    isActive: () => editor?.isActive(\"link\"),\n+    command: (props) => {\n+      if (!props) return;\n+      if (props.url) setLinkEditor(editor, props.url, props.text);\n+      else unsetLinkEditor(editor);\n+    },\n+    icon: LinkIcon,\n+  }) as const;\n+\n export const TextColorItem = (editor: Editor): EditorMenuItem<\"text-color\"> => ({\n   key: \"text-color\",\n   name: \"Color\",\n   isActive: (props) => editor.isActive(CORE_EXTENSIONS.CUSTOM_COLOR, { color: props?.color }),\n@@ -253,8 +269,9 @@\n     QuoteItem(editor),\n     TableItem(editor),\n     ImageItem(editor),\n     HorizontalRuleItem(editor),\n+    LinkItem(editor),\n     TextColorItem(editor),\n     BackgroundColorItem(editor),\n     TextAlignItem(editor),\n   ];\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/block.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/block.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/block.tsx\t7cec921 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/block.tsx\tc3273b1 (commit)\n@@ -1,8 +1,12 @@\n import { NodeSelection } from \"@tiptap/pm/state\";\n import React, { useRef, useState, useCallback, useLayoutEffect, useEffect } from \"react\";\n // plane imports\n import { cn } from \"@plane/utils\";\n+// constants\n+import { CORE_EXTENSIONS } from \"@/constants/extension\";\n+// helpers\n+import { getExtensionStorage } from \"@/helpers/get-extension-storage\";\n // local imports\n import { Pixel, TCustomImageAttributes, TCustomImageSize } from \"../types\";\n import { ensurePixelString, getImageBlockId } from \"../utils\";\n import type { CustomImageNodeViewProps } from \"./node-view\";\n@@ -56,8 +60,10 @@\n   const containerRect = useRef<DOMRect | null>(null);\n   const imageRef = useRef<HTMLImageElement>(null);\n   const [hasErroredOnFirstLoad, setHasErroredOnFirstLoad] = useState(false);\n   const [hasTriedRestoringImageOnce, setHasTriedRestoringImageOnce] = useState(false);\n+  // extension options\n+  const isTouchDevice = !!getExtensionStorage(editor, CORE_EXTENSIONS.UTILITY).isTouchDevice;\n \n   const updateAttributesSafely = useCallback(\n     (attributes: Partial<TCustomImageAttributes>, errorMessage: string) => {\n       try {\n@@ -187,13 +193,17 @@\n \n   const handleImageMouseDown = useCallback(\n     (e: React.MouseEvent) => {\n       e.stopPropagation();\n+      if (isTouchDevice) {\n+        e.preventDefault();\n+        editor.commands.blur();\n+      }\n       const pos = getPos();\n       const nodeSelection = NodeSelection.create(editor.state.doc, pos);\n       editor.view.dispatch(editor.state.tr.setSelection(nodeSelection));\n     },\n-    [editor, getPos]\n+    [editor, getPos, isTouchDevice]\n   );\n \n   // show the image loader if the remote image's src or preview image from filesystem is not set yet (while loading the image post upload) (or)\n   // if the initial resize (from 35% width and \"auto\" height attrs to the actual size in px) is not complete\n@@ -253,9 +263,14 @@\n               }\n               if (!resolvedImageSrc) {\n                 throw new Error(\"No resolved image source available\");\n               }\n-              imageRef.current.src = resolvedImageSrc;\n+              if (isTouchDevice) {\n+                const refreshedSrc = await extension.options.getImageSource?.(imgNodeSrc);\n+                imageRef.current.src = refreshedSrc;\n+              } else {\n+                imageRef.current.src = resolvedImageSrc;\n+              }\n             } catch {\n               // if the image failed to even restore, then show the error state\n               setFailedToLoadImage(true);\n               console.error(\"Error while loading image\", e);\n@@ -280,16 +295,17 @@\n         {showImageToolbar && (\n           <ImageToolbarRoot\n             alignment={nodeAlignment ?? \"left\"}\n             editor={editor}\n-            width={size.width}\n-            height={size.height}\n             aspectRatio={size.aspectRatio === null ? 1 : size.aspectRatio}\n-            src={resolvedImageSrc}\n             downloadSrc={resolvedDownloadSrc}\n             handleAlignmentChange={(alignment) =>\n               updateAttributesSafely({ alignment }, \"Failed to update attributes while changing alignment:\")\n             }\n+            height={size.height}\n+            isTouchDevice={isTouchDevice}\n+            width={size.width}\n+            src={resolvedImageSrc}\n           />\n         )}\n         {selected && displayedImageSrc === resolvedImageSrc && (\n           <div className=\"absolute inset-0 size-full bg-custom-primary-500/30 pointer-events-none\" />\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/node-view.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/node-view.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/node-view.tsx\t7cec921 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/node-view.tsx\tc3273b1 (commit)\n@@ -23,9 +23,9 @@\n export const CustomImageNodeView: React.FC<CustomImageNodeViewProps> = (props) => {\n   const { editor, extension, node } = props;\n   const { src: imgNodeSrc } = node.attrs;\n \n-  const [isUploaded, setIsUploaded] = useState(false);\n+  const [isUploaded, setIsUploaded] = useState(!!imgNodeSrc);\n   const [resolvedSrc, setResolvedSrc] = useState<string | undefined>(undefined);\n   const [resolvedDownloadSrc, setResolvedDownloadSrc] = useState<string | undefined>(undefined);\n   const [imageFromFileSystem, setImageFromFileSystem] = useState<string | undefined>(undefined);\n   const [failedToLoadImage, setFailedToLoadImage] = useState(false);\n@@ -42,15 +42,15 @@\n \n   // the image is already uploaded if the image-component node has src attribute\n   // and we need to remove the blob from our file system\n   useEffect(() => {\n-    if (resolvedSrc) {\n+    if (resolvedSrc || imgNodeSrc) {\n       setIsUploaded(true);\n       setImageFromFileSystem(undefined);\n     } else {\n       setIsUploaded(false);\n     }\n-  }, [resolvedSrc]);\n+  }, [resolvedSrc, imgNodeSrc]);\n \n   useEffect(() => {\n     if (!imgNodeSrc) {\n       setResolvedSrc(undefined);\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/modal.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/modal.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/modal.tsx\t7cec921 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/modal.tsx\tc3273b1 (commit)\n@@ -10,17 +10,18 @@\n const ZOOM_STEPS = [0.5, 1, 1.5, 2];\n \n type Props = {\n   aspectRatio: number;\n-  isFullScreenEnabled: boolean;\n   downloadSrc: string;\n+  isFullScreenEnabled: boolean;\n+  isTouchDevice: boolean;\n   src: string;\n   toggleFullScreenMode: (val: boolean) => void;\n   width: string;\n };\n \n const ImageFullScreenModalWithoutPortal = (props: Props) => {\n-  const { aspectRatio, isFullScreenEnabled, downloadSrc, src, toggleFullScreenMode, width } = props;\n+  const { aspectRatio, isFullScreenEnabled, isTouchDevice, downloadSrc, src, toggleFullScreenMode, width } = props;\n   // refs\n   const dragStart = useRef({ x: 0, y: 0 });\n   const dragOffset = useRef({ x: 0, y: 0 });\n \n@@ -232,9 +233,15 @@\n         <div className=\"fixed bottom-10 left-1/2 -translate-x-1/2 flex items-center justify-center gap-1 rounded-md border border-white/20 py-2 divide-x divide-white/20 bg-black\">\n           <div className=\"flex items-center\">\n             <button\n               type=\"button\"\n-              onClick={() => handleMagnification(\"decrease\")}\n+              onClick={(e) => {\n+                if (isTouchDevice) {\n+                  e.preventDefault();\n+                  e.stopPropagation();\n+                }\n+                handleMagnification(\"decrease\");\n+              }}\n               className=\"size-6 grid place-items-center text-white/60 hover:text-white disabled:text-white/30 transition-colors duration-200\"\n               disabled={magnification <= MIN_ZOOM}\n               aria-label=\"Zoom out\"\n             >\n@@ -242,32 +249,42 @@\n             </button>\n             <span className=\"text-sm w-12 text-center text-white\">{Math.round(100 * magnification)}%</span>\n             <button\n               type=\"button\"\n-              onClick={() => handleMagnification(\"increase\")}\n+              onClick={(e) => {\n+                if (isTouchDevice) {\n+                  e.preventDefault();\n+                  e.stopPropagation();\n+                }\n+                handleMagnification(\"increase\");\n+              }}\n               className=\"size-6 grid place-items-center text-white/60 hover:text-white disabled:text-white/30 transition-colors duration-200\"\n               disabled={magnification >= MAX_ZOOM}\n               aria-label=\"Zoom in\"\n             >\n               <Plus className=\"size-4\" />\n             </button>\n           </div>\n-          <button\n-            type=\"button\"\n-            onClick={() => window.open(downloadSrc, \"_blank\")}\n-            className=\"flex-shrink-0 size-8 grid place-items-center text-white/60 hover:text-white transition-colors duration-200\"\n-            aria-label=\"Download image\"\n-          >\n-            <Download className=\"size-4\" />\n-          </button>\n-          <button\n-            type=\"button\"\n-            onClick={() => window.open(src, \"_blank\")}\n-            className=\"flex-shrink-0 size-8 grid place-items-center text-white/60 hover:text-white transition-colors duration-200\"\n-            aria-label=\"Open image in new tab\"\n-          >\n-            <ExternalLink className=\"size-4\" />\n-          </button>\n+          {!isTouchDevice && (\n+            <button\n+              type=\"button\"\n+              onClick={() => window.open(downloadSrc, \"_blank\")}\n+              className=\"flex-shrink-0 size-8 grid place-items-center text-white/60 hover:text-white transition-colors duration-200\"\n+              aria-label=\"Download image\"\n+            >\n+              <Download className=\"size-4\" />\n+            </button>\n+          )}\n+          {!isTouchDevice && (\n+            <button\n+              type=\"button\"\n+              onClick={() => window.open(src, \"_blank\")}\n+              className=\"flex-shrink-0 size-8 grid place-items-center text-white/60 hover:text-white transition-colors duration-200\"\n+              aria-label=\"Open image in new tab\"\n+            >\n+              <ExternalLink className=\"size-4\" />\n+            </button>\n+          )}\n         </div>\n       </div>\n     </div>\n   );\n@@ -278,8 +295,11 @@\n   const portal = document.querySelector(\"#editor-portal\");\n   if (portal) {\n     modal = ReactDOM.createPortal(modal, portal);\n   } else {\n-    console.warn(\"Portal element #editor-portal not found. Rendering inline.\");\n+    console.warn(\"Portal element #editor-portal not found. Rendering in document.body\");\n+    if (typeof document !== \"undefined\" && document.body) {\n+      modal = ReactDOM.createPortal(modal, document.body);\n+    }\n   }\n   return modal;\n };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx\t7cec921 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx\tc3273b1 (commit)\n@@ -6,19 +6,20 @@\n import { ImageFullScreenModal } from \"./modal\";\n \n type Props = {\n   image: {\n+    aspectRatio: number;\n     downloadSrc: string;\n-    src: string;\n     height: string;\n+    src: string;\n     width: string;\n-    aspectRatio: number;\n   };\n+  isTouchDevice: boolean;\n   toggleToolbarViewStatus: (val: boolean) => void;\n };\n \n export const ImageFullScreenActionRoot: React.FC<Props> = (props) => {\n-  const { image, toggleToolbarViewStatus } = props;\n+  const { image, isTouchDevice, toggleToolbarViewStatus } = props;\n   // states\n   const [isFullScreenEnabled, setIsFullScreenEnabled] = useState(false);\n   // derived values\n   const { downloadSrc, src, width, aspectRatio } = image;\n@@ -30,15 +31,16 @@\n   return (\n     <>\n       <ImageFullScreenModal\n         aspectRatio={aspectRatio}\n+        downloadSrc={downloadSrc}\n         isFullScreenEnabled={isFullScreenEnabled}\n+        isTouchDevice={isTouchDevice}\n         src={src}\n-        downloadSrc={downloadSrc}\n         width={width}\n         toggleFullScreenMode={setIsFullScreenEnabled}\n       />\n-      <Tooltip tooltipContent=\"View in full screen\">\n+      <Tooltip tooltipContent=\"View in full screen\" disabled={isTouchDevice}>\n         <button\n           type=\"button\"\n           onClick={(e) => {\n             e.preventDefault();\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx\t7cec921 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx\tc3273b1 (commit)\n@@ -10,18 +10,19 @@\n \n type Props = {\n   alignment: TCustomImageAlignment;\n   editor: Editor;\n-  width: string;\n-  height: string;\n   aspectRatio: number;\n-  src: string;\n   downloadSrc: string;\n   handleAlignmentChange: (alignment: TCustomImageAlignment) => void;\n+  height: string;\n+  isTouchDevice: boolean;\n+  src: string;\n+  width: string;\n };\n \n export const ImageToolbarRoot: React.FC<Props> = (props) => {\n-  const { alignment, editor, downloadSrc, handleAlignmentChange } = props;\n+  const { alignment, editor, downloadSrc, handleAlignmentChange, isTouchDevice } = props;\n   // states\n   const [shouldShowToolbar, setShouldShowToolbar] = useState(false);\n   // derived values\n   const isEditable = editor.isEditable;\n@@ -35,17 +36,21 @@\n             \"opacity-100 pointer-events-auto\": shouldShowToolbar,\n           }\n         )}\n       >\n-        <ImageDownloadAction src={downloadSrc} />\n+        {!isTouchDevice && <ImageDownloadAction src={downloadSrc} />}\n         {isEditable && (\n           <ImageAlignmentAction\n             activeAlignment={alignment}\n             handleChange={handleAlignmentChange}\n             toggleToolbarViewStatus={setShouldShowToolbar}\n           />\n         )}\n-        <ImageFullScreenActionRoot image={props} toggleToolbarViewStatus={setShouldShowToolbar} />\n+        <ImageFullScreenActionRoot\n+          image={props}\n+          isTouchDevice={isTouchDevice}\n+          toggleToolbarViewStatus={setShouldShowToolbar}\n+        />\n       </div>\n     </>\n   );\n };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/uploader.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/uploader.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/uploader.tsx\t7cec921 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/uploader.tsx\tc3273b1 (commit)\n@@ -39,8 +39,9 @@\n   const hasTriggeredFilePickerRef = useRef(false);\n   const { id: imageEntityId } = node.attrs;\n   // derived values\n   const imageComponentImageFileMap = useMemo(() => getImageComponentImageFileMap(editor), [editor]);\n+  const isTouchDevice = !!getExtensionStorage(editor, CORE_EXTENSIONS.UTILITY).isTouchDevice;\n \n   const onUpload = useCallback(\n     (url: string) => {\n       if (url) {\n@@ -124,14 +125,16 @@\n       if (meta.event === \"drop\" && \"file\" in meta) {\n         uploadFile(meta.file);\n       } else if (meta.event === \"insert\" && fileInputRef.current && !hasTriggeredFilePickerRef.current) {\n         if (meta.hasOpenedFileInputOnce) return;\n-        fileInputRef.current.click();\n+        if (!isTouchDevice) {\n+          fileInputRef.current.click();\n+        }\n         hasTriggeredFilePickerRef.current = true;\n         imageComponentImageFileMap?.set(imageEntityId ?? \"\", { ...meta, hasOpenedFileInputOnce: true });\n       }\n     }\n-  }, [meta, uploadFile, imageComponentImageFileMap, imageEntityId]);\n+  }, [meta, uploadFile, imageComponentImageFileMap, imageEntityId, isTouchDevice]);\n \n   const onFileChange = useCallback(\n     async (e: ChangeEvent<HTMLInputElement>) => {\n       e.preventDefault();\n"
        },
        {
          "path": "packages/editor/src/core/extensions/extensions.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/extensions.ts\n===================================================================\n--- packages/editor/src/core/extensions/extensions.ts\t7cec921 (parent)\n+++ packages/editor/src/core/extensions/extensions.ts\tc3273b1 (commit)\n@@ -37,9 +37,15 @@\n import { CustomStarterKitExtension } from \"./starter-kit\";\n \n type TArguments = Pick<\n   IEditorProps,\n-  \"disabledExtensions\" | \"flaggedExtensions\" | \"fileHandler\" | \"mentionHandler\" | \"placeholder\" | \"tabIndex\"\n+  | \"disabledExtensions\"\n+  | \"flaggedExtensions\"\n+  | \"fileHandler\"\n+  | \"isTouchDevice\"\n+  | \"mentionHandler\"\n+  | \"placeholder\"\n+  | \"tabIndex\"\n > & {\n   enableHistory: boolean;\n   editable: boolean;\n };\n@@ -49,8 +55,9 @@\n     disabledExtensions,\n     enableHistory,\n     fileHandler,\n     flaggedExtensions,\n+    isTouchDevice = false,\n     mentionHandler,\n     placeholder,\n     tabIndex,\n     editable,\n@@ -101,8 +108,9 @@\n     UtilityExtension({\n       disabledExtensions,\n       fileHandler,\n       isEditable: editable,\n+      isTouchDevice,\n     }),\n     ...CoreEditorAdditionalExtensions({\n       disabledExtensions,\n       flaggedExtensions,\n"
        },
        {
          "path": "packages/editor/src/core/extensions/utility.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/utility.ts\n===================================================================\n--- packages/editor/src/core/extensions/utility.ts\t7cec921 (parent)\n+++ packages/editor/src/core/extensions/utility.ts\tc3273b1 (commit)\n@@ -34,17 +34,19 @@\n   assetsList: TEditorAsset[];\n   assetsUploadStatus: TFileHandler[\"assetsUploadStatus\"];\n   uploadInProgress: boolean;\n   activeDropbarExtensions: TActiveDropbarExtensions[];\n+  isTouchDevice: boolean;\n }\n \n type Props = Pick<IEditorProps, \"disabledExtensions\"> & {\n   fileHandler: TFileHandler;\n   isEditable: boolean;\n+  isTouchDevice: boolean;\n };\n \n export const UtilityExtension = (props: Props) => {\n-  const { disabledExtensions, fileHandler, isEditable } = props;\n+  const { disabledExtensions, fileHandler, isEditable, isTouchDevice } = props;\n   const { restore } = fileHandler;\n \n   return Extension.create<Record<string, unknown>, UtilityExtensionStorage>({\n     name: \"utility\",\n@@ -75,8 +77,9 @@\n         assetsList: [],\n         assetsUploadStatus: isEditable && \"assetsUploadStatus\" in fileHandler ? fileHandler.assetsUploadStatus : {},\n         uploadInProgress: false,\n         activeDropbarExtensions: [],\n+        isTouchDevice,\n       };\n     },\n \n     addCommands() {\n"
        },
        {
          "path": "packages/editor/src/core/helpers/editor-commands.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/helpers/editor-commands.ts\n===================================================================\n--- packages/editor/src/core/helpers/editor-commands.ts\t7cec921 (parent)\n+++ packages/editor/src/core/helpers/editor-commands.ts\tc3273b1 (commit)\n@@ -126,9 +126,23 @@\n export const unsetLinkEditor = (editor: Editor) => {\n   editor.chain().focus().unsetLink().run();\n };\n \n-export const setLinkEditor = (editor: Editor, url: string) => {\n+export const setLinkEditor = (editor: Editor, url: string, text?: string) => {\n+  const { selection } = editor.state;\n+  const previousSelection = { from: selection.from, to: selection.to };\n+  if (text) {\n+    editor\n+      .chain()\n+      .focus()\n+      .deleteRange({ from: selection.from, to: selection.to })\n+      .insertContentAt(previousSelection.from, text)\n+      .run();\n+    // Extracting the new selection start point.\n+    const previousFrom = previousSelection.from;\n+\n+    editor.commands.setTextSelection({ from: previousFrom, to: previousFrom + text.length });\n+  }\n   editor.chain().focus().setLink({ href: url }).run();\n };\n \n export const toggleTextColor = (color: string | undefined, editor: Editor, range?: Range) => {\n"
        },
        {
          "path": "packages/editor/src/core/helpers/editor-ref.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/helpers/editor-ref.ts\n===================================================================\n--- packages/editor/src/core/helpers/editor-ref.ts\t7cec921 (parent)\n+++ packages/editor/src/core/helpers/editor-ref.ts\tc3273b1 (commit)\n@@ -23,11 +23,44 @@\n export const getEditorRefHelpers = (args: TArgs): EditorRefApi => {\n   const { editor, provider } = args;\n \n   return {\n+    blur: () => editor?.commands.blur(),\n     clearEditor: (emitUpdate = false) => {\n       editor?.chain().setMeta(CORE_EDITOR_META.SKIP_FILE_DELETION, true).clearContent(emitUpdate).run();\n     },\n+    createSelectionAtCursorPosition: () => {\n+      if (!editor) return;\n+      const { empty } = editor.state.selection;\n+\n+      if (empty) {\n+        // Get the text content and position info\n+        const { $from } = editor.state.selection;\n+        const textContent = $from.parent.textContent;\n+        const posInNode = $from.parentOffset;\n+\n+        // Find word boundaries\n+        let start = posInNode;\n+        let end = posInNode;\n+\n+        // Move start position backwards until we hit a word boundary\n+        while (start > 0 && /\\w/.test(textContent[start - 1])) {\n+          start--;\n+        }\n+\n+        // Move end position forwards until we hit a word boundary\n+        while (end < textContent.length && /\\w/.test(textContent[end])) {\n+          end++;\n+        }\n+\n+        // If we found a word, select it using editor commands\n+        if (start !== end) {\n+          const from = $from.start() + start;\n+          const to = $from.start() + end;\n+          editor.commands.setTextSelection({ from, to });\n+        }\n+      }\n+    },\n     getDocument: () => {\n       const documentBinary = provider?.document ? Y.encodeStateAsUpdate(provider?.document) : null;\n       const documentHTML = editor?.getHTML() ?? \"<p></p>\";\n       const documentJSON = editor?.getJSON() ?? null;\n@@ -54,9 +87,8 @@\n     },\n     setEditorValue: (content, emitUpdate = false) => {\n       editor?.commands.setContent(content, emitUpdate, { preserveWhitespace: true });\n     },\n-    blur: () => editor?.commands.blur(),\n     emitRealTimeUpdate: (message) => provider?.sendStateless(message),\n     executeMenuItemCommand: (props) => {\n       const { itemKey } = props;\n       const editorItems = getEditorMenuItems(editor);\n@@ -69,9 +101,16 @@\n       } else {\n         console.warn(`No command found for item: ${itemKey}`);\n       }\n     },\n+    focus: (args) => editor?.commands.focus(args),\n+    getCoordsFromPos: (pos) => editor?.view.coordsAtPos(pos ?? editor.state.selection.from),\n     getCurrentCursorPosition: () => editor?.state.selection.from,\n+    getAttributesWithExtendedMark: (mark, attribute) => {\n+      if (!editor) return;\n+      editor.commands.extendMarkRange(mark);\n+      return editor.getAttributes(attribute);\n+    },\n     getSelectedText: () => {\n       if (!editor) return null;\n \n       const { state } = editor;\n@@ -164,9 +203,10 @@\n       return () => {\n         editor?.off(\"transaction\", callback);\n       };\n     },\n-    scrollToNodeViaDOMCoordinates(behavior, pos) {\n+    redo: () => editor?.commands.redo(),\n+    scrollToNodeViaDOMCoordinates({ pos, behavior = \"smooth\" }) {\n       const resolvedPos = pos ?? editor?.state.selection.from;\n       if (!editor || !resolvedPos) return;\n       scrollToNodeViaDOMCoordinates(editor, resolvedPos, behavior);\n     },\n@@ -196,6 +236,7 @@\n       const document = provider?.document;\n       if (!document) return;\n       Y.applyUpdate(document, value);\n     },\n+    undo: () => editor?.commands.undo(),\n   };\n };\n"
        },
        {
          "path": "packages/editor/src/core/hooks/use-collaborative-editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/hooks/use-collaborative-editor.ts\n===================================================================\n--- packages/editor/src/core/hooks/use-collaborative-editor.ts\t7cec921 (parent)\n+++ packages/editor/src/core/hooks/use-collaborative-editor.ts\tc3273b1 (commit)\n@@ -26,9 +26,12 @@\n     flaggedExtensions,\n     forwardedRef,\n     handleEditorReady,\n     id,\n+    dragDropEnabled = true,\n+    isTouchDevice,\n     mentionHandler,\n+    onEditorFocus,\n     placeholder,\n     realtimeConfig,\n     serverHandler,\n     tabIndex,\n@@ -85,9 +88,9 @@\n     enableHistory: false,\n     extensions: [\n       SideMenuExtension({\n         aiEnabled: !disabledExtensions?.includes(\"ai\"),\n-        dragDropEnabled: true,\n+        dragDropEnabled,\n       }),\n       HeadingListExtension,\n       Collaboration.configure({\n         document: provider.document,\n@@ -106,11 +109,13 @@\n     fileHandler,\n     flaggedExtensions,\n     forwardedRef,\n     handleEditorReady,\n+    isTouchDevice,\n     mentionHandler,\n     onAssetChange,\n     onChange,\n+    onEditorFocus,\n     onTransaction,\n     placeholder,\n     provider,\n     tabIndex,\n"
        },
        {
          "path": "packages/editor/src/core/hooks/use-editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/hooks/use-editor.ts\n===================================================================\n--- packages/editor/src/core/hooks/use-editor.ts\t7cec921 (parent)\n+++ packages/editor/src/core/hooks/use-editor.ts\tc3273b1 (commit)\n@@ -26,11 +26,13 @@\n     forwardedRef,\n     handleEditorReady,\n     id = \"\",\n     initialValue,\n+    isTouchDevice,\n     mentionHandler,\n     onAssetChange,\n     onChange,\n+    onEditorFocus,\n     onTransaction,\n     placeholder,\n     provider,\n     tabIndex,\n@@ -56,8 +58,9 @@\n           disabledExtensions,\n           enableHistory,\n           fileHandler,\n           flaggedExtensions,\n+          isTouchDevice,\n           mentionHandler,\n           placeholder,\n           tabIndex,\n         }),\n@@ -69,8 +72,9 @@\n         onTransaction?.();\n       },\n       onUpdate: ({ editor }) => onChange?.(editor.getJSON(), editor.getHTML()),\n       onDestroy: () => handleEditorReady?.(false),\n+      onFocus: onEditorFocus,\n     },\n     [editable]\n   );\n \n"
        },
        {
          "path": "packages/editor/src/core/types/config.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/config.ts\n===================================================================\n--- packages/editor/src/core/types/config.ts\t7cec921 (parent)\n+++ packages/editor/src/core/types/config.ts\tc3273b1 (commit)\n@@ -20,11 +20,11 @@\n };\n \n export type TEditorFontStyle = \"sans-serif\" | \"serif\" | \"monospace\";\n \n-export type TEditorFontSize = \"small-font\" | \"large-font\";\n+export type TEditorFontSize = \"small-font\" | \"large-font\" | \"mobile-font\";\n \n-export type TEditorLineSpacing = \"regular\" | \"small\";\n+export type TEditorLineSpacing = \"regular\" | \"small\" | \"mobile-regular\";\n \n export type TDisplayConfig = {\n   fontStyle?: TEditorFontStyle;\n   fontSize?: TEditorFontSize;\n"
        },
        {
          "path": "packages/editor/src/core/types/editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/editor.ts\n===================================================================\n--- packages/editor/src/core/types/editor.ts\t7cec921 (parent)\n+++ packages/editor/src/core/types/editor.ts\tc3273b1 (commit)\n@@ -1,6 +1,8 @@\n-import type { Content, Extensions, JSONContent } from \"@tiptap/core\";\n+import type { Content, Extensions, JSONContent, RawCommands } from \"@tiptap/core\";\n+import type { MarkType, NodeType } from \"@tiptap/pm/model\";\n import type { Selection } from \"@tiptap/pm/state\";\n+import type { EditorProps, EditorView } from \"@tiptap/pm/view\";\n // extension types\n import type { TTextAlign } from \"@/extensions\";\n // helpers\n import type { IMarking } from \"@/helpers/scroll-to-node\";\n@@ -39,8 +41,9 @@\n   | \"code\"\n   | \"table\"\n   | \"image\"\n   | \"divider\"\n+  | \"link\"\n   | \"issue-embed\"\n   | \"text-color\"\n   | \"background-color\"\n   | \"text-align\"\n@@ -57,8 +60,12 @@\n   };\n   \"text-color\": {\n     color: string | undefined;\n   };\n+  link: {\n+    url: string;\n+    text?: string;\n+  };\n   \"background-color\": {\n     color: string | undefined;\n   };\n   \"text-align\": {\n@@ -83,10 +90,17 @@\n \n export type EditorRefApi = {\n   blur: () => void;\n   clearEditor: (emitUpdate?: boolean) => void;\n+  createSelectionAtCursorPosition: () => void;\n   emitRealTimeUpdate: (action: TDocumentEventsServer) => void;\n   executeMenuItemCommand: <T extends TEditorCommands>(props: TCommandWithPropsWithItemKey<T>) => void;\n+  focus: (args: Parameters<RawCommands[\"focus\"]>[0]) => void;\n+  getAttributesWithExtendedMark: (\n+    mark: string | MarkType,\n+    attribute: string | NodeType | MarkType\n+  ) => Record<string, any> | undefined;\n+  getCoordsFromPos: (pos?: number) => ReturnType<EditorView[\"coordsAtPos\"]> | undefined;\n   getCurrentCursorPosition: () => number | undefined;\n   getDocument: () => {\n     binary: Uint8Array | null;\n     html: string;\n@@ -102,15 +116,17 @@\n   listenToRealTimeUpdate: () => TDocumentEventEmitter | undefined;\n   onDocumentInfoChange: (callback: (documentInfo: TDocumentInfo) => void) => () => void;\n   onHeadingChange: (callback: (headings: IMarking[]) => void) => () => void;\n   onStateChange: (callback: () => void) => () => void;\n+  redo: () => void;\n   scrollSummary: (marking: IMarking) => void;\n   // eslint-disable-next-line no-undef\n-  scrollToNodeViaDOMCoordinates: (behavior?: ScrollBehavior, position?: number) => void;\n+  scrollToNodeViaDOMCoordinates: ({ pos, behavior }: { pos?: number; behavior?: ScrollBehavior }) => void;\n   setEditorValue: (content: string, emitUpdate?: boolean) => void;\n   setEditorValueAtCursorPosition: (content: string) => void;\n   setFocusAtPosition: (position: number) => void;\n   setProviderDocument: (value: Uint8Array) => void;\n+  undo: () => void;\n };\n \n // editor props\n export interface IEditorProps {\n@@ -120,17 +136,20 @@\n   displayConfig?: TDisplayConfig;\n   disabledExtensions: TExtensions[];\n   editable: boolean;\n   editorClassName?: string;\n+  editorProps?: EditorProps;\n   extensions?: Extensions;\n   flaggedExtensions: TExtensions[];\n   fileHandler: TFileHandler;\n   forwardedRef?: React.MutableRefObject<EditorRefApi | null>;\n   handleEditorReady?: (value: boolean) => void;\n   id: string;\n   initialValue: string;\n+  isTouchDevice?: boolean;\n   mentionHandler: TMentionHandler;\n   onAssetChange?: (assets: TEditorAsset[]) => void;\n+  onEditorFocus?: () => void;\n   onChange?: (json: object, html: string) => void;\n   onEnterKeyPress?: (e?: any) => void;\n   onTransaction?: () => void;\n   placeholder?: string | ((isFocused: boolean, value: string) => string);\n@@ -144,10 +163,13 @@\n   dragDropEnabled?: boolean;\n };\n \n export interface ICollaborativeDocumentEditorProps\n-  extends Omit<IEditorProps, \"extensions\" | \"initialValue\" | \"onEnterKeyPress\" | \"value\"> {\n+  extends Omit<IEditorProps, \"initialValue\" | \"onEnterKeyPress\" | \"value\"> {\n   aiHandler?: TAIHandler;\n+  documentLoaderClassName?: string;\n+  dragDropEnabled?: boolean;\n+  editable: boolean;\n   embedHandler: TEmbedConfig;\n   realtimeConfig: TRealtimeConfig;\n   serverHandler?: TServerHandler;\n   user: TUserDetails;\n"
        },
        {
          "path": "packages/editor/src/core/types/hook.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/hook.ts\n===================================================================\n--- packages/editor/src/core/types/hook.ts\t7cec921 (parent)\n+++ packages/editor/src/core/types/hook.ts\tc3273b1 (commit)\n@@ -1,16 +1,20 @@\n import type { HocuspocusProvider } from \"@hocuspocus/provider\";\n import type { Content } from \"@tiptap/core\";\n-import type { EditorProps } from \"@tiptap/pm/view\";\n // local imports\n import type { ICollaborativeDocumentEditorProps, IEditorProps } from \"./editor\";\n \n type TCoreHookProps = Pick<\n   IEditorProps,\n-  \"disabledExtensions\" | \"editorClassName\" | \"extensions\" | \"flaggedExtensions\" | \"handleEditorReady\"\n-> & {\n-  editorProps?: EditorProps;\n-};\n+  | \"disabledExtensions\"\n+  | \"editorClassName\"\n+  | \"editorProps\"\n+  | \"extensions\"\n+  | \"flaggedExtensions\"\n+  | \"handleEditorReady\"\n+  | \"isTouchDevice\"\n+  | \"onEditorFocus\"\n+>;\n \n export type TEditorHookProps = TCoreHookProps &\n   Pick<\n     IEditorProps,\n@@ -45,5 +49,8 @@\n     | \"onTransaction\"\n     | \"placeholder\"\n     | \"tabIndex\"\n   > &\n-  Pick<ICollaborativeDocumentEditorProps, \"embedHandler\" | \"realtimeConfig\" | \"serverHandler\" | \"user\">;\n+  Pick<\n+    ICollaborativeDocumentEditorProps,\n+    \"dragDropEnabled\" | \"embedHandler\" | \"realtimeConfig\" | \"serverHandler\" | \"user\"\n+  >;\n"
        },
        {
          "path": "packages/editor/src/styles/variables.css",
          "status": "modified",
          "diff": "Index: packages/editor/src/styles/variables.css\n===================================================================\n--- packages/editor/src/styles/variables.css\t7cec921 (parent)\n+++ packages/editor/src/styles/variables.css\tc3273b1 (commit)\n@@ -87,8 +87,30 @@\n     --line-height-regular: 1.2rem;\n     --line-height-code: 1.2rem;\n     --line-height-list: var(--line-height-regular);\n   }\n+\n+  &.mobile-font {\n+    --font-size-h1: 1.75rem;\n+    --font-size-h2: 1.5rem;\n+    --font-size-h3: 1.375rem;\n+    --font-size-h4: 1.25rem;\n+    --font-size-h5: 1.125rem;\n+    --font-size-h6: 1rem;\n+    --font-size-regular: 0.95rem;\n+    --font-size-code: 0.85rem;\n+    --font-size-list: var(--font-size-regular);\n+\n+    --line-height-h1: 2.25rem;\n+    --line-height-h2: 2rem;\n+    --line-height-h3: 1.75rem;\n+    --line-height-h4: 1.5rem;\n+    --line-height-h5: 1.5rem;\n+    --line-height-h6: 1.5rem;\n+    --line-height-regular: 1.5rem;\n+    --line-height-code: 1.5rem;\n+    --line-height-list: var(--line-height-regular);\n+  }\n   /* end font sizes and line heights */\n \n   /* font styles */\n   --font-style: \"Inter\", sans-serif;\n@@ -145,8 +167,29 @@\n     --list-spacing-y: 0px;\n     --divider-padding-top: 0px;\n     --divider-padding-bottom: 4px;\n   }\n+\n+  &.line-spacing-mobile-regular {\n+    --heading-1-padding-top: 16px;\n+    --heading-1-padding-bottom: 4px;\n+    --heading-2-padding-top: 16px;\n+    --heading-2-padding-bottom: 4px;\n+    --heading-3-padding-top: 16px;\n+    --heading-3-padding-bottom: 4px;\n+    --heading-4-padding-top: 16px;\n+    --heading-4-padding-bottom: 4px;\n+    --heading-5-padding-top: 12px;\n+    --heading-5-padding-bottom: 4px;\n+    --heading-6-padding-top: 12px;\n+    --heading-6-padding-bottom: 4px;\n+    --paragraph-padding-top: 2px;\n+    --paragraph-padding-bottom: 2px;\n+    --paragraph-padding-between: 4px;\n+    --list-spacing-y: 0px;\n+    --divider-padding-top: 0px;\n+    --divider-padding-bottom: 4px;\n+  }\n   /* end spacing */\n }\n /* end font size and style */\n \n"
        }
      ]
    },
    {
      "id": "add-tracking-events",
      "sha": "ef8e613358ba4475253cac9f9500e2d16e9dd035",
      "parentSha": "c4d2c5b1bb5225d0caab9b33dd4b11abe00f1869",
      "spec": "Implement comprehensive event tracking for auth password creation, product updates/changelog, and project views. This includes constant additions and UI wiring to capture views, clicks, successes, and errors, and ensuring elements carry the correct data-ph-element attributes.\n\n1) Constants: extend the analytics core and ensure they are exported\n- In packages/constants/src/event-tracker/core.ts, add:\n  - AUTH_TRACKER_EVENTS.password_created and AUTH_TRACKER_ELEMENTS.SET_PASSWORD_FORM.\n  - PROJECT_VIEW_TRACKER_EVENTS: { create, update, delete } and PROJECT_VIEW_TRACKER_ELEMENTS: { RIGHT_HEADER_ADD_BUTTON, COMMAND_PALETTE_ADD_ITEM, EMPTY_STATE_CREATE_BUTTON, HEADER_SAVE_VIEW_BUTTON, PROJECT_HEADER_SAVE_AS_VIEW_BUTTON, CYCLE_HEADER_SAVE_AS_VIEW_BUTTON, MODULE_HEADER_SAVE_AS_VIEW_BUTTON, QUICK_ACTIONS, LIST_ITEM_CONTEXT_MENU }.\n  - USER_TRACKER_ELEMENTS: { PRODUCT_CHANGELOG_MODAL, CHANGELOG_REDIRECTED }.\n  - ONBOARDING_TRACKER_ELEMENTS: { PASSWORD_CREATION_SELECTED, PASSWORD_CREATION_SKIPPED }.\n- Ensure these are re-exported via packages/constants/src/event-tracker/index.ts and packages/constants/src/index.ts (both already re-export the core module; no structural changes needed beyond new keys in core.ts).\n\n2) Auth: set password page should capture view and outcomes\n- apps/web/app/(all)/accounts/set-password/page.tsx:\n  - Import AUTH_TRACKER_ELEMENTS, AUTH_TRACKER_EVENTS and captureView/captureSuccess/captureError helpers.\n  - On mount, call captureView with elementName = AUTH_TRACKER_ELEMENTS.SET_PASSWORD_FORM.\n  - On submit success (after calling handleSetPassword), call captureSuccess with eventName = AUTH_TRACKER_EVENTS.password_created, then navigate.\n  - On submit error, call captureError with eventName = AUTH_TRACKER_EVENTS.password_created and show error toast.\n  - Update AuthenticationWrapper pageType to use EPageTypes.SET_PASSWORD.\n\n3) Product updates/changelog tracking\n- apps/web/core/components/global/product-updates/modal.tsx:\n  - Import USER_TRACKER_ELEMENTS and captureView.\n  - When isOpen becomes true, call captureView with elementName = USER_TRACKER_ELEMENTS.PRODUCT_CHANGELOG_MODAL.\n  - Ensure any redirect links to changelog include data-ph-element = USER_TRACKER_ELEMENTS.CHANGELOG_REDIRECTED.\n- apps/web/core/components/global/product-updates/footer.tsx:\n  - Add data-ph-element = USER_TRACKER_ELEMENTS.CHANGELOG_REDIRECTED to the external changelog href.\n\n4) Project views: creation/updation/deletion and UI element tracking\n- apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(list)/header.tsx:\n  - Add data-ph-element = PROJECT_VIEW_TRACKER_ELEMENTS.RIGHT_HEADER_ADD_BUTTON to the Add view Button.\n- apps/web/ce/helpers/command-palette.ts and apps/web/core/components/command-palette/actions/project-actions.tsx:\n  - Import PROJECT_VIEW_TRACKER_ELEMENTS and wrap the Create a new view action:\n    - In CE helper, call captureClick({ elementName: PROJECT_VIEW_TRACKER_ELEMENTS.COMMAND_PALETTE_ADD_ITEM }) when toggling create view modal.\n    - In core action, set data-ph-element = PROJECT_VIEW_TRACKER_ELEMENTS.COMMAND_PALETTE_ADD_ITEM on the Command.Item.\n- apps/web/core/components/views/views-list.tsx:\n  - For empty state create button handler, call captureClick({ elementName: PROJECT_VIEW_TRACKER_ELEMENTS.EMPTY_STATE_CREATE_BUTTON }) before opening create view modal.\n- apps/web/core/components/views/quick-actions.tsx:\n  - Import PROJECT_VIEW_TRACKER_ELEMENTS and captureClick.\n  - For context menu items, wrap each item.action to first call captureClick({ elementName: PROJECT_VIEW_TRACKER_ELEMENTS.LIST_ITEM_CONTEXT_MENU }).\n  - For the custom quick actions button, onClick should call captureClick({ elementName: PROJECT_VIEW_TRACKER_ELEMENTS.QUICK_ACTIONS }) then item.action().\n- apps/web/core/components/views/modal.tsx (create/update modal):\n  - Import PROJECT_VIEW_TRACKER_EVENTS and captureSuccess/captureError.\n  - On successful creation: toast success and captureSuccess({ eventName: PROJECT_VIEW_TRACKER_EVENTS.create, payload: { view_id: res.id } }). On error: toast error and captureError({ eventName: PROJECT_VIEW_TRACKER_EVENTS.create }).\n  - On successful update: close modal, toast (if needed), and captureSuccess({ eventName: PROJECT_VIEW_TRACKER_EVENTS.update, payload: { view_id: data?.id } }). On error: toast error and captureError with same eventName and payload.\n- apps/web/core/components/views/delete-view-modal.tsx:\n  - Import PROJECT_VIEW_TRACKER_EVENTS and captureSuccess/captureError.\n  - On successful delete: toast success and captureSuccess({ eventName: PROJECT_VIEW_TRACKER_EVENTS.delete, payload: { view_id: data.id } }). On error: toast error and captureError with same eventName and payload.\n\n5) Save filter/view: thread tracker element into buttons\n- apps/web/core/components/issues/issue-layouts/save-filter-view.tsx:\n  - Add a required prop: trackerElement: string.\n  - Apply data-ph-element={trackerElement} to the Save View Button.\n- Update all callers to pass the correct tracker element:\n  - apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/project-root.tsx: trackerElement = PROJECT_VIEW_TRACKER_ELEMENTS.PROJECT_HEADER_SAVE_AS_VIEW_BUTTON.\n  - apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/module-root.tsx: trackerElement = PROJECT_VIEW_TRACKER_ELEMENTS.MODULE_HEADER_SAVE_AS_VIEW_BUTTON.\n  - apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/cycle-root.tsx: trackerElement = PROJECT_VIEW_TRACKER_ELEMENTS.CYCLE_HEADER_SAVE_AS_VIEW_BUTTON.\n\n6) UpdateViewComponent: use caller-provided tracker element\n- apps/web/core/components/views/update-view-component.tsx:\n  - Add a required prop: trackerElement: string.\n  - Use data-ph-element={trackerElement} on the Save as Button.\n- Update all callers to pass the correct tracker element:\n  - apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/global-view-root.tsx: trackerElement = GLOBAL_VIEW_TRACKER_ELEMENTS.HEADER_SAVE_VIEW_BUTTON (already exists in constants).\n  - apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/project-view-root.tsx: trackerElement = PROJECT_VIEW_TRACKER_ELEMENTS.HEADER_SAVE_VIEW_BUTTON.\n\n7) Ensure imports resolve\n- All updated files must import the new constants from @plane/constants and the event capture helpers from @/helpers/event-tracker.helper.\n- Verify tsconfig path aliases and existing barrels ensure successful imports; no additional changes needed to barrels beyond step (1).\n\nExpected behavior:\n- Password creation flow now emits a view event on form load and success/error events on completion.\n- Product updates modal emits a view event when opened, and changelog links carry data-ph-element for click tracking.\n- Project view creation/update/delete are tracked with success/error events and payloads. UI elements (headers, command palette, quick actions, empty states, context menus) carry data-ph-element attributes per constants.\n- Save View and Save as buttons in filter and view headers consistently emit tracker elements supplied by their callers.",
      "prompt": "Add analytics tracking for password creation, product updates/changelog, and project views across the web app. Define any missing tracker constants and wire the UI so that interactions and outcomes emit captureView/captureClick/captureSuccess/captureError at the right moments. Ensure that relevant buttons and links include a data attribute for element-based tracking and that shared components accept a tracker element prop for consistent instrumentation across contexts. Verify constants are re-exported and imports resolve via the existing barrels.",
      "supplementalFiles": [
        "packages/constants/src/event-tracker/index.ts",
        "packages/constants/src/index.ts",
        "apps/web/helpers/event-tracker.helper.ts",
        "apps/web/core/lib/posthog-provider.tsx"
      ],
      "fileDiffs": [
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(list)/header.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(list)/header.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(list)/header.tsx\tc4d2c5b (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(list)/header.tsx\tef8e613 (commit)\n@@ -2,9 +2,9 @@\n \n import { observer } from \"mobx-react\";\n import { useParams } from \"next/navigation\";\n // ui\n-import { EProjectFeatureKey } from \"@plane/constants\";\n+import { EProjectFeatureKey, PROJECT_VIEW_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { Breadcrumbs, Button, Header } from \"@plane/ui\";\n // components\n import { ViewListHeader } from \"@/components/views\";\n // hooks\n@@ -33,9 +33,14 @@\n         </Header.LeftItem>\n         <Header.RightItem>\n           <ViewListHeader />\n           <div>\n-            <Button variant=\"primary\" size=\"sm\" onClick={() => toggleCreateViewModal(true)}>\n+            <Button\n+              data-ph-element={PROJECT_VIEW_TRACKER_ELEMENTS.RIGHT_HEADER_ADD_BUTTON}\n+              variant=\"primary\"\n+              size=\"sm\"\n+              onClick={() => toggleCreateViewModal(true)}\n+            >\n               Add view\n             </Button>\n           </div>\n         </Header.RightItem>\n"
        },
        {
          "path": "apps/web/app/(all)/accounts/set-password/page.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/accounts/set-password/page.tsx\n===================================================================\n--- apps/web/app/(all)/accounts/set-password/page.tsx\tc4d2c5b (parent)\n+++ apps/web/app/(all)/accounts/set-password/page.tsx\tef8e613 (commit)\n@@ -8,16 +8,17 @@\n // icons\n import { useTheme } from \"next-themes\";\n import { Eye, EyeOff } from \"lucide-react\";\n // plane imports\n-import { E_PASSWORD_STRENGTH } from \"@plane/constants\";\n+import { AUTH_TRACKER_ELEMENTS, AUTH_TRACKER_EVENTS, E_PASSWORD_STRENGTH } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n import { Button, Input, PasswordStrengthIndicator, TOAST_TYPE, setToast } from \"@plane/ui\";\n // components\n import { getPasswordStrength } from \"@plane/utils\";\n // helpers\n import { EPageTypes } from \"@/helpers/authentication.helper\";\n // hooks\n+import { captureError, captureSuccess, captureView } from \"@/helpers/event-tracker.helper\";\n import { useUser } from \"@/hooks/store\";\n import { useAppRouter } from \"@/hooks/use-app-router\";\n // wrappers\n import { AuthenticationWrapper } from \"@/lib/wrappers\";\n@@ -67,8 +68,14 @@\n   const { resolvedTheme } = useTheme();\n   const { data: user, handleSetPassword } = useUser();\n \n   useEffect(() => {\n+    captureView({\n+      elementName: AUTH_TRACKER_ELEMENTS.SET_PASSWORD_FORM,\n+    });\n+  }, []);\n+\n+  useEffect(() => {\n     if (csrfToken === undefined)\n       authService.requestCSRFToken().then((data) => data?.csrf_token && setCsrfToken(data.csrf_token));\n   }, [csrfToken]);\n \n@@ -92,16 +99,21 @@\n     try {\n       e.preventDefault();\n       if (!csrfToken) throw new Error(\"csrf token not found\");\n       await handleSetPassword(csrfToken, { password: passwordFormData.password });\n+      captureSuccess({\n+        eventName: AUTH_TRACKER_EVENTS.password_created,\n+      });\n       router.push(\"/\");\n     } catch (error: unknown) {\n       let message = undefined;\n       if (error instanceof Error) {\n         const err = error as Error & { error?: string };\n         message = err.error;\n       }\n-\n+      captureError({\n+        eventName: AUTH_TRACKER_EVENTS.password_created,\n+      });\n       setToast({\n         type: TOAST_TYPE.ERROR,\n         title: t(\"common.errors.default.title\"),\n         message: message ?? t(\"common.errors.default.message\"),\n@@ -115,10 +127,9 @@\n \n   const logo = resolvedTheme === \"light\" ? BlackHorizontalLogo : WhiteHorizontalLogo;\n \n   return (\n-    // TODO: change to EPageTypes.SET_PASSWORD\n-    <AuthenticationWrapper pageType={EPageTypes.NON_AUTHENTICATED}>\n+    <AuthenticationWrapper pageType={EPageTypes.SET_PASSWORD}>\n       <div className=\"relative w-screen h-screen overflow-hidden\">\n         <div className=\"absolute inset-0 z-0\">\n           <Image\n             src={resolvedTheme === \"dark\" ? PlaneBackgroundPatternDark : PlaneBackgroundPattern}\n"
        },
        {
          "path": "apps/web/ce/helpers/command-palette.ts",
          "status": "modified",
          "diff": "Index: apps/web/ce/helpers/command-palette.ts\n===================================================================\n--- apps/web/ce/helpers/command-palette.ts\tc4d2c5b (parent)\n+++ apps/web/ce/helpers/command-palette.ts\tef8e613 (commit)\n@@ -3,8 +3,9 @@\n   CYCLE_TRACKER_ELEMENTS,\n   MODULE_TRACKER_ELEMENTS,\n   PROJECT_PAGE_TRACKER_ELEMENTS,\n   PROJECT_TRACKER_ELEMENTS,\n+  PROJECT_VIEW_TRACKER_ELEMENTS,\n   WORK_ITEM_TRACKER_ELEMENTS,\n } from \"@plane/constants\";\n import { TCommandPaletteActionList, TCommandPaletteShortcut, TCommandPaletteShortcutList } from \"@plane/types\";\n // store\n@@ -77,9 +78,12 @@\n     },\n     v: {\n       title: \"Create a new view\",\n       description: \"Create a new view in the current project\",\n-      action: () => toggleCreateViewModal(true),\n+      action: () => {\n+        toggleCreateViewModal(true);\n+        captureClick({ elementName: PROJECT_VIEW_TRACKER_ELEMENTS.COMMAND_PALETTE_ADD_ITEM });\n+      },\n     },\n     backspace: {\n       title: \"Bulk delete work items\",\n       description: \"Bulk delete work items in the current project\",\n"
        },
        {
          "path": "apps/web/core/components/command-palette/actions/project-actions.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/command-palette/actions/project-actions.tsx\n===================================================================\n--- apps/web/core/components/command-palette/actions/project-actions.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/command-palette/actions/project-actions.tsx\tef8e613 (commit)\n@@ -2,9 +2,14 @@\n \n import { Command } from \"cmdk\";\n import { ContrastIcon, FileText, Layers } from \"lucide-react\";\n // hooks\n-import { CYCLE_TRACKER_ELEMENTS, MODULE_TRACKER_ELEMENTS, PROJECT_PAGE_TRACKER_ELEMENTS } from \"@plane/constants\";\n+import {\n+  CYCLE_TRACKER_ELEMENTS,\n+  MODULE_TRACKER_ELEMENTS,\n+  PROJECT_PAGE_TRACKER_ELEMENTS,\n+  PROJECT_VIEW_TRACKER_ELEMENTS,\n+} from \"@plane/constants\";\n import { DiceIcon } from \"@plane/ui\";\n // hooks\n import { useCommandPalette } from \"@/hooks/store\";\n // ui\n@@ -54,8 +59,9 @@\n         </Command.Item>\n       </Command.Group>\n       <Command.Group heading=\"View\">\n         <Command.Item\n+          data-ph-element={PROJECT_VIEW_TRACKER_ELEMENTS.COMMAND_PALETTE_ADD_ITEM}\n           onSelect={() => {\n             closePalette();\n             toggleCreateViewModal(true);\n           }}\n"
        },
        {
          "path": "apps/web/core/components/global/product-updates/footer.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/global/product-updates/footer.tsx\n===================================================================\n--- apps/web/core/components/global/product-updates/footer.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/global/product-updates/footer.tsx\tef8e613 (commit)\n@@ -1,5 +1,6 @@\n import Image from \"next/image\";\n+import { USER_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n // ui\n import { getButtonStyling } from \"@plane/ui\";\n // helpers\n@@ -22,8 +23,9 @@\n         <svg viewBox=\"0 0 2 2\" className=\"h-0.5 w-0.5 fill-current\">\n           <circle cx={1} cy={1} r={1} />\n         </svg>\n         <a\n+          data-ph-element={USER_TRACKER_ELEMENTS.CHANGELOG_REDIRECTED}\n           href=\"https://go.plane.so/p-changelog\"\n           target=\"_blank\"\n           className=\"text-sm text-custom-text-200 hover:text-custom-text-100 hover:underline underline-offset-1 outline-none\"\n         >\n"
        },
        {
          "path": "apps/web/core/components/global/product-updates/modal.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/global/product-updates/modal.tsx\n===================================================================\n--- apps/web/core/components/global/product-updates/modal.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/global/product-updates/modal.tsx\tef8e613 (commit)\n@@ -1,11 +1,14 @@\n-import { FC } from \"react\";\n+import { FC, useEffect } from \"react\";\n import { observer } from \"mobx-react\";\n+import { USER_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n // ui\n import { EModalPosition, EModalWidth, ModalCore } from \"@plane/ui\";\n // components\n import { ProductUpdatesFooter } from \"@/components/global\";\n+// helpers\n+import { captureView } from \"@/helpers/event-tracker.helper\";\n // hooks\n import { useInstance } from \"@/hooks/store\";\n // plane web components\n import { ProductUpdatesHeader } from \"@/plane-web/components/global\";\n@@ -19,8 +22,14 @@\n   const { isOpen, handleClose } = props;\n   const { t } = useTranslation();\n   const { config } = useInstance();\n \n+  useEffect(() => {\n+    if (isOpen) {\n+      captureView({ elementName: USER_TRACKER_ELEMENTS.PRODUCT_CHANGELOG_MODAL });\n+    }\n+  }, [isOpen]);\n+\n   return (\n     <ModalCore isOpen={isOpen} handleClose={handleClose} position={EModalPosition.CENTER} width={EModalWidth.XXXXL}>\n       <ProductUpdatesHeader />\n       <div className=\"flex flex-col h-[60vh] vertical-scrollbar scrollbar-xs overflow-hidden overflow-y-scroll px-6 mx-0.5\">\n@@ -31,8 +40,9 @@\n             <div className=\"text-lg font-medium\">{t(\"we_are_having_trouble_fetching_the_updates\")}</div>\n             <div className=\"text-sm text-custom-text-200\">\n               {t(\"please_visit\")}\n               <a\n+                data-ph-element={USER_TRACKER_ELEMENTS.CHANGELOG_REDIRECTED}\n                 href=\"https://go.plane.so/p-changelog\"\n                 target=\"_blank\"\n                 className=\"text-sm text-custom-primary-100 font-medium hover:text-custom-primary-200 underline underline-offset-1 outline-none\"\n               >\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/cycle-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/cycle-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/cycle-root.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/cycle-root.tsx\tef8e613 (commit)\n@@ -1,7 +1,7 @@\n import { observer } from \"mobx-react\";\n import { useParams } from \"next/navigation\";\n-import { EIssueFilterType } from \"@plane/constants\";\n+import { EIssueFilterType, PROJECT_VIEW_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { EIssuesStoreType, IIssueFilterOptions } from \"@plane/types\";\n // hooks\n import { Header, EHeaderVariant } from \"@plane/ui\";\n import { AppliedFiltersList, SaveFilterView } from \"@/components/issues\";\n@@ -94,8 +94,9 @@\n           filters: { ...appliedFilters, cycle: [cycleId?.toString()] },\n           display_filters: issueFilters?.displayFilters,\n           display_properties: issueFilters?.displayProperties,\n         }}\n+        trackerElement={PROJECT_VIEW_TRACKER_ELEMENTS.CYCLE_HEADER_SAVE_AS_VIEW_BUTTON}\n       />\n     </Header>\n   );\n });\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/global-view-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/global-view-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/global-view-root.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/global-view-root.tsx\tef8e613 (commit)\n@@ -10,8 +10,9 @@\n   DEFAULT_GLOBAL_VIEWS_LIST,\n   EIssueFilterType,\n   EUserPermissions,\n   EUserPermissionsLevel,\n+  GLOBAL_VIEW_TRACKER_ELEMENTS,\n   GLOBAL_VIEW_TRACKER_EVENTS,\n } from \"@plane/constants\";\n import { EIssuesStoreType, EViewAccess, IIssueFilterOptions, TStaticViewTypes } from \"@plane/types\";\n import { Header, EHeaderVariant, Loader } from \"@plane/ui\";\n@@ -188,8 +189,9 @@\n           isOwner={isOwner}\n           isAuthorizedUser={isAuthorizedUser}\n           setIsModalOpen={setIsModalOpen}\n           handleUpdateView={handleUpdateView}\n+          trackerElement={GLOBAL_VIEW_TRACKER_ELEMENTS.HEADER_SAVE_VIEW_BUTTON}\n         />\n       ) : (\n         <></>\n       )}\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/module-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/module-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/module-root.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/module-root.tsx\tef8e613 (commit)\n@@ -1,7 +1,7 @@\n import { observer } from \"mobx-react\";\n import { useParams } from \"next/navigation\";\n-import { EIssueFilterType } from \"@plane/constants\";\n+import { EIssueFilterType, PROJECT_VIEW_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { EIssuesStoreType, IIssueFilterOptions } from \"@plane/types\";\n // hooks\n import { Header, EHeaderVariant } from \"@plane/ui\";\n import { AppliedFiltersList, SaveFilterView } from \"@/components/issues\";\n@@ -93,8 +93,9 @@\n           filters: { ...appliedFilters, module: [moduleId.toString()] },\n           display_filters: issueFilters?.displayFilters,\n           display_properties: issueFilters?.displayProperties,\n         }}\n+        trackerElement={PROJECT_VIEW_TRACKER_ELEMENTS.MODULE_HEADER_SAVE_AS_VIEW_BUTTON}\n       />\n     </Header>\n   );\n });\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/project-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/project-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/project-root.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/project-root.tsx\tef8e613 (commit)\n@@ -1,8 +1,13 @@\n import { observer } from \"mobx-react\";\n import { useParams } from \"next/navigation\";\n // types\n-import { EIssueFilterType, EUserPermissions, EUserPermissionsLevel } from \"@plane/constants\";\n+import {\n+  EIssueFilterType,\n+  EUserPermissions,\n+  EUserPermissionsLevel,\n+  PROJECT_VIEW_TRACKER_ELEMENTS,\n+} from \"@plane/constants\";\n import { EIssuesStoreType, IIssueFilterOptions } from \"@plane/types\";\n // ui\n import { Header, EHeaderVariant } from \"@plane/ui\";\n // components\n@@ -93,8 +98,9 @@\n               filters: appliedFilters,\n               display_filters: issueFilters?.displayFilters,\n               display_properties: issueFilters?.displayProperties,\n             }}\n+            trackerElement={PROJECT_VIEW_TRACKER_ELEMENTS.PROJECT_HEADER_SAVE_AS_VIEW_BUTTON}\n           />\n         )}\n       </Header.RightItem>\n     </Header>\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/project-view-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/project-view-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/project-view-root.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/issues/issue-layouts/filters/applied-filters/roots/project-view-root.tsx\tef8e613 (commit)\n@@ -5,9 +5,14 @@\n import isEmpty from \"lodash/isEmpty\";\n import { observer } from \"mobx-react\";\n import { useParams } from \"next/navigation\";\n // types\n-import { EIssueFilterType, EUserPermissions, EUserPermissionsLevel } from \"@plane/constants\";\n+import {\n+  EIssueFilterType,\n+  EUserPermissions,\n+  EUserPermissionsLevel,\n+  PROJECT_VIEW_TRACKER_ELEMENTS,\n+} from \"@plane/constants\";\n import { EIssuesStoreType, EViewAccess, IIssueFilterOptions } from \"@plane/types\";\n // components\n import { Header, EHeaderVariant } from \"@plane/ui\";\n import { AppliedFiltersList } from \"@/components/issues\";\n@@ -144,8 +149,9 @@\n           isOwner={isOwner}\n           isAuthorizedUser={isAuthorizedUser}\n           setIsModalOpen={setIsModalOpen}\n           handleUpdateView={handleUpdateView}\n+          trackerElement={PROJECT_VIEW_TRACKER_ELEMENTS.HEADER_SAVE_VIEW_BUTTON}\n         />\n       </Header.RightItem>\n     </Header>\n   );\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/save-filter-view.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/save-filter-view.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/save-filter-view.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/issues/issue-layouts/save-filter-view.tsx\tef8e613 (commit)\n@@ -13,12 +13,13 @@\n     filters: IIssueFilterOptions;\n     display_filters?: IIssueDisplayFilterOptions;\n     display_properties?: IIssueDisplayProperties;\n   };\n+  trackerElement: string;\n }\n \n export const SaveFilterView: FC<ISaveFilterView> = (props) => {\n-  const { workspaceSlug, projectId, filterParams } = props;\n+  const { workspaceSlug, projectId, filterParams, trackerElement } = props;\n \n   const [viewModal, setViewModal] = useState<boolean>(false);\n \n   return (\n@@ -30,9 +31,9 @@\n         isOpen={viewModal}\n         onClose={() => setViewModal(false)}\n       />\n \n-      <Button size=\"sm\" onClick={() => setViewModal(true)}>\n+      <Button size=\"sm\" onClick={() => setViewModal(true)} data-ph-element={trackerElement}>\n         Save View\n       </Button>\n     </div>\n   );\n"
        },
        {
          "path": "apps/web/core/components/onboarding/profile-setup.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/onboarding/profile-setup.tsx\n===================================================================\n--- apps/web/core/components/onboarding/profile-setup.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/onboarding/profile-setup.tsx\tef8e613 (commit)\n@@ -5,9 +5,14 @@\n import Image from \"next/image\";\n import { useTheme } from \"next-themes\";\n import { Controller, useForm } from \"react-hook-form\";\n import { Eye, EyeOff } from \"lucide-react\";\n-import { E_PASSWORD_STRENGTH, ONBOARDING_TRACKER_ELEMENTS, USER_TRACKER_EVENTS } from \"@plane/constants\";\n+import {\n+  AUTH_TRACKER_EVENTS,\n+  E_PASSWORD_STRENGTH,\n+  ONBOARDING_TRACKER_ELEMENTS,\n+  USER_TRACKER_EVENTS,\n+} from \"@plane/constants\";\n // types\n import { useTranslation } from \"@plane/i18n\";\n import { IUser, TUserProfile, TOnboardingSteps } from \"@plane/types\";\n // ui\n@@ -122,9 +127,20 @@\n     setShowPassword((prev) => ({ ...prev, [key]: !prev[key] }));\n \n   const handleSetPassword = async (password: string) => {\n     const token = await authService.requestCSRFToken().then((data) => data?.csrf_token);\n-    await authService.setPassword(token, { password });\n+    await authService\n+      .setPassword(token, { password })\n+      .then(() => {\n+        captureSuccess({\n+          eventName: AUTH_TRACKER_EVENTS.password_created,\n+        });\n+      })\n+      .catch(() => {\n+        captureError({\n+          eventName: AUTH_TRACKER_EVENTS.password_created,\n+        });\n+      });\n   };\n \n   const handleSubmitProfileSetup = async (formData: TProfileSetupFormValues) => {\n     const userDetailsPayload: Partial<IUser> = {\n@@ -179,9 +195,20 @@\n     try {\n       await Promise.all([\n         updateCurrentUser(userDetailsPayload),\n         formData.password && handleSetPassword(formData.password),\n-      ]).then(() => setProfileSetupStep(EProfileSetupSteps.USER_PERSONALIZATION));\n+      ]).then(() => {\n+        if (formData.password) {\n+          captureView({\n+            elementName: ONBOARDING_TRACKER_ELEMENTS.PASSWORD_CREATION_SELECTED,\n+          });\n+        } else {\n+          captureView({\n+            elementName: ONBOARDING_TRACKER_ELEMENTS.PASSWORD_CREATION_SKIPPED,\n+          });\n+        }\n+        setProfileSetupStep(EProfileSetupSteps.USER_PERSONALIZATION);\n+      });\n     } catch {\n       captureError({\n         eventName: USER_TRACKER_EVENTS.add_details,\n       });\n"
        },
        {
          "path": "apps/web/core/components/views/delete-view-modal.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/views/delete-view-modal.tsx\n===================================================================\n--- apps/web/core/components/views/delete-view-modal.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/views/delete-view-modal.tsx\tef8e613 (commit)\n@@ -3,11 +3,14 @@\n import React, { useState } from \"react\";\n import { observer } from \"mobx-react\";\n import { useParams, useRouter } from \"next/navigation\";\n // types\n+import { PROJECT_VIEW_TRACKER_EVENTS } from \"@plane/constants\";\n import { IProjectView } from \"@plane/types\";\n // ui\n import { AlertModalCore, TOAST_TYPE, setToast } from \"@plane/ui\";\n+// helpers\n+import { captureError, captureSuccess } from \"@/helpers/event-tracker.helper\";\n // hooks\n import { useProjectView } from \"@/hooks/store\";\n \n type Props = {\n@@ -44,16 +47,28 @@\n           type: TOAST_TYPE.SUCCESS,\n           title: \"Success!\",\n           message: \"View deleted successfully.\",\n         });\n+        captureSuccess({\n+          eventName: PROJECT_VIEW_TRACKER_EVENTS.delete,\n+          payload: {\n+            view_id: data.id,\n+          },\n+        });\n       })\n-      .catch(() =>\n+      .catch(() => {\n         setToast({\n           type: TOAST_TYPE.ERROR,\n           title: \"Error!\",\n           message: \"View could not be deleted. Please try again.\",\n-        })\n-      )\n+        });\n+        captureError({\n+          eventName: PROJECT_VIEW_TRACKER_EVENTS.delete,\n+          payload: {\n+            view_id: data.id,\n+          },\n+        });\n+      })\n       .finally(() => {\n         setIsDeleteLoading(false);\n       });\n   };\n"
        },
        {
          "path": "apps/web/core/components/views/modal.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/views/modal.tsx\n===================================================================\n--- apps/web/core/components/views/modal.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/views/modal.tsx\tef8e613 (commit)\n@@ -2,14 +2,16 @@\n \n import { FC } from \"react\";\n import { observer } from \"mobx-react\";\n // types\n+import { PROJECT_VIEW_TRACKER_EVENTS } from \"@plane/constants\";\n import { IProjectView } from \"@plane/types\";\n // ui\n import { EModalPosition, EModalWidth, ModalCore, TOAST_TYPE, setToast } from \"@plane/ui\";\n // components\n import { ProjectViewForm } from \"@/components/views\";\n // hooks\n+import { captureError, captureSuccess } from \"@/helpers/event-tracker.helper\";\n import { useProjectView } from \"@/hooks/store\";\n import { useAppRouter } from \"@/hooks/use-app-router\";\n import useKeypress from \"@/hooks/use-keypress\";\n \n@@ -42,28 +44,51 @@\n           type: TOAST_TYPE.SUCCESS,\n           title: \"Success!\",\n           message: \"View created successfully.\",\n         });\n+        captureSuccess({\n+          eventName: PROJECT_VIEW_TRACKER_EVENTS.create,\n+          payload: {\n+            view_id: res.id,\n+          },\n+        });\n       })\n-      .catch(() =>\n+      .catch(() => {\n         setToast({\n           type: TOAST_TYPE.ERROR,\n           title: \"Error!\",\n           message: \"Something went wrong. Please try again.\",\n-        })\n-      );\n+        });\n+        captureError({\n+          eventName: PROJECT_VIEW_TRACKER_EVENTS.create,\n+        });\n+      });\n   };\n \n   const handleUpdateView = async (payload: IProjectView) => {\n     await updateView(workspaceSlug, projectId, data?.id as string, payload)\n-      .then(() => handleClose())\n-      .catch((err) =>\n+      .then(() => {\n+        handleClose();\n+        captureSuccess({\n+          eventName: PROJECT_VIEW_TRACKER_EVENTS.update,\n+          payload: {\n+            view_id: data?.id,\n+          },\n+        });\n+      })\n+      .catch((err) => {\n         setToast({\n           type: TOAST_TYPE.ERROR,\n           title: \"Error!\",\n           message: err?.detail ?? \"Something went wrong. Please try again.\",\n-        })\n-      );\n+        });\n+        captureError({\n+          eventName: PROJECT_VIEW_TRACKER_EVENTS.update,\n+          payload: {\n+            view_id: data?.id,\n+          },\n+        });\n+      });\n   };\n \n   const handleFormSubmit = async (formData: IProjectView) => {\n     if (!data) await handleCreateView(formData);\n"
        },
        {
          "path": "apps/web/core/components/views/quick-actions.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/views/quick-actions.tsx\n===================================================================\n--- apps/web/core/components/views/quick-actions.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/views/quick-actions.tsx\tef8e613 (commit)\n@@ -3,16 +3,17 @@\n import { useState } from \"react\";\n import { observer } from \"mobx-react\";\n import { ExternalLink, Link, Pencil, Trash2 } from \"lucide-react\";\n // types\n-import { EUserPermissions, EUserPermissionsLevel } from \"@plane/constants\";\n+import { EUserPermissions, EUserPermissionsLevel, PROJECT_VIEW_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { IProjectView } from \"@plane/types\";\n // ui\n import { ContextMenu, CustomMenu, TContextMenuItem, TOAST_TYPE, setToast } from \"@plane/ui\";\n import { copyUrlToClipboard, cn } from \"@plane/utils\";\n // components\n import { CreateUpdateProjectViewModal, DeleteProjectViewModal } from \"@/components/views\";\n // helpers\n+import { captureClick } from \"@/helpers/event-tracker.helper\";\n // hooks\n import { useUser, useUserPermissions } from \"@/hooks/store\";\n import { PublishViewModal, useViewPublish } from \"@/plane-web/components/views/publish\";\n \n@@ -82,8 +83,16 @@\n   ];\n \n   if (publishContextMenu) MENU_ITEMS.splice(2, 0, publishContextMenu);\n \n+  const CONTEXT_MENU_ITEMS = MENU_ITEMS.map((item) => ({\n+    ...item,\n+    action: () => {\n+      captureClick({ elementName: PROJECT_VIEW_TRACKER_ELEMENTS.LIST_ITEM_CONTEXT_MENU });\n+      item.action();\n+    },\n+  }));\n+\n   return (\n     <>\n       <CreateUpdateProjectViewModal\n         isOpen={createUpdateViewModal}\n@@ -93,9 +102,9 @@\n         data={view}\n       />\n       <DeleteProjectViewModal data={view} isOpen={deleteViewModal} onClose={() => setDeleteViewModal(false)} />\n       <PublishViewModal isOpen={isPublishModalOpen} onClose={() => setPublishModalOpen(false)} view={view} />\n-      <ContextMenu parentRef={parentRef} items={MENU_ITEMS} />\n+      <ContextMenu parentRef={parentRef} items={CONTEXT_MENU_ITEMS} />\n       <CustomMenu ellipsis placement=\"bottom-end\" closeOnSelect buttonClassName={customClassName}>\n         {MENU_ITEMS.map((item) => {\n           if (item.shouldRender === false) return null;\n           return (\n@@ -103,8 +112,9 @@\n               key={item.key}\n               onClick={(e) => {\n                 e.preventDefault();\n                 e.stopPropagation();\n+                captureClick({ elementName: PROJECT_VIEW_TRACKER_ELEMENTS.QUICK_ACTIONS });\n                 item.action();\n               }}\n               className={cn(\n                 \"flex items-center gap-2\",\n"
        },
        {
          "path": "apps/web/core/components/views/update-view-component.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/views/update-view-component.tsx\n===================================================================\n--- apps/web/core/components/views/update-view-component.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/views/update-view-component.tsx\tef8e613 (commit)\n@@ -1,6 +1,5 @@\n import { SetStateAction, useEffect, useState } from \"react\";\n-import { GLOBAL_VIEW_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { Button } from \"@plane/ui\";\n import { LockedComponent } from \"../icons/locked-component\";\n \n type Props = {\n@@ -10,8 +9,9 @@\n   isAuthorizedUser: boolean;\n   setIsModalOpen: (value: SetStateAction<boolean>) => void;\n   handleUpdateView: () => void;\n   lockedTooltipContent?: string;\n+  trackerElement: string;\n };\n \n export const UpdateViewComponent = (props: Props) => {\n   const {\n@@ -21,8 +21,9 @@\n     isAuthorizedUser,\n     setIsModalOpen,\n     handleUpdateView,\n     lockedTooltipContent,\n+    trackerElement,\n   } = props;\n \n   const [isUpdating, setIsUpdating] = useState(false);\n \n@@ -62,9 +63,9 @@\n             <Button\n               variant=\"outline-primary\"\n               size=\"md\"\n               className=\"flex-shrink-0\"\n-              data-ph-element={GLOBAL_VIEW_TRACKER_ELEMENTS.HEADER_SAVE_VIEW_BUTTON}\n+              data-ph-element={trackerElement}\n               onClick={() => setIsModalOpen(true)}\n             >\n               Save as\n             </Button>\n"
        },
        {
          "path": "apps/web/core/components/views/views-list.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/views/views-list.tsx\n===================================================================\n--- apps/web/core/components/views/views-list.tsx\tc4d2c5b (parent)\n+++ apps/web/core/components/views/views-list.tsx\tef8e613 (commit)\n@@ -1,16 +1,17 @@\n import { observer } from \"mobx-react\";\n import { useParams } from \"next/navigation\";\n // plane imports\n-import { EUserPermissionsLevel } from \"@plane/constants\";\n+import { EUserPermissionsLevel, PROJECT_VIEW_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n import { EUserProjectRoles } from \"@plane/types\";\n // components\n import { ListLayout } from \"@/components/core/list\";\n import { ComicBoxButton, DetailedEmptyState, SimpleEmptyState } from \"@/components/empty-state\";\n import { ViewListLoader } from \"@/components/ui\";\n import { ProjectViewListItem } from \"@/components/views\";\n // hooks\n+import { captureClick } from \"@/helpers/event-tracker.helper\";\n import { useCommandPalette, useProjectView, useUserPermissions } from \"@/hooks/store\";\n import { useResolvedAssetPath } from \"@/hooks/use-resolved-asset-path\";\n \n export const ProjectViewsList = observer(() => {\n@@ -70,9 +71,12 @@\n             <ComicBoxButton\n               label={t(\"project_views.empty_state.general.primary_button.text\")}\n               title={t(\"project_views.empty_state.general.primary_button.comic.title\")}\n               description={t(\"project_views.empty_state.general.primary_button.comic.description\")}\n-              onClick={() => toggleCreateViewModal(true)}\n+              onClick={() => {\n+                toggleCreateViewModal(true);\n+                captureClick({ elementName: PROJECT_VIEW_TRACKER_ELEMENTS.EMPTY_STATE_CREATE_BUTTON });\n+              }}\n               disabled={!canPerformEmptyStateActions}\n             />\n           }\n         />\n"
        },
        {
          "path": "packages/constants/src/event-tracker/core.ts",
          "status": "modified",
          "diff": "Index: packages/constants/src/event-tracker/core.ts\n===================================================================\n--- packages/constants/src/event-tracker/core.ts\tc4d2c5b (parent)\n+++ packages/constants/src/event-tracker/core.ts\tef8e613 (commit)\n@@ -267,8 +267,9 @@\n   sign_up_with_password: \"sign_up_with_password\",\n   sign_in_with_password: \"sign_in_with_password\",\n   forgot_password: \"forgot_password_clicked\",\n   new_code_requested: \"new_code_requested\",\n+  password_created: \"password_created\",\n };\n \n export const AUTH_TRACKER_ELEMENTS = {\n   NAVIGATE_TO_SIGN_UP: \"navigate_to_sign_up\",\n@@ -277,8 +278,9 @@\n   SIGN_IN_FROM_SIGNUP: \"sign_in_from_signup\",\n   SIGN_IN_WITH_UNIQUE_CODE: \"sign_in_with_unique_code\",\n   REQUEST_NEW_CODE: \"request_new_code\",\n   VERIFY_CODE: \"verify_code\",\n+  SET_PASSWORD_FORM: \"set_password_form\",\n };\n \n /**\n  * ===========================================================================\n@@ -300,8 +302,31 @@\n };\n \n /**\n  * ===========================================================================\n+ * Project View Events and Elements\n+ * ===========================================================================\n+ */\n+export const PROJECT_VIEW_TRACKER_EVENTS = {\n+  create: \"project_view_created\",\n+  update: \"project_view_updated\",\n+  delete: \"project_view_deleted\",\n+};\n+\n+export const PROJECT_VIEW_TRACKER_ELEMENTS = {\n+  RIGHT_HEADER_ADD_BUTTON: \"project_view_right_header_add_button\",\n+  COMMAND_PALETTE_ADD_ITEM: \"command_palette_add_project_view_item\",\n+  EMPTY_STATE_CREATE_BUTTON: \"project_view_empty_state_create_button\",\n+  HEADER_SAVE_VIEW_BUTTON: \"project_view_header_save_view_button\",\n+  PROJECT_HEADER_SAVE_AS_VIEW_BUTTON: \"project_view_header_save_as_view_button\",\n+  CYCLE_HEADER_SAVE_AS_VIEW_BUTTON: \"cycle_header_save_as_view_button\",\n+  MODULE_HEADER_SAVE_AS_VIEW_BUTTON: \"module_header_save_as_view_button\",\n+  QUICK_ACTIONS: \"project_view_quick_actions\",\n+  LIST_ITEM_CONTEXT_MENU: \"project_view_list_item_context_menu\",\n+};\n+\n+/**\n+ * ===========================================================================\n  * Product Tour Events and Elements\n  * ===========================================================================\n  */\n export const PRODUCT_TOUR_TRACKER_EVENTS = {\n@@ -342,15 +367,22 @@\n   add_details: \"user_details_added\",\n   onboarding_complete: \"user_onboarding_completed\",\n };\n \n+export const USER_TRACKER_ELEMENTS = {\n+  PRODUCT_CHANGELOG_MODAL: \"product_changelog_modal\",\n+  CHANGELOG_REDIRECTED: \"changelog_redirected\",\n+};\n+\n /**\n  * ===========================================================================\n  * Onboarding Events and Elements\n  * ===========================================================================\n  */\n export const ONBOARDING_TRACKER_ELEMENTS = {\n   PROFILE_SETUP_FORM: \"onboarding_profile_setup_form\",\n+  PASSWORD_CREATION_SELECTED: \"onboarding_password_creation_selected\",\n+  PASSWORD_CREATION_SKIPPED: \"onboarding_password_creation_skipped\",\n };\n \n /**\n  * ===========================================================================\n"
        }
      ]
    },
    {
      "id": "add-unique-ids",
      "sha": "bd0361de92a93ad7d770af8f4d7b0f609a3a7d83",
      "parentSha": "ebab5e209f63674f2a544e3b458df5a11fc107ce",
      "spec": "Implement persistent unique IDs for block-level nodes in the rich-text editor, integrate with collaboration, and pass issue context into the editor menus.\n\nScope and requirements:\n\n1) Backend sanitization\n- Update the Django content sanitizer to allow the data-id attribute on editor HTML content.\n  - File: apps/api/plane/utils/content_validator.py\n  - Add \"data-id\" to the ATTRIBUTES allowlist so that saved content containing data-id on nodes is not stripped.\n\n2) Web app: pass issue sequence context to the editor\n- Update the DescriptionInput API to accept an optional issueSequenceId used as an identifier for the active issue.\n  - File: apps/web/core/components/editor/rich-text/description-input/root.tsx\n  - Add a new optional prop issueSequenceId?: number.\n  - Pass this prop down to the editor wrapper so that the editor can derive a workItemIdentifier for menus.\n- Pass issueSequenceId from places that render the issue description editor:\n  - File: apps/web/core/components/inbox/content/issue-root.tsx\n  - File: apps/web/core/components/issues/issue-detail/main-content.tsx\n  - File: apps/web/core/components/issues/peek-overview/issue-detail.tsx\n  - Provide issue.sequence_id via issueSequenceId when rendering DescriptionInput.\n- Update the rich-text editor wrapper in the web app to accept and forward this context.\n  - File: apps/web/core/components/editor/rich-text/editor.tsx\n  - Extend the wrapper props with issueSequenceId?: number and ensure it is forwarded into the underlying shared editor so menus can access a workItemIdentifier derived from it.\n\n3) Editor package: add UniqueID extension and wire it in\n- Define a new core extension key for unique IDs and enumerate supported block node types.\n  - File: packages/editor/src/core/constants/extension.ts\n  - Add CORE_EXTENSIONS.UNIQUE_ID to the enum.\n  - Add a BLOCK_NODE_TYPES array containing the editors built-in block node type names (paragraph, heading, blockquote, code block, hr, list variants, table, image/custom image, callout, work item embed).\n- Allow CE or downstream packages to contribute additional block node types.\n  - File: packages/editor/src/ce/constants/extensions.ts\n  - Export ADDITIONAL_BLOCK_NODE_TYPES as an empty array by default.\n- Implement the UniqueID extension with the following behavior:\n  - Files: packages/editor/src/core/extensions/unique-id/extension.ts, plugin.ts, utils.ts\n  - Global attribute: add an id attribute to configured block node types, rendered as data-id in HTML and parsed from data-id.\n  - On editor create: if editable and not using a collaboration provider (or provider is already synced), scan the document and add IDs to nodes missing them.\n  - ProseMirror plugin behavior:\n    - Append transaction: for document changes (excluding collaboration y-sync transactions), add IDs to new/mutated nodes without an id and resolve duplicate IDs on newly introduced nodes.\n    - Paste/drop handling: strip data-id from pasted/dropped content so new IDs are generated post-insert.\n    - Collaboration: if a Hocuspocus provider is used and not yet synced, defer initial ID creation until the provider emits a synced event; clean up the listener when done or on view destroy.\n  - Use UUID v4 for ID generation by default, with options to override.\n- Register the UniqueID extension in the core editors extension list with provider awareness.\n  - File: packages/editor/src/core/extensions/extensions.ts\n  - Accept a provider: HocuspocusProvider | undefined in the arguments passed to CoreEditorExtensions.\n  - Add UniqueID to the returned extensions, configured with the provider.\n- Ensure the editor hook passes the collaboration provider to the extension registry.\n  - File: packages/editor/src/core/hooks/use-editor.ts\n  - Pass provider through to CoreEditorExtensions so UniqueID can react to provider sync state.\n\n4) Editor package: expose workItemIdentifier to menus\n- Extend editor props to accept an optional workItemIdentifier that can be used by menus (e.g., for contextual actions or embeds).\n  - File: packages/editor/src/core/types/editor.ts\n  - Add workItemIdentifier?: string | null to IEditorProps.\n- Plumb workItemIdentifier into the block menu:\n  - File: packages/editor/src/core/components/editors/rich-text/editor.tsx\n  - Accept workItemIdentifier in the editor component props and pass it to the BlockMenu component.\n  - File: packages/editor/src/core/components/menus/block-menu.tsx\n  - Extend the BlockMenu props to accept workItemIdentifier and wire it through its component signature (no behavior change required at this time).\n\nFunctional/observable acceptance criteria:\n- When editing content, each block-level node of the configured types has a stable data-id attribute in the saved HTML; newly created nodes receive an ID automatically.\n- Pasting or dropping content removes old IDs from pasted nodes and regenerates new ones on insert; undo history does not record ID-generation steps.\n- In collaborative sessions (Hocuspocus), IDs are not added until the provider is synced; IDs are not duplicated when peers edit concurrently.\n- The backend no longer strips data-id and persists it as part of the description content.\n- DescriptionInput supports an issueSequenceId prop and the places rendering issue descriptions pass issue.sequence_id into it. The editor exposes this context to the BlockMenu via workItemIdentifier so future features can use it.",
      "prompt": "Add persistent unique IDs to block-level nodes in the rich-text editor and make them collaboration-safe. Ensure the backend sanitizer allows these IDs. Also pass the current issues sequence identifier from issue views into the editor so menus can access an issue-specific identifier.\n\nSpecifically:\n- The editor must assign a unique ID to each block node, persist it in HTML as a data-id attribute, and regenerate IDs for pasted/dropped content. Avoid adding these ID operations to undo history.\n- Support collaborative editing: do not create IDs during incoming collaboration transactions, and defer initial ID creation until the collaboration provider has synced.\n- Whitelist data-id on the backend so saved descriptions containing these attributes are not stripped.\n- Add a way for issue views to pass the current issues sequence identifier into the DescriptionInput and forward it to the editor menu context.\n\nDo not include code; describe the necessary changes across the relevant files, including editor extension registration, prop additions, and sanitizer updates. Ensure the behavior is testable in both single-user and collaborative sessions.",
      "supplementalFiles": [
        "packages/editor/Readme.md",
        "apps/live/src/hocuspocus.ts",
        "packages/services/src/live.service.ts",
        "apps/api/plane/utils/html_processor.py",
        "apps/api/plane/utils/markdown.py",
        "packages/types/src/issues/issue.ts"
      ],
      "fileDiffs": [
        {
          "path": "apps/api/plane/utils/content_validator.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/utils/content_validator.py\n===================================================================\n--- apps/api/plane/utils/content_validator.py\tebab5e2 (parent)\n+++ apps/api/plane/utils/content_validator.py\tbd0361d (commit)\n@@ -98,8 +98,9 @@\n         \"data-checked\",\n         \"data-background-color\",\n         \"data-text-color\",\n         \"data-name\",\n+        \"data-id\",\n         # callout attributes\n         \"data-icon-name\",\n         \"data-icon-color\",\n         \"data-background\",\n"
        },
        {
          "path": "apps/web/core/components/editor/rich-text/description-input/root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/editor/rich-text/description-input/root.tsx\n===================================================================\n--- apps/web/core/components/editor/rich-text/description-input/root.tsx\tebab5e2 (parent)\n+++ apps/web/core/components/editor/rich-text/description-input/root.tsx\tbd0361d (commit)\n@@ -78,8 +78,12 @@\n   /**\n    * @description Workspace slug, this will be used to get the workspace details\n    */\n   workspaceSlug: string;\n+  /**\n+   * @description Issue sequence id, this will be used to get the issue sequence id\n+   */\n+  issueSequenceId?: number;\n };\n \n /**\n  * @description DescriptionInput component for rich text editor with autosave functionality using debounce\n@@ -99,8 +103,9 @@\n     projectId,\n     setIsSubmitting,\n     swrDescription,\n     workspaceSlug,\n+    issueSequenceId,\n   } = props;\n   // states\n   const [localDescription, setLocalDescription] = useState<TFormData>({\n     id: entityId,\n@@ -194,8 +199,9 @@\n             <RichTextEditor\n               editable={!disabled}\n               ref={editorRef}\n               id={entityId}\n+              issueSequenceId={issueSequenceId}\n               disabledExtensions={disabledExtensions}\n               initialValue={localDescription.description_html ?? \"<p></p>\"}\n               value={swrDescription ?? null}\n               workspaceSlug={workspaceSlug}\n"
        },
        {
          "path": "apps/web/core/components/editor/rich-text/editor.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/editor/rich-text/editor.tsx\n===================================================================\n--- apps/web/core/components/editor/rich-text/editor.tsx\tebab5e2 (parent)\n+++ apps/web/core/components/editor/rich-text/editor.tsx\tbd0361d (commit)\n@@ -18,8 +18,9 @@\n > & {\n   workspaceSlug: string;\n   workspaceId: string;\n   projectId?: string;\n+  issueSequenceId?: number;\n } & (\n     | {\n         editable: false;\n       }\n"
        },
        {
          "path": "apps/web/core/components/inbox/content/issue-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/inbox/content/issue-root.tsx\n===================================================================\n--- apps/web/core/components/inbox/content/issue-root.tsx\tebab5e2 (parent)\n+++ apps/web/core/components/inbox/content/issue-root.tsx\tbd0361d (commit)\n@@ -194,8 +194,9 @@\n         {loader === \"issue-loading\" ? (\n           <DescriptionInputLoader />\n         ) : (\n           <DescriptionInput\n+            issueSequenceId={issue.sequence_id}\n             containerClassName=\"-ml-3 border-none\"\n             disabled={!isEditable}\n             editorRef={editorRef}\n             entityId={issue.id}\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-detail/main-content.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-detail/main-content.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-detail/main-content.tsx\tebab5e2 (parent)\n+++ apps/web/core/components/issues/issue-detail/main-content.tsx\tbd0361d (commit)\n@@ -128,8 +128,9 @@\n           containerClassName=\"-ml-3\"\n         />\n \n         <DescriptionInput\n+          issueSequenceId={issue.sequence_id}\n           containerClassName=\"-ml-3 border-none\"\n           disabled={isArchived || !isEditable}\n           editorRef={editorRef}\n           entityId={issue.id}\n"
        },
        {
          "path": "apps/web/core/components/issues/peek-overview/issue-detail.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/peek-overview/issue-detail.tsx\n===================================================================\n--- apps/web/core/components/issues/peek-overview/issue-detail.tsx\tebab5e2 (parent)\n+++ apps/web/core/components/issues/peek-overview/issue-detail.tsx\tbd0361d (commit)\n@@ -127,8 +127,9 @@\n         containerClassName=\"-ml-3\"\n       />\n \n       <DescriptionInput\n+        issueSequenceId={issue.sequence_id}\n         containerClassName=\"-ml-3 border-none\"\n         disabled={disabled || isArchived}\n         editorRef={editorRef}\n         entityId={issue.id}\n"
        },
        {
          "path": "packages/editor/src/ce/constants/extensions.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/ce/constants/extensions.ts\n===================================================================\n--- packages/editor/src/ce/constants/extensions.ts\tebab5e2 (parent)\n+++ packages/editor/src/ce/constants/extensions.ts\tbd0361d (commit)\n@@ -1,1 +1,3 @@\n export enum ADDITIONAL_EXTENSIONS {}\n+\n+export const ADDITIONAL_BLOCK_NODE_TYPES = [];\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/rich-text/editor.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/rich-text/editor.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/rich-text/editor.tsx\tebab5e2 (parent)\n+++ packages/editor/src/core/components/editors/rich-text/editor.tsx\tbd0361d (commit)\n@@ -17,8 +17,9 @@\n     extensions: externalExtensions = [],\n     fileHandler,\n     flaggedExtensions,\n     extendedEditorProps,\n+    workItemIdentifier,\n   } = props;\n \n   const getExtensions = useCallback(() => {\n     const extensions = [\n@@ -42,9 +43,14 @@\n     <EditorWrapper {...props} extensions={getExtensions()}>\n       {(editor) => (\n         <>\n           {editor && bubbleMenuEnabled && <EditorBubbleMenu editor={editor} />}\n-          <BlockMenu editor={editor} flaggedExtensions={flaggedExtensions} disabledExtensions={disabledExtensions} />\n+          <BlockMenu\n+            editor={editor}\n+            flaggedExtensions={flaggedExtensions}\n+            disabledExtensions={disabledExtensions}\n+            workItemIdentifier={workItemIdentifier}\n+          />\n         </>\n       )}\n     </EditorWrapper>\n   );\n"
        },
        {
          "path": "packages/editor/src/core/components/menus/block-menu.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/menus/block-menu.tsx\n===================================================================\n--- packages/editor/src/core/components/menus/block-menu.tsx\tebab5e2 (parent)\n+++ packages/editor/src/core/components/menus/block-menu.tsx\tbd0361d (commit)\n@@ -23,8 +23,9 @@\n type Props = {\n   disabledExtensions?: IEditorProps[\"disabledExtensions\"];\n   editor: Editor;\n   flaggedExtensions?: IEditorProps[\"flaggedExtensions\"];\n+  workItemIdentifier?: IEditorProps[\"workItemIdentifier\"];\n };\n export type BlockMenuOption = {\n   icon: LucideIcon;\n   key: string;\n@@ -33,9 +34,9 @@\n   isDisabled?: boolean;\n };\n \n export const BlockMenu = (props: Props) => {\n-  const { editor } = props;\n+  const { editor, workItemIdentifier } = props;\n   const [isOpen, setIsOpen] = useState(false);\n   const [isAnimatedIn, setIsAnimatedIn] = useState(false);\n   const menuRef = useRef<HTMLDivElement | null>(null);\n   const virtualReferenceRef = useRef<{ getBoundingClientRect: () => DOMRect }>({\n"
        },
        {
          "path": "packages/editor/src/core/constants/extension.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/constants/extension.ts\n===================================================================\n--- packages/editor/src/core/constants/extension.ts\tebab5e2 (parent)\n+++ packages/editor/src/core/constants/extension.ts\tbd0361d (commit)\n@@ -41,5 +41,31 @@\n   UNDERLINE = \"underline\",\n   UTILITY = \"utility\",\n   WORK_ITEM_EMBED = \"issue-embed-component\",\n   EMOJI = \"emoji\",\n+  UNIQUE_ID = \"uniqueID\",\n }\n+\n+export const BLOCK_NODE_TYPES = [\n+  // Basic block nodes\n+  CORE_EXTENSIONS.PARAGRAPH,\n+  CORE_EXTENSIONS.HEADING,\n+  CORE_EXTENSIONS.BLOCKQUOTE,\n+  CORE_EXTENSIONS.CODE_BLOCK,\n+  CORE_EXTENSIONS.HORIZONTAL_RULE,\n+\n+  // List nodes\n+  CORE_EXTENSIONS.BULLET_LIST,\n+  CORE_EXTENSIONS.ORDERED_LIST,\n+  CORE_EXTENSIONS.LIST_ITEM,\n+  CORE_EXTENSIONS.TASK_LIST,\n+  CORE_EXTENSIONS.TASK_ITEM,\n+\n+  // Table nodes\n+  CORE_EXTENSIONS.TABLE,\n+\n+  // Media and embed nodes\n+  CORE_EXTENSIONS.IMAGE,\n+  CORE_EXTENSIONS.CUSTOM_IMAGE,\n+  CORE_EXTENSIONS.CALLOUT,\n+  CORE_EXTENSIONS.WORK_ITEM_EMBED,\n+];\n"
        },
        {
          "path": "packages/editor/src/core/extensions/extensions.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/extensions.ts\n===================================================================\n--- packages/editor/src/core/extensions/extensions.ts\tebab5e2 (parent)\n+++ packages/editor/src/core/extensions/extensions.ts\tbd0361d (commit)\n@@ -1,4 +1,5 @@\n+import type { HocuspocusProvider } from \"@hocuspocus/provider\";\n import type { Extensions } from \"@tiptap/core\";\n import { CharacterCount } from \"@tiptap/extension-character-count\";\n import TaskItem from \"@tiptap/extension-task-item\";\n import TaskList from \"@tiptap/extension-task-list\";\n@@ -34,8 +35,9 @@\n import { CustomImageExtension } from \"./custom-image/extension\";\n import { EmojiExtension } from \"./emoji/extension\";\n import { CustomPlaceholderExtension } from \"./placeholder\";\n import { CustomStarterKitExtension } from \"./starter-kit\";\n+import { UniqueID } from \"./unique-id/extension\";\n \n type TArguments = Pick<\n   IEditorProps,\n   | \"disabledExtensions\"\n@@ -48,8 +50,9 @@\n   | \"extendedEditorProps\"\n > & {\n   enableHistory: boolean;\n   editable: boolean;\n+  provider: HocuspocusProvider | undefined;\n };\n \n export const CoreEditorExtensions = (args: TArguments): Extensions => {\n   const {\n@@ -62,8 +65,9 @@\n     placeholder,\n     tabIndex,\n     editable,\n     extendedEditorProps,\n+    provider,\n   } = args;\n \n   const extensions = [\n     CustomStarterKitExtension({\n@@ -118,8 +122,11 @@\n       flaggedExtensions,\n       fileHandler,\n       extendedEditorProps,\n     }),\n+    UniqueID.configure({\n+      provider,\n+    }),\n   ];\n \n   if (!disabledExtensions.includes(\"image\")) {\n     extensions.push(\n"
        },
        {
          "path": "packages/editor/src/core/extensions/unique-id/extension.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/unique-id/extension.ts\n===================================================================\n--- packages/editor/src/core/extensions/unique-id/extension.ts\tebab5e2 (parent)\n+++ packages/editor/src/core/extensions/unique-id/extension.ts\tbd0361d (commit)\n@@ -0,0 +1,136 @@\n+import type { HocuspocusProvider } from \"@hocuspocus/provider\";\n+import { Extension } from \"@tiptap/core\";\n+import type { Node as ProseMirrorNode } from \"@tiptap/pm/model\";\n+import type { Transaction } from \"@tiptap/pm/state\";\n+import { v4 as uuidv4 } from \"uuid\";\n+// constants\n+import { CORE_EXTENSIONS, BLOCK_NODE_TYPES } from \"@/constants/extension\";\n+import { ADDITIONAL_BLOCK_NODE_TYPES } from \"@/plane-editor/constants/extensions\";\n+import { createUniqueIDPlugin } from \"./plugin\";\n+import { createIdsForView } from \"./utils\";\n+// plane imports\n+\n+const COMBINED_BLOCK_NODE_TYPES = [...BLOCK_NODE_TYPES, ...ADDITIONAL_BLOCK_NODE_TYPES];\n+export type UniqueIDGenerationContext = {\n+  node: ProseMirrorNode;\n+  pos: number;\n+};\n+export const UniqueIDAttribute = \"id\";\n+export const generateUniqueID = () => uuidv4();\n+\n+export interface UniqueIDOptions {\n+  /**\n+   * The name of the attribute to add the unique ID to.\n+   * @default \"id\"\n+   */\n+  attributeName: string;\n+  /**\n+   * The types of nodes to add unique IDs to.\n+   * @default []\n+   */\n+  types: string[];\n+  /**\n+   * The function that generates the unique ID. By default, a UUID v4 is\n+   * generated. However, you can provide your own function to generate the\n+   * unique ID based on the node type and the position.\n+   */\n+  generateUniqueID: (ctx: UniqueIDGenerationContext) => string;\n+  /**\n+   * Ignore some mutations, for example applied from other users through the collaboration plugin.\n+   *\n+   * @default null\n+   */\n+  filterTransaction: ((transaction: Transaction) => boolean) | null;\n+  /**\n+   * Whether to update the document by adding unique IDs to the nodes. Set this\n+   * property to `false` if the document is in `readonly` mode, is immutable, or\n+   * you don't want it to be modified.\n+   *\n+   * @default true\n+   */\n+  updateDocument: boolean;\n+  /**\n+   * The provider to use for the unique ID generation.\n+   * @default null\n+   */\n+  provider: HocuspocusProvider | undefined;\n+}\n+\n+export const UniqueID = Extension.create<UniqueIDOptions>({\n+  name: CORE_EXTENSIONS.UNIQUE_ID,\n+\n+  // we'll set a very high priority to make sure this runs first\n+  // and is compatible with `appendTransaction` hooks of other extensions\n+  priority: 10000,\n+\n+  addOptions() {\n+    return {\n+      attributeName: \"id\",\n+      types: COMBINED_BLOCK_NODE_TYPES,\n+      generateUniqueID: () => uuidv4(),\n+      filterTransaction: null,\n+      updateDocument: true,\n+      provider: undefined,\n+    };\n+  },\n+\n+  addGlobalAttributes() {\n+    return [\n+      {\n+        types: this.options.types,\n+        attributes: {\n+          [this.options.attributeName]: {\n+            default: null,\n+            parseHTML: (element) => element.getAttribute(`data-${this.options.attributeName}`),\n+            renderHTML: (attributes) => {\n+              if (!attributes[this.options.attributeName]) {\n+                return {};\n+              }\n+\n+              return {\n+                [`data-${this.options.attributeName}`]: attributes[this.options.attributeName],\n+              };\n+            },\n+          },\n+        },\n+      },\n+    ];\n+  },\n+\n+  // check initial content for missing ids\n+  onCreate() {\n+    if (!this.editor.isEditable) {\n+      this.options.updateDocument = false;\n+    }\n+\n+    if (!this.options.updateDocument) {\n+      return;\n+    }\n+\n+    const provider = this.options.provider;\n+\n+    /**\n+     * We need to handle collaboration a bit different here\n+     * because we can't automatically add IDs when the provider is not yet synced\n+     * otherwise we end up with empty paragraphs\n+     */\n+    if (provider) {\n+      // Check if provider is already synced\n+      if (provider.isSynced) {\n+        createIdsForView(this.editor.view, this.options);\n+      }\n+      // If not synced, the listener will be registered in the plugin\n+      // and handled there with proper cleanup\n+    } else {\n+      return createIdsForView(this.editor.view, this.options);\n+    }\n+  },\n+\n+  addProseMirrorPlugins() {\n+    if (!this.options.updateDocument) {\n+      return [];\n+    }\n+\n+    return [createUniqueIDPlugin(this.options)];\n+  },\n+});\n"
        },
        {
          "path": "packages/editor/src/core/extensions/unique-id/plugin.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/unique-id/plugin.ts\n===================================================================\n--- packages/editor/src/core/extensions/unique-id/plugin.ts\tebab5e2 (parent)\n+++ packages/editor/src/core/extensions/unique-id/plugin.ts\tbd0361d (commit)\n@@ -0,0 +1,211 @@\n+import { combineTransactionSteps, findChildrenInRange, findDuplicates, getChangedRanges } from \"@tiptap/core\";\n+import { Fragment, Slice } from \"@tiptap/pm/model\";\n+import type { Node as ProseMirrorNode } from \"@tiptap/pm/model\";\n+import { Plugin, PluginKey } from \"@tiptap/pm/state\";\n+import type { Transaction } from \"@tiptap/pm/state\";\n+// types\n+import type { UniqueIDOptions } from \"./extension\";\n+// utils\n+import { createIdsForView } from \"./utils\";\n+\n+export const createUniqueIDPlugin = (options: UniqueIDOptions) => {\n+  let dragSourceElement: Element | null = null;\n+  let transformPasted = false;\n+  let syncHandler: (() => void) | null = null;\n+\n+  return new Plugin({\n+    key: new PluginKey(\"uniqueID\"),\n+    appendTransaction: (transactions, oldState, newState) => {\n+      const hasDocChanges =\n+        transactions.some((transaction) => transaction.docChanged) && !oldState.doc.eq(newState.doc);\n+      const filterTransactions =\n+        options.filterTransaction && transactions.some((tr) => !options.filterTransaction?.(tr));\n+\n+      const isCollabTransaction = transactions.find((tr) => tr.getMeta(\"y-sync$\"));\n+\n+      if (isCollabTransaction) {\n+        return;\n+      }\n+\n+      if (!hasDocChanges || filterTransactions) {\n+        return;\n+      }\n+\n+      const { tr } = newState;\n+\n+      const { types, attributeName, generateUniqueID } = options;\n+      const transform = combineTransactionSteps(oldState.doc, transactions as Transaction[]);\n+\n+      const { mapping } = transform;\n+\n+      // get changed ranges based on the old state\n+      const changes = getChangedRanges(transform);\n+\n+      // Get all IDs from the entire document to check for duplicates globally\n+      const allNodesInDoc: Array<{ node: ProseMirrorNode; pos: number }> = [];\n+      newState.doc.descendants((node, pos) => {\n+        if (types.includes(node.type.name)) {\n+          allNodesInDoc.push({ node, pos });\n+        }\n+      });\n+      const allIds = allNodesInDoc.map(({ node }) => node.attrs[attributeName]).filter((id) => id !== null);\n+      const duplicatedIds = findDuplicates(allIds);\n+\n+      changes.forEach(({ newRange }) => {\n+        const newNodes = findChildrenInRange(newState.doc, newRange, (node) => types.includes(node.type.name));\n+\n+        newNodes.forEach(({ node, pos }) => {\n+          // instead of checking `node.attrs[attributeName]` directly\n+          // we look at the current state of the node within `tr.doc`.\n+          // this helps to prevent adding new ids to the same node\n+          // if the node changed multiple times within one transaction\n+          const id = tr.doc.nodeAt(pos)?.attrs[attributeName];\n+\n+          if (id === null) {\n+            tr.setNodeMarkup(pos, undefined, {\n+              ...node.attrs,\n+              [attributeName]: generateUniqueID({ node, pos }),\n+            });\n+\n+            return;\n+          }\n+\n+          // check if the node doesn't exist in the old state\n+          const { deleted } = mapping.invert().mapResult(pos);\n+\n+          // If this is a new node (didn't exist in old state) and its ID is duplicated in the entire document\n+          const newNode = deleted && duplicatedIds.includes(id);\n+\n+          if (newNode) {\n+            tr.setNodeMarkup(pos, undefined, {\n+              ...node.attrs,\n+              [attributeName]: generateUniqueID({ node, pos }),\n+            });\n+          }\n+        });\n+      });\n+\n+      if (!tr.steps.length) {\n+        return;\n+      }\n+\n+      // `tr.setNodeMarkup` resets the stored marks\n+      // so we'll restore them if they exist\n+      tr.setStoredMarks(newState.tr.storedMarks);\n+\n+      // Don't add ID generation to undo history\n+      tr.setMeta(\"addToHistory\", false);\n+\n+      return tr;\n+    },\n+\n+    // we register a global drag handler to track the current drag source element\n+    view(view) {\n+      const handleDragstart = (event: DragEvent) => {\n+        dragSourceElement = view.dom.parentElement?.contains(event.target as Element) ? view.dom.parentElement : null;\n+      };\n+\n+      window.addEventListener(\"dragstart\", handleDragstart);\n+\n+      // Handle provider sync listener for creating IDs when collaboration provider syncs\n+      const provider = options.provider;\n+      if (provider && !provider.isSynced) {\n+        syncHandler = () => {\n+          createIdsForView(view, options);\n+\n+          // Clean up the listener after it runs\n+          if (provider && syncHandler) {\n+            provider.off(\"synced\", syncHandler);\n+            syncHandler = null;\n+          }\n+        };\n+\n+        provider.on(\"synced\", syncHandler);\n+      }\n+\n+      return {\n+        destroy() {\n+          window.removeEventListener(\"dragstart\", handleDragstart);\n+\n+          // Clean up provider sync listener if it exists\n+          if (provider && syncHandler) {\n+            provider.off(\"synced\", syncHandler);\n+            syncHandler = null;\n+          }\n+        },\n+      };\n+    },\n+\n+    props: {\n+      // `handleDOMEvents` is called before `transformPasted`\n+      // so we can do some checks before\n+      handleDOMEvents: {\n+        // only create new ids for dropped content\n+        // or dropped content while holding `alt`\n+        // or content is dragged from another editor\n+        drop: (view, event) => {\n+          if (dragSourceElement !== view.dom.parentElement || event.dataTransfer?.effectAllowed === \"copy\") {\n+            dragSourceElement = null;\n+            transformPasted = true;\n+          }\n+\n+          return false;\n+        },\n+        // always create new ids on pasted content\n+        paste: () => {\n+          transformPasted = true;\n+\n+          return false;\n+        },\n+      },\n+\n+      // we'll remove ids for every pasted node\n+      // so we can create a new one within `appendTransaction`\n+      transformPasted: (slice) => {\n+        if (!transformPasted) {\n+          return slice;\n+        }\n+\n+        const { types, attributeName } = options;\n+        const removeId = (fragment: Fragment): Fragment => {\n+          const list: ProseMirrorNode[] = [];\n+\n+          fragment.forEach((node) => {\n+            // don't touch text nodes\n+            if (node.isText) {\n+              list.push(node);\n+\n+              return;\n+            }\n+\n+            // check for any other child nodes\n+            if (!types.includes(node.type.name)) {\n+              list.push(node.copy(removeId(node.content)));\n+\n+              return;\n+            }\n+\n+            // remove id\n+            const nodeWithoutId = node.type.create(\n+              {\n+                ...node.attrs,\n+                [attributeName]: null,\n+              },\n+              removeId(node.content),\n+              node.marks\n+            );\n+\n+            list.push(nodeWithoutId);\n+          });\n+\n+          return Fragment.from(list);\n+        };\n+\n+        // reset check\n+        transformPasted = false;\n+\n+        return new Slice(removeId(slice.content), slice.openStart, slice.openEnd);\n+      },\n+    },\n+  });\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/unique-id/utils.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/unique-id/utils.ts\n===================================================================\n--- packages/editor/src/core/extensions/unique-id/utils.ts\tebab5e2 (parent)\n+++ packages/editor/src/core/extensions/unique-id/utils.ts\tbd0361d (commit)\n@@ -0,0 +1,28 @@\n+import { findChildren } from \"@tiptap/core\";\n+import type { EditorView } from \"@tiptap/pm/view\";\n+// types\n+import type { UniqueIDOptions } from \"./extension\";\n+\n+/**\n+ * Utility function to create IDs for nodes that don't have them\n+ */\n+export const createIdsForView = (view: EditorView, options: UniqueIDOptions) => {\n+  const { state } = view;\n+  const { tr, doc } = state;\n+  const { types, attributeName, generateUniqueID } = options;\n+  const nodesWithoutId = findChildren(\n+    doc,\n+    (node) => types.includes(node.type.name) && node.attrs[attributeName] === null\n+  );\n+\n+  nodesWithoutId.forEach(({ node, pos }) => {\n+    tr.setNodeMarkup(pos, undefined, {\n+      ...node.attrs,\n+      [attributeName]: generateUniqueID({ node, pos }),\n+    });\n+  });\n+\n+  tr.setMeta(\"addToHistory\", false);\n+\n+  view.dispatch(tr);\n+};\n"
        },
        {
          "path": "packages/editor/src/core/hooks/use-editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/hooks/use-editor.ts\n===================================================================\n--- packages/editor/src/core/hooks/use-editor.ts\tebab5e2 (parent)\n+++ packages/editor/src/core/hooks/use-editor.ts\tbd0361d (commit)\n@@ -38,10 +38,10 @@\n     onChange,\n     onEditorFocus,\n     onTransaction,\n     placeholder,\n-    provider,\n     tabIndex,\n+    provider,\n     value,\n   } = props;\n \n   const editor = useTiptapEditor(\n@@ -68,8 +68,9 @@\n           isTouchDevice,\n           mentionHandler,\n           placeholder,\n           tabIndex,\n+          provider,\n         }),\n         ...extensions,\n       ],\n       content: initialValue,\n"
        },
        {
          "path": "packages/editor/src/core/types/editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/editor.ts\n===================================================================\n--- packages/editor/src/core/types/editor.ts\tebab5e2 (parent)\n+++ packages/editor/src/core/types/editor.ts\tbd0361d (commit)\n@@ -164,8 +164,9 @@\n   placeholder?: string | ((isFocused: boolean, value: string) => string);\n   tabIndex?: number;\n   value?: string | null;\n   extendedEditorProps: IEditorPropsExtended;\n+  workItemIdentifier?: string | null;\n };\n \n export type ILiteTextEditorProps = IEditorProps;\n \n"
        }
      ]
    },
    {
      "id": "enhance-rich-filters",
      "sha": "cfb4a8212cbf82b9cdd6d68861256974f75f175b",
      "parentSha": "9f41e92d21359f75b461c533b0d860b1a1d9f705",
      "spec": "- Backend API\n  - Update apps/api/plane/utils/filters/filterset.py IssueFilterSet to include updated_at in the filterset fields with operators [\"exact\", \"range\"], mirroring created_at.\n\n- Types and constants\n  - Extend packages/types/src/view-props.ts:\n    - Add \"created_at\" and \"updated_at\" to WORK_ITEM_FILTER_PROPERTY_KEYS.\n    - Broaden TWorkItemFilterConditionData values to accept string | boolean | number.\n  - Extend packages/types/src/rich-filters/config/filter-config.ts to add optional rightContent and tooltipContent properties to TFilterConfig to support richer dropdown items and tooltips for applied filters.\n  - Add multi-value support:\n    - In packages/types/src/rich-filters/operators/core.ts define CORE_MULTI_VALUE_OPERATORS = [IN, RANGE].\n    - In packages/types/src/rich-filters/operators/extended.ts define EXTENDED_MULTI_VALUE_OPERATORS = [].\n    - In packages/types/src/rich-filters/operators/index.ts export MULTI_VALUE_OPERATORS composed from core and extended lists.\n\n- Shared-state rich filters\n  - Update packages/shared-state/src/store/rich-filters/config-manager.ts:\n    - Add areConfigsReady: boolean observable and setAreConfigsReady(value: boolean) action.\n    - Keep existing behavior for registration and allAvailableConfigs, but expose readiness flag for UI.\n  - Update packages/shared-state/src/store/rich-filters/filter-helpers.ts:\n    - Add handleConditionPropertyUpdate(expression, conditionId, property, operator, isNegation) that updates property, operator, resets value to undefined, and returns updated expression.\n    - Refactor restructureExpressionForOperatorChange(expression, conditionId, newOperator, isNegation, shouldResetValue) to rely on a shared _updateCondition that updates the node and preserves negation handling; accept non-null expression and return updated expression.\n    - Implement private _updateCondition(expression, conditionId, payload, isNegation) to update the node and return expression.\n  - Update packages/shared-state/src/store/rich-filters/filter.ts:\n    - Add updateConditionProperty(conditionId, property, operator, isNegation) to update a condition's property and operator using helper.handleConditionPropertyUpdate, and notify on success.\n    - In updateConditionValue, early-return if new value is deeply equal to existing; if invalid value, remove condition; otherwise update and notify.\n\n- Work item filters adapter\n  - Update packages/shared-state/src/store/work-item-filters/adapter.ts:\n    - Allow unknown/custom properties by accepting keys that start with \"customproperty_\" in addition to the known WORK_ITEM_FILTER_PROPERTY_KEYS.\n    - Parse values based on operator: use MULTI_VALUE_OPERATORS to parse comma-separated strings into arrays only for multi-value operators; otherwise keep scalar.\n    - Update _parseFilterValue to accept and passthrough non-string types and handle empty values.\n\n- Utils: loaders and filter factories\n  - Add packages/utils/src/loader.ts with isLoaderReady(loader: TLoader | undefined) => boolean that returns false only for the init-loader state; export from packages/utils/src/index.ts.\n  - Rich filter factories:\n    - Add packages/utils/src/rich-filters/factories/configs/properties/ with:\n      - shared.ts: shared helpers for date operators (getSupportedDateOperators), member/project multi-select configs (getMemberMultiSelectConfig, getProjectMultiSelectConfig), and type definitions (TCreateUserFilterParams, TCreateProjectFilterParams).\n      - date.ts: getDatePropertyFilterConfig(key) that produces a date property filter allowing multiple filters and using getSupportedDateOperators.\n      - member-picker.ts: getMemberPickerPropertyFilterConfig(key) that produces a member picker filter using getMemberMultiSelectConfig with EXACT singleValueOperator.\n    - Update packages/utils/src/rich-filters/factories/configs/shared.ts:\n      - Include rightContent and tooltipContent passthrough in TCreateFilterConfigParams.\n      - Introduce TFilterIconType and update IFilterIconConfig generic accordingly.\n    - Ensure index exports include new properties module.\n\n- Work item filter configs\n  - Update packages/utils/src/work-item-filters/configs/filters/*.ts:\n    - For existing configs (cycle, label, module, priority, project, state, user, date), spread ...params into createFilterConfig arguments rather than passing specific isEnabled, and use appropriate helper functions that now accept singleValueOperator where necessary.\n    - Add getCreatedAtFilterConfig and getUpdatedAtFilterConfig in date.ts returning date-based configs with allowMultipleFilters = true and supported operators from getSupportedDateOperators.\n\n- UI dropdown updates\n  - Update packages/ui/src/dropdowns/custom-search-select.tsx:\n    - Adjust padding around the options container and search input to include horizontal padding, and add vertical-scrollbar classes.\n    - Replace maxHeight=\"full\" usage with new sizes: add support for maxHeight \"xl\" and \"2xl\" and map them to max-h-80 and max-h-96 respectively; remove any dependency on \"full\".\n  - Update packages/ui/src/dropdowns/helper.tsx to extend IDropdownProps.maxHeight union type to include \"xl\" and \"2xl\"; downstream components must use these instead of \"full\".\n\n- Web core rich filter components\n  - Add apps/web/core/components/rich-filters/add-filters/button.tsx that wraps AddFilterDropdown with a styled button, defaulting to a link-neutral variant and ListFilter icon, and calls filter.addCondition with a default operator (from config.firstOperator) when a filter is selected.\n  - Refactor and move the existing add filter component to apps/web/core/components/rich-filters/add-filters/dropdown.tsx:\n    - Accept customButton and handleFilterSelect(property, operator, isNegation) props.\n    - Render config options with left icon, label, and rightContent.\n    - Increase options maxHeight to \"2xl\" and remove internal button styling (delegated to parent).\n  - Split FilterItem into modular components under apps/web/core/components/rich-filters/filter-item/:\n    - container.tsx: wraps each filter pill with border, background, optional error variant, tooltip, and entry transition when no value.\n    - property.tsx: renders property label and icon; when enabled, wraps with AddFilterDropdown to allow changing the condition property/operator in-place via updateConditionProperty.\n    - close-button.tsx: renders an X icon button to remove the condition.\n    - invalid.tsx: shows an error-styled pill with an alert icon and tooltip when the condition property is missing or invalid.\n    - loader.tsx: shows a skeleton loader for a pill.\n    - root.tsx: the main FilterItem component updated to:\n      - Show FilterItemLoader when filter.configManager.areConfigsReady is false.\n      - Show InvalidFilterItem when filterConfig lookup fails.\n      - Use FilterItemContainer, FilterItemProperty, and FilterItemCloseButton in place of inline markup.\n      - Use CustomSearchSelect with maxHeight=\"2xl\" for operator selection.\n  - Centralize shared constants/types under apps/web/core/components/rich-filters/shared.ts:\n    - Export COMMON_FILTER_ITEM_BORDER_CLASSNAME, EMPTY_FILTER_PLACEHOLDER_TEXT=\"--\", and TFilterValueInputProps type for filter value inputs.\n  - Update apps/web/core/components/rich-filters/filter-value-input/*:\n    - root.tsx: remove inline fallback UI and delegate to CE AdditionalFilterValueInput via import; use centralized TFilterValueInputProps type.\n    - date/single.tsx and date/range.tsx: use EMPTY_FILTER_PLACEHOLDER_TEXT for placeholders.\n    - select/selected-options-display.tsx: use EMPTY_FILTER_PLACEHOLDER_TEXT for emptyValue.\n  - Update apps/web/core/components/rich-filters/filters-row.tsx:\n    - Use the new AddFilterButton and FilterItem paths.\n    - Introduce a RowTransition wrapper component for enter/leave transitions.\n    - When filter.configManager.areConfigsReady is false and there are no existing conditions, render a full-width Loader skeleton matching header/modal variant.\n    - Disable operations while configs are not ready.\n  - Update apps/web/core/components/rich-filters/filters-toggle.tsx import to the new add-filters/button path.\n\n- Web CE additions and work item config\n  - Add apps/web/ce/components/rich-filters/filter-value-input/root.tsx exporting AdditionalFilterValueInput: a simple observer fallback element that displays \"Filter type not supported\" for unsupported fields.\n  - Update apps/web/ce/helpers/work-item-filters/project-level.ts to include entityType: EIssuesStoreType in TGetAdditionalPropsForProjectLevelFiltersHOCParams.\n  - Enhance apps/web/ce/hooks/work-item-filters/use-work-item-filters-config.tsx:\n    - Import Calendar icon and new getCreatedAtFilterConfig, getUpdatedAtFilterConfig, and isLoaderReady from utils.\n    - Compute areAllConfigsInitialized via isLoaderReady(projectLoader) and expose it on the returned object.\n    - Add members to the returned object for filters needing users.\n    - Add createdAtFilterConfig and updatedAtFilterConfig and include them in configs array and configMap under keys created_at and updated_at.\n  - In apps/web/core/components/work-item-filters/filters-hoc/base.tsx:\n    - Before registering configs, call workItemLayoutFilter.configManager.setAreConfigsReady(workItemFiltersConfig.areAllConfigsInitialized).\n    - Then register all configs.\n  - In apps/web/core/components/work-item-filters/filters-hoc/project-level.tsx pass entityType prop into getAdditionalProjectLevelFiltersHOCProps params.\n\n- Web core operator/property behaviors\n  - When selecting a filter from AddFilterDropdown, use the config.firstOperator and pass isNegation derived from getOperatorForPayload; create a new AND condition with undefined value and focus the value input.\n  - In FilterItemProperty, changing the property reuses AddFilterDropdown and calls filter.updateConditionProperty with the selected property's default operator and negation info, resetting value.\n\n- Visual/UX\n  - Replace any CustomSearchSelect maxHeight=\"full\" usages with \"2xl\" and adjust the UI component to support new sizes; ensure vertical scrollbar styles apply to long lists.\n  - Provide tooltipContent via filter config when appropriate, and render rightContent in the add-filter dropdown option rows.\n  - Use a consistent placeholder \"--\" (EMPTY_FILTER_PLACEHOLDER_TEXT) for empty filter values.\n",
      "prompt": "Enhance the rich filters system to support created_at and updated_at date filters and improve the filtering UX across the app.\n\nAt a high level, you should:\n- Add created_at and updated_at as first-class work item filter properties, including API support and utilities.\n- Introduce a loading state for filter configuration readiness so the UI can defer interactions until configs are available.\n- Improve the Add Filter control to show icons, optional right-side content, and better scrolling; split responsibilities so the dropdown can be reused as a property switcher.\n- Break the filter item pill into smaller components for property display, operator selection, value input, invalid/error states, close button, and container with animation/tooltip support.\n- Add a fallback for unsupported filter field types in CE, and use a shared placeholder for empty values.\n- Update shared state helpers to allow changing a conditions property and operator, avoid redundant updates, and handle multi-value operator parsing.\n\nFollow the existing patterns in the codebase for filter configs, operators, and UI dropdowns. Ensure new fields are reflected in the filter config hook, HOCs, and adapters. Keep the UX consistent with existing filter styles and transitions.",
      "supplementalFiles": [
        "packages/shared-state/src/store/rich-filters/config.ts",
        "packages/utils/src/rich-filters/factories/configs/core.ts",
        "packages/utils/src/rich-filters/factories/nodes/core.ts",
        "packages/types/src/rich-filters/config/index.ts",
        "packages/types/src/rich-filters/operators/index.ts",
        "packages/utils/src/work-item-filters/configs/filters/shared.ts",
        "apps/web/core/components/rich-filters/filter-value-input/select/single.tsx"
      ],
      "fileDiffs": [
        {
          "path": "apps/api/plane/utils/filters/filterset.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/utils/filters/filterset.py\n===================================================================\n--- apps/api/plane/utils/filters/filterset.py\t9f41e92 (parent)\n+++ apps/api/plane/utils/filters/filterset.py\tcfb4a82 (commit)\n@@ -158,8 +158,9 @@\n         fields = {\n             \"start_date\": [\"exact\", \"range\"],\n             \"target_date\": [\"exact\", \"range\"],\n             \"created_at\": [\"exact\", \"range\"],\n+            \"updated_at\": [\"exact\", \"range\"],\n             \"is_draft\": [\"exact\"],\n             \"priority\": [\"exact\", \"in\"],\n         }\n \n"
        },
        {
          "path": "apps/web/ce/components/rich-filters/filter-value-input/root.tsx",
          "status": "added",
          "diff": "Index: apps/web/ce/components/rich-filters/filter-value-input/root.tsx\n===================================================================\n--- apps/web/ce/components/rich-filters/filter-value-input/root.tsx\t9f41e92 (parent)\n+++ apps/web/ce/components/rich-filters/filter-value-input/root.tsx\tcfb4a82 (commit)\n@@ -0,0 +1,15 @@\n+import React from \"react\";\n+import { observer } from \"mobx-react\";\n+// plane imports\n+import { TFilterValue, TFilterProperty } from \"@plane/types\";\n+// local imports\n+import { TFilterValueInputProps } from \"@/components/rich-filters/shared\";\n+\n+export const AdditionalFilterValueInput = observer(\n+  <P extends TFilterProperty, V extends TFilterValue>(_props: TFilterValueInputProps<P, V>) => (\n+    // Fallback\n+    <div className=\"h-full flex items-center px-4 text-xs text-custom-text-400 transition-opacity duration-200 cursor-not-allowed\">\n+      Filter type not supported\n+    </div>\n+  )\n+);\n"
        },
        {
          "path": "apps/web/ce/helpers/work-item-filters/project-level.ts",
          "status": "modified",
          "diff": "Index: apps/web/ce/helpers/work-item-filters/project-level.ts\n===================================================================\n--- apps/web/ce/helpers/work-item-filters/project-level.ts\t9f41e92 (parent)\n+++ apps/web/ce/helpers/work-item-filters/project-level.ts\tcfb4a82 (commit)\n@@ -1,7 +1,11 @@\n+// plane imports\n+import { EIssuesStoreType } from \"@plane/types\";\n+// plane web imports\n import { TWorkItemFiltersEntityProps } from \"@/plane-web/hooks/work-item-filters/use-work-item-filters-config\";\n \n export type TGetAdditionalPropsForProjectLevelFiltersHOCParams = {\n+  entityType: EIssuesStoreType;\n   workspaceSlug: string;\n   projectId: string;\n };\n \n"
        },
        {
          "path": "apps/web/ce/hooks/work-item-filters/use-work-item-filters-config.tsx",
          "status": "modified",
          "diff": "Index: apps/web/ce/hooks/work-item-filters/use-work-item-filters-config.tsx\n===================================================================\n--- apps/web/ce/hooks/work-item-filters/use-work-item-filters-config.tsx\t9f41e92 (parent)\n+++ apps/web/ce/hooks/work-item-filters/use-work-item-filters-config.tsx\tcfb4a82 (commit)\n@@ -1,8 +1,9 @@\n import { useCallback, useMemo } from \"react\";\n import {\n   AtSign,\n   Briefcase,\n+  Calendar,\n   CalendarCheck2,\n   CalendarClock,\n   CircleUserRound,\n   SignalHigh,\n@@ -31,8 +32,9 @@\n } from \"@plane/types\";\n import { Avatar, Logo } from \"@plane/ui\";\n import {\n   getAssigneeFilterConfig,\n+  getCreatedAtFilterConfig,\n   getCreatedByFilterConfig,\n   getCycleFilterConfig,\n   getFileURL,\n   getLabelFilterConfig,\n@@ -44,8 +46,10 @@\n   getStateFilterConfig,\n   getStateGroupFilterConfig,\n   getSubscriberFilterConfig,\n   getTargetDateFilterConfig,\n+  getUpdatedAtFilterConfig,\n+  isLoaderReady,\n } from \"@plane/utils\";\n // store hooks\n import { useCycle } from \"@/hooks/store/use-cycle\";\n import { useLabel } from \"@/hooks/store/use-label\";\n@@ -71,20 +75,22 @@\n   allowedFilters: TWorkItemFilterProperty[];\n } & TWorkItemFiltersEntityProps;\n \n export type TWorkItemFiltersConfig = {\n+  areAllConfigsInitialized: boolean;\n   configs: TFilterConfig<TWorkItemFilterProperty, TFilterValue>[];\n   configMap: {\n     [key in TWorkItemFilterProperty]?: TFilterConfig<TWorkItemFilterProperty, TFilterValue>;\n   };\n   isFilterEnabled: (key: TWorkItemFilterProperty) => boolean;\n+  members: IUserLite[];\n };\n \n export const useWorkItemFiltersConfig = (props: TUseWorkItemFiltersConfigProps): TWorkItemFiltersConfig => {\n   const { allowedFilters, cycleIds, labelIds, memberIds, moduleIds, projectId, projectIds, stateIds, workspaceSlug } =\n     props;\n   // store hooks\n-  const { getProjectById } = useProject();\n+  const { loader: projectLoader, getProjectById } = useProject();\n   const { getCycleById } = useCycle();\n   const { getLabelById } = useLabel();\n   const { getModuleById } = useModule();\n   const { getStateById } = useProjectState();\n@@ -127,8 +133,9 @@\n         ? (projectIds.map((projectId) => getProjectById(projectId)).filter((project) => project) as IProject[])\n         : [],\n     [projectIds, getProjectById]\n   );\n+  const areAllConfigsInitialized = useMemo(() => isLoaderReady(projectLoader), [projectLoader]);\n \n   /**\n    * Checks if a filter is enabled based on the filters to show.\n    * @param key - The filter key.\n@@ -316,8 +323,30 @@\n       }),\n     [operatorConfigs]\n   );\n \n+  // created at filter config\n+  const createdAtFilterConfig = useMemo(\n+    () =>\n+      getCreatedAtFilterConfig<TWorkItemFilterProperty>(\"created_at\")({\n+        isEnabled: true,\n+        filterIcon: Calendar,\n+        ...operatorConfigs,\n+      }),\n+    [operatorConfigs]\n+  );\n+\n+  // updated at filter config\n+  const updatedAtFilterConfig = useMemo(\n+    () =>\n+      getUpdatedAtFilterConfig<TWorkItemFilterProperty>(\"updated_at\")({\n+        isEnabled: true,\n+        filterIcon: Calendar,\n+        ...operatorConfigs,\n+      }),\n+    [operatorConfigs]\n+  );\n+\n   // project filter config\n   const projectFilterConfig = useMemo(\n     () =>\n       getProjectFilterConfig<TWorkItemFilterProperty>(\"project_id\")({\n@@ -330,8 +359,9 @@\n     [isFilterEnabled, projects, operatorConfigs]\n   );\n \n   return {\n+    areAllConfigsInitialized,\n     configs: [\n       stateFilterConfig,\n       stateGroupFilterConfig,\n       assigneeFilterConfig,\n@@ -342,8 +372,10 @@\n       cycleFilterConfig,\n       moduleFilterConfig,\n       startDateFilterConfig,\n       targetDateFilterConfig,\n+      createdAtFilterConfig,\n+      updatedAtFilterConfig,\n       createdByFilterConfig,\n       subscriberFilterConfig,\n     ],\n     configMap: {\n@@ -359,8 +391,11 @@\n       subscriber_id: subscriberFilterConfig,\n       priority: priorityFilterConfig,\n       start_date: startDateFilterConfig,\n       target_date: targetDateFilterConfig,\n+      created_at: createdAtFilterConfig,\n+      updated_at: updatedAtFilterConfig,\n     },\n     isFilterEnabled,\n+    members: members ?? [],\n   };\n };\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/add-filters/button.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/rich-filters/add-filters/button.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/add-filters/button.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/add-filters/button.tsx\tcfb4a82 (commit)\n@@ -0,0 +1,71 @@\n+import React from \"react\";\n+import { observer } from \"mobx-react\";\n+import { ListFilter } from \"lucide-react\";\n+// plane imports\n+import { IFilterInstance } from \"@plane/shared-state\";\n+import { LOGICAL_OPERATOR, TExternalFilter, TFilterProperty, TSupportedOperators } from \"@plane/types\";\n+import { cn, getButtonStyling, TButtonVariant } from \"@plane/ui\";\n+// local imports\n+import { AddFilterDropdown } from \"./dropdown\";\n+\n+export type TAddFilterButtonProps<P extends TFilterProperty, E extends TExternalFilter> = {\n+  buttonConfig?: {\n+    label: string | null;\n+    variant?: TButtonVariant;\n+    className?: string;\n+    defaultOpen?: boolean;\n+    iconConfig?: {\n+      shouldShowIcon: boolean;\n+      iconComponent?: React.ElementType;\n+    };\n+    isDisabled?: boolean;\n+  };\n+  filter: IFilterInstance<P, E>;\n+  onFilterSelect?: (id: string) => void;\n+};\n+\n+export const AddFilterButton = observer(\n+  <P extends TFilterProperty, E extends TExternalFilter>(props: TAddFilterButtonProps<P, E>) => {\n+    const { filter, buttonConfig, onFilterSelect } = props;\n+    const {\n+      variant = \"link-neutral\",\n+      className,\n+      label,\n+      iconConfig = { shouldShowIcon: true },\n+      isDisabled = false,\n+    } = buttonConfig || {};\n+    // derived values\n+    const FilterIcon = iconConfig.iconComponent || ListFilter;\n+\n+    const handleFilterSelect = (property: P, operator: TSupportedOperators, isNegation: boolean) => {\n+      filter.addCondition(\n+        LOGICAL_OPERATOR.AND,\n+        {\n+          property,\n+          operator,\n+          value: undefined,\n+        },\n+        isNegation\n+      );\n+      onFilterSelect?.(property);\n+    };\n+\n+    if (isDisabled) return null;\n+    return (\n+      <AddFilterDropdown\n+        {...props}\n+        buttonConfig={{\n+          ...buttonConfig,\n+          className: cn(getButtonStyling(variant, \"sm\"), \"py-[5px]\", className),\n+        }}\n+        handleFilterSelect={handleFilterSelect}\n+        customButton={\n+          <div className=\"flex items-center gap-1\">\n+            {iconConfig.shouldShowIcon && <FilterIcon className=\"size-4 text-custom-text-200\" />}\n+            {label}\n+          </div>\n+        }\n+      />\n+    );\n+  }\n+);\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/add-filters/dropdown.tsx",
          "status": "renamed",
          "oldPath": "apps/web/core/components/rich-filters/add-filters-button.tsx",
          "diff": "===================================================================\n--- apps/web/core/components/rich-filters/add-filters-button.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/add-filters/dropdown.tsx\tcfb4a82 (commit)\n@@ -1,54 +1,41 @@\n import React from \"react\";\n import { observer } from \"mobx-react\";\n-import { ListFilter } from \"lucide-react\";\n // plane imports\n-import { getButtonStyling } from \"@plane/propel/button\";\n import { setToast, TOAST_TYPE } from \"@plane/propel/toast\";\n import { IFilterInstance } from \"@plane/shared-state\";\n-import { LOGICAL_OPERATOR, TExternalFilter, TFilterProperty } from \"@plane/types\";\n-import { CustomSearchSelect, TButtonVariant } from \"@plane/ui\";\n-import { cn, getOperatorForPayload } from \"@plane/utils\";\n+import { TExternalFilter, TFilterProperty, TSupportedOperators } from \"@plane/types\";\n+import { CustomSearchSelect } from \"@plane/ui\";\n+import { getOperatorForPayload } from \"@plane/utils\";\n \n-export type TAddFilterButtonProps<P extends TFilterProperty, E extends TExternalFilter> = {\n+export type TAddFilterDropdownProps<P extends TFilterProperty, E extends TExternalFilter> = {\n+  customButton: React.ReactNode;\n   buttonConfig?: {\n-    label: string | null;\n-    variant?: TButtonVariant;\n     className?: string;\n     defaultOpen?: boolean;\n-    iconConfig?: {\n-      shouldShowIcon: boolean;\n-      iconComponent?: React.ElementType;\n-    };\n     isDisabled?: boolean;\n   };\n   filter: IFilterInstance<P, E>;\n-  onFilterSelect?: (id: string) => void;\n+  handleFilterSelect: (property: P, operator: TSupportedOperators, isNegation: boolean) => void;\n };\n \n-export const AddFilterButton = observer(\n-  <P extends TFilterProperty, E extends TExternalFilter>(props: TAddFilterButtonProps<P, E>) => {\n-    const { filter, buttonConfig, onFilterSelect } = props;\n-    const {\n-      label,\n-      variant = \"link-neutral\",\n-      className,\n-      defaultOpen = false,\n-      iconConfig = { shouldShowIcon: true },\n-      isDisabled = false,\n-    } = buttonConfig || {};\n-    // derived values\n-    const FilterIcon = iconConfig.iconComponent || ListFilter;\n+export const AddFilterDropdown = observer(\n+  <P extends TFilterProperty, E extends TExternalFilter>(props: TAddFilterDropdownProps<P, E>) => {\n+    const { filter, customButton, buttonConfig } = props;\n+    const { className, defaultOpen = false, isDisabled = false } = buttonConfig || {};\n \n     // Transform available filter configs to CustomSearchSelect options format\n     const filterOptions = filter.configManager.allAvailableConfigs.map((config) => ({\n       value: config.id,\n       content: (\n-        <div className=\"flex items-center gap-2 text-custom-text-200 transition-all duration-200 ease-in-out\">\n-          {config.icon && (\n-            <config.icon className=\"size-4 text-custom-text-300 transition-transform duration-200 ease-in-out\" />\n-          )}\n-          <span>{config.label}</span>\n+        <div className=\"flex items-center justify-between gap-2 text-custom-text-200 transition-all duration-200 ease-in-out\">\n+          <div className=\"flex items-center gap-2\">\n+            {config.icon && (\n+              <config.icon className=\"size-4 text-custom-text-300 transition-transform duration-200 ease-in-out\" />\n+            )}\n+            <span>{config.label}</span>\n+          </div>\n+          {config.rightContent}\n         </div>\n       ),\n       query: config.label.toLowerCase(),\n     }));\n@@ -69,18 +56,9 @@\n     const handleFilterSelect = (property: P) => {\n       const config = filter.configManager.getConfigByProperty(property);\n       if (config?.firstOperator) {\n         const { operator, isNegation } = getOperatorForPayload(config.firstOperator);\n-        filter.addCondition(\n-          LOGICAL_OPERATOR.AND,\n-          {\n-            property: config.id,\n-            operator,\n-            value: undefined,\n-          },\n-          isNegation\n-        );\n-        onFilterSelect?.(property);\n+        props.handleFilterSelect(property, operator, isNegation);\n       } else {\n         setToast({\n           title: \"Filter configuration error\",\n           message: \"This filter is not properly configured and cannot be applied\",\n@@ -88,27 +66,21 @@\n         });\n       }\n     };\n \n-    if (isDisabled) return null;\n     return (\n       <div className=\"relative transition-all duration-200 ease-in-out\">\n         <CustomSearchSelect\n           defaultOpen={defaultOpen}\n           value={\"\"}\n           onChange={handleFilterSelect}\n           options={displayOptions}\n           optionsClassName=\"w-56\"\n-          maxHeight=\"full\"\n+          maxHeight=\"2xl\"\n           placement=\"bottom-start\"\n           disabled={isDisabled}\n-          customButtonClassName={cn(getButtonStyling(variant, \"sm\"), \"py-[5px]\", className)}\n-          customButton={\n-            <div className=\"flex items-center gap-1\">\n-              {iconConfig.shouldShowIcon && <FilterIcon className=\"size-4 text-custom-text-200\" />}\n-              {label}\n-            </div>\n-          }\n+          customButtonClassName={className}\n+          customButton={customButton}\n         />\n       </div>\n     );\n   }\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filter-item/close-button.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/rich-filters/filter-item/close-button.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filter-item/close-button.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/filter-item/close-button.tsx\tcfb4a82 (commit)\n@@ -0,0 +1,32 @@\n+import React from \"react\";\n+import { observer } from \"mobx-react\";\n+import { X } from \"lucide-react\";\n+// plane imports\n+import { IFilterInstance } from \"@plane/shared-state\";\n+import { TExternalFilter, TFilterProperty } from \"@plane/types\";\n+\n+interface FilterItemCloseButtonProps<P extends TFilterProperty, E extends TExternalFilter> {\n+  conditionId: string;\n+  filter: IFilterInstance<P, E>;\n+}\n+\n+export const FilterItemCloseButton = observer(\n+  <P extends TFilterProperty, E extends TExternalFilter>(props: FilterItemCloseButtonProps<P, E>) => {\n+    const { conditionId, filter } = props;\n+\n+    const handleRemoveFilter = () => {\n+      filter.removeCondition(conditionId);\n+    };\n+\n+    return (\n+      <button\n+        onClick={handleRemoveFilter}\n+        className=\"px-1.5 text-custom-text-400 hover:text-custom-text-300 focus:outline-none hover:bg-custom-background-90\"\n+        type=\"button\"\n+        aria-label=\"Remove filter\"\n+      >\n+        <X className=\"size-3.5\" />\n+      </button>\n+    );\n+  }\n+);\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filter-item/container.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/rich-filters/filter-item/container.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filter-item/container.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/filter-item/container.tsx\tcfb4a82 (commit)\n@@ -0,0 +1,64 @@\n+import { useEffect, useRef } from \"react\";\n+// plane imports\n+import { Tooltip } from \"@plane/propel/tooltip\";\n+import { cn } from \"@plane/propel/utils\";\n+import { SingleOrArray, TFilterValue } from \"@plane/types\";\n+import { hasValidValue } from \"@plane/utils\";\n+\n+interface FilterItemContainerProps {\n+  children: React.ReactNode;\n+  conditionValue: SingleOrArray<TFilterValue>;\n+  showTransition: boolean;\n+  variant?: \"default\" | \"error\";\n+  tooltipContent?: React.ReactNode;\n+}\n+\n+export const FilterItemContainer: React.FC<FilterItemContainerProps> = (props) => {\n+  const { children, conditionValue, showTransition, variant = \"default\", tooltipContent } = props;\n+  // refs\n+  const itemRef = useRef<HTMLDivElement>(null);\n+\n+  // effects\n+  useEffect(() => {\n+    if (!showTransition) return;\n+\n+    const element = itemRef.current;\n+    if (!element) return;\n+\n+    if (hasValidValue(conditionValue)) return;\n+\n+    const applyInitialStyles = () => {\n+      element.style.opacity = \"0\";\n+      element.style.transform = \"scale(0.95)\";\n+    };\n+\n+    const applyFinalStyles = () => {\n+      // Force a reflow to ensure the initial state is applied\n+      void element.offsetWidth;\n+      element.style.opacity = \"1\";\n+      element.style.transform = \"scale(1)\";\n+    };\n+\n+    applyInitialStyles();\n+    applyFinalStyles();\n+\n+    return () => {\n+      applyInitialStyles();\n+    };\n+    // eslint-disable-next-line react-hooks/exhaustive-deps\n+  }, []);\n+\n+  return (\n+    <Tooltip tooltipContent={tooltipContent} position=\"bottom\" disabled={!tooltipContent}>\n+      <div\n+        ref={itemRef}\n+        className={cn(\"flex h-7 items-stretch rounded overflow-hidden border transition-all duration-200\", {\n+          \"border-custom-border-200 bg-custom-background-100\": variant === \"default\",\n+          \"border-red-500 bg-custom-background-90\": variant === \"error\",\n+        })}\n+      >\n+        {children}\n+      </div>\n+    </Tooltip>\n+  );\n+};\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filter-item/invalid.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/rich-filters/filter-item/invalid.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filter-item/invalid.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/filter-item/invalid.tsx\tcfb4a82 (commit)\n@@ -0,0 +1,36 @@\n+import React from \"react\";\n+import { observer } from \"mobx-react\";\n+import { CircleAlert } from \"lucide-react\";\n+// plane imports\n+import { TExternalFilter, TFilterProperty } from \"@plane/types\";\n+// local imports\n+import { FilterItemCloseButton } from \"./close-button\";\n+import { FilterItemContainer } from \"./container\";\n+import { FilterItemProperty } from \"./property\";\n+import { IFilterItemProps } from \"./root\";\n+\n+export const InvalidFilterItem = observer(\n+  <P extends TFilterProperty, E extends TExternalFilter>(props: IFilterItemProps<P, E>) => {\n+    const { condition, filter, isDisabled = false, showTransition = true } = props;\n+\n+    return (\n+      <FilterItemContainer\n+        conditionValue={condition.value}\n+        showTransition={showTransition}\n+        variant=\"error\"\n+        tooltipContent=\"This filter condition is no longer valid. The property may have been deleted or your access to it may have changed.\"\n+      >\n+        {/* Property section */}\n+        <FilterItemProperty\n+          conditionId={condition.id}\n+          icon={CircleAlert}\n+          label=\"Invalid filter\"\n+          filter={filter}\n+          isDisabled={isDisabled}\n+        />\n+        {/* Remove button */}\n+        {!isDisabled && <FilterItemCloseButton conditionId={condition.id} filter={filter} />}\n+      </FilterItemContainer>\n+    );\n+  }\n+);\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filter-item/loader.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/rich-filters/filter-item/loader.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filter-item/loader.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/filter-item/loader.tsx\tcfb4a82 (commit)\n@@ -0,0 +1,7 @@\n+import { Loader } from \"@plane/ui\";\n+\n+export const FilterItemLoader = () => (\n+  <Loader>\n+    <Loader.Item height=\"28px\" width=\"180px\" />\n+  </Loader>\n+);\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filter-item/property.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/rich-filters/filter-item/property.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filter-item/property.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/filter-item/property.tsx\tcfb4a82 (commit)\n@@ -0,0 +1,67 @@\n+import { observer } from \"mobx-react\";\n+// plane imports\n+import { Tooltip } from \"@plane/propel/tooltip\";\n+import { cn } from \"@plane/propel/utils\";\n+import { IFilterInstance } from \"@plane/shared-state\";\n+import { TExternalFilter, TFilterProperty, TSupportedOperators } from \"@plane/types\";\n+// local imports\n+import { AddFilterDropdown } from \"../add-filters/dropdown\";\n+import { COMMON_FILTER_ITEM_BORDER_CLASSNAME } from \"../shared\";\n+\n+interface IFilterItemPropertyProps<P extends TFilterProperty, E extends TExternalFilter> {\n+  conditionId: string;\n+  icon: React.FC<React.SVGAttributes<SVGElement>> | undefined;\n+  isDisabled?: boolean;\n+  filter: IFilterInstance<P, E>;\n+  label: string;\n+  tooltipContent?: React.ReactNode | undefined;\n+}\n+\n+export const FilterItemProperty = observer(\n+  <P extends TFilterProperty, E extends TExternalFilter>(props: IFilterItemPropertyProps<P, E>) => {\n+    const { conditionId, filter, isDisabled } = props;\n+\n+    if (isDisabled) {\n+      return <PropertyButton {...props} />;\n+    }\n+\n+    const handleFilterSelect = (property: P, operator: TSupportedOperators, isNegation: boolean) => {\n+      filter.updateConditionProperty(conditionId, property, operator, isNegation);\n+    };\n+\n+    return (\n+      <AddFilterDropdown\n+        {...props}\n+        handleFilterSelect={handleFilterSelect}\n+        customButton={<PropertyButton {...props} />}\n+      />\n+    );\n+  }\n+);\n+\n+type TPropertyButtonProps<P extends TFilterProperty, E extends TExternalFilter> = IFilterItemPropertyProps<P, E> & {\n+  className?: string;\n+};\n+\n+const PropertyButton = <P extends TFilterProperty, E extends TExternalFilter>(props: TPropertyButtonProps<P, E>) => {\n+  const { icon: Icon, label, tooltipContent, className } = props;\n+\n+  return (\n+    <Tooltip tooltipContent={tooltipContent} position=\"bottom-start\" disabled={!tooltipContent}>\n+      <div\n+        className={cn(\n+          \"flex items-center gap-1 px-2 py-[5px] text-xs text-custom-text-300 min-w-0 h-full\",\n+          COMMON_FILTER_ITEM_BORDER_CLASSNAME,\n+          className\n+        )}\n+      >\n+        {Icon && (\n+          <div className=\"transition-transform duration-200 ease-in-out flex-shrink-0\">\n+            <Icon className=\"size-3.5\" />\n+          </div>\n+        )}\n+        <span className=\"truncate\">{label}</span>\n+      </div>\n+    </Tooltip>\n+  );\n+};\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filter-item/root.tsx",
          "status": "renamed",
          "oldPath": "apps/web/core/components/rich-filters/filter-item.tsx",
          "diff": "===================================================================\n--- apps/web/core/components/rich-filters/filter-item.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/filter-item/root.tsx\tcfb4a82 (commit)\n@@ -1,7 +1,6 @@\n-import React, { useRef, useEffect } from \"react\";\n+import React from \"react\";\n import { observer } from \"mobx-react\";\n-import { X } from \"lucide-react\";\n // plane imports\n import { IFilterInstance } from \"@plane/shared-state\";\n import {\n   SingleOrArray,\n@@ -11,25 +10,28 @@\n   TFilterConditionNodeForDisplay,\n   TAllAvailableOperatorsForDisplay,\n } from \"@plane/types\";\n import { CustomSearchSelect } from \"@plane/ui\";\n-import { cn, hasValidValue, getOperatorForPayload } from \"@plane/utils\";\n+import { cn, getOperatorForPayload } from \"@plane/utils\";\n // local imports\n-import { FilterValueInput } from \"./filter-value-input/root\";\n-import { COMMON_FILTER_ITEM_BORDER_CLASSNAME } from \"./shared\";\n+import { FilterValueInput } from \"../filter-value-input/root\";\n+import { COMMON_FILTER_ITEM_BORDER_CLASSNAME } from \"../shared\";\n+import { FilterItemCloseButton } from \"./close-button\";\n+import { FilterItemContainer } from \"./container\";\n+import { InvalidFilterItem } from \"./invalid\";\n+import { FilterItemLoader } from \"./loader\";\n+import { FilterItemProperty } from \"./property\";\n \n-interface FilterItemProps<P extends TFilterProperty, E extends TExternalFilter> {\n+export interface IFilterItemProps<P extends TFilterProperty, E extends TExternalFilter> {\n   condition: TFilterConditionNodeForDisplay<P, TFilterValue>;\n   filter: IFilterInstance<P, E>;\n   isDisabled?: boolean;\n   showTransition?: boolean;\n }\n \n export const FilterItem = observer(\n-  <P extends TFilterProperty, E extends TExternalFilter>(props: FilterItemProps<P, E>) => {\n+  <P extends TFilterProperty, E extends TExternalFilter>(props: IFilterItemProps<P, E>) => {\n     const { condition, filter, isDisabled = false, showTransition = true } = props;\n-    // refs\n-    const itemRef = useRef<HTMLDivElement>(null);\n     // derived values\n     const filterConfig = condition?.property ? filter.configManager.getConfigByProperty(condition.property) : undefined;\n     const operatorOptions = filterConfig\n       ?.getAllDisplayOperatorOptionsByValue(condition.value as TFilterValue)\n@@ -47,38 +49,8 @@\n     const isOperatorSelectionDisabled =\n       isDisabled ||\n       (condition.operator && operatorOptions?.length === 1 && operatorOptions[0]?.value === condition.operator);\n \n-    // effects\n-    useEffect(() => {\n-      if (!showTransition) return;\n-\n-      const element = itemRef.current;\n-      if (!element) return;\n-\n-      if (hasValidValue(condition.value)) return;\n-\n-      const applyInitialStyles = () => {\n-        element.style.opacity = \"0\";\n-        element.style.transform = \"scale(0.95)\";\n-      };\n-\n-      const applyFinalStyles = () => {\n-        // Force a reflow to ensure the initial state is applied\n-        void element.offsetWidth;\n-        element.style.opacity = \"1\";\n-        element.style.transform = \"scale(1)\";\n-      };\n-\n-      applyInitialStyles();\n-      applyFinalStyles();\n-\n-      return () => {\n-        applyInitialStyles();\n-      };\n-      // eslint-disable-next-line react-hooks/exhaustive-deps\n-    }, []);\n-\n     const handleOperatorChange = (operator: TAllAvailableOperatorsForDisplay) => {\n       if (operator) {\n         const { operator: positiveOperator, isNegation } = getOperatorForPayload(operator);\n         filter.updateConditionOperator(condition.id, positiveOperator, isNegation);\n@@ -88,32 +60,34 @@\n     const handleValueChange = (values: SingleOrArray<TFilterValue>) => {\n       filter.updateConditionValue(condition.id, values);\n     };\n \n-    const handleRemoveFilter = () => {\n-      filter.removeCondition(condition.id);\n-    };\n+    if (!filter.configManager.areConfigsReady) {\n+      return <FilterItemLoader />;\n+    }\n \n-    if (!filterConfig || !filterConfig.isEnabled) return null;\n+    if (!filterConfig) {\n+      return (\n+        <InvalidFilterItem\n+          condition={condition}\n+          filter={filter}\n+          isDisabled={isDisabled}\n+          showTransition={showTransition}\n+        />\n+      );\n+    }\n+\n     return (\n-      <div\n-        ref={itemRef}\n-        className=\"flex h-7 items-stretch rounded overflow-hidden border border-custom-border-200 bg-custom-background-100 transition-all duration-200\"\n-      >\n+      <FilterItemContainer conditionValue={condition.value} showTransition={showTransition}>\n         {/* Property section */}\n-        <div\n-          className={cn(\n-            \"flex items-center gap-1 px-2 py-0.5 text-xs text-custom-text-300 min-w-0\",\n-            COMMON_FILTER_ITEM_BORDER_CLASSNAME\n-          )}\n-        >\n-          {filterConfig.icon && (\n-            <div className=\"transition-transform duration-200 ease-in-out flex-shrink-0\">\n-              <filterConfig.icon className=\"size-3.5\" />\n-            </div>\n-          )}\n-          <span className=\"truncate\">{filterConfig.label}</span>\n-        </div>\n+        <FilterItemProperty\n+          conditionId={condition.id}\n+          filter={filter}\n+          icon={filterConfig.icon}\n+          isDisabled={isDisabled}\n+          label={filterConfig.label}\n+          tooltipContent={filterConfig.tooltipContent}\n+        />\n \n         {/* Operator section */}\n         <CustomSearchSelect\n           value={condition.operator}\n@@ -124,9 +98,9 @@\n             \"h-full px-2 text-sm font-normal\",\n             isOperatorSelectionDisabled && \"hover:bg-custom-background-100\"\n           )}\n           optionsClassName=\"w-48\"\n-          maxHeight=\"full\"\n+          maxHeight=\"2xl\"\n           disabled={isOperatorSelectionDisabled}\n           customButton={\n             <div className=\"flex items-center h-full\" aria-disabled={isOperatorSelectionDisabled}>\n               {filterConfig.getLabelForOperator(selectedOperatorOption)}\n@@ -144,18 +118,9 @@\n           />\n         )}\n \n         {/* Remove button */}\n-        {!isDisabled && (\n-          <button\n-            onClick={handleRemoveFilter}\n-            className=\"px-1.5 text-custom-text-400 hover:text-custom-text-300 focus:outline-none hover:bg-custom-background-90\"\n-            type=\"button\"\n-            aria-label=\"Remove filter\"\n-          >\n-            <X className=\"size-3.5\" />\n-          </button>\n-        )}\n-      </div>\n+        {!isDisabled && <FilterItemCloseButton conditionId={condition.id} filter={filter} />}\n+      </FilterItemContainer>\n     );\n   }\n );\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filter-value-input/date/range.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/rich-filters/filter-value-input/date/range.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filter-value-input/date/range.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/filter-value-input/date/range.tsx\tcfb4a82 (commit)\n@@ -5,9 +5,9 @@\n import { cn, isValidDate, renderFormattedPayloadDate, toFilterArray } from \"@plane/utils\";\n // components\n import { DateRangeDropdown } from \"@/components/dropdowns/date-range\";\n // local imports\n-import { COMMON_FILTER_ITEM_BORDER_CLASSNAME } from \"../../shared\";\n+import { COMMON_FILTER_ITEM_BORDER_CLASSNAME, EMPTY_FILTER_PLACEHOLDER_TEXT } from \"../../shared\";\n \n type TDateRangeFilterValueInputProps<P extends TFilterProperty> = {\n   config: TDateRangeFilterFieldConfig<string>;\n   condition: TFilterConditionNodeForDisplay<P, string>;\n@@ -41,9 +41,9 @@\n         onSelect={handleSelect}\n         minDate={config.min}\n         maxDate={config.max}\n         mergeDates\n-        placeholder={{ from: \"--\" }}\n+        placeholder={{ from: EMPTY_FILTER_PLACEHOLDER_TEXT }}\n         buttonVariant=\"transparent-with-text\"\n         buttonClassName={cn(\"rounded-none\", {\n           [COMMON_FILTER_ITEM_BORDER_CLASSNAME]: !isDisabled,\n           \"text-red-500\": isIncomplete,\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filter-value-input/date/single.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/rich-filters/filter-value-input/date/single.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filter-value-input/date/single.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/filter-value-input/date/single.tsx\tcfb4a82 (commit)\n@@ -3,9 +3,9 @@\n // plane imports\n import { TDateFilterFieldConfig, TFilterConditionNodeForDisplay, TFilterProperty } from \"@plane/types\";\n import { cn, renderFormattedPayloadDate } from \"@plane/utils\";\n import { DateDropdown } from \"@/components/dropdowns/date\";\n-import { COMMON_FILTER_ITEM_BORDER_CLASSNAME } from \"../../shared\";\n+import { COMMON_FILTER_ITEM_BORDER_CLASSNAME, EMPTY_FILTER_PLACEHOLDER_TEXT } from \"../../shared\";\n \n type TSingleDateFilterValueInputProps<P extends TFilterProperty> = {\n   config: TDateFilterFieldConfig<string>;\n   condition: TFilterConditionNodeForDisplay<P, string>;\n@@ -33,9 +33,9 @@\n         })}\n         minDate={config.min}\n         maxDate={config.max}\n         icon={null}\n-        placeholder=\"--\"\n+        placeholder={EMPTY_FILTER_PLACEHOLDER_TEXT}\n         buttonVariant=\"transparent-with-text\"\n         isClearable={false}\n         closeOnSelect\n         defaultOpen={!conditionValue}\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filter-value-input/root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/rich-filters/filter-value-input/root.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filter-value-input/root.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/filter-value-input/root.tsx\tcfb4a82 (commit)\n@@ -1,5 +1,6 @@\n import React from \"react\";\n+\n import { observer } from \"mobx-react\";\n // plane imports\n import {\n   FILTER_FIELD_TYPE,\n@@ -10,25 +11,18 @@\n   TSingleSelectFilterFieldConfig,\n   TMultiSelectFilterFieldConfig,\n   TDateFilterFieldConfig,\n   TDateRangeFilterFieldConfig,\n-  TSupportedFilterFieldConfigs,\n   TFilterConditionNodeForDisplay,\n } from \"@plane/types\";\n // local imports\n+import { AdditionalFilterValueInput } from \"@/plane-web/components/rich-filters/filter-value-input/root\";\n+import { TFilterValueInputProps } from \"../shared\";\n import { DateRangeFilterValueInput } from \"./date/range\";\n import { SingleDateFilterValueInput } from \"./date/single\";\n import { MultiSelectFilterValueInput } from \"./select/multi\";\n import { SingleSelectFilterValueInput } from \"./select/single\";\n \n-type TFilterValueInputProps<P extends TFilterProperty, V extends TFilterValue> = {\n-  condition: TFilterConditionNodeForDisplay<P, V>;\n-  filterFieldConfig: TSupportedFilterFieldConfigs<V>;\n-  isDisabled?: boolean;\n-  onChange: (values: SingleOrArray<V>) => void;\n-};\n-\n-// TODO: Prevent type assertion\n export const FilterValueInput = observer(\n   <P extends TFilterProperty, V extends TFilterValue>(props: TFilterValueInputProps<P, V>) => {\n     const { condition, filterFieldConfig, isDisabled = false, onChange } = props;\n \n@@ -79,12 +73,7 @@\n         />\n       );\n     }\n \n-    // Fallback\n-    return (\n-      <div className=\"h-full flex items-center px-4 text-xs text-custom-text-400 transition-opacity duration-200 cursor-not-allowed\">\n-        Filter type not supported\n-      </div>\n-    );\n+    return <AdditionalFilterValueInput {...props} />;\n   }\n );\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filter-value-input/select/selected-options-display.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/rich-filters/filter-value-input/select/selected-options-display.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filter-value-input/select/selected-options-display.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/filter-value-input/select/selected-options-display.tsx\tcfb4a82 (commit)\n@@ -2,8 +2,9 @@\n import { Transition } from \"@headlessui/react\";\n // plane imports\n import { SingleOrArray, IFilterOption, TFilterValue } from \"@plane/types\";\n import { cn, toFilterArray } from \"@plane/utils\";\n+import { EMPTY_FILTER_PLACEHOLDER_TEXT } from \"../../shared\";\n \n type TSelectedOptionsDisplayProps<V extends TFilterValue> = {\n   selectedValue: SingleOrArray<V>;\n   options: IFilterOption<V>[];\n@@ -12,9 +13,9 @@\n   fallbackText?: string;\n };\n \n export const SelectedOptionsDisplay = <V extends TFilterValue>(props: TSelectedOptionsDisplayProps<V>) => {\n-  const { selectedValue, options, displayCount = 2, emptyValue = \"--\", fallbackText } = props;\n+  const { selectedValue, options, displayCount = 2, emptyValue = EMPTY_FILTER_PLACEHOLDER_TEXT, fallbackText } = props;\n   // derived values\n   const selectedArray = toFilterArray(selectedValue);\n   const remainingCount = selectedArray.length - displayCount;\n   const selectedOptions = selectedArray\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filters-row.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/rich-filters/filters-row.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filters-row.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/filters-row.tsx\tcfb4a82 (commit)\n@@ -5,12 +5,12 @@\n // plane imports\n import { Button } from \"@plane/propel/button\";\n import { IFilterInstance } from \"@plane/shared-state\";\n import { TExternalFilter, TFilterProperty } from \"@plane/types\";\n-import { cn, EHeaderVariant, Header } from \"@plane/ui\";\n+import { cn, EHeaderVariant, Header, Loader } from \"@plane/ui\";\n // local imports\n-import { AddFilterButton, TAddFilterButtonProps } from \"./add-filters-button\";\n-import { FilterItem } from \"./filter-item\";\n+import { AddFilterButton, TAddFilterButtonProps } from \"./add-filters/button\";\n+import { FilterItem } from \"./filter-item/root\";\n \n export type TFiltersRowProps<K extends TFilterProperty, E extends TExternalFilter> = {\n   buttonConfig?: TAddFilterButtonProps<K, E>[\"buttonConfig\"];\n   disabledAllOperations?: boolean;\n@@ -24,12 +24,19 @@\n };\n \n export const FiltersRow = observer(\n   <K extends TFilterProperty, E extends TExternalFilter>(props: TFiltersRowProps<K, E>) => {\n-    const { buttonConfig, disabledAllOperations = false, filter, variant = \"header\", trackerElements } = props;\n+    const {\n+      buttonConfig,\n+      disabledAllOperations: disabledAllOperationsProp = false,\n+      filter,\n+      variant = \"header\",\n+      trackerElements,\n+    } = props;\n     // states\n     const [isUpdating, setIsUpdating] = useState(false);\n     // derived values\n+    const disabledAllOperations = disabledAllOperationsProp || !filter.configManager.areConfigsReady;\n     const hasAnyConditions = filter.allConditionsForDisplay.length > 0;\n     const hasAvailableOperations =\n       !disabledAllOperations && (filter.canClearFilters || filter.canSaveView || filter.canUpdateView);\n \n@@ -139,21 +146,19 @@\n         {mainContent}\n       </Header>\n     );\n \n-    return (\n-      <Transition\n-        show={filter.isVisible}\n-        enter=\"transition-all duration-150 ease-out\"\n-        enterFrom=\"opacity-0 -translate-y-1\"\n-        enterTo=\"opacity-100 translate-y-0\"\n-        leave=\"transition-all duration-100 ease-in\"\n-        leaveFrom=\"opacity-100 translate-y-0\"\n-        leaveTo=\"opacity-0 -translate-y-1\"\n-      >\n-        {variant === \"modal\" ? ModalVariant : HeaderVariant}\n-      </Transition>\n-    );\n+    if (!filter.configManager.areConfigsReady && !hasAnyConditions) {\n+      return (\n+        <RowTransition show={filter.isVisible}>\n+          <Loader>\n+            <Loader.Item height=\"44px\" width=\"100%\" className={cn({ \"rounded-none\": variant === \"header\" })} />\n+          </Loader>\n+        </RowTransition>\n+      );\n+    }\n+\n+    return <RowTransition show={filter.isVisible}>{variant === \"modal\" ? ModalVariant : HeaderVariant}</RowTransition>;\n   }\n );\n \n const COMMON_OPERATION_BUTTON_CLASSNAME = \"py-1\";\n@@ -175,4 +180,23 @@\n   >\n     {props.children}\n   </Transition>\n ));\n+\n+type TRowTransitionProps = {\n+  children: React.ReactNode;\n+  show: boolean;\n+};\n+\n+const RowTransition = observer((props: TRowTransitionProps) => (\n+  <Transition\n+    show={props.show}\n+    enter=\"transition-all duration-150 ease-out\"\n+    enterFrom=\"opacity-0 -translate-y-1\"\n+    enterTo=\"opacity-100 translate-y-0\"\n+    leave=\"transition-all duration-100 ease-in\"\n+    leaveFrom=\"opacity-100 translate-y-0\"\n+    leaveTo=\"opacity-0 -translate-y-1\"\n+  >\n+    {props.children}\n+  </Transition>\n+));\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/filters-toggle.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/rich-filters/filters-toggle.tsx\n===================================================================\n--- apps/web/core/components/rich-filters/filters-toggle.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/filters-toggle.tsx\tcfb4a82 (commit)\n@@ -4,9 +4,9 @@\n import { IFilterInstance } from \"@plane/shared-state\";\n import { TExternalFilter, TFilterProperty } from \"@plane/types\";\n import { cn } from \"@plane/ui\";\n // components\n-import { AddFilterButton } from \"@/components/rich-filters/add-filters-button\";\n+import { AddFilterButton } from \"@/components/rich-filters/add-filters/button\";\n \n type TFiltersToggleProps<P extends TFilterProperty, E extends TExternalFilter> = {\n   filter: IFilterInstance<P, E> | undefined;\n };\n"
        },
        {
          "path": "apps/web/core/components/rich-filters/shared.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/components/rich-filters/shared.ts\n===================================================================\n--- apps/web/core/components/rich-filters/shared.ts\t9f41e92 (parent)\n+++ apps/web/core/components/rich-filters/shared.ts\tcfb4a82 (commit)\n@@ -1,1 +1,18 @@\n+import {\n+  SingleOrArray,\n+  TFilterConditionNodeForDisplay,\n+  TFilterProperty,\n+  TFilterValue,\n+  TSupportedFilterFieldConfigs,\n+} from \"@plane/types\";\n+\n export const COMMON_FILTER_ITEM_BORDER_CLASSNAME = \"border-r border-custom-border-200\";\n+\n+export const EMPTY_FILTER_PLACEHOLDER_TEXT = \"--\";\n+\n+export type TFilterValueInputProps<P extends TFilterProperty, V extends TFilterValue> = {\n+  condition: TFilterConditionNodeForDisplay<P, V>;\n+  filterFieldConfig: TSupportedFilterFieldConfigs<V>;\n+  isDisabled?: boolean;\n+  onChange: (values: SingleOrArray<V>) => void;\n+};\n"
        },
        {
          "path": "apps/web/core/components/work-item-filters/filters-hoc/base.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/work-item-filters/filters-hoc/base.tsx\n===================================================================\n--- apps/web/core/components/work-item-filters/filters-hoc/base.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/work-item-filters/filters-hoc/base.tsx\tcfb4a82 (commit)\n@@ -93,8 +93,9 @@\n     },\n     [deleteFilter, entityType, workItemEntityID]\n   );\n \n+  workItemLayoutFilter.configManager.setAreConfigsReady(workItemFiltersConfig.areAllConfigsInitialized);\n   workItemLayoutFilter.configManager.registerAll(workItemFiltersConfig.configs);\n \n   return <>{typeof children === \"function\" ? children({ filter: workItemLayoutFilter }) : children}</>;\n });\n"
        },
        {
          "path": "apps/web/core/components/work-item-filters/filters-hoc/project-level.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/work-item-filters/filters-hoc/project-level.tsx\n===================================================================\n--- apps/web/core/components/work-item-filters/filters-hoc/project-level.tsx\t9f41e92 (parent)\n+++ apps/web/core/components/work-item-filters/filters-hoc/project-level.tsx\tcfb4a82 (commit)\n@@ -166,8 +166,9 @@\n       />\n       <WorkItemFiltersHOC\n         {...props}\n         {...getAdditionalProjectLevelFiltersHOCProps({\n+          entityType: props.entityType,\n           workspaceSlug,\n           projectId,\n         })}\n         cycleIds={getProjectCycleIds(projectId) ?? undefined}\n"
        },
        {
          "path": "packages/shared-state/src/store/rich-filters/config-manager.ts",
          "status": "modified",
          "diff": "Index: packages/shared-state/src/store/rich-filters/config-manager.ts\n===================================================================\n--- packages/shared-state/src/store/rich-filters/config-manager.ts\t9f41e92 (parent)\n+++ packages/shared-state/src/store/rich-filters/config-manager.ts\tcfb4a82 (commit)\n@@ -23,16 +23,18 @@\n export interface IFilterConfigManager<P extends TFilterProperty> {\n   // observables\n   filterConfigs: Map<P, IFilterConfig<P, TFilterValue>>; // filter property -> config\n   configOptions: TConfigOptions;\n+  areConfigsReady: boolean;\n   // computed\n   allAvailableConfigs: IFilterConfig<P, TFilterValue>[];\n   // computed functions\n   getConfigByProperty: (property: P) => IFilterConfig<P, TFilterValue> | undefined;\n   // helpers\n   register: <C extends TFilterConfig<P, TFilterValue>>(config: C) => void;\n   registerAll: (configs: TFilterConfig<P, TFilterValue>[]) => void;\n   updateConfigByProperty: (property: P, configUpdates: Partial<TFilterConfig<P, TFilterValue>>) => void;\n+  setAreConfigsReady: (value: boolean) => void;\n }\n \n /**\n  * Parameters for initializing the FilterConfigManager.\n@@ -56,8 +58,9 @@\n {\n   // observables\n   filterConfigs: IFilterConfigManager<P>[\"filterConfigs\"];\n   configOptions: IFilterConfigManager<P>[\"configOptions\"];\n+  areConfigsReady: IFilterConfigManager<P>[\"areConfigsReady\"];\n   // parent filter instance\n   private _filterInstance: IFilterInstance<P, E>;\n \n   /**\n@@ -68,20 +71,23 @@\n    */\n   constructor(filterInstance: IFilterInstance<P, E>, params: TConfigManagerParams) {\n     this.filterConfigs = new Map<P, IFilterConfig<P>>();\n     this.configOptions = this._initializeConfigOptions(params.options);\n+    this.areConfigsReady = true;\n     // parent filter instance\n     this._filterInstance = filterInstance;\n \n     makeObservable(this, {\n       filterConfigs: observable,\n       configOptions: observable,\n+      areConfigsReady: observable,\n       // computed\n       allAvailableConfigs: computed,\n       // helpers\n       register: action,\n       registerAll: action,\n       updateConfigByProperty: action,\n+      setAreConfigsReady: action,\n     });\n   }\n \n   // ------------ computed ------------\n@@ -145,8 +151,16 @@\n     const prevConfig = this.filterConfigs.get(property);\n     prevConfig?.mutate(configUpdates);\n   });\n \n+  /**\n+   * Updates the configs ready state.\n+   * @param value - The new configs ready state.\n+   */\n+  setAreConfigsReady: IFilterConfigManager<P>[\"setAreConfigsReady\"] = action((value) => {\n+    this.areConfigsReady = value;\n+  });\n+\n   // ------------ private computed ------------\n \n   private get _allConfigs(): IFilterConfig<P, TFilterValue>[] {\n     return Array.from(this.filterConfigs.values());\n"
        },
        {
          "path": "packages/shared-state/src/store/rich-filters/filter-helpers.ts",
          "status": "modified",
          "diff": "Index: packages/shared-state/src/store/rich-filters/filter-helpers.ts\n===================================================================\n--- packages/shared-state/src/store/rich-filters/filter-helpers.ts\t9f41e92 (parent)\n+++ packages/shared-state/src/store/rich-filters/filter-helpers.ts\tcfb4a82 (commit)\n@@ -5,8 +5,9 @@\n import {\n   IFilterAdapter,\n   LOGICAL_OPERATOR,\n   TSupportedOperators,\n+  TFilterConditionNode,\n   TFilterExpression,\n   TFilterValue,\n   TFilterProperty,\n   TExternalFilter,\n@@ -42,11 +43,18 @@\n     groupOperator: TLogicalOperator,\n     condition: TFilterConditionPayload<P, V>,\n     isNegation: boolean\n   ) => TFilterExpression<P> | null;\n+  handleConditionPropertyUpdate: (\n+    expression: TFilterExpression<P>,\n+    conditionId: string,\n+    property: P,\n+    operator: TSupportedOperators,\n+    isNegation: boolean\n+  ) => TFilterExpression<P> | null;\n   // group operations\n   restructureExpressionForOperatorChange: (\n-    expression: TFilterExpression<P> | null,\n+    expression: TFilterExpression<P>,\n     conditionId: string,\n     newOperator: TSupportedOperators,\n     isNegation: boolean,\n     shouldResetValue: boolean\n@@ -161,8 +169,30 @@\n     condition,\n     isNegation\n   ) => this._addConditionByOperator(expression, groupOperator, this._getConditionPayloadToAdd(condition, isNegation));\n \n+  /**\n+   * Updates the property and operator of a condition in the filter expression.\n+   * This method updates the property, operator, resets the value, and handles negation properly.\n+   * @param expression - The filter expression to operate on\n+   * @param conditionId - The ID of the condition being updated\n+   * @param property - The new property for the condition\n+   * @param operator - The new operator for the condition\n+   * @param isNegation - Whether the condition should be negated\n+   * @returns The updated expression\n+   */\n+  handleConditionPropertyUpdate: IFilterInstanceHelper<P, E>[\"handleConditionPropertyUpdate\"] = (\n+    expression,\n+    conditionId,\n+    property,\n+    operator,\n+    isNegation\n+  ) => {\n+    const payload = { property, operator, value: undefined };\n+\n+    return this._updateCondition(expression, conditionId, payload, isNegation);\n+  };\n+\n   // ------------ group operations ------------\n \n   /**\n    * Restructures the expression when a condition's operator changes between positive and negative.\n@@ -176,19 +206,14 @@\n   restructureExpressionForOperatorChange: IFilterInstanceHelper<P, E>[\"restructureExpressionForOperatorChange\"] = (\n     expression,\n     conditionId,\n     newOperator,\n-    _isNegation,\n+    isNegation,\n     shouldResetValue\n   ) => {\n-    if (!expression) return null;\n-\n     const payload = shouldResetValue ? { operator: newOperator, value: undefined } : { operator: newOperator };\n \n-    // Update the condition with the new operator\n-    updateNodeInExpression(expression, conditionId, payload);\n-\n-    return expression;\n+    return this._updateCondition(expression, conditionId, payload, isNegation);\n   };\n \n   // ------------ private helpers ------------\n \n@@ -226,5 +251,25 @@\n         console.warn(`Unsupported logical operator: ${groupOperator}`);\n         return expression;\n     }\n   }\n+\n+  /**\n+   * Updates a condition with the given payload and handles negation wrapping/unwrapping.\n+   * @param expression - The filter expression to operate on\n+   * @param conditionId - The ID of the condition being updated\n+   * @param payload - The payload to update the condition with\n+   * @param isNegation - Whether the condition should be negated\n+   * @returns The updated expression with proper negation handling\n+   */\n+  private _updateCondition = (\n+    expression: TFilterExpression<P>,\n+    conditionId: string,\n+    payload: Partial<TFilterConditionNode<P, TFilterValue>>,\n+    _isNegation: boolean\n+  ): TFilterExpression<P> | null => {\n+    // Update the condition with the payload\n+    updateNodeInExpression(expression, conditionId, payload);\n+\n+    return expression;\n+  };\n }\n"
        },
        {
          "path": "packages/shared-state/src/store/rich-filters/filter.ts",
          "status": "modified",
          "diff": "Index: packages/shared-state/src/store/rich-filters/filter.ts\n===================================================================\n--- packages/shared-state/src/store/rich-filters/filter.ts\t9f41e92 (parent)\n+++ packages/shared-state/src/store/rich-filters/filter.ts\tcfb4a82 (commit)\n@@ -1,5 +1,5 @@\n-import { cloneDeep } from \"lodash-es\";\n+import { cloneDeep, isEqual } from \"lodash-es\";\n import { action, computed, makeObservable, observable, toJS } from \"mobx\";\n import { computedFn } from \"mobx-utils\";\n import { v4 as uuidv4 } from \"uuid\";\n // plane imports\n@@ -100,8 +100,14 @@\n     groupOperator: TLogicalOperator,\n     condition: TFilterConditionPayload<P, V>,\n     isNegation: boolean\n   ) => void;\n+  updateConditionProperty: (\n+    conditionId: string,\n+    property: P,\n+    operator: TSupportedOperators,\n+    isNegation: boolean\n+  ) => void;\n   updateConditionOperator: (conditionId: string, operator: TSupportedOperators, isNegation: boolean) => void;\n   updateConditionValue: <V extends TFilterValue>(conditionId: string, value: SingleOrArray<V>) => void;\n   removeCondition: (conditionId: string) => void;\n   // config actions\n@@ -360,8 +366,35 @@\n     }\n   });\n \n   /**\n+   * Updates the property of a condition in the filter expression.\n+   * @param conditionId - The id of the condition to update.\n+   * @param property - The new property for the condition.\n+   */\n+  updateConditionProperty: IFilterInstance<P, E>[\"updateConditionProperty\"] = action(\n+    (conditionId: string, property: P, operator: TSupportedOperators, isNegation: boolean) => {\n+      if (!this.expression) return;\n+      const conditionBeforeUpdate = cloneDeep(findNodeById(this.expression, conditionId));\n+      if (!conditionBeforeUpdate || conditionBeforeUpdate.type !== FILTER_NODE_TYPE.CONDITION) return;\n+\n+      // Update the condition property\n+      const updatedExpression = this.helper.handleConditionPropertyUpdate(\n+        this.expression,\n+        conditionId,\n+        property,\n+        operator,\n+        isNegation\n+      );\n+\n+      if (updatedExpression) {\n+        this.expression = updatedExpression;\n+        this._notifyExpressionChange();\n+      }\n+    }\n+  );\n+\n+  /**\n    * Updates the operator of a condition in the filter expression.\n    * @param conditionId - The id of the condition to update.\n    * @param operator - The new operator for the condition.\n    */\n@@ -409,14 +442,25 @@\n     <V extends TFilterValue>(conditionId: string, value: SingleOrArray<V>) => {\n       // If the expression is not valid, return\n       if (!this.expression) return;\n \n+      // Get the condition before update\n+      const conditionBeforeUpdate = cloneDeep(findNodeById(this.expression, conditionId));\n+\n+      // If the condition is not valid, return\n+      if (!conditionBeforeUpdate || conditionBeforeUpdate.type !== FILTER_NODE_TYPE.CONDITION) return;\n+\n       // If the value is not valid, remove the condition\n       if (!hasValidValue(value)) {\n         this.removeCondition(conditionId);\n         return;\n       }\n \n+      // If the value is the same as the condition before update, return\n+      if (isEqual(conditionBeforeUpdate.value, value)) {\n+        return;\n+      }\n+\n       // Update the condition value\n       updateNodeInExpression(this.expression, conditionId, {\n         value,\n       });\n"
        },
        {
          "path": "packages/shared-state/src/store/work-item-filters/adapter.ts",
          "status": "modified",
          "diff": "Index: packages/shared-state/src/store/work-item-filters/adapter.ts\n===================================================================\n--- packages/shared-state/src/store/work-item-filters/adapter.ts\t9f41e92 (parent)\n+++ packages/shared-state/src/store/work-item-filters/adapter.ts\tcfb4a82 (commit)\n@@ -1,8 +1,9 @@\n // plane imports\n import { isEmpty } from \"lodash-es\";\n import {\n   LOGICAL_OPERATOR,\n+  MULTI_VALUE_OPERATORS,\n   SingleOrArray,\n   TFilterExpression,\n   TFilterValue,\n   TSupportedOperators,\n@@ -160,9 +161,10 @@\n     const property = key.substring(0, lastDoubleUnderscoreIndex);\n     const operator = key.substring(lastDoubleUnderscoreIndex + 2);\n \n     // Validate property is in allowed list\n-    if (!WORK_ITEM_FILTER_PROPERTY_KEYS.includes(property as TWorkItemFilterProperty)) {\n+    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n+    if (!WORK_ITEM_FILTER_PROPERTY_KEYS.includes(property as any) && !property.startsWith(\"customproperty_\")) {\n       return false;\n     }\n \n     // Validate operator is not empty\n@@ -191,19 +193,14 @@\n \n     // Find the last occurrence of '__' to separate property from operator\n     const lastDoubleUnderscoreIndex = key.lastIndexOf(\"__\");\n     const property = key.substring(0, lastDoubleUnderscoreIndex);\n-    const operator = key.substring(lastDoubleUnderscoreIndex + 2);\n+    const operator = key.substring(lastDoubleUnderscoreIndex + 2) as TSupportedOperators;\n \n     const rawValue = data[key as TWorkItemFilterConditionKey];\n \n-    if (typeof rawValue !== \"string\") {\n-      console.error(`Filter value must be a string, got: ${typeof rawValue}`);\n-      return null;\n-    }\n-\n     // Parse comma-separated values\n-    const parsedValue = this._parseFilterValue(rawValue);\n+    const parsedValue = MULTI_VALUE_OPERATORS.includes(operator) ? this._parseFilterValue(rawValue) : rawValue;\n \n     return [property as TWorkItemFilterProperty, operator as TSupportedOperators, parsedValue];\n   };\n \n@@ -211,9 +208,11 @@\n    * Parses filter value from string format\n    * @param value - The string value to parse\n    * @returns Parsed value as string or array of strings\n    */\n-  private _parseFilterValue = (value: string): SingleOrArray<TFilterValue> => {\n+  private _parseFilterValue = (value: TFilterValue): SingleOrArray<TFilterValue> => {\n+    if (!value) return value;\n+\n     if (typeof value !== \"string\") return value;\n \n     // Handle empty string\n     if (value === \"\") return value;\n"
        },
        {
          "path": "packages/types/src/rich-filters/config/filter-config.ts",
          "status": "modified",
          "diff": "Index: packages/types/src/rich-filters/config/filter-config.ts\n===================================================================\n--- packages/types/src/rich-filters/config/filter-config.ts\t9f41e92 (parent)\n+++ packages/types/src/rich-filters/config/filter-config.ts\tcfb4a82 (commit)\n@@ -14,5 +14,7 @@\n   icon?: React.FC<React.SVGAttributes<SVGElement>>;\n   isEnabled: boolean;\n   allowMultipleFilters?: boolean;\n   supportedOperatorConfigsMap: TOperatorConfigMap<V>;\n+  rightContent?: React.ReactNode; // content to display on the right side of the filter option in the dropdown\n+  tooltipContent?: React.ReactNode; // content to display when hovering over the applied filter item in the filter list\n };\n"
        },
        {
          "path": "packages/types/src/rich-filters/operators/core.ts",
          "status": "modified",
          "diff": "Index: packages/types/src/rich-filters/operators/core.ts\n===================================================================\n--- packages/types/src/rich-filters/operators/core.ts\t9f41e92 (parent)\n+++ packages/types/src/rich-filters/operators/core.ts\tcfb4a82 (commit)\n@@ -26,8 +26,13 @@\n   RANGE: \"range\",\n } as const;\n \n /**\n+ * Core operators that support multiple values\n+ */\n+export const CORE_MULTI_VALUE_OPERATORS = [CORE_COLLECTION_OPERATOR.IN, CORE_COMPARISON_OPERATOR.RANGE] as const;\n+\n+/**\n  * All core operators\n  */\n export const CORE_OPERATORS = {\n   ...CORE_EQUALITY_OPERATOR,\n"
        },
        {
          "path": "packages/types/src/rich-filters/operators/extended.ts",
          "status": "modified",
          "diff": "Index: packages/types/src/rich-filters/operators/extended.ts\n===================================================================\n--- packages/types/src/rich-filters/operators/extended.ts\t9f41e92 (parent)\n+++ packages/types/src/rich-filters/operators/extended.ts\tcfb4a82 (commit)\n@@ -18,8 +18,13 @@\n  */\n export const EXTENDED_COMPARISON_OPERATOR = {} as const;\n \n /**\n+ * Extended operators that support multiple values\n+ */\n+export const EXTENDED_MULTI_VALUE_OPERATORS = [] as const;\n+\n+/**\n  * All extended operators\n  */\n export const EXTENDED_OPERATORS = {\n   ...EXTENDED_EQUALITY_OPERATOR,\n"
        },
        {
          "path": "packages/types/src/rich-filters/operators/index.ts",
          "status": "modified",
          "diff": "Index: packages/types/src/rich-filters/operators/index.ts\n===================================================================\n--- packages/types/src/rich-filters/operators/index.ts\t9f41e92 (parent)\n+++ packages/types/src/rich-filters/operators/index.ts\tcfb4a82 (commit)\n@@ -3,15 +3,17 @@\n   CORE_EQUALITY_OPERATOR,\n   CORE_COLLECTION_OPERATOR,\n   CORE_COMPARISON_OPERATOR,\n   TCoreSupportedOperators,\n+  CORE_MULTI_VALUE_OPERATORS,\n } from \"./core\";\n import {\n   EXTENDED_LOGICAL_OPERATOR,\n   EXTENDED_EQUALITY_OPERATOR,\n   EXTENDED_COLLECTION_OPERATOR,\n   EXTENDED_COMPARISON_OPERATOR,\n   TExtendedSupportedOperators,\n+  EXTENDED_MULTI_VALUE_OPERATORS,\n } from \"./extended\";\n \n // -------- COMPOSED OPERATORS --------\n \n@@ -34,8 +36,13 @@\n   ...CORE_COMPARISON_OPERATOR,\n   ...EXTENDED_COMPARISON_OPERATOR,\n } as const;\n \n+export const MULTI_VALUE_OPERATORS: ReadonlyArray<TSupportedOperators> = [\n+  ...CORE_MULTI_VALUE_OPERATORS,\n+  ...EXTENDED_MULTI_VALUE_OPERATORS,\n+] as const;\n+\n // -------- COMPOSED TYPES --------\n \n export type TLogicalOperator = (typeof LOGICAL_OPERATOR)[keyof typeof LOGICAL_OPERATOR];\n export type TEqualityOperator = (typeof EQUALITY_OPERATOR)[keyof typeof EQUALITY_OPERATOR];\n"
        },
        {
          "path": "packages/types/src/view-props.ts",
          "status": "modified",
          "diff": "Index: packages/types/src/view-props.ts\n===================================================================\n--- packages/types/src/view-props.ts\t9f41e92 (parent)\n+++ packages/types/src/view-props.ts\tcfb4a82 (commit)\n@@ -99,15 +99,17 @@\n   \"state_id\",\n   \"cycle_id\",\n   \"module_id\",\n   \"project_id\",\n+  \"created_at\",\n+  \"updated_at\",\n ] as const;\n export type TWorkItemFilterProperty = (typeof WORK_ITEM_FILTER_PROPERTY_KEYS)[number];\n \n export type TWorkItemFilterConditionKey = `${TWorkItemFilterProperty}__${TSupportedOperators}`;\n \n export type TWorkItemFilterConditionData = Partial<{\n-  [K in TWorkItemFilterConditionKey]: string;\n+  [K in TWorkItemFilterConditionKey]: string | boolean | number;\n }>;\n \n export type TWorkItemFilterAndGroup = {\n   [LOGICAL_OPERATOR.AND]: TWorkItemFilterConditionData[];\n"
        },
        {
          "path": "packages/ui/src/dropdowns/custom-search-select.tsx",
          "status": "modified",
          "diff": "Index: packages/ui/src/dropdowns/custom-search-select.tsx\n===================================================================\n--- packages/ui/src/dropdowns/custom-search-select.tsx\t9f41e92 (parent)\n+++ packages/ui/src/dropdowns/custom-search-select.tsx\tcfb4a82 (commit)\n@@ -138,16 +138,16 @@\n               createPortal(\n                 <Combobox.Options data-prevent-outside-click static>\n                   <div\n                     className={cn(\n-                      \"my-1 overflow-y-scroll rounded-md border-[0.5px] border-custom-border-300 bg-custom-background-100 px-2 py-2.5 text-xs shadow-custom-shadow-rg focus:outline-none min-w-48 whitespace-nowrap z-30\",\n+                      \"my-1 overflow-y-scroll rounded-md border-[0.5px] border-custom-border-300 bg-custom-background-100 py-2.5 text-xs shadow-custom-shadow-rg focus:outline-none min-w-48 whitespace-nowrap z-30\",\n                       optionsClassName\n                     )}\n                     ref={setPopperElement}\n                     style={styles.popper}\n                     {...attributes.popper}\n                   >\n-                    <div className=\"flex items-center gap-1.5 rounded border border-custom-border-100 bg-custom-background-90 px-2\">\n+                    <div className=\"flex items-center gap-1.5 rounded border border-custom-border-100 bg-custom-background-90 px-2 mx-2\">\n                       <Search className=\"h-3.5 w-3.5 text-custom-text-400\" strokeWidth={1.5} />\n                       <Combobox.Input\n                         className=\"w-full bg-transparent py-1 text-xs text-custom-text-200 placeholder:text-custom-text-400 focus:outline-none\"\n                         value={query}\n@@ -156,14 +156,15 @@\n                         displayValue={(assigned: any) => assigned?.name}\n                       />\n                     </div>\n                     <div\n-                      className={cn(\"mt-2 space-y-1 overflow-y-scroll\", {\n+                      className={cn(\"mt-2 px-2 space-y-1 overflow-y-scroll vertical-scrollbar scrollbar-xs\", {\n+                        \"max-h-96\": maxHeight === \"2xl\",\n+                        \"max-h-80\": maxHeight === \"xl\",\n                         \"max-h-60\": maxHeight === \"lg\",\n                         \"max-h-48\": maxHeight === \"md\",\n                         \"max-h-36\": maxHeight === \"rg\",\n                         \"max-h-28\": maxHeight === \"sm\",\n-                        \"max-h-full\": maxHeight === \"full\",\n                       })}\n                     >\n                       {filteredOptions ? (\n                         filteredOptions.length > 0 ? (\n"
        },
        {
          "path": "packages/ui/src/dropdowns/helper.tsx",
          "status": "modified",
          "diff": "Index: packages/ui/src/dropdowns/helper.tsx\n===================================================================\n--- packages/ui/src/dropdowns/helper.tsx\t9f41e92 (parent)\n+++ packages/ui/src/dropdowns/helper.tsx\tcfb4a82 (commit)\n@@ -23,9 +23,9 @@\n   customButton?: React.ReactNode;\n   disabled?: boolean;\n   input?: boolean;\n   label?: string | React.ReactNode;\n-  maxHeight?: \"sm\" | \"rg\" | \"md\" | \"lg\" | \"full\";\n+  maxHeight?: \"sm\" | \"rg\" | \"md\" | \"lg\" | \"xl\" | \"2xl\";\n   noChevron?: boolean;\n   chevronClassName?: string;\n   onOpen?: () => void;\n   optionsClassName?: string;\n"
        },
        {
          "path": "packages/utils/src/index.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/index.ts\n===================================================================\n--- packages/utils/src/index.ts\t9f41e92 (parent)\n+++ packages/utils/src/index.ts\tcfb4a82 (commit)\n@@ -13,8 +13,9 @@\n export * from \"./file\";\n export * from \"./filter\";\n export * from \"./get-icon-for-link\";\n export * from \"./intake\";\n+export * from \"./loader\";\n export * from \"./math\";\n export * from \"./module\";\n export * from \"./notification\";\n export * from \"./page\";\n"
        },
        {
          "path": "packages/utils/src/loader.ts",
          "status": "added",
          "diff": "Index: packages/utils/src/loader.ts\n===================================================================\n--- packages/utils/src/loader.ts\t9f41e92 (parent)\n+++ packages/utils/src/loader.ts\tcfb4a82 (commit)\n@@ -0,0 +1,4 @@\n+import { TLoader } from \"@plane/types\";\n+\n+// checks if a loader has finished initialization\n+export const isLoaderReady = (loader: TLoader | undefined) => loader !== \"init-loader\";\n"
        },
        {
          "path": "packages/utils/src/rich-filters/factories/configs/index.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/rich-filters/factories/configs/index.ts\n===================================================================\n--- packages/utils/src/rich-filters/factories/configs/index.ts\t9f41e92 (parent)\n+++ packages/utils/src/rich-filters/factories/configs/index.ts\tcfb4a82 (commit)\n@@ -1,2 +1,3 @@\n export * from \"./core\";\n export * from \"./shared\";\n+export * from \"./properties\";\n"
        },
        {
          "path": "packages/utils/src/rich-filters/factories/configs/properties/date.ts",
          "status": "added",
          "diff": "Index: packages/utils/src/rich-filters/factories/configs/properties/date.ts\n===================================================================\n--- packages/utils/src/rich-filters/factories/configs/properties/date.ts\t9f41e92 (parent)\n+++ packages/utils/src/rich-filters/factories/configs/properties/date.ts\tcfb4a82 (commit)\n@@ -0,0 +1,27 @@\n+// plane imports\n+import { TFilterProperty } from \"@plane/types\";\n+// local imports\n+import { createFilterConfig, TCreateDateFilterParams, TCreateFilterConfig } from \"../shared\";\n+import { getSupportedDateOperators, TCustomPropertyFilterParams } from \"./shared\";\n+\n+/**\n+ * Date property filter specific params\n+ */\n+export type TCreateDatePropertyFilterParams = TCustomPropertyFilterParams<Date> & TCreateDateFilterParams;\n+\n+/**\n+ * Get the date property filter config\n+ * @param params - The filter params\n+ * @returns The date property filter config\n+ */\n+export const getDatePropertyFilterConfig =\n+  <P extends TFilterProperty>(key: P): TCreateFilterConfig<P, TCreateDatePropertyFilterParams> =>\n+  (params: TCreateDatePropertyFilterParams) =>\n+    createFilterConfig({\n+      id: key,\n+      ...params,\n+      label: params.propertyDisplayName,\n+      icon: params.filterIcon,\n+      allowMultipleFilters: true,\n+      supportedOperatorConfigsMap: getSupportedDateOperators(params),\n+    });\n"
        },
        {
          "path": "packages/utils/src/rich-filters/factories/configs/properties/index.ts",
          "status": "added",
          "diff": "Index: packages/utils/src/rich-filters/factories/configs/properties/index.ts\n===================================================================\n--- packages/utils/src/rich-filters/factories/configs/properties/index.ts\t9f41e92 (parent)\n+++ packages/utils/src/rich-filters/factories/configs/properties/index.ts\tcfb4a82 (commit)\n@@ -0,0 +1,3 @@\n+export * from \"./date\";\n+export * from \"./member-picker\";\n+export * from \"./shared\";\n"
        },
        {
          "path": "packages/utils/src/rich-filters/factories/configs/properties/member-picker.ts",
          "status": "added",
          "diff": "Index: packages/utils/src/rich-filters/factories/configs/properties/member-picker.ts\n===================================================================\n--- packages/utils/src/rich-filters/factories/configs/properties/member-picker.ts\t9f41e92 (parent)\n+++ packages/utils/src/rich-filters/factories/configs/properties/member-picker.ts\tcfb4a82 (commit)\n@@ -0,0 +1,30 @@\n+// plane imports\n+import { EQUALITY_OPERATOR, IUserLite, TFilterProperty } from \"@plane/types\";\n+// local imports\n+import { createFilterConfig, createOperatorConfigEntry, TCreateFilterConfig } from \"../shared\";\n+import { getMemberMultiSelectConfig, TCreateUserFilterParams, TCustomPropertyFilterParams } from \"./shared\";\n+\n+/**\n+ * Member picker property filter specific params\n+ */\n+type TCreateMemberPickerPropertyFilterParams = TCustomPropertyFilterParams<IUserLite> & TCreateUserFilterParams;\n+\n+/**\n+ * Get the member picker property filter config\n+ * @param params - The filter params\n+ * @returns The member picker property filter config\n+ */\n+export const getMemberPickerPropertyFilterConfig =\n+  <P extends TFilterProperty>(key: P): TCreateFilterConfig<P, TCreateMemberPickerPropertyFilterParams> =>\n+  (params: TCreateMemberPickerPropertyFilterParams) =>\n+    createFilterConfig({\n+      id: key,\n+      ...params,\n+      label: params.propertyDisplayName,\n+      icon: params.filterIcon,\n+      supportedOperatorConfigsMap: new Map([\n+        createOperatorConfigEntry(EQUALITY_OPERATOR.EXACT, params, (updatedParams) =>\n+          getMemberMultiSelectConfig(updatedParams, EQUALITY_OPERATOR.EXACT)\n+        ),\n+      ]),\n+    });\n"
        },
        {
          "path": "packages/utils/src/rich-filters/factories/configs/properties/shared.ts",
          "status": "added",
          "diff": "Index: packages/utils/src/rich-filters/factories/configs/properties/shared.ts\n===================================================================\n--- packages/utils/src/rich-filters/factories/configs/properties/shared.ts\t9f41e92 (parent)\n+++ packages/utils/src/rich-filters/factories/configs/properties/shared.ts\tcfb4a82 (commit)\n@@ -0,0 +1,96 @@\n+// plane imports\n+import {\n+  COMPARISON_OPERATOR,\n+  EQUALITY_OPERATOR,\n+  IProject,\n+  IUserLite,\n+  TOperatorConfigMap,\n+  TSupportedOperators,\n+} from \"@plane/types\";\n+// local imports\n+import { getDatePickerConfig, getDateRangePickerConfig, getMultiSelectConfig } from \"../core\";\n+import {\n+  createOperatorConfigEntry,\n+  IFilterIconConfig,\n+  TCreateDateFilterParams,\n+  TCreateFilterConfigParams,\n+} from \"../shared\";\n+\n+// ------------ Base User Filter Types ------------\n+\n+/**\n+ * User filter specific params\n+ */\n+export type TCreateUserFilterParams = TCreateFilterConfigParams &\n+  IFilterIconConfig<IUserLite> & {\n+    members: IUserLite[];\n+  };\n+\n+/**\n+ * Helper to get the member multi select config\n+ * @param params - The filter params\n+ * @returns The member multi select config\n+ */\n+export const getMemberMultiSelectConfig = (params: TCreateUserFilterParams, singleValueOperator: TSupportedOperators) =>\n+  getMultiSelectConfig<IUserLite, string, IUserLite>(\n+    {\n+      items: params.members,\n+      getId: (member) => member.id,\n+      getLabel: (member) => member.display_name,\n+      getValue: (member) => member.id,\n+      getIconData: (member) => member,\n+    },\n+    {\n+      singleValueOperator,\n+      ...params,\n+    },\n+    {\n+      ...params,\n+    }\n+  );\n+\n+// ------------ Date Operators ------------\n+\n+export const getSupportedDateOperators = (params: TCreateDateFilterParams): TOperatorConfigMap<Date> =>\n+  new Map([\n+    createOperatorConfigEntry(EQUALITY_OPERATOR.EXACT, params, (updatedParams) => getDatePickerConfig(updatedParams)),\n+    createOperatorConfigEntry(COMPARISON_OPERATOR.RANGE, params, (updatedParams) =>\n+      getDateRangePickerConfig(updatedParams)\n+    ),\n+  ]);\n+\n+// ------------ Project filter ------------\n+\n+/**\n+ * Project filter specific params\n+ */\n+export type TCreateProjectFilterParams = TCreateFilterConfigParams &\n+  IFilterIconConfig<IProject> & {\n+    projects: IProject[];\n+  };\n+\n+/**\n+ * Helper to get the project multi select config\n+ * @param params - The filter params\n+ * @returns The member multi select config\n+ */\n+export const getProjectMultiSelectConfig = (\n+  params: TCreateProjectFilterParams,\n+  singleValueOperator: TSupportedOperators\n+) =>\n+  getMultiSelectConfig<IProject, string, IProject>(\n+    {\n+      items: params.projects,\n+      getId: (project) => project.id,\n+      getLabel: (project) => project.name,\n+      getValue: (project) => project.id,\n+      getIconData: (project) => project,\n+    },\n+    {\n+      singleValueOperator,\n+      ...params,\n+    },\n+    {\n+      ...params,\n+    }\n+  );\n"
        },
        {
          "path": "packages/utils/src/rich-filters/factories/configs/shared.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/rich-filters/factories/configs/shared.ts\n===================================================================\n--- packages/utils/src/rich-filters/factories/configs/shared.ts\t9f41e92 (parent)\n+++ packages/utils/src/rich-filters/factories/configs/shared.ts\tcfb4a82 (commit)\n@@ -28,16 +28,23 @@\n  */\n export type TCreateFilterConfigParams = Omit<TBaseFilterFieldConfig, \"isOperatorEnabled\"> & {\n   isEnabled: boolean;\n   allowedOperators: Set<TSupportedOperators>;\n+  rightContent?: React.ReactNode; // content to display on the right side of the filter option in the dropdown\n+  tooltipContent?: React.ReactNode; // content to display when hovering over the applied filter item in the filter list\n };\n \n /**\n+ * Type for filter icon type\n+ */\n+export type TFilterIconType = string | number | boolean | object | undefined;\n+\n+/**\n  * Icon configuration for filters and their options.\n  * - filterIcon: Optional icon for the filter\n  * - getOptionIcon: Function to get icon for specific option values\n  */\n-export interface IFilterIconConfig<T extends string | number | boolean | object | undefined = undefined> {\n+export interface IFilterIconConfig<T extends TFilterIconType = undefined> {\n   filterIcon?: React.FC<React.SVGAttributes<SVGElement>>;\n   getOptionIcon?: (value: T) => React.ReactNode;\n }\n \n"
        },
        {
          "path": "packages/utils/src/rich-filters/factories/index.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/rich-filters/factories/index.ts\n===================================================================\n--- packages/utils/src/rich-filters/factories/index.ts\t9f41e92 (parent)\n+++ packages/utils/src/rich-filters/factories/index.ts\tcfb4a82 (commit)\n@@ -1,3 +1,4 @@\n export * from \"./configs/core\";\n export * from \"./configs/shared\";\n+export * from \"./configs/properties\";\n export * from \"./nodes/core\";\n"
        },
        {
          "path": "packages/utils/src/work-item-filters/configs/filters/cycle.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/work-item-filters/configs/filters/cycle.ts\n===================================================================\n--- packages/utils/src/work-item-filters/configs/filters/cycle.ts\t9f41e92 (parent)\n+++ packages/utils/src/work-item-filters/configs/filters/cycle.ts\tcfb4a82 (commit)\n@@ -59,10 +59,10 @@\n   (params: TCreateCycleFilterParams) =>\n     createFilterConfig<P, string>({\n       id: key,\n       label: \"Cycle\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       supportedOperatorConfigsMap: new Map([\n         createOperatorConfigEntry(COLLECTION_OPERATOR.IN, params, (updatedParams) =>\n           getCycleMultiSelectConfig(updatedParams, EQUALITY_OPERATOR.EXACT)\n         ),\n"
        },
        {
          "path": "packages/utils/src/work-item-filters/configs/filters/date.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/work-item-filters/configs/filters/date.ts\n===================================================================\n--- packages/utils/src/work-item-filters/configs/filters/date.ts\t9f41e92 (parent)\n+++ packages/utils/src/work-item-filters/configs/filters/date.ts\tcfb4a82 (commit)\n@@ -1,9 +1,13 @@\n // plane imports\n import { TFilterProperty } from \"@plane/types\";\n // local imports\n-import { createFilterConfig, TCreateFilterConfig, TCreateDateFilterParams } from \"../../../rich-filters\";\n-import { getSupportedDateOperators } from \"./shared\";\n+import {\n+  createFilterConfig,\n+  TCreateFilterConfig,\n+  TCreateDateFilterParams,\n+  getSupportedDateOperators,\n+} from \"../../../rich-filters\";\n \n // ------------ Date filters ------------\n \n /**\n@@ -17,10 +21,10 @@\n   (params: TCreateDateFilterParams) =>\n     createFilterConfig<P, Date>({\n       id: key,\n       label: \"Start date\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       allowMultipleFilters: true,\n       supportedOperatorConfigsMap: getSupportedDateOperators(params),\n     });\n \n@@ -35,9 +39,45 @@\n   (params: TCreateDateFilterParams) =>\n     createFilterConfig<P, Date>({\n       id: key,\n       label: \"Target date\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       allowMultipleFilters: true,\n       supportedOperatorConfigsMap: getSupportedDateOperators(params),\n     });\n+\n+/**\n+ * Get the created at filter config\n+ * @template K - The filter key\n+ * @param key - The filter key to use\n+ * @returns A function that takes parameters and returns the created at filter config\n+ */\n+export const getCreatedAtFilterConfig =\n+  <P extends TFilterProperty>(key: P): TCreateFilterConfig<P, TCreateDateFilterParams> =>\n+  (params: TCreateDateFilterParams) =>\n+    createFilterConfig<P, Date>({\n+      id: key,\n+      label: \"Created at\",\n+      ...params,\n+      icon: params.filterIcon,\n+      allowMultipleFilters: true,\n+      supportedOperatorConfigsMap: getSupportedDateOperators(params),\n+    });\n+\n+/**\n+ * Get the updated at filter config\n+ * @template K - The filter key\n+ * @param key - The filter key to use\n+ * @returns A function that takes parameters and returns the updated at filter config\n+ */\n+export const getUpdatedAtFilterConfig =\n+  <P extends TFilterProperty>(key: P): TCreateFilterConfig<P, TCreateDateFilterParams> =>\n+  (params: TCreateDateFilterParams) =>\n+    createFilterConfig<P, Date>({\n+      id: key,\n+      label: \"Updated at\",\n+      ...params,\n+      icon: params.filterIcon,\n+      allowMultipleFilters: true,\n+      supportedOperatorConfigsMap: getSupportedDateOperators(params),\n+    });\n"
        },
        {
          "path": "packages/utils/src/work-item-filters/configs/filters/label.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/work-item-filters/configs/filters/label.ts\n===================================================================\n--- packages/utils/src/work-item-filters/configs/filters/label.ts\t9f41e92 (parent)\n+++ packages/utils/src/work-item-filters/configs/filters/label.ts\tcfb4a82 (commit)\n@@ -58,10 +58,10 @@\n   (params: TCreateLabelFilterParams) =>\n     createFilterConfig<P, string>({\n       id: key,\n       label: \"Label\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       supportedOperatorConfigsMap: new Map([\n         createOperatorConfigEntry(COLLECTION_OPERATOR.IN, params, (updatedParams) =>\n           getLabelMultiSelectConfig(updatedParams, EQUALITY_OPERATOR.EXACT)\n         ),\n"
        },
        {
          "path": "packages/utils/src/work-item-filters/configs/filters/module.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/work-item-filters/configs/filters/module.ts\n===================================================================\n--- packages/utils/src/work-item-filters/configs/filters/module.ts\t9f41e92 (parent)\n+++ packages/utils/src/work-item-filters/configs/filters/module.ts\tcfb4a82 (commit)\n@@ -52,10 +52,10 @@\n   (params: TCreateModuleFilterParams) =>\n     createFilterConfig<P, string>({\n       id: key,\n       label: \"Module\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       supportedOperatorConfigsMap: new Map([\n         createOperatorConfigEntry(COLLECTION_OPERATOR.IN, params, (updatedParams) =>\n           getModuleMultiSelectConfig(updatedParams)\n         ),\n"
        },
        {
          "path": "packages/utils/src/work-item-filters/configs/filters/priority.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/work-item-filters/configs/filters/priority.ts\n===================================================================\n--- packages/utils/src/work-item-filters/configs/filters/priority.ts\t9f41e92 (parent)\n+++ packages/utils/src/work-item-filters/configs/filters/priority.ts\tcfb4a82 (commit)\n@@ -55,10 +55,10 @@\n   (params: TCreatePriorityFilterParams) =>\n     createFilterConfig<P, TIssuePriorities>({\n       id: key,\n       label: \"Priority\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       supportedOperatorConfigsMap: new Map([\n         createOperatorConfigEntry(COLLECTION_OPERATOR.IN, params, (updatedParams) =>\n           getPriorityMultiSelectConfig(updatedParams, EQUALITY_OPERATOR.EXACT)\n         ),\n"
        },
        {
          "path": "packages/utils/src/work-item-filters/configs/filters/project.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/work-item-filters/configs/filters/project.ts\n===================================================================\n--- packages/utils/src/work-item-filters/configs/filters/project.ts\t9f41e92 (parent)\n+++ packages/utils/src/work-item-filters/configs/filters/project.ts\tcfb4a82 (commit)\n@@ -1,9 +1,14 @@\n // plane imports\n import { EQUALITY_OPERATOR, TFilterProperty, COLLECTION_OPERATOR } from \"@plane/types\";\n // local imports\n-import { createFilterConfig, createOperatorConfigEntry, TCreateFilterConfig } from \"../../../rich-filters\";\n-import { getProjectMultiSelectConfig, TCreateProjectFilterParams } from \"./shared\";\n+import {\n+  createFilterConfig,\n+  createOperatorConfigEntry,\n+  getProjectMultiSelectConfig,\n+  TCreateFilterConfig,\n+  TCreateProjectFilterParams,\n+} from \"../../../rich-filters\";\n \n // ------------ Project filter ------------\n \n /**\n@@ -17,10 +22,10 @@\n   (params: TCreateProjectFilterParams) =>\n     createFilterConfig<P, string>({\n       id: key,\n       label: \"Projects\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       supportedOperatorConfigsMap: new Map([\n         createOperatorConfigEntry(COLLECTION_OPERATOR.IN, params, (updatedParams) =>\n           getProjectMultiSelectConfig(updatedParams, EQUALITY_OPERATOR.EXACT)\n         ),\n"
        },
        {
          "path": "packages/utils/src/work-item-filters/configs/filters/state.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/work-item-filters/configs/filters/state.ts\n===================================================================\n--- packages/utils/src/work-item-filters/configs/filters/state.ts\t9f41e92 (parent)\n+++ packages/utils/src/work-item-filters/configs/filters/state.ts\tcfb4a82 (commit)\n@@ -62,10 +62,10 @@\n   (params: TCreateStateGroupFilterParams) =>\n     createFilterConfig<P, TStateGroups>({\n       id: key,\n       label: \"State Group\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       supportedOperatorConfigsMap: new Map([\n         createOperatorConfigEntry(COLLECTION_OPERATOR.IN, params, (updatedParams) =>\n           getStateGroupMultiSelectConfig(updatedParams, EQUALITY_OPERATOR.EXACT)\n         ),\n@@ -86,9 +86,9 @@\n  * Helper to get the state multi select config\n  * @param params - The filter params\n  * @returns The state multi select config\n  */\n-export const getStateMultiSelectConfig = (params: TCreateStateFilterParams) =>\n+export const getStateMultiSelectConfig = (params: TCreateStateFilterParams, singleValueOperator: TSupportedOperators) =>\n   getMultiSelectConfig<IState, string, IState>(\n     {\n       items: params.states,\n       getId: (state) => state.id,\n@@ -96,9 +96,9 @@\n       getValue: (state) => state.id,\n       getIconData: (state) => state,\n     },\n     {\n-      singleValueOperator: EQUALITY_OPERATOR.EXACT,\n+      singleValueOperator,\n       ...params,\n     },\n     {\n       ...params,\n@@ -116,12 +116,12 @@\n   (params: TCreateStateFilterParams) =>\n     createFilterConfig<P, string>({\n       id: key,\n       label: \"State\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       supportedOperatorConfigsMap: new Map([\n         createOperatorConfigEntry(COLLECTION_OPERATOR.IN, params, (updatedParams) =>\n-          getStateMultiSelectConfig(updatedParams)\n+          getStateMultiSelectConfig(updatedParams, EQUALITY_OPERATOR.EXACT)\n         ),\n       ]),\n     });\n"
        },
        {
          "path": "packages/utils/src/work-item-filters/configs/filters/user.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/work-item-filters/configs/filters/user.ts\n===================================================================\n--- packages/utils/src/work-item-filters/configs/filters/user.ts\t9f41e92 (parent)\n+++ packages/utils/src/work-item-filters/configs/filters/user.ts\tcfb4a82 (commit)\n@@ -1,49 +1,15 @@\n // plane imports\n-import { EQUALITY_OPERATOR, IUserLite, TFilterProperty, COLLECTION_OPERATOR } from \"@plane/types\";\n+import { EQUALITY_OPERATOR, TFilterProperty, COLLECTION_OPERATOR } from \"@plane/types\";\n // local imports\n import {\n   createFilterConfig,\n-  TCreateFilterConfigParams,\n-  IFilterIconConfig,\n   TCreateFilterConfig,\n-  getMultiSelectConfig,\n   createOperatorConfigEntry,\n+  getMemberMultiSelectConfig,\n+  TCreateUserFilterParams,\n } from \"../../../rich-filters\";\n \n-// ------------ Base User Filter Types ------------\n-\n-/**\n- * User filter specific params\n- */\n-export type TCreateUserFilterParams = TCreateFilterConfigParams &\n-  IFilterIconConfig<IUserLite> & {\n-    members: IUserLite[];\n-  };\n-\n-/**\n- * Helper to get the member multi select config\n- * @param params - The filter params\n- * @returns The member multi select config\n- */\n-export const getMemberMultiSelectConfig = (params: TCreateUserFilterParams) =>\n-  getMultiSelectConfig<IUserLite, string, IUserLite>(\n-    {\n-      items: params.members,\n-      getId: (member) => member.id,\n-      getLabel: (member) => member.display_name,\n-      getValue: (member) => member.id,\n-      getIconData: (member) => member,\n-    },\n-    {\n-      singleValueOperator: EQUALITY_OPERATOR.EXACT,\n-      ...params,\n-    },\n-    {\n-      ...params,\n-    }\n-  );\n-\n // ------------ Assignee filter ------------\n \n /**\n  * Assignee filter specific params\n@@ -61,13 +27,13 @@\n   (params: TCreateAssigneeFilterParams) =>\n     createFilterConfig<P, string>({\n       id: key,\n       label: \"Assignees\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       supportedOperatorConfigsMap: new Map([\n         createOperatorConfigEntry(COLLECTION_OPERATOR.IN, params, (updatedParams) =>\n-          getMemberMultiSelectConfig(updatedParams)\n+          getMemberMultiSelectConfig(updatedParams, EQUALITY_OPERATOR.EXACT)\n         ),\n       ]),\n     });\n \n@@ -89,13 +55,13 @@\n   (params: TCreateMentionFilterParams) =>\n     createFilterConfig<P, string>({\n       id: key,\n       label: \"Mentions\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       supportedOperatorConfigsMap: new Map([\n         createOperatorConfigEntry(COLLECTION_OPERATOR.IN, params, (updatedParams) =>\n-          getMemberMultiSelectConfig(updatedParams)\n+          getMemberMultiSelectConfig(updatedParams, EQUALITY_OPERATOR.EXACT)\n         ),\n       ]),\n     });\n \n@@ -117,13 +83,13 @@\n   (params: TCreateCreatedByFilterParams) =>\n     createFilterConfig<P, string>({\n       id: key,\n       label: \"Created by\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       supportedOperatorConfigsMap: new Map([\n         createOperatorConfigEntry(COLLECTION_OPERATOR.IN, params, (updatedParams) =>\n-          getMemberMultiSelectConfig(updatedParams)\n+          getMemberMultiSelectConfig(updatedParams, EQUALITY_OPERATOR.EXACT)\n         ),\n       ]),\n     });\n \n@@ -145,12 +111,12 @@\n   (params: TCreateSubscriberFilterParams) =>\n     createFilterConfig<P, string>({\n       id: key,\n       label: \"Subscriber\",\n+      ...params,\n       icon: params.filterIcon,\n-      isEnabled: params.isEnabled,\n       supportedOperatorConfigsMap: new Map([\n         createOperatorConfigEntry(COLLECTION_OPERATOR.IN, params, (updatedParams) =>\n-          getMemberMultiSelectConfig(updatedParams)\n+          getMemberMultiSelectConfig(updatedParams, EQUALITY_OPERATOR.EXACT)\n         ),\n       ]),\n     });\n"
        }
      ]
    },
    {
      "id": "fix-date-properties",
      "sha": "912246c592dc8caef1c3513deef82cde2316f696",
      "parentSha": "4a065e14d04cfa858990049e78c27c0af75cd02a",
      "spec": "Goal: Correct the date properties rendering and interaction for issue properties and sub-issues so that a merged date range control is shown only when both dates are present and enabled, and otherwise individual date pickers are shown. Apply overdue highlighting and enforce logical min/max constraints.\n\nScope: Update the following components:\n1) web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/properties.tsx\n2) web/core/components/issues/issue-layouts/properties/all-properties.tsx\n\nRequired behaviors and structure:\nA. Conditional rendering of date controls\n- Determine a boolean isDateRangeEnabled that is true only when:\n  - issue.start_date is set AND issue.target_date is set AND\n  - displayProperties.start_date and displayProperties.due_date are both enabled.\n- Wrap a merged date range UI in WithDisplayPropertiesHOC with displayPropertyKey=[\"start_date\", \"due_date\"], and set shouldRenderProperty to return isDateRangeEnabled. This merged UI uses a DateRangeDropdown with mergeDates enabled and isClearable true.\n- Add two additional WithDisplayPropertiesHOC blocks for start_date and due_date, each with shouldRenderProperty returning !isDateRangeEnabled. Each block renders a single DateDropdown for that date.\n\nB. Overdue highlighting for due/target date\n- Use useProjectState().getStateById(issue.state_id) to get the state group and compute shouldHighlightIssueDueDate(issue.target_date, stateDetails?.group).\n- If shouldHighlightIssueDueDate returns true, apply a red text class to the due date button for both the merged DateRangeDropdown and the single due DateDropdown. Do not highlight when state is completed or cancelled.\n\nC. Date constraints and values\n- Compute minDate and maxDate using getDate(issue.start_date) and getDate(issue.target_date) respectively; do not mutate Date objects directly.\n- In the single start DateDropdown, set maxDate to the computed target date; in the single due DateDropdown, set minDate to the computed start date.\n- The merged DateRangeDropdowns value should be { from: getDate(issue.start_date) or undefined, to: getDate(issue.target_date) or undefined } and onSelect should update both dates via the existing handlers.\n\nD. Icons, i18n placeholders, and UI classes\n- Use CalendarClock for the start date and CalendarCheck2 for the due date icons on the single DateDropdowns.\n- Use the i18n strings for placeholders: t(\"common.order_by.start_date\") and t(\"common.order_by.due_date\"). Ensure useTranslation is initialized in the component.\n- Set DateDropdown buttonVariant to border-with-text when a date is present, otherwise border-without-text. For merged DateRangeDropdown use an appropriate border-with/out-text variant determined by presence of any date.\n- Add clearIconClassName to DateRangeDropdown (light text color for the clear icon) and optionsClassName to DateDropdown (set z-index classes to avoid layering issues: e.g., \"z-10\" in all-properties, \"z-30\" in sub-issues).\n- Keep existing tooltip behavior: showTooltip should be enabled; for DateRangeDropdown provide a \"Date Range\" heading (or localized equivalent where used) and renderPlaceholder=false when merged.\n\nE. Event handling and disabled state\n- Preserve existing handlers for updating dates (e.g., handleStartDate, handleTargetDate, handleEventPropagation) and call them from the new components appropriately.\n- Respect the read-only/disabled state already used in each component: in sub-issues pass the inverted disabled boolean as in existing usage; in all-properties pass isReadOnly to the DateDropdown/DateRangeDropdown.\n- Maintain renderByDefault behavior for mobile where present (all-properties should render by default on mobile for dropdowns).\n\nF. Imports\n- Add necessary imports: useMemo (React), CalendarCheck2/CalendarClock (lucide-react), useTranslation (@plane/i18n), DateDropdown from @/components/dropdowns, shouldHighlightIssueDueDate (from @plane/utils or the projects helper barrel), and useProjectState from @/hooks/store/use-project-state. Ensure existing date utilities (getDate, renderFormattedPayloadDate) remain where needed.\n\nAcceptance criteria:\n- When both start_date and due_date exist and are enabled in display properties, a single merged DateRangeDropdown is shown; clearing it clears both dates.\n- When either date is missing or one of the display properties is disabled, the UI shows two separate DateDropdowns (one for start, one for due) if their respective display property is enabled.\n- The due date control (merged and single) visually highlights with red text if due is overdue and the state group is not completed/cancelled.\n- Selecting start date cannot go beyond current due date; selecting due date cannot precede current start date.\n- Placeholders are localized, icons appear as specified, tooltips render correctly, and z-index layering issues are resolved.\n- No runtime errors from missing imports; the components compile and render as expected.",
      "prompt": "Update the issue date properties UI so that it intelligently toggles between a merged date range control and separate start/due controls, and highlights overdue due dates. When both dates are set and both display toggles are enabled, show a single date range selector with a merged display and a clear action; otherwise, show individual start and due date pickers. Enforce logical min/max constraints between start and due dates, use appropriate icons and localized placeholders, maintain tooltip behavior, and apply a red text highlight to the due date when overdue for non-completed/cancelled states. Apply these improvements in the components that render issue properties and sub-issue list item properties, keeping current event handlers and disabled/read-only behavior intact.",
      "supplementalFiles": [
        "web/core/components/dropdowns/date.tsx",
        "web/core/components/dropdowns/date-range.tsx",
        "web/core/components/dropdowns/index.ts",
        "web/core/components/issues/issue-layouts/properties/with-display-properties-HOC.tsx",
        "web/core/hooks/store/use-project-state.ts",
        "space/helpers/issue.helper.ts",
        "packages/ui/src/calendar.tsx"
      ],
      "fileDiffs": [
        {
          "path": "web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/properties.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/properties.tsx\n===================================================================\n--- web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/properties.tsx\t4a065e1 (parent)\n+++ web/core/components/issues/issue-detail-widgets/sub-issues/issues-list/properties.tsx\t912246c (commit)\n@@ -1,13 +1,22 @@\n // plane imports\n-import { SyntheticEvent } from \"react\";\n+import { SyntheticEvent, useMemo } from \"react\";\n import { observer } from \"mobx-react\";\n+import { CalendarCheck2, CalendarClock } from \"lucide-react\";\n+import { useTranslation } from \"@plane/i18n\";\n import { IIssueDisplayProperties, TIssue } from \"@plane/types\";\n-import { getDate, renderFormattedPayloadDate } from \"@plane/utils\";\n+import { getDate, renderFormattedPayloadDate, shouldHighlightIssueDueDate } from \"@plane/utils\";\n // components\n-import { PriorityDropdown, MemberDropdown, StateDropdown, DateRangeDropdown } from \"@/components/dropdowns\";\n+import {\n+  PriorityDropdown,\n+  MemberDropdown,\n+  StateDropdown,\n+  DateRangeDropdown,\n+  DateDropdown,\n+} from \"@/components/dropdowns\";\n // hooks\n import { WithDisplayPropertiesHOC } from \"@/components/issues/issue-layouts/properties/with-display-properties-HOC\";\n+import { useProjectState } from \"@/hooks/store/use-project-state\";\n \n type Props = {\n   workspaceSlug: string;\n   parentIssueId: string;\n@@ -26,8 +35,10 @@\n };\n \n export const SubIssuesListItemProperties: React.FC<Props> = observer((props) => {\n   const { workspaceSlug, parentIssueId, issueId, disabled, updateSubIssue, displayProperties, issue } = props;\n+  const { t } = useTranslation();\n+  const { getStateById } = useProjectState();\n \n   const handleEventPropagation = (e: SyntheticEvent<HTMLDivElement>) => {\n     e.stopPropagation();\n     e.preventDefault();\n@@ -48,12 +59,24 @@\n       });\n     }\n   };\n \n+  //derived values\n+  const stateDetails = useMemo(() => getStateById(issue.state_id), [getStateById, issue.state_id]);\n+  const shouldHighlight = useMemo(\n+    () => shouldHighlightIssueDueDate(issue.target_date, stateDetails?.group),\n+    [issue.target_date, stateDetails?.group]\n+  );\n+  // date range is enabled only when both dates are available and both dates are enabled\n+  const isDateRangeEnabled: boolean = Boolean(\n+    issue.start_date && issue.target_date && displayProperties?.start_date && displayProperties?.due_date\n+  );\n+\n   if (!displayProperties) return <></>;\n \n   const maxDate = getDate(issue.target_date);\n-  maxDate?.setDate(maxDate.getDate());\n+  const minDate = getDate(issue.start_date);\n+\n   return (\n     <div className=\"relative flex items-center gap-2\">\n       <WithDisplayPropertiesHOC displayProperties={displayProperties} displayPropertyKey=\"state\">\n         <div className=\"h-5 flex-shrink-0\">\n@@ -103,9 +126,9 @@\n       {/* merged dates */}\n       <WithDisplayPropertiesHOC\n         displayProperties={displayProperties}\n         displayPropertyKey={[\"start_date\", \"due_date\"]}\n-        shouldRenderProperty={(properties) => !!(properties.start_date || properties.due_date)}\n+        shouldRenderProperty={() => isDateRangeEnabled}\n       >\n         <div className=\"h-5\" onFocus={handleEventPropagation} onClick={handleEventPropagation}>\n           <DateRangeDropdown\n             value={{\n@@ -121,16 +144,61 @@\n             }}\n             isClearable\n             mergeDates\n             buttonVariant={issue.start_date || issue.target_date ? \"border-with-text\" : \"border-without-text\"}\n+            buttonClassName={shouldHighlight ? \"text-red-500\" : \"\"}\n             disabled={!disabled}\n             showTooltip\n             customTooltipHeading=\"Date Range\"\n             renderPlaceholder={false}\n           />\n         </div>\n       </WithDisplayPropertiesHOC>\n \n+      {/* start date */}\n+      <WithDisplayPropertiesHOC\n+        displayProperties={displayProperties}\n+        displayPropertyKey=\"start_date\"\n+        shouldRenderProperty={() => !isDateRangeEnabled}\n+      >\n+        <div className=\"h-5\">\n+          <DateDropdown\n+            value={issue.start_date ?? null}\n+            onChange={handleStartDate}\n+            maxDate={maxDate}\n+            placeholder={t(\"common.order_by.start_date\")}\n+            icon={<CalendarClock className=\"h-3 w-3 flex-shrink-0\" />}\n+            buttonVariant={issue.start_date ? \"border-with-text\" : \"border-without-text\"}\n+            optionsClassName=\"z-30\"\n+            disabled={!disabled}\n+            showTooltip\n+          />\n+        </div>\n+      </WithDisplayPropertiesHOC>\n+\n+      {/* target/due date */}\n+      <WithDisplayPropertiesHOC\n+        displayProperties={displayProperties}\n+        displayPropertyKey=\"due_date\"\n+        shouldRenderProperty={() => !isDateRangeEnabled}\n+      >\n+        <div className=\"h-5\">\n+          <DateDropdown\n+            value={issue?.target_date ?? null}\n+            onChange={handleTargetDate}\n+            minDate={minDate}\n+            placeholder={t(\"common.order_by.due_date\")}\n+            icon={<CalendarCheck2 className=\"h-3 w-3 flex-shrink-0\" />}\n+            buttonVariant={issue.target_date ? \"border-with-text\" : \"border-without-text\"}\n+            buttonClassName={shouldHighlight ? \"text-red-500\" : \"\"}\n+            clearIconClassName=\"text-custom-text-100\"\n+            optionsClassName=\"z-30\"\n+            disabled={!disabled}\n+            showTooltip\n+          />\n+        </div>\n+      </WithDisplayPropertiesHOC>\n+\n       <WithDisplayPropertiesHOC displayProperties={displayProperties} displayPropertyKey=\"assignee\">\n         <div className=\"h-5 flex-shrink-0\">\n           <MemberDropdown\n             value={issue.assignee_ids}\n"
        },
        {
          "path": "web/core/components/issues/issue-layouts/properties/all-properties.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/issues/issue-layouts/properties/all-properties.tsx\n===================================================================\n--- web/core/components/issues/issue-layouts/properties/all-properties.tsx\t4a065e1 (parent)\n+++ web/core/components/issues/issue-layouts/properties/all-properties.tsx\t912246c (commit)\n@@ -4,9 +4,9 @@\n import xor from \"lodash/xor\";\n import { observer } from \"mobx-react\";\n import { useParams, usePathname } from \"next/navigation\";\n // icons\n-import { Layers, Link, Paperclip } from \"lucide-react\";\n+import { CalendarCheck2, CalendarClock, Layers, Link, Paperclip } from \"lucide-react\";\n // types\n import { WORK_ITEM_TRACKER_EVENTS } from \"@plane/constants\";\n // i18n\n import { useTranslation } from \"@plane/i18n\";\n@@ -28,8 +28,9 @@\n   ModuleDropdown,\n   CycleDropdown,\n   StateDropdown,\n   DateRangeDropdown,\n+  DateDropdown,\n } from \"@/components/dropdowns\";\n // constants\n // helpers\n // hooks\n@@ -266,10 +267,18 @@\n   const redirectToIssueDetail = () => router.push(`${workItemLink}#sub-issues`);\n \n   if (!displayProperties || !issue.project_id) return null;\n \n+  // date range is enabled only when both dates are available and both dates are enabled\n+  const isDateRangeEnabled: boolean = Boolean(\n+    issue.start_date && issue.target_date && displayProperties.start_date && displayProperties.due_date\n+  );\n+\n   const defaultLabelOptions = issue?.label_ids?.map((id) => labelMap[id]) || [];\n \n+  const minDate = getDate(issue.start_date);\n+  const maxDate = getDate(issue.target_date);\n+\n   const handleEventPropagation = (e: SyntheticEvent<HTMLDivElement>) => {\n     e.stopPropagation();\n     e.preventDefault();\n   };\n@@ -311,9 +320,9 @@\n       {/* merged dates */}\n       <WithDisplayPropertiesHOC\n         displayProperties={displayProperties}\n         displayPropertyKey={[\"start_date\", \"due_date\"]}\n-        shouldRenderProperty={(properties) => !!(properties.start_date || properties.due_date)}\n+        shouldRenderProperty={() => isDateRangeEnabled}\n       >\n         <div className=\"h-5\" onFocus={handleEventPropagation} onClick={handleEventPropagation}>\n           <DateRangeDropdown\n             value={{\n@@ -330,8 +339,9 @@\n             isClearable\n             mergeDates\n             buttonVariant={issue.start_date || issue.target_date ? \"border-with-text\" : \"border-without-text\"}\n             buttonClassName={shouldHighlightIssueDueDate(issue.target_date, stateDetails?.group) ? \"text-red-500\" : \"\"}\n+            clearIconClassName=\"!text-custom-text-100\"\n             disabled={isReadOnly}\n             renderByDefault={isMobile}\n             showTooltip\n             renderPlaceholder={false}\n@@ -339,8 +349,54 @@\n           />\n         </div>\n       </WithDisplayPropertiesHOC>\n \n+      {/* start date */}\n+      <WithDisplayPropertiesHOC\n+        displayProperties={displayProperties}\n+        displayPropertyKey=\"start_date\"\n+        shouldRenderProperty={() => !isDateRangeEnabled}\n+      >\n+        <div className=\"h-5\" onFocus={handleEventPropagation} onClick={handleEventPropagation}>\n+          <DateDropdown\n+            value={issue.start_date ?? null}\n+            onChange={handleStartDate}\n+            maxDate={maxDate}\n+            placeholder={t(\"common.order_by.start_date\")}\n+            icon={<CalendarClock className=\"h-3 w-3 flex-shrink-0\" />}\n+            buttonVariant={issue.start_date ? \"border-with-text\" : \"border-without-text\"}\n+            optionsClassName=\"z-10\"\n+            disabled={isReadOnly}\n+            renderByDefault={isMobile}\n+            showTooltip\n+          />\n+        </div>\n+      </WithDisplayPropertiesHOC>\n+\n+      {/* target/due date */}\n+      <WithDisplayPropertiesHOC\n+        displayProperties={displayProperties}\n+        displayPropertyKey=\"due_date\"\n+        shouldRenderProperty={() => !isDateRangeEnabled}\n+      >\n+        <div className=\"h-5\" onFocus={handleEventPropagation} onClick={handleEventPropagation}>\n+          <DateDropdown\n+            value={issue?.target_date ?? null}\n+            onChange={handleTargetDate}\n+            minDate={minDate}\n+            placeholder={t(\"common.order_by.due_date\")}\n+            icon={<CalendarCheck2 className=\"h-3 w-3 flex-shrink-0\" />}\n+            buttonVariant={issue.target_date ? \"border-with-text\" : \"border-without-text\"}\n+            buttonClassName={shouldHighlightIssueDueDate(issue.target_date, stateDetails?.group) ? \"text-red-500\" : \"\"}\n+            clearIconClassName=\"!text-custom-text-100\"\n+            optionsClassName=\"z-10\"\n+            disabled={isReadOnly}\n+            renderByDefault={isMobile}\n+            showTooltip\n+          />\n+        </div>\n+      </WithDisplayPropertiesHOC>\n+\n       {/* assignee */}\n       <WithDisplayPropertiesHOC displayProperties={displayProperties} displayPropertyKey=\"assignee\">\n         <div className=\"h-5\" onFocus={handleEventPropagation} onClick={handleEventPropagation}>\n           <MemberDropdown\n"
        }
      ]
    },
    {
      "id": "fix-emoji-fallback",
      "sha": "ab79a5da10f2d116e393b32ec9efb2bac02fda5a",
      "parentSha": "a2a62e2731728f2954259d002a090d310f17a6a2",
      "spec": "Implement a local Emoji extension and integrate it across the editor and read-only editor with controlled fallback behavior.\n\n1) Add a local Emoji Node extension\n- File: packages/editor/src/core/extensions/emoji/emoji.ts (new)\n- Create a TipTap Node extension named \"emoji\" with the following observable behavior:\n  - Node characteristics: inline, group inline, not selectable; single attribute \"name\" persisted via data-name and data-type attributes on a span.\n  - Rendering: produce a span[data-type=\"emoji\"][data-name=\"...\"] and render the unicode emoji if available; otherwise render \":shortcode:\" as text. Do not render fallback images in HTML output (explicitly avoid using fallback image rendering here).\n  - Text rendering: render unicode emoji if available; otherwise \":shortcode:\".\n  - Storage: expose storage with two keys:\n    - emojis: EmojiItem[] populated from extension options\n    - isSupported: function that determines whether a given emoji is natively supported on the current platform using is-emoji-supported against a representative emoji for each unicode version (precompute a support map by emoji version).\n  - Options defaults: use the emoji list from @tiptap/extension-emoji (emojis), set enableEmoticons=false, forceFallbackImages=false, and provide a suggestion config (char \":\") using a PluginKey(\"emojiSuggestion\"). Command should insert the emoji node and a trailing space, preserving marks.\n  - Commands: add setEmoji(shortcode) to insert an emoji node by shortcode and preserve marks.\n  - Input rules: convert :shortcode: typed at the end of a word into an emoji node; optionally convert emoticons into emoji nodes when enableEmoticons is true.\n  - Paste rules: convert :shortcode: on paste into emoji nodes without changing selection.\n  - ProseMirror plugins:\n    - Integrate the Suggestion plugin with the provided suggestion options.\n    - Add a plugin to simulate double-click selection for emoji nodes.\n    - Append transaction logic: on every doc change, find unicode emojis in changed text ranges (skip within code blocks) using emoji-regex, convert them to emoji nodes by mapping unicode to a shortcode, and preserve marks.\n\n2) Update the Emoji extension wiring and markdown serialization\n- File: packages/editor/src/core/extensions/emoji/extension.ts\n- Import { Emoji } from \"./emoji\" and only import gitHubEmojis, shortcodeToEmoji from @tiptap/extension-emoji.\n- Extend the local Emoji to override storage to include a markdown serializer that:\n  - Writes the unicode emoji if available.\n  - Else, if a fallbackImage exists, write a markdown image on its own line with alt text \"{name}-{firstShortcode}\" and the fallback image URL.\n  - Else, write the shortcode form :name:.\n- Configure the extension with emojis: gitHubEmojis, suggestion: local suggestion import, enableEmoticons: true.\n\n3) Filter emoji suggestions to avoid fallback images\n- File: packages/editor/src/core/extensions/emoji/suggestion.ts\n- In items(), retrieve emojis and isSupported from getExtensionStorage(editor, CORE_EXTENSIONS.EMOJI) and derive a filteredEmojis list that excludes any emoji that would render via a fallback image (no unicode support or no unicode value but has fallbackImage). Use this filteredEmojis list for both:\n  - default suggestions when query is empty (map DEFAULT_EMOJIS to existing items, limit to 5)\n  - search results when query is non-empty (filter by shortcode or tag startsWith query, limit to 5)\n- Keep the dropbar tracking and ReactRenderer logic unchanged.\n\n4) Include Emoji extension in the read-only editor\n- File: packages/editor/src/core/extensions/read-only-extensions.ts\n- Import { EmojiExtension } from \"./emoji/extension\".\n- Add EmojiExtension to the extensions array (in the same section as core extensions right after StarterKit.configure), so that read-only mode correctly parses and renders emoji nodes.\n\n5) Update storage type mapping to the local Emoji storage\n- File: packages/editor/src/ce/types/storage.ts\n- Update the EmojiStorage type import to the local type exported from packages/editor/src/core/extensions/emoji/emoji.ts so that editor.storage[CORE_EXTENSIONS.EMOJI] reflects the new storage shape (emojis and isSupported), avoiding type mismatches where getExtensionStorage is used.\n\nNotes:\n- Use CORE_EXTENSIONS and getExtensionStorage to access the emoji storage consistently.\n- Ensure the suggestion char remains ':' and that insertion preserves marks and inserts a trailing space.\n- Avoid rendering fallback images in the nodes HTML output; the markdown serializer remains responsible for emitting fallback images when unicode is unavailable.",
      "prompt": "Add a local emoji extension to the editor that prefers unicode rendering and avoids showing fallback-image emojis in the suggestion list. The extension should expose storage that includes the emoji list and a function to detect platform support, convert :shortcode: and emoticons via input/paste rules, and replace unicode emoji characters with emoji nodes on document changes (except inside code blocks). Update serialization to output unicode if available, otherwise a markdown image using the emojis fallback asset, and fall back to :shortcode: if neither applies. Integrate this emoji extension into both the full editor and the read-only editor, and update the emoji suggestion logic to only display emojis that wont render as fallback images, keeping the rest of the suggestion behavior the same.",
      "supplementalFiles": [
        "packages/editor/src/core/extensions/extensions.ts",
        "packages/editor/src/core/constants/extension.ts",
        "packages/editor/src/core/helpers/get-extension-storage.ts",
        "packages/editor/src/core/extensions/emoji/components/emojis-list.tsx",
        "packages/editor/src/core/hooks/use-editor.ts",
        "packages/editor/src/core/hooks/use-read-only-editor.ts"
      ],
      "fileDiffs": [
        {
          "path": "packages/editor/src/core/extensions/emoji/emoji.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/emoji/emoji.ts\n===================================================================\n--- packages/editor/src/core/extensions/emoji/emoji.ts\ta2a62e2 (parent)\n+++ packages/editor/src/core/extensions/emoji/emoji.ts\tab79a5d (commit)\n@@ -0,0 +1,444 @@\n+import {\n+  combineTransactionSteps,\n+  escapeForRegEx,\n+  findChildrenInRange,\n+  getChangedRanges,\n+  InputRule,\n+  mergeAttributes,\n+  Node,\n+  nodeInputRule,\n+  PasteRule,\n+  removeDuplicates,\n+} from \"@tiptap/core\";\n+import { emojis, emojiToShortcode, shortcodeToEmoji } from \"@tiptap/extension-emoji\";\n+import { Plugin, PluginKey, Transaction } from \"@tiptap/pm/state\";\n+import Suggestion, { SuggestionOptions } from \"@tiptap/suggestion\";\n+import emojiRegex from \"emoji-regex\";\n+import { isEmojiSupported } from \"is-emoji-supported\";\n+\n+declare module \"@tiptap/core\" {\n+  interface Commands<ReturnType> {\n+    emoji: {\n+      /**\n+       * Add an emoji\n+       */\n+      setEmoji: (shortcode: string) => ReturnType;\n+    };\n+  }\n+}\n+\n+export type EmojiItem = {\n+  /**\n+   * A unique name of the emoji which will be stored as attribute\n+   */\n+  name: string;\n+  /**\n+   * The emoji unicode character\n+   */\n+  emoji?: string;\n+  /**\n+   * A list of unique shortcodes that are used by input rules to find the emoji\n+   */\n+  shortcodes: string[];\n+  /**\n+   * A list of tags that can help for searching emojis\n+   */\n+  tags: string[];\n+  /**\n+   * A name that can help to group emojis\n+   */\n+  group?: string;\n+  /**\n+   * A list of unique emoticons\n+   */\n+  emoticons?: string[];\n+  /**\n+   * The unicode version the emoji was introduced\n+   */\n+  version?: number;\n+  /**\n+   * A fallback image if the current system doesn't support the emoji or for custom emojis\n+   */\n+  fallbackImage?: string;\n+  /**\n+   * Store some custom data\n+   */\n+  [key: string]: any;\n+};\n+\n+export type EmojiOptions = {\n+  HTMLAttributes: Record<string, any>;\n+  emojis: EmojiItem[];\n+  enableEmoticons: boolean;\n+  forceFallbackImages: boolean;\n+  suggestion: Omit<SuggestionOptions, \"editor\">;\n+};\n+\n+export type EmojiStorage = {\n+  emojis: EmojiItem[];\n+  isSupported: (item: EmojiItem) => boolean;\n+};\n+\n+export const EmojiSuggestionPluginKey = new PluginKey(\"emojiSuggestion\");\n+\n+export const inputRegex = /:([a-zA-Z0-9_+-]+):$/;\n+\n+export const pasteRegex = /:([a-zA-Z0-9_+-]+):/g;\n+\n+export const Emoji = Node.create<EmojiOptions, EmojiStorage>({\n+  name: \"emoji\",\n+\n+  inline: true,\n+\n+  group: \"inline\",\n+\n+  selectable: false,\n+\n+  addOptions() {\n+    return {\n+      HTMLAttributes: {},\n+      // emojis: ,\n+      emojis: emojis,\n+      enableEmoticons: false,\n+      forceFallbackImages: false,\n+      suggestion: {\n+        char: \":\",\n+        pluginKey: EmojiSuggestionPluginKey,\n+        command: ({ editor, range, props }) => {\n+          // increase range.to by one when the next node is of type \"text\"\n+          // and starts with a space character\n+          const nodeAfter = editor.view.state.selection.$to.nodeAfter;\n+          const overrideSpace = nodeAfter?.text?.startsWith(\" \");\n+\n+          if (overrideSpace) {\n+            range.to += 1;\n+          }\n+\n+          editor\n+            .chain()\n+            .focus()\n+            .insertContentAt(range, [\n+              {\n+                type: this.name,\n+                attrs: props,\n+              },\n+              {\n+                type: \"text\",\n+                text: \" \",\n+              },\n+            ])\n+            .command(({ tr, state }) => {\n+              tr.setStoredMarks(state.doc.resolve(state.selection.to - 2).marks());\n+              return true;\n+            })\n+            .run();\n+        },\n+        allow: ({ state, range }) => {\n+          const $from = state.doc.resolve(range.from);\n+          const type = state.schema.nodes[this.name];\n+          const allow = !!$from.parent.type.contentMatch.matchType(type);\n+\n+          return allow;\n+        },\n+      },\n+    };\n+  },\n+\n+  addStorage() {\n+    const { emojis } = this.options;\n+    const supportMap: Record<number, boolean> = removeDuplicates(emojis.map((item) => item.version))\n+      .filter((version) => typeof version === \"number\")\n+      .reduce((versions, version) => {\n+        const emoji = emojis.find((item) => item.version === version && item.emoji);\n+\n+        return {\n+          ...versions,\n+          [version as number]: emoji ? isEmojiSupported(emoji.emoji as string) : false,\n+        };\n+      }, {});\n+\n+    return {\n+      emojis: this.options.emojis,\n+      isSupported: (emojiItem) => (emojiItem.version ? supportMap[emojiItem.version] : false),\n+    };\n+  },\n+\n+  addAttributes() {\n+    return {\n+      name: {\n+        default: null,\n+        parseHTML: (element) => element.dataset.name,\n+        renderHTML: (attributes) => ({\n+          \"data-name\": attributes.name,\n+        }),\n+      },\n+    };\n+  },\n+\n+  parseHTML() {\n+    return [\n+      {\n+        tag: `span[data-type=\"${this.name}\"]`,\n+      },\n+    ];\n+  },\n+\n+  renderHTML({ HTMLAttributes, node }) {\n+    const emojiItem = shortcodeToEmoji(node.attrs.name, this.options.emojis);\n+    const attributes = mergeAttributes(HTMLAttributes, this.options.HTMLAttributes, { \"data-type\": this.name });\n+\n+    if (!emojiItem) {\n+      return [\"span\", attributes, `:${node.attrs.name}:`];\n+    }\n+\n+    const renderFallbackImage = false;\n+\n+    return [\n+      \"span\",\n+      attributes,\n+      renderFallbackImage\n+        ? [\n+            \"img\",\n+            {\n+              src: emojiItem.fallbackImage,\n+              draggable: \"false\",\n+              loading: \"lazy\",\n+              align: \"absmiddle\",\n+            },\n+          ]\n+        : emojiItem.emoji || `:${emojiItem.shortcodes[0]}:`,\n+    ];\n+  },\n+\n+  renderText({ node }) {\n+    const emojiItem = shortcodeToEmoji(node.attrs.name, this.options.emojis);\n+\n+    return emojiItem?.emoji || `:${node.attrs.name}:`;\n+  },\n+\n+  addCommands() {\n+    return {\n+      setEmoji:\n+        (shortcode) =>\n+        ({ chain }) => {\n+          const emojiItem = shortcodeToEmoji(shortcode, this.options.emojis);\n+\n+          if (!emojiItem) {\n+            return false;\n+          }\n+\n+          chain()\n+            .insertContent({\n+              type: this.name,\n+              attrs: {\n+                name: emojiItem.name,\n+              },\n+            })\n+            .command(({ tr, state }) => {\n+              tr.setStoredMarks(state.doc.resolve(state.selection.to - 1).marks());\n+              return true;\n+            })\n+            .run();\n+\n+          return true;\n+        },\n+    };\n+  },\n+\n+  addInputRules() {\n+    const inputRules: InputRule[] = [];\n+\n+    inputRules.push(\n+      new InputRule({\n+        find: inputRegex,\n+        handler: ({ range, match, chain }) => {\n+          const name = match[1];\n+\n+          if (!shortcodeToEmoji(name, this.options.emojis)) {\n+            return;\n+          }\n+\n+          chain()\n+            .insertContentAt(range, {\n+              type: this.name,\n+              attrs: {\n+                name,\n+              },\n+            })\n+            .command(({ tr, state }) => {\n+              tr.setStoredMarks(state.doc.resolve(state.selection.to - 1).marks());\n+              return true;\n+            })\n+            .run();\n+        },\n+      })\n+    );\n+\n+    if (this.options.enableEmoticons) {\n+      // get the list of supported emoticons\n+      const emoticons = this.options.emojis\n+        .map((item) => item.emoticons)\n+        .flat()\n+        .filter((item) => item) as string[];\n+\n+      const emoticonRegex = new RegExp(`(?:^|\\\\s)(${emoticons.map((item) => escapeForRegEx(item)).join(\"|\")}) $`);\n+\n+      inputRules.push(\n+        nodeInputRule({\n+          find: emoticonRegex,\n+          type: this.type,\n+          getAttributes: (match) => {\n+            const emoji = this.options.emojis.find((item) => item.emoticons?.includes(match[1]));\n+\n+            if (!emoji) {\n+              return;\n+            }\n+\n+            return {\n+              name: emoji.name,\n+            };\n+          },\n+        })\n+      );\n+    }\n+\n+    return inputRules;\n+  },\n+\n+  addPasteRules() {\n+    return [\n+      new PasteRule({\n+        find: pasteRegex,\n+        handler: ({ range, match, chain }) => {\n+          const name = match[1];\n+\n+          if (!shortcodeToEmoji(name, this.options.emojis)) {\n+            return;\n+          }\n+\n+          chain()\n+            .insertContentAt(\n+              range,\n+              {\n+                type: this.name,\n+                attrs: {\n+                  name,\n+                },\n+              },\n+              {\n+                updateSelection: false,\n+              }\n+            )\n+            .command(({ tr, state }) => {\n+              tr.setStoredMarks(state.doc.resolve(state.selection.to - 1).marks());\n+              return true;\n+            })\n+            .run();\n+        },\n+      }),\n+    ];\n+  },\n+\n+  addProseMirrorPlugins() {\n+    return [\n+      Suggestion({\n+        editor: this.editor,\n+        ...this.options.suggestion,\n+      }),\n+\n+      new Plugin({\n+        key: new PluginKey(\"emoji\"),\n+        props: {\n+          // double click to select emoji doesnt work by default\n+          // thats why we simulate this behavior\n+          handleDoubleClickOn: (view, pos, node) => {\n+            if (node.type !== this.type) {\n+              return false;\n+            }\n+\n+            const from = pos;\n+            const to = from + node.nodeSize;\n+\n+            this.editor.commands.setTextSelection({\n+              from,\n+              to,\n+            });\n+\n+            return true;\n+          },\n+        },\n+\n+        // replace text emojis with emoji node on any change\n+        appendTransaction: (transactions, oldState, newState) => {\n+          const docChanges =\n+            transactions.some((transaction) => transaction.docChanged) && !oldState.doc.eq(newState.doc);\n+\n+          if (!docChanges) {\n+            return;\n+          }\n+\n+          const { tr } = newState;\n+          const transform = combineTransactionSteps(oldState.doc, transactions as Transaction[]);\n+          const changes = getChangedRanges(transform);\n+\n+          changes.forEach(({ newRange }) => {\n+            // We dont want to add emoji inline nodes within code blocks.\n+            // Because this would split the code block.\n+\n+            // This only works if the range of changes is within a code node.\n+            // For all other cases (e.g. the whole document is set/pasted and the parent of the range is `doc`)\n+            // it doesn't and we have to double check later.\n+            if (newState.doc.resolve(newRange.from).parent.type.spec.code) {\n+              return;\n+            }\n+\n+            const textNodes = findChildrenInRange(newState.doc, newRange, (node) => node.type.isText);\n+\n+            textNodes.forEach(({ node, pos }) => {\n+              if (!node.text) {\n+                return;\n+              }\n+\n+              const matches = [...node.text.matchAll(emojiRegex())];\n+\n+              matches.forEach((match) => {\n+                if (match.index === undefined) {\n+                  return;\n+                }\n+\n+                const emoji = match[0];\n+                const name = emojiToShortcode(emoji, this.options.emojis);\n+\n+                if (!name) {\n+                  return;\n+                }\n+\n+                const from = tr.mapping.map(pos + match.index);\n+\n+                // Double check parent node is not a code block.\n+                if (newState.doc.resolve(from).parent.type.spec.code) {\n+                  return;\n+                }\n+\n+                const to = from + emoji.length;\n+                const emojiNode = this.type.create({\n+                  name,\n+                });\n+\n+                tr.replaceRangeWith(from, to, emojiNode);\n+\n+                tr.setStoredMarks(newState.doc.resolve(from).marks());\n+              });\n+            });\n+          });\n+\n+          if (!tr.steps.length) {\n+            return;\n+          }\n+\n+          return tr;\n+        },\n+      }),\n+    ];\n+  },\n+});\n"
        },
        {
          "path": "packages/editor/src/core/extensions/emoji/extension.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/emoji/extension.ts\n===================================================================\n--- packages/editor/src/core/extensions/emoji/extension.ts\ta2a62e2 (parent)\n+++ packages/editor/src/core/extensions/emoji/extension.ts\tab79a5d (commit)\n@@ -1,27 +1,27 @@\n-import Emoji, { EmojiItem, gitHubEmojis, shortcodeToEmoji } from \"@tiptap/extension-emoji\";\n // local imports\n+import { gitHubEmojis, shortcodeToEmoji } from \"@tiptap/extension-emoji\";\n import { MarkdownSerializerState } from \"@tiptap/pm/markdown\";\n import { Node as ProseMirrorNode } from \"@tiptap/pm/model\";\n+import { Emoji } from \"./emoji\";\n import suggestion from \"./suggestion\";\n \n export const EmojiExtension = Emoji.extend({\n   addStorage() {\n     return {\n       ...this.parent?.(),\n       markdown: {\n         serialize(state: MarkdownSerializerState, node: ProseMirrorNode) {\n-          const emojiItem = shortcodeToEmoji(node.attrs.name, this.options.emojis)\n-          if(emojiItem?.emoji) {\n+          const emojiItem = shortcodeToEmoji(node.attrs.name, this.options.emojis);\n+          if (emojiItem?.emoji) {\n             state.write(emojiItem?.emoji);\n-          } else if(emojiItem?.fallbackImage) {\n+          } else if (emojiItem?.fallbackImage) {\n             state.write(`\\n![${emojiItem.name}-${emojiItem.shortcodes[0]}](${emojiItem?.fallbackImage})\\n`);\n           } else {\n             state.write(`:${node.attrs.name}:`);\n           }\n         },\n       },\n-\n     };\n   },\n }).configure({\n   emojis: gitHubEmojis,\n"
        },
        {
          "path": "packages/editor/src/core/extensions/emoji/suggestion.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/emoji/suggestion.ts\n===================================================================\n--- packages/editor/src/core/extensions/emoji/suggestion.ts\ta2a62e2 (parent)\n+++ packages/editor/src/core/extensions/emoji/suggestion.ts\tab79a5d (commit)\n@@ -11,19 +11,31 @@\n const DEFAULT_EMOJIS = [\"+1\", \"-1\", \"smile\", \"orange_heart\", \"eyes\"];\n \n const emojiSuggestion: EmojiOptions[\"suggestion\"] = {\n   items: ({ editor, query }: { editor: Editor; query: string }): EmojiItem[] => {\n+    const { emojis } = getExtensionStorage(editor, CORE_EXTENSIONS.EMOJI);\n+    const { isSupported } = getExtensionStorage(editor, CORE_EXTENSIONS.EMOJI);\n+    const filteredEmojis = emojis.filter((emoji) => {\n+      const hasEmoji = !!emoji?.emoji;\n+      const hasFallbackImage = !!emoji?.fallbackImage;\n+      const renderFallbackImage =\n+        (emoji.forceFallbackImages && !hasEmoji) ||\n+        (emoji.forceFallbackImages && hasFallbackImage) ||\n+        (emoji.forceFallbackImages && !isSupported(emoji) && hasFallbackImage) ||\n+        ((!isSupported(emoji) || !hasEmoji) && hasFallbackImage);\n+      return !renderFallbackImage;\n+    });\n+\n     if (query.trim() === \"\") {\n-      const { emojis } = getExtensionStorage(editor, CORE_EXTENSIONS.EMOJI);\n       const defaultEmojis = DEFAULT_EMOJIS.map((name) =>\n-        emojis.find((emoji: EmojiItem) => emoji.shortcodes.includes(name) || emoji.name === name)\n+        filteredEmojis.find((emoji: EmojiItem) => emoji.shortcodes.includes(name) || emoji.name === name)\n       )\n         .filter(Boolean)\n         .slice(0, 5);\n       return defaultEmojis as EmojiItem[];\n     }\n-    return getExtensionStorage(editor, CORE_EXTENSIONS.EMOJI)\n-      .emojis.filter(({ shortcodes, tags }) => {\n+    return filteredEmojis\n+      .filter(({ shortcodes, tags }) => {\n         const lowerQuery = query.toLowerCase();\n         return (\n           shortcodes.find((shortcode: string) => shortcode.startsWith(lowerQuery)) ||\n           tags.find((tag: string) => tag.startsWith(lowerQuery))\n"
        },
        {
          "path": "packages/editor/src/core/extensions/read-only-extensions.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/read-only-extensions.ts\n===================================================================\n--- packages/editor/src/core/extensions/read-only-extensions.ts\ta2a62e2 (parent)\n+++ packages/editor/src/core/extensions/read-only-extensions.ts\tab79a5d (commit)\n@@ -32,8 +32,9 @@\n // types\n import type { IReadOnlyEditorProps } from \"@/types\";\n // local imports\n import { CustomImageExtension } from \"./custom-image/extension\";\n+import { EmojiExtension } from \"./emoji/extension\";\n \n type Props = Pick<IReadOnlyEditorProps, \"disabledExtensions\" | \"flaggedExtensions\" | \"fileHandler\" | \"mentionHandler\">;\n \n export const CoreReadOnlyEditorExtensions = (props: Props): Extensions => {\n@@ -72,8 +73,9 @@\n       },\n       dropcursor: false,\n       gapcursor: false,\n     }),\n+    EmojiExtension,\n     CustomQuoteExtension,\n     CustomHorizontalRule.configure({\n       HTMLAttributes: {\n         class: \"py-4 border-custom-border-400\",\n"
        }
      ]
    },
    {
      "id": "fix-markdown-copy",
      "sha": "d462546055e96efc56b81f44fbd0d0b1398802ae",
      "parentSha": "f510020daacef8e5d0ad80b589ad78d285527115",
      "spec": "Implement Markdown copy conversion with custom components support across editors.\n\n1) Add getEditorMetaData callback to editor core types and wire it through\n- In packages/editor/src/core/types/editor.ts:\n  - Add a required prop to IEditorProps: getEditorMetaData: (htmlContent: string) => TCustomComponentsMetaData (type from @plane/utils).\n- In packages/editor/src/core/types/hook.ts:\n  - Ensure hook prop types include getEditorMetaData wherever editor props are propagated.\n- In packages/editor/src/core/components/editors/* (document, collaborative, wrapper):\n  - Accept getEditorMetaData in props and forward it into editor setup.\n- In packages/editor/src/core/hooks/use-editor.ts and use-collaborative-editor.ts:\n  - Accept getEditorMetaData and pass it down to CoreEditorExtensions/UtilityExtension.\n\n2) Update core extensions to accept and use getEditorMetaData\n- In packages/editor/src/core/extensions/extensions.ts:\n  - Accept getEditorMetaData in arguments and pass to UtilityExtension.\n- In packages/editor/src/core/extensions/utility.ts:\n  - Use CORE_EXTENSIONS.UTILITY as the extension name (import as value).\n  - Accept getEditorMetaData and forward it to the MarkdownClipboardPlugin.\n\n3) Replace clipboard serialization with a DOM copy-to-Markdown handler\n- In packages/editor/src/core/plugins/markdown-clipboard.ts:\n  - Change plugin to accept { editor, getEditorMetaData }.\n  - Implement a handleDOMEvents.copy handler that:\n    - Prevents default and clears clipboard data.\n    - Reads editor HTML and builds metaData via getEditorMetaData(editorHTML).\n    - Serializes the current selection to HTML and converts it to Markdown using convertHTMLToMarkdown({ description_html, metaData }) from @plane/utils.\n    - Writes text/plain (Markdown) and text/html (HTML fragment) to the clipboard.\n\n4) Provide HTML-to-Markdown conversion in @plane/utils\n- Under packages/utils/src/editor/ create:\n  - markdown-parser/types.ts: TCustomComponentsMetaData with file_assets [{id,name,url}] and user_mentions [{id,display_name,url}].\n  - markdown-parser/common.ts: small helpers (e.g., createTextNode).\n  - markdown-parser/marks-handler.ts: handlers for inline marks (em/italic/underline) producing Markdown.\n  - markdown-parser/custom-components-handler.ts: handlers for image-component, img, and mention-component that output proper Markdown using metaData.\n  - markdown-parser/root.ts: export convertHTMLToMarkdown({ description_html, metaData, name? }) that:\n    - Optionally prefixes an H1 when name is provided.\n    - Uses unified with rehype-parse, a plugin to flatten task items and insert a space after checkboxes, rehype-remark with custom handlers, remark-gfm, and remark-stringify.\n  - editor/common.ts and editor/index.ts to expose editor helpers and the parser.\n- Update packages/utils/package.json to include unified, rehype-parse, rehype-remark, remark-gfm, remark-stringify and relevant @types.\n\n5) Implement metadata hooks for apps/web and apps/space\n- apps/web/core/hooks/use-parse-editor-content.ts:\n  - Change signature to useParseEditorContent({ projectId?: string; workspaceSlug: string }).\n  - Add getEditorMetaData(htmlContent) that parses <image-component> and <mention-component>, resolves image URLs via getEditorAssetSrc({ assetId, projectId, workspaceSlug }) and mention display_name via getUserDetails, building profile URLs under the workspace.\n  - Ensure existing HTML/Markdown replacement helpers still work and use parseAdditionalEditorContent.\n- apps/space/core/hooks/use-parse-editor-content.ts (new):\n  - Expose useParseEditorContent({ anchor }) returning getEditorMetaData(htmlContent) that resolves image-component URLs via getEditorAssetSrc(anchor, src) and mention display_name via getMemberById, building profile URLs without workspace slug.\n\n6) Pass getEditorMetaData to all app editors\n- apps/web/core/components/editor/* (document, lite-text, rich-text, sticky-editor):\n  - Compute getEditorMetaData via useParseEditorContent({ projectId, workspaceSlug }).\n  - Add getEditorMetaData to prop types and pass to editor instances.\n- apps/space/core/components/editor/* (lite-text-editor.tsx, rich-text-editor.tsx):\n  - Compute getEditorMetaData via useParseEditorContent({ anchor }) and pass along.\n\n7) Adjust page editor components and export modal\n- apps/web/core/components/pages/editor/header/root.tsx and page-root.tsx: make projectId optional.\n- apps/web/core/components/pages/editor/editor-body.tsx: accept optional projectId, initialize and pass getEditorMetaData.\n- apps/web/core/components/pages/modals/export-page-modal.tsx: initialize useParseEditorContent with { projectId, workspaceSlug } from route params.\n\n8) Imports and constants\n- Ensure imports of CORE_EXTENSIONS are as values where needed and reference CORE_EXTENSIONS.UTILITY for extension name.\n- Ensure utils editor exports come from packages/utils/src/editor/index.ts.\n\nAcceptance criteria\n- Copying in any editor places Markdown in text/plain and the HTML fragment in text/html on the clipboard.\n- Mentions are converted to links with display names; image-component/img become Markdown image links using resolved URLs.\n- Task list items render as GFM with a space after checkbox inputs.\n- All editors compile with the new getEditorMetaData prop and the utils package compiles with new dependencies.",
      "prompt": "Enable Markdown copy across editors that preserves Plane-specific content. Add a callback that extracts metadata about images and mentions from the current editor content, wire it from app hooks into the core editor, and update the clipboard behavior to convert the selected HTML into Markdown using a new conversion utility. Ensure mentions, images, and task items are represented correctly in the Markdown output. Update web and space editors to provide this callback, and make minor prop/type adjustments so page editors and export flows continue working.",
      "supplementalFiles": [
        "packages/editor/src/core/constants/extension.ts",
        "packages/utils/src/file.ts",
        "apps/space/helpers/editor.helper.ts"
      ],
      "fileDiffs": [
        {
          "path": "apps/space/core/components/editor/lite-text-editor.tsx",
          "status": "modified",
          "diff": "Index: apps/space/core/components/editor/lite-text-editor.tsx\n===================================================================\n--- apps/space/core/components/editor/lite-text-editor.tsx\tf510020 (parent)\n+++ apps/space/core/components/editor/lite-text-editor.tsx\td462546 (commit)\n@@ -5,16 +5,19 @@\n import type { MakeOptional } from \"@plane/types\";\n import { cn, isCommentEmpty } from \"@plane/utils\";\n // helpers\n import { getEditorFileHandlers } from \"@/helpers/editor.helper\";\n+// hooks\n+import { useParseEditorContent } from \"@/hooks/use-parse-editor-content\";\n+// plane web imports\n import { useEditorFlagging } from \"@/plane-web/hooks/use-editor-flagging\";\n // local imports\n import { EditorMentionsRoot } from \"./embeds/mentions\";\n import { IssueCommentToolbar } from \"./toolbar\";\n \n type LiteTextEditorWrapperProps = MakeOptional<\n   Omit<ILiteTextEditorProps, \"fileHandler\" | \"mentionHandler\" | \"extendedEditorProps\">,\n-  \"disabledExtensions\" | \"flaggedExtensions\"\n+  \"disabledExtensions\" | \"flaggedExtensions\" | \"getEditorMetaData\"\n > & {\n   anchor: string;\n   isSubmitting?: boolean;\n   showSubmitButton?: boolean;\n@@ -46,8 +49,12 @@\n   // derived values\n   const isEmpty = isCommentEmpty(props.initialValue);\n   const editorRef = isMutableRefObject<EditorRefApi>(ref) ? ref.current : null;\n   const { liteText: liteTextEditorExtensions } = useEditorFlagging(anchor);\n+  // parse content\n+  const { getEditorMetaData } = useParseEditorContent({\n+    anchor,\n+  });\n \n   return (\n     <div className=\"border border-custom-border-200 rounded p-3 space-y-3\">\n       <LiteTextEditorWithRef\n@@ -59,8 +66,9 @@\n           anchor,\n           uploadFile: editable ? props.uploadFile : async () => \"\",\n           workspaceId,\n         })}\n+        getEditorMetaData={getEditorMetaData}\n         mentionHandler={{\n           renderComponent: (props) => <EditorMentionsRoot {...props} />,\n         }}\n         extendedEditorProps={{}}\n"
        },
        {
          "path": "apps/space/core/components/editor/rich-text-editor.tsx",
          "status": "modified",
          "diff": "Index: apps/space/core/components/editor/rich-text-editor.tsx\n===================================================================\n--- apps/space/core/components/editor/rich-text-editor.tsx\tf510020 (parent)\n+++ apps/space/core/components/editor/rich-text-editor.tsx\td462546 (commit)\n@@ -1,21 +1,22 @@\n-import React, { forwardRef } from \"react\";\n+import { forwardRef } from \"react\";\n // plane imports\n import { RichTextEditorWithRef } from \"@plane/editor\";\n import type { EditorRefApi, IRichTextEditorProps, TFileHandler } from \"@plane/editor\";\n import type { MakeOptional } from \"@plane/types\";\n // helpers\n import { getEditorFileHandlers } from \"@/helpers/editor.helper\";\n // hooks\n import { useMember } from \"@/hooks/store/use-member\";\n+import { useParseEditorContent } from \"@/hooks/use-parse-editor-content\";\n // plane web imports\n import { useEditorFlagging } from \"@/plane-web/hooks/use-editor-flagging\";\n // local imports\n import { EditorMentionsRoot } from \"./embeds/mentions\";\n \n type RichTextEditorWrapperProps = MakeOptional<\n   Omit<IRichTextEditorProps, \"editable\" | \"fileHandler\" | \"mentionHandler\" | \"extendedEditorProps\">,\n-  \"disabledExtensions\" | \"flaggedExtensions\"\n+  \"disabledExtensions\" | \"flaggedExtensions\" | \"getEditorMetaData\"\n > & {\n   anchor: string;\n   workspaceId: string;\n } & (\n@@ -36,9 +37,15 @@\n     workspaceId,\n     disabledExtensions: additionalDisabledExtensions = [],\n     ...rest\n   } = props;\n+  // store hooks\n   const { getMemberById } = useMember();\n+  // parse content\n+  const { getEditorMetaData } = useParseEditorContent({\n+    anchor,\n+  });\n+  // editor flaggings\n   const { richText: richTextEditorExtensions } = useEditorFlagging(anchor);\n \n   return (\n     <RichTextEditorWithRef\n@@ -55,8 +62,9 @@\n         anchor,\n         uploadFile: editable ? props.uploadFile : async () => \"\",\n         workspaceId,\n       })}\n+      getEditorMetaData={getEditorMetaData}\n       flaggedExtensions={richTextEditorExtensions.flagged}\n       extendedEditorProps={{}}\n       {...rest}\n       containerClassName={containerClassName}\n"
        },
        {
          "path": "apps/space/core/hooks/use-parse-editor-content.ts",
          "status": "added",
          "diff": "Index: apps/space/core/hooks/use-parse-editor-content.ts\n===================================================================\n--- apps/space/core/hooks/use-parse-editor-content.ts\tf510020 (parent)\n+++ apps/space/core/hooks/use-parse-editor-content.ts\td462546 (commit)\n@@ -0,0 +1,69 @@\n+import { useCallback } from \"react\";\n+// helpers\n+import type { TCustomComponentsMetaData } from \"@plane/utils\";\n+// helpers\n+import { getEditorAssetSrc } from \"@/helpers/editor.helper\";\n+// hooks\n+import { useMember } from \"@/hooks/store/use-member\";\n+\n+type TArgs = {\n+  anchor: string;\n+};\n+\n+export const useParseEditorContent = (args: TArgs) => {\n+  const { anchor } = args;\n+  // store hooks\n+  const { getMemberById } = useMember();\n+\n+  const getEditorMetaData = useCallback(\n+    (htmlContent: string): TCustomComponentsMetaData => {\n+      const parser = new DOMParser();\n+      const doc = parser.parseFromString(htmlContent, \"text/html\");\n+      const imageMetaData: TCustomComponentsMetaData[\"file_assets\"] = [];\n+      // process image components\n+      const imageComponents = doc.querySelectorAll(\"image-component\");\n+      imageComponents.forEach((element) => {\n+        const src = element.getAttribute(\"src\");\n+        if (src) {\n+          const assetSrc = src.startsWith(\"http\") ? src : getEditorAssetSrc(anchor, src);\n+          if (assetSrc) {\n+            imageMetaData.push({\n+              id: src,\n+              name: src,\n+              url: assetSrc,\n+            });\n+          }\n+        }\n+      });\n+      // process user mentions\n+      const userMentions: TCustomComponentsMetaData[\"user_mentions\"] = [];\n+      const mentionComponents = doc.querySelectorAll(\"mention-component\");\n+      mentionComponents.forEach((element) => {\n+        const id = element.getAttribute(\"entity_identifier\");\n+        if (id) {\n+          const userDetails = getMemberById(id);\n+          const originUrl = typeof window !== \"undefined\" && (window.location.origin ?? \"\");\n+          const path = `profile/${id}`;\n+          const url = `${originUrl}/${path}`;\n+          if (userDetails) {\n+            userMentions.push({\n+              id,\n+              display_name: userDetails.member__display_name,\n+              url,\n+            });\n+          }\n+        }\n+      });\n+\n+      return {\n+        file_assets: imageMetaData,\n+        user_mentions: userMentions,\n+      };\n+    },\n+    [anchor, getMemberById]\n+  );\n+\n+  return {\n+    getEditorMetaData,\n+  };\n+};\n"
        },
        {
          "path": "apps/web/core/components/editor/document/editor.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/editor/document/editor.tsx\n===================================================================\n--- apps/web/core/components/editor/document/editor.tsx\tf510020 (parent)\n+++ apps/web/core/components/editor/document/editor.tsx\td462546 (commit)\n@@ -6,16 +6,17 @@\n import { cn } from \"@plane/utils\";\n // hooks\n import { useEditorConfig, useEditorMention } from \"@/hooks/editor\";\n import { useMember } from \"@/hooks/store/use-member\";\n+import { useParseEditorContent } from \"@/hooks/use-parse-editor-content\";\n // plane web hooks\n import { useEditorFlagging } from \"@/plane-web/hooks/use-editor-flagging\";\n // local imports\n import { EditorMentionsRoot } from \"../embeds/mentions\";\n \n type DocumentEditorWrapperProps = MakeOptional<\n   Omit<IDocumentEditorProps, \"fileHandler\" | \"mentionHandler\" | \"user\" | \"extendedEditorProps\">,\n-  \"disabledExtensions\" | \"editable\" | \"flaggedExtensions\"\n+  \"disabledExtensions\" | \"editable\" | \"flaggedExtensions\" | \"getEditorMetaData\"\n > & {\n   extendedEditorProps?: Partial<IEditorPropsExtended>;\n   workspaceSlug: string;\n   workspaceId: string;\n@@ -43,8 +44,13 @@\n     ...rest\n   } = props;\n   // store hooks\n   const { getUserDetails } = useMember();\n+  // parse content\n+  const { getEditorMetaData } = useParseEditorContent({\n+    projectId,\n+    workspaceSlug,\n+  });\n   // editor flaggings\n   const { document: documentEditorExtensions } = useEditorFlagging({\n     workspaceSlug: workspaceSlug?.toString() ?? \"\",\n   });\n@@ -67,8 +73,9 @@\n         uploadFile: editable ? props.uploadFile : async () => \"\",\n         workspaceId,\n         workspaceSlug,\n       })}\n+      getEditorMetaData={getEditorMetaData}\n       mentionHandler={{\n         searchCallback: async (query) => {\n           const res = await fetchMentions(query);\n           if (!res) throw new Error(\"Failed in fetching mentions\");\n"
        },
        {
          "path": "apps/web/core/components/editor/lite-text/editor.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/editor/lite-text/editor.tsx\n===================================================================\n--- apps/web/core/components/editor/lite-text/editor.tsx\tf510020 (parent)\n+++ apps/web/core/components/editor/lite-text/editor.tsx\td462546 (commit)\n@@ -12,8 +12,9 @@\n import { IssueCommentToolbar } from \"@/components/editor/lite-text/toolbar\";\n // hooks\n import { useEditorConfig, useEditorMention } from \"@/hooks/editor\";\n import { useMember } from \"@/hooks/store/use-member\";\n+import { useParseEditorContent } from \"@/hooks/use-parse-editor-content\";\n // plane web hooks\n import { useEditorFlagging } from \"@/plane-web/hooks/use-editor-flagging\";\n // plane web service\n import { WorkspaceService } from \"@/plane-web/services\";\n@@ -21,9 +22,9 @@\n const workspaceService = new WorkspaceService();\n \n type LiteTextEditorWrapperProps = MakeOptional<\n   Omit<ILiteTextEditorProps, \"fileHandler\" | \"mentionHandler\" | \"extendedEditorProps\">,\n-  \"disabledExtensions\" | \"flaggedExtensions\"\n+  \"disabledExtensions\" | \"flaggedExtensions\" | \"getEditorMetaData\"\n > & {\n   workspaceSlug: string;\n   workspaceId: string;\n   projectId?: string;\n@@ -79,8 +80,13 @@\n     workspaceSlug: workspaceSlug?.toString() ?? \"\",\n   });\n   // store hooks\n   const { getUserDetails } = useMember();\n+  // parse content\n+  const { getEditorMetaData } = useParseEditorContent({\n+    projectId,\n+    workspaceSlug,\n+  });\n   // use editor mention\n   const { fetchMentions } = useEditorMention({\n     searchEntity: async (payload) =>\n       await workspaceService.searchEntity(workspaceSlug, {\n@@ -123,8 +129,9 @@\n               uploadFile: editable ? props.uploadFile : async () => \"\",\n               workspaceId,\n               workspaceSlug,\n             })}\n+            getEditorMetaData={getEditorMetaData}\n             handleEditorReady={(ready) => {\n               if (ready) {\n                 setEditorRef(isMutableRefObject<EditorRefApi>(ref) ? ref.current : null);\n               }\n"
        },
        {
          "path": "apps/web/core/components/editor/rich-text/editor.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/editor/rich-text/editor.tsx\n===================================================================\n--- apps/web/core/components/editor/rich-text/editor.tsx\tf510020 (parent)\n+++ apps/web/core/components/editor/rich-text/editor.tsx\td462546 (commit)\n@@ -1,5 +1,5 @@\n-import React, { forwardRef } from \"react\";\n+import { forwardRef } from \"react\";\n // plane imports\n import { RichTextEditorWithRef } from \"@plane/editor\";\n import type { EditorRefApi, IRichTextEditorProps, TFileHandler } from \"@plane/editor\";\n import type { MakeOptional, TSearchEntityRequestPayload, TSearchResponse } from \"@plane/types\";\n@@ -8,14 +8,15 @@\n import { EditorMentionsRoot } from \"@/components/editor/embeds/mentions\";\n // hooks\n import { useEditorConfig, useEditorMention } from \"@/hooks/editor\";\n import { useMember } from \"@/hooks/store/use-member\";\n+import { useParseEditorContent } from \"@/hooks/use-parse-editor-content\";\n // plane web hooks\n import { useEditorFlagging } from \"@/plane-web/hooks/use-editor-flagging\";\n \n type RichTextEditorWrapperProps = MakeOptional<\n   Omit<IRichTextEditorProps, \"fileHandler\" | \"mentionHandler\" | \"extendedEditorProps\">,\n-  \"disabledExtensions\" | \"editable\" | \"flaggedExtensions\"\n+  \"disabledExtensions\" | \"editable\" | \"flaggedExtensions\" | \"getEditorMetaData\"\n > & {\n   workspaceSlug: string;\n   workspaceId: string;\n   projectId?: string;\n@@ -52,8 +53,13 @@\n     searchEntity: editable ? async (payload) => await props.searchMentionCallback(payload) : async () => ({}),\n   });\n   // editor config\n   const { getEditorFileHandlers } = useEditorConfig();\n+  // parse content\n+  const { getEditorMetaData } = useParseEditorContent({\n+    projectId,\n+    workspaceSlug,\n+  });\n \n   return (\n     <RichTextEditorWithRef\n       ref={ref}\n@@ -65,8 +71,9 @@\n         uploadFile: editable ? props.uploadFile : async () => \"\",\n         workspaceId,\n         workspaceSlug,\n       })}\n+      getEditorMetaData={getEditorMetaData}\n       mentionHandler={{\n         searchCallback: async (query) => {\n           const res = await fetchMentions(query);\n           if (!res) throw new Error(\"Failed in fetching mentions\");\n"
        },
        {
          "path": "apps/web/core/components/editor/sticky-editor/editor.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/editor/sticky-editor/editor.tsx\n===================================================================\n--- apps/web/core/components/editor/sticky-editor/editor.tsx\tf510020 (parent)\n+++ apps/web/core/components/editor/sticky-editor/editor.tsx\td462546 (commit)\n@@ -9,16 +9,17 @@\n // helpers\n import { cn } from \"@plane/utils\";\n // hooks\n import { useEditorConfig } from \"@/hooks/editor\";\n+import { useParseEditorContent } from \"@/hooks/use-parse-editor-content\";\n // plane web hooks\n import { useEditorFlagging } from \"@/plane-web/hooks/use-editor-flagging\";\n import { StickyEditorToolbar } from \"./toolbar\";\n \n interface StickyEditorWrapperProps\n   extends Omit<\n     Omit<ILiteTextEditorProps, \"extendedEditorProps\">,\n-    \"disabledExtensions\" | \"editable\" | \"flaggedExtensions\" | \"fileHandler\" | \"mentionHandler\"\n+    \"disabledExtensions\" | \"editable\" | \"flaggedExtensions\" | \"fileHandler\" | \"mentionHandler\" | \"getEditorMetaData\"\n   > {\n   workspaceSlug: string;\n   workspaceId: string;\n   projectId?: string;\n@@ -54,15 +55,21 @@\n   // editor flaggings\n   const { liteText: liteTextEditorExtensions } = useEditorFlagging({\n     workspaceSlug: workspaceSlug?.toString() ?? \"\",\n   });\n+  // parse content\n+  const { getEditorMetaData } = useParseEditorContent({\n+    projectId,\n+    workspaceSlug,\n+  });\n   // editor config\n   const { getEditorFileHandlers } = useEditorConfig();\n   function isMutableRefObject<T>(ref: React.ForwardedRef<T>): ref is React.MutableRefObject<T | null> {\n     return !!ref && typeof ref === \"object\" && \"current\" in ref;\n   }\n   // derived values\n   const editorRef = isMutableRefObject<EditorRefApi>(ref) ? ref.current : null;\n+\n   return (\n     <div\n       className={cn(\"relative border border-custom-border-200 rounded\", parentClassName)}\n       onFocus={() => !showToolbarInitially && setIsFocused(true)}\n@@ -78,8 +85,9 @@\n           uploadFile,\n           workspaceId,\n           workspaceSlug,\n         })}\n+        getEditorMetaData={getEditorMetaData}\n         mentionHandler={{\n           renderComponent: () => <></>,\n         }}\n         extendedEditorProps={{}}\n"
        },
        {
          "path": "apps/web/core/components/pages/editor/editor-body.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/pages/editor/editor-body.tsx\n===================================================================\n--- apps/web/core/components/pages/editor/editor-body.tsx\tf510020 (parent)\n+++ apps/web/core/components/pages/editor/editor-body.tsx\td462546 (commit)\n@@ -23,8 +23,9 @@\n import { useMember } from \"@/hooks/store/use-member\";\n import { useWorkspace } from \"@/hooks/store/use-workspace\";\n import { useUser } from \"@/hooks/store/user\";\n import { usePageFilters } from \"@/hooks/use-page-filters\";\n+import { useParseEditorContent } from \"@/hooks/use-parse-editor-content\";\n // plane web imports\n import { EditorAIMenu } from \"@/plane-web/components/pages\";\n import type { TExtendedEditorExtensionsConfig } from \"@/plane-web/hooks/pages\";\n import type { EPageStoreType } from \"@/plane-web/hooks/store\";\n@@ -56,12 +57,11 @@\n   handlers: TEditorBodyHandlers;\n   isNavigationPaneOpen: boolean;\n   page: TPageInstance;\n   webhookConnectionParams: TWebhookConnectionQueryParams;\n-  projectId: string;\n+  projectId?: string;\n   workspaceSlug: string;\n   storeType: EPageStoreType;\n-\n   extendedEditorProps: TExtendedEditorExtensionsConfig;\n };\n \n export const PageEditorBody: React.FC<Props> = observer((props) => {\n@@ -102,8 +102,13 @@\n   const { document: documentEditorExtensions } = useEditorFlagging({\n     workspaceSlug,\n     storeType,\n   });\n+  // parse content\n+  const { getEditorMetaData } = useParseEditorContent({\n+    projectId,\n+    workspaceSlug,\n+  });\n   // page filters\n   const { fontSize, fontStyle, isFullWidth } = usePageFilters();\n   // translation\n   const { t } = useTranslation();\n@@ -234,8 +239,9 @@\n           handleEditorReady={handleEditorReady}\n           ref={editorForwardRef}\n           containerClassName=\"h-full p-0 pb-64\"\n           displayConfig={displayConfig}\n+          getEditorMetaData={getEditorMetaData}\n           mentionHandler={{\n             searchCallback: async (query) => {\n               const res = await fetchMentions(query);\n               if (!res) throw new Error(\"Failed in fetching mentions\");\n"
        },
        {
          "path": "apps/web/core/components/pages/editor/header/root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/pages/editor/header/root.tsx\n===================================================================\n--- apps/web/core/components/pages/editor/header/root.tsx\tf510020 (parent)\n+++ apps/web/core/components/pages/editor/header/root.tsx\td462546 (commit)\n@@ -10,9 +10,9 @@\n import { PageEditorHeaderLogoPicker } from \"./logo-picker\";\n \n type Props = {\n   page: TPageInstance;\n-  projectId: string;\n+  projectId?: string;\n };\n \n export const PageEditorHeaderRoot: React.FC<Props> = observer((props) => {\n   const { page } = props;\n"
        },
        {
          "path": "apps/web/core/components/pages/editor/page-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/pages/editor/page-root.tsx\n===================================================================\n--- apps/web/core/components/pages/editor/page-root.tsx\tf510020 (parent)\n+++ apps/web/core/components/pages/editor/page-root.tsx\td462546 (commit)\n@@ -36,9 +36,9 @@\n   handlers: TPageRootHandlers;\n   page: TPageInstance;\n   storeType: EPageStoreType;\n   webhookConnectionParams: TWebhookConnectionQueryParams;\n-  projectId: string;\n+  projectId?: string;\n   workspaceSlug: string;\n };\n \n export const PageRoot = observer((props: TPageRootProps) => {\n"
        },
        {
          "path": "apps/web/core/components/pages/modals/export-page-modal.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/pages/modals/export-page-modal.tsx\n===================================================================\n--- apps/web/core/components/pages/modals/export-page-modal.tsx\tf510020 (parent)\n+++ apps/web/core/components/pages/modals/export-page-modal.tsx\td462546 (commit)\n@@ -3,8 +3,9 @@\n import { useState } from \"react\";\n import type { PageProps } from \"@react-pdf/renderer\";\n import { pdf } from \"@react-pdf/renderer\";\n import { Controller, useForm } from \"react-hook-form\";\n+import { useParams } from \"react-router\";\n // plane editor\n import type { EditorRefApi } from \"@plane/editor\";\n // plane ui\n import { Button } from \"@plane/propel/button\";\n@@ -99,15 +100,19 @@\n export const ExportPageModal: React.FC<Props> = (props) => {\n   const { editorRef, isOpen, onClose, pageTitle } = props;\n   // states\n   const [isExporting, setIsExporting] = useState(false);\n+  // params\n+  const { workspaceSlug, projectId } = useParams();\n   // form info\n   const { control, reset, watch } = useForm<TFormValues>({\n     defaultValues,\n   });\n   // parse editor content\n-  const { replaceCustomComponentsFromHTMLContent, replaceCustomComponentsFromMarkdownContent } =\n-    useParseEditorContent();\n+  const { replaceCustomComponentsFromHTMLContent, replaceCustomComponentsFromMarkdownContent } = useParseEditorContent({\n+    projectId,\n+    workspaceSlug: workspaceSlug ?? \"\",\n+  });\n   // derived values\n   const selectedExportFormat = watch(\"export_format\");\n   const selectedPageFormat = watch(\"page_format\");\n   const selectedContentVariety = watch(\"content_variety\");\n"
        },
        {
          "path": "apps/web/core/hooks/use-parse-editor-content.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/hooks/use-parse-editor-content.ts\n===================================================================\n--- apps/web/core/hooks/use-parse-editor-content.ts\tf510020 (parent)\n+++ apps/web/core/hooks/use-parse-editor-content.ts\td462546 (commit)\n@@ -1,18 +1,22 @@\n import { useCallback } from \"react\";\n-import { useParams } from \"next/navigation\";\n // plane types\n import type { TSearchEntities } from \"@plane/types\";\n // helpers\n-import { getBase64Image } from \"@plane/utils\";\n+import { getBase64Image, getEditorAssetSrc } from \"@plane/utils\";\n+import type { TCustomComponentsMetaData } from \"@plane/utils\";\n // hooks\n import { useMember } from \"@/hooks/store/use-member\";\n // plane web hooks\n import { useAdditionalEditorMention } from \"@/plane-web/hooks/use-additional-editor-mention\";\n \n-export const useParseEditorContent = () => {\n-  // params\n-  const { workspaceSlug } = useParams();\n+type TArgs = {\n+  projectId?: string;\n+  workspaceSlug: string;\n+};\n+\n+export const useParseEditorContent = (args: TArgs) => {\n+  const { projectId, workspaceSlug } = args;\n   // store hooks\n   const { getUserDetails } = useMember();\n   // parse additional content\n   const { parseAdditionalEditorContent } = useAdditionalEditorMention({\n@@ -149,9 +153,9 @@\n       // remove null colors from table elements\n       serializedDoc = serializedDoc.replace(/background-color: null/g, \"\").replace(/color: null/g, \"\");\n       return serializedDoc;\n     },\n-    [getUserDetails]\n+    [getUserDetails, parseAdditionalEditorContent]\n   );\n \n   /**\n    * @description function to replace all the custom components from the markdown content\n@@ -159,9 +163,8 @@\n    * @returns {string}\n    */\n   const replaceCustomComponentsFromMarkdownContent = useCallback(\n     (props: { markdownContent: string; noAssets?: boolean }): string => {\n-      const start = performance.now();\n       const { markdownContent, noAssets = false } = props;\n       let parsedMarkdownContent = markdownContent;\n       // replace the matched mention components with [display_name](redirect_url)\n       const mentionRegex =\n@@ -202,16 +205,69 @@\n       }\n       // remove all issue-embed components\n       const issueEmbedRegex = /<issue-embed-component[^>]*>[^]*<\\/issue-embed-component>/g;\n       parsedMarkdownContent = parsedMarkdownContent.replace(issueEmbedRegex, \"\");\n-      const end = performance.now();\n-      console.log(\"Exec time:\", end - start);\n       return parsedMarkdownContent;\n     },\n-    [getUserDetails, workspaceSlug]\n+    [getUserDetails, parseAdditionalEditorContent, workspaceSlug]\n   );\n \n+  const getEditorMetaData = useCallback(\n+    (htmlContent: string): TCustomComponentsMetaData => {\n+      const parser = new DOMParser();\n+      const doc = parser.parseFromString(htmlContent, \"text/html\");\n+      const imageMetaData: TCustomComponentsMetaData[\"file_assets\"] = [];\n+      // process image components\n+      const imageComponents = doc.querySelectorAll(\"image-component\");\n+      imageComponents.forEach((element) => {\n+        const src = element.getAttribute(\"src\");\n+        if (src) {\n+          const assetSrc = src.startsWith(\"http\")\n+            ? src\n+            : getEditorAssetSrc({\n+                assetId: src,\n+                projectId,\n+                workspaceSlug,\n+              });\n+          if (assetSrc) {\n+            imageMetaData.push({\n+              id: src,\n+              name: src,\n+              url: assetSrc,\n+            });\n+          }\n+        }\n+      });\n+      // process user mentions\n+      const userMentions: TCustomComponentsMetaData[\"user_mentions\"] = [];\n+      const mentionComponents = doc.querySelectorAll(\"mention-component\");\n+      mentionComponents.forEach((element) => {\n+        const id = element.getAttribute(\"entity_identifier\");\n+        if (id) {\n+          const userDetails = getUserDetails(id);\n+          const originUrl = typeof window !== \"undefined\" && (window.location.origin ?? \"\");\n+          const path = `${workspaceSlug}/profile/${id}`;\n+          const url = `${originUrl}/${path}`;\n+          if (userDetails) {\n+            userMentions.push({\n+              id,\n+              display_name: userDetails.display_name,\n+              url,\n+            });\n+          }\n+        }\n+      });\n+\n+      return {\n+        file_assets: imageMetaData,\n+        user_mentions: userMentions,\n+      };\n+    },\n+    [getUserDetails, projectId, workspaceSlug]\n+  );\n+\n   return {\n     replaceCustomComponentsFromHTMLContent,\n     replaceCustomComponentsFromMarkdownContent,\n+    getEditorMetaData,\n   };\n };\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/document/collaborative-editor.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/document/collaborative-editor.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/document/collaborative-editor.tsx\tf510020 (parent)\n+++ packages/editor/src/core/components/editors/document/collaborative-editor.tsx\td462546 (commit)\n@@ -29,8 +29,9 @@\n     extendedEditorProps,\n     fileHandler,\n     flaggedExtensions,\n     forwardedRef,\n+    getEditorMetaData,\n     handleEditorReady,\n     id,\n     dragDropEnabled = true,\n     isTouchDevice,\n@@ -56,8 +57,9 @@\n     extendedEditorProps,\n     extensions,\n     fileHandler,\n     flaggedExtensions,\n+    getEditorMetaData,\n     forwardedRef,\n     handleEditorReady,\n     id,\n     dragDropEnabled,\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/document/editor.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/document/editor.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/document/editor.tsx\tf510020 (parent)\n+++ packages/editor/src/core/components/editors/document/editor.tsx\td462546 (commit)\n@@ -29,11 +29,12 @@\n     extendedEditorProps,\n     fileHandler,\n     flaggedExtensions,\n     forwardedRef,\n+    getEditorMetaData,\n+    handleEditorReady,\n     id,\n     isTouchDevice,\n-    handleEditorReady,\n     mentionHandler,\n     onChange,\n     user,\n     value,\n@@ -71,8 +72,9 @@\n     extensions,\n     fileHandler,\n     flaggedExtensions,\n     forwardedRef,\n+    getEditorMetaData,\n     handleEditorReady,\n     id,\n     initialValue: value,\n     mentionHandler,\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/editor-wrapper.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/editor-wrapper.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/editor-wrapper.tsx\tf510020 (parent)\n+++ packages/editor/src/core/components/editors/editor-wrapper.tsx\td462546 (commit)\n@@ -26,8 +26,9 @@\n     editorClassName = \"\",\n     editorProps,\n     extendedEditorProps,\n     extensions,\n+    getEditorMetaData,\n     id,\n     initialValue,\n     isTouchDevice,\n     fileHandler,\n@@ -54,8 +55,9 @@\n     extensions,\n     fileHandler,\n     flaggedExtensions,\n     forwardedRef,\n+    getEditorMetaData,\n     id,\n     isTouchDevice,\n     initialValue,\n     mentionHandler,\n"
        },
        {
          "path": "packages/editor/src/core/extensions/extensions.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/extensions.ts\n===================================================================\n--- packages/editor/src/core/extensions/extensions.ts\tf510020 (parent)\n+++ packages/editor/src/core/extensions/extensions.ts\td462546 (commit)\n@@ -42,8 +42,9 @@\n   IEditorProps,\n   | \"disabledExtensions\"\n   | \"flaggedExtensions\"\n   | \"fileHandler\"\n+  | \"getEditorMetaData\"\n   | \"isTouchDevice\"\n   | \"mentionHandler\"\n   | \"placeholder\"\n   | \"tabIndex\"\n@@ -59,8 +60,9 @@\n     disabledExtensions,\n     enableHistory,\n     fileHandler,\n     flaggedExtensions,\n+    getEditorMetaData,\n     isTouchDevice = false,\n     mentionHandler,\n     placeholder,\n     tabIndex,\n@@ -113,8 +115,9 @@\n     CustomCalloutExtension,\n     UtilityExtension({\n       disabledExtensions,\n       fileHandler,\n+      getEditorMetaData,\n       isEditable: editable,\n       isTouchDevice,\n     }),\n     ...CoreEditorAdditionalExtensions({\n"
        },
        {
          "path": "packages/editor/src/core/extensions/utility.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/utility.ts\n===================================================================\n--- packages/editor/src/core/extensions/utility.ts\tf510020 (parent)\n+++ packages/editor/src/core/extensions/utility.ts\td462546 (commit)\n@@ -1,8 +1,8 @@\n import { Extension } from \"@tiptap/core\";\n import codemark from \"prosemirror-codemark\";\n // helpers\n-import type { CORE_EXTENSIONS } from \"@/constants/extension\";\n+import { CORE_EXTENSIONS } from \"@/constants/extension\";\n import { restorePublicImages } from \"@/helpers/image-helpers\";\n // plugins\n import type { TAdditionalActiveDropbarExtensions } from \"@/plane-editor/types/utils\";\n import { DropHandlerPlugin } from \"@/plugins/drop\";\n@@ -49,20 +49,20 @@\n   activeDropbarExtensions: TActiveDropbarExtensions[];\n   isTouchDevice: boolean;\n };\n \n-type Props = Pick<IEditorProps, \"disabledExtensions\"> & {\n+type Props = Pick<IEditorProps, \"disabledExtensions\" | \"getEditorMetaData\"> & {\n   fileHandler: TFileHandler;\n   isEditable: boolean;\n   isTouchDevice: boolean;\n };\n \n export const UtilityExtension = (props: Props) => {\n-  const { disabledExtensions, fileHandler, isEditable, isTouchDevice } = props;\n+  const { disabledExtensions, fileHandler, getEditorMetaData, isEditable, isTouchDevice } = props;\n   const { restore } = fileHandler;\n \n   return Extension.create<Record<string, unknown>, UtilityExtensionStorage>({\n-    name: \"utility\",\n+    name: CORE_EXTENSIONS.UTILITY,\n     priority: 1000,\n \n     addProseMirrorPlugins() {\n       return [\n@@ -71,9 +71,12 @@\n           isEditable,\n           fileHandler,\n         }),\n         ...codemark({ markType: this.editor.schema.marks.code }),\n-        MarkdownClipboardPlugin(this.editor),\n+        MarkdownClipboardPlugin({\n+          editor: this.editor,\n+          getEditorMetaData,\n+        }),\n         DropHandlerPlugin({\n           disabledExtensions,\n           editor: this.editor,\n         }),\n"
        },
        {
          "path": "packages/editor/src/core/hooks/use-collaborative-editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/hooks/use-collaborative-editor.ts\n===================================================================\n--- packages/editor/src/core/hooks/use-collaborative-editor.ts\tf510020 (parent)\n+++ packages/editor/src/core/hooks/use-collaborative-editor.ts\td462546 (commit)\n@@ -23,8 +23,9 @@\n     extendedEditorProps,\n     extensions = [],\n     fileHandler,\n     flaggedExtensions,\n+    getEditorMetaData,\n     forwardedRef,\n     handleEditorReady,\n     id,\n     dragDropEnabled = true,\n@@ -108,8 +109,9 @@\n     ],\n     fileHandler,\n     flaggedExtensions,\n     forwardedRef,\n+    getEditorMetaData,\n     handleEditorReady,\n     isTouchDevice,\n     mentionHandler,\n     onAssetChange,\n"
        },
        {
          "path": "packages/editor/src/core/hooks/use-editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/hooks/use-editor.ts\n===================================================================\n--- packages/editor/src/core/hooks/use-editor.ts\tf510020 (parent)\n+++ packages/editor/src/core/hooks/use-editor.ts\td462546 (commit)\n@@ -28,8 +28,9 @@\n     extensions = [],\n     fileHandler,\n     flaggedExtensions,\n     forwardedRef,\n+    getEditorMetaData,\n     handleEditorReady,\n     id = \"\",\n     initialValue,\n     isTouchDevice,\n@@ -64,8 +65,9 @@\n           enableHistory,\n           extendedEditorProps,\n           fileHandler,\n           flaggedExtensions,\n+          getEditorMetaData,\n           isTouchDevice,\n           mentionHandler,\n           placeholder,\n           tabIndex,\n"
        },
        {
          "path": "packages/editor/src/core/plugins/markdown-clipboard.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/plugins/markdown-clipboard.ts\n===================================================================\n--- packages/editor/src/core/plugins/markdown-clipboard.ts\tf510020 (parent)\n+++ packages/editor/src/core/plugins/markdown-clipboard.ts\td462546 (commit)\n@@ -1,81 +1,44 @@\n import type { Editor } from \"@tiptap/core\";\n-import type { Fragment } from \"@tiptap/pm/model\";\n-import { Node } from \"@tiptap/pm/model\";\n import { Plugin, PluginKey } from \"@tiptap/pm/state\";\n-// constants\n-import { CORE_EXTENSIONS } from \"@/constants/extension\";\n+// plane imports\n+import { convertHTMLToMarkdown } from \"@plane/utils\";\n+import type { TCustomComponentsMetaData } from \"@plane/utils\";\n \n-export const MarkdownClipboardPlugin = (editor: Editor): Plugin =>\n-  new Plugin({\n-    key: new PluginKey(\"markdownClipboard\"),\n-    props: {\n-      clipboardTextSerializer: (slice) => {\n-        const markdownSerializer = editor.storage.markdown.serializer;\n-        const isTableRow = slice.content.firstChild?.type?.name === CORE_EXTENSIONS.TABLE_ROW;\n-        const nodeSelect = slice.openStart === 0 && slice.openEnd === 0;\n+type TArgs = {\n+  editor: Editor;\n+  getEditorMetaData: (htmlContent: string) => TCustomComponentsMetaData;\n+};\n \n-        if (nodeSelect) {\n-          return markdownSerializer.serialize(slice.content);\n-        }\n+export const MarkdownClipboardPlugin = (args: TArgs): Plugin => {\n+  const { editor, getEditorMetaData } = args;\n \n-        const processTableContent = (tableNode: Node | Fragment) => {\n-          let result = \"\";\n-          tableNode.content?.forEach?.((tableRowNode: Node | Fragment) => {\n-            tableRowNode.content?.forEach?.((cell: Node) => {\n-              const cellContent = cell.content ? markdownSerializer.serialize(cell.content) : \"\";\n-              result += cellContent + \"\\n\";\n+  return new Plugin({\n+    key: new PluginKey(\"markdownClipboard\"),\n+    props: {\n+      handleDOMEvents: {\n+        copy: (view, event) => {\n+          try {\n+            event.preventDefault();\n+            event.clipboardData?.clearData();\n+            // editor meta data\n+            const editorHTML = editor.getHTML();\n+            const metaData = getEditorMetaData(editorHTML);\n+            // meta data from selection\n+            const clipboardHTML = view.serializeForClipboard(view.state.selection.content()).dom.innerHTML;\n+            // convert to markdown\n+            const markdown = convertHTMLToMarkdown({\n+              description_html: clipboardHTML,\n+              metaData,\n             });\n-          });\n-          return result;\n-        };\n-\n-        if (isTableRow) {\n-          const rowsCount = slice.content?.childCount || 0;\n-          const cellsCount = slice.content?.firstChild?.content?.childCount || 0;\n-          if (rowsCount === 1 || cellsCount === 1) {\n-            return processTableContent(slice.content);\n-          } else {\n-            return markdownSerializer.serialize(slice.content);\n+            event.clipboardData?.setData(\"text/plain\", markdown);\n+            event.clipboardData?.setData(\"text/html\", clipboardHTML);\n+            return true;\n+          } catch (error) {\n+            console.error(\"Failed to copy markdown content to clipboard:\", error);\n+            return false;\n           }\n-        }\n-\n-        const traverseToParentOfLeaf = (node: Node | null, parent: Fragment | Node, depth: number): Node | Fragment => {\n-          let currentNode = node;\n-          let currentParent = parent;\n-          let currentDepth = depth;\n-\n-          while (currentNode && currentDepth > 1 && currentNode.content?.firstChild) {\n-            if (currentNode.content?.childCount > 1) {\n-              if (currentNode.content.firstChild?.type?.name === CORE_EXTENSIONS.LIST_ITEM) {\n-                return currentParent;\n-              } else {\n-                return currentNode.content;\n-              }\n-            }\n-\n-            currentParent = currentNode;\n-            currentNode = currentNode.content?.firstChild || null;\n-            currentDepth--;\n-          }\n-\n-          return currentParent;\n-        };\n-\n-        if (slice.content.childCount > 1) {\n-          return markdownSerializer.serialize(slice.content);\n-        } else {\n-          const targetNode = traverseToParentOfLeaf(slice.content.firstChild, slice.content, slice.openStart);\n-\n-          let currentNode = targetNode;\n-          while (currentNode && currentNode.content && currentNode.childCount === 1 && currentNode.firstChild) {\n-            currentNode = currentNode.firstChild;\n-          }\n-          if (currentNode instanceof Node && currentNode.isText) {\n-            return currentNode.text;\n-          }\n-\n-          return markdownSerializer.serialize(targetNode);\n-        }\n+        },\n       },\n     },\n   });\n+};\n"
        },
        {
          "path": "packages/editor/src/core/types/editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/editor.ts\n===================================================================\n--- packages/editor/src/core/types/editor.ts\tf510020 (parent)\n+++ packages/editor/src/core/types/editor.ts\td462546 (commit)\n@@ -2,8 +2,10 @@\n import type { MarkType, NodeType } from \"@tiptap/pm/model\";\n import type { Selection } from \"@tiptap/pm/state\";\n import type { EditorProps, EditorView } from \"@tiptap/pm/view\";\n import type { NodeViewProps as TNodeViewProps } from \"@tiptap/react\";\n+// plane imports\n+import type { TCustomComponentsMetaData } from \"@plane/utils\";\n // extension types\n import type { TTextAlign } from \"@/extensions\";\n // plane editor imports\n import type {\n@@ -18,9 +20,8 @@\n   TDisplayConfig,\n   TDocumentEventEmitter,\n   TDocumentEventsServer,\n   TEditorAsset,\n-  TEmbedConfig,\n   TExtensions,\n   TFileHandler,\n   TMentionHandler,\n   TRealtimeConfig,\n@@ -150,8 +151,9 @@\n   extensions?: Extensions;\n   flaggedExtensions: TExtensions[];\n   fileHandler: TFileHandler;\n   forwardedRef?: React.MutableRefObject<EditorRefApi | null>;\n+  getEditorMetaData: (htmlContent: string) => TCustomComponentsMetaData;\n   handleEditorReady?: (value: boolean) => void;\n   id: string;\n   initialValue: string;\n   isTouchDevice?: boolean;\n"
        },
        {
          "path": "packages/editor/src/core/types/hook.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/hook.ts\n===================================================================\n--- packages/editor/src/core/types/hook.ts\tf510020 (parent)\n+++ packages/editor/src/core/types/hook.ts\td462546 (commit)\n@@ -10,8 +10,9 @@\n   | \"editorProps\"\n   | \"extendedEditorProps\"\n   | \"extensions\"\n   | \"flaggedExtensions\"\n+  | \"getEditorMetaData\"\n   | \"handleEditorReady\"\n   | \"isTouchDevice\"\n   | \"onEditorFocus\"\n >;\n"
        },
        {
          "path": "packages/utils/package.json",
          "status": "modified",
          "diff": "Index: packages/utils/package.json\n===================================================================\n--- packages/utils/package.json\tf510020 (parent)\n+++ packages/utils/package.json\td462546 (commit)\n@@ -27,18 +27,28 @@\n     \"@plane/types\": \"workspace:*\",\n     \"clsx\": \"^2.1.1\",\n     \"date-fns\": \"^4.1.0\",\n     \"dompurify\": \"3.2.7\",\n+    \"hast\": \"^1.0.0\",\n+    \"hast-util-to-mdast\": \"^10.1.2\",\n     \"lodash-es\": \"catalog:\",\n     \"lucide-react\": \"catalog:\",\n+    \"mdast\": \"^3.0.0\",\n     \"react\": \"catalog:\",\n+    \"rehype-parse\": \"^9.0.1\",\n+    \"rehype-remark\": \"^10.0.1\",\n+    \"remark-gfm\": \"^4.0.1\",\n+    \"remark-stringify\": \"^11.0.0\",\n     \"tailwind-merge\": \"^2.5.5\",\n+    \"unified\": \"^11.0.5\",\n     \"uuid\": \"catalog:\"\n   },\n   \"devDependencies\": {\n     \"@plane/eslint-config\": \"workspace:*\",\n     \"@plane/typescript-config\": \"workspace:*\",\n+    \"@types/hast\": \"^3.0.4\",\n     \"@types/lodash-es\": \"catalog:\",\n+    \"@types/mdast\": \"^4.0.4\",\n     \"@types/node\": \"catalog:\",\n     \"@types/react\": \"catalog:\",\n     \"tsdown\": \"catalog:\",\n     \"typescript\": \"catalog:\"\n"
        },
        {
          "path": "packages/utils/src/editor/common.ts",
          "status": "renamed",
          "oldPath": "packages/utils/src/editor.ts",
          "diff": "===================================================================\n--- packages/utils/src/editor.ts\tf510020 (parent)\n+++ packages/utils/src/editor/common.ts\td462546 (commit)\n@@ -1,6 +1,6 @@\n // local imports\n-import { getFileURL } from \"./file\";\n+import { getFileURL } from \"../file\";\n \n type TEditorSrcArgs = {\n   assetId: string;\n   projectId?: string;\n"
        },
        {
          "path": "packages/utils/src/editor/index.ts",
          "status": "added",
          "diff": "Index: packages/utils/src/editor/index.ts\n===================================================================\n--- packages/utils/src/editor/index.ts\tf510020 (parent)\n+++ packages/utils/src/editor/index.ts\td462546 (commit)\n@@ -0,0 +1,2 @@\n+export * from \"./common\";\n+export * from \"./markdown-parser\";\n"
        },
        {
          "path": "packages/utils/src/editor/markdown-parser/common.ts",
          "status": "added",
          "diff": "Index: packages/utils/src/editor/markdown-parser/common.ts\n===================================================================\n--- packages/utils/src/editor/markdown-parser/common.ts\tf510020 (parent)\n+++ packages/utils/src/editor/markdown-parser/common.ts\td462546 (commit)\n@@ -0,0 +1,6 @@\n+import type { Text as MDASTText } from \"mdast\";\n+\n+export const createTextNode = (value: string): MDASTText => ({\n+  type: \"text\",\n+  value,\n+});\n"
        },
        {
          "path": "packages/utils/src/editor/markdown-parser/custom-components-handler.ts",
          "status": "added",
          "diff": "Index: packages/utils/src/editor/markdown-parser/custom-components-handler.ts\n===================================================================\n--- packages/utils/src/editor/markdown-parser/custom-components-handler.ts\tf510020 (parent)\n+++ packages/utils/src/editor/markdown-parser/custom-components-handler.ts\td462546 (commit)\n@@ -0,0 +1,41 @@\n+import type { Handle } from \"hast-util-to-mdast\";\n+// local imports\n+import { createTextNode } from \"./common\";\n+import type { TCustomComponentsMetaData } from \"./types\";\n+\n+type TArgs = {\n+  metaData: TCustomComponentsMetaData;\n+};\n+\n+export const parseCustomComponents = (args: TArgs): Record<string, Handle> => {\n+  const { metaData } = args;\n+\n+  const getFileAssetDetails = (id: string) => metaData.file_assets.find((asset) => asset.id === id);\n+\n+  return {\n+    \"image-component\": (_state, node) => {\n+      const properties = node.properties || {};\n+      const src = String(properties.src);\n+      const fileAssetDetails = getFileAssetDetails(src);\n+      if (!src || !fileAssetDetails) return createTextNode(\"\");\n+      return createTextNode(`![${fileAssetDetails.name}](${fileAssetDetails.url})`);\n+    },\n+    img: (_state, node) => {\n+      const properties = node.properties || {};\n+      const src = String(properties.src);\n+      const alt = String(properties.alt);\n+      if (!src || !alt) return createTextNode(\"\");\n+      return createTextNode(`![${alt || \"Image\"}](${src})`);\n+    },\n+    \"mention-component\": (_state, node) => {\n+      const properties = node.properties || {};\n+      const userId = String(properties.entity_identifier);\n+      const userDetails = metaData.user_mentions.find((user) => user.id === userId);\n+      if (!userDetails) return createTextNode(\"\");\n+      return createTextNode(`[@${userDetails.display_name || \"Unknown user\"}](${userDetails.url || \"\"}) `);\n+    },\n+    ...parseExtendedCustomComponents({ metaData }),\n+  };\n+};\n+\n+export const parseExtendedCustomComponents = (_args: TArgs): Record<string, Handle> => ({});\n"
        },
        {
          "path": "packages/utils/src/editor/markdown-parser/index.ts",
          "status": "added",
          "diff": "Index: packages/utils/src/editor/markdown-parser/index.ts\n===================================================================\n--- packages/utils/src/editor/markdown-parser/index.ts\tf510020 (parent)\n+++ packages/utils/src/editor/markdown-parser/index.ts\td462546 (commit)\n@@ -0,0 +1,2 @@\n+export * from \"./types\";\n+export * from \"./root\";\n"
        },
        {
          "path": "packages/utils/src/editor/markdown-parser/marks-handler.ts",
          "status": "added",
          "diff": "Index: packages/utils/src/editor/markdown-parser/marks-handler.ts\n===================================================================\n--- packages/utils/src/editor/markdown-parser/marks-handler.ts\tf510020 (parent)\n+++ packages/utils/src/editor/markdown-parser/marks-handler.ts\td462546 (commit)\n@@ -0,0 +1,42 @@\n+import type { Handle } from \"hast-util-to-mdast\";\n+import type { PhrasingContent, Text as MDASTText } from \"mdast\";\n+// local imports\n+import { createTextNode } from \"./common\";\n+\n+const processMarkElement = (state: Parameters<Handle>[0], node: Parameters<Handle>[1], wrapper: string): MDASTText => {\n+  if (node.children && node.children.length > 0) {\n+    // Process all children and collect their text content\n+    const processedChildren: PhrasingContent[] = [];\n+\n+    for (const child of node.children) {\n+      if (child.type === \"text\") {\n+        // Direct text child - keep as is\n+        processedChildren.push(child as MDASTText);\n+      } else if (child.type === \"element\") {\n+        // Element child - recursively process it\n+        const processed = state.one(child, node);\n+        if (processed) {\n+          if (Array.isArray(processed)) {\n+            processedChildren.push(...(processed as PhrasingContent[]));\n+          } else {\n+            processedChildren.push(processed as PhrasingContent);\n+          }\n+        }\n+      }\n+    }\n+\n+    // Concatenate all text content and wrap with the specified wrapper\n+    const combinedText = processedChildren.map((child) => (child.type === \"text\" ? child.value : \"\")).join(\"\");\n+\n+    return createTextNode(`${wrapper}${combinedText}${wrapper}`);\n+  }\n+\n+  // Empty element - return empty text\n+  return createTextNode(\"\");\n+};\n+\n+export const parseMarks: Record<string, Handle> = {\n+  u: (state, node) => processMarkElement(state, node, \"\"),\n+  i: (state, node) => processMarkElement(state, node, \"_\"),\n+  em: (state, node) => processMarkElement(state, node, \"_\"),\n+};\n"
        },
        {
          "path": "packages/utils/src/editor/markdown-parser/root.ts",
          "status": "added",
          "diff": "Index: packages/utils/src/editor/markdown-parser/root.ts\n===================================================================\n--- packages/utils/src/editor/markdown-parser/root.ts\tf510020 (parent)\n+++ packages/utils/src/editor/markdown-parser/root.ts\td462546 (commit)\n@@ -0,0 +1,143 @@\n+// - Parses TipTap/ProseMirror HTML fragments\n+// - Removes <u> tags (Markdown has no underline)\n+// - Adds a space after checkbox inputs for correct GFM task list rendering\n+// - Converts to Markdown using rehyperemark, GFM, and remark-stringify\n+\n+import type { Element as HASTElement, ElementContent, Parent as HASTParent } from \"hast\";\n+import rehypeParse from \"rehype-parse\";\n+import rehypeRemark from \"rehype-remark\";\n+import remarkGfm from \"remark-gfm\";\n+import remarkStringify from \"remark-stringify\";\n+import { unified } from \"unified\";\n+// local imports\n+import { parseCustomComponents } from \"./custom-components-handler\";\n+import { parseMarks } from \"./marks-handler\";\n+import type { TCustomComponentsMetaData } from \"./types\";\n+\n+// Rehype plugin to handle TipTap task lists and convert them to GFM-compatible format\n+// TipTap structure: <li data-type=\"taskItem\"><label><input><span></span></label><div><p>text</p></div></li>\n+// We need: <li><input> text (with space after checkbox for proper GFM rendering)\n+function addSpacesToCheckboxes() {\n+  return (tree: HASTParent) => {\n+    const helper = (node: HASTParent): void => {\n+      if (!Array.isArray(node.children) || node.children.length === 0) return;\n+\n+      for (let i = 0; i < node.children.length; i++) {\n+        const child = node.children[i];\n+\n+        // Check if this is a task list item\n+        if (\n+          child &&\n+          child.type === \"element\" &&\n+          child.tagName === \"li\" &&\n+          child.properties &&\n+          child.properties[\"data-type\"] === \"taskItem\"\n+        ) {\n+          const liElement = child as HASTElement;\n+\n+          // Find the label and div elements\n+          const label = liElement.children?.find(\n+            (c) => c.type === \"element\" && (c as HASTElement).tagName === \"label\"\n+          ) as HASTElement | undefined;\n+\n+          const contentDiv = liElement.children?.find(\n+            (c) => c.type === \"element\" && (c as HASTElement).tagName === \"div\"\n+          ) as HASTElement | undefined;\n+\n+          if (label && contentDiv) {\n+            // Find the checkbox input\n+            const checkbox = label.children?.find(\n+              (c) =>\n+                c.type === \"element\" &&\n+                (c as HASTElement).tagName === \"input\" &&\n+                (c as HASTElement).properties?.type === \"checkbox\"\n+            ) as HASTElement | undefined;\n+\n+            if (checkbox) {\n+              // Extract text content from the div, unwrapping any paragraph tags\n+              const textContent: ElementContent[] = [];\n+              if (contentDiv.children) {\n+                for (const child of contentDiv.children) {\n+                  if (child.type === \"element\" && (child as HASTElement).tagName === \"p\") {\n+                    // Unwrap paragraph - add its children directly\n+                    const pElement = child as HASTElement;\n+                    if (pElement.children) {\n+                      textContent.push(...pElement.children);\n+                    }\n+                  } else {\n+                    // Keep other elements as-is\n+                    textContent.push(child);\n+                  }\n+                }\n+              }\n+\n+              // Flatten the structure: move checkbox and content to be direct children of li\n+              liElement.children = [\n+                checkbox,\n+                { type: \"text\", value: \" \" }, // Add space after checkbox\n+                ...textContent,\n+              ];\n+            }\n+          }\n+        } else if (child && child.type === \"element\") {\n+          helper(child as HASTElement);\n+        }\n+      }\n+    };\n+\n+    helper(tree);\n+  };\n+}\n+\n+type TArgs = {\n+  description_html: string;\n+  metaData: TCustomComponentsMetaData;\n+  name?: string;\n+};\n+\n+/**\n+ * Sanitizes a string by escaping HTML entities to prevent XSS attacks\n+ * @param str - The string to sanitize\n+ * @returns The sanitized string with escaped HTML entities\n+ */\n+function sanitizeHTML(str: string): string {\n+  return str\n+    .replace(/&/g, \"&amp;\")\n+    .replace(/</g, \"&lt;\")\n+    .replace(/>/g, \"&gt;\")\n+    .replace(/\"/g, \"&quot;\")\n+    .replace(/'/g, \"&#x27;\");\n+}\n+\n+export function convertHTMLToMarkdown(args: TArgs): string {\n+  const { description_html, metaData, name } = args;\n+\n+  let updatedDescriptionHtml = description_html;\n+  if (name) {\n+    const sanitizedName = sanitizeHTML(name);\n+    updatedDescriptionHtml = `<h1>${sanitizedName}</h1>\\n\\n${description_html}`;\n+  }\n+\n+  const result = unified()\n+    .use(rehypeParse, { fragment: true })\n+    .use(addSpacesToCheckboxes)\n+    .use(rehypeRemark, {\n+      handlers: {\n+        ...parseCustomComponents({\n+          metaData,\n+        }),\n+        ...parseMarks,\n+      },\n+    })\n+    .use(remarkGfm)\n+    .use(remarkStringify, {\n+      handlers: {\n+        text: (node: { value: string }): string => node.value,\n+      },\n+    })\n+    .processSync(updatedDescriptionHtml);\n+\n+  const markdown = String(result.value ?? result);\n+\n+  return markdown;\n+}\n"
        },
        {
          "path": "packages/utils/src/editor/markdown-parser/types.ts",
          "status": "added",
          "diff": "Index: packages/utils/src/editor/markdown-parser/types.ts\n===================================================================\n--- packages/utils/src/editor/markdown-parser/types.ts\tf510020 (parent)\n+++ packages/utils/src/editor/markdown-parser/types.ts\td462546 (commit)\n@@ -0,0 +1,16 @@\n+export type TCoreCustomComponentsMetaData = {\n+  file_assets: {\n+    id: string;\n+    name: string;\n+    url: string;\n+  }[];\n+  user_mentions: {\n+    id: string;\n+    display_name: string;\n+    url: string;\n+  }[];\n+};\n+\n+export type TExtendedCustomComponentsMetaData = unknown;\n+\n+export type TCustomComponentsMetaData = TCoreCustomComponentsMetaData & TExtendedCustomComponentsMetaData;\n"
        },
        {
          "path": "pnpm-lock.yaml",
          "status": "modified",
          "diff": "Index: pnpm-lock.yaml\n===================================================================\n--- pnpm-lock.yaml\tf510020 (parent)\n+++ pnpm-lock.yaml\td462546 (commit)\n@@ -169,9 +169,9 @@\n         specifier: 'catalog:'\n         version: 9.1.1(mobx@6.12.0)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n       next-themes:\n         specifier: ^0.2.1\n-        version: 0.2.1(next@14.2.32(@babel/core@7.28.4)(@opentelemetry/api@1.9.0)(babel-plugin-macros@3.1.0)(react-dom@18.3.1(react@18.3.1))(react@18.3.1))(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n+        version: 0.2.1(next@14.2.32(@opentelemetry/api@1.9.0)(babel-plugin-macros@3.1.0)(react-dom@18.3.1(react@18.3.1))(react@18.3.1))(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n       react:\n         specifier: 'catalog:'\n         version: 18.3.1\n       react-dom:\n@@ -429,9 +429,9 @@\n         specifier: 'catalog:'\n         version: 6.0.8(mobx@6.12.0)\n       next-themes:\n         specifier: ^0.2.1\n-        version: 0.2.1(next@14.2.32(@babel/core@7.28.4)(@opentelemetry/api@1.9.0)(babel-plugin-macros@3.1.0)(react-dom@18.3.1(react@18.3.1))(react@18.3.1))(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n+        version: 0.2.1(next@14.2.32(@opentelemetry/api@1.9.0)(babel-plugin-macros@3.1.0)(react-dom@18.3.1(react@18.3.1))(react@18.3.1))(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n       react:\n         specifier: 'catalog:'\n         version: 18.3.1\n       react-dom:\n@@ -604,9 +604,9 @@\n         specifier: 'catalog:'\n         version: 6.0.8(mobx@6.12.0)\n       next-themes:\n         specifier: ^0.2.1\n-        version: 0.2.1(next@14.2.32(@babel/core@7.28.4)(@opentelemetry/api@1.9.0)(babel-plugin-macros@3.1.0)(react-dom@18.3.1(react@18.3.1))(react@18.3.1))(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n+        version: 0.2.1(next@14.2.32(@opentelemetry/api@1.9.0)(babel-plugin-macros@3.1.0)(react-dom@18.3.1(react@18.3.1))(react@18.3.1))(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n       posthog-js:\n         specifier: ^1.255.1\n         version: 1.255.1\n       react:\n@@ -1437,20 +1437,44 @@\n         version: 4.1.0\n       dompurify:\n         specifier: 3.2.7\n         version: 3.2.7\n+      hast:\n+        specifier: ^1.0.0\n+        version: 1.0.0\n+      hast-util-to-mdast:\n+        specifier: ^10.1.2\n+        version: 10.1.2\n       lodash-es:\n         specifier: 'catalog:'\n         version: 4.17.21\n       lucide-react:\n         specifier: 'catalog:'\n         version: 0.469.0(react@18.3.1)\n+      mdast:\n+        specifier: ^3.0.0\n+        version: 3.0.0\n       react:\n         specifier: 'catalog:'\n         version: 18.3.1\n+      rehype-parse:\n+        specifier: ^9.0.1\n+        version: 9.0.1\n+      rehype-remark:\n+        specifier: ^10.0.1\n+        version: 10.0.1\n+      remark-gfm:\n+        specifier: ^4.0.1\n+        version: 4.0.1\n+      remark-stringify:\n+        specifier: ^11.0.0\n+        version: 11.0.0\n       tailwind-merge:\n         specifier: ^2.5.5\n         version: 2.6.0\n+      unified:\n+        specifier: ^11.0.5\n+        version: 11.0.5\n       uuid:\n         specifier: 'catalog:'\n         version: 13.0.0\n     devDependencies:\n@@ -1459,11 +1483,17 @@\n         version: link:../eslint-config\n       '@plane/typescript-config':\n         specifier: workspace:*\n         version: link:../typescript-config\n+      '@types/hast':\n+        specifier: ^3.0.4\n+        version: 3.0.4\n       '@types/lodash-es':\n         specifier: 'catalog:'\n         version: 4.17.12\n+      '@types/mdast':\n+        specifier: ^4.0.4\n+        version: 4.0.4\n       '@types/node':\n         specifier: 'catalog:'\n         version: 22.12.0\n       '@types/react':\n@@ -2126,10 +2156,10 @@\n \n   '@napi-rs/wasm-runtime@0.2.12':\n     resolution: {integrity: sha512-ZVWUcfwY4E/yPitQJl481FjFo3K22D6qF0DuFH6Y/nbnE11GY5uguDxZMGXPQ8WQ0128MXQD7TnfHyK4oWoIJQ==}\n \n-  '@napi-rs/wasm-runtime@1.0.3':\n-    resolution: {integrity: sha512-rZxtMsLwjdXkMUGC3WwsPwLNVqVqnTJT6MNIB6e+5fhMcSCPP0AOsNWuMQ5mdCq6HNjs/ZeWAEchpqeprqBD2Q==}\n+  '@napi-rs/wasm-runtime@1.0.5':\n+    resolution: {integrity: sha512-TBr9Cf9onSAS2LQ2+QHx6XcC6h9+RIzJgbqG3++9TUZSH204AwEy5jg3BTQ0VATsyoGj4ee49tN/y6rvaOOtcg==}\n \n   '@next/env@14.2.32':\n     resolution: {integrity: sha512-n9mQdigI6iZ/DF6pCTwMKeWgF2e8lg7qgt5M7HXMLtyhZYMnf/u905M18sSpPmHL9MKp9JHo56C6jrD2EvWxng==}\n \n@@ -2423,15 +2453,11 @@\n     engines: {node: ^18.19.0 || >=20.6.0}\n     peerDependencies:\n       '@opentelemetry/api': ^1.1.0\n \n-  '@oxc-project/runtime@0.82.3':\n-    resolution: {integrity: sha512-LNh5GlJvYHAnMurO+EyA8jJwN1rki7l3PSHuosDh2I7h00T6/u9rCkUjg/SvPmT1CZzvhuW0y+gf7jcqUy/Usg==}\n-    engines: {node: '>=6.9.0'}\n+  '@oxc-project/types@0.89.0':\n+    resolution: {integrity: sha512-yuo+ECPIW5Q9mSeNmCDC2im33bfKuwW18mwkaHMQh8KakHYDzj4ci/q7wxf2qS3dMlVVCIyrs3kFtH5LmnlYnw==}\n \n-  '@oxc-project/types@0.82.3':\n-    resolution: {integrity: sha512-6nCUxBnGX0c6qfZW5MaF6/fmu5dHJDMiMPaioKHKs5mi5+8/FHQ7WGjgQIz1zxpmceMYfdIXkOaLYE+ejbuOtA==}\n-\n   '@popperjs/core@2.11.8':\n     resolution: {integrity: sha512-P1st0aksCrn9sGZhp8GMYwBnQsbvAWsZAX44oXNNvLHGqAOcoVxmjZiohstwQ7SqKnbR47akdNi+uleWD8+g6A==}\n \n   '@posthog/react@1.4.0':\n@@ -2799,80 +2825,93 @@\n \n   '@remix-run/node-fetch-server@0.9.0':\n     resolution: {integrity: sha512-SoLMv7dbH+njWzXnOY6fI08dFMI5+/dQ+vY3n8RnnbdG7MdJEgiP28Xj/xWlnRnED/aB6SFw56Zop+LbmaaKqA==}\n \n-  '@rolldown/binding-android-arm64@1.0.0-beta.34':\n-    resolution: {integrity: sha512-jf5GNe5jP3Sr1Tih0WKvg2bzvh5T/1TA0fn1u32xSH7ca/p5t+/QRr4VRFCV/na5vjwKEhwWrChsL2AWlY+eoA==}\n+  '@rolldown/binding-android-arm64@1.0.0-beta.38':\n+    resolution: {integrity: sha512-AE3HFQrjWCKLFZD1Vpiy+qsqTRwwoil1oM5WsKPSmfQ5fif/A+ZtOZetF32erZdsR7qyvns6qHEteEsF6g6rsQ==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [arm64]\n     os: [android]\n \n-  '@rolldown/binding-darwin-arm64@1.0.0-beta.34':\n-    resolution: {integrity: sha512-2F/TqH4QuJQ34tgWxqBjFL3XV1gMzeQgUO8YRtCPGBSP0GhxtoFzsp7KqmQEothsxztlv+KhhT9Dbg3HHwHViQ==}\n+  '@rolldown/binding-darwin-arm64@1.0.0-beta.38':\n+    resolution: {integrity: sha512-RaoWOKc0rrFsVmKOjQpebMY6c6/I7GR1FBc25v7L/R7NlM0166mUotwGEv7vxu7ruXH4SJcFeVrfADFUUXUmmQ==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [arm64]\n     os: [darwin]\n \n-  '@rolldown/binding-darwin-x64@1.0.0-beta.34':\n-    resolution: {integrity: sha512-E1QuFslgLWbHQ8Qli/AqUKdfg0pockQPwRxVbhNQ74SciZEZpzLaujkdmOLSccMlSXDfFCF8RPnMoRAzQ9JV8Q==}\n+  '@rolldown/binding-darwin-x64@1.0.0-beta.38':\n+    resolution: {integrity: sha512-Ymojqc2U35iUc8NFU2XX1WQPfBRRHN6xHcrxAf9WS8BFFBn8pDrH5QPvH1tYs3lDkw6UGGbanr1RGzARqdUp1g==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [x64]\n     os: [darwin]\n \n-  '@rolldown/binding-freebsd-x64@1.0.0-beta.34':\n-    resolution: {integrity: sha512-VS8VInNCwnkpI9WeQaWu3kVBq9ty6g7KrHdLxYMzeqz24+w9hg712TcWdqzdY6sn+24lUoMD9jTZrZ/qfVpk0g==}\n+  '@rolldown/binding-freebsd-x64@1.0.0-beta.38':\n+    resolution: {integrity: sha512-0ermTQ//WzSI0nOL3z/LUWMNiE9xeM5cLGxjewPFEexqxV/0uM8/lNp9QageQ8jfc/VO1OURsGw34HYO5PaL8w==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [x64]\n     os: [freebsd]\n \n-  '@rolldown/binding-linux-arm-gnueabihf@1.0.0-beta.34':\n-    resolution: {integrity: sha512-4St4emjcnULnxJYb/5ZDrH/kK/j6PcUgc3eAqH5STmTrcF+I9m/X2xvSF2a2bWv1DOQhxBewThu0KkwGHdgu5w==}\n+  '@rolldown/binding-linux-arm-gnueabihf@1.0.0-beta.38':\n+    resolution: {integrity: sha512-GADxzVUTCTp6EWI52831A29Tt7PukFe94nhg/SUsfkI33oTiNQtPxyLIT/3oRegizGuPSZSlrdBurkjDwxyEUQ==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [arm]\n     os: [linux]\n \n-  '@rolldown/binding-linux-arm64-gnu@1.0.0-beta.34':\n-    resolution: {integrity: sha512-a737FTqhFUoWfnebS2SnQ2BS50p0JdukdkUBwy2J06j4hZ6Eej0zEB8vTfAqoCjn8BQKkXBy+3Sx0IRkgwz1gA==}\n+  '@rolldown/binding-linux-arm64-gnu@1.0.0-beta.38':\n+    resolution: {integrity: sha512-SKO7Exl5Yem/OSNoA5uLHzyrptUQ8Hg70kHDxuwEaH0+GUg+SQe9/7PWmc4hFKBMrJGdQtii8WZ0uIz9Dofg5Q==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [arm64]\n     os: [linux]\n \n-  '@rolldown/binding-linux-arm64-musl@1.0.0-beta.34':\n-    resolution: {integrity: sha512-NH+FeQWKyuw0k+PbXqpFWNfvD8RPvfJk766B/njdaWz4TmiEcSB0Nb6guNw1rBpM1FmltQYb3fFnTumtC6pRfA==}\n+  '@rolldown/binding-linux-arm64-musl@1.0.0-beta.38':\n+    resolution: {integrity: sha512-SOo6+WqhXPBaShLxLT0eCgH17d3Yu1lMAe4mFP0M9Bvr/kfMSOPQXuLxBcbBU9IFM9w3N6qP9xWOHO+oUJvi8Q==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [arm64]\n     os: [linux]\n \n-  '@rolldown/binding-linux-x64-gnu@1.0.0-beta.34':\n-    resolution: {integrity: sha512-Q3RSCivp8pNadYK8ke3hLnQk08BkpZX9BmMjgwae2FWzdxhxxUiUzd9By7kneUL0vRQ4uRnhD9VkFQ+Haeqdvw==}\n+  '@rolldown/binding-linux-x64-gnu@1.0.0-beta.38':\n+    resolution: {integrity: sha512-yvsQ3CyrodOX+lcoi+lejZGCOvJZa9xTsNB8OzpMDmHeZq3QzJfpYjXSAS6vie70fOkLVJb77UqYO193Cl8XBQ==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [x64]\n     os: [linux]\n \n-  '@rolldown/binding-linux-x64-musl@1.0.0-beta.34':\n-    resolution: {integrity: sha512-wDd/HrNcVoBhWWBUW3evJHoo7GJE/RofssBy3Dsiip05YUBmokQVrYAyrboOY4dzs/lJ7HYeBtWQ9hj8wlyF0A==}\n+  '@rolldown/binding-linux-x64-musl@1.0.0-beta.38':\n+    resolution: {integrity: sha512-84qzKMwUwikfYeOuJ4Kxm/3z15rt0nFGGQArHYIQQNSTiQdxGHxOkqXtzPFqrVfBJUdxBAf+jYzR1pttFJuWyg==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [x64]\n     os: [linux]\n \n-  '@rolldown/binding-openharmony-arm64@1.0.0-beta.34':\n-    resolution: {integrity: sha512-dH3FTEV6KTNWpYSgjSXZzeX7vLty9oBYn6R3laEdhwZftQwq030LKL+5wyQdlbX5pnbh4h127hpv3Hl1+sj8dg==}\n+  '@rolldown/binding-openharmony-arm64@1.0.0-beta.38':\n+    resolution: {integrity: sha512-QrNiWlce01DYH0rL8K3yUBu+lNzY+B0DyCbIc2Atan6/S6flxOL0ow5DLQvMamOI/oKhrJ4xG+9MkMb9dDHbLQ==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [arm64]\n     os: [openharmony]\n \n-  '@rolldown/binding-wasm32-wasi@1.0.0-beta.34':\n-    resolution: {integrity: sha512-y5BUf+QtO0JsIDKA51FcGwvhJmv89BYjUl8AmN7jqD6k/eU55mH6RJYnxwCsODq5m7KSSTigVb6O7/GqB8wbPw==}\n+  '@rolldown/binding-wasm32-wasi@1.0.0-beta.38':\n+    resolution: {integrity: sha512-fnLtHyjwEsG4/aNV3Uv3Qd1ZbdH+CopwJNoV0RgBqrcQB8V6/Qdikd5JKvnO23kb3QvIpP+dAMGZMv1c2PJMzw==}\n     engines: {node: '>=14.0.0'}\n     cpu: [wasm32]\n \n-  '@rolldown/binding-win32-arm64-msvc@1.0.0-beta.34':\n-    resolution: {integrity: sha512-ga5hFhdTwpaNxEiuxZHWnD3ed0GBAzbgzS5tRHpe0ObptxM1a9Xrq6TVfNQirBLwb5Y7T/FJmJi3pmdLy95ljg==}\n+  '@rolldown/binding-win32-arm64-msvc@1.0.0-beta.38':\n+    resolution: {integrity: sha512-19cTfnGedem+RY+znA9J6ARBOCEFD4YSjnx0p5jiTm9tR6pHafRfFIfKlTXhun+NL0WWM/M0eb2IfPPYUa8+wg==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [arm64]\n     os: [win32]\n \n-  '@rolldown/binding-win32-ia32-msvc@1.0.0-beta.34':\n-    resolution: {integrity: sha512-4/MBp9T9eRnZskxWr8EXD/xHvLhdjWaeX/qY9LPRG1JdCGV3DphkLTy5AWwIQ5jhAy2ZNJR5z2fYRlpWU0sIyQ==}\n+  '@rolldown/binding-win32-ia32-msvc@1.0.0-beta.38':\n+    resolution: {integrity: sha512-HcICm4YzFJZV+fI0O0bFLVVlsWvRNo/AB9EfUXvNYbtAxakCnQZ15oq22deFdz6sfi9Y4/SagH2kPU723dhCFA==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [ia32]\n     os: [win32]\n \n-  '@rolldown/binding-win32-x64-msvc@1.0.0-beta.34':\n-    resolution: {integrity: sha512-7O5iUBX6HSBKlQU4WykpUoEmb0wQmonb6ziKFr3dJTHud2kzDnWMqk344T0qm3uGv9Ddq6Re/94pInxo1G2d4w==}\n+  '@rolldown/binding-win32-x64-msvc@1.0.0-beta.38':\n+    resolution: {integrity: sha512-4Qx6cgEPXLb0XsCyLoQcUgYBpfL0sjugftob+zhUH0EOk/NVCAIT+h0NJhY+jn7pFpeKxhNMqhvTNx3AesxIAQ==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     cpu: [x64]\n     os: [win32]\n \n-  '@rolldown/pluginutils@1.0.0-beta.34':\n-    resolution: {integrity: sha512-LyAREkZHP5pMom7c24meKmJCdhf2hEyvam2q0unr3or9ydwDL+DJ8chTF6Av/RFPb3rH8UFBdMzO5MxTZW97oA==}\n+  '@rolldown/pluginutils@1.0.0-beta.38':\n+    resolution: {integrity: sha512-N/ICGKleNhA5nc9XXQG/kkKHJ7S55u0x0XUJbbkmdCnFuoRkM1Il12q9q0eX19+M7KKUEPw/daUPIRnxhcxAIw==}\n \n   '@rollup/pluginutils@5.2.0':\n     resolution: {integrity: sha512-qWJ2ZTbmumwiLFomfzTyt5Kng4hwPi9rwCYN4SHb6eaRU1KNO4ccxINHr/VhH4GgPlt1XfSTLX2LBTme8ne4Zw==}\n     engines: {node: '>=14.0.0'}\n@@ -3886,8 +3925,11 @@\n \n   '@types/mdast@3.0.15':\n     resolution: {integrity: sha512-LnwD+mUEfxWMa1QpDraczIn6k0Ee3SMicuYSSzS6ZYl2gKS09EClnJYGd8Du6rfc5r/GZEk5o1mRb8TaTj03sQ==}\n \n+  '@types/mdast@4.0.4':\n+    resolution: {integrity: sha512-kGaNbPh1k7AFzgpud/gMdvIm5xuECykRR+JnWKQno9TAXVa6WIVCGTPvYGekIDL4uwCZQSYbUxNBSb1aUo79oA==}\n+\n   '@types/mdurl@1.0.5':\n     resolution: {integrity: sha512-6L6VymKTzYSrEf4Nev4Xa1LCHKrlTlYCBMTlQKFuddo1CvQcE52I0mwfOJayueUC7MJuXOeHTcIU683lzd0cUA==}\n \n   '@types/mdurl@2.0.0':\n@@ -4585,8 +4627,11 @@\n   case-sensitive-paths-webpack-plugin@2.4.0:\n     resolution: {integrity: sha512-roIFONhcxog0JSSWbvVAh3OocukmSgpqOH6YpMkCvav/ySIV3JKg4Dc8vYtQjYi/UxpNE36r/9v+VqTQqgkYmw==}\n     engines: {node: '>=4'}\n \n+  ccount@2.0.1:\n+    resolution: {integrity: sha512-eyrF0jiFpY+3drT6383f1qhkbGsLSifNAjA61IUjZjmLCWjItY6LB9ft9YhoDgwfmclB2zhu51Lc7+95b8NRAg==}\n+\n   chai@5.3.3:\n     resolution: {integrity: sha512-4zNhdJD/iOjSH0A05ea+Ke6MU5mmpQcbQsSOkgdaUMJ9zTlDTD/GYlwohmIE2u0gaxHYiVHEn1Fw9mZ/ktJWgw==}\n     engines: {node: '>=18'}\n \n@@ -4612,8 +4657,14 @@\n \n   change-case@4.1.2:\n     resolution: {integrity: sha512-bSxY2ws9OtviILG1EiY5K7NNxkqg/JnRnFxLtKQ96JaviiIxi7djMrSd0ECT9AC+lttClmYwKw53BWpOMblo7A==}\n \n+  character-entities-html4@2.1.0:\n+    resolution: {integrity: sha512-1v7fgQRj6hnSwFpq1Eu0ynr/CDEw0rXo2B61qXrLNdHZmPKgb7fqS1a2JwF0rISo9q77jDI8VMEHoApn8qDoZA==}\n+\n+  character-entities-legacy@3.0.0:\n+    resolution: {integrity: sha512-RpPp0asT/6ufRm//AJVwpViZbGM/MkjQFxJccQRHmISF/22NBtsHqAWmL+/pmkPWoIUJdWyeVleTl1wydHATVQ==}\n+\n   character-entities@2.0.2:\n     resolution: {integrity: sha512-shx7oQ0Awen/BRIdkjkvz54PnEEI/EjwXDSIZp86/KKdbafHh1Df/RYGBhn4hbe2+uKC9FnT5UCEdyPz3ai9hQ==}\n \n   check-error@2.1.1:\n@@ -5200,8 +5251,12 @@\n   entities@5.0.0:\n     resolution: {integrity: sha512-BeJFvFRJddxobhvEdm5GqHzRV/X+ACeuw0/BuuxsCh1EUZcAIz8+kYmBp/LrQuloy6K1f3a0M7+IhmZ7QnkISA==}\n     engines: {node: '>=0.12'}\n \n+  entities@6.0.1:\n+    resolution: {integrity: sha512-aN97NXWF6AWBTahfVOIrB/NShkzi5H7F9r1s9mD3cDj4Ko5f2qhhVoYMibXF7GlLveb/D2ioWay8lxI97Ven3g==}\n+    engines: {node: '>=0.12'}\n+\n   err-code@2.0.3:\n     resolution: {integrity: sha512-2bmlRpNKBxT/CRmPOlyISQpNj+qSeYvcym/uT0Jx2bMOlKLtSy1ZmLuVxSEKKyor/N5yhvp/ZiG1oE3DEYMSFA==}\n \n   error-ex@1.3.4:\n@@ -5266,8 +5321,12 @@\n   escape-string-regexp@4.0.0:\n     resolution: {integrity: sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==}\n     engines: {node: '>=10'}\n \n+  escape-string-regexp@5.0.0:\n+    resolution: {integrity: sha512-/veY75JbMK4j1yjvuUxuVsiS/hr/4iHs9FTT6cgTexxdE0Ly/glccBAkloH/DofkjRbZU3bnoj38mOmhkZ0lHw==}\n+    engines: {node: '>=12'}\n+\n   eslint-config-next@14.2.32:\n     resolution: {integrity: sha512-mP/NmYtDBsKlKIOBnH+CW+pYeyR3wBhE+26DAqQ0/aRtEBeTEjgY2wAFUugUELkTLmrX6PpuMSSTpOhz7j9kdQ==}\n     peerDependencies:\n       eslint: ^7.23.0 || ^8.0.0\n@@ -5768,11 +5827,57 @@\n   hasown@2.0.2:\n     resolution: {integrity: sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==}\n     engines: {node: '>= 0.4'}\n \n+  hast-util-embedded@3.0.0:\n+    resolution: {integrity: sha512-naH8sld4Pe2ep03qqULEtvYr7EjrLK2QHY8KJR6RJkTUjPGObe1vnx585uzem2hGra+s1q08DZZpfgDVYRbaXA==}\n+\n+  hast-util-from-html@2.0.3:\n+    resolution: {integrity: sha512-CUSRHXyKjzHov8yKsQjGOElXy/3EKpyX56ELnkHH34vDVw1N1XSQ1ZcAvTyAPtGqLTuKP/uxM+aLkSPqF/EtMw==}\n+\n+  hast-util-from-parse5@8.0.3:\n+    resolution: {integrity: sha512-3kxEVkEKt0zvcZ3hCRYI8rqrgwtlIOFMWkbclACvjlDw8Li9S2hk/d51OI0nr/gIpdMHNepwgOKqZ/sy0Clpyg==}\n+\n+  hast-util-has-property@3.0.0:\n+    resolution: {integrity: sha512-MNilsvEKLFpV604hwfhVStK0usFY/QmM5zX16bo7EjnAEGofr5YyI37kzopBlZJkHD4t887i+q/C8/tr5Q94cA==}\n+\n+  hast-util-is-body-ok-link@3.0.1:\n+    resolution: {integrity: sha512-0qpnzOBLztXHbHQenVB8uNuxTnm/QBFUOmdOSsEn7GnBtyY07+ENTWVFBAnXd/zEgd9/SUG3lRY7hSIBWRgGpQ==}\n+\n+  hast-util-is-element@3.0.0:\n+    resolution: {integrity: sha512-Val9mnv2IWpLbNPqc/pUem+a7Ipj2aHacCwgNfTiK0vJKl0LF+4Ba4+v1oPHFpf3bLYmreq0/l3Gud9S5OH42g==}\n+\n+  hast-util-minify-whitespace@1.0.1:\n+    resolution: {integrity: sha512-L96fPOVpnclQE0xzdWb/D12VT5FabA7SnZOUMtL1DbXmYiHJMXZvFkIZfiMmTCNJHUeO2K9UYNXoVyfz+QHuOw==}\n+\n+  hast-util-parse-selector@4.0.0:\n+    resolution: {integrity: sha512-wkQCkSYoOGCRKERFWcxMVMOcYE2K1AaNLU8DXS9arxnLOUEWbOXKXiJUNzEpqZ3JOKpnha3jkFrumEjVliDe7A==}\n+\n+  hast-util-phrasing@3.0.1:\n+    resolution: {integrity: sha512-6h60VfI3uBQUxHqTyMymMZnEbNl1XmEGtOxxKYL7stY2o601COo62AWAYBQR9lZbYXYSBoxag8UpPRXK+9fqSQ==}\n+\n+  hast-util-to-html@9.0.5:\n+    resolution: {integrity: sha512-OguPdidb+fbHQSU4Q4ZiLKnzWo8Wwsf5bZfbvu7//a9oTYoqD/fWpe96NuHkoS9h0ccGOTe0C4NGXdtS0iObOw==}\n+\n+  hast-util-to-mdast@10.1.2:\n+    resolution: {integrity: sha512-FiCRI7NmOvM4y+f5w32jPRzcxDIz+PUqDwEqn1A+1q2cdp3B8Gx7aVrXORdOKjMNDQsD1ogOr896+0jJHW1EFQ==}\n+\n+  hast-util-to-text@4.0.2:\n+    resolution: {integrity: sha512-KK6y/BN8lbaq654j7JgBydev7wuNMcID54lkRav1P0CaE1e47P72AWWPiGKXTJU271ooYzcvTAn/Zt0REnvc7A==}\n+\n   hast-util-whitespace@2.0.1:\n     resolution: {integrity: sha512-nAxA0v8+vXSBDt3AnRUNjyRIQ0rD+ntpbAp4LnPkumc5M9yUbSMa4XDU9Q6etY4f1Wp4bNgvc1yjiZtsTTrSng==}\n \n+  hast-util-whitespace@3.0.0:\n+    resolution: {integrity: sha512-88JUN06ipLwsnv+dVn+OIYOvAuvBMy/Qoi6O7mQHxdPXpjy+Cd6xRkWwux7DKO+4sYILtLBRIKgsdpS2gQc7qw==}\n+\n+  hast@1.0.0:\n+    resolution: {integrity: sha512-vFUqlRV5C+xqP76Wwq2SrM0kipnmpxJm7OfvVXpB35Fp+Fn4MV+ozr+JZr5qFvyR1q/U+Foim2x+3P+x9S1PLA==}\n+    deprecated: Renamed to rehype\n+\n+  hastscript@9.0.1:\n+    resolution: {integrity: sha512-g7df9rMFX/SPi34tyGCyUBREQoKkapwdY/T04Qn9TDWfHhAYt4/I0gMVirzK5wEzeUqIjEB+LXC/ypb7Aqno5w==}\n+\n   he@1.2.0:\n     resolution: {integrity: sha512-F/1DnUGPopORZi0ni+CvrCgHQ5FyEAHRLSApuYWMmrbSwoN2Mn/7k+Gl38gJnR7yyDZk6WLXwiGod1JOWNDKGw==}\n     hasBin: true\n \n@@ -5810,8 +5915,11 @@\n     resolution: {integrity: sha512-YXxSlJBZTP7RS3tWnQw74ooKa6L9b9i9QYXY21eUEvhZ3u9XLfv6OnFsQq6RxkhHygsaUMvYsZRV5rU/OVNZxw==}\n     engines: {node: '>=12'}\n     hasBin: true\n \n+  html-void-elements@3.0.0:\n+    resolution: {integrity: sha512-bEqo66MRXsUGxWHV5IP0PUiAWwoEjba4VCzg0LjFJBpchPaTfyfCKTG6bc5F8ucKec3q5y6qOdGyYTSBEvhCrg==}\n+\n   html-webpack-plugin@5.6.4:\n     resolution: {integrity: sha512-V/PZeWsqhfpE27nKeX9EO2sbR+D17A+tLf6qU+ht66jdUsN0QLKJN27Z+1+gHrVMKgndBahes0PU6rRihDgHTw==}\n     engines: {node: '>=10.13.0'}\n     peerDependencies:\n@@ -6264,8 +6372,11 @@\n   logform@2.7.0:\n     resolution: {integrity: sha512-TFYA4jnP7PVbmlBIfhlSe+WKxs9dklXMTEGcBCIvLhE/Tn3H6Gk1norupVW7m5Cnd4bLcr08AytbyV/xj7f/kQ==}\n     engines: {node: '>= 12.0.0'}\n \n+  longest-streak@3.1.0:\n+    resolution: {integrity: sha512-9Ri+o0JYgehTaVBBDoMqIl8GXtbWg711O3srftcHhZ0dqnETqLaoIK0x17fUw9rFSlK/0NlsKe0Ahhyl5pXE2g==}\n+\n   loose-envify@1.4.0:\n     resolution: {integrity: sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==}\n     hasBin: true\n \n@@ -6318,8 +6429,11 @@\n   markdown-it@14.1.0:\n     resolution: {integrity: sha512-a54IwgWPaeBCAAsv13YgmALOF1elABB08FxO9i+r4VFk5Vl4pKokRPeX8u5TCgSsPi6ec1otfLjdOpVcgbpshg==}\n     hasBin: true\n \n+  markdown-table@3.0.4:\n+    resolution: {integrity: sha512-wiYz4+JrLyb/DqW2hkFJxP7Vd7JuTDm77fvbM8VfEQdmSMqcImWeeRbHwZjBjIFki/VaMK2BhFi7oUUZeM5bqw==}\n+\n   masonry-layout@4.2.2:\n     resolution: {integrity: sha512-iGtAlrpHNyxaR19CvKC3npnEcAwszXoyJiI8ARV2ePi7fmYhIud25MHK8Zx4P0LCC4d3TNO9+rFa1KoK1OEOaA==}\n \n   material-colors@1.2.6:\n@@ -6331,17 +6445,57 @@\n \n   mdast-util-definitions@5.1.2:\n     resolution: {integrity: sha512-8SVPMuHqlPME/z3gqVwWY4zVXn8lqKv/pAhC57FuJ40ImXyBpmO5ukh98zB2v7Blql2FiHjHv9LVztSIqjY+MA==}\n \n+  mdast-util-find-and-replace@3.0.2:\n+    resolution: {integrity: sha512-Tmd1Vg/m3Xz43afeNxDIhWRtFZgM2VLyaf4vSTYwudTyeuTneoL3qtWMA5jeLyz/O1vDJmmV4QuScFCA2tBPwg==}\n+\n   mdast-util-from-markdown@1.3.1:\n     resolution: {integrity: sha512-4xTO/M8c82qBcnQc1tgpNtubGUW/Y1tBQ1B0i5CtSoelOLKFYlElIr3bvgREYYO5iRqbMY1YuqZng0GVOI8Qww==}\n \n+  mdast-util-from-markdown@2.0.2:\n+    resolution: {integrity: sha512-uZhTV/8NBuw0WHkPTrCqDOl0zVe1BIng5ZtHoDk49ME1qqcjYmmLmOf0gELgcRMxN4w2iuIeVso5/6QymSrgmA==}\n+\n+  mdast-util-gfm-autolink-literal@2.0.1:\n+    resolution: {integrity: sha512-5HVP2MKaP6L+G6YaxPNjuL0BPrq9orG3TsrZ9YXbA3vDw/ACI4MEsnoDpn6ZNm7GnZgtAcONJyPhOP8tNJQavQ==}\n+\n+  mdast-util-gfm-footnote@2.1.0:\n+    resolution: {integrity: sha512-sqpDWlsHn7Ac9GNZQMeUzPQSMzR6Wv0WKRNvQRg0KqHh02fpTz69Qc1QSseNX29bhz1ROIyNyxExfawVKTm1GQ==}\n+\n+  mdast-util-gfm-strikethrough@2.0.0:\n+    resolution: {integrity: sha512-mKKb915TF+OC5ptj5bJ7WFRPdYtuHv0yTRxK2tJvi+BDqbkiG7h7u/9SI89nRAYcmap2xHQL9D+QG/6wSrTtXg==}\n+\n+  mdast-util-gfm-table@2.0.0:\n+    resolution: {integrity: sha512-78UEvebzz/rJIxLvE7ZtDd/vIQ0RHv+3Mh5DR96p7cS7HsBhYIICDBCu8csTNWNO6tBWfqXPWekRuj2FNOGOZg==}\n+\n+  mdast-util-gfm-task-list-item@2.0.0:\n+    resolution: {integrity: sha512-IrtvNvjxC1o06taBAVJznEnkiHxLFTzgonUdy8hzFVeDun0uTjxxrRGVaNFqkU1wJR3RBPEfsxmU6jDWPofrTQ==}\n+\n+  mdast-util-gfm@3.1.0:\n+    resolution: {integrity: sha512-0ulfdQOM3ysHhCJ1p06l0b0VKlhU0wuQs3thxZQagjcjPrlFRqY215uZGHHJan9GEAXd9MbfPjFJz+qMkVR6zQ==}\n+\n+  mdast-util-phrasing@4.1.0:\n+    resolution: {integrity: sha512-TqICwyvJJpBwvGAMZjj4J2n0X8QWp21b9l0o7eXyVJ25YNWYbJDVIyD1bZXE6WtV6RmKJVYmQAKWa0zWOABz2w==}\n+\n   mdast-util-to-hast@12.3.0:\n     resolution: {integrity: sha512-pits93r8PhnIoU4Vy9bjW39M2jJ6/tdHyja9rrot9uujkN7UTU9SDnE6WNJz/IGyQk3XHX6yNNtrBH6cQzm8Hw==}\n \n+  mdast-util-to-hast@13.2.0:\n+    resolution: {integrity: sha512-QGYKEuUsYT9ykKBCMOEDLsU5JRObWQusAolFMeko/tYPufNkRffBAQjIE+99jbA87xv6FgmjLtwjh9wBWajwAA==}\n+\n+  mdast-util-to-markdown@2.1.2:\n+    resolution: {integrity: sha512-xj68wMTvGXVOKonmog6LwyJKrYXZPvlwabaryTjLh9LuvovB/KAH+kvi8Gjj+7rJjsFi23nkUxRQv1KqSroMqA==}\n+\n   mdast-util-to-string@3.2.0:\n     resolution: {integrity: sha512-V4Zn/ncyN1QNSqSBxTrMOLpjr+IKdHl2v3KVLoWmDPscP4r9GcCi71gjgvUV1SFSKh92AjAG4peFuBl2/YgCJg==}\n \n+  mdast-util-to-string@4.0.0:\n+    resolution: {integrity: sha512-0H44vDimn51F0YwvxSJSm0eCDOJTRlmN0R1yBh4HLj9wiV1Dn0QoXGbvFAWj2hSItVTlCmBF1hqKlIyUBVFLPg==}\n+\n+  mdast@3.0.0:\n+    resolution: {integrity: sha512-xySmf8g4fPKMeC07jXGz971EkLbWAJ83s4US2Tj9lEdnZ142UP5grN73H1Xd3HzrdbU5o9GYYP/y8F9ZSwLE9g==}\n+    deprecated: '`mdast` was renamed to `remark`'\n+\n   mdn-data@2.0.14:\n     resolution: {integrity: sha512-dn6wd0uw5GsdswPFfsgMp5NSB0/aDe6fK94YJV/AJDYXL6HVLWBsxeq7js7Ad+mU2K9LAlwpk6kN2D5mwCPVow==}\n \n   mdurl@2.0.0:\n@@ -6377,68 +6531,152 @@\n \n   micromark-core-commonmark@1.1.0:\n     resolution: {integrity: sha512-BgHO1aRbolh2hcrzL2d1La37V0Aoz73ymF8rAcKnohLy93titmv62E0gP8Hrx9PKcKrqCZ1BbLGbP3bEhoXYlw==}\n \n+  micromark-core-commonmark@2.0.3:\n+    resolution: {integrity: sha512-RDBrHEMSxVFLg6xvnXmb1Ayr2WzLAWjeSATAoxwKYJV94TeNavgoIdA0a9ytzDSVzBy2YKFK+emCPOEibLeCrg==}\n+\n+  micromark-extension-gfm-autolink-literal@2.1.0:\n+    resolution: {integrity: sha512-oOg7knzhicgQ3t4QCjCWgTmfNhvQbDDnJeVu9v81r7NltNCVmhPy1fJRX27pISafdjL+SVc4d3l48Gb6pbRypw==}\n+\n+  micromark-extension-gfm-footnote@2.1.0:\n+    resolution: {integrity: sha512-/yPhxI1ntnDNsiHtzLKYnE3vf9JZ6cAisqVDauhp4CEHxlb4uoOTxOCJ+9s51bIB8U1N1FJ1RXOKTIlD5B/gqw==}\n+\n+  micromark-extension-gfm-strikethrough@2.1.0:\n+    resolution: {integrity: sha512-ADVjpOOkjz1hhkZLlBiYA9cR2Anf8F4HqZUO6e5eDcPQd0Txw5fxLzzxnEkSkfnD0wziSGiv7sYhk/ktvbf1uw==}\n+\n+  micromark-extension-gfm-table@2.1.1:\n+    resolution: {integrity: sha512-t2OU/dXXioARrC6yWfJ4hqB7rct14e8f7m0cbI5hUmDyyIlwv5vEtooptH8INkbLzOatzKuVbQmAYcbWoyz6Dg==}\n+\n+  micromark-extension-gfm-tagfilter@2.0.0:\n+    resolution: {integrity: sha512-xHlTOmuCSotIA8TW1mDIM6X2O1SiX5P9IuDtqGonFhEK0qgRI4yeC6vMxEV2dgyr2TiD+2PQ10o+cOhdVAcwfg==}\n+\n+  micromark-extension-gfm-task-list-item@2.1.0:\n+    resolution: {integrity: sha512-qIBZhqxqI6fjLDYFTBIa4eivDMnP+OZqsNwmQ3xNLE4Cxwc+zfQEfbs6tzAo2Hjq+bh6q5F+Z8/cksrLFYWQQw==}\n+\n+  micromark-extension-gfm@3.0.0:\n+    resolution: {integrity: sha512-vsKArQsicm7t0z2GugkCKtZehqUm31oeGBV/KVSorWSy8ZlNAv7ytjFhvaryUiCUJYqs+NoE6AFhpQvBTM6Q4w==}\n+\n   micromark-factory-destination@1.1.0:\n     resolution: {integrity: sha512-XaNDROBgx9SgSChd69pjiGKbV+nfHGDPVYFs5dOoDd7ZnMAE+Cuu91BCpsY8RT2NP9vo/B8pds2VQNCLiu0zhg==}\n \n+  micromark-factory-destination@2.0.1:\n+    resolution: {integrity: sha512-Xe6rDdJlkmbFRExpTOmRj9N3MaWmbAgdpSrBQvCFqhezUn4AHqJHbaEnfbVYYiexVSs//tqOdY/DxhjdCiJnIA==}\n+\n   micromark-factory-label@1.1.0:\n     resolution: {integrity: sha512-OLtyez4vZo/1NjxGhcpDSbHQ+m0IIGnT8BoPamh+7jVlzLJBH98zzuCoUeMxvM6WsNeh8wx8cKvqLiPHEACn0w==}\n \n+  micromark-factory-label@2.0.1:\n+    resolution: {integrity: sha512-VFMekyQExqIW7xIChcXn4ok29YE3rnuyveW3wZQWWqF4Nv9Wk5rgJ99KzPvHjkmPXF93FXIbBp6YdW3t71/7Vg==}\n+\n   micromark-factory-space@1.1.0:\n     resolution: {integrity: sha512-cRzEj7c0OL4Mw2v6nwzttyOZe8XY/Z8G0rzmWQZTBi/jjwyw/U4uqKtUORXQrR5bAZZnbTI/feRV/R7hc4jQYQ==}\n \n+  micromark-factory-space@2.0.1:\n+    resolution: {integrity: sha512-zRkxjtBxxLd2Sc0d+fbnEunsTj46SWXgXciZmHq0kDYGnck/ZSGj9/wULTV95uoeYiK5hRXP2mJ98Uo4cq/LQg==}\n+\n   micromark-factory-title@1.1.0:\n     resolution: {integrity: sha512-J7n9R3vMmgjDOCY8NPw55jiyaQnH5kBdV2/UXCtZIpnHH3P6nHUKaH7XXEYuWwx/xUJcawa8plLBEjMPU24HzQ==}\n \n+  micromark-factory-title@2.0.1:\n+    resolution: {integrity: sha512-5bZ+3CjhAd9eChYTHsjy6TGxpOFSKgKKJPJxr293jTbfry2KDoWkhBb6TcPVB4NmzaPhMs1Frm9AZH7OD4Cjzw==}\n+\n   micromark-factory-whitespace@1.1.0:\n     resolution: {integrity: sha512-v2WlmiymVSp5oMg+1Q0N1Lxmt6pMhIHD457whWM7/GUlEks1hI9xj5w3zbc4uuMKXGisksZk8DzP2UyGbGqNsQ==}\n \n+  micromark-factory-whitespace@2.0.1:\n+    resolution: {integrity: sha512-Ob0nuZ3PKt/n0hORHyvoD9uZhr+Za8sFoP+OnMcnWK5lngSzALgQYKMr9RJVOWLqQYuyn6ulqGWSXdwf6F80lQ==}\n+\n   micromark-util-character@1.2.0:\n     resolution: {integrity: sha512-lXraTwcX3yH/vMDaFWCQJP1uIszLVebzUa3ZHdrgxr7KEU/9mL4mVgCpGbyhvNLNlauROiNUq7WN5u7ndbY6xg==}\n \n+  micromark-util-character@2.1.1:\n+    resolution: {integrity: sha512-wv8tdUTJ3thSFFFJKtpYKOYiGP2+v96Hvk4Tu8KpCAsTMs6yi+nVmGh1syvSCsaxz45J6Jbw+9DD6g97+NV67Q==}\n+\n   micromark-util-chunked@1.1.0:\n     resolution: {integrity: sha512-Ye01HXpkZPNcV6FiyoW2fGZDUw4Yc7vT0E9Sad83+bEDiCJ1uXu0S3mr8WLpsz3HaG3x2q0HM6CTuPdcZcluFQ==}\n \n+  micromark-util-chunked@2.0.1:\n+    resolution: {integrity: sha512-QUNFEOPELfmvv+4xiNg2sRYeS/P84pTW0TCgP5zc9FpXetHY0ab7SxKyAQCNCc1eK0459uoLI1y5oO5Vc1dbhA==}\n+\n   micromark-util-classify-character@1.1.0:\n     resolution: {integrity: sha512-SL0wLxtKSnklKSUplok1WQFoGhUdWYKggKUiqhX+Swala+BtptGCu5iPRc+xvzJ4PXE/hwM3FNXsfEVgoZsWbw==}\n \n+  micromark-util-classify-character@2.0.1:\n+    resolution: {integrity: sha512-K0kHzM6afW/MbeWYWLjoHQv1sgg2Q9EccHEDzSkxiP/EaagNzCm7T/WMKZ3rjMbvIpvBiZgwR3dKMygtA4mG1Q==}\n+\n   micromark-util-combine-extensions@1.1.0:\n     resolution: {integrity: sha512-Q20sp4mfNf9yEqDL50WwuWZHUrCO4fEyeDCnMGmG5Pr0Cz15Uo7KBs6jq+dq0EgX4DPwwrh9m0X+zPV1ypFvUA==}\n \n+  micromark-util-combine-extensions@2.0.1:\n+    resolution: {integrity: sha512-OnAnH8Ujmy59JcyZw8JSbK9cGpdVY44NKgSM7E9Eh7DiLS2E9RNQf0dONaGDzEG9yjEl5hcqeIsj4hfRkLH/Bg==}\n+\n   micromark-util-decode-numeric-character-reference@1.1.0:\n     resolution: {integrity: sha512-m9V0ExGv0jB1OT21mrWcuf4QhP46pH1KkfWy9ZEezqHKAxkj4mPCy3nIH1rkbdMlChLHX531eOrymlwyZIf2iw==}\n \n+  micromark-util-decode-numeric-character-reference@2.0.2:\n+    resolution: {integrity: sha512-ccUbYk6CwVdkmCQMyr64dXz42EfHGkPQlBj5p7YVGzq8I7CtjXZJrubAYezf7Rp+bjPseiROqe7G6foFd+lEuw==}\n+\n   micromark-util-decode-string@1.1.0:\n     resolution: {integrity: sha512-YphLGCK8gM1tG1bd54azwyrQRjCFcmgj2S2GoJDNnh4vYtnL38JS8M4gpxzOPNyHdNEpheyWXCTnnTDY3N+NVQ==}\n \n+  micromark-util-decode-string@2.0.1:\n+    resolution: {integrity: sha512-nDV/77Fj6eH1ynwscYTOsbK7rR//Uj0bZXBwJZRfaLEJ1iGBR6kIfNmlNqaqJf649EP0F3NWNdeJi03elllNUQ==}\n+\n   micromark-util-encode@1.1.0:\n     resolution: {integrity: sha512-EuEzTWSTAj9PA5GOAs992GzNh2dGQO52UvAbtSOMvXTxv3Criqb6IOzJUBCmEqrrXSblJIJBbFFv6zPxpreiJw==}\n \n+  micromark-util-encode@2.0.1:\n+    resolution: {integrity: sha512-c3cVx2y4KqUnwopcO9b/SCdo2O67LwJJ/UyqGfbigahfegL9myoEFoDYZgkT7f36T0bLrM9hZTAaAyH+PCAXjw==}\n+\n   micromark-util-html-tag-name@1.2.0:\n     resolution: {integrity: sha512-VTQzcuQgFUD7yYztuQFKXT49KghjtETQ+Wv/zUjGSGBioZnkA4P1XXZPT1FHeJA6RwRXSF47yvJ1tsJdoxwO+Q==}\n \n+  micromark-util-html-tag-name@2.0.1:\n+    resolution: {integrity: sha512-2cNEiYDhCWKI+Gs9T0Tiysk136SnR13hhO8yW6BGNyhOC4qYFnwF1nKfD3HFAIXA5c45RrIG1ub11GiXeYd1xA==}\n+\n   micromark-util-normalize-identifier@1.1.0:\n     resolution: {integrity: sha512-N+w5vhqrBihhjdpM8+5Xsxy71QWqGn7HYNUvch71iV2PM7+E3uWGox1Qp90loa1ephtCxG2ftRV/Conitc6P2Q==}\n \n+  micromark-util-normalize-identifier@2.0.1:\n+    resolution: {integrity: sha512-sxPqmo70LyARJs0w2UclACPUUEqltCkJ6PhKdMIDuJ3gSf/Q+/GIe3WKl0Ijb/GyH9lOpUkRAO2wp0GVkLvS9Q==}\n+\n   micromark-util-resolve-all@1.1.0:\n     resolution: {integrity: sha512-b/G6BTMSg+bX+xVCshPTPyAu2tmA0E4X98NSR7eIbeC6ycCqCeE7wjfDIgzEbkzdEVJXRtOG4FbEm/uGbCRouA==}\n \n+  micromark-util-resolve-all@2.0.1:\n+    resolution: {integrity: sha512-VdQyxFWFT2/FGJgwQnJYbe1jjQoNTS4RjglmSjTUlpUMa95Htx9NHeYW4rGDJzbjvCsl9eLjMQwGeElsqmzcHg==}\n+\n   micromark-util-sanitize-uri@1.2.0:\n     resolution: {integrity: sha512-QO4GXv0XZfWey4pYFndLUKEAktKkG5kZTdUNaTAkzbuJxn2tNBOr+QtxR2XpWaMhbImT2dPzyLrPXLlPhph34A==}\n \n+  micromark-util-sanitize-uri@2.0.1:\n+    resolution: {integrity: sha512-9N9IomZ/YuGGZZmQec1MbgxtlgougxTodVwDzzEouPKo3qFWvymFHWcnDi2vzV1ff6kas9ucW+o3yzJK9YB1AQ==}\n+\n   micromark-util-subtokenize@1.1.0:\n     resolution: {integrity: sha512-kUQHyzRoxvZO2PuLzMt2P/dwVsTiivCK8icYTeR+3WgbuPqfHgPPy7nFKbeqRivBvn/3N3GBiNC+JRTMSxEC7A==}\n \n+  micromark-util-subtokenize@2.1.0:\n+    resolution: {integrity: sha512-XQLu552iSctvnEcgXw6+Sx75GflAPNED1qx7eBJ+wydBb2KCbRZe+NwvIEEMM83uml1+2WSXpBAcp9IUCgCYWA==}\n+\n   micromark-util-symbol@1.1.0:\n     resolution: {integrity: sha512-uEjpEYY6KMs1g7QfJ2eX1SQEV+ZT4rUD3UcF6l57acZvLNK7PBZL+ty82Z1qhK1/yXIY4bdx04FKMgR0g4IAag==}\n \n+  micromark-util-symbol@2.0.1:\n+    resolution: {integrity: sha512-vs5t8Apaud9N28kgCrRUdEed4UJ+wWNvicHLPxCa9ENlYuAY31M0ETy5y1vA33YoNPDFTghEbnh6efaE8h4x0Q==}\n+\n   micromark-util-types@1.1.0:\n     resolution: {integrity: sha512-ukRBgie8TIAcacscVHSiddHjO4k/q3pnedmzMQ4iwDcK0FtFCohKOlFbaOL/mPgfnPsL3C1ZyxJa4sbWrBl3jg==}\n \n+  micromark-util-types@2.0.2:\n+    resolution: {integrity: sha512-Yw0ECSpJoViF1qTU4DC6NwtC4aWGt1EkzaQB8KPPyCRR8z9TWeV0HbEFGTO+ZY1wB22zmxnJqhPyTpOVCpeHTA==}\n+\n   micromark@3.2.0:\n     resolution: {integrity: sha512-uD66tJj54JLYq0De10AhWycZWGQNUvDI55xPgk2sQM5kn1JYlhbCMTtEeT27+vAhW2FBQxLlOmS3pmA7/2z4aA==}\n \n+  micromark@4.0.2:\n+    resolution: {integrity: sha512-zpe98Q6kvavpCr1NPVSCMebCKfD7CA2NqZ+rykeNhONIJBpc1tFKt9hucLGwha3jNTNI8lHpctWJWoimVF4PfA==}\n+\n   micromatch@4.0.8:\n     resolution: {integrity: sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==}\n     engines: {node: '>=8.6'}\n \n@@ -6800,8 +7038,11 @@\n \n   parse-svg-path@0.1.2:\n     resolution: {integrity: sha512-JyPSBnkTJ0AI8GGJLfMXvKq42cj5c006fnLz6fXy6zfoVjJizi8BNTpu8on8ziI1cKy9d9DGNuY17Ce7wuejpQ==}\n \n+  parse5@7.3.0:\n+    resolution: {integrity: sha512-IInvU7fabl34qmi9gY8XOVxhYyMyuH2xUNpb2q8/Y+7552KlejkRvqvD19nMoUW/uQGGbqNpA6Tufu5FL5BZgw==}\n+\n   parseurl@1.3.3:\n     resolution: {integrity: sha512-CiyeOxFT/JZyN5m0z9PfXw4SCBJ6Sygz1Dpl0wqjlhDEGGBP1GnsUVEL0p63hoG1fcj3fHynXi9NYO4nWOL+qQ==}\n     engines: {node: '>= 0.8'}\n \n@@ -7147,8 +7388,11 @@\n \n   property-information@6.5.0:\n     resolution: {integrity: sha512-PgTgs/BlvHxOu8QuEN7wi5A0OmXaBcHpmCSTehcs6Uuu9IkDIEo13Hy7n898RHfrQ49vKCoGeWZSaAK01nwVig==}\n \n+  property-information@7.1.0:\n+    resolution: {integrity: sha512-TwEZ+X+yCJmYfL7TPUOcvBZ4QfoT5YenQiJuX//0th53DE6w0xxLEtfK3iyryQFddXuvkIk51EEgrJQ0WJkOmQ==}\n+\n   prosemirror-changeset@2.3.1:\n     resolution: {integrity: sha512-j0kORIBm8ayJNl3zQvD1TTPHJX3g042et6y/KQhZhnPrruO8exkTgG8X+NRpj7kIyMMEx74Xb3DyMIBtO0IKkQ==}\n \n   prosemirror-codemark@0.4.2:\n@@ -7493,18 +7737,36 @@\n   registry-url@3.1.0:\n     resolution: {integrity: sha512-ZbgR5aZEdf4UKZVBPYIgaglBmSF2Hi94s2PcIHhRGFjKYu+chjJdYfHn4rt3hB6eCKLJ8giVIIfgMa1ehDfZKA==}\n     engines: {node: '>=0.10.0'}\n \n+  rehype-minify-whitespace@6.0.2:\n+    resolution: {integrity: sha512-Zk0pyQ06A3Lyxhe9vGtOtzz3Z0+qZ5+7icZ/PL/2x1SHPbKao5oB/g/rlc6BCTajqBb33JcOe71Ye1oFsuYbnw==}\n+\n+  rehype-parse@9.0.1:\n+    resolution: {integrity: sha512-ksCzCD0Fgfh7trPDxr2rSylbwq9iYDkSn8TCDmEJ49ljEUBxDVCzCHv7QNzZOfODanX4+bWQ4WZqLCRWYLfhag==}\n+\n+  rehype-remark@10.0.1:\n+    resolution: {integrity: sha512-EmDndlb5NVwXGfUa4c9GPK+lXeItTilLhE6ADSaQuHr4JUlKw9MidzGzx4HpqZrNCt6vnHmEifXQiiA+CEnjYQ==}\n+\n   relateurl@0.2.7:\n     resolution: {integrity: sha512-G08Dxvm4iDN3MLM0EsP62EDV9IuhXPR6blNz6Utcp7zyV3tr4HVNINt6MpaRWbxoOHT3Q7YN2P+jaHX8vUbgog==}\n     engines: {node: '>= 0.10'}\n \n+  remark-gfm@4.0.1:\n+    resolution: {integrity: sha512-1quofZ2RQ9EWdeN34S79+KExV1764+wCUGop5CPL1WGdD0ocPpu91lzPGbwWMECpEpd42kJGQwzRfyov9j4yNg==}\n+\n   remark-parse@10.0.2:\n     resolution: {integrity: sha512-3ydxgHa/ZQzG8LvC7jTXccARYDcRld3VfcgIIFs7bI6vbRSxJJmzgLEIIoYKyrfhaY+ujuWaf/PJiMZXoiCXgw==}\n \n+  remark-parse@11.0.0:\n+    resolution: {integrity: sha512-FCxlKLNGknS5ba/1lmpYijMUzX2esxW5xQqjWxw2eHFfS2MSdaHVINFmhjo+qN1WhZhNimq0dZATN9pH0IDrpA==}\n+\n   remark-rehype@10.1.0:\n     resolution: {integrity: sha512-EFmR5zppdBp0WQeDVZ/b66CWJipB2q2VLNFMabzDSGR66Z2fQii83G5gTBbgGEnEEA0QRussvrFHxk1HWGJskw==}\n \n+  remark-stringify@11.0.0:\n+    resolution: {integrity: sha512-1OSmLd3awB/t8qdoEOMazZkNsfVTeY4fTsgzcQFdXNq8ToTN4ZGwrMnlda4K6smTFKD+GRV6O48i6Z4iKgPPpw==}\n+\n   renderkid@3.0.0:\n     resolution: {integrity: sha512-q/7VIQA8lmM1hF+jn+sFSPWGlMkSAeNYcPLmDQx2zzuiDfaLrOmumR8iaUKlenFgh0XRPIUeSPlH3A+AW3Z5pg==}\n \n   require-directory@2.1.1:\n@@ -7572,10 +7834,11 @@\n         optional: true\n       vue-tsc:\n         optional: true\n \n-  rolldown@1.0.0-beta.34:\n-    resolution: {integrity: sha512-Wwh7EwalMzzX3Yy3VN58VEajeR2Si8+HDNMf706jPLIqU7CxneRW+dQVfznf5O0TWTnJyu4npelwg2bzTXB1Nw==}\n+  rolldown@1.0.0-beta.38:\n+    resolution: {integrity: sha512-58frPNX55Je1YsyrtPJv9rOSR3G5efUZpRqok94Efsj0EUa8dnqJV3BldShyI7A+bVPleucOtzXHwVpJRcR0kQ==}\n+    engines: {node: ^20.19.0 || >=22.12.0}\n     hasBin: true\n \n   rollup@4.52.4:\n     resolution: {integrity: sha512-CLEVl+MnPAiKh5pl4dEWSyMTpuflgNQiLGhMv8ezD5W/qP8AKvmYpCOKRRNOh7oRKnauBZ4SyeYkMS+1VSyKwQ==}\n@@ -7832,8 +8095,11 @@\n \n   string_decoder@1.3.0:\n     resolution: {integrity: sha512-hkRX8U1WjJFd8LsDJ2yQ/wWWxaopEsABU1XfkM8A+j0+85JAGppt16cr1Whg6KIbb4okU6Mql6BOj+uup/wKeA==}\n \n+  stringify-entities@4.0.4:\n+    resolution: {integrity: sha512-IwfBptatlO+QCJUo19AqvrPNqlVMpW9YEL2LIVY+Rpv2qsjCGxaDLNRgeGsQWJhfItebuJhsGSLjaBbNSQ+ieg==}\n+\n   strip-ansi@6.0.1:\n     resolution: {integrity: sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==}\n     engines: {node: '>=8'}\n \n@@ -8050,8 +8316,11 @@\n \n   trim-lines@3.0.1:\n     resolution: {integrity: sha512-kRj8B+YHZCc9kQYdWfJB2/oUl9rA99qbowYYBtr4ui4mZyAQ2JpvVBd/6U2YloATfqBhBTSMhTpgBHtU0Mf3Rg==}\n \n+  trim-trailing-lines@2.1.0:\n+    resolution: {integrity: sha512-5UR5Biq4VlVOtzqkm2AZlgvSlDJtME46uV0br0gENbwN4l5+mMKT4b9gJKqWtuL2zAIqajGJGuvbCbcAJUZqBg==}\n+\n   triple-beam@1.4.1:\n     resolution: {integrity: sha512-aZbgViZrg1QNcG+LULa7nhZpJTZSLm/mXnHXnbAbjmN5aSa0y7V+wvv6+4WaBtpISJzThKy+PIPxc1Nq1EJ9mg==}\n     engines: {node: '>= 14.0.0'}\n \n@@ -8222,26 +8491,47 @@\n \n   unified@10.1.2:\n     resolution: {integrity: sha512-pUSWAi/RAnVy1Pif2kAoeWNBa3JVrx0MId2LASj8G+7AiHWoKZNTomq6LG326T68U7/e263X6fTdcXIy7XnF7Q==}\n \n+  unified@11.0.5:\n+    resolution: {integrity: sha512-xKvGhPWw3k84Qjh8bI3ZeJjqnyadK+GEFtazSfZv/rKeTkTjOJho6mFqh2SM96iIcZokxiOpg78GazTSg8+KHA==}\n+\n+  unist-util-find-after@5.0.0:\n+    resolution: {integrity: sha512-amQa0Ep2m6hE2g72AugUItjbuM8X8cGQnFoHk0pGfrFeT9GZhzN5SW8nRsiGKK7Aif4CrACPENkA6P/Lw6fHGQ==}\n+\n   unist-util-generated@2.0.1:\n     resolution: {integrity: sha512-qF72kLmPxAw0oN2fwpWIqbXAVyEqUzDHMsbtPvOudIlUzXYFIeQIuxXQCRCFh22B7cixvU0MG7m3MW8FTq/S+A==}\n \n   unist-util-is@5.2.1:\n     resolution: {integrity: sha512-u9njyyfEh43npf1M+yGKDGVPbY/JWEemg5nH05ncKPfi+kBbKBJoTdsogMu33uhytuLlv9y0O7GH7fEdwLdLQw==}\n \n+  unist-util-is@6.0.0:\n+    resolution: {integrity: sha512-2qCTHimwdxLfz+YzdGfkqNlH0tLi9xjTnHddPmJwtIG9MGsdbutfTc4P+haPD7l7Cjxf/WZj+we5qfVPvvxfYw==}\n+\n   unist-util-position@4.0.4:\n     resolution: {integrity: sha512-kUBE91efOWfIVBo8xzh/uZQ7p9ffYRtUbMRZBNFYwf0RK8koUMx6dGUfwylLOKmaT2cs4wSW96QoYUSXAyEtpg==}\n \n+  unist-util-position@5.0.0:\n+    resolution: {integrity: sha512-fucsC7HjXvkB5R3kTCO7kUjRdrS0BJt3M/FPxmHMBOm8JQi2BsHAHFsy27E0EolP8rp0NzXsJ+jNPyDWvOJZPA==}\n+\n   unist-util-stringify-position@3.0.3:\n     resolution: {integrity: sha512-k5GzIBZ/QatR8N5X2y+drfpWG8IDBzdnVj6OInRNWm1oXrzydiaAT2OQiA8DPRRZyAKb9b6I2a6PxYklZD0gKg==}\n \n+  unist-util-stringify-position@4.0.0:\n+    resolution: {integrity: sha512-0ASV06AAoKCDkS2+xw5RXJywruurpbC4JZSm7nr7MOt1ojAzvyyaO+UxZf18j8FCF6kmzCZKcAgN/yu2gm2XgQ==}\n+\n   unist-util-visit-parents@5.1.3:\n     resolution: {integrity: sha512-x6+y8g7wWMyQhL1iZfhIPhDAs7Xwbn9nRosDXl7qoPTSCy0yNxnKc+hWokFifWQIDGi154rdUqKvbCa4+1kLhg==}\n \n+  unist-util-visit-parents@6.0.1:\n+    resolution: {integrity: sha512-L/PqWzfTP9lzzEa6CKs0k2nARxTdZduw3zyh8d2NVBnsyvHjSX4TWse388YrrQKbvI8w20fGjGlhgT96WwKykw==}\n+\n   unist-util-visit@4.1.2:\n     resolution: {integrity: sha512-MSd8OUGISqHdVvfY9TPhyK2VdUrPgxkUtWSuMHF6XAAFuL4LokseigBnZtPnJMu+FbynTkFNnFlyjxpVKujMRg==}\n \n+  unist-util-visit@5.0.0:\n+    resolution: {integrity: sha512-MR04uvD+07cwl/yhVuVWAtw+3GOR/knlL55Nd/wAdblk27GCVt3lqpTivy/tkJcZoNPzTwS1Y+KMojlLDhoTzg==}\n+\n   universalify@2.0.1:\n     resolution: {integrity: sha512-gptHNQghINnc/vTGIk0SOFGFNXw7JVrlRUtConJRlvaw6DuX0wO5Jeko9sWrMBhh+PsYAZ7oXAiOnf/UKogyiw==}\n     engines: {node: '>= 10.0.0'}\n \n@@ -8367,14 +8657,23 @@\n   vary@1.1.2:\n     resolution: {integrity: sha512-BNGbWLfd0eUPabhkXUVm0j8uuvREyTh5ovRa/dyow/BqAbZJyC+5fU+IzQOzmAKzYqYRAISoRhdQr3eIZ/PXqg==}\n     engines: {node: '>= 0.8'}\n \n+  vfile-location@5.0.3:\n+    resolution: {integrity: sha512-5yXvWDEgqeiYiBe1lbxYF7UMAIm/IcopxMHrMQDq3nvKcjPKIhZklUKL+AE7J7uApI4kwe2snsK+eI6UTj9EHg==}\n+\n   vfile-message@3.1.4:\n     resolution: {integrity: sha512-fa0Z6P8HUrQN4BZaX05SIVXic+7kE3b05PWAtPuYP9QLHsLKYR7/AlLW3NtOrpXRLeawpDLMsVkmk5DG0NXgWw==}\n \n+  vfile-message@4.0.3:\n+    resolution: {integrity: sha512-QTHzsGd1EhbZs4AsQ20JX1rC3cOlt/IWJruk893DfLRr57lcnOeMaWG4K0JrRta4mIJZKth2Au3mM3u03/JWKw==}\n+\n   vfile@5.3.7:\n     resolution: {integrity: sha512-r7qlzkgErKjobAmyNIkkSpizsFPYiUPuJb5pNW1RB4JcYVZhs4lIbVqk8XPk033CV/1z8ss5pkax8SuhGpcG8g==}\n \n+  vfile@6.0.3:\n+    resolution: {integrity: sha512-KzIbH/9tXat2u30jf+smMwFCsno4wHVdNmzFyL+T/L3UGqqk6JKfVqOFOZEpZSHADH1k40ab6NUIXZq422ov3Q==}\n+\n   victory-vendor@36.9.2:\n     resolution: {integrity: sha512-PnpQQMuxlwYdocC8fIJqVXvkeViHYzotI+NJrCuav0ZYFoq912ZHBk3mCeuj+5/VpodOjPe1z0Fk2ihgzlXqjQ==}\n \n   vite-compatible-readable-stream@3.6.1:\n@@ -8443,8 +8742,11 @@\n   watchpack@2.4.4:\n     resolution: {integrity: sha512-c5EGNOiyxxV5qmTtAB7rbiXxi1ooX1pQKMLX/MIabJjRA0SJBQOjKF+KSVfHkr9U1cADPon0mRiVe/riyaiDUA==}\n     engines: {node: '>=10.13.0'}\n \n+  web-namespaces@2.0.1:\n+    resolution: {integrity: sha512-bKr1DkiNa2krS7qxNtdrtHAmzuYGFQLiQ13TsorsdT6ULTkPLKuu5+GsFpDlg6JFjUTwX2DyhMPG2be8uPrqsQ==}\n+\n   web-vitals@4.2.4:\n     resolution: {integrity: sha512-r4DIlprAGwJ7YM11VZp4R884m0Vmgr6EAKe3P+kO0PPj3Unqyvv59rczf6UiGcb9Z8QxZVcqKNwv/g0WNdWwsw==}\n \n   webidl-conversions@3.0.1:\n@@ -8641,8 +8943,11 @@\n \n   zod@3.25.76:\n     resolution: {integrity: sha512-gzUt/qt81nXsFGKIFcC3YnfEAx5NkunCfnDlvuBSSFS02bcXu4Lmea0AFIUwbLWxWPx3d9p8S5QoaujKcNQxcQ==}\n \n+  zwitch@2.0.4:\n+    resolution: {integrity: sha512-bXE4cR/kVZhKZX/RjPEflHaKVhUVl85noU3v6b8apfQEc1x4A+zBxjZ4lN8LqGd6WZ3dl98pY4o717VFmoPp+A==}\n+\n snapshots:\n \n   '@adobe/css-tools@4.4.4': {}\n \n@@ -9410,9 +9715,9 @@\n       '@emnapi/runtime': 1.5.0\n       '@tybys/wasm-util': 0.10.1\n     optional: true\n \n-  '@napi-rs/wasm-runtime@1.0.3':\n+  '@napi-rs/wasm-runtime@1.0.5':\n     dependencies:\n       '@emnapi/core': 1.5.0\n       '@emnapi/runtime': 1.5.0\n       '@tybys/wasm-util': 0.10.1\n@@ -9753,12 +10058,10 @@\n     dependencies:\n       '@opentelemetry/api': 1.9.0\n       '@opentelemetry/core': 2.1.0(@opentelemetry/api@1.9.0)\n \n-  '@oxc-project/runtime@0.82.3': {}\n+  '@oxc-project/types@0.89.0': {}\n \n-  '@oxc-project/types@0.82.3': {}\n-\n   '@popperjs/core@2.11.8': {}\n \n   '@posthog/react@1.4.0(@types/react@18.3.11)(posthog-js@1.255.1)(react@18.3.1)':\n     dependencies:\n@@ -10239,53 +10542,53 @@\n   '@remirror/core-constants@3.0.0': {}\n \n   '@remix-run/node-fetch-server@0.9.0': {}\n \n-  '@rolldown/binding-android-arm64@1.0.0-beta.34':\n+  '@rolldown/binding-android-arm64@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/binding-darwin-arm64@1.0.0-beta.34':\n+  '@rolldown/binding-darwin-arm64@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/binding-darwin-x64@1.0.0-beta.34':\n+  '@rolldown/binding-darwin-x64@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/binding-freebsd-x64@1.0.0-beta.34':\n+  '@rolldown/binding-freebsd-x64@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/binding-linux-arm-gnueabihf@1.0.0-beta.34':\n+  '@rolldown/binding-linux-arm-gnueabihf@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/binding-linux-arm64-gnu@1.0.0-beta.34':\n+  '@rolldown/binding-linux-arm64-gnu@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/binding-linux-arm64-musl@1.0.0-beta.34':\n+  '@rolldown/binding-linux-arm64-musl@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/binding-linux-x64-gnu@1.0.0-beta.34':\n+  '@rolldown/binding-linux-x64-gnu@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/binding-linux-x64-musl@1.0.0-beta.34':\n+  '@rolldown/binding-linux-x64-musl@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/binding-openharmony-arm64@1.0.0-beta.34':\n+  '@rolldown/binding-openharmony-arm64@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/binding-wasm32-wasi@1.0.0-beta.34':\n+  '@rolldown/binding-wasm32-wasi@1.0.0-beta.38':\n     dependencies:\n-      '@napi-rs/wasm-runtime': 1.0.3\n+      '@napi-rs/wasm-runtime': 1.0.5\n     optional: true\n \n-  '@rolldown/binding-win32-arm64-msvc@1.0.0-beta.34':\n+  '@rolldown/binding-win32-arm64-msvc@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/binding-win32-ia32-msvc@1.0.0-beta.34':\n+  '@rolldown/binding-win32-ia32-msvc@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/binding-win32-x64-msvc@1.0.0-beta.34':\n+  '@rolldown/binding-win32-x64-msvc@1.0.0-beta.38':\n     optional: true\n \n-  '@rolldown/pluginutils@1.0.0-beta.34': {}\n+  '@rolldown/pluginutils@1.0.0-beta.38': {}\n \n   '@rollup/pluginutils@5.2.0(rollup@4.52.4)':\n     dependencies:\n       '@types/estree': 1.0.8\n@@ -11499,8 +11802,12 @@\n   '@types/mdast@3.0.15':\n     dependencies:\n       '@types/unist': 2.0.11\n \n+  '@types/mdast@4.0.4':\n+    dependencies:\n+      '@types/unist': 3.0.3\n+\n   '@types/mdurl@1.0.5': {}\n \n   '@types/mdurl@2.0.0': {}\n \n@@ -12272,8 +12579,10 @@\n       upper-case-first: 2.0.2\n \n   case-sensitive-paths-webpack-plugin@2.4.0: {}\n \n+  ccount@2.0.1: {}\n+\n   chai@5.3.3:\n     dependencies:\n       assertion-error: 2.0.1\n       check-error: 2.1.1\n@@ -12317,8 +12626,12 @@\n       sentence-case: 3.0.4\n       snake-case: 3.0.4\n       tslib: 2.8.1\n \n+  character-entities-html4@2.1.0: {}\n+\n+  character-entities-legacy@3.0.0: {}\n+\n   character-entities@2.0.2: {}\n \n   check-error@2.1.1: {}\n \n@@ -12846,8 +13159,10 @@\n   entities@4.5.0: {}\n \n   entities@5.0.0: {}\n \n+  entities@6.0.1: {}\n+\n   err-code@2.0.3: {}\n \n   error-ex@1.3.4:\n     dependencies:\n@@ -12998,8 +13313,10 @@\n   escape-string-regexp@1.0.5: {}\n \n   escape-string-regexp@4.0.0: {}\n \n+  escape-string-regexp@5.0.0: {}\n+\n   eslint-config-next@14.2.32(eslint@8.57.1)(typescript@5.8.3):\n     dependencies:\n       '@next/eslint-plugin-next': 14.2.32\n       '@rushstack/eslint-patch': 1.12.0\n@@ -13627,10 +13944,119 @@\n   hasown@2.0.2:\n     dependencies:\n       function-bind: 1.1.2\n \n+  hast-util-embedded@3.0.0:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      hast-util-is-element: 3.0.0\n+\n+  hast-util-from-html@2.0.3:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      devlop: 1.1.0\n+      hast-util-from-parse5: 8.0.3\n+      parse5: 7.3.0\n+      vfile: 6.0.3\n+      vfile-message: 4.0.3\n+\n+  hast-util-from-parse5@8.0.3:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      '@types/unist': 3.0.3\n+      devlop: 1.1.0\n+      hastscript: 9.0.1\n+      property-information: 7.1.0\n+      vfile: 6.0.3\n+      vfile-location: 5.0.3\n+      web-namespaces: 2.0.1\n+\n+  hast-util-has-property@3.0.0:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+\n+  hast-util-is-body-ok-link@3.0.1:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+\n+  hast-util-is-element@3.0.0:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+\n+  hast-util-minify-whitespace@1.0.1:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      hast-util-embedded: 3.0.0\n+      hast-util-is-element: 3.0.0\n+      hast-util-whitespace: 3.0.0\n+      unist-util-is: 6.0.0\n+\n+  hast-util-parse-selector@4.0.0:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+\n+  hast-util-phrasing@3.0.1:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      hast-util-embedded: 3.0.0\n+      hast-util-has-property: 3.0.0\n+      hast-util-is-body-ok-link: 3.0.1\n+      hast-util-is-element: 3.0.0\n+\n+  hast-util-to-html@9.0.5:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      '@types/unist': 3.0.3\n+      ccount: 2.0.1\n+      comma-separated-tokens: 2.0.3\n+      hast-util-whitespace: 3.0.0\n+      html-void-elements: 3.0.0\n+      mdast-util-to-hast: 13.2.0\n+      property-information: 7.1.0\n+      space-separated-tokens: 2.0.2\n+      stringify-entities: 4.0.4\n+      zwitch: 2.0.4\n+\n+  hast-util-to-mdast@10.1.2:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      '@types/mdast': 4.0.4\n+      '@ungap/structured-clone': 1.3.0\n+      hast-util-phrasing: 3.0.1\n+      hast-util-to-html: 9.0.5\n+      hast-util-to-text: 4.0.2\n+      hast-util-whitespace: 3.0.0\n+      mdast-util-phrasing: 4.1.0\n+      mdast-util-to-hast: 13.2.0\n+      mdast-util-to-string: 4.0.0\n+      rehype-minify-whitespace: 6.0.2\n+      trim-trailing-lines: 2.1.0\n+      unist-util-position: 5.0.0\n+      unist-util-visit: 5.0.0\n+\n+  hast-util-to-text@4.0.2:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      '@types/unist': 3.0.3\n+      hast-util-is-element: 3.0.0\n+      unist-util-find-after: 5.0.0\n+\n   hast-util-whitespace@2.0.1: {}\n \n+  hast-util-whitespace@3.0.0:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+\n+  hast@1.0.0: {}\n+\n+  hastscript@9.0.1:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      comma-separated-tokens: 2.0.3\n+      hast-util-parse-selector: 4.0.0\n+      property-information: 7.1.0\n+      space-separated-tokens: 2.0.2\n+\n   he@1.2.0: {}\n \n   header-case@2.0.4:\n     dependencies:\n@@ -13668,8 +14094,10 @@\n       param-case: 3.0.4\n       relateurl: 0.2.7\n       terser: 5.43.1\n \n+  html-void-elements@3.0.0: {}\n+\n   html-webpack-plugin@5.6.4(webpack@5.101.3(@swc/core@1.13.5(@swc/helpers@0.5.17))(esbuild@0.25.0)):\n     dependencies:\n       '@types/html-minifier-terser': 6.1.0\n       html-minifier-terser: 6.1.0\n@@ -14116,8 +14544,10 @@\n       ms: 2.1.3\n       safe-stable-stringify: 2.5.0\n       triple-beam: 1.4.1\n \n+  longest-streak@3.1.0: {}\n+\n   loose-envify@1.4.0:\n     dependencies:\n       js-tokens: 4.0.0\n \n@@ -14171,8 +14601,10 @@\n       mdurl: 2.0.0\n       punycode.js: 2.3.1\n       uc.micro: 2.1.0\n \n+  markdown-table@3.0.4: {}\n+\n   masonry-layout@4.2.2:\n     dependencies:\n       get-size: 2.0.3\n       outlayer: 2.1.1\n@@ -14186,8 +14618,15 @@\n       '@types/mdast': 3.0.15\n       '@types/unist': 2.0.11\n       unist-util-visit: 4.1.2\n \n+  mdast-util-find-and-replace@3.0.2:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+      escape-string-regexp: 5.0.0\n+      unist-util-is: 6.0.0\n+      unist-util-visit-parents: 6.0.1\n+\n   mdast-util-from-markdown@1.3.1:\n     dependencies:\n       '@types/mdast': 3.0.15\n       '@types/unist': 2.0.11\n@@ -14203,8 +14642,87 @@\n       uvu: 0.5.6\n     transitivePeerDependencies:\n       - supports-color\n \n+  mdast-util-from-markdown@2.0.2:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+      '@types/unist': 3.0.3\n+      decode-named-character-reference: 1.2.0\n+      devlop: 1.1.0\n+      mdast-util-to-string: 4.0.0\n+      micromark: 4.0.2\n+      micromark-util-decode-numeric-character-reference: 2.0.2\n+      micromark-util-decode-string: 2.0.1\n+      micromark-util-normalize-identifier: 2.0.1\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+      unist-util-stringify-position: 4.0.0\n+    transitivePeerDependencies:\n+      - supports-color\n+\n+  mdast-util-gfm-autolink-literal@2.0.1:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+      ccount: 2.0.1\n+      devlop: 1.1.0\n+      mdast-util-find-and-replace: 3.0.2\n+      micromark-util-character: 2.1.1\n+\n+  mdast-util-gfm-footnote@2.1.0:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+      devlop: 1.1.0\n+      mdast-util-from-markdown: 2.0.2\n+      mdast-util-to-markdown: 2.1.2\n+      micromark-util-normalize-identifier: 2.0.1\n+    transitivePeerDependencies:\n+      - supports-color\n+\n+  mdast-util-gfm-strikethrough@2.0.0:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+      mdast-util-from-markdown: 2.0.2\n+      mdast-util-to-markdown: 2.1.2\n+    transitivePeerDependencies:\n+      - supports-color\n+\n+  mdast-util-gfm-table@2.0.0:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+      devlop: 1.1.0\n+      markdown-table: 3.0.4\n+      mdast-util-from-markdown: 2.0.2\n+      mdast-util-to-markdown: 2.1.2\n+    transitivePeerDependencies:\n+      - supports-color\n+\n+  mdast-util-gfm-task-list-item@2.0.0:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+      devlop: 1.1.0\n+      mdast-util-from-markdown: 2.0.2\n+      mdast-util-to-markdown: 2.1.2\n+    transitivePeerDependencies:\n+      - supports-color\n+\n+  mdast-util-gfm@3.1.0:\n+    dependencies:\n+      mdast-util-from-markdown: 2.0.2\n+      mdast-util-gfm-autolink-literal: 2.0.1\n+      mdast-util-gfm-footnote: 2.1.0\n+      mdast-util-gfm-strikethrough: 2.0.0\n+      mdast-util-gfm-table: 2.0.0\n+      mdast-util-gfm-task-list-item: 2.0.0\n+      mdast-util-to-markdown: 2.1.2\n+    transitivePeerDependencies:\n+      - supports-color\n+\n+  mdast-util-phrasing@4.1.0:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+      unist-util-is: 6.0.0\n+\n   mdast-util-to-hast@12.3.0:\n     dependencies:\n       '@types/hast': 2.3.10\n       '@types/mdast': 3.0.15\n@@ -14214,12 +14732,42 @@\n       unist-util-generated: 2.0.1\n       unist-util-position: 4.0.4\n       unist-util-visit: 4.1.2\n \n+  mdast-util-to-hast@13.2.0:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      '@types/mdast': 4.0.4\n+      '@ungap/structured-clone': 1.3.0\n+      devlop: 1.1.0\n+      micromark-util-sanitize-uri: 2.0.1\n+      trim-lines: 3.0.1\n+      unist-util-position: 5.0.0\n+      unist-util-visit: 5.0.0\n+      vfile: 6.0.3\n+\n+  mdast-util-to-markdown@2.1.2:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+      '@types/unist': 3.0.3\n+      longest-streak: 3.1.0\n+      mdast-util-phrasing: 4.1.0\n+      mdast-util-to-string: 4.0.0\n+      micromark-util-classify-character: 2.0.1\n+      micromark-util-decode-string: 2.0.1\n+      unist-util-visit: 5.0.0\n+      zwitch: 2.0.4\n+\n   mdast-util-to-string@3.2.0:\n     dependencies:\n       '@types/mdast': 3.0.15\n \n+  mdast-util-to-string@4.0.0:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+\n+  mdast@3.0.0: {}\n+\n   mdn-data@2.0.14: {}\n \n   mdurl@2.0.0: {}\n \n@@ -14261,100 +14809,269 @@\n       micromark-util-symbol: 1.1.0\n       micromark-util-types: 1.1.0\n       uvu: 0.5.6\n \n+  micromark-core-commonmark@2.0.3:\n+    dependencies:\n+      decode-named-character-reference: 1.2.0\n+      devlop: 1.1.0\n+      micromark-factory-destination: 2.0.1\n+      micromark-factory-label: 2.0.1\n+      micromark-factory-space: 2.0.1\n+      micromark-factory-title: 2.0.1\n+      micromark-factory-whitespace: 2.0.1\n+      micromark-util-character: 2.1.1\n+      micromark-util-chunked: 2.0.1\n+      micromark-util-classify-character: 2.0.1\n+      micromark-util-html-tag-name: 2.0.1\n+      micromark-util-normalize-identifier: 2.0.1\n+      micromark-util-resolve-all: 2.0.1\n+      micromark-util-subtokenize: 2.1.0\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n+  micromark-extension-gfm-autolink-literal@2.1.0:\n+    dependencies:\n+      micromark-util-character: 2.1.1\n+      micromark-util-sanitize-uri: 2.0.1\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n+  micromark-extension-gfm-footnote@2.1.0:\n+    dependencies:\n+      devlop: 1.1.0\n+      micromark-core-commonmark: 2.0.3\n+      micromark-factory-space: 2.0.1\n+      micromark-util-character: 2.1.1\n+      micromark-util-normalize-identifier: 2.0.1\n+      micromark-util-sanitize-uri: 2.0.1\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n+  micromark-extension-gfm-strikethrough@2.1.0:\n+    dependencies:\n+      devlop: 1.1.0\n+      micromark-util-chunked: 2.0.1\n+      micromark-util-classify-character: 2.0.1\n+      micromark-util-resolve-all: 2.0.1\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n+  micromark-extension-gfm-table@2.1.1:\n+    dependencies:\n+      devlop: 1.1.0\n+      micromark-factory-space: 2.0.1\n+      micromark-util-character: 2.1.1\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n+  micromark-extension-gfm-tagfilter@2.0.0:\n+    dependencies:\n+      micromark-util-types: 2.0.2\n+\n+  micromark-extension-gfm-task-list-item@2.1.0:\n+    dependencies:\n+      devlop: 1.1.0\n+      micromark-factory-space: 2.0.1\n+      micromark-util-character: 2.1.1\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n+  micromark-extension-gfm@3.0.0:\n+    dependencies:\n+      micromark-extension-gfm-autolink-literal: 2.1.0\n+      micromark-extension-gfm-footnote: 2.1.0\n+      micromark-extension-gfm-strikethrough: 2.1.0\n+      micromark-extension-gfm-table: 2.1.1\n+      micromark-extension-gfm-tagfilter: 2.0.0\n+      micromark-extension-gfm-task-list-item: 2.1.0\n+      micromark-util-combine-extensions: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n   micromark-factory-destination@1.1.0:\n     dependencies:\n       micromark-util-character: 1.2.0\n       micromark-util-symbol: 1.1.0\n       micromark-util-types: 1.1.0\n \n+  micromark-factory-destination@2.0.1:\n+    dependencies:\n+      micromark-util-character: 2.1.1\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n   micromark-factory-label@1.1.0:\n     dependencies:\n       micromark-util-character: 1.2.0\n       micromark-util-symbol: 1.1.0\n       micromark-util-types: 1.1.0\n       uvu: 0.5.6\n \n+  micromark-factory-label@2.0.1:\n+    dependencies:\n+      devlop: 1.1.0\n+      micromark-util-character: 2.1.1\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n   micromark-factory-space@1.1.0:\n     dependencies:\n       micromark-util-character: 1.2.0\n       micromark-util-types: 1.1.0\n \n+  micromark-factory-space@2.0.1:\n+    dependencies:\n+      micromark-util-character: 2.1.1\n+      micromark-util-types: 2.0.2\n+\n   micromark-factory-title@1.1.0:\n     dependencies:\n       micromark-factory-space: 1.1.0\n       micromark-util-character: 1.2.0\n       micromark-util-symbol: 1.1.0\n       micromark-util-types: 1.1.0\n \n+  micromark-factory-title@2.0.1:\n+    dependencies:\n+      micromark-factory-space: 2.0.1\n+      micromark-util-character: 2.1.1\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n   micromark-factory-whitespace@1.1.0:\n     dependencies:\n       micromark-factory-space: 1.1.0\n       micromark-util-character: 1.2.0\n       micromark-util-symbol: 1.1.0\n       micromark-util-types: 1.1.0\n \n+  micromark-factory-whitespace@2.0.1:\n+    dependencies:\n+      micromark-factory-space: 2.0.1\n+      micromark-util-character: 2.1.1\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n   micromark-util-character@1.2.0:\n     dependencies:\n       micromark-util-symbol: 1.1.0\n       micromark-util-types: 1.1.0\n \n+  micromark-util-character@2.1.1:\n+    dependencies:\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n   micromark-util-chunked@1.1.0:\n     dependencies:\n       micromark-util-symbol: 1.1.0\n \n+  micromark-util-chunked@2.0.1:\n+    dependencies:\n+      micromark-util-symbol: 2.0.1\n+\n   micromark-util-classify-character@1.1.0:\n     dependencies:\n       micromark-util-character: 1.2.0\n       micromark-util-symbol: 1.1.0\n       micromark-util-types: 1.1.0\n \n+  micromark-util-classify-character@2.0.1:\n+    dependencies:\n+      micromark-util-character: 2.1.1\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n   micromark-util-combine-extensions@1.1.0:\n     dependencies:\n       micromark-util-chunked: 1.1.0\n       micromark-util-types: 1.1.0\n \n+  micromark-util-combine-extensions@2.0.1:\n+    dependencies:\n+      micromark-util-chunked: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n   micromark-util-decode-numeric-character-reference@1.1.0:\n     dependencies:\n       micromark-util-symbol: 1.1.0\n \n+  micromark-util-decode-numeric-character-reference@2.0.2:\n+    dependencies:\n+      micromark-util-symbol: 2.0.1\n+\n   micromark-util-decode-string@1.1.0:\n     dependencies:\n       decode-named-character-reference: 1.2.0\n       micromark-util-character: 1.2.0\n       micromark-util-decode-numeric-character-reference: 1.1.0\n       micromark-util-symbol: 1.1.0\n \n+  micromark-util-decode-string@2.0.1:\n+    dependencies:\n+      decode-named-character-reference: 1.2.0\n+      micromark-util-character: 2.1.1\n+      micromark-util-decode-numeric-character-reference: 2.0.2\n+      micromark-util-symbol: 2.0.1\n+\n   micromark-util-encode@1.1.0: {}\n \n+  micromark-util-encode@2.0.1: {}\n+\n   micromark-util-html-tag-name@1.2.0: {}\n \n+  micromark-util-html-tag-name@2.0.1: {}\n+\n   micromark-util-normalize-identifier@1.1.0:\n     dependencies:\n       micromark-util-symbol: 1.1.0\n \n+  micromark-util-normalize-identifier@2.0.1:\n+    dependencies:\n+      micromark-util-symbol: 2.0.1\n+\n   micromark-util-resolve-all@1.1.0:\n     dependencies:\n       micromark-util-types: 1.1.0\n \n+  micromark-util-resolve-all@2.0.1:\n+    dependencies:\n+      micromark-util-types: 2.0.2\n+\n   micromark-util-sanitize-uri@1.2.0:\n     dependencies:\n       micromark-util-character: 1.2.0\n       micromark-util-encode: 1.1.0\n       micromark-util-symbol: 1.1.0\n \n+  micromark-util-sanitize-uri@2.0.1:\n+    dependencies:\n+      micromark-util-character: 2.1.1\n+      micromark-util-encode: 2.0.1\n+      micromark-util-symbol: 2.0.1\n+\n   micromark-util-subtokenize@1.1.0:\n     dependencies:\n       micromark-util-chunked: 1.1.0\n       micromark-util-symbol: 1.1.0\n       micromark-util-types: 1.1.0\n       uvu: 0.5.6\n \n+  micromark-util-subtokenize@2.1.0:\n+    dependencies:\n+      devlop: 1.1.0\n+      micromark-util-chunked: 2.0.1\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+\n   micromark-util-symbol@1.1.0: {}\n \n+  micromark-util-symbol@2.0.1: {}\n+\n   micromark-util-types@1.1.0: {}\n \n+  micromark-util-types@2.0.2: {}\n+\n   micromark@3.2.0:\n     dependencies:\n       '@types/debug': 4.1.12\n       debug: 4.4.3\n@@ -14375,8 +15092,30 @@\n       uvu: 0.5.6\n     transitivePeerDependencies:\n       - supports-color\n \n+  micromark@4.0.2:\n+    dependencies:\n+      '@types/debug': 4.1.12\n+      debug: 4.4.3\n+      decode-named-character-reference: 1.2.0\n+      devlop: 1.1.0\n+      micromark-core-commonmark: 2.0.3\n+      micromark-factory-space: 2.0.1\n+      micromark-util-character: 2.1.1\n+      micromark-util-chunked: 2.0.1\n+      micromark-util-combine-extensions: 2.0.1\n+      micromark-util-decode-numeric-character-reference: 2.0.2\n+      micromark-util-encode: 2.0.1\n+      micromark-util-normalize-identifier: 2.0.1\n+      micromark-util-resolve-all: 2.0.1\n+      micromark-util-sanitize-uri: 2.0.1\n+      micromark-util-subtokenize: 2.1.0\n+      micromark-util-symbol: 2.0.1\n+      micromark-util-types: 2.0.2\n+    transitivePeerDependencies:\n+      - supports-color\n+\n   micromatch@4.0.8:\n     dependencies:\n       braces: 3.0.3\n       picomatch: 2.3.1\n@@ -14474,9 +15213,9 @@\n   negotiator@0.6.4: {}\n \n   neo-async@2.6.2: {}\n \n-  next-themes@0.2.1(next@14.2.32(@babel/core@7.28.4)(@opentelemetry/api@1.9.0)(babel-plugin-macros@3.1.0)(react-dom@18.3.1(react@18.3.1))(react@18.3.1))(react-dom@18.3.1(react@18.3.1))(react@18.3.1):\n+  next-themes@0.2.1(next@14.2.32(@opentelemetry/api@1.9.0)(babel-plugin-macros@3.1.0)(react-dom@18.3.1(react@18.3.1))(react@18.3.1))(react-dom@18.3.1(react@18.3.1))(react@18.3.1):\n     dependencies:\n       next: 14.2.32(@babel/core@7.28.4)(@opentelemetry/api@1.9.0)(babel-plugin-macros@3.1.0)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n       react: 18.3.1\n       react-dom: 18.3.1(react@18.3.1)\n@@ -14725,8 +15464,12 @@\n       lines-and-columns: 1.2.4\n \n   parse-svg-path@0.1.2: {}\n \n+  parse5@7.3.0:\n+    dependencies:\n+      entities: 6.0.1\n+\n   parseurl@1.3.3: {}\n \n   pascal-case@3.1.2:\n     dependencies:\n@@ -14967,8 +15710,10 @@\n       react-is: 16.13.1\n \n   property-information@6.5.0: {}\n \n+  property-information@7.1.0: {}\n+\n   prosemirror-changeset@2.3.1:\n     dependencies:\n       prosemirror-transform: 1.10.4\n \n@@ -15426,25 +16171,70 @@\n   registry-url@3.1.0:\n     dependencies:\n       rc: 1.2.8\n \n+  rehype-minify-whitespace@6.0.2:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      hast-util-minify-whitespace: 1.0.1\n+\n+  rehype-parse@9.0.1:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      hast-util-from-html: 2.0.3\n+      unified: 11.0.5\n+\n+  rehype-remark@10.0.1:\n+    dependencies:\n+      '@types/hast': 3.0.4\n+      '@types/mdast': 4.0.4\n+      hast-util-to-mdast: 10.1.2\n+      unified: 11.0.5\n+      vfile: 6.0.3\n+\n   relateurl@0.2.7: {}\n \n+  remark-gfm@4.0.1:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+      mdast-util-gfm: 3.1.0\n+      micromark-extension-gfm: 3.0.0\n+      remark-parse: 11.0.0\n+      remark-stringify: 11.0.0\n+      unified: 11.0.5\n+    transitivePeerDependencies:\n+      - supports-color\n+\n   remark-parse@10.0.2:\n     dependencies:\n       '@types/mdast': 3.0.15\n       mdast-util-from-markdown: 1.3.1\n       unified: 10.1.2\n     transitivePeerDependencies:\n       - supports-color\n \n+  remark-parse@11.0.0:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+      mdast-util-from-markdown: 2.0.2\n+      micromark-util-types: 2.0.2\n+      unified: 11.0.5\n+    transitivePeerDependencies:\n+      - supports-color\n+\n   remark-rehype@10.1.0:\n     dependencies:\n       '@types/hast': 2.3.10\n       '@types/mdast': 3.0.15\n       mdast-util-to-hast: 12.3.0\n       unified: 10.1.2\n \n+  remark-stringify@11.0.0:\n+    dependencies:\n+      '@types/mdast': 4.0.4\n+      mdast-util-to-markdown: 2.1.2\n+      unified: 11.0.5\n+\n   renderkid@3.0.0:\n     dependencies:\n       css-select: 4.3.0\n       dom-converter: 0.2.0\n@@ -15491,9 +16281,9 @@\n   rimraf@3.0.2:\n     dependencies:\n       glob: 11.1.0\n \n-  rolldown-plugin-dts@0.16.11(rolldown@1.0.0-beta.34)(typescript@5.8.3):\n+  rolldown-plugin-dts@0.16.11(rolldown@1.0.0-beta.38)(typescript@5.8.3):\n     dependencies:\n       '@babel/generator': 7.28.3\n       '@babel/parser': 7.28.4\n       '@babel/types': 7.28.4\n@@ -15502,36 +16292,35 @@\n       debug: 4.4.3\n       dts-resolver: 2.1.2\n       get-tsconfig: 4.10.1\n       magic-string: 0.30.19\n-      rolldown: 1.0.0-beta.34\n+      rolldown: 1.0.0-beta.38\n     optionalDependencies:\n       typescript: 5.8.3\n     transitivePeerDependencies:\n       - oxc-resolver\n       - supports-color\n \n-  rolldown@1.0.0-beta.34:\n+  rolldown@1.0.0-beta.38:\n     dependencies:\n-      '@oxc-project/runtime': 0.82.3\n-      '@oxc-project/types': 0.82.3\n-      '@rolldown/pluginutils': 1.0.0-beta.34\n+      '@oxc-project/types': 0.89.0\n+      '@rolldown/pluginutils': 1.0.0-beta.38\n       ansis: 4.2.0\n     optionalDependencies:\n-      '@rolldown/binding-android-arm64': 1.0.0-beta.34\n-      '@rolldown/binding-darwin-arm64': 1.0.0-beta.34\n-      '@rolldown/binding-darwin-x64': 1.0.0-beta.34\n-      '@rolldown/binding-freebsd-x64': 1.0.0-beta.34\n-      '@rolldown/binding-linux-arm-gnueabihf': 1.0.0-beta.34\n-      '@rolldown/binding-linux-arm64-gnu': 1.0.0-beta.34\n-      '@rolldown/binding-linux-arm64-musl': 1.0.0-beta.34\n-      '@rolldown/binding-linux-x64-gnu': 1.0.0-beta.34\n-      '@rolldown/binding-linux-x64-musl': 1.0.0-beta.34\n-      '@rolldown/binding-openharmony-arm64': 1.0.0-beta.34\n-      '@rolldown/binding-wasm32-wasi': 1.0.0-beta.34\n-      '@rolldown/binding-win32-arm64-msvc': 1.0.0-beta.34\n-      '@rolldown/binding-win32-ia32-msvc': 1.0.0-beta.34\n-      '@rolldown/binding-win32-x64-msvc': 1.0.0-beta.34\n+      '@rolldown/binding-android-arm64': 1.0.0-beta.38\n+      '@rolldown/binding-darwin-arm64': 1.0.0-beta.38\n+      '@rolldown/binding-darwin-x64': 1.0.0-beta.38\n+      '@rolldown/binding-freebsd-x64': 1.0.0-beta.38\n+      '@rolldown/binding-linux-arm-gnueabihf': 1.0.0-beta.38\n+      '@rolldown/binding-linux-arm64-gnu': 1.0.0-beta.38\n+      '@rolldown/binding-linux-arm64-musl': 1.0.0-beta.38\n+      '@rolldown/binding-linux-x64-gnu': 1.0.0-beta.38\n+      '@rolldown/binding-linux-x64-musl': 1.0.0-beta.38\n+      '@rolldown/binding-openharmony-arm64': 1.0.0-beta.38\n+      '@rolldown/binding-wasm32-wasi': 1.0.0-beta.38\n+      '@rolldown/binding-win32-arm64-msvc': 1.0.0-beta.38\n+      '@rolldown/binding-win32-ia32-msvc': 1.0.0-beta.38\n+      '@rolldown/binding-win32-x64-msvc': 1.0.0-beta.38\n \n   rollup@4.52.4:\n     dependencies:\n       '@types/estree': 1.0.8\n@@ -15912,8 +16701,13 @@\n   string_decoder@1.3.0:\n     dependencies:\n       safe-buffer: 5.2.1\n \n+  stringify-entities@4.0.4:\n+    dependencies:\n+      character-entities-html4: 2.1.0\n+      character-entities-legacy: 3.0.0\n+\n   strip-ansi@6.0.1:\n     dependencies:\n       ansi-regex: 5.0.1\n \n@@ -16117,8 +16911,10 @@\n   tree-kill@1.2.2: {}\n \n   trim-lines@3.0.1: {}\n \n+  trim-trailing-lines@2.1.0: {}\n+\n   triple-beam@1.4.1: {}\n \n   trough@2.2.0: {}\n \n@@ -16155,10 +16951,10 @@\n       debug: 4.4.3\n       diff: 8.0.2\n       empathic: 2.0.0\n       hookable: 5.5.3\n-      rolldown: 1.0.0-beta.34\n-      rolldown-plugin-dts: 0.16.11(rolldown@1.0.0-beta.34)(typescript@5.8.3)\n+      rolldown: 1.0.0-beta.38\n+      rolldown-plugin-dts: 0.16.11(rolldown@1.0.0-beta.38)(typescript@5.8.3)\n       semver: 7.7.2\n       tinyexec: 1.0.1\n       tinyglobby: 0.2.15\n       tree-kill: 1.2.2\n@@ -16296,33 +17092,71 @@\n       is-plain-obj: 4.1.0\n       trough: 2.2.0\n       vfile: 5.3.7\n \n+  unified@11.0.5:\n+    dependencies:\n+      '@types/unist': 3.0.3\n+      bail: 2.0.2\n+      devlop: 1.1.0\n+      extend: 3.0.2\n+      is-plain-obj: 4.1.0\n+      trough: 2.2.0\n+      vfile: 6.0.3\n+\n+  unist-util-find-after@5.0.0:\n+    dependencies:\n+      '@types/unist': 3.0.3\n+      unist-util-is: 6.0.0\n+\n   unist-util-generated@2.0.1: {}\n \n   unist-util-is@5.2.1:\n     dependencies:\n       '@types/unist': 2.0.11\n \n+  unist-util-is@6.0.0:\n+    dependencies:\n+      '@types/unist': 3.0.3\n+\n   unist-util-position@4.0.4:\n     dependencies:\n       '@types/unist': 2.0.11\n \n+  unist-util-position@5.0.0:\n+    dependencies:\n+      '@types/unist': 3.0.3\n+\n   unist-util-stringify-position@3.0.3:\n     dependencies:\n       '@types/unist': 2.0.11\n \n+  unist-util-stringify-position@4.0.0:\n+    dependencies:\n+      '@types/unist': 3.0.3\n+\n   unist-util-visit-parents@5.1.3:\n     dependencies:\n       '@types/unist': 2.0.11\n       unist-util-is: 5.2.1\n \n+  unist-util-visit-parents@6.0.1:\n+    dependencies:\n+      '@types/unist': 3.0.3\n+      unist-util-is: 6.0.0\n+\n   unist-util-visit@4.1.2:\n     dependencies:\n       '@types/unist': 2.0.11\n       unist-util-is: 5.2.1\n       unist-util-visit-parents: 5.1.3\n \n+  unist-util-visit@5.0.0:\n+    dependencies:\n+      '@types/unist': 3.0.3\n+      unist-util-is: 6.0.0\n+      unist-util-visit-parents: 6.0.1\n+\n   universalify@2.0.1: {}\n \n   unpipe@1.0.0: {}\n \n@@ -16457,20 +17291,35 @@\n   validate-npm-package-name@5.0.1: {}\n \n   vary@1.1.2: {}\n \n+  vfile-location@5.0.3:\n+    dependencies:\n+      '@types/unist': 3.0.3\n+      vfile: 6.0.3\n+\n   vfile-message@3.1.4:\n     dependencies:\n       '@types/unist': 2.0.11\n       unist-util-stringify-position: 3.0.3\n \n+  vfile-message@4.0.3:\n+    dependencies:\n+      '@types/unist': 3.0.3\n+      unist-util-stringify-position: 4.0.0\n+\n   vfile@5.3.7:\n     dependencies:\n       '@types/unist': 2.0.11\n       is-buffer: 2.0.5\n       unist-util-stringify-position: 3.0.3\n       vfile-message: 3.1.4\n \n+  vfile@6.0.3:\n+    dependencies:\n+      '@types/unist': 3.0.3\n+      vfile-message: 4.0.3\n+\n   victory-vendor@36.9.2:\n     dependencies:\n       '@types/d3-array': 3.2.1\n       '@types/d3-ease': 3.0.2\n@@ -16550,8 +17399,10 @@\n     dependencies:\n       glob-to-regexp: 0.4.1\n       graceful-fs: 4.2.11\n \n+  web-namespaces@2.0.1: {}\n+\n   web-vitals@4.2.4: {}\n \n   webidl-conversions@3.0.1: {}\n \n@@ -16769,4 +17620,6 @@\n     dependencies:\n       zod: 3.25.76\n \n   zod@3.25.76: {}\n+\n+  zwitch@2.0.4: {}\n"
        }
      ]
    },
    {
      "id": "fix-project-access",
      "sha": "60220801acf3b0242a52c993d49ab314e5063979",
      "parentSha": "8db95d9ec0872f031fa4cb05ea56aa0f9abb754f",
      "spec": "Implement improved project access handling and UI behavior across backend and frontend.\n\nBackend (Django API)\n1) Enforce correct permission and error handling in ProjectViewSet.retrieve\n- File: apps/api/plane/app/views/project/base.py\n- Behavior: Do not filter by project membership in the initial queryset. Retrieve the project by pk within the given workspace and ensure archived_at is null. If not found, return 404.\n- After retrieving, check if the requesting user is a project member using the prefetched members_list.\n  - If not a member and project.network == ProjectNetwork.SECRET, return 403 with an error message like \"You do not have permission\".\n  - If not a member and project.network is public, return 409 with an error message like \"You are not a member of this project\".\n- Only record recent_visited_task and return the serialized project if the user is allowed to access it.\n- Ensure ProjectNetwork is imported and used for network comparison.\n\n2) Export ProjectNetwork in models init\n- File: apps/api/plane/db/models/__init__.py\n- Add ProjectNetwork to the exported names from .project so it can be imported elsewhere.\n\nFrontend (Web App)\nA) Centralize project access gating and reduce loading flicker\n1) Refactor ProjectAuthWrapper to new behavior\n- File: apps/web/core/layouts/auth-layout/project-wrapper.tsx\n- Make projectId a required prop.\n- Use SWR to fetch project details with a stable key and capture isLoading and error from PROJECT_DETAILS. Do not gate keys by checking workspaceSlug/projectId; rely on key generator to handle state. Keep other SWR calls for labels, members, states, intake state, estimates, cycles, modules (slim + full via Promise.all), and views with revalidateIfStale: false and revalidateOnFocus: false where applicable.\n- Remove usage of the old JoinProject component. Instead, render ProjectAccessRestriction when hasPermissionToCurrentProject is false, passing:\n  - errorStatusCode from the failed PROJECT_DETAILS call (error.status).\n  - isWorkspaceAdmin derived from allowPermissions at workspace level.\n  - handleJoinProject: calls joinProject(workspaceSlug, projectId), then fetchProjectDetails, and manages a local isJoiningProject disabled state.\n  - isJoinButtonDisabled bound to isJoiningProject.\n- During initial load (parent isLoading or project details SWR isLoading without error), render nothing (avoid showing spinners to prevent flicker). Otherwise, render children.\n\n2) Update CE alias wrapper to require projectId\n- File: apps/web/ce/layouts/project-wrapper.tsx\n- Change IProjectAuthWrapper.projectId from optional to required and pass through unchanged to the core wrapper.\n\n3) Remove old JoinProject component\n- File: apps/web/core/components/auth-screens/project/join-project.tsx\n- Delete the component and eliminate its imports/usages in the codebase in favor of ProjectAccessRestriction (see below).\n\n4) Add new ProjectAccessRestriction component\n- File: apps/web/core/components/auth-screens/project/project-access-restriction.tsx\n- Behavior: Render EmptyStateDetailed using i18n strings under project_empty_state.*\n  - If errorStatusCode is 409, or 403 with isWorkspaceAdmin true, show a join CTA calling handleJoinProject (disabled when isJoinButtonDisabled).\n  - If errorStatusCode is 403 and user is not a workspace admin, show a restricted message without CTA.\n  - Otherwise (404 or any other), show an invalid project empty state.\n\n5) Update ProjectService.getProject error propagation\n- File: apps/web/core/services/project/project.service.ts\n- Ensure getProject throws error.response (not error.response.data) in its catch handler so calling code can inspect error.status.\n\nB) Layouts, routes, and rendering behavior improvements\n1) Wrap project detail layout with ProjectAuthWrapper\n- File: apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/layout.tsx\n- Wrap the Outlet with <ProjectAuthWrapper workspaceSlug={workspaceSlug} projectId={projectId}>.\n\n2) Create a dedicated project settings layout with access gating\n- File: apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/layout.tsx (new)\n- Render SettingsMobileNav and ProjectSettingsSidebar, and wrap the Outlet in ProjectAuthWrapper using workspaceSlug and projectId.\n\n3) Simplify settings projects root layout\n- File: apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/layout.tsx\n- Remove sidebars and auth wrapper from this level; return only <Outlet />. The nested [projectId]/layout.tsx handles sidebar and authorization.\n\n4) Update routes to reflect new layout structure and archived projects placement\n- File: apps/web/app/routes/core.ts\n- Move the Archived Projects route group (archives page) outside the project detail route group as a sibling under projects/(detail)/archives/.\n- Restructure project detail children to match the new layout arrangement without the extra wrapping layout that used to exist, keeping route paths the same.\n- Under settings, nest all project settings routes beneath the new [projectId]/layout.tsx so they inherit ProjectAuthWrapper and sidebar.\n\nC) Reduce loading flicker and improve error gating across pages\n1) Issue Details browse page\n- File: apps/web/app/(all)/[workspaceSlug]/(projects)/browse/[workItem]/page.tsx\n- Only show the EmptyState component when error is truthy and the issue loader is not running (error && !issueLoader).\n\n2) Issue layout roots and views\n- Files:\n  - apps/web/core/components/issues/issue-layouts/roots/archived-issue-layout-root.tsx\n  - apps/web/core/components/issues/issue-layouts/roots/cycle-layout-root.tsx\n  - apps/web/core/components/issues/issue-layouts/roots/module-layout-root.tsx\n  - apps/web/core/components/issues/issue-layouts/roots/project-layout-root.tsx\n  - apps/web/core/components/issues/issue-layouts/roots/project-view-layout-root.tsx\n  - apps/web/core/components/issues/issue-layouts/spreadsheet/spreadsheet-view.tsx\n- Remove spinner UIs for initial data fetch. If required ids/filters are not yet available, return an empty fragment. Once filters are ready, render the content.\n\n3) Account settings pages\n- Files:\n  - apps/web/app/(all)/[workspaceSlug]/(settings)/settings/account/page.tsx\n  - apps/web/app/(all)/[workspaceSlug]/(settings)/settings/account/preferences/page.tsx\n- When user data/profile data is missing (initial load), render an empty fragment instead of showing a loading spinner.\n\n4) Workspace settings details\n- File: apps/web/core/components/workspace/settings/workspace-details.tsx\n- Render an empty fragment until currentWorkspace is available (remove spinner to avoid flicker).\n\nD) Project settings empty state asset handling\n- File: apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/page.tsx\n- Import themed assets via Vite (e.g., no-projects-dark.png?url and no-projects-light.png?url) and select via resolvedTheme. Update component to be an observer and adjust <img> usage accordingly.\n\nE) Internationalization additions\n- Files: packages/i18n/src/locales/*/empty-state.ts for all supported locales\n- Add keys under project_empty_state:\n  - no_access: { title, restricted_description, join_description, cta_primary, cta_loading }\n  - invalid_project: { title, description }\n- Provide localized strings per locale for these keys.\n\nAcceptance criteria\n- Backend: Project retrieve API returns 404 when project not found/archived, 403 for secret projects when requester is not a member, and 409 for public projects when requester is not a member. Members receive 200 and recent visited is recorded.\n- Frontend: Access to project detail and project settings is gated by ProjectAuthWrapper. If the user lacks access:\n  - Workspace admin or 409 Conflict shows a join CTA, which triggers join and refreshes access state.\n  - 403 Forbidden for non-admin shows a restricted message without join CTA.\n  - 404 or other errors show an invalid project empty state.\n- Loading states across issue layouts, account settings, and workspace details no longer flicker spinners; components render once data is ready or render nothing while loading.\n- Routes correctly nest settings pages under [projectId]/layout and Archived Projects route group is positioned as specified.\n- i18n keys are available for new empty states and used by ProjectAccessRestriction.\n",
      "prompt": "Improve project access handling and UI experience across the backend and web app.\n\n- Backend: Update the project retrieve endpoint to return accurate HTTP status codes when a user is not a project member. Secret projects should return a forbidden response, public projects should return a conflict indicating the user is not a member, and missing/archived projects should return not found. Ensure the endpoint no longer relies on membership filtering to decide existence and that it records recent visits only for authorized users.\n\n- Web: Centralize project authorization in a wrapper component that gates project detail and project settings pages. The wrapper should load project details, distinguish between forbidden, conflict, and not-found errors, and render an appropriate empty state with a join action when applicable. Avoid showing loading spinners; render nothing until data is ready. Replace the old join project screen with the new access restriction screen and wire up a join action that updates access state. Update routing so project settings pages share a gated layout, and ensure archived projects routes are organized as top-level under the projects section. Add i18n strings to support the new empty states in all locales.\n\nDeliver a working implementation with correct error handling, adjusted layouts/routes, minimal flicker during data loads, and localized messages for the new states.",
      "supplementalFiles": [
        "apps/api/plane/db/models/project.py",
        "apps/web/core/constants/fetch-keys.ts",
        "apps/web/core/hooks/store/use-project.ts",
        "apps/web/core/hooks/store/use-member.ts",
        "apps/web/core/hooks/store/use-label.ts",
        "apps/web/core/hooks/store/estimates/index.ts",
        "apps/web/core/hooks/store/use-cycle.ts",
        "apps/web/core/hooks/store/use-module.ts"
      ],
      "fileDiffs": [
        {
          "path": "apps/api/plane/app/views/project/base.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/views/project/base.py\n===================================================================\n--- apps/api/plane/app/views/project/base.py\t8db95d9 (parent)\n+++ apps/api/plane/app/views/project/base.py\t6022080 (commit)\n@@ -1,44 +1,44 @@\n # Python imports\n-import boto3\n-from django.conf import settings\n-from django.utils import timezone\n import json\n \n+import boto3\n+\n # Django imports\n-from django.db.models import Exists, F, OuterRef, Prefetch, Q, Subquery\n+from django.conf import settings\n from django.core.serializers.json import DjangoJSONEncoder\n+from django.db.models import Exists, F, OuterRef, Prefetch, Q, Subquery\n+from django.utils import timezone\n \n # Third Party imports\n-from rest_framework.response import Response\n from rest_framework import status\n from rest_framework.permissions import AllowAny\n+from rest_framework.response import Response\n \n # Module imports\n-from plane.app.views.base import BaseViewSet, BaseAPIView\n+from plane.app.permissions import ROLE, ProjectMemberPermission, allow_permission\n from plane.app.serializers import (\n-    ProjectSerializer,\n-    ProjectListSerializer,\n     DeployBoardSerializer,\n+    ProjectListSerializer,\n+    ProjectSerializer,\n )\n-\n-from plane.app.permissions import ProjectMemberPermission, allow_permission, ROLE\n+from plane.app.views.base import BaseAPIView, BaseViewSet\n+from plane.bgtasks.recent_visited_task import recent_visited_task\n+from plane.bgtasks.webhook_task import model_activity, webhook_activity\n from plane.db.models import (\n-    UserFavorite,\n-    Intake,\n     DeployBoard,\n+    Intake,\n     IssueUserProperty,\n     Project,\n     ProjectIdentifier,\n     ProjectMember,\n+    ProjectNetwork,\n     State,\n     DEFAULT_STATES,\n     Workspace,\n     WorkspaceMember,\n )\n from plane.utils.cache import cache_response\n-from plane.bgtasks.webhook_task import model_activity, webhook_activity\n-from plane.bgtasks.recent_visited_task import recent_visited_task\n from plane.utils.exception_logger import log_exception\n from plane.utils.host import base_host\n \n \n@@ -209,21 +209,27 @@\n         return Response(projects, status=status.HTTP_200_OK)\n \n     @allow_permission(allowed_roles=[ROLE.ADMIN, ROLE.MEMBER, ROLE.GUEST], level=\"WORKSPACE\")\n     def retrieve(self, request, slug, pk):\n-        project = (\n-            self.get_queryset()\n-            .filter(\n-                project_projectmember__member=self.request.user,\n-                project_projectmember__is_active=True,\n-            )\n-            .filter(archived_at__isnull=True)\n-            .filter(pk=pk)\n-        ).first()\n+        project = self.get_queryset().filter(archived_at__isnull=True).filter(pk=pk).first()\n \n         if project is None:\n             return Response({\"error\": \"Project does not exist\"}, status=status.HTTP_404_NOT_FOUND)\n \n+        member_ids = [str(project_member.member_id) for project_member in project.members_list]\n+\n+        if str(request.user.id) not in member_ids:\n+            if project.network == ProjectNetwork.SECRET.value:\n+                return Response(\n+                    {\"error\": \"You do not have permission\"},\n+                    status=status.HTTP_403_FORBIDDEN,\n+                )\n+            else:\n+                return Response(\n+                    {\"error\": \"You are not a member of this project\"},\n+                    status=status.HTTP_409_CONFLICT,\n+                )\n+\n         recent_visited_task.delay(\n             slug=slug,\n             project_id=pk,\n             entity_name=\"project\",\n"
        },
        {
          "path": "apps/api/plane/db/models/__init__.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/db/models/__init__.py\n===================================================================\n--- apps/api/plane/db/models/__init__.py\t8db95d9 (parent)\n+++ apps/api/plane/db/models/__init__.py\t6022080 (commit)\n@@ -51,8 +51,9 @@\n     ProjectBaseModel,\n     ProjectIdentifier,\n     ProjectMember,\n     ProjectMemberInvite,\n+    ProjectNetwork,\n     ProjectPublicMember,\n )\n from .session import Session\n from .social_connection import SocialLoginConnection\n"
        },
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(projects)/browse/[workItem]/page.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(projects)/browse/[workItem]/page.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(projects)/browse/[workItem]/page.tsx\t8db95d9 (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(projects)/browse/[workItem]/page.tsx\t6022080 (commit)\n@@ -81,9 +81,9 @@\n \n   return (\n     <>\n       <PageHead title={pageTitle} />\n-      {error ? (\n+      {error && !issueLoader ? (\n         <EmptyState\n           image={resolvedTheme === \"dark\" ? emptyIssueDark : emptyIssueLight}\n           title={t(\"issue.empty_state.issue_detail.title\")}\n           description={t(\"issue.empty_state.issue_detail.description\")}\n"
        },
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/layout.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/layout.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/layout.tsx\t8db95d9 (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/layout.tsx\t6022080 (commit)\n@@ -10,8 +10,9 @@\n import { AppSidebarToggleButton } from \"@/components/sidebar/sidebar-toggle-button\";\n // hooks\n import { useAppTheme } from \"@/hooks/store/use-app-theme\";\n import { useProjectNavigationPreferences } from \"@/hooks/use-navigation-preferences\";\n+import { ProjectAuthWrapper } from \"@/plane-web/layouts/project-wrapper\";\n // local imports\n import type { Route } from \"./+types/layout\";\n \n function ProjectLayout({ params }: Route.ComponentProps) {\n@@ -43,9 +44,11 @@\n             </div>\n           </Row>\n         </div>\n       )}\n-      <Outlet />\n+      <ProjectAuthWrapper workspaceSlug={workspaceSlug} projectId={projectId}>\n+        <Outlet />\n+      </ProjectAuthWrapper>\n     </>\n   );\n }\n \n"
        },
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/layout.tsx",
          "status": "deleted",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/layout.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/layout.tsx\t8db95d9 (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(projects)/projects/(detail)/layout.tsx\t6022080 (commit)\n@@ -1,14 +0,0 @@\n-import { Outlet } from \"react-router\";\n-// plane web layouts\n-import { ProjectAuthWrapper } from \"@/plane-web/layouts/project-wrapper\";\n-import type { Route } from \"./+types/layout\";\n-\n-export default function ProjectDetailLayout({ params }: Route.ComponentProps) {\n-  // router\n-  const { workspaceSlug, projectId } = params;\n-  return (\n-    <ProjectAuthWrapper workspaceSlug={workspaceSlug} projectId={projectId}>\n-      <Outlet />\n-    </ProjectAuthWrapper>\n-  );\n-}\n"
        },
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(settings)/settings/account/page.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(settings)/settings/account/page.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(settings)/settings/account/page.tsx\t8db95d9 (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(settings)/settings/account/page.tsx\t6022080 (commit)\n@@ -1,8 +1,7 @@\n import { observer } from \"mobx-react\";\n import { useTranslation } from \"@plane/i18n\";\n // components\n-import { LogoSpinner } from \"@/components/common/logo-spinner\";\n import { PageHead } from \"@/components/core/page-title\";\n import { ProfileForm } from \"@/components/profile/form\";\n // hooks\n import { useUser } from \"@/hooks/store/user\";\n@@ -11,15 +10,9 @@\n   const { t } = useTranslation();\n   // store hooks\n   const { data: currentUser, userProfile } = useUser();\n \n-  if (!currentUser)\n-    return (\n-      <div className=\"grid h-full w-full place-items-center px-4 sm:px-0\">\n-        <LogoSpinner />\n-      </div>\n-    );\n-\n+  if (!currentUser) return <></>;\n   return (\n     <>\n       <PageHead title={`${t(\"profile.label\")} - ${t(\"general_settings\")}`} />\n       <ProfileForm user={currentUser} profile={userProfile.data} />\n"
        },
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(settings)/settings/account/preferences/page.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(settings)/settings/account/preferences/page.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(settings)/settings/account/preferences/page.tsx\t8db95d9 (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(settings)/settings/account/preferences/page.tsx\t6022080 (commit)\n@@ -1,9 +1,8 @@\n import { observer } from \"mobx-react\";\n // plane imports\n import { useTranslation } from \"@plane/i18n\";\n // components\n-import { LogoSpinner } from \"@/components/common/logo-spinner\";\n import { PageHead } from \"@/components/core/page-title\";\n import { PreferencesList } from \"@/components/preferences/list\";\n import { LanguageTimezone } from \"@/components/profile/preferences/language-timezone\";\n import { ProfileSettingContentHeader } from \"@/components/profile/profile-setting-content-header\";\n@@ -15,32 +14,25 @@\n   const { t } = useTranslation();\n   // hooks\n   const { data: userProfile } = useUserProfile();\n \n+  if (!userProfile) return <></>;\n   return (\n     <>\n       <PageHead title={`${t(\"profile.label\")} - ${t(\"preferences\")}`} />\n-      {userProfile ? (\n-        <>\n-          <div className=\"flex flex-col gap-4 w-full\">\n-            <div>\n-              <SettingsHeading\n-                title={t(\"account_settings.preferences.heading\")}\n-                description={t(\"account_settings.preferences.description\")}\n-              />\n-              <PreferencesList />\n-            </div>\n-            <div>\n-              <ProfileSettingContentHeader title={t(\"language_and_time\")} />\n-              <LanguageTimezone />\n-            </div>\n-          </div>\n-        </>\n-      ) : (\n-        <div className=\"grid h-full w-full place-items-center px-4 sm:px-0\">\n-          <LogoSpinner />\n+      <div className=\"flex flex-col gap-4 w-full\">\n+        <div>\n+          <SettingsHeading\n+            title={t(\"account_settings.preferences.heading\")}\n+            description={t(\"account_settings.preferences.description\")}\n+          />\n+          <PreferencesList />\n         </div>\n-      )}\n+        <div>\n+          <ProfileSettingContentHeader title={t(\"language_and_time\")} />\n+          <LanguageTimezone />\n+        </div>\n+      </div>\n     </>\n   );\n }\n \n"
        },
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/layout.tsx",
          "status": "added",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/layout.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/layout.tsx\t8db95d9 (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/layout.tsx\t6022080 (commit)\n@@ -0,0 +1,33 @@\n+import { observer } from \"mobx-react\";\n+import { usePathname } from \"next/navigation\";\n+import { Outlet } from \"react-router\";\n+// components\n+import { getProjectActivePath } from \"@/components/settings/helper\";\n+import { SettingsMobileNav } from \"@/components/settings/mobile\";\n+import { ProjectSettingsSidebar } from \"@/components/settings/project/sidebar\";\n+// plane web imports\n+import { ProjectAuthWrapper } from \"@/plane-web/layouts/project-wrapper\";\n+// types\n+import type { Route } from \"./+types/layout\";\n+\n+function ProjectDetailSettingsLayout({ params }: Route.ComponentProps) {\n+  const { workspaceSlug, projectId } = params;\n+  // router\n+  const pathname = usePathname();\n+\n+  return (\n+    <>\n+      <SettingsMobileNav hamburgerContent={ProjectSettingsSidebar} activePath={getProjectActivePath(pathname) || \"\"} />\n+      <div className=\"relative flex h-full w-full\">\n+        <div className=\"hidden md:block\">{projectId && <ProjectSettingsSidebar />}</div>\n+        <ProjectAuthWrapper workspaceSlug={workspaceSlug} projectId={projectId}>\n+          <div className=\"w-full h-full overflow-y-scroll md:pt-page-y\">\n+            <Outlet />\n+          </div>\n+        </ProjectAuthWrapper>\n+      </div>\n+    </>\n+  );\n+}\n+\n+export default observer(ProjectDetailSettingsLayout);\n"
        },
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/page.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/page.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/page.tsx\t8db95d9 (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/page.tsx\t6022080 (commit)\n@@ -1,7 +1,6 @@\n import { useState } from \"react\";\n import { observer } from \"mobx-react\";\n-import useSWR from \"swr\";\n // plane imports\n import { EUserPermissions, EUserPermissionsLevel } from \"@plane/constants\";\n // components\n import { PageHead } from \"@/components/core/page-title\";\n@@ -23,14 +22,10 @@\n   const [archiveProject, setArchiveProject] = useState<boolean>(false);\n   // router\n   const { workspaceSlug, projectId } = params;\n   // store hooks\n-  const { currentProjectDetails, fetchProjectDetails } = useProject();\n+  const { currentProjectDetails } = useProject();\n   const { allowPermissions } = useUserPermissions();\n-\n-  // api call to fetch project details\n-  // TODO: removed this API if not necessary\n-  const { isLoading } = useSWR(`PROJECT_DETAILS_${projectId}`, () => fetchProjectDetails(workspaceSlug, projectId));\n   // derived values\n   const isAdmin = allowPermissions([EUserPermissions.ADMIN], EUserPermissionsLevel.PROJECT, workspaceSlug, projectId);\n \n   const pageTitle = currentProjectDetails?.name ? `${currentProjectDetails?.name} - General Settings` : undefined;\n@@ -55,9 +50,9 @@\n         </>\n       )}\n \n       <div className={`w-full ${isAdmin ? \"\" : \"opacity-60\"}`}>\n-        {currentProjectDetails && !isLoading ? (\n+        {currentProjectDetails ? (\n           <ProjectDetailsForm\n             project={currentProjectDetails}\n             workspaceSlug={workspaceSlug}\n             projectId={projectId}\n"
        },
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/layout.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/layout.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/layout.tsx\t8db95d9 (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/layout.tsx\t6022080 (commit)\n@@ -1,22 +1,18 @@\n import { useEffect } from \"react\";\n import { observer } from \"mobx-react\";\n-import { usePathname } from \"next/navigation\";\n import { Outlet } from \"react-router\";\n-// components\n-import { getProjectActivePath } from \"@/components/settings/helper\";\n-import { SettingsMobileNav } from \"@/components/settings/mobile\";\n-import { ProjectSettingsSidebar } from \"@/components/settings/project/sidebar\";\n+// hooks\n import { useProject } from \"@/hooks/store/use-project\";\n import { useAppRouter } from \"@/hooks/use-app-router\";\n-import { ProjectAuthWrapper } from \"@/plane-web/layouts/project-wrapper\";\n+// types\n import type { Route } from \"./+types/layout\";\n \n function ProjectSettingsLayout({ params }: Route.ComponentProps) {\n+  const { workspaceSlug, projectId } = params;\n   // router\n   const router = useAppRouter();\n-  const pathname = usePathname();\n-  const { workspaceSlug, projectId } = params;\n+  // store hooks\n   const { joinedProjectIds } = useProject();\n \n   useEffect(() => {\n     if (projectId) return;\n@@ -24,20 +20,8 @@\n       router.push(`/${workspaceSlug}/settings/projects/${joinedProjectIds[0]}`);\n     }\n   }, [joinedProjectIds, router, workspaceSlug, projectId]);\n \n-  return (\n-    <>\n-      <SettingsMobileNav hamburgerContent={ProjectSettingsSidebar} activePath={getProjectActivePath(pathname) || \"\"} />\n-      <ProjectAuthWrapper workspaceSlug={workspaceSlug} projectId={projectId}>\n-        <div className=\"relative flex h-full w-full\">\n-          <div className=\"hidden md:block\">{projectId && <ProjectSettingsSidebar />}</div>\n-          <div className=\"w-full h-full overflow-y-scroll md:pt-page-y\">\n-            <Outlet />\n-          </div>\n-        </div>\n-      </ProjectAuthWrapper>\n-    </>\n-  );\n+  return <Outlet />;\n }\n \n export default observer(ProjectSettingsLayout);\n"
        },
        {
          "path": "apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/page.tsx",
          "status": "modified",
          "diff": "Index: apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/page.tsx\n===================================================================\n--- apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/page.tsx\t8db95d9 (parent)\n+++ apps/web/app/(all)/[workspaceSlug]/(settings)/settings/projects/page.tsx\t6022080 (commit)\n@@ -1,23 +1,26 @@\n+import { observer } from \"mobx-react\";\n import Link from \"next/link\";\n import { useTheme } from \"next-themes\";\n+// plane imports\n import { PROJECT_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { Button, getButtonStyling } from \"@plane/propel/button\";\n import { cn } from \"@plane/utils\";\n+// assets\n+import ProjectDarkEmptyState from \"@/app/assets/empty-state/project-settings/no-projects-dark.png?url\";\n+import ProjectLightEmptyState from \"@/app/assets/empty-state/project-settings/no-projects-light.png?url\";\n+// hooks\n import { useCommandPalette } from \"@/hooks/store/use-command-palette\";\n \n function ProjectSettingsPage() {\n   // store hooks\n   const { resolvedTheme } = useTheme();\n   const { toggleCreateProjectModal } = useCommandPalette();\n   // derived values\n-  const resolvedPath =\n-    resolvedTheme === \"dark\"\n-      ? \"/empty-state/project-settings/no-projects-dark.png\"\n-      : \"/empty-state/project-settings/no-projects-light.png\";\n+  const resolvedPath = resolvedTheme === \"dark\" ? ProjectDarkEmptyState : ProjectLightEmptyState;\n   return (\n     <div className=\"flex flex-col gap-4 items-center justify-center h-full max-w-[480px] mx-auto\">\n-      <img src={resolvedPath} className=\"w-full h-full object-contain\" alt=\"No projects yet\" />\n+      <img src={resolvedPath} alt=\"No projects yet\" />\n       <div className=\"text-lg font-semibold text-custom-text-350\">No projects yet</div>\n       <div className=\"text-sm text-custom-text-350 text-center\">\n         Projects act as the foundation for goal-driven work. They let you manage your teams, tasks, and everything you\n         need to get things done.\n@@ -37,5 +40,5 @@\n     </div>\n   );\n }\n \n-export default ProjectSettingsPage;\n+export default observer(ProjectSettingsPage);\n"
        },
        {
          "path": "apps/web/app/routes/core.ts",
          "status": "modified",
          "diff": "Index: apps/web/app/routes/core.ts\n===================================================================\n--- apps/web/app/routes/core.ts\t8db95d9 (parent)\n+++ apps/web/app/routes/core.ts\t6022080 (commit)\n@@ -107,11 +107,15 @@\n             \"./(all)/[workspaceSlug]/(projects)/workspace-views/[globalViewId]/page.tsx\"\n           ),\n         ]),\n \n-        // ====================================================================\n-        // PROJECT LEVEL ROUTES\n-        // ====================================================================\n+        // Archived Projects\n+        layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/archives/layout.tsx\", [\n+          route(\n+            \":workspaceSlug/projects/archives\",\n+            \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/archives/page.tsx\"\n+          ),\n+        ]),\n \n         // --------------------------------------------------------------------\n         // PROJECT LEVEL ROUTES\n         // --------------------------------------------------------------------\n@@ -121,139 +125,126 @@\n           route(\":workspaceSlug/projects\", \"./(all)/[workspaceSlug]/(projects)/projects/(list)/page.tsx\"),\n         ]),\n \n         // Project Detail\n-        layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/layout.tsx\", [\n-          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/layout.tsx\", [\n-            // Project Issues List\n-            layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/issues/(list)/layout.tsx\", [\n-              route(\n-                \":workspaceSlug/projects/:projectId/issues\",\n-                \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/issues/(list)/page.tsx\"\n-              ),\n-            ]),\n-            // Issue Detail\n+        layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/layout.tsx\", [\n+          // Project Issues List\n+          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/issues/(list)/layout.tsx\", [\n             route(\n-              \":workspaceSlug/projects/:projectId/issues/:issueId\",\n-              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/issues/(detail)/[issueId]/page.tsx\"\n+              \":workspaceSlug/projects/:projectId/issues\",\n+              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/issues/(list)/page.tsx\"\n             ),\n+          ]),\n+          // Issue Detail\n+          route(\n+            \":workspaceSlug/projects/:projectId/issues/:issueId\",\n+            \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/issues/(detail)/[issueId]/page.tsx\"\n+          ),\n \n-            // Cycle Detail\n-            layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(detail)/layout.tsx\", [\n-              route(\n-                \":workspaceSlug/projects/:projectId/cycles/:cycleId\",\n-                \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(detail)/[cycleId]/page.tsx\"\n-              ),\n-            ]),\n+          // Cycle Detail\n+          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(detail)/layout.tsx\", [\n+            route(\n+              \":workspaceSlug/projects/:projectId/cycles/:cycleId\",\n+              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(detail)/[cycleId]/page.tsx\"\n+            ),\n+          ]),\n \n-            // Cycles List\n-            layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(list)/layout.tsx\", [\n-              route(\n-                \":workspaceSlug/projects/:projectId/cycles\",\n-                \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(list)/page.tsx\"\n-              ),\n-            ]),\n+          // Cycles List\n+          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(list)/layout.tsx\", [\n+            route(\n+              \":workspaceSlug/projects/:projectId/cycles\",\n+              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/cycles/(list)/page.tsx\"\n+            ),\n+          ]),\n \n-            // Module Detail\n-            layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(detail)/layout.tsx\", [\n-              route(\n-                \":workspaceSlug/projects/:projectId/modules/:moduleId\",\n-                \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(detail)/[moduleId]/page.tsx\"\n-              ),\n-            ]),\n+          // Module Detail\n+          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(detail)/layout.tsx\", [\n+            route(\n+              \":workspaceSlug/projects/:projectId/modules/:moduleId\",\n+              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(detail)/[moduleId]/page.tsx\"\n+            ),\n+          ]),\n \n-            // Modules List\n-            layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(list)/layout.tsx\", [\n-              route(\n-                \":workspaceSlug/projects/:projectId/modules\",\n-                \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(list)/page.tsx\"\n-              ),\n-            ]),\n-\n-            // View Detail\n-            layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(detail)/layout.tsx\", [\n-              route(\n-                \":workspaceSlug/projects/:projectId/views/:viewId\",\n-                \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(detail)/[viewId]/page.tsx\"\n-              ),\n-            ]),\n-\n-            // Views List\n-            layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(list)/layout.tsx\", [\n-              route(\n-                \":workspaceSlug/projects/:projectId/views\",\n-                \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(list)/page.tsx\"\n-              ),\n-            ]),\n-\n-            // Page Detail\n-            layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/layout.tsx\", [\n-              route(\n-                \":workspaceSlug/projects/:projectId/pages/:pageId\",\n-                \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/[pageId]/page.tsx\"\n-              ),\n-            ]),\n-\n-            // Pages List\n-            layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(list)/layout.tsx\", [\n-              route(\n-                \":workspaceSlug/projects/:projectId/pages\",\n-                \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(list)/page.tsx\"\n-              ),\n-            ]),\n-            // Intake list\n-            layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/intake/layout.tsx\", [\n-              route(\n-                \":workspaceSlug/projects/:projectId/intake\",\n-                \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/intake/page.tsx\"\n-              ),\n-            ]),\n+          // Modules List\n+          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(list)/layout.tsx\", [\n+            route(\n+              \":workspaceSlug/projects/:projectId/modules\",\n+              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/modules/(list)/page.tsx\"\n+            ),\n           ]),\n \n-          // Archived Projects\n-          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/archives/layout.tsx\", [\n+          // View Detail\n+          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(detail)/layout.tsx\", [\n             route(\n-              \":workspaceSlug/projects/archives\",\n-              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/archives/page.tsx\"\n+              \":workspaceSlug/projects/:projectId/views/:viewId\",\n+              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(detail)/[viewId]/page.tsx\"\n             ),\n           ]),\n \n-          // Project Archives - Issues, Cycles, Modules\n-          // Project Archives - Issues - List\n-          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/issues/(list)/layout.tsx\", [\n+          // Views List\n+          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(list)/layout.tsx\", [\n             route(\n-              \":workspaceSlug/projects/:projectId/archives/issues\",\n-              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/issues/(list)/page.tsx\"\n+              \":workspaceSlug/projects/:projectId/views\",\n+              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/views/(list)/page.tsx\"\n             ),\n           ]),\n \n-          // Project Archives - Issues - Detail\n-          layout(\n-            \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/issues/(detail)/layout.tsx\",\n-            [\n-              route(\n-                \":workspaceSlug/projects/:projectId/archives/issues/:archivedIssueId\",\n-                \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/issues/(detail)/[archivedIssueId]/page.tsx\"\n-              ),\n-            ]\n-          ),\n-\n-          // Project Archives - Cycles\n-          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/cycles/layout.tsx\", [\n+          // Page Detail\n+          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/layout.tsx\", [\n             route(\n-              \":workspaceSlug/projects/:projectId/archives/cycles\",\n-              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/cycles/page.tsx\"\n+              \":workspaceSlug/projects/:projectId/pages/:pageId\",\n+              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/[pageId]/page.tsx\"\n             ),\n           ]),\n \n-          // Project Archives - Modules\n-          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/modules/layout.tsx\", [\n+          // Pages List\n+          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(list)/layout.tsx\", [\n             route(\n-              \":workspaceSlug/projects/:projectId/archives/modules\",\n-              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/modules/page.tsx\"\n+              \":workspaceSlug/projects/:projectId/pages\",\n+              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(list)/page.tsx\"\n             ),\n           ]),\n+          // Intake list\n+          layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/intake/layout.tsx\", [\n+            route(\n+              \":workspaceSlug/projects/:projectId/intake\",\n+              \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/intake/page.tsx\"\n+            ),\n+          ]),\n         ]),\n+\n+        // Project Archives - Issues, Cycles, Modules\n+        // Project Archives - Issues - List\n+        layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/issues/(list)/layout.tsx\", [\n+          route(\n+            \":workspaceSlug/projects/:projectId/archives/issues\",\n+            \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/issues/(list)/page.tsx\"\n+          ),\n+        ]),\n+\n+        // Project Archives - Issues - Detail\n+        layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/issues/(detail)/layout.tsx\", [\n+          route(\n+            \":workspaceSlug/projects/:projectId/archives/issues/:archivedIssueId\",\n+            \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/issues/(detail)/[archivedIssueId]/page.tsx\"\n+          ),\n+        ]),\n+\n+        // Project Archives - Cycles\n+        layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/cycles/layout.tsx\", [\n+          route(\n+            \":workspaceSlug/projects/:projectId/archives/cycles\",\n+            \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/cycles/page.tsx\"\n+          ),\n+        ]),\n+\n+        // Project Archives - Modules\n+        layout(\"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/modules/layout.tsx\", [\n+          route(\n+            \":workspaceSlug/projects/:projectId/archives/modules\",\n+            \"./(all)/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/archives/modules/page.tsx\"\n+          ),\n+        ]),\n       ]),\n \n       // ====================================================================\n       // SETTINGS SECTION\n@@ -319,46 +310,48 @@\n         // PROJECT SETTINGS\n         // --------------------------------------------------------------------\n \n         layout(\"./(all)/[workspaceSlug]/(settings)/settings/projects/layout.tsx\", [\n-          // CORE Routes\n-          // Project Settings\n+          // No Projects available page\n           route(\":workspaceSlug/settings/projects\", \"./(all)/[workspaceSlug]/(settings)/settings/projects/page.tsx\"),\n-          route(\n-            \":workspaceSlug/settings/projects/:projectId\",\n-            \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/page.tsx\"\n-          ),\n-          // Project Members\n-          route(\n-            \":workspaceSlug/settings/projects/:projectId/members\",\n-            \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/members/page.tsx\"\n-          ),\n-          // Project Features\n-          route(\n-            \":workspaceSlug/settings/projects/:projectId/features\",\n-            \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/features/page.tsx\"\n-          ),\n-          // Project States\n-          route(\n-            \":workspaceSlug/settings/projects/:projectId/states\",\n-            \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/states/page.tsx\"\n-          ),\n-          // Project Labels\n-          route(\n-            \":workspaceSlug/settings/projects/:projectId/labels\",\n-            \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/labels/page.tsx\"\n-          ),\n-          // Project Estimates\n-          route(\n-            \":workspaceSlug/settings/projects/:projectId/estimates\",\n-            \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/estimates/page.tsx\"\n-          ),\n-          // Project Automations\n-          layout(\"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/automations/layout.tsx\", [\n+          layout(\"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/layout.tsx\", [\n+            // Project Settings\n             route(\n-              \":workspaceSlug/settings/projects/:projectId/automations\",\n-              \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/automations/page.tsx\"\n+              \":workspaceSlug/settings/projects/:projectId\",\n+              \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/page.tsx\"\n             ),\n+            // Project Members\n+            route(\n+              \":workspaceSlug/settings/projects/:projectId/members\",\n+              \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/members/page.tsx\"\n+            ),\n+            // Project Features\n+            route(\n+              \":workspaceSlug/settings/projects/:projectId/features\",\n+              \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/features/page.tsx\"\n+            ),\n+            // Project States\n+            route(\n+              \":workspaceSlug/settings/projects/:projectId/states\",\n+              \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/states/page.tsx\"\n+            ),\n+            // Project Labels\n+            route(\n+              \":workspaceSlug/settings/projects/:projectId/labels\",\n+              \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/labels/page.tsx\"\n+            ),\n+            // Project Estimates\n+            route(\n+              \":workspaceSlug/settings/projects/:projectId/estimates\",\n+              \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/estimates/page.tsx\"\n+            ),\n+            // Project Automations\n+            layout(\"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/automations/layout.tsx\", [\n+              route(\n+                \":workspaceSlug/settings/projects/:projectId/automations\",\n+                \"./(all)/[workspaceSlug]/(settings)/settings/projects/[projectId]/automations/page.tsx\"\n+              ),\n+            ]),\n           ]),\n         ]),\n       ]),\n     ]),\n"
        },
        {
          "path": "apps/web/ce/layouts/project-wrapper.tsx",
          "status": "modified",
          "diff": "Index: apps/web/ce/layouts/project-wrapper.tsx\n===================================================================\n--- apps/web/ce/layouts/project-wrapper.tsx\t8db95d9 (parent)\n+++ apps/web/ce/layouts/project-wrapper.tsx\t6022080 (commit)\n@@ -1,12 +1,11 @@\n-import type { FC } from \"react\";\n import { observer } from \"mobx-react\";\n // layouts\n import { ProjectAuthWrapper as CoreProjectAuthWrapper } from \"@/layouts/auth-layout/project-wrapper\";\n \n export type IProjectAuthWrapper = {\n   workspaceSlug: string;\n-  projectId?: string;\n+  projectId: string;\n   children: React.ReactNode;\n };\n \n export const ProjectAuthWrapper = observer(function ProjectAuthWrapper(props: IProjectAuthWrapper) {\n"
        },
        {
          "path": "apps/web/core/components/auth-screens/project/join-project.tsx",
          "status": "deleted",
          "diff": "Index: apps/web/core/components/auth-screens/project/join-project.tsx\n===================================================================\n--- apps/web/core/components/auth-screens/project/join-project.tsx\t8db95d9 (parent)\n+++ apps/web/core/components/auth-screens/project/join-project.tsx\t6022080 (commit)\n@@ -1,67 +0,0 @@\n-import { useState } from \"react\";\n-import { useParams } from \"next/navigation\";\n-import { ClipboardList } from \"lucide-react\";\n-// plane imports\n-import { Button } from \"@plane/propel/button\";\n-// assets\n-import Unauthorized from \"@/app/assets/auth/unauthorized.svg?url\";\n-// hooks\n-import { useProject } from \"@/hooks/store/use-project\";\n-import { useUserPermissions } from \"@/hooks/store/user\";\n-\n-type Props = {\n-  projectId?: string;\n-  isPrivateProject?: boolean;\n-};\n-\n-export function JoinProject(props: Props) {\n-  const { projectId, isPrivateProject = false } = props;\n-  // states\n-  const [isJoiningProject, setIsJoiningProject] = useState(false);\n-  // store hooks\n-  const { joinProject } = useUserPermissions();\n-  const { fetchProjectDetails } = useProject();\n-\n-  const { workspaceSlug } = useParams();\n-\n-  const handleJoin = () => {\n-    if (!workspaceSlug || !projectId) return;\n-\n-    setIsJoiningProject(true);\n-\n-    joinProject(workspaceSlug.toString(), projectId.toString())\n-      .then(() => fetchProjectDetails(workspaceSlug.toString(), projectId.toString()))\n-      .finally(() => setIsJoiningProject(false));\n-  };\n-\n-  return (\n-    <div className=\"flex h-full w-full flex-col items-center justify-center gap-y-5 bg-custom-background-100 text-center\">\n-      <div className=\"h-44 w-72\">\n-        <img src={Unauthorized} className=\"h-[176px] w-[288px] object-contain\" alt=\"JoinProject\" />\n-      </div>\n-      <h1 className=\"text-xl font-medium text-custom-text-100\">\n-        {!isPrivateProject ? `You are not a member of this project yet.` : `You are not a member of this project.`}\n-      </h1>\n-\n-      <div className=\"w-full max-w-md text-base text-custom-text-200\">\n-        <p className=\"mx-auto w-full text-sm md:w-3/4\">\n-          {!isPrivateProject\n-            ? `Click the button below to join it.`\n-            : `This is a private project. \\n We can't tell you more about this project to protect confidentiality.`}\n-        </p>\n-      </div>\n-      {!isPrivateProject && (\n-        <div>\n-          <Button\n-            variant=\"primary\"\n-            prependIcon={<ClipboardList color=\"white\" />}\n-            loading={isJoiningProject}\n-            onClick={handleJoin}\n-          >\n-            {isJoiningProject ? \"Taking you in\" : \"Click to join\"}\n-          </Button>\n-        </div>\n-      )}\n-    </div>\n-  );\n-}\n"
        },
        {
          "path": "apps/web/core/components/auth-screens/project/project-access-restriction.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/auth-screens/project/project-access-restriction.tsx\n===================================================================\n--- apps/web/core/components/auth-screens/project/project-access-restriction.tsx\t8db95d9 (parent)\n+++ apps/web/core/components/auth-screens/project/project-access-restriction.tsx\t6022080 (commit)\n@@ -0,0 +1,70 @@\n+import { observer } from \"mobx-react\";\n+// plane imports\n+import { useTranslation } from \"@plane/i18n\";\n+import { EmptyStateDetailed } from \"@plane/propel/empty-state\";\n+\n+type TProps = {\n+  isWorkspaceAdmin: boolean;\n+  handleJoinProject: () => void;\n+  isJoinButtonDisabled: boolean;\n+  errorStatusCode: number | undefined;\n+};\n+\n+export const ProjectAccessRestriction = observer(function ProjectAccessRestriction(props: TProps) {\n+  const { isWorkspaceAdmin, handleJoinProject, isJoinButtonDisabled, errorStatusCode } = props;\n+  // plane hooks\n+  const { t } = useTranslation();\n+\n+  // Show join project screen if:\n+  // - User lacks project membership (409 Conflict)\n+  // - User lacks permission to access the private project (403 Forbidden) but is a workspace admin (can join any project)\n+  if (errorStatusCode === 409 || (errorStatusCode === 403 && isWorkspaceAdmin))\n+    return (\n+      <div className=\"grid h-full w-full place-items-center bg-custom-background-100\">\n+        <EmptyStateDetailed\n+          title={t(\"project_empty_state.no_access.title\")}\n+          description={t(\"project_empty_state.no_access.join_description\")}\n+          assetKey=\"no-access\"\n+          assetClassName=\"size-40\"\n+          actions={[\n+            {\n+              label: isJoinButtonDisabled\n+                ? t(\"project_empty_state.no_access.cta_loading\")\n+                : t(\"project_empty_state.no_access.cta_primary\"),\n+              onClick: handleJoinProject,\n+              disabled: isJoinButtonDisabled,\n+            },\n+          ]}\n+        />\n+      </div>\n+    );\n+\n+  // Show no access screen if:\n+  // - User lacks permission to access the private project (403 Forbidden)\n+  if (errorStatusCode === 403) {\n+    return (\n+      <div className=\"grid h-full w-full place-items-center bg-custom-background-100\">\n+        <EmptyStateDetailed\n+          title={t(\"project_empty_state.no_access.title\")}\n+          description={t(\"project_empty_state.no_access.restricted_description\")}\n+          assetKey=\"no-access\"\n+          assetClassName=\"size-40\"\n+        />\n+      </div>\n+    );\n+  }\n+\n+  // Show empty state screen if:\n+  // - Project not found (404 Not Found)\n+  // - Any other error status code\n+  return (\n+    <div className=\"grid h-full w-full place-items-center bg-custom-background-100\">\n+      <EmptyStateDetailed\n+        title={t(\"project_empty_state.invalid_project.title\")}\n+        description={t(\"project_empty_state.invalid_project.description\")}\n+        assetKey=\"project\"\n+        assetClassName=\"size-40\"\n+      />\n+    </div>\n+  );\n+});\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/roots/archived-issue-layout-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/roots/archived-issue-layout-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/roots/archived-issue-layout-root.tsx\t8db95d9 (parent)\n+++ apps/web/core/components/issues/issue-layouts/roots/archived-issue-layout-root.tsx\t6022080 (commit)\n@@ -5,9 +5,8 @@\n // plane imports\n import { ISSUE_DISPLAY_FILTERS_BY_PAGE } from \"@plane/constants\";\n import { EIssuesStoreType } from \"@plane/types\";\n // components\n-import { LogoSpinner } from \"@/components/common/logo-spinner\";\n import { ProjectLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/project-level\";\n // hooks\n import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n import { useIssues } from \"@/hooks/store/use-issues\";\n@@ -25,9 +24,9 @@\n   const { issuesFilter } = useIssues(EIssuesStoreType.ARCHIVED);\n   // derived values\n   const workItemFilters = projectId ? issuesFilter?.getIssueFilters(projectId) : undefined;\n \n-  const { isLoading } = useSWR(\n+  useSWR(\n     workspaceSlug && projectId ? `ARCHIVED_ISSUES_${workspaceSlug.toString()}_${projectId.toString()}` : null,\n     async () => {\n       if (workspaceSlug && projectId) {\n         await issuesFilter?.fetchFilters(workspaceSlug.toString(), projectId.toString());\n@@ -35,17 +34,9 @@\n     },\n     { revalidateIfStale: false, revalidateOnFocus: false }\n   );\n \n-  if (!workspaceSlug || !projectId) return <></>;\n-\n-  if (isLoading && !workItemFilters)\n-    return (\n-      <div className=\"h-full w-full flex items-center justify-center\">\n-        <LogoSpinner />\n-      </div>\n-    );\n-\n+  if (!workspaceSlug || !projectId || !workItemFilters) return <></>;\n   return (\n     <IssuesStoreContext.Provider value={EIssuesStoreType.ARCHIVED}>\n       <ProjectLevelWorkItemFiltersHOC\n         entityType={EIssuesStoreType.ARCHIVED}\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/roots/cycle-layout-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/roots/cycle-layout-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/roots/cycle-layout-root.tsx\t8db95d9 (parent)\n+++ apps/web/core/components/issues/issue-layouts/roots/cycle-layout-root.tsx\t6022080 (commit)\n@@ -6,9 +6,8 @@\n // plane constants\n import { ISSUE_DISPLAY_FILTERS_BY_PAGE, PROJECT_VIEW_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { EIssuesStoreType, EIssueLayoutTypes } from \"@plane/types\";\n // components\n-import { LogoSpinner } from \"@/components/common/logo-spinner\";\n import { TransferIssues } from \"@/components/cycles/transfer-issues\";\n import { TransferIssuesModal } from \"@/components/cycles/transfer-issues-modal\";\n // hooks\n import { ProjectLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/project-level\";\n@@ -58,9 +57,9 @@\n   // derived values\n   const workItemFilters = cycleId ? issuesFilter?.getIssueFilters(cycleId) : undefined;\n   const activeLayout = workItemFilters?.displayFilters?.layout;\n \n-  const { isLoading } = useSWR(\n+  useSWR(\n     workspaceSlug && projectId && cycleId ? `CYCLE_ISSUES_${workspaceSlug}_${projectId}_${cycleId}` : null,\n     async () => {\n       if (workspaceSlug && projectId && cycleId) {\n         await issuesFilter?.fetchFilters(workspaceSlug, projectId, cycleId);\n@@ -77,17 +76,9 @@\n     ? cycleDetails.backlog_issues + cycleDetails.unstarted_issues + cycleDetails.started_issues\n     : 0;\n   const canTransferIssues = isProgressSnapshotEmpty && transferableIssuesCount > 0;\n \n-  if (!workspaceSlug || !projectId || !cycleId) return <></>;\n-\n-  if (isLoading && !workItemFilters)\n-    return (\n-      <div className=\"h-full w-full flex items-center justify-center\">\n-        <LogoSpinner />\n-      </div>\n-    );\n-\n+  if (!workspaceSlug || !projectId || !cycleId || !workItemFilters) return <></>;\n   return (\n     <IssuesStoreContext.Provider value={EIssuesStoreType.CYCLE}>\n       <ProjectLevelWorkItemFiltersHOC\n         enableSaveView\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/roots/module-layout-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/roots/module-layout-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/roots/module-layout-root.tsx\t8db95d9 (parent)\n+++ apps/web/core/components/issues/issue-layouts/roots/module-layout-root.tsx\t6022080 (commit)\n@@ -5,10 +5,8 @@\n // plane imports\n import { ISSUE_DISPLAY_FILTERS_BY_PAGE, PROJECT_VIEW_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { EIssuesStoreType, EIssueLayoutTypes } from \"@plane/types\";\n import { Row, ERowVariant } from \"@plane/ui\";\n-// components\n-import { LogoSpinner } from \"@/components/common/logo-spinner\";\n // hooks\n import { ProjectLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/project-level\";\n import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n import { useIssues } from \"@/hooks/store/use-issues\";\n@@ -49,9 +47,9 @@\n   // derived values\n   const workItemFilters = moduleId ? issuesFilter?.getIssueFilters(moduleId) : undefined;\n   const activeLayout = workItemFilters?.displayFilters?.layout || undefined;\n \n-  const { isLoading } = useSWR(\n+  useSWR(\n     workspaceSlug && projectId && moduleId\n       ? `MODULE_ISSUES_${workspaceSlug.toString()}_${projectId.toString()}_${moduleId.toString()}`\n       : null,\n     async () => {\n@@ -61,17 +59,9 @@\n     },\n     { revalidateIfStale: false, revalidateOnFocus: false }\n   );\n \n-  if (!workspaceSlug || !projectId || !moduleId) return <></>;\n-\n-  if (isLoading && !workItemFilters)\n-    return (\n-      <div className=\"h-full w-full flex items-center justify-center\">\n-        <LogoSpinner />\n-      </div>\n-    );\n-\n+  if (!workspaceSlug || !projectId || !moduleId || !workItemFilters) return <></>;\n   return (\n     <IssuesStoreContext.Provider value={EIssuesStoreType.MODULE}>\n       <ProjectLevelWorkItemFiltersHOC\n         enableSaveView\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/roots/project-layout-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/roots/project-layout-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/roots/project-layout-root.tsx\t8db95d9 (parent)\n+++ apps/web/core/components/issues/issue-layouts/roots/project-layout-root.tsx\t6022080 (commit)\n@@ -1,14 +1,12 @@\n-import type { FC } from \"react\";\n import { observer } from \"mobx-react\";\n import { useParams } from \"next/navigation\";\n import useSWR from \"swr\";\n // plane constants\n import { ISSUE_DISPLAY_FILTERS_BY_PAGE, PROJECT_VIEW_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { EIssueLayoutTypes, EIssuesStoreType } from \"@plane/types\";\n import { Spinner } from \"@plane/ui\";\n // components\n-import { LogoSpinner } from \"@/components/common/logo-spinner\";\n import { ProjectLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/project-level\";\n import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n // hooks\n import { useIssues } from \"@/hooks/store/use-issues\";\n@@ -48,9 +46,9 @@\n   // derived values\n   const workItemFilters = projectId ? issuesFilter?.getIssueFilters(projectId) : undefined;\n   const activeLayout = workItemFilters?.displayFilters?.layout;\n \n-  const { isLoading } = useSWR(\n+  useSWR(\n     workspaceSlug && projectId ? `PROJECT_ISSUES_${workspaceSlug}_${projectId}` : null,\n     async () => {\n       if (workspaceSlug && projectId) {\n         await issuesFilter?.fetchFilters(workspaceSlug, projectId);\n@@ -58,17 +56,9 @@\n     },\n     { revalidateIfStale: false, revalidateOnFocus: false }\n   );\n \n-  if (!workspaceSlug || !projectId) return <></>;\n-\n-  if (isLoading && !workItemFilters)\n-    return (\n-      <div className=\"h-full w-full flex items-center justify-center\">\n-        <LogoSpinner />\n-      </div>\n-    );\n-\n+  if (!workspaceSlug || !projectId || !workItemFilters) return <></>;\n   return (\n     <IssuesStoreContext.Provider value={EIssuesStoreType.PROJECT}>\n       <ProjectLevelWorkItemFiltersHOC\n         enableSaveView\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/roots/project-view-layout-root.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/roots/project-view-layout-root.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/roots/project-view-layout-root.tsx\t8db95d9 (parent)\n+++ apps/web/core/components/issues/issue-layouts/roots/project-view-layout-root.tsx\t6022080 (commit)\n@@ -4,10 +4,8 @@\n import useSWR from \"swr\";\n // plane constants\n import { ISSUE_DISPLAY_FILTERS_BY_PAGE, PROJECT_VIEW_TRACKER_ELEMENTS } from \"@plane/constants\";\n import { EIssuesStoreType, EIssueLayoutTypes } from \"@plane/types\";\n-// components\n-import { LogoSpinner } from \"@/components/common/logo-spinner\";\n // hooks\n import { ProjectLevelWorkItemFiltersHOC } from \"@/components/work-item-filters/filters-hoc/project-level\";\n import { WorkItemFiltersRow } from \"@/components/work-item-filters/filters-row\";\n import { useIssues } from \"@/hooks/store/use-issues\";\n@@ -59,9 +57,9 @@\n         richFilters: projectView.rich_filters,\n       }\n     : undefined;\n \n-  const { isLoading } = useSWR(\n+  useSWR(\n     workspaceSlug && projectId && viewId ? `PROJECT_VIEW_ISSUES_${workspaceSlug}_${projectId}_${viewId}` : null,\n     async () => {\n       if (workspaceSlug && projectId && viewId) {\n         await issuesFilter?.fetchFilters(workspaceSlug, projectId, viewId);\n@@ -77,18 +75,9 @@\n     },\n     [issuesFilter, workspaceSlug, viewId]\n   );\n \n-  if (!workspaceSlug || !projectId || !viewId) return <></>;\n-\n-  if (isLoading && !workItemFilters) {\n-    return (\n-      <div className=\"relative flex h-screen w-full items-center justify-center\">\n-        <LogoSpinner />\n-      </div>\n-    );\n-  }\n-\n+  if (!workspaceSlug || !projectId || !viewId || !workItemFilters) return <></>;\n   return (\n     <IssuesStoreContext.Provider value={EIssuesStoreType.PROJECT_VIEW}>\n       <ProjectLevelWorkItemFiltersHOC\n         enableSaveView\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-layouts/spreadsheet/spreadsheet-view.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-layouts/spreadsheet/spreadsheet-view.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-layouts/spreadsheet/spreadsheet-view.tsx\t8db95d9 (parent)\n+++ apps/web/core/components/issues/issue-layouts/spreadsheet/spreadsheet-view.tsx\t6022080 (commit)\n@@ -5,9 +5,8 @@\n // types\n import type { TIssue, IIssueDisplayFilterOptions, IIssueDisplayProperties } from \"@plane/types\";\n import { EIssueLayoutTypes } from \"@plane/types\";\n // components\n-import { LogoSpinner } from \"@/components/common/logo-spinner\";\n import { MultipleSelectGroup } from \"@/components/core/multiple-select\";\n // hooks\n import { useProject } from \"@/hooks/store/use-project\";\n // plane web components\n@@ -71,15 +70,9 @@\n         if (property === \"modules\" && !currentProjectDetails?.module_view) return false;\n         return true;\n       });\n \n-  if (!issueIds || issueIds.length === 0)\n-    return (\n-      <div className=\"grid h-full w-full place-items-center\">\n-        <LogoSpinner />\n-      </div>\n-    );\n-\n+  if (!issueIds || issueIds.length === 0) return <></>;\n   return (\n     <div className=\"relative flex h-full w-full flex-col overflow-x-hidden whitespace-nowrap rounded-lg bg-custom-background-200 text-custom-text-200\">\n       <div ref={portalRef} className=\"spreadsheet-menu-portal\" />\n       <MultipleSelectGroup\n"
        },
        {
          "path": "apps/web/core/components/workspace/settings/workspace-details.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/workspace/settings/workspace-details.tsx\n===================================================================\n--- apps/web/core/components/workspace/settings/workspace-details.tsx\t8db95d9 (parent)\n+++ apps/web/core/components/workspace/settings/workspace-details.tsx\t6022080 (commit)\n@@ -16,9 +16,8 @@\n import type { IWorkspace } from \"@plane/types\";\n import { CustomSelect, Input } from \"@plane/ui\";\n import { copyUrlToClipboard, getFileURL } from \"@plane/utils\";\n // components\n-import { LogoSpinner } from \"@/components/common/logo-spinner\";\n import { WorkspaceImageUploadModal } from \"@/components/core/modals/workspace-image-upload-modal\";\n // helpers\n import { captureError, captureSuccess } from \"@/helpers/event-tracker.helper\";\n import { useWorkspace } from \"@/hooks/store/use-workspace\";\n@@ -128,15 +127,9 @@\n   }, [currentWorkspace, reset]);\n \n   const isAdmin = allowPermissions([EUserPermissions.ADMIN], EUserPermissionsLevel.WORKSPACE);\n \n-  if (!currentWorkspace)\n-    return (\n-      <div className=\"grid h-full w-full place-items-center px-4 sm:px-0\">\n-        <LogoSpinner />\n-      </div>\n-    );\n-\n+  if (!currentWorkspace) return <></>;\n   return (\n     <>\n       <Controller\n         control={control}\n"
        },
        {
          "path": "apps/web/core/layouts/auth-layout/project-wrapper.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/layouts/auth-layout/project-wrapper.tsx\n===================================================================\n--- apps/web/core/layouts/auth-layout/project-wrapper.tsx\t8db95d9 (parent)\n+++ apps/web/core/layouts/auth-layout/project-wrapper.tsx\t6022080 (commit)\n@@ -1,16 +1,13 @@\n-import type { FC, ReactNode } from \"react\";\n-import { useEffect } from \"react\";\n+import type { ReactNode } from \"react\";\n+import { useEffect, useState } from \"react\";\n import { observer } from \"mobx-react\";\n import useSWR from \"swr\";\n // plane imports\n-import { EUserPermissions, EUserPermissionsLevel, PROJECT_TRACKER_ELEMENTS } from \"@plane/constants\";\n-import { useTranslation } from \"@plane/i18n\";\n-import { EmptyStateDetailed } from \"@plane/propel/empty-state\";\n-import { EProjectNetwork, GANTT_TIMELINE_TYPE } from \"@plane/types\";\n+import { EUserPermissions, EUserPermissionsLevel } from \"@plane/constants\";\n+import { GANTT_TIMELINE_TYPE } from \"@plane/types\";\n // components\n-import { JoinProject } from \"@/components/auth-screens/project/join-project\";\n-import { LogoSpinner } from \"@/components/common/logo-spinner\";\n+import { ProjectAccessRestriction } from \"@/components/auth-screens/project/project-access-restriction\";\n import {\n   PROJECT_DETAILS,\n   PROJECT_ME_INFORMATION,\n   PROJECT_LABELS,\n@@ -22,12 +19,10 @@\n   PROJECT_MODULES,\n   PROJECT_VIEWS,\n   PROJECT_INTAKE_STATE,\n } from \"@/constants/fetch-keys\";\n-import { captureClick } from \"@/helpers/event-tracker.helper\";\n // hooks\n import { useProjectEstimates } from \"@/hooks/store/estimates\";\n-import { useCommandPalette } from \"@/hooks/store/use-command-palette\";\n import { useCycle } from \"@/hooks/store/use-cycle\";\n import { useLabel } from \"@/hooks/store/use-label\";\n import { useMember } from \"@/hooks/store/use-member\";\n import { useModule } from \"@/hooks/store/use-module\";\n@@ -38,21 +33,21 @@\n import { useTimeLineChart } from \"@/hooks/use-timeline-chart\";\n \n interface IProjectAuthWrapper {\n   workspaceSlug: string;\n-  projectId?: string;\n+  projectId: string;\n   children: ReactNode;\n   isLoading?: boolean;\n }\n \n export const ProjectAuthWrapper = observer(function ProjectAuthWrapper(props: IProjectAuthWrapper) {\n   const { workspaceSlug, projectId, children, isLoading: isParentLoading = false } = props;\n-  // plane hooks\n-  const { t } = useTranslation();\n+  // states\n+  const [isJoiningProject, setIsJoiningProject] = useState(false);\n   // store hooks\n-  const { toggleCreateProjectModal } = useCommandPalette();\n-  const { fetchUserProjectInfo, allowPermissions, getProjectRoleByWorkspaceSlugAndProjectId } = useUserPermissions();\n-  const { loader, getProjectById, fetchProjectDetails } = useProject();\n+  const { fetchUserProjectInfo, allowPermissions } = useUserPermissions();\n+  const { fetchProjectDetails } = useProject();\n+  const { joinProject } = useUserPermissions();\n   const { fetchAllCycles } = useCycle();\n   const { fetchModulesSlim, fetchModules } = useModule();\n   const { initGantt } = useTimeLineChart(GANTT_TIMELINE_TYPE.MODULE);\n   const { fetchViews } = useProjectView();\n@@ -62,12 +57,9 @@\n   const { fetchProjectStates, fetchProjectIntakeState } = useProjectState();\n   const { data: currentUserData } = useUser();\n   const { fetchProjectLabels } = useLabel();\n   const { getProjectEstimates } = useProjectEstimates();\n-\n   // derived values\n-  const projectExists = projectId ? getProjectById(projectId) : null;\n-  const projectMemberInfo = getProjectRoleByWorkspaceSlugAndProjectId(workspaceSlug, projectId);\n   const hasPermissionToCurrentProject = allowPermissions(\n     [EUserPermissions.ADMIN, EUserPermissions.MEMBER, EUserPermissions.GUEST],\n     EUserPermissionsLevel.PROJECT,\n     workspaceSlug,\n@@ -81,121 +73,85 @@\n     // eslint-disable-next-line react-hooks/exhaustive-deps\n   }, []);\n \n   // fetching project details\n-  useSWR(\n-    workspaceSlug && projectId ? PROJECT_DETAILS(workspaceSlug, projectId) : null,\n-    workspaceSlug && projectId ? () => fetchProjectDetails(workspaceSlug, projectId) : null\n+  const { isLoading: isProjectDetailsLoading, error: projectDetailsError } = useSWR(\n+    PROJECT_DETAILS(workspaceSlug, projectId),\n+    () => fetchProjectDetails(workspaceSlug, projectId)\n   );\n-\n+  // fetching user project member information\n+  useSWR(PROJECT_ME_INFORMATION(workspaceSlug, projectId), () => fetchUserProjectInfo(workspaceSlug, projectId));\n   // fetching project member preferences\n   useSWR(\n-    workspaceSlug && projectId && currentUserData?.id ? PROJECT_MEMBER_PREFERENCES(workspaceSlug, projectId) : null,\n-    workspaceSlug && projectId && currentUserData?.id\n-      ? () => fetchProjectMemberPreferences(workspaceSlug, projectId, currentUserData.id)\n-      : null,\n+    currentUserData?.id ? PROJECT_MEMBER_PREFERENCES(workspaceSlug, projectId) : null,\n+    currentUserData?.id ? () => fetchProjectMemberPreferences(workspaceSlug, projectId, currentUserData.id) : null,\n     { revalidateIfStale: false, revalidateOnFocus: false }\n   );\n   // fetching project labels\n-  useSWR(\n-    workspaceSlug && projectId ? PROJECT_LABELS(workspaceSlug, projectId) : null,\n-    workspaceSlug && projectId ? () => fetchProjectLabels(workspaceSlug, projectId) : null,\n-    { revalidateIfStale: false, revalidateOnFocus: false }\n-  );\n+  useSWR(PROJECT_LABELS(workspaceSlug, projectId), () => fetchProjectLabels(workspaceSlug, projectId), {\n+    revalidateIfStale: false,\n+    revalidateOnFocus: false,\n+  });\n   // fetching project members\n-  useSWR(\n-    workspaceSlug && projectId ? PROJECT_MEMBERS(workspaceSlug, projectId) : null,\n-    workspaceSlug && projectId ? () => fetchProjectMembers(workspaceSlug, projectId) : null,\n-    { revalidateIfStale: false, revalidateOnFocus: false }\n-  );\n+  useSWR(PROJECT_MEMBERS(workspaceSlug, projectId), () => fetchProjectMembers(workspaceSlug, projectId), {\n+    revalidateIfStale: false,\n+    revalidateOnFocus: false,\n+  });\n   // fetching project states\n-  useSWR(\n-    workspaceSlug && projectId ? PROJECT_STATES(workspaceSlug, projectId) : null,\n-    workspaceSlug && projectId ? () => fetchProjectStates(workspaceSlug, projectId) : null,\n-    { revalidateIfStale: false, revalidateOnFocus: false }\n-  );\n+  useSWR(PROJECT_STATES(workspaceSlug, projectId), () => fetchProjectStates(workspaceSlug, projectId), {\n+    revalidateIfStale: false,\n+    revalidateOnFocus: false,\n+  });\n   // fetching project intake state\n-  useSWR(\n-    workspaceSlug && projectId ? PROJECT_INTAKE_STATE(workspaceSlug, projectId) : null,\n-    workspaceSlug && projectId ? () => fetchProjectIntakeState(workspaceSlug, projectId) : null,\n-    { revalidateIfStale: false, revalidateOnFocus: false }\n-  );\n+  useSWR(PROJECT_INTAKE_STATE(workspaceSlug, projectId), () => fetchProjectIntakeState(workspaceSlug, projectId), {\n+    revalidateIfStale: false,\n+    revalidateOnFocus: false,\n+  });\n   // fetching project estimates\n-  useSWR(\n-    workspaceSlug && projectId ? PROJECT_ESTIMATES(workspaceSlug, projectId) : null,\n-    workspaceSlug && projectId ? () => getProjectEstimates(workspaceSlug, projectId) : null,\n-    { revalidateIfStale: false, revalidateOnFocus: false }\n-  );\n+  useSWR(PROJECT_ESTIMATES(workspaceSlug, projectId), () => getProjectEstimates(workspaceSlug, projectId), {\n+    revalidateIfStale: false,\n+    revalidateOnFocus: false,\n+  });\n   // fetching project cycles\n-  useSWR(\n-    workspaceSlug && projectId ? PROJECT_ALL_CYCLES(workspaceSlug, projectId) : null,\n-    workspaceSlug && projectId ? () => fetchAllCycles(workspaceSlug, projectId) : null,\n-    { revalidateIfStale: false, revalidateOnFocus: false }\n-  );\n+  useSWR(PROJECT_ALL_CYCLES(workspaceSlug, projectId), () => fetchAllCycles(workspaceSlug, projectId), {\n+    revalidateIfStale: false,\n+    revalidateOnFocus: false,\n+  });\n   // fetching project modules\n   useSWR(\n-    workspaceSlug && projectId ? PROJECT_MODULES(workspaceSlug, projectId) : null,\n-    workspaceSlug && projectId\n-      ? async () => {\n-          await fetchModulesSlim(workspaceSlug, projectId);\n-          await fetchModules(workspaceSlug, projectId);\n-        }\n-      : null,\n+    PROJECT_MODULES(workspaceSlug, projectId),\n+    async () => {\n+      await Promise.all([fetchModulesSlim(workspaceSlug, projectId), fetchModules(workspaceSlug, projectId)]);\n+    },\n     { revalidateIfStale: false, revalidateOnFocus: false }\n   );\n   // fetching project views\n-  useSWR(\n-    workspaceSlug && projectId ? PROJECT_VIEWS(workspaceSlug, projectId) : null,\n-    workspaceSlug && projectId ? () => fetchViews(workspaceSlug, projectId) : null,\n-    { revalidateIfStale: false, revalidateOnFocus: false }\n-  );\n+  useSWR(PROJECT_VIEWS(workspaceSlug, projectId), () => fetchViews(workspaceSlug, projectId), {\n+    revalidateIfStale: false,\n+    revalidateOnFocus: false,\n+  });\n \n-  // permissions\n-  const canPerformEmptyStateActions = allowPermissions(\n-    [EUserPermissions.ADMIN, EUserPermissions.MEMBER],\n-    EUserPermissionsLevel.WORKSPACE\n-  );\n+  // handle join project\n+  const handleJoinProject = () => {\n+    setIsJoiningProject(true);\n+    joinProject(workspaceSlug, projectId)\n+      .then(() => fetchProjectDetails(workspaceSlug, projectId))\n+      .finally(() => setIsJoiningProject(false));\n+  };\n \n-  // check if the project member apis is loading\n-  if (isParentLoading || (!projectMemberInfo && projectId && hasPermissionToCurrentProject === null))\n-    return (\n-      <div className=\"grid h-full place-items-center bg-custom-background-100 p-4 rounded-lg border border-custom-border-200\">\n-        <div className=\"flex flex-col items-center gap-3 text-center\">\n-          <LogoSpinner />\n-        </div>\n-      </div>\n-    );\n+  const isProjectLoading = (isParentLoading || isProjectDetailsLoading) && !projectDetailsError;\n \n-  // check if the user don't have permission to access the project\n-  if (\n-    ((projectExists?.network && projectExists?.network !== EProjectNetwork.PRIVATE) || isWorkspaceAdmin) &&\n-    projectId &&\n-    hasPermissionToCurrentProject === false\n-  )\n-    return <JoinProject projectId={projectId} />;\n+  if (isProjectLoading) return null;\n \n-  // check if the project info is not found.\n-  if (loader === \"loaded\" && projectId && !!hasPermissionToCurrentProject === false)\n+  if (!isProjectLoading && hasPermissionToCurrentProject === false) {\n     return (\n-      <div className=\"grid h-full place-items-center bg-custom-background-100\">\n-        <EmptyStateDetailed\n-          title={t(\"workspace_projects.empty_state.general.title\")}\n-          description={t(\"workspace_projects.empty_state.general.description\")}\n-          assetKey=\"project\"\n-          assetClassName=\"size-40\"\n-          actions={[\n-            {\n-              label: t(\"workspace_projects.empty_state.general.primary_button.text\"),\n-              onClick: () => {\n-                toggleCreateProjectModal(true);\n-                captureClick({ elementName: PROJECT_TRACKER_ELEMENTS.EMPTY_STATE_CREATE_PROJECT_BUTTON });\n-              },\n-              disabled: !canPerformEmptyStateActions,\n-              variant: \"primary\",\n-            },\n-          ]}\n-        />\n-      </div>\n+      <ProjectAccessRestriction\n+        errorStatusCode={projectDetailsError?.status}\n+        isWorkspaceAdmin={isWorkspaceAdmin}\n+        handleJoinProject={handleJoinProject}\n+        isJoinButtonDisabled={isJoiningProject}\n+      />\n     );\n+  }\n \n   return <>{children}</>;\n });\n"
        },
        {
          "path": "apps/web/core/services/project/project.service.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/services/project/project.service.ts\n===================================================================\n--- apps/web/core/services/project/project.service.ts\t8db95d9 (parent)\n+++ apps/web/core/services/project/project.service.ts\t6022080 (commit)\n@@ -56,9 +56,9 @@\n   async getProject(workspaceSlug: string, projectId: string): Promise<TProject> {\n     return this.get(`/api/workspaces/${workspaceSlug}/projects/${projectId}/`)\n       .then((response) => response?.data)\n       .catch((error) => {\n-        throw error?.response?.data;\n+        throw error?.response;\n       });\n   }\n \n   async getProjectAnalyticsCount(\n"
        },
        {
          "path": "packages/i18n/src/locales/cs/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/cs/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/cs/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/cs/empty-state.ts\t6022080 (commit)\n@@ -23,8 +23,19 @@\n       cta_primary: \"Zkuste znovu nast\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"Vypad to, e nemte pstup k tomuto projektu\",\n+      restricted_description: \"Kontaktujte administrtora a podejte o pstup, abyste zde mohli pokraovat.\",\n+      join_description: \"Kliknte na tlatko ne pro pipojen k projektu.\",\n+      cta_primary: \"Pipojit se k projektu\",\n+      cta_loading: \"Pipojovn k projektu\",\n+    },\n+    invalid_project: {\n+      title: \"Projekt nebyl nalezen\",\n+      description: \"Projekt, kter hledte, neexistuje.\",\n+    },\n     work_items: {\n       title: \"Zante s va prvn pracovn polokou.\",\n       description:\n         \"Pracovn poloky jsou stavebnmi kameny vaeho projektu  piazujte vlastnky, nastavujte priority a snadno sledujte pokrok.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/de/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/de/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/de/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/de/empty-state.ts\t6022080 (commit)\n@@ -25,8 +25,19 @@\n       cta_primary: \"Versuchen Sie neu zu laden\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"Es scheint, als htten Sie keinen Zugriff auf dieses Projekt\",\n+      restricted_description: \"Kontaktieren Sie den Administrator, um Zugriff anzufordern, damit Sie hier fortfahren knnen.\",\n+      join_description: \"Klicken Sie unten auf die Schaltflche, um beizutreten.\",\n+      cta_primary: \"Projekt beitreten\",\n+      cta_loading: \"Projekt wird beigetreten\",\n+    },\n+    invalid_project: {\n+      title: \"Projekt nicht gefunden\",\n+      description: \"Das gesuchte Projekt existiert nicht.\",\n+    },\n     work_items: {\n       title: \"Beginnen Sie mit Ihrem ersten Arbeitselement.\",\n       description:\n         \"Arbeitselemente sind die Bausteine Ihres Projekts  weisen Sie Eigentmer zu, setzen Sie Prioritten und verfolgen Sie den Fortschritt einfach.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/en/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/en/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/en/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/en/empty-state.ts\t6022080 (commit)\n@@ -23,8 +23,19 @@\n       cta_primary: \"Try reloading\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"Seems like you dont have access to this Project\",\n+      restricted_description: \"Contact admin to request for access and you can continue here.\",\n+      join_description: \"Click the button below to join it.\",\n+      cta_primary: \"Join project\",\n+      cta_loading: \"Joining project\",\n+    },\n+    invalid_project: {\n+      title: \"Project not found\",\n+      description: \"The project you are looking for does not exist.\",\n+    },\n     work_items: {\n       title: \"Start with your first work item.\",\n       description:\n         \"Work items are the building blocks of your project  assign owners, set priorities, and track progress easily.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/es/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/es/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/es/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/es/empty-state.ts\t6022080 (commit)\n@@ -25,8 +25,19 @@\n       cta_primary: \"Intentar recargar\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"Parece que no tienes acceso a este proyecto\",\n+      restricted_description: \"Contacta con el administrador para solicitar acceso y podrs continuar aqu.\",\n+      join_description: \"Haz clic en el botn de abajo para unirte.\",\n+      cta_primary: \"Unirse al proyecto\",\n+      cta_loading: \"Unindose al proyecto\",\n+    },\n+    invalid_project: {\n+      title: \"Proyecto no encontrado\",\n+      description: \"El proyecto que buscas no existe.\",\n+    },\n     work_items: {\n       title: \"Comienza con tu primer elemento de trabajo.\",\n       description:\n         \"Los elementos de trabajo son los bloques de construccin de tu proyecto  asigna responsables, establece prioridades y realiza un seguimiento del progreso fcilmente.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/fr/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/fr/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/fr/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/fr/empty-state.ts\t6022080 (commit)\n@@ -26,8 +26,19 @@\n       cta_primary: \"Essayer de recharger\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"Il semble que vous nayez pas accs  ce projet\",\n+      restricted_description: \"Contactez ladministrateur pour demander laccs afin de pouvoir continuer ici.\",\n+      join_description: \"Cliquez sur le bouton ci-dessous pour rejoindre le projet.\",\n+      cta_primary: \"Rejoindre le projet\",\n+      cta_loading: \"Rejoindre le projet\",\n+    },\n+    invalid_project: {\n+      title: \"Projet non trouv\",\n+      description: \"Le projet que vous recherchez nexiste pas.\",\n+    },\n     work_items: {\n       title: \"Commencez avec votre premier lment de travail.\",\n       description:\n         \"Les lments de travail sont les lments constitutifs de votre projet  attribuez des propritaires, dfinissez des priorits et suivez facilement les progrs.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/id/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/id/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/id/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/id/empty-state.ts\t6022080 (commit)\n@@ -24,8 +24,19 @@\n       cta_primary: \"Coba muat ulang\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"Sepertinya Anda tidak memiliki akses ke Proyek ini\",\n+      restricted_description: \"Hubungi admin untuk meminta akses agar Anda dapat melanjutkan di sini.\",\n+      join_description: \"Klik tombol di bawah ini untuk bergabung.\",\n+      cta_primary: \"Bergabung dengan proyek\",\n+      cta_loading: \"Sedang bergabung dengan proyek\",\n+    },\n+    invalid_project: {\n+      title: \"Proyek tidak ditemukan\",\n+      description: \"Proyek yang Anda cari tidak ada.\",\n+    },\n     work_items: {\n       title: \"Mulai dengan item kerja pertama Anda.\",\n       description:\n         \"Item kerja adalah blok bangunan proyek Anda  tetapkan pemilik, atur prioritas, dan lacak kemajuan dengan mudah.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/it/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/it/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/it/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/it/empty-state.ts\t6022080 (commit)\n@@ -26,8 +26,19 @@\n       cta_primary: \"Prova a ricaricare\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"Sembra che tu non abbia accesso a questo progetto\",\n+      restricted_description: \"Contatta l'amministratore per richiedere l'accesso e potrai continuare qui.\",\n+      join_description: \"Clicca sul pulsante qui sotto per unirti.\",\n+      cta_primary: \"Unisciti al progetto\",\n+      cta_loading: \"Unione al progetto in corso\",\n+    },\n+    invalid_project: {\n+      title: \"Progetto non trovato\",\n+      description: \"Il progetto che stai cercando non esiste.\",\n+    },\n     work_items: {\n       title: \"Inizia con il tuo primo elemento di lavoro.\",\n       description:\n         \"Gli elementi di lavoro sono i mattoni del tuo progetto  assegna proprietari, imposta priorit e traccia facilmente i progressi.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/ja/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/ja/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/ja/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/ja/empty-state.ts\t6022080 (commit)\n@@ -23,8 +23,19 @@\n       cta_primary: \"\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"\",\n+      restricted_description: \"\",\n+      join_description: \"\",\n+      cta_primary: \"\",\n+      cta_loading: \"\",\n+    },\n+    invalid_project: {\n+      title: \"\",\n+      description: \"\",\n+    },\n     work_items: {\n       title: \"\",\n       description:\n         \"  \",\n"
        },
        {
          "path": "packages/i18n/src/locales/ko/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/ko/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/ko/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/ko/empty-state.ts\t6022080 (commit)\n@@ -23,8 +23,19 @@\n       cta_primary: \"  \",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"      \",\n+      restricted_description: \"        .\",\n+      join_description: \"    .\",\n+      cta_primary: \" \",\n+      cta_loading: \"  \",\n+    },\n+    invalid_project: {\n+      title: \"   \",\n+      description: \"   .\",\n+    },\n     work_items: {\n       title: \"    .\",\n       description:\n         \"    .          .\",\n"
        },
        {
          "path": "packages/i18n/src/locales/pl/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/pl/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/pl/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/pl/empty-state.ts\t6022080 (commit)\n@@ -23,8 +23,19 @@\n       cta_primary: \"Sprbuj przeadowa\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"Wyglda na to, e nie masz dostpu do tego projektu\",\n+      restricted_description: \"Skontaktuj si z administratorem, aby poprosi o dostp i mc kontynuowa tutaj.\",\n+      join_description: \"Kliknij przycisk poniej, aby doczy.\",\n+      cta_primary: \"Docz do projektu\",\n+      cta_loading: \"Doczanie do projektu\",\n+    },\n+    invalid_project: {\n+      title: \"Projekt nie zosta znaleziony\",\n+      description: \"Projekt, ktrego szukasz, nie istnieje.\",\n+    },\n     work_items: {\n       title: \"Zacznij od swojego pierwszego elementu roboczego.\",\n       description:\n         \"Elementy robocze s podstawowymi elementami Twojego projektu  przypisuj wacicieli, ustalaj priorytety i atwo led postp.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/pt-BR/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/pt-BR/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/pt-BR/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/pt-BR/empty-state.ts\t6022080 (commit)\n@@ -25,8 +25,19 @@\n       cta_primary: \"Tentar recarregar\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"Parece que voc no tem acesso a este projeto\",\n+      restricted_description: \"Entre em contato com o administrador para solicitar acesso e voc poder continuar aqui.\",\n+      join_description: \"Clique no boto abaixo para participar.\",\n+      cta_primary: \"Participar do projeto\",\n+      cta_loading: \"Participando do projeto\",\n+    },\n+    invalid_project: {\n+      title: \"Projeto no encontrado\",\n+      description: \"O projeto que voc est procurando no existe.\",\n+    },\n     work_items: {\n       title: \"Comece com seu primeiro item de trabalho.\",\n       description:\n         \"Os itens de trabalho so os blocos de construo do seu projeto  atribua proprietrios, defina prioridades e acompanhe o progresso facilmente.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/ro/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/ro/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/ro/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/ro/empty-state.ts\t6022080 (commit)\n@@ -24,8 +24,19 @@\n       cta_primary: \"ncercai rencrcarea\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"Se pare c nu avei acces la acest proiect\",\n+      restricted_description: \"Contactai administratorul pentru a solicita accesul i vei putea continua aici.\",\n+      join_description: \"Facei clic pe butonul de mai jos pentru a v altura.\",\n+      cta_primary: \"Alturai-v proiectului\",\n+      cta_loading: \"Se altur proiectului\",\n+    },\n+    invalid_project: {\n+      title: \"Proiect negsit\",\n+      description: \"Proiectul pe care l cutai nu exist.\",\n+    },\n     work_items: {\n       title: \"ncepei cu primul dvs. element de lucru.\",\n       description:\n         \"Elementele de lucru sunt blocurile de construcie ale proiectului dvs.  alocai proprietari, stabilii prioriti i urmrii progresul cu uurin.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/ru/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/ru/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/ru/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/ru/empty-state.ts\t6022080 (commit)\n@@ -24,8 +24,19 @@\n       cta_primary: \" \",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \",       \",\n+      restricted_description: \"  ,   ,     .\",\n+      join_description: \"  ,  .\",\n+      cta_primary: \"  \",\n+      cta_loading: \"  \",\n+    },\n+    invalid_project: {\n+      title: \"  \",\n+      description: \",   ,  .\",\n+    },\n     work_items: {\n       title: \"     .\",\n       description:\n         \"          ,      .\",\n"
        },
        {
          "path": "packages/i18n/src/locales/sk/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/sk/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/sk/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/sk/empty-state.ts\t6022080 (commit)\n@@ -23,8 +23,19 @@\n       cta_primary: \"Skste znovu nata\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"Zd sa, e nemte prstup k tomuto projektu\",\n+      restricted_description: \"Kontaktujte administrtora, aby ste poiadali o prstup, a potom tu mete pokraova.\",\n+      join_description: \"Kliknite na tlaidlo niie, aby ste sa pripojili.\",\n+      cta_primary: \"Pripoji sa k projektu\",\n+      cta_loading: \"Pripjanie k projektu\",\n+    },\n+    invalid_project: {\n+      title: \"Projekt nebol njden\",\n+      description: \"Projekt, ktor hadte, neexistuje.\",\n+    },\n     work_items: {\n       title: \"Zanite s vaou prvou pracovnou polokou.\",\n       description:\n         \"Pracovn poloky s stavebnmi kamemi vho projektu  priraujte vlastnkov, nastavujte priority a jednoducho sledujte pokrok.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/tr-TR/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/tr-TR/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/tr-TR/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/tr-TR/empty-state.ts\t6022080 (commit)\n@@ -23,8 +23,19 @@\n       cta_primary: \"Yeniden yklemeyi dene\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"Grne gre bu projeye eriiminiz yok\",\n+      restricted_description: \"Eriim talep etmek iin yneticiyle iletiime gein, sonra burada devam edebilirsiniz.\",\n+      join_description: \"Katlmak iin aadaki butona tklayn.\",\n+      cta_primary: \"Projeye katl\",\n+      cta_loading: \"Projeye katlnyor\",\n+    },\n+    invalid_project: {\n+      title: \"Proje bulunamad\",\n+      description: \"Aradnz proje mevcut deil.\",\n+    },\n     work_items: {\n       title: \"lk i enizle balayn.\",\n       description:\n         \" eleri projenizin yap talardr  sahipler atayn, ncelikleri belirleyin ve ilerlemeyi kolayca takip edin.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/ua/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/ua/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/ua/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/ua/empty-state.ts\t6022080 (commit)\n@@ -24,8 +24,19 @@\n       cta_primary: \" \",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \",       \",\n+      restricted_description: \"  ,   ,     .\",\n+      join_description: \"  ,  .\",\n+      cta_primary: \"  \",\n+      cta_loading: \"  \",\n+    },\n+    invalid_project: {\n+      title: \"  \",\n+      description: \",   ,  .\",\n+    },\n     work_items: {\n       title: \"     .\",\n       description:\n         \"         ,      .\",\n"
        },
        {
          "path": "packages/i18n/src/locales/vi-VN/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/vi-VN/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/vi-VN/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/vi-VN/empty-state.ts\t6022080 (commit)\n@@ -24,8 +24,19 @@\n       cta_primary: \"Th ti li\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"C v nh bn khng c quyn truy cp vo D n ny\",\n+      restricted_description: \"Lin h vi qun tr vin  yu cu quyn truy cp v bn c th tip tc ti y.\",\n+      join_description: \"Nhn nt bn di  tham gia.\",\n+      cta_primary: \"Tham gia d n\",\n+      cta_loading: \"ang tham gia d n\",\n+    },\n+    invalid_project: {\n+      title: \"Khng tm thy d n\",\n+      description: \"D n bn ang tm kim khng tn ti.\",\n+    },\n     work_items: {\n       title: \"Bt u vi mc cng vic u tin ca bn.\",\n       description:\n         \"Cc mc cng vic l nhng khi xy dng ca d n ca bn  ch nh ngi s hu, t mc  u tin v theo di tin  d dng.\",\n"
        },
        {
          "path": "packages/i18n/src/locales/zh-CN/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/zh-CN/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/zh-CN/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/zh-CN/empty-state.ts\t6022080 (commit)\n@@ -23,8 +23,19 @@\n       cta_primary: \"\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"\",\n+      restricted_description: \"\",\n+      join_description: \"\",\n+      cta_primary: \"\",\n+      cta_loading: \"\",\n+    },\n+    invalid_project: {\n+      title: \"\",\n+      description: \"\",\n+    },\n     work_items: {\n       title: \"\",\n       description: \"  \",\n       cta_primary: \"\",\n"
        },
        {
          "path": "packages/i18n/src/locales/zh-TW/empty-state.ts",
          "status": "modified",
          "diff": "Index: packages/i18n/src/locales/zh-TW/empty-state.ts\n===================================================================\n--- packages/i18n/src/locales/zh-TW/empty-state.ts\t8db95d9 (parent)\n+++ packages/i18n/src/locales/zh-TW/empty-state.ts\t6022080 (commit)\n@@ -23,8 +23,19 @@\n       cta_primary: \"\",\n     },\n   },\n   project_empty_state: {\n+    no_access: {\n+      title: \"\",\n+      restricted_description: \"\",\n+      join_description: \"\",\n+      cta_primary: \"\",\n+      cta_loading: \"\",\n+    },\n+    invalid_project: {\n+      title: \"\",\n+      description: \"\",\n+    },\n     work_items: {\n       title: \"\",\n       description: \"  \",\n       cta_primary: \"\",\n"
        }
      ]
    },
    {
      "id": "fix-table-backspace",
      "sha": "7136b3129bd25b08a54d9518968811ece5458269",
      "parentSha": "48f1999c952bc78dda3ad3eacf5b1ccd7aab6827",
      "spec": "Implement Backspace behavior for deleting the last cell of a table and refactor the helper used to locate parent nodes.\n\nMake the following changes:\n\n1) Add keyboard shortcut handling in the TableCell extension to select the entire cell when appropriate\n- File: packages/editor/src/core/extensions/table/table-cell.ts\n- Import TableMap from @tiptap/pm/tables.\n- Import findParentNodeOfType from packages/editor/src/core/helpers/common and isCellSelection from ./table/utilities/helpers.\n- Define addKeyboardShortcuts with a Backspace handler that:\n  - Returns false if the current selection is a cell selection.\n  - Returns false unless the selection is a caret at the very start of the cell (collapsed selection and parentOffset is 0).\n  - Uses findParentNodeOfType on the current selection to locate the table node (pass [CORE_EXTENSIONS.TABLE]).\n  - Uses findParentNodeOfType to locate the current cell node (pass [CORE_EXTENSIONS.TABLE_CELL, CORE_EXTENSIONS.TABLE_HEADER]).\n  - If both table and current cell are found, use TableMap.get(tableNode) to check that the table map has width === 1 and height === 1.\n  - If it is a 1x1 table, set a cell selection on the current cell node (use the position pointing to the cell node itself based on the current selection depth) using editor.commands.setCellSelection and return true.\n  - Otherwise return false.\n- Do not alter parseHTML or other behavior.\n\n2) Refactor the helper to support multiple type names and return depth information\n- File: packages/editor/src/core/helpers/common.ts\n- Update findParentNodeOfType to accept typeName: string[] instead of a single string.\n- Return an object containing node (ProseMirror Node), pos (start(depth) - 1), and depth.\n- Use includes() to match against any of the provided type names.\n- Update TypeScript typing by importing Node as ProseMirrorNode from @tiptap/pm/model.\n\n3) Update table utilities to the new helper signature\n- Files:\n  - packages/editor/src/core/extensions/table/table/utilities/insert-line-above-table-action.ts\n  - packages/editor/src/core/extensions/table/table/utilities/insert-line-below-table-action.ts\n- Change calls to findParentNodeOfType(selection, CORE_EXTENSIONS.TABLE) to findParentNodeOfType(selection, [CORE_EXTENSIONS.TABLE]).\n- Continue using the returned .pos and .node from the helper; add null checks if needed.\n\n4) Minor comment label correction in bubble menu\n- File: packages/editor/src/core/components/menus/bubble-menu/root.tsx\n- Update the local comment header to read \"// local imports\" instead of \"// local components\".\n\nBehavioral outcome:\n- When the caret is at the start of a cell in a 1x1 table and Backspace is pressed, the entire cell becomes selected, enabling subsequent deletion via normal editor behavior. The change must not affect Backspace behavior in multi-cell tables, mid-cell positions, or when a cell selection is already active.\n",
      "prompt": "Enhance the rich-text editor so that pressing Backspace at the very start of a single-cell (1x1) table selects the entire cell to enable deletion. Update the shared parent-node lookup helper to handle multiple node type names and return additional context needed by callers, and adjust any utilities that use this helper. Keep the change scoped so that normal Backspace behavior in other contexts is unaffected.",
      "supplementalFiles": [
        "packages/editor/src/core/constants/extension.ts",
        "packages/editor/src/core/extensions/table/index.ts",
        "packages/editor/src/core/extensions/table/plugins/selection-outline/plugin.ts",
        "packages/editor/src/core/extensions/table/plugins/selection-outline/utils.ts",
        "packages/editor/src/core/extensions/table/table/table-controls.ts",
        "packages/editor/src/core/extensions/table/table/table-view.tsx",
        "packages/editor/src/core/extensions/table/table/utilities/delete-key-shortcut.ts",
        "packages/editor/src/core/extensions/table/table/utilities/delete-column.ts",
        "packages/editor/src/core/extensions/table/table/utilities/delete-row.ts",
        "packages/editor/src/core/extensions/table/table/utilities/helpers.ts"
      ],
      "fileDiffs": [
        {
          "path": "packages/editor/src/core/components/menus/bubble-menu/root.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/menus/bubble-menu/root.tsx\n===================================================================\n--- packages/editor/src/core/components/menus/bubble-menu/root.tsx\t48f1999 (parent)\n+++ packages/editor/src/core/components/menus/bubble-menu/root.tsx\t7136b31 (commit)\n@@ -23,9 +23,9 @@\n // extensions\n import { isCellSelection } from \"@/extensions/table/table/utilities/helpers\";\n // types\n import { TEditorCommands } from \"@/types\";\n-// local components\n+// local imports\n import { TextAlignmentSelector } from \"./alignment-selector\";\n \n type EditorBubbleMenuProps = Omit<BubbleMenuProps, \"children\">;\n \n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/table-cell.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/table/table-cell.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/table-cell.ts\t48f1999 (parent)\n+++ packages/editor/src/core/extensions/table/table-cell.ts\t7136b31 (commit)\n@@ -1,10 +1,14 @@\n import { mergeAttributes, Node } from \"@tiptap/core\";\n+import { TableMap } from \"@tiptap/pm/tables\";\n // constants\n import { CORE_EXTENSIONS } from \"@/constants/extension\";\n+// helpers\n+import { findParentNodeOfType } from \"@/helpers/common\";\n // local imports\n import { TableCellSelectionOutlinePlugin } from \"./plugins/selection-outline/plugin\";\n import { DEFAULT_COLUMN_WIDTH } from \"./table\";\n+import { isCellSelection } from \"./table/utilities/helpers\";\n \n export interface TableCellOptions {\n   HTMLAttributes: Record<string, any>;\n }\n@@ -53,8 +57,49 @@\n   addProseMirrorPlugins() {\n     return [TableCellSelectionOutlinePlugin(this.editor)];\n   },\n \n+  addKeyboardShortcuts() {\n+    return {\n+      Backspace: ({ editor }) => {\n+        const { state } = editor.view;\n+        const { selection } = state;\n+\n+        if (isCellSelection(selection)) return false;\n+\n+        // Check if we're at the start of the cell\n+        if (selection.from !== selection.to || selection.$head.parentOffset !== 0) return false;\n+\n+        // Find table and current cell\n+        const tableNode = findParentNodeOfType(selection, [CORE_EXTENSIONS.TABLE])?.node;\n+        const currentCellInfo = findParentNodeOfType(selection, [\n+          CORE_EXTENSIONS.TABLE_CELL,\n+          CORE_EXTENSIONS.TABLE_HEADER,\n+        ]);\n+        const currentCellNode = currentCellInfo?.node;\n+        const cellPos = currentCellInfo?.pos;\n+        const cellDepth = currentCellInfo?.depth;\n+\n+        if (!tableNode || !currentCellNode || cellPos === null || cellDepth === null) return false;\n+\n+        // Check if this is the only cell in the TableMap (1 row, 1 column)\n+        const tableMap = TableMap.get(tableNode);\n+        const isOnlyCell = tableMap.width === 1 && tableMap.height === 1;\n+        if (!isOnlyCell) return false;\n+\n+        // Cell has content, select the entire cell\n+        // Use the position that points to the cell node itself, not its content\n+        const cellNodePos = selection.$head.before(cellDepth);\n+\n+        editor.commands.setCellSelection({\n+          anchorCell: cellNodePos,\n+          headCell: cellNodePos,\n+        });\n+        return true;\n+      },\n+    };\n+  },\n+\n   parseHTML() {\n     return [{ tag: \"td\" }];\n   },\n \n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/table/utilities/insert-line-above-table-action.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/table/table/utilities/insert-line-above-table-action.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/table/utilities/insert-line-above-table-action.ts\t48f1999 (parent)\n+++ packages/editor/src/core/extensions/table/table/utilities/insert-line-above-table-action.ts\t7136b31 (commit)\n@@ -12,9 +12,9 @@\n     // Get the current selection\n     const { selection } = editor.state;\n \n     // Find the table node and its position\n-    const tableNode = findParentNodeOfType(selection, CORE_EXTENSIONS.TABLE);\n+    const tableNode = findParentNodeOfType(selection, [CORE_EXTENSIONS.TABLE]);\n     if (!tableNode) return false;\n \n     const tablePos = tableNode.pos;\n \n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/table/utilities/insert-line-below-table-action.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/table/table/utilities/insert-line-below-table-action.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/table/utilities/insert-line-below-table-action.ts\t48f1999 (parent)\n+++ packages/editor/src/core/extensions/table/table/utilities/insert-line-below-table-action.ts\t7136b31 (commit)\n@@ -12,9 +12,9 @@\n     // Get the current selection\n     const { selection } = editor.state;\n \n     // Find the table node and its position\n-    const tableNode = findParentNodeOfType(selection, CORE_EXTENSIONS.TABLE);\n+    const tableNode = findParentNodeOfType(selection, [CORE_EXTENSIONS.TABLE]);\n     if (!tableNode) return false;\n \n     const tablePos = tableNode.pos;\n     const table = tableNode.node;\n"
        },
        {
          "path": "packages/editor/src/core/helpers/common.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/helpers/common.ts\n===================================================================\n--- packages/editor/src/core/helpers/common.ts\t48f1999 (parent)\n+++ packages/editor/src/core/helpers/common.ts\t7136b31 (commit)\n@@ -1,4 +1,5 @@\n+import type { Node as ProseMirrorNode } from \"@tiptap/pm/model\";\n import { EditorState, Selection } from \"@tiptap/pm/state\";\n // plane imports\n import { cn } from \"@plane/utils\";\n // constants\n@@ -20,19 +21,30 @@\n     containerClassName\n   );\n \n // Helper function to find the parent node of a specific type\n-export function findParentNodeOfType(selection: Selection, typeName: string) {\n+export const findParentNodeOfType = (\n+  selection: Selection,\n+  typeName: string[]\n+): {\n+  node: ProseMirrorNode;\n+  pos: number;\n+  depth: number;\n+} | null => {\n   let depth = selection.$anchor.depth;\n   while (depth > 0) {\n     const node = selection.$anchor.node(depth);\n-    if (node.type.name === typeName) {\n-      return { node, pos: selection.$anchor.start(depth) - 1 };\n+    if (typeName.includes(node.type.name)) {\n+      return {\n+        node,\n+        pos: selection.$anchor.start(depth) - 1,\n+        depth,\n+      };\n     }\n     depth--;\n   }\n   return null;\n-}\n+};\n \n export const findTableAncestor = (node: Node | null): HTMLTableElement | null => {\n   while (node !== null && node.nodeName !== \"TABLE\") {\n     node = node.parentNode;\n"
        }
      ]
    },
    {
      "id": "fix-total-count",
      "sha": "008e0489687789a1c54f2e9c616ab2fbd627482e",
      "parentSha": "7e15fcc080b339db24a273b03f2b84373dfa7c32",
      "spec": "Implement a correct total count for paginated issue listings and optimize count annotations.\n\nMake the following changes:\n\n1) Offset paginator total calculation\n- File: apps/api/plane/utils/paginator.py\n- In class OffsetPaginator.get_result(), change the fallback when total_count_queryset is not provided. Compute total_count from the full queryset, not from the sliced results:\n  - total_count = self.total_count_queryset.count() if provided; otherwise, total_count = queryset.count().\n  - Do not alter the existing cursor logic or page slicing, just the total count source.\n\n2) External API: list work items total count\n- File: apps/api/plane/api/views/issue.py\n- In IssueListCreateAPIEndpoint.get():\n  - Define a total_issue_queryset limited to the workspace and project: Issue.issue_objects.filter(project_id=project_id, workspace__slug=slug).\n  - Pass this as total_count_queryset to self.paginate(...):\n    - self.paginate(request=request, queryset=issue_queryset, total_count_queryset=total_issue_queryset, on_results=...)\n  - Leave ordering/annotation logic unchanged.\n\n3) App views: archive issue list\n- File: apps/api/plane/app/views/issue/archive.py\n- Imports: include Count from django.db.models in the import list.\n- In IssueArchiveViewSet.get_queryset(): replace link_count, attachment_count, and sub_issues_count annotations with Subquery + Count patterns:\n  - link_count = Subquery(\n      IssueLink.objects.filter(issue=OuterRef(\"id\"))\n      .values(\"issue\")\n      .annotate(count=Count(\"id\"))\n      .values(\"count\")\n    )\n  - attachment_count = Subquery(\n      FileAsset.objects.filter(issue_id=OuterRef(\"id\"), entity_type=FileAsset.EntityTypeContext.ISSUE_ATTACHMENT)\n      .values(\"issue_id\")\n      .annotate(count=Count(\"id\"))\n      .values(\"count\")\n    )\n  - sub_issues_count = Subquery(\n      Issue.issue_objects.filter(parent=OuterRef(\"id\"))\n      .values(\"parent\")\n      .annotate(count=Count(\"id\"))\n      .values(\"count\")\n    )\n- In IssueArchiveViewSet.list():\n  - Create a total_issue_queryset filtered for archived issues in the same workspace and project with the same filters as issue_queryset:\n    - Base filters: deleted_at__isnull=True, archived_at__isnull=False, project_id=project_id, workspace__slug=slug\n    - Apply the same filters dict used for issue_queryset.\n    - Respect the show_sub_issues toggle; if show_sub_issues == \"false\", add parent__isnull=True to total_issue_queryset.\n  - Pass total_count_queryset=total_issue_queryset to all paginate calls (group + subgroup pagination, group-only pagination, and the default list pagination path).\n\n4) App views: main issue list with guest visibility and total counts\n- File: apps/api/plane/app/views/issue/base.py\n- In IssueViewSet.get_queryset():\n  - Replace link_count, attachment_count, and sub_issues_count annotations with Subquery + Count, just like in the archive view above.\n  - Remove the trailing .distinct() at the end of the queryset chain (so the queryset ends without .distinct()).\n- In IssueViewSet.list():\n  - Add a total_issue_queryset mirroring the base issue scope for the same workspace and project, then apply the exact same filters and extra_filters used for the main issue_queryset.\n  - Apply the guest visibility constraint (created_by=request.user) to total_issue_queryset whenever it is applied to issue_queryset. This ensures guests see correct total counts consistent with visible data.\n  - Pass total_count_queryset=total_issue_queryset into self.paginate(...) in all code paths (group + subgroup pagination, group-only pagination, and default pagination when not grouped).\n\n5) Do not change behavior outside the specified files/sections. Keep serialization, ordering, grouping, on_results projections, and other API surface unchanged.\n\nAcceptance criteria:\n- total_count in paginated responses reflects the full, filtered dataset count (not the page slice), consistent for both grouped and ungrouped listings in app views and external API.\n- Guest users see total_count values restricted to their visibility (created_by constraint when applicable).\n- show_sub_issues toggle in archived issues affects both the page queryset and total counts consistently.\n- Count annotations (link_count, attachment_count, sub_issues_count) use Subquery + Count as described and return correct values.\n- No regressions in ordering, grouping, or response shapes.",
      "prompt": "The work item lists are showing incorrect total results when scrolling/paginating. Fix the pagination to report the correct total count across issue list endpoints and align it with filters and visibility constraints. Introduce a dedicated total count queryset where needed so totals are computed independently of page slices, ensure guest visibility rules apply to totals, and update the archived and main issue list endpoints accordingly. Also update the per-issue count annotations to use more reliable subquery-based counts for links, attachments, and sub-issues. Do not change response shapes or ordering/grouping behavior.",
      "supplementalFiles": [
        "apps/api/plane/app/views/base.py",
        "apps/api/plane/utils/order_queryset.py",
        "apps/api/plane/utils/issue_filters.py",
        "apps/api/plane/utils/grouper.py",
        "apps/api/plane/utils/global_paginator.py"
      ],
      "fileDiffs": [
        {
          "path": "apps/api/plane/api/views/issue.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/api/views/issue.py\n===================================================================\n--- apps/api/plane/api/views/issue.py\t7e15fcc (parent)\n+++ apps/api/plane/api/views/issue.py\t008e048 (commit)\n@@ -330,8 +330,12 @@\n                 .values(\"count\")\n             )\n         )\n \n+        total_issue_queryset = Issue.issue_objects.filter(\n+            project_id=project_id, workspace__slug=slug\n+        )\n+\n         # Priority Ordering\n         if order_by_param == \"priority\" or order_by_param == \"-priority\":\n             priority_order = (\n                 priority_order if order_by_param == \"priority\" else priority_order[::-1]\n@@ -389,8 +393,9 @@\n \n         return self.paginate(\n             request=request,\n             queryset=(issue_queryset),\n+            total_count_queryset=total_issue_queryset,\n             on_results=lambda issues: IssueSerializer(\n                 issues, many=True, fields=self.fields, expand=self.expand\n             ).data,\n         )\n"
        },
        {
          "path": "apps/api/plane/app/views/issue/archive.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/views/issue/archive.py\n===================================================================\n--- apps/api/plane/app/views/issue/archive.py\t7e15fcc (parent)\n+++ apps/api/plane/app/views/issue/archive.py\t008e048 (commit)\n@@ -2,9 +2,9 @@\n import json\n \n # Django imports\n from django.core.serializers.json import DjangoJSONEncoder\n-from django.db.models import F, Func, OuterRef, Q, Prefetch, Exists, Subquery\n+from django.db.models import F, Func, OuterRef, Q, Prefetch, Exists, Subquery, Count\n from django.utils import timezone\n from django.utils.decorators import method_decorator\n from django.views.decorators.gzip import gzip_page\n \n@@ -68,27 +68,33 @@\n                     ).values(\"cycle_id\")[:1]\n                 )\n             )\n             .annotate(\n-                link_count=IssueLink.objects.filter(issue=OuterRef(\"id\"))\n-                .order_by()\n-                .annotate(count=Func(F(\"id\"), function=\"Count\"))\n-                .values(\"count\")\n+                link_count=Subquery(\n+                    IssueLink.objects.filter(issue=OuterRef(\"id\"))\n+                    .values(\"issue\")\n+                    .annotate(count=Count(\"id\"))\n+                    .values(\"count\")\n+                )\n             )\n             .annotate(\n-                attachment_count=FileAsset.objects.filter(\n-                    issue_id=OuterRef(\"id\"),\n-                    entity_type=FileAsset.EntityTypeContext.ISSUE_ATTACHMENT,\n+                attachment_count=Subquery(\n+                    FileAsset.objects.filter(\n+                        issue_id=OuterRef(\"id\"),\n+                        entity_type=FileAsset.EntityTypeContext.ISSUE_ATTACHMENT,\n+                    )\n+                    .values(\"issue_id\")\n+                    .annotate(count=Count(\"id\"))\n+                    .values(\"count\")\n                 )\n-                .order_by()\n-                .annotate(count=Func(F(\"id\"), function=\"Count\"))\n-                .values(\"count\")\n             )\n             .annotate(\n-                sub_issues_count=Issue.issue_objects.filter(parent=OuterRef(\"id\"))\n-                .order_by()\n-                .annotate(count=Func(F(\"id\"), function=\"Count\"))\n-                .values(\"count\")\n+                sub_issues_count=Subquery(\n+                    Issue.issue_objects.filter(parent=OuterRef(\"id\"))\n+                    .values(\"parent\")\n+                    .annotate(count=Count(\"id\"))\n+                    .values(\"count\")\n+                )\n             )\n         )\n \n     @method_decorator(gzip_page)\n@@ -100,8 +106,21 @@\n         order_by_param = request.GET.get(\"order_by\", \"-created_at\")\n \n         issue_queryset = self.get_queryset().filter(**filters)\n \n+        total_issue_queryset = Issue.objects.filter(\n+            deleted_at__isnull=True,\n+            archived_at__isnull=False,\n+            project_id=project_id,\n+            workspace__slug=slug,\n+        ).filter(**filters)\n+\n+        total_issue_queryset = (\n+            total_issue_queryset\n+            if show_sub_issues == \"true\"\n+            else total_issue_queryset.filter(parent__isnull=True)\n+        )\n+\n         issue_queryset = (\n             issue_queryset\n             if show_sub_issues == \"true\"\n             else issue_queryset.filter(parent__isnull=True)\n@@ -135,8 +154,9 @@\n                     return self.paginate(\n                         request=request,\n                         order_by=order_by_param,\n                         queryset=issue_queryset,\n+                        total_count_queryset=total_issue_queryset,\n                         on_results=lambda issues: issue_on_results(\n                             group_by=group_by, issues=issues, sub_group_by=sub_group_by\n                         ),\n                         paginator_cls=SubGroupedOffsetPaginator,\n@@ -169,8 +189,9 @@\n                 return self.paginate(\n                     request=request,\n                     order_by=order_by_param,\n                     queryset=issue_queryset,\n+                    total_count_queryset=total_issue_queryset,\n                     on_results=lambda issues: issue_on_results(\n                         group_by=group_by, issues=issues, sub_group_by=sub_group_by\n                     ),\n                     paginator_cls=GroupedOffsetPaginator,\n@@ -195,8 +216,9 @@\n             return self.paginate(\n                 order_by=order_by_param,\n                 request=request,\n                 queryset=issue_queryset,\n+                total_count_queryset=total_issue_queryset,\n                 on_results=lambda issues: issue_on_results(\n                     group_by=group_by, issues=issues, sub_group_by=sub_group_by\n                 ),\n             )\n"
        },
        {
          "path": "apps/api/plane/app/views/issue/base.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/views/issue/base.py\n===================================================================\n--- apps/api/plane/app/views/issue/base.py\t7e15fcc (parent)\n+++ apps/api/plane/app/views/issue/base.py\t008e048 (commit)\n@@ -212,29 +212,35 @@\n                     ).values(\"cycle_id\")[:1]\n                 )\n             )\n             .annotate(\n-                link_count=IssueLink.objects.filter(issue=OuterRef(\"id\"))\n-                .order_by()\n-                .annotate(count=Func(F(\"id\"), function=\"Count\"))\n-                .values(\"count\")\n+                link_count=Subquery(\n+                    IssueLink.objects.filter(issue=OuterRef(\"id\"))\n+                    .values(\"issue\")\n+                    .annotate(count=Count(\"id\"))\n+                    .values(\"count\")\n+                )\n             )\n             .annotate(\n-                attachment_count=FileAsset.objects.filter(\n-                    issue_id=OuterRef(\"id\"),\n-                    entity_type=FileAsset.EntityTypeContext.ISSUE_ATTACHMENT,\n+                attachment_count=Subquery(\n+                    FileAsset.objects.filter(\n+                        issue_id=OuterRef(\"id\"),\n+                        entity_type=FileAsset.EntityTypeContext.ISSUE_ATTACHMENT,\n+                    )\n+                    .values(\"issue_id\")\n+                    .annotate(count=Count(\"id\"))\n+                    .values(\"count\")\n                 )\n-                .order_by()\n-                .annotate(count=Func(F(\"id\"), function=\"Count\"))\n-                .values(\"count\")\n             )\n             .annotate(\n-                sub_issues_count=Issue.issue_objects.filter(parent=OuterRef(\"id\"))\n-                .order_by()\n-                .annotate(count=Func(F(\"id\"), function=\"Count\"))\n-                .values(\"count\")\n+                sub_issues_count=Subquery(\n+                    Issue.issue_objects.filter(parent=OuterRef(\"id\"))\n+                    .values(\"parent\")\n+                    .annotate(count=Count(\"id\"))\n+                    .values(\"count\")\n+                )\n             )\n-        ).distinct()\n+        )\n \n     @method_decorator(gzip_page)\n     @allow_permission([ROLE.ADMIN, ROLE.MEMBER, ROLE.GUEST])\n     def list(self, request, slug, project_id):\n@@ -248,8 +254,12 @@\n \n         issue_queryset = self.get_queryset().filter(**filters, **extra_filters)\n         # Custom ordering for priority and state\n \n+        total_issue_queryset = Issue.issue_objects.filter(\n+            project_id=project_id, workspace__slug=slug\n+        ).filter(**filters, **extra_filters)\n+\n         # Issue queryset\n         issue_queryset, order_by_param = order_issue_queryset(\n             issue_queryset=issue_queryset, order_by_param=order_by_param\n         )\n@@ -280,8 +290,9 @@\n             ).exists()\n             and not project.guest_view_all_features\n         ):\n             issue_queryset = issue_queryset.filter(created_by=request.user)\n+            total_issue_queryset = total_issue_queryset.filter(created_by=request.user)\n \n         if group_by:\n             if sub_group_by:\n                 if group_by == sub_group_by:\n@@ -295,8 +306,9 @@\n                     return self.paginate(\n                         request=request,\n                         order_by=order_by_param,\n                         queryset=issue_queryset,\n+                        total_count_queryset=total_issue_queryset,\n                         on_results=lambda issues: issue_on_results(\n                             group_by=group_by, issues=issues, sub_group_by=sub_group_by\n                         ),\n                         paginator_cls=SubGroupedOffsetPaginator,\n@@ -328,8 +340,9 @@\n                 return self.paginate(\n                     request=request,\n                     order_by=order_by_param,\n                     queryset=issue_queryset,\n+                    total_count_queryset=total_issue_queryset,\n                     on_results=lambda issues: issue_on_results(\n                         group_by=group_by, issues=issues, sub_group_by=sub_group_by\n                     ),\n                     paginator_cls=GroupedOffsetPaginator,\n@@ -353,8 +366,9 @@\n             return self.paginate(\n                 order_by=order_by_param,\n                 request=request,\n                 queryset=issue_queryset,\n+                total_count_queryset=total_issue_queryset,\n                 on_results=lambda issues: issue_on_results(\n                     group_by=group_by, issues=issues, sub_group_by=sub_group_by\n                 ),\n             )\n"
        },
        {
          "path": "apps/api/plane/utils/paginator.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/utils/paginator.py\n===================================================================\n--- apps/api/plane/utils/paginator.py\t7e15fcc (parent)\n+++ apps/api/plane/utils/paginator.py\t008e048 (commit)\n@@ -159,9 +159,9 @@\n \n         total_count = (\n             self.total_count_queryset.count()\n             if self.total_count_queryset\n-            else results.count()\n+            else queryset.count()\n         )\n \n         # Check if there are more results available after the current page\n \n"
        }
      ]
    },
    {
      "id": "image-download-alignment",
      "sha": "f679628365e78889755ea81c039b57994f1a595a",
      "parentSha": "ba6b822f607af7621cf5977f3a4e6a889022cf07",
      "spec": "Implement image download and alignment options for editor image blocks, and render the image fullscreen viewer in a dedicated portal, with the following changes:\n\n1) Custom image block UI and behavior\n- In packages/editor/src/core/extensions/custom-image/components/block.tsx:\n  - Accept a new prop downloadSrc and read alignment from node.attrs.\n  - Adjust the outer container to align the image based on node.attrs.alignment:\n    - left: no shift\n    - center: add classes \"ml-[50%] -translate-x-1/2\"\n    - right: add classes \"ml-[100%] -translate-x-full\"\n  - Show the image toolbar only when the remote image src and a download src are both resolved and the initial resize has completed.\n  - Render the new ImageToolbarRoot and pass: alignment, width, height, aspectRatio, src, downloadSrc, and a handler that updates the node attribute alignment via updateAttributesSafely.\n  - Update the resize behavior to account for alignment:\n    - If alignment is right, compute new width from the containers right edge; move the resize handle to the left bottom with \"cursor-nesw-resize\".\n    - Otherwise, compute new width from the left edge; place the resize handle on the right bottom with \"cursor-nwse-resize\".\n  - Keep selection overlay non-interactive by adding pointer-events-none.\n\n2) Node view resolves both display and download sources\n- In packages/editor/src/core/extensions/custom-image/components/node-view.tsx:\n  - Add resolvedDownloadSrc state.\n  - When imgNodeSrc changes, call extension.options.getImageSource and getImageDownloadSource, and set both resolvedSrc and resolvedDownloadSrc.\n  - Pass downloadSrc to the block component.\n\n3) Image toolbar components\n- Add an alignment dropdown action:\n  - packages/editor/src/core/extensions/custom-image/components/toolbar/alignment.tsx\n  - Uses @plane/hooks useOutsideClickDetector to close on outside click.\n  - Presents IMAGE_ALIGNMENT_OPTIONS and calls handleChange(option.value), while toggling toolbar visibility via toggleToolbarViewStatus when open.\n- Add a download action button:\n  - packages/editor/src/core/extensions/custom-image/components/toolbar/download.tsx\n  - Clicking opens the downloadSrc in a new tab.\n- Split fullscreen into modal and root action:\n  - packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/modal.tsx\n    - Render a fullscreen image viewer inside a portal element #editor-portal if present, otherwise inline with a console warning.\n    - Props: aspectRatio, isFullScreenEnabled, downloadSrc, src, toggleFullScreenMode, width.\n    - Support zoom (MIN_ZOOM=0.5 to MAX_ZOOM=2) with +/- buttons, mouse wheel with ctrlKey or metaKey, and dragging when larger than viewport; provide accessible aria labels.\n  - packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx\n    - Manage isFullScreenEnabled state and toggleToolbarViewStatus when modal is open.\n    - Render the modal and a launcher button with tooltip.\n  - packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/index.ts should export from ./root.\n- Replace old toolbar root with a new composition:\n  - packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx\n    - Render a persistent toolbar wrapper that becomes visible on hover or when any child UI is active.\n    - Include ImageDownloadAction, ImageAlignmentAction, and ImageFullScreenActionRoot.\n\n4) Alignment attribute and defaults\n- Add a new alignment attribute (default \"left\") to images:\n  - packages/editor/src/core/extensions/image/extension-config.tsx: add attribute alignment with default \"left\".\n  - packages/editor/src/core/extensions/custom-image/types.ts: add ECustomImageAttributeNames.ALIGNMENT and type TCustomImageAlignment (\"left\" | \"center\" | \"right\"); include alignment in TCustomImageAttributes.\n  - packages/editor/src/core/extensions/custom-image/utils.ts: include ALIGNMENT in DEFAULT_CUSTOM_IMAGE_ATTRIBUTES and export IMAGE_ALIGNMENT_OPTIONS with lucide-react icons AlignLeft, AlignCenter, AlignRight.\n\n5) File handler contract and wiring for download URLs\n- Extend the read-only file handler:\n  - packages/editor/src/core/types/config.ts: in TReadOnlyFileHandler add getAssetDownloadSrc(path: string) => Promise<string>.\n- Propagate the new option into the custom image extension:\n  - packages/editor/src/core/extensions/custom-image/extension.ts: read getAssetDownloadSrc from fileHandler and expose it to the extension as getImageDownloadSource alongside getImageSource and restoreImage.\n- In the web app, implement getAssetDownloadSrc using utils:\n  - web/core/hooks/editor/use-editor-config.ts: import getEditorAssetDownloadSrc from @plane/utils; return full download URLs for project/workspace or the original URL if it already starts with http.\n\n6) Portal container in app layouts\n- Render a portal container in both apps so the fullscreen modal can mount into it:\n  - space/app/layout.tsx: add <div id=\"editor-portal\" /> inside <body>.\n  - web/app/layout.tsx: add <div id=\"editor-portal\" /> alongside existing context menu portal.\n\n7) Editor package dependency\n- packages/editor/package.json: add @plane/hooks to dependencies because the alignment dropdown uses useOutsideClickDetector.\n\nAcceptance criteria\n- For any inserted image (custom image block):\n  - A toolbar appears on hover with buttons for Download, Align, and Fullscreen.\n  - Download opens a proper download URL in a new tab.\n  - Align toggles left/center/right and persists via node attrs; visual position updates accordingly; resize handle flips for right alignment and resizing calculates from the correct edge.\n  - Fullscreen opens a modal rendered via #editor-portal; supports zoom via +/- buttons and ctrl/meta wheel, drag when zoomed, and includes accessible aria labels; includes download and open-in-new-tab actions inside the modal.\n- The base image extension also supports the alignment attribute with default \"left\".\n- No runtime errors if #editor-portal does not exist; the modal renders inline with a console warning.\n- Type contracts updated so getAssetDownloadSrc is available in read-only handlers and used to resolve downloadSrc.",
      "prompt": "Add image download and alignment controls to the editors image block and update the fullscreen viewer to render via a dedicated portal. The toolbar should let users download the image, change its alignment (left/center/right), and open a fullscreen viewer. Alignment should affect both the on-page layout and how resizing works for right-aligned images. The fullscreen modal should render into a body-level portal, support zoom (keyboard and trackpad with ctrl/meta), panning when zoomed, and provide download and open-in-new-tab actions. Update the editors file handler contract to provide a download URL generator and wire it through to the image node so the toolbar and modal receive a valid downloadSrc. Ensure both the web and space apps include the portal container in their layouts.",
      "supplementalFiles": [
        "packages/utils/src/editor.ts",
        "packages/editor/src/core/constants/extension.ts",
        "packages/editor/src/core/helpers/get-extension-storage.ts",
        "packages/editor/src/core/extensions/image/extension.tsx",
        "web/core/components/pages/navigation-pane/tab-panels/assets.tsx",
        "packages/editor/src/core/types/editor.ts"
      ],
      "fileDiffs": [
        {
          "path": "packages/editor/package.json",
          "status": "modified",
          "diff": "Index: packages/editor/package.json\n===================================================================\n--- packages/editor/package.json\tba6b822 (parent)\n+++ packages/editor/package.json\tf679628 (commit)\n@@ -38,8 +38,9 @@\n     \"@floating-ui/react\": \"^0.26.4\",\n     \"@headlessui/react\": \"^1.7.3\",\n     \"@hocuspocus/provider\": \"^2.15.0\",\n     \"@plane/constants\": \"*\",\n+    \"@plane/hooks\": \"*\",\n     \"@plane/types\": \"*\",\n     \"@plane/ui\": \"*\",\n     \"@plane/utils\": \"*\",\n     \"@tiptap/core\": \"2.10.4\",\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/block.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/block.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/block.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/block.tsx\tf679628 (commit)\n@@ -16,8 +16,9 @@\n   imageFromFileSystem: string | undefined;\n   setEditorContainer: (editorContainer: HTMLDivElement | null) => void;\n   setFailedToLoadImage: (isError: boolean) => void;\n   src: string | undefined;\n+  downloadSrc: string | undefined;\n };\n \n export const CustomImageBlock: React.FC<CustomImageBlockProps> = (props) => {\n   // props\n@@ -31,11 +32,18 @@\n     selected,\n     setEditorContainer,\n     setFailedToLoadImage,\n     src: resolvedImageSrc,\n+    downloadSrc: resolvedDownloadSrc,\n     updateAttributes,\n   } = props;\n-  const { width: nodeWidth, height: nodeHeight, aspectRatio: nodeAspectRatio, src: imgNodeSrc } = node.attrs;\n+  const {\n+    width: nodeWidth,\n+    height: nodeHeight,\n+    aspectRatio: nodeAspectRatio,\n+    src: imgNodeSrc,\n+    alignment: nodeAlignment,\n+  } = node.attrs;\n   // states\n   const [size, setSize] = useState<TCustomImageSize>({\n     width: ensurePixelString(nodeWidth, \"35%\") ?? \"35%\",\n     height: ensurePixelString(nodeHeight, \"auto\") ?? \"auto\",\n@@ -130,14 +138,19 @@\n       if (!containerRef.current || !containerRect.current || !size.aspectRatio) return;\n \n       const clientX = \"touches\" in e ? e.touches[0].clientX : e.clientX;\n \n-      const newWidth = Math.max(clientX - containerRect.current.left, MIN_SIZE);\n-      const newHeight = newWidth / size.aspectRatio;\n-\n-      setSize((prevSize) => ({ ...prevSize, width: `${newWidth}px`, height: `${newHeight}px` }));\n+      if (nodeAlignment === \"right\") {\n+        const newWidth = Math.max(containerRect.current.right - clientX, MIN_SIZE);\n+        const newHeight = newWidth / size.aspectRatio;\n+        setSize((prevSize) => ({ ...prevSize, width: `${newWidth}px`, height: `${newHeight}px` }));\n+      } else {\n+        const newWidth = Math.max(clientX - containerRect.current.left, MIN_SIZE);\n+        const newHeight = newWidth / size.aspectRatio;\n+        setSize((prevSize) => ({ ...prevSize, width: `${newWidth}px`, height: `${newHeight}px` }));\n+      }\n     },\n-    [size.aspectRatio]\n+    [nodeAlignment, size.aspectRatio]\n   );\n \n   const handleResizeEnd = useCallback(() => {\n     setIsResizing(false);\n@@ -187,118 +200,127 @@\n   const showImageLoader = !(resolvedImageSrc || imageFromFileSystem) || !initialResizeComplete || hasErroredOnFirstLoad;\n   // show the image upload status only when the resolvedImageSrc is not ready\n   const showUploadStatus = !resolvedImageSrc;\n   // show the image utils only if the remote image's (post upload) src is set and the initial resize is complete (but not while we're showing the preview imageFromFileSystem)\n-  const showImageUtils = resolvedImageSrc && initialResizeComplete;\n+  const showImageToolbar = resolvedImageSrc && resolvedDownloadSrc && initialResizeComplete;\n   // show the image resizer only if the editor is editable, the remote image's (post upload) src is set and the initial resize is complete (but not while we're showing the preview imageFromFileSystem)\n   const showImageResizer = editor.isEditable && resolvedImageSrc && initialResizeComplete;\n   // show the preview image from the file system if the remote image's src is not set\n   const displayedImageSrc = resolvedImageSrc || imageFromFileSystem;\n \n   return (\n     <div\n       id={getImageBlockId(node.attrs.id ?? \"\")}\n-      ref={containerRef}\n-      className=\"group/image-component relative inline-block max-w-full\"\n-      onMouseDown={handleImageMouseDown}\n-      style={{\n-        width: size.width,\n-        ...(size.aspectRatio && { aspectRatio: size.aspectRatio }),\n-      }}\n+      className={cn(\"w-fit max-w-full transition-all\", {\n+        \"ml-[50%] -translate-x-1/2\": nodeAlignment === \"center\",\n+        \"ml-[100%] -translate-x-full\": nodeAlignment === \"right\",\n+      })}\n     >\n-      {showImageLoader && (\n-        <div\n-          className=\"animate-pulse bg-custom-background-80 rounded-md\"\n-          style={{ width: size.width, height: size.height }}\n-        />\n-      )}\n-      <img\n-        ref={imageRef}\n-        src={displayedImageSrc}\n-        onLoad={handleImageLoad}\n-        onError={async (e) => {\n-          // for old image extension this command doesn't exist or if the image failed to load for the first time\n-          if (!extension.options.restoreImage || hasTriedRestoringImageOnce) {\n-            setFailedToLoadImage(true);\n-            return;\n-          }\n-\n-          try {\n-            setHasErroredOnFirstLoad(true);\n-            // this is a type error from tiptap, don't remove await until it's fixed\n-            if (!imgNodeSrc) {\n-              throw new Error(\"No source image to restore from\");\n-            }\n-            await extension.options.restoreImage?.(imgNodeSrc);\n-            if (!imageRef.current) {\n-              throw new Error(\"Image reference not found\");\n-            }\n-            if (!resolvedImageSrc) {\n-              throw new Error(\"No resolved image source available\");\n-            }\n-            imageRef.current.src = resolvedImageSrc;\n-          } catch {\n-            // if the image failed to even restore, then show the error state\n-            setFailedToLoadImage(true);\n-            console.error(\"Error while loading image\", e);\n-          } finally {\n-            setHasErroredOnFirstLoad(false);\n-            setHasTriedRestoringImageOnce(true);\n-          }\n-        }}\n-        width={size.width}\n-        className={cn(\"image-component block rounded-md\", {\n-          // hide the image while the background calculations of the image loader are in progress (to avoid flickering) and show the loader until then\n-          hidden: showImageLoader,\n-          \"read-only-image\": !editor.isEditable,\n-          \"blur-sm opacity-80 loading-image\": !resolvedImageSrc,\n-        })}\n+      <div\n+        ref={containerRef}\n+        className=\"group/image-component relative inline-block max-w-full\"\n+        onMouseDown={handleImageMouseDown}\n         style={{\n           width: size.width,\n           ...(size.aspectRatio && { aspectRatio: size.aspectRatio }),\n         }}\n-      />\n-      {showUploadStatus && node.attrs.id && <ImageUploadStatus editor={editor} nodeId={node.attrs.id} />}\n-      {showImageUtils && (\n-        <ImageToolbarRoot\n-          containerClassName={\n-            \"absolute top-1 right-1 z-20 bg-black/40 rounded opacity-0 pointer-events-none group-hover/image-component:opacity-100 group-hover/image-component:pointer-events-auto transition-opacity\"\n-          }\n-          image={{\n+      >\n+        {showImageLoader && (\n+          <div\n+            className=\"animate-pulse bg-custom-background-80 rounded-md\"\n+            style={{ width: size.width, height: size.height }}\n+          />\n+        )}\n+        <img\n+          ref={imageRef}\n+          src={displayedImageSrc}\n+          onLoad={handleImageLoad}\n+          onError={async (e) => {\n+            // for old image extension this command doesn't exist or if the image failed to load for the first time\n+            if (!extension.options.restoreImage || hasTriedRestoringImageOnce) {\n+              setFailedToLoadImage(true);\n+              return;\n+            }\n+\n+            try {\n+              setHasErroredOnFirstLoad(true);\n+              // this is a type error from tiptap, don't remove await until it's fixed\n+              if (!imgNodeSrc) {\n+                throw new Error(\"No source image to restore from\");\n+              }\n+              await extension.options.restoreImage?.(imgNodeSrc);\n+              if (!imageRef.current) {\n+                throw new Error(\"Image reference not found\");\n+              }\n+              if (!resolvedImageSrc) {\n+                throw new Error(\"No resolved image source available\");\n+              }\n+              imageRef.current.src = resolvedImageSrc;\n+            } catch {\n+              // if the image failed to even restore, then show the error state\n+              setFailedToLoadImage(true);\n+              console.error(\"Error while loading image\", e);\n+            } finally {\n+              setHasErroredOnFirstLoad(false);\n+              setHasTriedRestoringImageOnce(true);\n+            }\n+          }}\n+          width={size.width}\n+          className={cn(\"image-component block rounded-md\", {\n+            // hide the image while the background calculations of the image loader are in progress (to avoid flickering) and show the loader until then\n+            hidden: showImageLoader,\n+            \"read-only-image\": !editor.isEditable,\n+            \"blur-sm opacity-80 loading-image\": !resolvedImageSrc,\n+          })}\n+          style={{\n             width: size.width,\n-            height: size.height,\n-            aspectRatio: size.aspectRatio === null ? 1 : size.aspectRatio,\n-            src: resolvedImageSrc,\n+            ...(size.aspectRatio && { aspectRatio: size.aspectRatio }),\n           }}\n         />\n-      )}\n-      {selected && displayedImageSrc === resolvedImageSrc && (\n-        <div className=\"absolute inset-0 size-full bg-custom-primary-500/30\" />\n-      )}\n-      {showImageResizer && (\n-        <>\n-          <div\n-            className={cn(\n-              \"absolute inset-0 border-2 border-custom-primary-100 pointer-events-none rounded-md transition-opacity duration-100 ease-in-out\",\n-              {\n-                \"opacity-100\": isResizing,\n-                \"opacity-0 group-hover/image-component:opacity-100\": !isResizing,\n-              }\n-            )}\n+        {showUploadStatus && node.attrs.id && <ImageUploadStatus editor={editor} nodeId={node.attrs.id} />}\n+        {showImageToolbar && (\n+          <ImageToolbarRoot\n+            alignment={nodeAlignment ?? \"left\"}\n+            width={size.width}\n+            height={size.height}\n+            aspectRatio={size.aspectRatio === null ? 1 : size.aspectRatio}\n+            src={resolvedImageSrc}\n+            downloadSrc={resolvedDownloadSrc}\n+            handleAlignmentChange={(alignment) =>\n+              updateAttributesSafely({ alignment }, \"Failed to update attributes while changing alignment:\")\n+            }\n           />\n-          <div\n-            className={cn(\n-              \"absolute bottom-0 right-0 translate-y-1/2 translate-x-1/2 size-4 rounded-full bg-custom-primary-100 border-2 border-white cursor-nwse-resize transition-opacity duration-100 ease-in-out\",\n-              {\n-                \"opacity-100 pointer-events-auto\": isResizing,\n-                \"opacity-0 pointer-events-none group-hover/image-component:opacity-100 group-hover/image-component:pointer-events-auto\":\n-                  !isResizing,\n-              }\n-            )}\n-            onMouseDown={handleResizeStart}\n-            onTouchStart={handleResizeStart}\n-          />\n-        </>\n-      )}\n+        )}\n+        {selected && displayedImageSrc === resolvedImageSrc && (\n+          <div className=\"absolute inset-0 size-full bg-custom-primary-500/30 pointer-events-none\" />\n+        )}\n+        {showImageResizer && (\n+          <>\n+            <div\n+              className={cn(\n+                \"absolute inset-0 border-2 border-custom-primary-100 pointer-events-none rounded-md transition-opacity duration-100 ease-in-out\",\n+                {\n+                  \"opacity-100\": isResizing,\n+                  \"opacity-0 group-hover/image-component:opacity-100\": !isResizing,\n+                }\n+              )}\n+            />\n+            <div\n+              className={cn(\n+                \"absolute bottom-0 translate-y-1/2 size-4 rounded-full bg-custom-primary-100 border-2 border-white transition-opacity duration-100 ease-in-out\",\n+                {\n+                  \"opacity-100 pointer-events-auto\": isResizing,\n+                  \"opacity-0 pointer-events-none group-hover/image-component:opacity-100 group-hover/image-component:pointer-events-auto\":\n+                    !isResizing,\n+                  \"left-0 -translate-x-1/2 cursor-nesw-resize\": nodeAlignment === \"right\",\n+                  \"right-0 translate-x-1/2 cursor-nwse-resize\": nodeAlignment !== \"right\",\n+                }\n+              )}\n+              onMouseDown={handleResizeStart}\n+              onTouchStart={handleResizeStart}\n+            />\n+          </>\n+        )}\n+      </div>\n     </div>\n   );\n };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/node-view.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/node-view.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/node-view.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/node-view.tsx\tf679628 (commit)\n@@ -25,8 +25,9 @@\n   const { src: imgNodeSrc } = node.attrs;\n \n   const [isUploaded, setIsUploaded] = useState(false);\n   const [resolvedSrc, setResolvedSrc] = useState<string | undefined>(undefined);\n+  const [resolvedDownloadSrc, setResolvedDownloadSrc] = useState<string | undefined>(undefined);\n   const [imageFromFileSystem, setImageFromFileSystem] = useState<string | undefined>(undefined);\n   const [failedToLoadImage, setFailedToLoadImage] = useState(false);\n \n   const [editorContainer, setEditorContainer] = useState<HTMLDivElement | null>(null);\n@@ -52,14 +53,17 @@\n \n   useEffect(() => {\n     if (!imgNodeSrc) {\n       setResolvedSrc(undefined);\n+      setResolvedDownloadSrc(undefined);\n       return;\n     }\n \n     const getImageSource = async () => {\n       const url = await extension.options.getImageSource?.(imgNodeSrc);\n       setResolvedSrc(url);\n+      const downloadUrl = await extension.options.getImageDownloadSource?.(imgNodeSrc);\n+      setResolvedDownloadSrc(downloadUrl);\n     };\n     getImageSource();\n   }, [imgNodeSrc, extension.options]);\n \n@@ -72,8 +76,9 @@\n             imageFromFileSystem={imageFromFileSystem}\n             setEditorContainer={setEditorContainer}\n             setFailedToLoadImage={setFailedToLoadImage}\n             src={resolvedSrc}\n+            downloadSrc={resolvedDownloadSrc}\n             {...props}\n           />\n         ) : (\n           <CustomImageUploader\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/alignment.tsx",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/alignment.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/alignment.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/alignment.tsx\tf679628 (commit)\n@@ -0,0 +1,63 @@\n+import { ChevronDown } from \"lucide-react\";\n+import { useEffect, useRef, useState } from \"react\";\n+// plane imports\n+import { useOutsideClickDetector } from \"@plane/hooks\";\n+import { Tooltip } from \"@plane/ui\";\n+// local imports\n+import type { TCustomImageAlignment } from \"../../types\";\n+import { IMAGE_ALIGNMENT_OPTIONS } from \"../../utils\";\n+\n+type Props = {\n+  activeAlignment: TCustomImageAlignment;\n+  handleChange: (alignment: TCustomImageAlignment) => void;\n+  toggleToolbarViewStatus: (val: boolean) => void;\n+};\n+\n+export const ImageAlignmentAction: React.FC<Props> = (props) => {\n+  const { activeAlignment, handleChange, toggleToolbarViewStatus } = props;\n+  // states\n+  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n+  // refs\n+  const dropdownRef = useRef<HTMLDivElement>(null);\n+  // derived values\n+  const activeAlignmentDetails = IMAGE_ALIGNMENT_OPTIONS.find((option) => option.value === activeAlignment);\n+\n+  useOutsideClickDetector(dropdownRef, () => setIsDropdownOpen(false));\n+\n+  useEffect(() => {\n+    toggleToolbarViewStatus(isDropdownOpen);\n+  }, [isDropdownOpen, toggleToolbarViewStatus]);\n+\n+  return (\n+    <div ref={dropdownRef} className=\"h-full relative\">\n+      <Tooltip tooltipContent=\"Align\">\n+        <button\n+          type=\"button\"\n+          className=\"h-full flex items-center gap-1 text-white/60 hover:text-white transition-colors\"\n+          onClick={() => setIsDropdownOpen((prev) => !prev)}\n+        >\n+          {activeAlignmentDetails && <activeAlignmentDetails.icon className=\"flex-shrink-0 size-3\" />}\n+          <ChevronDown className=\"flex-shrink-0 size-2\" />\n+        </button>\n+      </Tooltip>\n+      {isDropdownOpen && (\n+        <div className=\"absolute top-full left-1/2 -translate-x-1/2 mt-0.5 h-7 bg-black/80 flex items-center gap-2 px-2 rounded\">\n+          {IMAGE_ALIGNMENT_OPTIONS.map((option) => (\n+            <Tooltip key={option.value} tooltipContent={option.label}>\n+              <button\n+                type=\"button\"\n+                className=\"flex-shrink-0 h-full grid place-items-center text-white/60 hover:text-white transition-colors\"\n+                onClick={() => {\n+                  handleChange(option.value);\n+                  setIsDropdownOpen(false);\n+                }}\n+              >\n+                <option.icon className=\"size-3\" />\n+              </button>\n+            </Tooltip>\n+          ))}\n+        </div>\n+      )}\n+    </div>\n+  );\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/download.tsx",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/download.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/download.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/download.tsx\tf679628 (commit)\n@@ -0,0 +1,24 @@\n+import { Download } from \"lucide-react\";\n+// plane imports\n+import { Tooltip } from \"@plane/ui\";\n+\n+type Props = {\n+  src: string;\n+};\n+\n+export const ImageDownloadAction: React.FC<Props> = (props) => {\n+  const { src } = props;\n+\n+  return (\n+    <Tooltip tooltipContent=\"Download\">\n+      <button\n+        type=\"button\"\n+        onClick={() => window.open(src, \"_blank\")}\n+        className=\"flex-shrink-0 h-full grid place-items-center text-white/60 hover:text-white transition-colors\"\n+        aria-label=\"Download image\"\n+      >\n+        <Download className=\"size-3\" />\n+      </button>\n+    </Tooltip>\n+  );\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/index.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/index.ts\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/index.ts\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/index.ts\tf679628 (commit)\n@@ -0,0 +1,1 @@\n+export * from \"./root\";\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/modal.tsx",
          "status": "renamed",
          "oldPath": "packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen.tsx",
          "diff": "===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/modal.tsx\tf679628 (commit)\n@@ -1,38 +1,40 @@\n-import { ExternalLink, Maximize, Minus, Plus, X } from \"lucide-react\";\n-import { useCallback, useEffect, useMemo, useState, useRef } from \"react\";\n+import { Download, ExternalLink, Minus, Plus, X } from \"lucide-react\";\n+import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\n+import ReactDOM from \"react-dom\";\n // plane imports\n import { cn } from \"@plane/utils\";\n \n-type Props = {\n-  image: {\n-    width: string;\n-    height: string;\n-    aspectRatio: number;\n-    src: string;\n-  };\n-  isOpen: boolean;\n-  toggleFullScreenMode: (val: boolean) => void;\n-};\n-\n const MIN_ZOOM = 0.5;\n const MAX_ZOOM = 2;\n const ZOOM_SPEED = 0.05;\n const ZOOM_STEPS = [0.5, 1, 1.5, 2];\n \n-export const ImageFullScreenAction: React.FC<Props> = (props) => {\n-  const { image, isOpen: isFullScreenEnabled, toggleFullScreenMode } = props;\n-  const { src, width, aspectRatio } = image;\n+type Props = {\n+  aspectRatio: number;\n+  isFullScreenEnabled: boolean;\n+  downloadSrc: string;\n+  src: string;\n+  toggleFullScreenMode: (val: boolean) => void;\n+  width: string;\n+};\n \n+const ImageFullScreenModalWithoutPortal = (props: Props) => {\n+  const { aspectRatio, isFullScreenEnabled, downloadSrc, src, toggleFullScreenMode, width } = props;\n+  // refs\n+  const dragStart = useRef({ x: 0, y: 0 });\n+  const dragOffset = useRef({ x: 0, y: 0 });\n+\n   const [magnification, setMagnification] = useState<number>(1);\n   const [initialMagnification, setInitialMagnification] = useState(1);\n   const [isDragging, setIsDragging] = useState(false);\n-  const dragStart = useRef({ x: 0, y: 0 });\n-  const dragOffset = useRef({ x: 0, y: 0 });\n   const modalRef = useRef<HTMLDivElement>(null);\n   const imgRef = useRef<HTMLImageElement | null>(null);\n \n-  const widthInNumber = useMemo(() => Number(width?.replace(\"px\", \"\")), [width]);\n+  const widthInNumber = useMemo(() => {\n+    if (!width) return 0;\n+    return Number(width.replace(\"px\", \"\"));\n+  }, [width]);\n \n   const setImageRef = useCallback(\n     (node: HTMLImageElement | null) => {\n       if (!node || !isFullScreenEnabled) return;\n@@ -147,9 +149,9 @@\n \n       e.preventDefault();\n \n       // Handle pinch-to-zoom\n-      if (e.ctrlKey) {\n+      if (e.ctrlKey || e.metaKey) {\n         const delta = e.deltaY;\n         setMagnification((prev) => {\n           const newZoom = prev * (1 - delta * ZOOM_SPEED);\n           const clampedZoom = Math.min(Math.max(newZoom, MIN_ZOOM), MAX_ZOOM);\n@@ -164,9 +166,9 @@\n         });\n         return;\n       }\n     },\n-    [isFullScreenEnabled, magnification]\n+    [isFullScreenEnabled]\n   );\n \n   // Event listeners\n   useEffect(() => {\n@@ -184,85 +186,100 @@\n       window.removeEventListener(\"wheel\", handleWheel);\n     };\n   }, [isFullScreenEnabled, handleKeyDown, handleMouseMove, handleMouseUp, handleWheel]);\n \n+  if (!isFullScreenEnabled) return null;\n+\n   return (\n-    <>\n+    <div\n+      className={cn(\"fixed inset-0 size-full z-30 bg-black/90 opacity-0 pointer-events-none transition-opacity\", {\n+        \"opacity-100 pointer-events-auto editor-image-full-screen-modal\": isFullScreenEnabled,\n+        \"cursor-default\": !isDragging,\n+        \"cursor-grabbing\": isDragging,\n+      })}\n+      role=\"dialog\"\n+      aria-modal=\"true\"\n+      aria-label=\"Fullscreen image viewer\"\n+    >\n       <div\n-        className={cn(\"fixed inset-0 size-full z-20 bg-black/90 opacity-0 pointer-events-none transition-opacity\", {\n-          \"opacity-100 pointer-events-auto editor-image-full-screen-modal\": isFullScreenEnabled,\n-          \"cursor-default\": !isDragging,\n-          \"cursor-grabbing\": isDragging,\n-        })}\n+        ref={modalRef}\n+        onMouseDown={(e) => e.target === modalRef.current && handleClose()}\n+        className=\"relative size-full grid place-items-center overflow-hidden\"\n       >\n-        <div\n-          ref={modalRef}\n-          onMouseDown={(e) => e.target === modalRef.current && handleClose()}\n-          className=\"relative size-full grid place-items-center overflow-hidden\"\n+        <button\n+          type=\"button\"\n+          onClick={handleClose}\n+          className=\"absolute top-10 right-10 size-8 grid place-items-center\"\n+          aria-label=\"Close image viewer\"\n         >\n-          <button\n-            type=\"button\"\n-            onClick={handleClose}\n-            className=\"absolute top-10 right-10 size-8 grid place-items-center\"\n-          >\n-            <X className=\"size-8 text-white/60 hover:text-white transition-colors\" />\n-          </button>\n-          <img\n-            ref={setImageRef}\n-            src={src}\n-            className=\"read-only-image rounded-lg\"\n-            style={{\n-              width: `${widthInNumber * initialMagnification}px`,\n-              maxWidth: \"none\",\n-              maxHeight: \"none\",\n-              aspectRatio,\n-              position: \"relative\",\n-              transform: `scale(${magnification})`,\n-              transformOrigin: \"center\",\n-              transition: \"width 0.2s ease, transform 0.2s ease\",\n-            }}\n-            onMouseDown={handleMouseDown}\n-          />\n-          <div className=\"fixed bottom-10 left-1/2 -translate-x-1/2 flex items-center justify-center gap-1 rounded-md border border-white/20 py-2 divide-x divide-white/20 bg-black\">\n-            <div className=\"flex items-center\">\n-              <button\n-                type=\"button\"\n-                onClick={() => handleMagnification(\"decrease\")}\n-                className=\"size-6 grid place-items-center text-white/60 hover:text-white disabled:text-white/30 transition-colors duration-200\"\n-                disabled={magnification <= MIN_ZOOM}\n-              >\n-                <Minus className=\"size-4\" />\n-              </button>\n-              <span className=\"text-sm w-12 text-center text-white\">{Math.round(100 * magnification)}%</span>\n-              <button\n-                type=\"button\"\n-                onClick={() => handleMagnification(\"increase\")}\n-                className=\"size-6 grid place-items-center text-white/60 hover:text-white disabled:text-white/30 transition-colors duration-200\"\n-                disabled={magnification >= MAX_ZOOM}\n-              >\n-                <Plus className=\"size-4\" />\n-              </button>\n-            </div>\n+          <X className=\"size-8 text-white/60 hover:text-white transition-colors\" />\n+        </button>\n+        <img\n+          ref={setImageRef}\n+          src={src}\n+          className=\"read-only-image rounded-lg\"\n+          style={{\n+            width: `${widthInNumber * initialMagnification}px`,\n+            maxWidth: \"none\",\n+            maxHeight: \"none\",\n+            aspectRatio,\n+            position: \"relative\",\n+            transform: `scale(${magnification})`,\n+            transformOrigin: \"center\",\n+            transition: \"width 0.2s ease, transform 0.2s ease\",\n+          }}\n+          onMouseDown={handleMouseDown}\n+        />\n+        <div className=\"fixed bottom-10 left-1/2 -translate-x-1/2 flex items-center justify-center gap-1 rounded-md border border-white/20 py-2 divide-x divide-white/20 bg-black\">\n+          <div className=\"flex items-center\">\n             <button\n               type=\"button\"\n-              onClick={() => window.open(src, \"_blank\")}\n-              className=\"flex-shrink-0 size-8 grid place-items-center text-white/60 hover:text-white transition-colors duration-200\"\n+              onClick={() => handleMagnification(\"decrease\")}\n+              className=\"size-6 grid place-items-center text-white/60 hover:text-white disabled:text-white/30 transition-colors duration-200\"\n+              disabled={magnification <= MIN_ZOOM}\n+              aria-label=\"Zoom out\"\n             >\n-              <ExternalLink className=\"size-4\" />\n+              <Minus className=\"size-4\" />\n             </button>\n+            <span className=\"text-sm w-12 text-center text-white\">{Math.round(100 * magnification)}%</span>\n+            <button\n+              type=\"button\"\n+              onClick={() => handleMagnification(\"increase\")}\n+              className=\"size-6 grid place-items-center text-white/60 hover:text-white disabled:text-white/30 transition-colors duration-200\"\n+              disabled={magnification >= MAX_ZOOM}\n+              aria-label=\"Zoom in\"\n+            >\n+              <Plus className=\"size-4\" />\n+            </button>\n           </div>\n+          <button\n+            type=\"button\"\n+            onClick={() => window.open(downloadSrc, \"_blank\")}\n+            className=\"flex-shrink-0 size-8 grid place-items-center text-white/60 hover:text-white transition-colors duration-200\"\n+            aria-label=\"Download image\"\n+          >\n+            <Download className=\"size-4\" />\n+          </button>\n+          <button\n+            type=\"button\"\n+            onClick={() => window.open(src, \"_blank\")}\n+            className=\"flex-shrink-0 size-8 grid place-items-center text-white/60 hover:text-white transition-colors duration-200\"\n+            aria-label=\"Open image in new tab\"\n+          >\n+            <ExternalLink className=\"size-4\" />\n+          </button>\n         </div>\n       </div>\n-      <button\n-        type=\"button\"\n-        onClick={(e) => {\n-          e.preventDefault();\n-          e.stopPropagation();\n-          toggleFullScreenMode(true);\n-        }}\n-        className=\"size-5 grid place-items-center hover:bg-black/40 text-white rounded transition-colors\"\n-      >\n-        <Maximize className=\"size-3\" />\n-      </button>\n-    </>\n+    </div>\n   );\n };\n+\n+export const ImageFullScreenModal: React.FC<Props> = (props) => {\n+  let modal = <ImageFullScreenModalWithoutPortal {...props} />;\n+  const portal = document.querySelector(\"#editor-portal\");\n+  if (portal) {\n+    modal = ReactDOM.createPortal(modal, portal);\n+  } else {\n+    console.warn(\"Portal element #editor-portal not found. Rendering inline.\");\n+  }\n+  return modal;\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/full-screen/root.tsx\tf679628 (commit)\n@@ -0,0 +1,56 @@\n+import { Maximize } from \"lucide-react\";\n+import { useEffect, useState } from \"react\";\n+// plane imports\n+import { Tooltip } from \"@plane/ui\";\n+// local imports\n+import { ImageFullScreenModal } from \"./modal\";\n+\n+type Props = {\n+  image: {\n+    downloadSrc: string;\n+    src: string;\n+    height: string;\n+    width: string;\n+    aspectRatio: number;\n+  };\n+  toggleToolbarViewStatus: (val: boolean) => void;\n+};\n+\n+export const ImageFullScreenActionRoot: React.FC<Props> = (props) => {\n+  const { image, toggleToolbarViewStatus } = props;\n+  // states\n+  const [isFullScreenEnabled, setIsFullScreenEnabled] = useState(false);\n+  // derived values\n+  const { downloadSrc, src, width, aspectRatio } = image;\n+\n+  useEffect(() => {\n+    toggleToolbarViewStatus(isFullScreenEnabled);\n+  }, [isFullScreenEnabled, toggleToolbarViewStatus]);\n+\n+  return (\n+    <>\n+      <ImageFullScreenModal\n+        aspectRatio={aspectRatio}\n+        isFullScreenEnabled={isFullScreenEnabled}\n+        src={src}\n+        downloadSrc={downloadSrc}\n+        width={width}\n+        toggleFullScreenMode={setIsFullScreenEnabled}\n+      />\n+      <Tooltip tooltipContent=\"View in full screen\">\n+        <button\n+          type=\"button\"\n+          onClick={(e) => {\n+            e.preventDefault();\n+            e.stopPropagation();\n+            setIsFullScreenEnabled(true);\n+          }}\n+          className=\"flex-shrink-0 h-full grid place-items-center text-white/60 hover:text-white transition-colors\"\n+          aria-label=\"View image in full screen\"\n+        >\n+          <Maximize className=\"size-3\" />\n+        </button>\n+      </Tooltip>\n+    </>\n+  );\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/components/toolbar/root.tsx\tf679628 (commit)\n@@ -1,37 +1,45 @@\n import { useState } from \"react\";\n // plane imports\n import { cn } from \"@plane/utils\";\n // local imports\n-import { ImageFullScreenAction } from \"./full-screen\";\n+import type { TCustomImageAlignment } from \"../../types\";\n+import { ImageAlignmentAction } from \"./alignment\";\n+import { ImageDownloadAction } from \"./download\";\n+import { ImageFullScreenActionRoot } from \"./full-screen\";\n \n type Props = {\n-  containerClassName?: string;\n-  image: {\n-    width: string;\n-    height: string;\n-    aspectRatio: number;\n-    src: string;\n-  };\n+  alignment: TCustomImageAlignment;\n+  width: string;\n+  height: string;\n+  aspectRatio: number;\n+  src: string;\n+  downloadSrc: string;\n+  handleAlignmentChange: (alignment: TCustomImageAlignment) => void;\n };\n \n export const ImageToolbarRoot: React.FC<Props> = (props) => {\n-  const { containerClassName, image } = props;\n-  // state\n-  const [isFullScreenEnabled, setIsFullScreenEnabled] = useState(false);\n+  const { alignment, downloadSrc, handleAlignmentChange } = props;\n+  // states\n+  const [shouldShowToolbar, setShouldShowToolbar] = useState(false);\n \n   return (\n     <>\n       <div\n-        className={cn(containerClassName, {\n-          \"opacity-100 pointer-events-auto\": isFullScreenEnabled,\n-        })}\n+        className={cn(\n+          \"absolute top-1 right-1 h-7 z-20 bg-black/80 rounded flex items-center gap-2 px-2 opacity-0 pointer-events-none group-hover/image-component:opacity-100 group-hover/image-component:pointer-events-auto transition-opacity\",\n+          {\n+            \"opacity-100 pointer-events-auto\": shouldShowToolbar,\n+          }\n+        )}\n       >\n-        <ImageFullScreenAction\n-          image={image}\n-          isOpen={isFullScreenEnabled}\n-          toggleFullScreenMode={(val) => setIsFullScreenEnabled(val)}\n+        <ImageDownloadAction src={downloadSrc} />\n+        <ImageAlignmentAction\n+          activeAlignment={alignment}\n+          handleChange={handleAlignmentChange}\n+          toggleToolbarViewStatus={setShouldShowToolbar}\n         />\n+        <ImageFullScreenActionRoot image={props} toggleToolbarViewStatus={setShouldShowToolbar} />\n       </div>\n     </>\n   );\n };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/extension.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/extension.ts\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/extension.ts\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/extension.ts\tf679628 (commit)\n@@ -19,9 +19,9 @@\n \n export const CustomImageExtension = (props: Props) => {\n   const { fileHandler, isEditable } = props;\n   // derived values\n-  const { getAssetSrc, restore: restoreImageFn } = fileHandler;\n+  const { getAssetSrc, getAssetDownloadSrc, restore: restoreImageFn } = fileHandler;\n \n   return CustomImageExtensionConfig.extend({\n     selectable: isEditable,\n     draggable: isEditable,\n@@ -30,8 +30,9 @@\n       const upload = \"upload\" in fileHandler ? fileHandler.upload : undefined;\n \n       return {\n         ...this.parent?.(),\n+        getImageDownloadSource: getAssetDownloadSrc,\n         getImageSource: getAssetSrc,\n         restoreImage: restoreImageFn,\n         uploadImage: upload,\n       };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/types.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/types.ts\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/types.ts\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/types.ts\tf679628 (commit)\n@@ -7,8 +7,9 @@\n   WIDTH = \"width\",\n   HEIGHT = \"height\",\n   ASPECT_RATIO = \"aspectRatio\",\n   SOURCE = \"src\",\n+  ALIGNMENT = \"alignment\",\n }\n \n export type Pixel = `${number}px`;\n \n@@ -19,14 +20,17 @@\n   height: PixelAttribute<\"auto\">;\n   aspectRatio: number | null;\n };\n \n+export type TCustomImageAlignment = \"left\" | \"center\" | \"right\";\n+\n export type TCustomImageAttributes = {\n   [ECustomImageAttributeNames.ID]: string | null;\n   [ECustomImageAttributeNames.WIDTH]: PixelAttribute<\"35%\" | number> | null;\n   [ECustomImageAttributeNames.HEIGHT]: PixelAttribute<\"auto\" | number> | null;\n   [ECustomImageAttributeNames.ASPECT_RATIO]: number | null;\n   [ECustomImageAttributeNames.SOURCE]: string | null;\n+  [ECustomImageAttributeNames.ALIGNMENT]: TCustomImageAlignment;\n };\n \n export type UploadEntity = ({ event: \"insert\" } | { event: \"drop\"; file: File }) & { hasOpenedFileInputOnce?: boolean };\n \n@@ -36,8 +40,9 @@\n   event: \"insert\" | \"drop\";\n };\n \n export type CustomImageExtensionOptions = {\n+  getImageDownloadSource: TFileHandler[\"getAssetDownloadSrc\"];\n   getImageSource: TFileHandler[\"getAssetSrc\"];\n   restoreImage: TFileHandler[\"restore\"];\n   uploadImage?: TFileHandler[\"upload\"];\n };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/utils.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/custom-image/utils.ts\n===================================================================\n--- packages/editor/src/core/extensions/custom-image/utils.ts\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/custom-image/utils.ts\tf679628 (commit)\n@@ -1,18 +1,20 @@\n import type { Editor } from \"@tiptap/core\";\n+import { AlignCenter, AlignLeft, AlignRight, type LucideIcon } from \"lucide-react\";\n // constants\n import { CORE_EXTENSIONS } from \"@/constants/extension\";\n // helpers\n import { getExtensionStorage } from \"@/helpers/get-extension-storage\";\n // local imports\n-import { ECustomImageAttributeNames, type Pixel, type TCustomImageAttributes } from \"./types\";\n+import { ECustomImageAttributeNames, TCustomImageAlignment, type Pixel, type TCustomImageAttributes } from \"./types\";\n \n export const DEFAULT_CUSTOM_IMAGE_ATTRIBUTES: TCustomImageAttributes = {\n   [ECustomImageAttributeNames.SOURCE]: null,\n   [ECustomImageAttributeNames.ID]: null,\n   [ECustomImageAttributeNames.WIDTH]: \"35%\",\n   [ECustomImageAttributeNames.HEIGHT]: \"auto\",\n   [ECustomImageAttributeNames.ASPECT_RATIO]: null,\n+  [ECustomImageAttributeNames.ALIGNMENT]: \"left\",\n };\n \n export const getImageComponentImageFileMap = (editor: Editor) =>\n   getExtensionStorage(editor, CORE_EXTENSIONS.CUSTOM_IMAGE)?.fileMap;\n@@ -31,5 +33,26 @@\n \n   return value;\n };\n \n+export const IMAGE_ALIGNMENT_OPTIONS: {\n+  label: string;\n+  value: TCustomImageAlignment;\n+  icon: LucideIcon;\n+}[] = [\n+  {\n+    label: \"Left\",\n+    value: \"left\",\n+    icon: AlignLeft,\n+  },\n+  {\n+    label: \"Center\",\n+    value: \"center\",\n+    icon: AlignCenter,\n+  },\n+  {\n+    label: \"Right\",\n+    value: \"right\",\n+    icon: AlignRight,\n+  },\n+];\n export const getImageBlockId = (id: string) => `editor-image-block-${id}`;\n"
        },
        {
          "path": "packages/editor/src/core/extensions/image/extension-config.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/image/extension-config.tsx\n===================================================================\n--- packages/editor/src/core/extensions/image/extension-config.tsx\tba6b822 (parent)\n+++ packages/editor/src/core/extensions/image/extension-config.tsx\tf679628 (commit)\n@@ -18,7 +18,10 @@\n       },\n       aspectRatio: {\n         default: null,\n       },\n+      alignment: {\n+        default: \"left\",\n+      },\n     };\n   },\n });\n"
        },
        {
          "path": "packages/editor/src/core/types/config.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/config.ts\n===================================================================\n--- packages/editor/src/core/types/config.ts\tba6b822 (parent)\n+++ packages/editor/src/core/types/config.ts\tf679628 (commit)\n@@ -2,8 +2,9 @@\n import { TWebhookConnectionQueryParams } from \"@plane/types\";\n \n export type TReadOnlyFileHandler = {\n   checkIfAssetExists: (assetId: string) => Promise<boolean>;\n+  getAssetDownloadSrc: (path: string) => Promise<string>;\n   getAssetSrc: (path: string) => Promise<string>;\n   restore: (assetSrc: string) => Promise<void>;\n };\n \n"
        },
        {
          "path": "space/app/layout.tsx",
          "status": "modified",
          "diff": "Index: space/app/layout.tsx\n===================================================================\n--- space/app/layout.tsx\tba6b822 (parent)\n+++ space/app/layout.tsx\tf679628 (commit)\n@@ -32,8 +32,9 @@\n         <link rel=\"shortcut icon\" href={`${SPACE_BASE_PATH}/favicon/favicon.ico`} />\n         <meta name=\"robots\" content=\"noindex, nofollow\" />\n       </head>\n       <body>\n+        <div id=\"editor-portal\" />\n         <AppProvider>\n           <>{children}</>\n         </AppProvider>\n       </body>\n"
        },
        {
          "path": "web/app/layout.tsx",
          "status": "modified",
          "diff": "Index: web/app/layout.tsx\n===================================================================\n--- web/app/layout.tsx\tba6b822 (parent)\n+++ web/app/layout.tsx\tf679628 (commit)\n@@ -79,8 +79,9 @@\n         <link rel=\"manifest\" href=\"/manifest.json\" />\n       </head>\n       <body>\n         <div id=\"context-menu-portal\" />\n+        <div id=\"editor-portal\" />\n         <AppProvider>\n           <div\n             className={cn(\n               \"h-screen w-full overflow-hidden bg-custom-background-100 relative flex flex-col\",\n"
        },
        {
          "path": "web/core/hooks/editor/use-editor-config.ts",
          "status": "modified",
          "diff": "Index: web/core/hooks/editor/use-editor-config.ts\n===================================================================\n--- web/core/hooks/editor/use-editor-config.ts\tba6b822 (parent)\n+++ web/core/hooks/editor/use-editor-config.ts\tf679628 (commit)\n@@ -1,9 +1,9 @@\n import { useCallback } from \"react\";\n // plane editor\n import { TFileHandler, TReadOnlyFileHandler } from \"@plane/editor\";\n // helpers\n-import { getEditorAssetSrc } from \"@plane/utils\";\n+import { getEditorAssetDownloadSrc, getEditorAssetSrc } from \"@plane/utils\";\n // hooks\n import { useEditorAsset } from \"@/hooks/store\";\n // plane web hooks\n import { useFileSize } from \"@/plane-web/hooks/use-file-size\";\n@@ -32,8 +32,22 @@\n         checkIfAssetExists: async (assetId: string) => {\n           const res = await fileService.checkIfAssetExists(workspaceSlug, assetId);\n           return res?.exists ?? false;\n         },\n+        getAssetDownloadSrc: async (path) => {\n+          if (!path) return \"\";\n+          if (path?.startsWith(\"http\")) {\n+            return path;\n+          } else {\n+            return (\n+              getEditorAssetDownloadSrc({\n+                assetId: path,\n+                projectId,\n+                workspaceSlug,\n+              }) ?? \"\"\n+            );\n+          }\n+        },\n         getAssetSrc: async (path) => {\n           if (!path) return \"\";\n           if (path?.startsWith(\"http\")) {\n             return path;\n"
        }
      ]
    },
    {
      "id": "implement-intake-triage",
      "sha": "78fbdde1651715fbaafd4060cef916b6323f1699",
      "parentSha": "dbc5a6348db8d6c4f01cd28470f60c08d781d608",
      "spec": "Implement a dedicated intake triage state throughout the system and integrate it into intake issue creation and update flows, with UI support.\n\nBackend (Django API):\n1) State model and managers\n- In apps/api/plane/db/models/state.py, define group constants on State including TRIAGE (\"triage\") and add GROUP_CHOICES to include it.\n- Add three managers: State.objects as default manager that excludes triage states; State.all_state_objects as an unfiltered manager; State.triage_objects that returns only triage states.\n\n2) Issue manager filtering\n- In apps/api/plane/db/models/issue.py, ensure the default non-archived Issue queryset excludes issues in triage state by group, so triage issues do not appear in normal issue queries.\n\n3) Disallow manual triage state creation\n- In state serializers (both API and app versions): apps/api/plane/api/serializers/state.py and apps/api/plane/app/serializers/state.py, add validation that rejects create/update when group == State.TRIAGE.\n\n4) Intake status transition validation and update\n- In intake serializers (API and app versions): apps/api/plane/api/serializers/intake.py and apps/api/plane/app/serializers/intake.py, add:\n  - validate: when status is being set to accepted (1) and the related issue is in TRIAGE group, ensure a default state exists in the project; else raise a ValidationError.\n  - update: when status transitions to accepted (1) and the related issue is currently in TRIAGE, move Issue.state to the project's default state.\n\n5) Issue serializers adjustments for triage use cases\n- In apps/api/plane/app/serializers/issue.py:\n  - Change state_id field queryset to use State.all_state_objects so triage states can be set by system flows.\n  - Add a context flag allow_triage_state: when true, state validation should check State.triage_objects; when false, use default State.objects.\n  - Add validation ensuring provided state_id belongs to the project.\n\n6) Intake endpoints set triage state on create and rely on serializer transitions\n- In backend intake creation endpoints (apps/api/plane/api/views/intake.py, apps/api/plane/app/views/intake/base.py) and space/public intake creation (apps/api/plane/space/views/intake.py):\n  - Fetch State.triage_objects for the project; if missing, create a triage state named \"Intake Triage\" with color #4E5355, sequence 65000, default=False.\n  - Create new intake Issues with state set to this triage state.\n  - For intake patch/update flows, validate and save the issue and intake serializers separately; defer state transitions to the serializer update method; log activities accordingly.\n\n7) Project default state seeding includes triage\n- When creating projects, seed a triage state for the project along with other default states: apps/api/plane/api/views/project.py and apps/api/plane/app/views/project/base.py should include an \"Intake Triage\" state with group triage and the specified color/sequence.\n\n8) New endpoint to retrieve intake triage state\n- Add a GET endpoint in apps/api/plane/app/views/state/base.py (IntakeStateEndpoint) that returns the project's triage state or 404 if not found.\n- Wire up the route in apps/api/plane/app/urls/state.py at /api/workspaces/<slug>/projects/<project_id>/intake-state/ and export the view in apps/api/plane/app/views/__init__.py.\n\n9) Logging configuration\n- Add a logger named \"plane.migrations\" to apps/api/plane/settings/local.py and apps/api/plane/settings/production.py with console handler to log migration progress.\n\n10) Data migration to normalize triage state and backfill issues\n- Create migration apps/api/plane/db/migrations/0112_* that:\n  - Normalizes any existing triage states (group triage, name/color/sequence/default set as specified).\n  - Creates a triage state for any project that lacks one (unique name fallback if a conflicting \"Triage\" exists in a different group).\n  - Updates Issues for pending/snoozed intake statuses (issue_intake.status in [-2, 0]) to use the projects triage state via a subquery.\n  - Logs progress via plane.migrations.\n\n11) Tasks and utilities consistency\n- Update any task/query code that filters states by name to use group triage consistently (e.g., apps/api/plane/bgtasks/dummy_data_task.py should exclude group == State.TRIAGE when sampling states).\n\nFrontend (Web):\n1) Types\n- Add new intake types in packages/types/src/intake/state.ts defining TIntakeStateGroups = \"triage\" and IIntakeState; export via packages/types/src/intake/index.ts and packages/types/src/index.ts.\n\n2) Icons\n- Add IntakeStateGroupIcon and TriageGroupIcon components under packages/propel/src/icons/state and export them; include intake state color mapping in helper.\n\n3) Services and fetch keys\n- Add PROJECT_INTAKE_STATE fetch key in apps/web/core/constants/fetch-keys.ts.\n- In apps/web/core/services/project/project-state.service.ts, add getIntakeState(workspaceSlug, projectId) that calls the new backend endpoint.\n\n4) State store\n- In apps/web/core/store/state.store.ts, introduce intakeStateMap and fetchedIntakeMap.\n- Add selectors: getIntakeStateById, getProjectIntakeState, getProjectIntakeStateIds (returns the single triage state ID if fetched).\n- Add fetchProjectIntakeState that uses the service to populate intakeStateMap and fetchedIntakeMap.\n\n5) Project wrapper preload\n- In apps/web/core/layouts/auth-layout/project-wrapper.tsx, add a useSWR call to fetchProjectIntakeState keyed by PROJECT_INTAKE_STATE alongside the normal states preload.\n\n6) Intake state dropdown component\n- Create intake state dropdown components at apps/web/core/components/dropdowns/intake-state/base.tsx and apps/web/core/components/dropdowns/intake-state/dropdown.tsx that:\n  - Render the current intake state using IntakeStateGroupIcon.\n  - On open, fetch the project intake state if not already loaded.\n  - Expose onChange(val) and support disabled/read-only rendering; in inbox context, do not directly update the issue state (no-op handler).\n\n7) Integrate intake dropdown in Inbox\n- In apps/web/core/components/inbox/content/issue-properties.tsx and apps/web/core/components/inbox/modals/create-modal/issue-properties.tsx, replace the generic StateDropdown with IntakeStateDropdown for intake issues.\n- Remove the \"state\" section from the inbox filter UI (apps/web/core/components/inbox/inbox-filter/filters/filter-selection.tsx) to avoid filtering by non-triage states in intake.\n\n8) Intake creation error propagation\n- In apps/web/core/store/inbox/project-inbox.store.ts, propagate errors thrown during intake issue creation by rethrowing in the catch block so the UI can handle failures.\n\nCross-cutting:\n- In any intake-related issue create/update flows, pass context { allow_triage_state: true } to issue serializers so triage states are allowed for system flows.\n- Ensure activity logs include intake ID and current instance snapshots consistently where applicable.\n- Use the triage state group constant and managers consistently instead of name-based checks, and keep triage states out of general state listings and issue queries.",
      "prompt": "Add a dedicated triage state for intake workflows and integrate it end-to-end. On the backend, introduce a triage state group and managers, prevent manual triage state creation, create intake issues in triage (creating the state if missing), and on acceptance move linked issues to the projects default state. Provide an endpoint to fetch the projects intake triage state and seed it during project creation. Include a migration to normalize/create triage states and move pending/snoozed intake issues into triage. On the frontend, add an intake state dropdown that fetches the projects triage state and displays it in the inbox properties and intake create modal, and preload it in the project wrapper. Update types and icons for the triage group. Exclude triage from normal lists/filters and surface intake creation errors to the UI.",
      "supplementalFiles": [
        "apps/web/core/components/dropdowns/state/dropdown.tsx",
        "packages/propel/src/icons/state/state-group-icon.tsx",
        "packages/types/src/state.ts",
        "packages/constants/src/state.ts"
      ],
      "fileDiffs": [
        {
          "path": "apps/api/plane/api/serializers/intake.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/api/serializers/intake.py\n===================================================================\n--- apps/api/plane/api/serializers/intake.py\tdbc5a63 (parent)\n+++ apps/api/plane/api/serializers/intake.py\t78fbdde (commit)\n@@ -102,9 +102,57 @@\n             \"created_at\",\n             \"updated_at\",\n         ]\n \n+    def validate(self, attrs):\n+        \"\"\"\n+        Validate that if status is being changed to accepted (1),\n+        the project has a default state to transition to.\n+        \"\"\"\n+        from plane.db.models import State\n \n+        # Check if status is being updated to accepted\n+        if attrs.get(\"status\") == 1:\n+            intake_issue = self.instance\n+            issue = intake_issue.issue\n+\n+            # Check if issue is in TRIAGE state\n+            if issue.state and issue.state.group == State.TRIAGE:\n+                # Verify default state exists before allowing the update\n+                default_state = State.objects.filter(\n+                    workspace=intake_issue.workspace, project=intake_issue.project, default=True\n+                ).first()\n+\n+                if not default_state:\n+                    raise serializers.ValidationError(\n+                        {\"status\": \"Cannot accept intake issue: No default state found for the project\"}\n+                    )\n+\n+        return attrs\n+\n+    def update(self, instance, validated_data):\n+        \"\"\"\n+        Update intake issue and transition associated issue state if accepted.\n+        \"\"\"\n+        from plane.db.models import State\n+\n+        # Update the intake issue with validated data\n+        instance = super().update(instance, validated_data)\n+\n+        # If status is accepted (1), update the associated issue state from TRIAGE to default\n+        if validated_data.get(\"status\") == 1:\n+            issue = instance.issue\n+            if issue.state and issue.state.group == State.TRIAGE:\n+                # Get the default project state\n+                default_state = State.objects.filter(\n+                    workspace=instance.workspace, project=instance.project, default=True\n+                ).first()\n+                if default_state:\n+                    issue.state = default_state\n+                    issue.save()\n+        return instance\n+\n+\n class IssueDataSerializer(serializers.Serializer):\n     \"\"\"\n     Serializer for nested work item data in intake request payloads.\n \n"
        },
        {
          "path": "apps/api/plane/api/serializers/state.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/api/serializers/state.py\n===================================================================\n--- apps/api/plane/api/serializers/state.py\tdbc5a63 (parent)\n+++ apps/api/plane/api/serializers/state.py\t78fbdde (commit)\n@@ -1,7 +1,8 @@\n # Module imports\n from .base import BaseSerializer\n from plane.db.models import State\n+from rest_framework import serializers\n \n \n class StateSerializer(BaseSerializer):\n     \"\"\"\n@@ -14,8 +15,11 @@\n     def validate(self, data):\n         # If the default is being provided then make all other states default False\n         if data.get(\"default\", False):\n             State.objects.filter(project_id=self.context.get(\"project_id\")).update(default=False)\n+\n+        if data.get(\"group\", None) == State.TRIAGE:\n+            raise serializers.ValidationError(\"Cannot create triage state\")\n         return data\n \n     class Meta:\n         model = State\n"
        },
        {
          "path": "apps/api/plane/api/views/intake.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/api/views/intake.py\n===================================================================\n--- apps/api/plane/api/views/intake.py\tdbc5a63 (parent)\n+++ apps/api/plane/api/views/intake.py\t78fbdde (commit)\n@@ -164,15 +164,30 @@\n             \"none\",\n         ]:\n             return Response({\"error\": \"Invalid priority\"}, status=status.HTTP_400_BAD_REQUEST)\n \n+        # get the triage state\n+        triage_state = State.triage_objects.filter(project_id=project_id, workspace__slug=slug).first()\n+\n+        if not triage_state:\n+            triage_state = State.objects.create(\n+                name=\"Intake Triage\",\n+                group=State.TRIAGE,\n+                project_id=project_id,\n+                workspace_id=project.workspace_id,\n+                color=\"#4E5355\",\n+                sequence=65000,\n+                default=False,\n+            )\n+\n         # create an issue\n         issue = Issue.objects.create(\n             name=request.data.get(\"issue\", {}).get(\"name\"),\n             description=request.data.get(\"issue\", {}).get(\"description\", {}),\n             description_html=request.data.get(\"issue\", {}).get(\"description_html\", \"<p></p>\"),\n             priority=request.data.get(\"issue\", {}).get(\"priority\", \"none\"),\n             project_id=project_id,\n+            state_id=triage_state.id,\n         )\n \n         # create an intake issue\n         intake_issue = IntakeIssue.objects.create(\n@@ -319,9 +334,12 @@\n             )\n \n         # Get issue data\n         issue_data = request.data.pop(\"issue\", False)\n+        issue_serializer = None\n+        intake_serializer = None\n \n+        # Validate issue data if provided\n         if bool(issue_data):\n             issue = Issue.objects.annotate(\n                 label_ids=Coalesce(\n                     ArrayAgg(\n@@ -343,8 +361,9 @@\n                     ),\n                     Value([], output_field=ArrayField(UUIDField())),\n                 ),\n             ).get(pk=issue_id, workspace__slug=slug, project_id=project_id)\n+\n             # Only allow guests to edit name and description\n             if project_member.role <= 5:\n                 issue_data = {\n                     \"name\": issue_data.get(\"name\", issue.name),\n@@ -353,73 +372,57 @@\n                 }\n \n             issue_serializer = IssueSerializer(issue, data=issue_data, partial=True)\n \n-            if issue_serializer.is_valid():\n-                current_instance = issue\n-                # Log all the updates\n-                requested_data = json.dumps(issue_data, cls=DjangoJSONEncoder)\n-                if issue is not None:\n-                    issue_activity.delay(\n-                        type=\"issue.activity.updated\",\n-                        requested_data=requested_data,\n-                        actor_id=str(request.user.id),\n-                        issue_id=str(issue_id),\n-                        project_id=str(project_id),\n-                        current_instance=json.dumps(\n-                            IssueSerializer(current_instance).data,\n-                            cls=DjangoJSONEncoder,\n-                        ),\n-                        epoch=int(timezone.now().timestamp()),\n-                        intake=(intake_issue.id),\n-                    )\n-                issue_serializer.save()\n-            else:\n+            if not issue_serializer.is_valid():\n                 return Response(issue_serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n \n         # Only project admins and members can edit intake issue attributes\n         if project_member.role > 15:\n-            serializer = IntakeIssueUpdateSerializer(intake_issue, data=request.data, partial=True)\n-            current_instance = json.dumps(IntakeIssueSerializer(intake_issue).data, cls=DjangoJSONEncoder)\n+            intake_serializer = IntakeIssueUpdateSerializer(intake_issue, data=request.data, partial=True)\n \n-            if serializer.is_valid():\n-                serializer.save()\n-                # Update the issue state if the issue is rejected or marked as duplicate\n-                if serializer.data[\"status\"] in [-1, 2]:\n-                    issue = Issue.objects.get(pk=issue_id, workspace__slug=slug, project_id=project_id)\n-                    state = State.objects.filter(group=\"cancelled\", workspace__slug=slug, project_id=project_id).first()\n-                    if state is not None:\n-                        issue.state = state\n-                        issue.save()\n+            if not intake_serializer.is_valid():\n+                return Response(intake_serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n \n-                # Update the issue state if it is accepted\n-                if serializer.data[\"status\"] in [1]:\n-                    issue = Issue.objects.get(pk=issue_id, workspace__slug=slug, project_id=project_id)\n+        # Both serializers are valid, now save them\n+        if issue_serializer:\n+            current_instance = issue\n+            # Log all the updates\n+            requested_data = json.dumps(issue_data, cls=DjangoJSONEncoder)\n+            issue_activity.delay(\n+                type=\"issue.activity.updated\",\n+                requested_data=requested_data,\n+                actor_id=str(request.user.id),\n+                issue_id=str(issue_id),\n+                project_id=str(project_id),\n+                current_instance=json.dumps(\n+                    IssueSerializer(current_instance).data,\n+                    cls=DjangoJSONEncoder,\n+                ),\n+                epoch=int(timezone.now().timestamp()),\n+                intake=str(intake_issue.id),\n+            )\n+            issue_serializer.save()\n \n-                    # Update the issue state only if it is in triage state\n-                    if issue.state.is_triage:\n-                        # Move to default state\n-                        state = State.objects.filter(workspace__slug=slug, project_id=project_id, default=True).first()\n-                        if state is not None:\n-                            issue.state = state\n-                            issue.save()\n+        # Save intake issue (state transition happens in serializer's update method)\n+        if intake_serializer:\n+            current_instance = json.dumps(IntakeIssueSerializer(intake_issue).data, cls=DjangoJSONEncoder)\n+            intake_serializer.save()\n \n-                # create a activity for status change\n-                issue_activity.delay(\n-                    type=\"intake.activity.created\",\n-                    requested_data=json.dumps(request.data, cls=DjangoJSONEncoder),\n-                    actor_id=str(request.user.id),\n-                    issue_id=str(issue_id),\n-                    project_id=str(project_id),\n-                    current_instance=current_instance,\n-                    epoch=int(timezone.now().timestamp()),\n-                    notification=False,\n-                    origin=base_host(request=request, is_app=True),\n-                    intake=str(intake_issue.id),\n-                )\n-                serializer = IntakeIssueSerializer(intake_issue)\n-                return Response(serializer.data, status=status.HTTP_200_OK)\n-            return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n+            # create a activity for status change\n+            issue_activity.delay(\n+                type=\"intake.activity.created\",\n+                requested_data=json.dumps(request.data, cls=DjangoJSONEncoder),\n+                actor_id=str(request.user.id),\n+                issue_id=str(issue_id),\n+                project_id=str(project_id),\n+                current_instance=current_instance,\n+                epoch=int(timezone.now().timestamp()),\n+                notification=False,\n+                origin=base_host(request=request, is_app=True),\n+                intake=str(intake_issue.id),\n+            )\n+            return Response(IntakeIssueSerializer(intake_issue).data, status=status.HTTP_200_OK)\n         else:\n             return Response(IntakeIssueSerializer(intake_issue).data, status=status.HTTP_200_OK)\n \n     @intake_docs(\n"
        },
        {
          "path": "apps/api/plane/api/views/project.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/api/views/project.py\n===================================================================\n--- apps/api/plane/api/views/project.py\tdbc5a63 (parent)\n+++ apps/api/plane/api/views/project.py\t78fbdde (commit)\n@@ -264,8 +264,14 @@\n                         \"color\": \"#9AA4BC\",\n                         \"sequence\": 55000,\n                         \"group\": \"cancelled\",\n                     },\n+                    {\n+                        \"name\": \"Intake Triage\",\n+                        \"color\": \"#4E5355\",\n+                        \"sequence\": 65000,\n+                        \"group\": State.TRIAGE,\n+                    },\n                 ]\n \n                 State.objects.bulk_create(\n                     [\n"
        },
        {
          "path": "apps/api/plane/app/serializers/intake.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/intake.py\n===================================================================\n--- apps/api/plane/app/serializers/intake.py\tdbc5a63 (parent)\n+++ apps/api/plane/app/serializers/intake.py\t78fbdde (commit)\n@@ -35,8 +35,56 @@\n             \"created_by\",\n         ]\n         read_only_fields = [\"project\", \"workspace\"]\n \n+    def validate(self, attrs):\n+        \"\"\"\n+        Validate that if status is being changed to accepted (1),\n+        the project has a default state to transition to.\n+        \"\"\"\n+        from plane.db.models import State\n+\n+        # Check if status is being updated to accepted\n+        if attrs.get(\"status\") == 1:\n+            intake_issue = self.instance\n+            issue = intake_issue.issue\n+\n+            # Check if issue is in TRIAGE state\n+            if issue.state and issue.state.group == State.TRIAGE:\n+                # Verify default state exists before allowing the update\n+                default_state = State.objects.filter(\n+                    workspace=intake_issue.workspace, project=intake_issue.project, default=True\n+                ).first()\n+\n+                if not default_state:\n+                    raise serializers.ValidationError(\n+                        {\"status\": \"Cannot accept intake issue: No default state found for the project\"}\n+                    )\n+\n+        return attrs\n+\n+    def update(self, instance, validated_data):\n+        from plane.db.models import State\n+\n+        # Update the intake issue\n+        instance = super().update(instance, validated_data)\n+\n+        # If status is accepted (1), transition the issue state from TRIAGE to default\n+        if validated_data.get(\"status\") == 1:\n+            issue = instance.issue\n+            if issue.state and issue.state.group == State.TRIAGE:\n+                # Get the default project state\n+                default_state = State.objects.filter(\n+                    workspace=instance.workspace,\n+                    project=instance.project,\n+                    default=True\n+                ).first()\n+                if default_state:\n+                    issue.state = default_state\n+                    issue.save()\n+\n+        return instance\n+\n     def to_representation(self, instance):\n         # Pass the annotated fields to the Issue instance if they exist\n         if hasattr(instance, \"label_ids\"):\n             instance.issue.label_ids = instance.label_ids\n"
        },
        {
          "path": "apps/api/plane/app/serializers/issue.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/issue.py\n===================================================================\n--- apps/api/plane/app/serializers/issue.py\tdbc5a63 (parent)\n+++ apps/api/plane/app/serializers/issue.py\t78fbdde (commit)\n@@ -77,9 +77,9 @@\n ## Find a better approach to save manytomany?\n class IssueCreateSerializer(BaseSerializer):\n     # ids\n     state_id = serializers.PrimaryKeyRelatedField(\n-        source=\"state\", queryset=State.objects.all(), required=False, allow_null=True\n+        source=\"state\", queryset=State.all_state_objects.all(), required=False, allow_null=True\n     )\n     parent_id = serializers.PrimaryKeyRelatedField(\n         source=\"parent\", queryset=Issue.objects.all(), required=False, allow_null=True\n     )\n@@ -116,8 +116,11 @@\n         data[\"label_ids\"] = label_ids if label_ids else []\n         return data\n \n     def validate(self, attrs):\n+        allow_triage = self.context.get(\"allow_triage_state\", False)\n+        state_manager = State.triage_objects if allow_triage else State.objects\n+\n         if (\n             attrs.get(\"start_date\", None) is not None\n             and attrs.get(\"target_date\", None) is not None\n             and attrs.get(\"start_date\", None) > attrs.get(\"target_date\", None)\n@@ -159,9 +162,9 @@\n \n         # Check state is from the project only else raise validation error\n         if (\n             attrs.get(\"state\")\n-            and not State.objects.filter(\n+            and not state_manager.filter(\n                 project_id=self.context.get(\"project_id\"),\n                 pk=attrs.get(\"state\").id,\n             ).exists()\n         ):\n@@ -794,9 +797,17 @@\n             \"archived_at\",\n         ]\n         read_only_fields = fields\n \n+    def validate(self, data):\n+        if (\n+            data.get(\"state_id\")\n+            and not State.objects.filter(project_id=self.context.get(\"project_id\"), pk=data.get(\"state_id\")).exists()\n+        ):\n+            raise serializers.ValidationError(\"State is not valid please pass a valid state_id\")\n+        return data\n \n+\n class IssueListDetailSerializer(serializers.Serializer):\n     def __init__(self, *args, **kwargs):\n         # Extract expand parameter and store it as instance variable\n         self.expand = kwargs.pop(\"expand\", []) or []\n"
        },
        {
          "path": "apps/api/plane/app/serializers/state.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/state.py\n===================================================================\n--- apps/api/plane/app/serializers/state.py\tdbc5a63 (parent)\n+++ apps/api/plane/app/serializers/state.py\t78fbdde (commit)\n@@ -23,9 +23,15 @@\n             \"order\",\n         ]\n         read_only_fields = [\"workspace\", \"project\"]\n \n+    def validate(self, attrs):\n \n+        if attrs.get(\"group\") == State.TRIAGE:\n+            raise serializers.ValidationError(\"Cannot create triage state\")\n+        return attrs\n+\n+\n class StateLiteSerializer(BaseSerializer):\n     class Meta:\n         model = State\n         fields = [\"id\", \"name\", \"color\", \"group\"]\n"
        },
        {
          "path": "apps/api/plane/app/urls/state.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/urls/state.py\n===================================================================\n--- apps/api/plane/app/urls/state.py\tdbc5a63 (parent)\n+++ apps/api/plane/app/urls/state.py\t78fbdde (commit)\n@@ -1,8 +1,8 @@\n from django.urls import path\n \n \n-from plane.app.views import StateViewSet\n+from plane.app.views import StateViewSet, IntakeStateEndpoint\n \n \n urlpatterns = [\n     path(\n@@ -15,8 +15,13 @@\n         StateViewSet.as_view({\"get\": \"retrieve\", \"patch\": \"partial_update\", \"delete\": \"destroy\"}),\n         name=\"project-state\",\n     ),\n     path(\n+        \"workspaces/<str:slug>/projects/<uuid:project_id>/intake-state/\",\n+        IntakeStateEndpoint.as_view(),\n+        name=\"intake-state\",\n+    ),\n+    path(\n         \"workspaces/<str:slug>/projects/<uuid:project_id>/states/<uuid:pk>/mark-default/\",\n         StateViewSet.as_view({\"post\": \"mark_as_default\"}),\n         name=\"project-state\",\n     ),\n"
        },
        {
          "path": "apps/api/plane/app/views/__init__.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/views/__init__.py\n===================================================================\n--- apps/api/plane/app/views/__init__.py\tdbc5a63 (parent)\n+++ apps/api/plane/app/views/__init__.py\t78fbdde (commit)\n@@ -79,9 +79,9 @@\n from .workspace.cycle import WorkspaceCyclesEndpoint\n from .workspace.quick_link import QuickLinkViewSet\n from .workspace.sticky import WorkspaceStickyViewSet\n \n-from .state.base import StateViewSet\n+from .state.base import StateViewSet, IntakeStateEndpoint\n from .view.base import (\n     WorkspaceViewViewSet,\n     WorkspaceViewIssuesViewSet,\n     IssueViewViewSet,\n"
        },
        {
          "path": "apps/api/plane/app/views/intake/base.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/views/intake/base.py\n===================================================================\n--- apps/api/plane/app/views/intake/base.py\tdbc5a63 (parent)\n+++ apps/api/plane/app/views/intake/base.py\t78fbdde (commit)\n@@ -227,16 +227,32 @@\n             \"none\",\n         ]:\n             return Response({\"error\": \"Invalid priority\"}, status=status.HTTP_400_BAD_REQUEST)\n \n-        # create an issue\n         project = Project.objects.get(pk=project_id)\n+\n+        # get the triage state\n+        triage_state = State.triage_objects.filter(project_id=project_id, workspace__slug=slug).first()\n+        if not triage_state:\n+            triage_state = State.objects.create(\n+                name=\"Intake Triage\",\n+                group=State.TRIAGE,\n+                project_id=project_id,\n+                workspace_id=project.workspace_id,\n+                color=\"#4E5355\",\n+                sequence=65000,\n+                default=False,\n+            )\n+        request.data[\"issue\"][\"state_id\"] = triage_state.id\n+\n+        # create an issue\n         serializer = IssueCreateSerializer(\n             data=request.data.get(\"issue\"),\n             context={\n                 \"project_id\": project_id,\n                 \"workspace_id\": project.workspace_id,\n                 \"default_assignee_id\": project.default_assignee_id,\n+                \"allow_triage_state\": True,\n             },\n         )\n         if serializer.is_valid():\n             serializer.save()\n@@ -343,8 +359,14 @@\n             )\n \n         # Get issue data\n         issue_data = request.data.pop(\"issue\", False)\n+        issue_serializer = None\n+        issue = None\n+        issue_current_instance = None\n+        issue_requested_data = None\n+\n+        # Validate issue data if provided\n         if bool(issue_data):\n             issue = Issue.objects.annotate(\n                 label_ids=Coalesce(\n                     ArrayAgg(\n@@ -370,121 +392,97 @@\n                     \"description_html\": issue_data.get(\"description_html\", issue.description_html),\n                     \"description\": issue_data.get(\"description\", issue.description),\n                 }\n \n-            current_instance = json.dumps(IssueDetailSerializer(issue).data, cls=DjangoJSONEncoder)\n+            issue_current_instance = json.dumps(IssueDetailSerializer(issue).data, cls=DjangoJSONEncoder)\n+            issue_requested_data = json.dumps(issue_data, cls=DjangoJSONEncoder)\n \n             issue_serializer = IssueCreateSerializer(\n-                issue, data=issue_data, partial=True, context={\"project_id\": project_id}\n+                issue, data=issue_data, partial=True, context={\"project_id\": project_id, \"allow_triage_state\": True}\n             )\n \n-            if issue_serializer.is_valid():\n-                # Log all the updates\n-                requested_data = json.dumps(issue_data, cls=DjangoJSONEncoder)\n-                if issue is not None:\n-                    issue_activity.delay(\n-                        type=\"issue.activity.updated\",\n-                        requested_data=requested_data,\n-                        actor_id=str(request.user.id),\n-                        issue_id=str(issue.id),\n-                        project_id=str(project_id),\n-                        current_instance=current_instance,\n-                        epoch=int(timezone.now().timestamp()),\n-                        notification=True,\n-                        origin=base_host(request=request, is_app=True),\n-                        intake=str(intake_issue.id),\n-                    )\n-                    # updated issue description version\n-                    issue_description_version_task.delay(\n-                        updated_issue=current_instance,\n-                        issue_id=str(pk),\n-                        user_id=request.user.id,\n-                    )\n-                issue_serializer.save()\n-            else:\n+            if not issue_serializer.is_valid():\n                 return Response(issue_serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n \n-        # Only project admins can edit intake issue attributes\n+        # Validate intake issue data if user has permission\n+        intake_serializer = None\n+        intake_current_instance = None\n+\n         if (project_member and project_member.role > ROLE.MEMBER.value) or is_workspace_admin:\n-            serializer = IntakeIssueSerializer(intake_issue, data=request.data, partial=True)\n-            current_instance = json.dumps(IntakeIssueSerializer(intake_issue).data, cls=DjangoJSONEncoder)\n-            if serializer.is_valid():\n-                serializer.save()\n-                # Update the issue state if the issue is rejected or marked as duplicate\n-                if serializer.data[\"status\"] in [-1, 2]:\n-                    issue = Issue.objects.get(\n-                        pk=intake_issue.issue_id,\n-                        workspace__slug=slug,\n-                        project_id=project_id,\n-                    )\n-                    state = State.objects.filter(group=\"cancelled\", workspace__slug=slug, project_id=project_id).first()\n-                    if state is not None:\n-                        issue.state = state\n-                        issue.save()\n+            intake_current_instance = json.dumps(IntakeIssueSerializer(intake_issue).data, cls=DjangoJSONEncoder)\n+            intake_serializer = IntakeIssueSerializer(intake_issue, data=request.data, partial=True)\n \n-                # Update the issue state if it is accepted\n-                if serializer.data[\"status\"] in [1]:\n-                    issue = Issue.objects.get(\n-                        pk=intake_issue.issue_id,\n-                        workspace__slug=slug,\n-                        project_id=project_id,\n-                    )\n+            if not intake_serializer.is_valid():\n+                return Response(intake_serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n \n-                    # Update the issue state only if it is in triage state\n-                    if issue.state.is_triage:\n-                        # Move to default state\n-                        state = State.objects.filter(workspace__slug=slug, project_id=project_id, default=True).first()\n-                        if state is not None:\n-                            issue.state = state\n-                            issue.save()\n-                # create a activity for status change\n+        # Both serializers are valid, now save them\n+        if issue_serializer:\n+            issue_serializer.save()\n+            # Log all the updates\n+            if issue is not None:\n                 issue_activity.delay(\n-                    type=\"intake.activity.created\",\n-                    requested_data=json.dumps(request.data, cls=DjangoJSONEncoder),\n+                    type=\"issue.activity.updated\",\n+                    requested_data=issue_requested_data,\n                     actor_id=str(request.user.id),\n-                    issue_id=str(pk),\n+                    issue_id=str(issue.id),\n                     project_id=str(project_id),\n-                    current_instance=current_instance,\n+                    current_instance=issue_current_instance,\n                     epoch=int(timezone.now().timestamp()),\n-                    notification=False,\n+                    notification=True,\n                     origin=base_host(request=request, is_app=True),\n-                    intake=(intake_issue.id),\n+                    intake=str(intake_issue.id),\n                 )\n+                # updated issue description version\n+                issue_description_version_task.delay(\n+                    updated_issue=issue_current_instance,\n+                    issue_id=str(pk),\n+                    user_id=request.user.id,\n+                )\n \n-                intake_issue = (\n-                    IntakeIssue.objects.select_related(\"issue\")\n-                    .prefetch_related(\"issue__labels\", \"issue__assignees\")\n-                    .annotate(\n-                        label_ids=Coalesce(\n-                            ArrayAgg(\n-                                \"issue__labels__id\",\n-                                distinct=True,\n-                                filter=Q(\n-                                    ~Q(issue__labels__id__isnull=True) & Q(issue__label_issue__deleted_at__isnull=True)\n-                                ),\n-                            ),\n-                            Value([], output_field=ArrayField(UUIDField())),\n+        if intake_serializer:\n+            intake_serializer.save()\n+            # create a activity for status change\n+            issue_activity.delay(\n+                type=\"intake.activity.created\",\n+                requested_data=json.dumps(request.data, cls=DjangoJSONEncoder),\n+                actor_id=str(request.user.id),\n+                issue_id=str(pk),\n+                project_id=str(project_id),\n+                current_instance=intake_current_instance,\n+                epoch=int(timezone.now().timestamp()),\n+                notification=False,\n+                origin=base_host(request=request, is_app=True),\n+                intake=str(intake_issue.id),\n+            )\n+\n+        # Fetch and return the updated intake issue\n+        intake_issue = (\n+            IntakeIssue.objects.select_related(\"issue\")\n+            .prefetch_related(\"issue__labels\", \"issue__assignees\")\n+            .annotate(\n+                label_ids=Coalesce(\n+                    ArrayAgg(\n+                        \"issue__labels__id\",\n+                        distinct=True,\n+                        filter=Q(~Q(issue__labels__id__isnull=True) & Q(issue__label_issue__deleted_at__isnull=True)),\n+                    ),\n+                    Value([], output_field=ArrayField(UUIDField())),\n+                ),\n+                assignee_ids=Coalesce(\n+                    ArrayAgg(\n+                        \"issue__assignees__id\",\n+                        distinct=True,\n+                        filter=Q(\n+                            ~Q(issue__assignees__id__isnull=True) & Q(issue__issue_assignee__deleted_at__isnull=True)\n                         ),\n-                        assignee_ids=Coalesce(\n-                            ArrayAgg(\n-                                \"issue__assignees__id\",\n-                                distinct=True,\n-                                filter=Q(\n-                                    ~Q(issue__assignees__id__isnull=True)\n-                                    & Q(issue__issue_assignee__deleted_at__isnull=True)\n-                                ),\n-                            ),\n-                            Value([], output_field=ArrayField(UUIDField())),\n-                        ),\n-                    )\n-                    .get(intake_id=intake_id.id, issue_id=pk, project_id=project_id)\n-                )\n-                serializer = IntakeIssueDetailSerializer(intake_issue).data\n-                return Response(serializer, status=status.HTTP_200_OK)\n-            return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n-        else:\n-            serializer = IntakeIssueDetailSerializer(intake_issue).data\n-            return Response(serializer, status=status.HTTP_200_OK)\n+                    ),\n+                    Value([], output_field=ArrayField(UUIDField())),\n+                ),\n+            )\n+            .get(intake_id=intake_id.id, issue_id=pk, project_id=project_id)\n+        )\n+        serializer = IntakeIssueDetailSerializer(intake_issue).data\n+        return Response(serializer, status=status.HTTP_200_OK)\n \n     @allow_permission(allowed_roles=[ROLE.ADMIN, ROLE.MEMBER, ROLE.GUEST], creator=True, model=Issue)\n     def retrieve(self, request, slug, project_id, pk):\n         intake_id = Intake.objects.filter(workspace__slug=slug, project_id=project_id).first()\n"
        },
        {
          "path": "apps/api/plane/app/views/project/base.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/views/project/base.py\n===================================================================\n--- apps/api/plane/app/views/project/base.py\tdbc5a63 (parent)\n+++ apps/api/plane/app/views/project/base.py\t78fbdde (commit)\n@@ -296,8 +296,14 @@\n                     \"color\": \"#9AA4BC\",\n                     \"sequence\": 55000,\n                     \"group\": \"cancelled\",\n                 },\n+                {\n+                    \"name\": \"Intake Triage\",\n+                    \"color\": \"#4E5355\",\n+                    \"sequence\": 65000,\n+                    \"group\": State.TRIAGE,\n+                },\n             ]\n \n             State.objects.bulk_create(\n                 [\n"
        },
        {
          "path": "apps/api/plane/app/views/state/base.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/views/state/base.py\n===================================================================\n--- apps/api/plane/app/views/state/base.py\tdbc5a63 (parent)\n+++ apps/api/plane/app/views/state/base.py\t78fbdde (commit)\n@@ -9,9 +9,9 @@\n from rest_framework.response import Response\n from rest_framework import status\n \n # Module imports\n-from .. import BaseViewSet\n+from .. import BaseViewSet, BaseAPIView\n from plane.app.serializers import StateSerializer\n from plane.app.permissions import ROLE, allow_permission\n from plane.db.models import State, Issue\n from plane.utils.cache import invalidate_cache\n@@ -126,4 +126,17 @@\n             )\n \n         state.delete()\n         return Response(status=status.HTTP_204_NO_CONTENT)\n+\n+\n+class IntakeStateEndpoint(BaseAPIView):\n+    @allow_permission([ROLE.ADMIN, ROLE.MEMBER, ROLE.GUEST])\n+    def get(self, request, slug, project_id):\n+        state = State.triage_objects.filter(workspace__slug=slug, project_id=project_id).first()\n+        if not state:\n+            return Response(\n+                {\"error\": \"Intake triage state not found\"},\n+                status=status.HTTP_404_NOT_FOUND,\n+            )\n+\n+        return Response(StateSerializer(state).data, status=status.HTTP_200_OK)\n"
        },
        {
          "path": "apps/api/plane/bgtasks/dummy_data_task.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/bgtasks/dummy_data_task.py\n===================================================================\n--- apps/api/plane/bgtasks/dummy_data_task.py\tdbc5a63 (parent)\n+++ apps/api/plane/bgtasks/dummy_data_task.py\t78fbdde (commit)\n@@ -263,9 +263,9 @@\n     fake = Faker()\n     Faker.seed(0)\n \n     states = (\n-        State.objects.filter(workspace=workspace, project=project).exclude(group=\"Triage\").values_list(\"id\", flat=True)\n+        State.objects.filter(workspace=workspace, project=project).exclude(group=State.TRIAGE).values_list(\"id\", flat=True)\n     )\n     creators = ProjectMember.objects.filter(workspace=workspace, project=project).values_list(\"member_id\", flat=True)\n \n     issues = []\n"
        },
        {
          "path": "apps/api/plane/db/migrations/0112_auto_20251124_0603.py",
          "status": "added",
          "diff": "Index: apps/api/plane/db/migrations/0112_auto_20251124_0603.py\n===================================================================\n--- apps/api/plane/db/migrations/0112_auto_20251124_0603.py\tdbc5a63 (parent)\n+++ apps/api/plane/db/migrations/0112_auto_20251124_0603.py\t78fbdde (commit)\n@@ -0,0 +1,92 @@\n+# Generated by Django 4.2.25 on 2025-11-24 06:03\n+\n+from django.db import migrations, transaction\n+from django.db.models import OuterRef, Subquery\n+\n+import logging\n+logger = logging.getLogger(\"plane.migrations\")\n+\n+BATCH_SIZE = 4000\n+\n+\n+def create_triage_state(apps, _schema_editor):\n+    Project = apps.get_model(\"db\", \"Project\")\n+    State = apps.get_model(\"db\", \"State\")\n+    Issue = apps.get_model(\"db\", \"Issue\")\n+\n+\n+    # 1) Bulk-update existing triage states\n+    triage_qs = State.objects.filter(group=\"triage\")\n+    projects_with_triage_state = list(triage_qs.values_list(\"project_id\", flat=True))\n+    triage_qs.update(\n+        name=\"Triage\",\n+        color=\"#4E5355\",\n+        sequence=65000,\n+        default=False,\n+    )\n+    logger.info(f\"Updated {triage_qs.count()} triage states.\")\n+\n+    # 2) Projects that already have a 'Triage' name but not in triage group\n+    projects_to_update_qs = (\n+        State.objects.exclude(group=\"triage\")\n+        .filter(name=\"Triage\")\n+        .values_list(\"project_id\", flat=True)\n+    )\n+    projects_to_update = set(projects_to_update_qs)\n+    logger.info(f\"Projects to update: {len(projects_to_update)}\")\n+\n+    # 3) Create missing triage states in chunks to avoid memory spike\n+    states_to_create = []\n+    project_iter = Project.objects.all().values_list(\"id\", \"workspace_id\").iterator()\n+    for proj_id, workspace_id in project_iter:\n+        if proj_id in projects_with_triage_state:\n+            continue\n+        if proj_id in projects_to_update:\n+            name = f\"Triage-{str(proj_id)[:5]}\"\n+        else:\n+            name = \"Triage\"\n+        states_to_create.append(\n+            State(\n+                name=name,\n+                group=\"triage\",\n+                project_id=proj_id,\n+                workspace_id=workspace_id,\n+                color=\"#4E5355\",\n+                sequence=65000,\n+                default=False,\n+            )\n+        )\n+        if len(states_to_create) >= BATCH_SIZE:\n+            State.objects.bulk_create(states_to_create, batch_size=BATCH_SIZE)\n+            states_to_create = []\n+\n+    if states_to_create:\n+        State.objects.bulk_create(states_to_create, batch_size=BATCH_SIZE)\n+\n+    # 4) Update issues: use deterministic subquery and only update issues that will get a triage state.\n+    with transaction.atomic():\n+        triage_state_subquery = (\n+            State.objects.filter(\n+                group=\"triage\",\n+                project_id=OuterRef(\"project_id\"),\n+                workspace_id=OuterRef(\"workspace_id\"),\n+            )\n+            .values(\"id\")[:1]\n+        )\n+\n+        updated_count = Issue._default_manager.filter(\n+            issue_intake__status__in=[-2, 0],\n+        ).update(state_id=Subquery(triage_state_subquery))\n+        logger.info(f\"Updated {updated_count} issues.\")\n+\n+\n+class Migration(migrations.Migration):\n+\n+    dependencies = [\n+        ('db', '0111_notification_notif_receiver_status_idx_and_more'),\n+    ]\n+\n+    operations = [\n+        migrations.RunPython(create_triage_state, \n+        reverse_code=migrations.RunPython.noop),\n+    ]\n"
        },
        {
          "path": "apps/api/plane/db/models/issue.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/db/models/issue.py\n===================================================================\n--- apps/api/plane/db/models/issue.py\tdbc5a63 (parent)\n+++ apps/api/plane/db/models/issue.py\t78fbdde (commit)\n@@ -18,8 +18,9 @@\n from .project import ProjectBaseModel\n from plane.utils.uuid import convert_uuid_to_integer\n from .description import Description\n from plane.db.mixins import ChangeTrackerMixin\n+from .state import State\n \n \n def get_default_properties():\n     return {\n@@ -96,8 +97,9 @@\n                 | models.Q(issue_intake__isnull=True)\n             )\n             .filter(deleted_at__isnull=True)\n             .filter(state__is_triage=False)\n+            .exclude(state__group=State.TRIAGE)\n             .exclude(archived_at__isnull=False)\n             .exclude(project__archived_at__isnull=False)\n             .exclude(is_draft=True)\n         )\n"
        },
        {
          "path": "apps/api/plane/db/models/state.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/db/models/state.py\n===================================================================\n--- apps/api/plane/db/models/state.py\tdbc5a63 (parent)\n+++ apps/api/plane/db/models/state.py\t78fbdde (commit)\n@@ -6,9 +6,38 @@\n # Module imports\n from .project import ProjectBaseModel\n \n \n+class StateManager(models.Manager):\n+    \"\"\"Default manager - excludes triage states\"\"\"\n+\n+    def get_queryset(self):\n+        return super().get_queryset().exclude(group=State.TRIAGE)\n+\n+\n+class TriageStateManager(models.Manager):\n+    \"\"\"Manager for triage states only\"\"\"\n+\n+    def get_queryset(self):\n+        return super().get_queryset().filter(group=State.TRIAGE)\n+\n+\n class State(ProjectBaseModel):\n+    BACKLOG = \"backlog\"\n+    UNSTARTED = \"unstarted\"\n+    STARTED = \"started\"\n+    COMPLETED = \"completed\"\n+    CANCELLED = \"cancelled\"\n+    TRIAGE = \"triage\"\n+\n+    GROUP_CHOICES = (\n+        (BACKLOG, \"Backlog\"),\n+        (UNSTARTED, \"Unstarted\"),\n+        (STARTED, \"Started\"),\n+        (COMPLETED, \"Completed\"),\n+        (CANCELLED, \"Cancelled\"),\n+        (TRIAGE, \"Triage\"),\n+    )\n     name = models.CharField(max_length=255, verbose_name=\"State Name\")\n     description = models.TextField(verbose_name=\"State Description\", blank=True)\n     color = models.CharField(max_length=255, verbose_name=\"State Color\")\n     slug = models.SlugField(max_length=100, blank=True)\n@@ -29,8 +58,12 @@\n     default = models.BooleanField(default=False)\n     external_source = models.CharField(max_length=255, null=True, blank=True)\n     external_id = models.CharField(max_length=255, blank=True, null=True)\n \n+    objects = StateManager()\n+    all_state_objects = models.Manager()\n+    triage_objects = TriageStateManager()\n+\n     def __str__(self):\n         \"\"\"Return name of the state\"\"\"\n         return f\"{self.name} <{self.project.name}>\"\n \n"
        },
        {
          "path": "apps/api/plane/settings/local.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/settings/local.py\n===================================================================\n--- apps/api/plane/settings/local.py\tdbc5a63 (parent)\n+++ apps/api/plane/settings/local.py\t78fbdde (commit)\n@@ -75,6 +75,11 @@\n             \"level\": \"INFO\",\n             \"handlers\": [\"console\"],\n             \"propagate\": False,\n         },\n+        \"plane.migrations\": {\n+            \"level\": \"INFO\",\n+            \"handlers\": [\"console\"],\n+            \"propagate\": False,\n+        },\n     },\n }\n"
        },
        {
          "path": "apps/api/plane/settings/production.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/settings/production.py\n===================================================================\n--- apps/api/plane/settings/production.py\tdbc5a63 (parent)\n+++ apps/api/plane/settings/production.py\t78fbdde (commit)\n@@ -85,6 +85,11 @@\n             \"level\": \"INFO\",\n             \"handlers\": [\"console\"],\n             \"propagate\": False,\n         },\n+        \"plane.migrations\": {\n+            \"level\": \"DEBUG\" if DEBUG else \"INFO\",\n+            \"handlers\": [\"console\"],\n+            \"propagate\": False,\n+        },\n     },\n }\n"
        },
        {
          "path": "apps/api/plane/space/views/intake.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/space/views/intake.py\n===================================================================\n--- apps/api/plane/space/views/intake.py\tdbc5a63 (parent)\n+++ apps/api/plane/space/views/intake.py\t78fbdde (commit)\n@@ -11,9 +11,9 @@\n from rest_framework.response import Response\n \n # Module imports\n from .base import BaseViewSet\n-from plane.db.models import IntakeIssue, Issue, IssueLink, FileAsset, DeployBoard\n+from plane.db.models import IntakeIssue, Issue, IssueLink, FileAsset, DeployBoard, State\n from plane.app.serializers import (\n     IssueSerializer,\n     IntakeIssueSerializer,\n     IssueCreateSerializer,\n@@ -120,15 +120,32 @@\n             \"none\",\n         ]:\n             return Response({\"error\": \"Invalid priority\"}, status=status.HTTP_400_BAD_REQUEST)\n \n+        # get the triage state\n+        triage_state = State.triage_objects.filter(\n+            project_id=project_deploy_board.project_id, workspace_id=project_deploy_board.workspace_id\n+        ).first()\n+\n+        if not triage_state:\n+            triage_state = State.objects.create(\n+                name=\"Intake Triage\",\n+                group=State.TRIAGE,\n+                project_id=project_deploy_board.project_id,\n+                workspace_id=project_deploy_board.workspace_id,\n+                color=\"#4E5355\",\n+                sequence=65000,\n+                default=False,\n+            )\n+\n         # create an issue\n         issue = Issue.objects.create(\n             name=request.data.get(\"issue\", {}).get(\"name\"),\n             description=request.data.get(\"issue\", {}).get(\"description\", {}),\n             description_html=request.data.get(\"issue\", {}).get(\"description_html\", \"<p></p>\"),\n             priority=request.data.get(\"issue\", {}).get(\"priority\", \"low\"),\n             project_id=project_deploy_board.project_id,\n+            state_id=triage_state.id,\n         )\n \n         # Create an Issue Activity\n         issue_activity.delay(\n@@ -190,9 +207,9 @@\n         issue_serializer = IssueCreateSerializer(\n             issue,\n             data=issue_data,\n             partial=True,\n-            context={\"project_id\": project_deploy_board.project_id},\n+            context={\"project_id\": project_deploy_board.project_id, \"allow_triage_state\": True},\n         )\n \n         if issue_serializer.is_valid():\n             current_instance = issue\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/intake-state/base.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/dropdowns/intake-state/base.tsx\n===================================================================\n--- apps/web/core/components/dropdowns/intake-state/base.tsx\tdbc5a63 (parent)\n+++ apps/web/core/components/dropdowns/intake-state/base.tsx\t78fbdde (commit)\n@@ -0,0 +1,256 @@\n+\"use client\";\n+\n+import type { ReactNode } from \"react\";\n+import { useRef, useState } from \"react\";\n+import { observer } from \"mobx-react\";\n+import { usePopper } from \"react-popper\";\n+import { Search } from \"lucide-react\";\n+import { Combobox } from \"@headlessui/react\";\n+// plane imports\n+import { useTranslation } from \"@plane/i18n\";\n+import { IntakeStateGroupIcon, ChevronDownIcon } from \"@plane/propel/icons\";\n+import type { IIntakeState } from \"@plane/types\";\n+import { ComboDropDown, Spinner } from \"@plane/ui\";\n+import { cn } from \"@plane/utils\";\n+// components\n+import { DropdownButton } from \"@/components/dropdowns/buttons\";\n+import { BUTTON_VARIANTS_WITH_TEXT } from \"@/components/dropdowns/constants\";\n+import type { TDropdownProps } from \"@/components/dropdowns/types\";\n+// hooks\n+import { useDropdown } from \"@/hooks/use-dropdown\";\n+// plane web imports\n+import { StateOption } from \"@/plane-web/components/workflow\";\n+\n+export type TWorkItemStateDropdownBaseProps = TDropdownProps & {\n+  alwaysAllowStateChange?: boolean;\n+  button?: ReactNode;\n+  dropdownArrow?: boolean;\n+  dropdownArrowClassName?: string;\n+  filterAvailableStateIds?: boolean;\n+  getStateById: (stateId: string | null | undefined) => IIntakeState | undefined;\n+  iconSize?: string;\n+  isForWorkItemCreation?: boolean;\n+  isInitializing?: boolean;\n+  onChange: (val: string) => void;\n+  onClose?: () => void;\n+  onDropdownOpen?: () => void;\n+  projectId: string | undefined;\n+  renderByDefault?: boolean;\n+  showDefaultState?: boolean;\n+  stateIds: string[];\n+  value: string | undefined | null;\n+};\n+\n+export const WorkItemStateDropdownBase: React.FC<TWorkItemStateDropdownBaseProps> = observer((props) => {\n+  const {\n+    button,\n+    buttonClassName,\n+    buttonContainerClassName,\n+    buttonVariant,\n+    className = \"\",\n+    disabled = false,\n+    dropdownArrow = false,\n+    dropdownArrowClassName = \"\",\n+    getStateById,\n+    hideIcon = false,\n+    iconSize = \"size-4\",\n+    isInitializing = false,\n+    onChange,\n+    onClose,\n+    onDropdownOpen,\n+    placement,\n+    renderByDefault = true,\n+    showDefaultState = true,\n+    showTooltip = false,\n+    stateIds,\n+    tabIndex,\n+    value,\n+  } = props;\n+  // refs\n+  const dropdownRef = useRef<HTMLDivElement | null>(null);\n+  const inputRef = useRef<HTMLInputElement | null>(null);\n+  // popper-js refs\n+  const [referenceElement, setReferenceElement] = useState<HTMLButtonElement | null>(null);\n+  const [popperElement, setPopperElement] = useState<HTMLDivElement | null>(null);\n+  // states\n+  const [query, setQuery] = useState(\"\");\n+  const [isOpen, setIsOpen] = useState(false);\n+  // store hooks\n+  const { t } = useTranslation();\n+  const statesList = stateIds.map((stateId) => getStateById(stateId)).filter((state) => !!state);\n+  const defaultState = statesList?.find((state) => state?.default) || statesList[0];\n+  const stateValue = !!value ? value : showDefaultState ? defaultState?.id : undefined;\n+  // popper-js init\n+  const { styles, attributes } = usePopper(referenceElement, popperElement, {\n+    placement: placement ?? \"bottom-start\",\n+    modifiers: [\n+      {\n+        name: \"preventOverflow\",\n+        options: {\n+          padding: 12,\n+        },\n+      },\n+    ],\n+  });\n+  // dropdown init\n+  const { handleClose, handleKeyDown, handleOnClick, searchInputKeyDown } = useDropdown({\n+    dropdownRef,\n+    inputRef,\n+    isOpen,\n+    onClose,\n+    onOpen: onDropdownOpen,\n+    query,\n+    setIsOpen,\n+    setQuery,\n+  });\n+\n+  // derived values\n+  const options = statesList?.map((state) => ({\n+    value: state?.id,\n+    query: `${state?.name}`,\n+    content: (\n+      <div className=\"flex items-center gap-2\">\n+        <IntakeStateGroupIcon\n+          stateGroup={state?.group ?? \"triage\"}\n+          color={state?.color}\n+          className={cn(\"flex-shrink-0\", iconSize)}\n+        />\n+        <span className=\"flex-grow truncate text-left\">{state?.name}</span>\n+      </div>\n+    ),\n+  }));\n+\n+  const filteredOptions =\n+    query === \"\" ? options : options?.filter((o) => o.query.toLowerCase().includes(query.toLowerCase()));\n+\n+  const selectedState = stateValue ? getStateById(stateValue) : undefined;\n+\n+  const dropdownOnChange = (val: string) => {\n+    onChange(val);\n+    handleClose();\n+  };\n+\n+  const comboButton = (\n+    <>\n+      {button ? (\n+        <button\n+          ref={setReferenceElement}\n+          type=\"button\"\n+          className={cn(\"clickable block h-full w-full outline-none\", buttonContainerClassName)}\n+          onClick={handleOnClick}\n+          disabled={disabled}\n+          tabIndex={tabIndex}\n+        >\n+          {button}\n+        </button>\n+      ) : (\n+        <button\n+          tabIndex={tabIndex}\n+          ref={setReferenceElement}\n+          type=\"button\"\n+          className={cn(\n+            \"clickable block h-full max-w-full outline-none\",\n+            {\n+              \"cursor-not-allowed text-custom-text-200\": disabled,\n+              \"cursor-pointer\": !disabled,\n+            },\n+            buttonContainerClassName\n+          )}\n+          onClick={handleOnClick}\n+          disabled={disabled}\n+        >\n+          <DropdownButton\n+            className={buttonClassName}\n+            isActive={isOpen}\n+            tooltipHeading={t(\"state\")}\n+            tooltipContent={selectedState?.name ?? t(\"state\")}\n+            showTooltip={showTooltip}\n+            variant={buttonVariant}\n+            renderToolTipByDefault={renderByDefault}\n+          >\n+            {isInitializing ? (\n+              <Spinner className=\"h-3.5 w-3.5\" />\n+            ) : (\n+              <>\n+                {!hideIcon && (\n+                  <IntakeStateGroupIcon\n+                    stateGroup={selectedState?.group ?? \"triage\"}\n+                    color={selectedState?.color ?? \"rgba(var(--color-text-300))\"}\n+                    className={cn(\"flex-shrink-0\", iconSize)}\n+                  />\n+                )}\n+                {BUTTON_VARIANTS_WITH_TEXT.includes(buttonVariant) && (\n+                  <span className=\"flex-grow truncate text-left\">{selectedState?.name ?? t(\"state\")}</span>\n+                )}\n+                {dropdownArrow && (\n+                  <ChevronDownIcon\n+                    className={cn(\"h-2.5 w-2.5 flex-shrink-0\", dropdownArrowClassName)}\n+                    aria-hidden=\"true\"\n+                  />\n+                )}\n+              </>\n+            )}\n+          </DropdownButton>\n+        </button>\n+      )}\n+    </>\n+  );\n+\n+  return (\n+    <ComboDropDown\n+      as=\"div\"\n+      ref={dropdownRef}\n+      className={cn(\"h-full\", className)}\n+      value={stateValue}\n+      onChange={dropdownOnChange}\n+      disabled={disabled}\n+      onKeyDown={handleKeyDown}\n+      button={comboButton}\n+      renderByDefault={renderByDefault}\n+    >\n+      {isOpen && (\n+        <Combobox.Options className=\"fixed z-10\" static>\n+          <div\n+            className=\"my-1 w-48 rounded border-[0.5px] border-custom-border-300 bg-custom-background-100 px-2 py-2.5 text-xs shadow-custom-shadow-rg focus:outline-none\"\n+            ref={setPopperElement}\n+            style={styles.popper}\n+            {...attributes.popper}\n+          >\n+            <div className=\"flex items-center gap-1.5 rounded border border-custom-border-100 bg-custom-background-90 px-2\">\n+              <Search className=\"h-3.5 w-3.5 text-custom-text-400\" strokeWidth={1.5} />\n+              <Combobox.Input\n+                as=\"input\"\n+                ref={inputRef}\n+                className=\"w-full bg-transparent py-1 text-xs text-custom-text-200 placeholder:text-custom-text-400 focus:outline-none\"\n+                value={query}\n+                onChange={(e) => setQuery(e.target.value)}\n+                placeholder={t(\"common.search.label\")}\n+                displayValue={(assigned: any) => assigned?.name}\n+                onKeyDown={searchInputKeyDown}\n+              />\n+            </div>\n+            <div className=\"mt-2 max-h-48 space-y-1 overflow-y-scroll\">\n+              {filteredOptions ? (\n+                filteredOptions.length > 0 ? (\n+                  filteredOptions.map((option) => (\n+                    <StateOption\n+                      {...props}\n+                      key={option.value}\n+                      option={option}\n+                      selectedValue={value}\n+                      className=\"flex w-full cursor-pointer select-none items-center justify-between gap-2 truncate rounded px-1 py-1.5\"\n+                    />\n+                  ))\n+                ) : (\n+                  <p className=\"px-1.5 py-1 italic text-custom-text-400\">{t(\"no_matching_results\")}</p>\n+                )\n+              ) : (\n+                <p className=\"px-1.5 py-1 italic text-custom-text-400\">{t(\"loading\")}</p>\n+              )}\n+            </div>\n+          </div>\n+        </Combobox.Options>\n+      )}\n+    </ComboDropDown>\n+  );\n+});\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/intake-state/dropdown.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/dropdowns/intake-state/dropdown.tsx\n===================================================================\n--- apps/web/core/components/dropdowns/intake-state/dropdown.tsx\tdbc5a63 (parent)\n+++ apps/web/core/components/dropdowns/intake-state/dropdown.tsx\t78fbdde (commit)\n@@ -0,0 +1,48 @@\n+\"use client\";\n+\n+import { useState } from \"react\";\n+import { observer } from \"mobx-react\";\n+import { useParams } from \"next/navigation\";\n+// hooks\n+import { useProjectState } from \"@/hooks/store/use-project-state\";\n+// local imports\n+import type { TWorkItemStateDropdownBaseProps } from \"./base\";\n+import { WorkItemStateDropdownBase } from \"./base\";\n+\n+type TWorkItemStateDropdownProps = Omit<\n+  TWorkItemStateDropdownBaseProps,\n+  \"stateIds\" | \"getStateById\" | \"onDropdownOpen\" | \"isInitializing\"\n+> & {\n+  stateIds?: string[];\n+};\n+\n+export const IntakeStateDropdown: React.FC<TWorkItemStateDropdownProps> = observer((props) => {\n+  const { projectId, stateIds: propsStateIds } = props;\n+  // router params\n+  const { workspaceSlug } = useParams();\n+  // states\n+  const [stateLoader, setStateLoader] = useState(false);\n+  // store hooks\n+  const { fetchProjectIntakeState, getProjectIntakeStateIds, getIntakeStateById } = useProjectState();\n+  // derived values\n+  const stateIds = propsStateIds ?? getProjectIntakeStateIds(projectId);\n+\n+  // fetch states if not provided\n+  const onDropdownOpen = async () => {\n+    if ((stateIds === undefined || stateIds.length === 0) && workspaceSlug && projectId) {\n+      setStateLoader(true);\n+      await fetchProjectIntakeState(workspaceSlug.toString(), projectId);\n+      setStateLoader(false);\n+    }\n+  };\n+\n+  return (\n+    <WorkItemStateDropdownBase\n+      {...props}\n+      getStateById={getIntakeStateById}\n+      isInitializing={stateLoader}\n+      stateIds={stateIds ?? []}\n+      onDropdownOpen={onDropdownOpen}\n+    />\n+  );\n+});\n"
        },
        {
          "path": "apps/web/core/components/inbox/content/issue-properties.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/inbox/content/issue-properties.tsx\n===================================================================\n--- apps/web/core/components/inbox/content/issue-properties.tsx\tdbc5a63 (parent)\n+++ apps/web/core/components/inbox/content/issue-properties.tsx\t78fbdde (commit)\n@@ -13,11 +13,11 @@\n import { ControlLink } from \"@plane/ui\";\n import { getDate, renderFormattedPayloadDate, generateWorkItemLink } from \"@plane/utils\";\n // components\n import { DateDropdown } from \"@/components/dropdowns/date\";\n+import { IntakeStateDropdown } from \"@/components/dropdowns/intake-state/dropdown\";\n import { MemberDropdown } from \"@/components/dropdowns/member/dropdown\";\n import { PriorityDropdown } from \"@/components/dropdowns/priority\";\n-import { StateDropdown } from \"@/components/dropdowns/state/dropdown\";\n import type { TIssueOperations } from \"@/components/issues/issue-detail\";\n import { IssueLabel } from \"@/components/issues/issue-detail/label\";\n // hooks\n import { useProject } from \"@/hooks/store/use-project\";\n@@ -56,20 +56,18 @@\n       <div className=\"w-full overflow-y-auto\">\n         <h5 className=\"text-sm font-medium my-4\">Properties</h5>\n         <div className={`divide-y-2 divide-custom-border-200 ${!isEditable ? \"opacity-60\" : \"\"}`}>\n           <div className=\"flex flex-col gap-3\">\n-            {/* State */}\n+            {/* Intake State */}\n             <div className=\"flex h-8 items-center gap-2\">\n               <div className=\"flex w-2/5 flex-shrink-0 items-center gap-1 text-sm text-custom-text-300\">\n                 <StatePropertyIcon className=\"h-4 w-4 flex-shrink-0\" />\n                 <span>State</span>\n               </div>\n               {issue?.state_id && (\n-                <StateDropdown\n+                <IntakeStateDropdown\n                   value={issue?.state_id}\n-                  onChange={(val) =>\n-                    issue?.id && issueOperations.update(workspaceSlug, projectId, issue?.id, { state_id: val })\n-                  }\n+                  onChange={() => {}}\n                   projectId={projectId?.toString() ?? \"\"}\n                   disabled={!isEditable}\n                   buttonVariant=\"transparent-with-text\"\n                   className=\"w-3/5 flex-grow group\"\n"
        },
        {
          "path": "apps/web/core/components/inbox/inbox-filter/filters/filter-selection.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/inbox/inbox-filter/filters/filter-selection.tsx\n===================================================================\n--- apps/web/core/components/inbox/inbox-filter/filters/filter-selection.tsx\tdbc5a63 (parent)\n+++ apps/web/core/components/inbox/inbox-filter/filters/filter-selection.tsx\t78fbdde (commit)\n@@ -52,12 +52,8 @@\n         {/* status */}\n         <div className=\"py-2\">\n           <FilterStatus searchQuery={filtersSearchQuery} />\n         </div>\n-        {/* state */}\n-        <div className=\"py-2\">\n-          <FilterState states={projectStates} searchQuery={filtersSearchQuery} />\n-        </div>\n         {/* Priority */}\n         <div className=\"py-2\">\n           <FilterPriority searchQuery={filtersSearchQuery} />\n         </div>\n"
        },
        {
          "path": "apps/web/core/components/inbox/modals/create-modal/issue-properties.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/inbox/modals/create-modal/issue-properties.tsx\n===================================================================\n--- apps/web/core/components/inbox/modals/create-modal/issue-properties.tsx\tdbc5a63 (parent)\n+++ apps/web/core/components/inbox/modals/create-modal/issue-properties.tsx\t78fbdde (commit)\n@@ -9,12 +9,12 @@\n // components\n import { CycleDropdown } from \"@/components/dropdowns/cycle\";\n import { DateDropdown } from \"@/components/dropdowns/date\";\n import { EstimateDropdown } from \"@/components/dropdowns/estimate\";\n+import { IntakeStateDropdown } from \"@/components/dropdowns/intake-state/dropdown\";\n import { MemberDropdown } from \"@/components/dropdowns/member/dropdown\";\n import { ModuleDropdown } from \"@/components/dropdowns/module/dropdown\";\n import { PriorityDropdown } from \"@/components/dropdowns/priority\";\n-import { StateDropdown } from \"@/components/dropdowns/state/dropdown\";\n import { ParentIssuesListModal } from \"@/components/issues/parent-issues-list-modal\";\n import { IssueLabelSelect } from \"@/components/issues/select\";\n // helpers\n // hooks\n@@ -49,11 +49,11 @@\n   maxDate?.setDate(maxDate.getDate());\n \n   return (\n     <div className=\"relative flex flex-wrap gap-2 items-center\">\n-      {/* state */}\n+      {/* intake state */}\n       <div className=\"h-7\">\n-        <StateDropdown\n+        <IntakeStateDropdown\n           value={data?.state_id}\n           onChange={(stateId) => handleData(\"state_id\", stateId)}\n           projectId={projectId}\n           buttonVariant=\"border-with-text\"\n"
        },
        {
          "path": "apps/web/core/constants/fetch-keys.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/constants/fetch-keys.ts\n===================================================================\n--- apps/web/core/constants/fetch-keys.ts\tdbc5a63 (parent)\n+++ apps/web/core/constants/fetch-keys.ts\t78fbdde (commit)\n@@ -162,8 +162,11 @@\n \n export const PROJECT_STATES = (workspaceSlug: string, projectId: string) =>\n   `PROJECT_STATES_${projectId.toString().toUpperCase()}`;\n \n+export const PROJECT_INTAKE_STATE = (workspaceSlug: string, projectId: string) =>\n+  `PROJECT_INTAKE_STATE_${projectId.toString().toUpperCase()}`;\n+\n export const PROJECT_ESTIMATES = (workspaceSlug: string, projectId: string) =>\n   `PROJECT_ESTIMATES_${projectId.toString().toUpperCase()}`;\n \n export const PROJECT_ALL_CYCLES = (workspaceSlug: string, projectId: string) =>\n"
        },
        {
          "path": "apps/web/core/layouts/auth-layout/project-wrapper.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/layouts/auth-layout/project-wrapper.tsx\n===================================================================\n--- apps/web/core/layouts/auth-layout/project-wrapper.tsx\tdbc5a63 (parent)\n+++ apps/web/core/layouts/auth-layout/project-wrapper.tsx\t78fbdde (commit)\n@@ -20,8 +20,9 @@\n   PROJECT_ESTIMATES,\n   PROJECT_ALL_CYCLES,\n   PROJECT_MODULES,\n   PROJECT_VIEWS,\n+  PROJECT_INTAKE_STATE,\n } from \"@/constants/fetch-keys\";\n import { captureClick } from \"@/helpers/event-tracker.helper\";\n // hooks\n import { useProjectEstimates } from \"@/hooks/store/estimates\";\n@@ -57,10 +58,10 @@\n   const { fetchViews } = useProjectView();\n   const {\n     project: { fetchProjectMembers, fetchProjectMemberPreferences },\n   } = useMember();\n+  const { fetchProjectStates, fetchProjectIntakeState } = useProjectState();\n   const { data: currentUserData } = useUser();\n-  const { fetchProjectStates } = useProjectState();\n   const { fetchProjectLabels } = useLabel();\n   const { getProjectEstimates } = useProjectEstimates();\n \n   // derived values\n@@ -111,8 +112,14 @@\n     workspaceSlug && projectId ? PROJECT_STATES(workspaceSlug, projectId) : null,\n     workspaceSlug && projectId ? () => fetchProjectStates(workspaceSlug, projectId) : null,\n     { revalidateIfStale: false, revalidateOnFocus: false }\n   );\n+  // fetching project intake state\n+  useSWR(\n+    workspaceSlug && projectId ? PROJECT_INTAKE_STATE(workspaceSlug, projectId) : null,\n+    workspaceSlug && projectId ? () => fetchProjectIntakeState(workspaceSlug, projectId) : null,\n+    { revalidateIfStale: false, revalidateOnFocus: false }\n+  );\n   // fetching project estimates\n   useSWR(\n     workspaceSlug && projectId ? PROJECT_ESTIMATES(workspaceSlug, projectId) : null,\n     workspaceSlug && projectId ? () => getProjectEstimates(workspaceSlug, projectId) : null,\n"
        },
        {
          "path": "apps/web/core/services/project/project-state.service.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/services/project/project-state.service.ts\n===================================================================\n--- apps/web/core/services/project/project-state.service.ts\tdbc5a63 (parent)\n+++ apps/web/core/services/project/project-state.service.ts\t78fbdde (commit)\n@@ -1,7 +1,7 @@\n // services\n import { API_BASE_URL } from \"@plane/constants\";\n-import type { IState } from \"@plane/types\";\n+import type { IIntakeState, IState } from \"@plane/types\";\n import { APIService } from \"@/services/api.service\";\n // helpers\n // types\n \n@@ -33,8 +33,16 @@\n         throw error?.response?.data;\n       });\n   }\n \n+  async getIntakeState(workspaceSlug: string, projectId: string): Promise<IIntakeState> {\n+    return this.get(`/api/workspaces/${workspaceSlug}/projects/${projectId}/intake-state/`)\n+      .then((response) => response?.data)\n+      .catch((error) => {\n+        throw error?.response?.data;\n+      });\n+  }\n+\n   async getState(workspaceSlug: string, projectId: string, stateId: string): Promise<any> {\n     return this.get(`/api/workspaces/${workspaceSlug}/projects/${projectId}/states/${stateId}/`)\n       .then((response) => response?.data)\n       .catch((error) => {\n"
        },
        {
          "path": "apps/web/core/store/inbox/project-inbox.store.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/store/inbox/project-inbox.store.ts\n===================================================================\n--- apps/web/core/store/inbox/project-inbox.store.ts\tdbc5a63 (parent)\n+++ apps/web/core/store/inbox/project-inbox.store.ts\t78fbdde (commit)\n@@ -468,10 +468,11 @@\n             (this.inboxIssuePaginationInfo?.total_results || 0) + 1\n           );\n         });\n       return inboxIssueResponse;\n-    } catch {\n+    } catch (error) {\n       console.error(\"Error creating the intake issue\");\n+      throw error;\n     }\n   };\n \n   /**\n"
        },
        {
          "path": "apps/web/core/store/state.store.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/store/state.store.ts\n===================================================================\n--- apps/web/core/store/state.store.ts\tdbc5a63 (parent)\n+++ apps/web/core/store/state.store.ts\t78fbdde (commit)\n@@ -2,9 +2,9 @@\n import { action, computed, makeObservable, observable, runInAction } from \"mobx\";\n import { computedFn } from \"mobx-utils\";\n // plane imports\n import { STATE_GROUPS } from \"@plane/constants\";\n-import type { IState } from \"@plane/types\";\n+import type { IIntakeState, IState } from \"@plane/types\";\n // helpers\n import { sortStates } from \"@plane/utils\";\n // plane web\n import { ProjectStateService } from \"@/plane-web/services/project/project-state.service\";\n@@ -12,21 +12,27 @@\n \n export interface IStateStore {\n   //Loaders\n   fetchedMap: Record<string, boolean>;\n+  fetchedIntakeMap: Record<string, boolean>;\n   // observables\n   stateMap: Record<string, IState>;\n+  intakeStateMap: Record<string, IIntakeState>;\n   // computed\n   workspaceStates: IState[] | undefined;\n   projectStates: IState[] | undefined;\n   groupedProjectStates: Record<string, IState[]> | undefined;\n   // computed actions\n   getStateById: (stateId: string | null | undefined) => IState | undefined;\n+  getIntakeStateById: (intakeStateId: string | null | undefined) => IIntakeState | undefined;\n   getProjectStates: (projectId: string | null | undefined) => IState[] | undefined;\n+  getProjectIntakeState: (projectId: string | null | undefined) => IIntakeState | undefined;\n   getProjectStateIds: (projectId: string | null | undefined) => string[] | undefined;\n+  getProjectIntakeStateIds: (projectId: string | null | undefined) => string[] | undefined;\n   getProjectDefaultStateId: (projectId: string | null | undefined) => string | undefined;\n   // fetch actions\n   fetchProjectStates: (workspaceSlug: string, projectId: string) => Promise<IState[]>;\n+  fetchProjectIntakeState: (workspaceSlug: string, projectId: string) => Promise<IIntakeState>;\n   fetchWorkspaceStates: (workspaceSlug: string) => Promise<IState[]>;\n   // crud actions\n   createState: (workspaceSlug: string, projectId: string, data: Partial<IState>) => Promise<IState>;\n   updateState: (\n@@ -48,24 +54,29 @@\n }\n \n export class StateStore implements IStateStore {\n   stateMap: Record<string, IState> = {};\n+  intakeStateMap: Record<string, IIntakeState> = {};\n   //loaders\n   fetchedMap: Record<string, boolean> = {};\n+  fetchedIntakeMap: Record<string, boolean> = {};\n   rootStore: RootStore;\n   router;\n   stateService: ProjectStateService;\n \n   constructor(_rootStore: RootStore) {\n     makeObservable(this, {\n       // observables\n       stateMap: observable,\n+      intakeStateMap: observable,\n       fetchedMap: observable,\n+      fetchedIntakeMap: observable,\n       // computed\n       projectStates: computed,\n       groupedProjectStates: computed,\n       // fetch action\n       fetchProjectStates: action,\n+      fetchProjectIntakeState: action,\n       // CRUD actions\n       createState: action,\n       updateState: action,\n       deleteState: action,\n@@ -127,8 +138,17 @@\n     return this.stateMap[stateId] ?? undefined;\n   });\n \n   /**\n+   * @description returns intake state details using intake state id\n+   * @param intakeStateId\n+   */\n+  getIntakeStateById = computedFn((intakeStateId: string | null | undefined) => {\n+    if (!this.intakeStateMap || !intakeStateId) return;\n+    return this.intakeStateMap[intakeStateId] ?? undefined;\n+  });\n+\n+  /**\n    * Returns the stateMap belongs to a project by projectId\n    * @param projectId\n    * @returns IState[]\n    */\n@@ -138,8 +158,18 @@\n     return sortStates(Object.values(this.stateMap).filter((state) => state.project_id === projectId));\n   });\n \n   /**\n+   * Returns the intake state for a project by projectId\n+   * @param projectId\n+   * @returns IIntakeState | undefined\n+   */\n+  getProjectIntakeState = computedFn((projectId: string | null | undefined) => {\n+    if (!projectId || !this.fetchedIntakeMap[projectId]) return;\n+    return Object.values(this.intakeStateMap).find((state) => state.project_id === projectId);\n+  });\n+\n+  /**\n    * Returns the state ids for a project by projectId\n    * @param projectId\n    * @returns string[]\n    */\n@@ -151,8 +181,20 @@\n     return projectStates?.map((state) => state.id) ?? [];\n   });\n \n   /**\n+   * Returns the intake state ids for a project by projectId\n+   * @param projectId\n+   * @returns string[]\n+   */\n+  getProjectIntakeStateIds = computedFn((projectId: string | null | undefined) => {\n+    const workspaceSlug = this.router.workspaceSlug;\n+    if (!workspaceSlug || !projectId || !this.fetchedIntakeMap[projectId]) return undefined;\n+    const projectIntakeState = this.getProjectIntakeState(projectId);\n+    return projectIntakeState?.id ? [projectIntakeState.id] : [];\n+  });\n+\n+  /**\n    * Returns the default state id for a project\n    * @param projectId\n    * @returns string | undefined\n    */\n@@ -178,8 +220,23 @@\n     return statesResponse;\n   };\n \n   /**\n+   * fetches the intakeStateMap of a project\n+   * @param workspaceSlug\n+   * @param projectId\n+   * @returns\n+   */\n+  fetchProjectIntakeState = async (workspaceSlug: string, projectId: string) => {\n+    const intakeStateResponse = await this.stateService.getIntakeState(workspaceSlug, projectId);\n+    runInAction(() => {\n+      set(this.intakeStateMap, [intakeStateResponse.id], intakeStateResponse);\n+      set(this.fetchedIntakeMap, projectId, true);\n+    });\n+    return intakeStateResponse;\n+  };\n+\n+  /**\n    * fetches the stateMap of all the states in workspace\n    * @param workspaceSlug\n    * @returns\n    */\n"
        },
        {
          "path": "packages/propel/src/icons/state/helper.tsx",
          "status": "modified",
          "diff": "Index: packages/propel/src/icons/state/helper.tsx\n===================================================================\n--- packages/propel/src/icons/state/helper.tsx\tdbc5a63 (parent)\n+++ packages/propel/src/icons/state/helper.tsx\t78fbdde (commit)\n@@ -1,5 +1,6 @@\n import { EIconSize } from \"@plane/constants\";\n+import type { TIntakeStateGroups } from \"@plane/types\";\n \n export interface IStateGroupIcon {\n   className?: string;\n   color?: string;\n@@ -7,8 +8,16 @@\n   size?: EIconSize;\n   percentage?: number;\n }\n \n+export interface IIntakeStateGroupIcon {\n+  className?: string;\n+  color?: string;\n+  stateGroup: TIntakeStateGroups;\n+  size?: EIconSize;\n+  percentage?: number;\n+}\n+\n export type TStateGroups = \"backlog\" | \"unstarted\" | \"started\" | \"completed\" | \"cancelled\";\n \n export const STATE_GROUP_COLORS: {\n   [key in TStateGroups]: string;\n@@ -19,8 +28,10 @@\n   completed: \"#46A758\",\n   cancelled: \"#9AA4BC\",\n };\n \n+export const INTAKE_STATE_GROUP_COLORS: { [key in TIntakeStateGroups]: string } = { triage: \"#4E5355\" };\n+\n export const STATE_GROUP_SIZES: {\n   [key in EIconSize]: string;\n } = {\n   [EIconSize.XS]: \"10px\",\n"
        },
        {
          "path": "packages/propel/src/icons/state/index.ts",
          "status": "modified",
          "diff": "Index: packages/propel/src/icons/state/index.ts\n===================================================================\n--- packages/propel/src/icons/state/index.ts\tdbc5a63 (parent)\n+++ packages/propel/src/icons/state/index.ts\t78fbdde (commit)\n@@ -3,4 +3,5 @@\n export * from \"./completed-group-icon\";\n export * from \"./started-group-icon\";\n export * from \"./state-group-icon\";\n export * from \"./unstarted-group-icon\";\n+export * from \"./intake-state-group-icon\";\n"
        },
        {
          "path": "packages/propel/src/icons/state/intake-state-group-icon.tsx",
          "status": "added",
          "diff": "Index: packages/propel/src/icons/state/intake-state-group-icon.tsx\n===================================================================\n--- packages/propel/src/icons/state/intake-state-group-icon.tsx\tdbc5a63 (parent)\n+++ packages/propel/src/icons/state/intake-state-group-icon.tsx\t78fbdde (commit)\n@@ -0,0 +1,26 @@\n+import * as React from \"react\";\n+\n+import { EIconSize } from \"@plane/constants\";\n+import type { IIntakeStateGroupIcon } from \"./helper\";\n+import { INTAKE_STATE_GROUP_COLORS, STATE_GROUP_SIZES } from \"./helper\";\n+import { TriageGroupIcon } from \"./triage-group-icon\";\n+\n+const iconComponents = { triage: TriageGroupIcon };\n+\n+export const IntakeStateGroupIcon: React.FC<IIntakeStateGroupIcon> = ({\n+  className = \"\",\n+  color,\n+  stateGroup,\n+  size = EIconSize.SM,\n+}) => {\n+  const IntakeStateIconComponent = iconComponents[stateGroup] || TriageGroupIcon;\n+\n+  return (\n+    <IntakeStateIconComponent\n+      height={STATE_GROUP_SIZES[size]}\n+      width={STATE_GROUP_SIZES[size]}\n+      color={color ?? INTAKE_STATE_GROUP_COLORS[stateGroup]}\n+      className={`flex-shrink-0 ${className}`}\n+    />\n+  );\n+};\n"
        },
        {
          "path": "packages/propel/src/icons/state/triage-group-icon.tsx",
          "status": "added",
          "diff": "Index: packages/propel/src/icons/state/triage-group-icon.tsx\n===================================================================\n--- packages/propel/src/icons/state/triage-group-icon.tsx\tdbc5a63 (parent)\n+++ packages/propel/src/icons/state/triage-group-icon.tsx\t78fbdde (commit)\n@@ -0,0 +1,42 @@\n+import * as React from \"react\";\n+\n+import type { ISvgIcons } from \"../type\";\n+\n+export const TriageGroupIcon: React.FC<ISvgIcons> = ({ width = \"20\", height = \"20\", className, color = \"#4E5355\" }) => {\n+  // SVG parameters\n+  const viewBoxSize = 16;\n+  return (\n+    <svg\n+      height={height}\n+      width={width}\n+      viewBox={`0 0 ${viewBoxSize} ${viewBoxSize}`}\n+      className={className}\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+      fill=\"none\"\n+    >\n+      <g clip-path=\"url(#clip0_3870_37)\">\n+        <path\n+          d=\"M0.75 8C0.75 3.99594 3.99594 0.75 8 0.75C8.32217 0.75 8.58333 1.01117 8.58333 1.33333C8.58333 1.6555 8.32217 1.91667 8 1.91667C4.64027 1.91667 1.91667 4.64027 1.91667 8C1.91667 11.3597 4.64027 14.0833 8 14.0833C8.32217 14.0833 8.58333 14.3445 8.58333 14.6667C8.58333 14.9888 8.32217 15.25 8 15.25C3.99594 15.25 0.75 12.0041 0.75 8Z\"\n+          fill={color}\n+        />\n+        <path\n+          d=\"M10.9855 13.9615L11.078 14.1465C11.1916 14.3737 11.1001 14.6515 10.8663 14.7508C10.6324 14.8501 10.3689 14.7229 10.2845 14.4831L10.1195 14.0143C10.0505 13.8183 10.154 13.6046 10.3453 13.5234C10.5366 13.4423 10.7621 13.5162 10.8553 13.7019L10.9855 13.9615ZM12.6866 13.0286C12.8599 13.2144 12.8506 13.5069 12.6541 13.6681C12.4576 13.8292 12.1691 13.7815 12.0205 13.5754L11.7298 13.1724C11.6082 13.0038 11.6472 12.7694 11.8079 12.6375C11.9685 12.5057 12.2058 12.5131 12.3476 12.665L12.6866 13.0286ZM13.9148 11.5026C14.1333 11.632 14.2067 11.9149 14.0638 12.1249C13.921 12.3348 13.6308 12.3704 13.4302 12.2147L13.0373 11.9097C12.8731 11.7823 12.8444 11.5465 12.9614 11.3748C13.0783 11.203 13.3082 11.1431 13.487 11.2491L13.9148 11.5026ZM14.6627 9.69141C14.9089 9.75393 15.0592 10.0048 14.9813 10.2466C14.9034 10.4883 14.635 10.6044 14.3985 10.5116L13.9362 10.3302C13.7427 10.2542 13.6486 10.036 13.7122 9.83814C13.7759 9.64027 13.9795 9.51796 14.181 9.56911L14.6627 9.69141ZM14.8689 7.74357C15.1228 7.73414 15.3378 7.93242 15.3313 8.18638C15.3248 8.44044 15.0999 8.62755 14.8468 8.60509L14.3518 8.56118C14.1448 8.54281 13.9931 8.36009 13.9986 8.15234C14.004 7.94452 14.165 7.76971 14.3728 7.762L14.8689 7.74357ZM14.5173 5.8165C14.7582 5.73553 15.0206 5.86505 15.0861 6.11063C15.1515 6.35609 14.9886 6.59895 14.7395 6.64882L14.252 6.74642C14.0484 6.78719 13.8514 6.65476 13.798 6.45402C13.7446 6.2532 13.8497 6.0402 14.0467 5.97425L14.3221 5.88209L14.5173 5.8165ZM13.6369 4.06668C13.8452 3.92123 14.1334 3.97157 14.2654 4.1887C14.3974 4.40584 14.3096 4.68491 14.0846 4.80306L13.6448 5.03401C13.4608 5.13061 13.2344 5.0591 13.1264 4.88152C13.0185 4.70392 13.0592 4.46992 13.2296 4.35097L13.6369 4.06668ZM12.2981 2.63637C12.457 2.43806 12.7476 2.40502 12.9357 2.57589C13.1237 2.74673 13.1182 3.03909 12.9358 3.21591L12.5786 3.56218C12.4294 3.70686 12.1919 3.70215 12.0383 3.56213C11.8847 3.42214 11.8577 3.18617 11.9876 3.02398L12.2981 2.63637ZM10.6103 1.64162C10.7068 1.4066 10.9763 1.29298 11.2048 1.404C11.4332 1.51499 11.5105 1.79695 11.3855 2.01805L11.1409 2.45067C11.0386 2.63174 10.8092 2.69437 10.6221 2.60353C10.435 2.51273 10.3425 2.29386 10.4215 2.10151L10.6103 1.64162Z\"\n+          fill={color}\n+        />\n+        <path\n+          d=\"M10.5833 8C10.5832 8.32217 10.3215 8.58345 9.99935 8.58333C9.67737 8.58307 9.41664 8.32199 9.41667 8V7.4082L6.41276 10.4121C6.18495 10.6399 5.81504 10.6406 5.58724 10.4128C5.35943 10.185 5.35943 9.81505 5.58724 9.58724L7.00195 8.17318C7.49071 7.68442 8.05115 7.12332 8.59115 6.58333H8C7.67783 6.58333 7.41667 6.32217 7.41667 6C7.41667 5.67783 7.67783 5.41667 8 5.41667H10C10.3222 5.41667 10.5833 5.67783 10.5833 6V8Z\"\n+          fill={color}\n+        />\n+        <path\n+          d=\"M5.41667 8C5.41679 7.67783 5.67848 7.41655 6.00065 7.41667C6.32263 7.41693 6.58336 7.67801 6.58333 8V8.5918L9.58724 5.58789C9.81504 5.36009 10.185 5.35943 10.4128 5.58724C10.6406 5.81505 10.6406 6.18495 10.4128 6.41276L8.99805 7.82682C8.50929 8.31558 7.94884 8.87668 7.40885 9.41667H8C8.32217 9.41667 8.58333 9.67783 8.58333 10C8.58333 10.3222 8.32217 10.5833 8 10.5833H6C5.67783 10.5833 5.41667 10.3222 5.41667 10V8Z\"\n+          fill={color}\n+        />\n+      </g>\n+      <defs>\n+        <clipPath id=\"clip0_3870_37\">\n+          <rect width=\"16\" height=\"16\" fill=\"white\" />\n+        </clipPath>\n+      </defs>\n+    </svg>\n+  );\n+};\n"
        },
        {
          "path": "packages/types/src/index.ts",
          "status": "modified",
          "diff": "Index: packages/types/src/index.ts\n===================================================================\n--- packages/types/src/index.ts\tdbc5a63 (parent)\n+++ packages/types/src/index.ts\t78fbdde (commit)\n@@ -31,8 +31,9 @@\n export * from \"./pragmatic\";\n export * from \"./project\";\n export * from \"./publish\";\n export * from \"./reaction\";\n+export * from \"./intake\";\n export * from \"./rich-filters\";\n export * from \"./search\";\n export * from \"./state\";\n export * from \"./stickies\";\n"
        },
        {
          "path": "packages/types/src/intake/index.ts",
          "status": "added",
          "diff": "Index: packages/types/src/intake/index.ts\n===================================================================\n--- packages/types/src/intake/index.ts\tdbc5a63 (parent)\n+++ packages/types/src/intake/index.ts\t78fbdde (commit)\n@@ -0,0 +1,1 @@\n+export * from \"./state\";\n"
        },
        {
          "path": "packages/types/src/intake/state.ts",
          "status": "added",
          "diff": "Index: packages/types/src/intake/state.ts\n===================================================================\n--- packages/types/src/intake/state.ts\tdbc5a63 (parent)\n+++ packages/types/src/intake/state.ts\t78fbdde (commit)\n@@ -0,0 +1,13 @@\n+export type TIntakeStateGroups = \"triage\";\n+\n+export interface IIntakeState {\n+  readonly id: string;\n+  color: string;\n+  default: boolean;\n+  description: string;\n+  group: TIntakeStateGroups;\n+  name: string;\n+  project_id: string;\n+  sequence: number;\n+  workspace_id: string;\n+}\n"
        }
      ]
    },
    {
      "id": "migrate-proxy-config",
      "sha": "f90e5538810fa316e9ee15a30ee949ec046ef3b6",
      "parentSha": "0af0e522750f68724c0e769e3fa32c1581f9e10a",
      "spec": "Objective: Migrate from the legacy Nginx-based reverse proxy to the new proxy configuration and update environment variables, Docker build contexts, and documentation accordingly.\n\nScope of changes:\n1) Environment variables\n- In .env.example:\n  - Add LISTEN_HTTP_PORT=80 and LISTEN_HTTPS_PORT=443 near other port and service configuration.\n  - Add certificate/proxy related variables: CERT_ACME_CA, TRUSTED_PROXIES, SITE_ADDRESS, CERT_EMAIL, CERT_ACME_DNS (include default empty values where shown in the diff).\n  - Update the AWS_S3 comment to reference proxy config for uploads instead of nginx.conf.\n- In apps/api/.env.example:\n  - Update the AWS_S3 comment to reference proxy config for uploads instead of nginx.conf.\n  - Remove any Nginx-specific port variables (e.g., NGINX_PORT) and ensure no residual references remain.\n\n2) CLI deployment docs and variables\n- In deployments/cli/community/README.md:\n  - Replace references to NGINX_PORT with LISTEN_HTTP_PORT in the guidance for WEB_URL and CORS_ALLOWED_ORIGINS.\n- In deployments/cli/community/variables.env:\n  - Replace LISTEN_PORT with LISTEN_HTTP_PORT and LISTEN_SSL_PORT with LISTEN_HTTPS_PORT.\n\n3) Docker build contexts and compose files\n- In deployments/cli/community/build.yml:\n  - Change the proxy build context and dockerfile to point to ../../apps/proxy and Dockerfile.ce.\n- In deployments/cli/community/docker-compose.yml:\n  - Use LISTEN_HTTP_PORT and LISTEN_HTTPS_PORT for the proxys published ports.\n  - Ensure environment mappings include CERT_EMAIL, CERT_ACME_CA, CERT_ACME_DNS, FILE_SIZE_LIMIT, BUCKET_NAME, SITE_ADDRESS per the diff pattern.\n- In docker-compose.yml (root):\n  - Change the proxy build context to ./apps/proxy and the dockerfile to Dockerfile.ce.\n  - Update the proxy ports to map ${LISTEN_HTTP_PORT}:80 and ${LISTEN_HTTPS_PORT}:443.\n  - Keep FILE_SIZE_LIMIT and BUCKET_NAME in the environment for proxy.\n- In docker-compose-local.yml:\n  - Within the commented proxy service, update the build context to ./apps/proxy and dockerfile to Dockerfile.ce and ports to use LISTEN_HTTP_PORT and LISTEN_HTTPS_PORT (both commented out as in the original file).\n\n4) Removal of legacy Nginx artifacts\n- Remove and/or mark as deleted all files under nginx/ used for the old proxy: Dockerfile, Dockerfile.dev, env.sh, nginx.conf.template, nginx.conf.dev, nginx-single-docker-image.conf. Ensure .prettierignore in nginx/ no longer references the old template.\n\nAcceptance criteria:\n- No references to NGINX_PORT, LISTEN_PORT, or LISTEN_SSL_PORT remain in the repository. All port references use LISTEN_HTTP_PORT and LISTEN_HTTPS_PORT.\n- All proxy build contexts reference apps/proxy with Dockerfile.ce.\n- Environment example files include the new certificate and proxy variables and updated comments about the proxy config.\n- CLI README and variables use LISTEN_HTTP_PORT consistently.\n- Legacy nginx/ directory is removed or contains no active configuration or Docker scripts.\n- Docker Compose files expose both HTTP and HTTPS ports using the new variables and depend on the new proxy image/context.\n",
      "prompt": "Refactor the repository to migrate from the legacy Nginx reverse proxy to the new proxy configuration. Replace old Nginx port variables with new HTTP/HTTPS listen variables, update all Docker build contexts to the new proxy location, and adjust documentation and environment examples accordingly. Ensure that no legacy Nginx references remain and that the proxy exposes both HTTP and HTTPS ports using the new environment variables. Include certificate and trusted proxy settings in the environment templates and update any comments to reference the proxy configuration rather than Nginx.",
      "supplementalFiles": [
        "deployments/aio/community/Dockerfile",
        "deployments/aio/community/README.md",
        "deployments/aio/community/start.sh"
      ],
      "fileDiffs": [
        {
          "path": ".env.example",
          "status": "modified",
          "diff": "Index: .env.example\n===================================================================\n--- .env.example\t0af0e52 (parent)\n+++ .env.example\tf90e553 (commit)\n@@ -14,14 +14,17 @@\n RABBITMQ_USER=\"plane\"\n RABBITMQ_PASSWORD=\"plane\"\n RABBITMQ_VHOST=\"plane\"\n \n+LISTEN_HTTP_PORT=80\n+LISTEN_HTTPS_PORT=443\n+\n # AWS Settings\n AWS_REGION=\"\"\n AWS_ACCESS_KEY_ID=\"access-key\"\n AWS_SECRET_ACCESS_KEY=\"secret-key\"\n AWS_S3_ENDPOINT_URL=\"http://plane-minio:9000\"\n-# Changing this requires change in the nginx.conf for uploads if using minio setup\n+# Changing this requires change in the proxy config for uploads if using minio setup\n AWS_S3_BUCKET_NAME=\"uploads\"\n # Maximum file upload limit\n FILE_SIZE_LIMIT=5242880\n \n@@ -35,11 +38,18 @@\n \n # set to 1 If using the pre-configured minio setup\n USE_MINIO=1\n \n-# Nginx Configuration\n-NGINX_PORT=80\n+# If SSL Cert to be generated, set CERT_EMAIl=\"email <EMAIL_ADDRESS>\"\n+CERT_ACME_CA=https://acme-v02.api.letsencrypt.org/directory\n+TRUSTED_PROXIES=0.0.0.0/0\n+SITE_ADDRESS=:80\n+CERT_EMAIL=\n \n+# For DNS Challenge based certificate generation, set the CERT_ACME_DNS, CERT_EMAIL\n+# CERT_ACME_DNS=\"acme_dns <CERT_DNS_PROVIDER> <CERT_DNS_PROVIDER_API_KEY>\"\n+CERT_ACME_DNS=\n+\n # Force HTTPS for handling SSL Termination\n MINIO_ENDPOINT_SSL=0\n \n # API key rate limit\n"
        },
        {
          "path": "apps/api/.env.example",
          "status": "modified",
          "diff": "Index: apps/api/.env.example\n===================================================================\n--- apps/api/.env.example\t0af0e52 (parent)\n+++ apps/api/.env.example\tf90e553 (commit)\n@@ -27,9 +27,9 @@\n AWS_REGION=\"\"\n AWS_ACCESS_KEY_ID=\"access-key\"\n AWS_SECRET_ACCESS_KEY=\"secret-key\"\n AWS_S3_ENDPOINT_URL=\"http://localhost:9000\"\n-# Changing this requires change in the nginx.conf for uploads if using minio setup\n+# Changing this requires change in the proxy config for uploads if using minio setup\n AWS_S3_BUCKET_NAME=\"uploads\"\n # Maximum file upload limit\n FILE_SIZE_LIMIT=5242880\n \n@@ -38,11 +38,10 @@\n \n # set to 1 If using the pre-configured minio setup\n USE_MINIO=0\n \n-# Nginx Configuration\n-NGINX_PORT=80\n \n+\n # Email redirections and minio domain settings\n WEB_URL=\"http://localhost:8000\"\n \n # Gunicorn Workers\n"
        },
        {
          "path": "deployments/cli/community/README.md",
          "status": "modified",
          "diff": "Index: deployments/cli/community/README.md\n===================================================================\n--- deployments/cli/community/README.md\t0af0e52 (parent)\n+++ deployments/cli/community/README.md\tf90e553 (commit)\n@@ -143,13 +143,13 @@\n \n Before proceeding, we suggest used to review `.env` file and set the values.\n Below are the most import keys you must refer to. _<span style=\"color: #fcba03\">You can use any text editor to edit this file</span>_.\n \n-> `NGINX_PORT` - This is default set to `80`. Make sure the port you choose to use is not preoccupied. (e.g `NGINX_PORT=8080`)\n+> `LISTEN_HTTP_PORT` - This is default set to `80`. Make sure the port you choose to use is not preoccupied. (e.g `LISTEN_HTTP_PORT=8080`)\n \n-> `WEB_URL` - This is default set to `http://localhost`. Change this to the FQDN you plan to use along with NGINX_PORT (eg. `https://plane.example.com:8080` or `http://[IP-ADDRESS]:8080`)\n+> `WEB_URL` - This is default set to `http://localhost`. Change this to the FQDN you plan to use along with LISTEN_HTTP_PORT (eg. `https://plane.example.com:8080` or `http://[IP-ADDRESS]:8080`)\n \n-> `CORS_ALLOWED_ORIGINS` - This is default set to `http://localhost`. Change this to the FQDN you plan to use along with NGINX_PORT (eg. `https://plane.example.com:8080` or `http://[IP-ADDRESS]:8080`)\n+> `CORS_ALLOWED_ORIGINS` - This is default set to `http://localhost`. Change this to the FQDN you plan to use along with LISTEN_HTTP_PORT (eg. `https://plane.example.com:8080` or `http://[IP-ADDRESS]:8080`)\n \n There are many other settings you can play with, but we suggest you configure `EMAIL SETTINGS` as it will enable you to invite your teammates onto the platform.\n \n ---\n"
        },
        {
          "path": "deployments/cli/community/build.yml",
          "status": "modified",
          "diff": "Index: deployments/cli/community/build.yml\n===================================================================\n--- deployments/cli/community/build.yml\t0af0e52 (parent)\n+++ deployments/cli/community/build.yml\tf90e553 (commit)\n@@ -31,6 +31,6 @@\n \n   proxy:\n     image: ${DOCKERHUB_USER:-local}/plane-proxy:${APP_RELEASE:-latest}\n     build:\n-      context: ../../nginx\n-      dockerfile: Dockerfile\n+      context: ../../apps/proxy\n+      dockerfile: Dockerfile.ce\n"
        },
        {
          "path": "deployments/cli/community/docker-compose.yml",
          "status": "modified",
          "diff": "Index: deployments/cli/community/docker-compose.yml\n===================================================================\n--- deployments/cli/community/docker-compose.yml\t0af0e52 (parent)\n+++ deployments/cli/community/docker-compose.yml\tf90e553 (commit)\n@@ -29,10 +29,10 @@\n   FILE_SIZE_LIMIT: ${FILE_SIZE_LIMIT:-5242880}\n   CERT_EMAIL: ${CERT_EMAIL}\n   CERT_ACME_CA: ${CERT_ACME_CA}\n   CERT_ACME_DNS: ${CERT_ACME_DNS}\n-  LISTEN_HTTP_PORT: ${LISTEN_PORT:-80}\n-  LISTEN_HTTPS_PORT: ${LISTEN_SSL_PORT:-443}\n+  LISTEN_HTTP_PORT: ${LISTEN_HTTP_PORT:-80}\n+  LISTEN_HTTPS_PORT: ${LISTEN_HTTPS_PORT:-443}\n   BUCKET_NAME: ${AWS_S3_BUCKET_NAME:-uploads}\n   SITE_ADDRESS: ${SITE_ADDRESS:-:80}\n \n x-mq-env: &mq-env # RabbitMQ Settings\n"
        },
        {
          "path": "deployments/cli/community/variables.env",
          "status": "modified",
          "diff": "Index: deployments/cli/community/variables.env\n===================================================================\n--- deployments/cli/community/variables.env\t0af0e52 (parent)\n+++ deployments/cli/community/variables.env\tf90e553 (commit)\n@@ -9,10 +9,11 @@\n WORKER_REPLICAS=1\n BEAT_WORKER_REPLICAS=1\n LIVE_REPLICAS=1\n \n-LISTEN_PORT=80\n-LISTEN_SSL_PORT=443\n+LISTEN_HTTP_PORT=80\n+LISTEN_HTTPS_PORT=443\n+\n WEB_URL=http://${APP_DOMAIN}\n DEBUG=0\n CORS_ALLOWED_ORIGINS=http://${APP_DOMAIN}\n API_BASE_URL=http://api:8000\n"
        },
        {
          "path": "docker-compose-local.yml",
          "status": "modified",
          "diff": "Index: docker-compose-local.yml\n===================================================================\n--- docker-compose-local.yml\t0af0e52 (parent)\n+++ docker-compose-local.yml\tf90e553 (commit)\n@@ -198,15 +198,16 @@\n       - plane-redis\n \n   # proxy:\n   #   build:\n-  #     context: ./nginx\n-  #     dockerfile: Dockerfile.dev\n+  #     context: ./apps/proxy\n+  #     dockerfile: Dockerfile.ce\n   #   restart: unless-stopped\n   #   networks:\n   #     - dev_env\n   #   ports:\n-  #     - ${NGINX_PORT}:80\n+  #     - ${LISTEN_HTTP_PORT}:80\n+  #     - ${LISTEN_HTTPS_PORT}:443\n   #   env_file:\n   #     - .env\n   #   environment:\n   #     FILE_SIZE_LIMIT: ${FILE_SIZE_LIMIT:-5242880}\n"
        },
        {
          "path": "docker-compose.yml",
          "status": "modified",
          "diff": "Index: docker-compose.yml\n===================================================================\n--- docker-compose.yml\t0af0e52 (parent)\n+++ docker-compose.yml\tf90e553 (commit)\n@@ -154,13 +154,14 @@\n   # Comment this if you already have a reverse proxy running\n   proxy:\n     container_name: proxy\n     build:\n-      context: ./nginx\n-      dockerfile: Dockerfile\n+      context: ./apps/proxy\n+      dockerfile: Dockerfile.ce\n     restart: always\n     ports:\n-      - ${NGINX_PORT}:80\n+      - ${LISTEN_HTTP_PORT}:80\n+      - ${LISTEN_HTTPS_PORT}:443\n     environment:\n       FILE_SIZE_LIMIT: ${FILE_SIZE_LIMIT:-5242880}\n       BUCKET_NAME: ${AWS_S3_BUCKET_NAME:-uploads}\n     depends_on:\n"
        },
        {
          "path": "nginx/.prettierignore",
          "status": "deleted",
          "diff": "Index: nginx/.prettierignore\n===================================================================\n--- nginx/.prettierignore\t0af0e52 (parent)\n+++ nginx/.prettierignore\tf90e553 (commit)\n@@ -1,1 +1,1 @@\n-nginx.conf.template\n\\ No newline at end of file\n+[DELETED]\n\\ No newline at end of file\n"
        },
        {
          "path": "nginx/Dockerfile",
          "status": "deleted",
          "diff": "Index: nginx/Dockerfile\n===================================================================\n--- nginx/Dockerfile\t0af0e52 (parent)\n+++ nginx/Dockerfile\tf90e553 (commit)\n@@ -1,10 +1,1 @@\n-FROM nginx:1.25.0-alpine\n-\n-RUN rm /etc/nginx/conf.d/default.conf\n-COPY nginx.conf.template /etc/nginx/nginx.conf.template\n-\n-COPY ./env.sh /docker-entrypoint.sh\n-\n-RUN chmod +x /docker-entrypoint.sh\n-# Update all environment variables\n-CMD [\"/docker-entrypoint.sh\"]\n+[DELETED]\n\\ No newline at end of file\n"
        },
        {
          "path": "nginx/Dockerfile.dev",
          "status": "deleted",
          "diff": "Index: nginx/Dockerfile.dev\n===================================================================\n--- nginx/Dockerfile.dev\t0af0e52 (parent)\n+++ nginx/Dockerfile.dev\tf90e553 (commit)\n@@ -1,10 +1,1 @@\n-FROM nginx:1.25.0-alpine\n-\n-RUN rm /etc/nginx/conf.d/default.conf\n-COPY nginx.conf.dev /etc/nginx/nginx.conf.template\n-\n-COPY ./env.sh /docker-entrypoint.sh\n-\n-RUN chmod +x /docker-entrypoint.sh\n-# Update all environment variables\n-CMD [\"/docker-entrypoint.sh\"]\n+[DELETED]\n\\ No newline at end of file\n"
        },
        {
          "path": "nginx/env.sh",
          "status": "deleted",
          "diff": "Index: nginx/env.sh\n===================================================================\n--- nginx/env.sh\t0af0e52 (parent)\n+++ nginx/env.sh\tf90e553 (commit)\n@@ -1,7 +1,1 @@\n-#!/bin/sh\n-\n-export dollar=\"$\"\n-export http_upgrade=\"http_upgrade\"\n-export scheme=\"scheme\"\n-envsubst < /etc/nginx/nginx.conf.template > /etc/nginx/nginx.conf\n-exec nginx -g 'daemon off;'\n+[DELETED]\n\\ No newline at end of file\n"
        },
        {
          "path": "nginx/nginx-single-docker-image.conf",
          "status": "deleted",
          "diff": "Index: nginx/nginx-single-docker-image.conf\n===================================================================\n--- nginx/nginx-single-docker-image.conf\t0af0e52 (parent)\n+++ nginx/nginx-single-docker-image.conf\tf90e553 (commit)\n@@ -1,30 +1,1 @@\n-upstream plane {\n-    server localhost:80;\n-}\n-\n-error_log /var/log/nginx/error.log;\n-\n-server {\n-    listen       80;\n-    root   /www/data/;\n-    access_log /var/log/nginx/access.log;\n-    location / {\n-        proxy_pass http://localhost:3000/;\n-        proxy_set_header Host $host;\n-        proxy_set_header X-Real-IP $remote_addr;\n-    }\n-    location /api/ {\n-        proxy_pass http://localhost:8000/api/;\n-        proxy_set_header Host $host;\n-        proxy_set_header X-Real-IP $remote_addr;\n-    }\n-    location /spaces/ {\n-        proxy_pass http://localhost:4000/;\n-        proxy_set_header Host $host;\n-        proxy_set_header X-Real-IP $remote_addr;\n-    }\n-    error_page   500 502 503 504  /50x.html;\n-    location = /50x.html {\n-        root   /usr/share/nginx/html;\n-    }\n-}\n+[DELETED]\n\\ No newline at end of file\n"
        },
        {
          "path": "nginx/nginx.conf.dev",
          "status": "deleted",
          "diff": "Index: nginx/nginx.conf.dev\n===================================================================\n--- nginx/nginx.conf.dev\t0af0e52 (parent)\n+++ nginx/nginx.conf.dev\tf90e553 (commit)\n@@ -1,71 +1,1 @@\n-events {\n-}\n-\n-http {\n-    sendfile on;\n-\n-    server {\n-        listen 80;\n-        root /www/data/;\n-        access_log /var/log/nginx/access.log;\n-\n-        client_max_body_size ${FILE_SIZE_LIMIT};\n-\n-        add_header X-Content-Type-Options    \"nosniff\" always;\n-        add_header Referrer-Policy           \"no-referrer-when-downgrade\" always;\n-        add_header Permissions-Policy        \"interest-cohort=()\" always;\n-        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;\n-        add_header X-Forwarded-Proto         \"${dollar}scheme\";\n-        add_header X-Forwarded-Host          \"${dollar}host\";\n-        add_header X-Forwarded-For           \"${dollar}proxy_add_x_forwarded_for\";\n-        add_header X-Real-IP                 \"${dollar}remote_addr\";\n-\n-        location / {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://web:3000/;\n-        }\n-\n-        location /god-mode/ {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://admin:3001/god-mode/;\n-        }\n-\n-        location /api/ {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://api:8000/api/;\n-        }\n-\n-        location /auth/ {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://api:8000/auth/;\n-        }\n-\n-        location /spaces/ {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://space:3002/spaces/;\n-        }\n-\n-        location /${BUCKET_NAME} {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://plane-minio:9000/${BUCKET_NAME};\n-        }\n-    }\n-}\n+[DELETED]\n\\ No newline at end of file\n"
        },
        {
          "path": "nginx/nginx.conf.template",
          "status": "deleted",
          "diff": "Index: nginx/nginx.conf.template\n===================================================================\n--- nginx/nginx.conf.template\t0af0e52 (parent)\n+++ nginx/nginx.conf.template\tf90e553 (commit)\n@@ -1,79 +1,1 @@\n-events {\n-}\n-\n-http {\n-    sendfile on;\n-\n-    server {\n-        listen 80;\n-        root /www/data/;\n-        access_log /var/log/nginx/access.log;\n-\n-        client_max_body_size ${FILE_SIZE_LIMIT};\n-\n-        add_header X-Content-Type-Options    \"nosniff\" always;\n-        add_header Referrer-Policy           \"no-referrer-when-downgrade\" always;\n-        add_header Permissions-Policy        \"interest-cohort=()\" always;\n-        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;\n-        add_header X-Forwarded-Proto         \"${dollar}scheme\";\n-        add_header X-Forwarded-Host          \"${dollar}host\";\n-        add_header X-Forwarded-For           \"${dollar}proxy_add_x_forwarded_for\";\n-        add_header X-Real-IP                 \"${dollar}remote_addr\";\n-\n-        location / {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://web:3000/;\n-        }\n-\n-        location /api/ {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://api:8000/api/;\n-        }\n-\n-        location /auth/ {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://api:8000/auth/;\n-        }\n-\n-        location /god-mode/ {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://admin:3000/god-mode/;\n-        }\n-\n-        location /live/ {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://live:3000/live/;\n-        }\n-\n-        location /spaces/ {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://space:3000/spaces/;\n-        }\n-\n-        location /${BUCKET_NAME} {\n-            proxy_http_version 1.1;\n-            proxy_set_header Upgrade ${dollar}http_upgrade;\n-            proxy_set_header Connection \"upgrade\";\n-            proxy_set_header Host ${dollar}http_host;\n-            proxy_pass http://plane-minio:9000/${BUCKET_NAME};\n-        }\n-    }\n-}\n+[DELETED]\n\\ No newline at end of file\n"
        }
      ]
    },
    {
      "id": "optimize-issue-listing",
      "sha": "b8043f92b13d0b14747baea8bc7411d6643b9acf",
      "parentSha": "0e91feacc3b0ea4c2b2bf1c4c3795b2708d1620a",
      "spec": "Implement performant issue list retrieval, ordering, and pagination across workspace and project views by making the following changes:\n\n1) Add a lightweight issue list serializer for project views\n- File: apiserver/plane/app/serializers/issue.py\n- Create IssueListDetailSerializer (DRF serializers.Serializer) that:\n  - Accepts expand and fields in __init__ and stores them on the instance.\n  - Returns a dict with basic fields: id, name, state_id, sort_order, completed_at, estimate_point, priority, start_date, target_date, sequence_id, project_id, parent_id, created_at, updated_at, created_by, updated_by, is_draft, archived_at.\n  - Returns computed fields: cycle_id (pre-annotated in queryset), module_ids, label_ids, assignee_ids (read from prefetched relations issue_module, label_issue, issue_assignee), sub_issues_count, attachment_count, link_count.\n  - Supports expand options issue_relation and issue_related by including arrays of related issues with id, project_id, sequence_id, name, relation_type, state_id, priority, created_by, created_at, updated_at, updated_by; skip any null related issues.\n- Do not rely on ArrayAgg; expect relations to be prefetched.\n\n2) Add a lightweight issue list serializer for workspace views\n- File: apiserver/plane/app/serializers/view.py\n- Create ViewIssueListSerializer (DRF serializers.Serializer) that returns a minimal issue representation:\n  - Fields: id, name, state_id, sort_order, completed_at, estimate_point, priority, start_date, target_date, sequence_id, project_id, parent_id, cycle_id (pre-annotated in queryset), sub_issues_count, created_at, updated_at, created_by, updated_by, attachment_count, link_count, is_draft, archived_at.\n  - Include state__group as instance.state.group if instance.state is present, else None.\n  - Include assignee_ids, label_ids, module_ids computed from prefetched issue_assignee, label_issue, issue_module.\n\n3) Export new serializers\n- File: apiserver/plane/app/serializers/__init__.py\n- Export IssueListDetailSerializer from .issue and ViewIssueListSerializer from .view alongside existing serializers.\n\n4) Optimize IssueDetailEndpoint to use permission subquery, prefetch relations, and new serializer\n- File: apiserver/plane/app/views/issue/base.py\n- Replace the prior project_member_subquery and ArrayAgg annotations with:\n  - A permission_subquery on Issue that enforces:\n    - Members with role > GUEST can access all issues in the project.\n    - GUEST members can access all issues only if guest_view_all_features is True; otherwise only issues created_by the current user.\n  - Main queryset filtered by Exists(permission_subquery).\n  - Prefetch relations for issue_assignee (IssueAssignee), label_issue (IssueLabel), and issue_module (ModuleIssue) using Prefetch.\n  - Annotate cycle_id via Subquery(CycleIssue), plus sub_issues_count, attachment_count, link_count as already established in the view.\n  - Conditionally prefetch issue_relation with related_issue and issue_related with issue only if requested in expand.\n  - Use IssueListDetailSerializer in pagination on_results, passing fields and expand through.\n\n5) Optimize workspace view issue list to prefetch and paginate efficiently\n- File: apiserver/plane/app/views/view/base.py\n- Update imports to remove unused Postgres-specific array aggregation utilities and include Prefetch and the new serializers.\n- In WorkspaceViewIssuesViewSet:\n  - Add a helper method _get_project_permission_filters that returns a Q object enforcing:\n    - For role=GUEST (role=5): show all if guest_view_all_features=True; otherwise only created_by current user.\n    - For roles > GUEST (role > 5): show all issues.\n    - All conditions must also match current users active project membership.\n  - In get_queryset(), select_related('state') and prefetch issue_assignee (IssueAssignee), label_issue (IssueLabel), issue_module (ModuleIssue). Do not use ArrayAgg annotations.\n  - Annotate cycle_id via Subquery(CycleIssue) and maintain existing counts (sub_issues_count, attachment_count, link_count) as previously done.\n  - In the list handler, apply issue_filters; then apply the permission filters from _get_project_permission_filters to both the main issue queryset and to a separate total_issue_count queryset (filtered by workspace and the same filters); call order_issue_queryset; paginate with ViewIssueListSerializer and pass total_count_queryset to the paginator.\n\n6) Ensure stable ordering behavior with a created_at tie-breaker\n- File: apiserver/plane/utils/order_queryset.py\n- When ordering by priority group, by state order, or by aggregate min/max values, always append '-created_at' as a secondary ordering key for deterministic results.\n- If ordering directly by created_at, do not add an extra created_at tie-breaker; otherwise for all other fields, append '-created_at' as a secondary sort key.\n\n7) Update offset paginator to support total count queryset and correct offset math\n- File: apiserver/plane/utils/paginator.py\n- OffsetPaginator: accept total_count_queryset in the constructor and store it.\n- In get_result():\n  - Compute offset as page * limit, independent of cursor.value.\n  - Use stop = offset + limit + 1.\n  - Only slice from the end when navigating backwards (cursor.is_prev true) and the page size differs.\n  - Set total_count from total_count_queryset.count() if provided; otherwise fall back to results.count().\n  - Set has_next based on whether len(results) > limit.\n  - Use total_count for overall count; compute max_hits from this count.\n- GroupedOffsetPaginator and SubGroupedOffsetPaginator: accept and forward total_count_queryset to the base class.\n- BasePaginator.paginate: accept total_count_queryset and forward it to the paginator instance, in addition to existing args.\n\n8) Adjust imports\n- Ensure all modified modules update imports to remove unused Postgres ArrayAgg/ArrayField/Coalesce utilities and add Prefetch and required model classes (IssueAssignee, IssueLabel, ModuleIssue, IssueRelation) as used.\n\n9) Behavior expectations\n- Workspace and project issue list endpoints must return consistent list payloads using the new serializers.\n- Expanded fields issue_relation and issue_related are only included when requested via expand, and null related issues are skipped.\n- Ordering by priority, state, or numeric aggregations is deterministic due to '-created_at' tie-breaker; raw created_at ordering remains unchanged.\n- Pagination must report counts efficiently using a separate total_count queryset and use correct offset math based on limit.",
      "prompt": "Optimize issue listing performance and consistency across workspace and project views.\n\n- Add lightweight serializers that build assignee, label, and module ID arrays from prefetched relations. Include a variant for project issue details that supports optional relation expansion.\n- Refactor the issue endpoints to replace heavy aggregations with prefetch, apply unified permission filters for guests and members, and use the new serializers for list responses.\n- Ensure list ordering is deterministic with created_at as a tie-breaker except when directly ordering by created_at.\n- Improve pagination to accept an optional total count queryset, compute offsets using the limit, and correctly determine if a next page exists.\n- Update imports accordingly and keep the responses backward compatible where possible.\n\nFocus on correctness, security of permission filtering, and measurable reductions in query complexity.",
      "supplementalFiles": [
        "apiserver/plane/utils/issue_filters.py",
        "apiserver/plane/utils/grouper.py",
        "apiserver/plane/utils/global_paginator.py"
      ],
      "fileDiffs": [
        {
          "path": "apiserver/plane/app/serializers/__init__.py",
          "status": "modified",
          "diff": "Index: apiserver/plane/app/serializers/__init__.py\n===================================================================\n--- apiserver/plane/app/serializers/__init__.py\t0e91fea (parent)\n+++ apiserver/plane/app/serializers/__init__.py\tb8043f9 (commit)\n@@ -38,9 +38,9 @@\n     ProjectPublicMemberSerializer,\n     ProjectMemberRoleSerializer,\n )\n from .state import StateSerializer, StateLiteSerializer\n-from .view import IssueViewSerializer\n+from .view import IssueViewSerializer, ViewIssueListSerializer\n from .cycle import (\n     CycleSerializer,\n     CycleIssueSerializer,\n     CycleWriteSerializer,\n@@ -73,8 +73,9 @@\n     IssueAttachmentLiteSerializer,\n     IssueLinkLiteSerializer,\n     IssueVersionDetailSerializer,\n     IssueDescriptionVersionDetailSerializer,\n+    IssueListDetailSerializer,\n )\n \n from .module import (\n     ModuleDetailSerializer,\n"
        },
        {
          "path": "apiserver/plane/app/serializers/issue.py",
          "status": "modified",
          "diff": "Index: apiserver/plane/app/serializers/issue.py\n===================================================================\n--- apiserver/plane/app/serializers/issue.py\t0e91fea (parent)\n+++ apiserver/plane/app/serializers/issue.py\tb8043f9 (commit)\n@@ -724,8 +724,112 @@\n         ]\n         read_only_fields = fields\n \n \n+class IssueListDetailSerializer(serializers.Serializer):\n+\n+    def __init__(self, *args, **kwargs):\n+        # Extract expand parameter and store it as instance variable\n+        self.expand = kwargs.pop(\"expand\", []) or []\n+        # Extract fields parameter and store it as instance variable\n+        self.fields = kwargs.pop(\"fields\", []) or []\n+        super().__init__(*args, **kwargs)\n+\n+    def get_module_ids(self, obj):\n+        return [module.module_id for module in obj.issue_module.all()]\n+\n+    def get_label_ids(self, obj):\n+        return [label.label_id for label in obj.label_issue.all()]\n+\n+    def get_assignee_ids(self, obj):\n+        return [assignee.assignee_id for assignee in obj.issue_assignee.all()]\n+\n+    def to_representation(self, instance):\n+        data = {\n+            # Basic fields\n+            \"id\": instance.id,\n+            \"name\": instance.name,\n+            \"state_id\": instance.state_id,\n+            \"sort_order\": instance.sort_order,\n+            \"completed_at\": instance.completed_at,\n+            \"estimate_point\": instance.estimate_point_id,\n+            \"priority\": instance.priority,\n+            \"start_date\": instance.start_date,\n+            \"target_date\": instance.target_date,\n+            \"sequence_id\": instance.sequence_id,\n+            \"project_id\": instance.project_id,\n+            \"parent_id\": instance.parent_id,\n+            \"created_at\": instance.created_at,\n+            \"updated_at\": instance.updated_at,\n+            \"created_by\": instance.created_by_id,\n+            \"updated_by\": instance.updated_by_id,\n+            \"is_draft\": instance.is_draft,\n+            \"archived_at\": instance.archived_at,\n+            # Computed fields\n+            \"cycle_id\": instance.cycle_id,\n+            \"module_ids\": self.get_module_ids(instance),\n+            \"label_ids\": self.get_label_ids(instance),\n+            \"assignee_ids\": self.get_assignee_ids(instance),\n+            \"sub_issues_count\": instance.sub_issues_count,\n+            \"attachment_count\": instance.attachment_count,\n+            \"link_count\": instance.link_count,\n+        }\n+\n+        # Handle expanded fields only when requested - using direct field access\n+        if self.expand:\n+            if \"issue_relation\" in self.expand:\n+                relations = []\n+                for relation in instance.issue_relation.all():\n+                    related_issue = relation.related_issue\n+                    # If the related issue is deleted, skip it\n+                    if not related_issue:\n+                        continue\n+                    # Add the related issue to the relations list\n+                    relations.append(\n+                        {\n+                            \"id\": related_issue.id,\n+                            \"project_id\": related_issue.project_id,\n+                            \"sequence_id\": related_issue.sequence_id,\n+                            \"name\": related_issue.name,\n+                            \"relation_type\": relation.relation_type,\n+                            \"state_id\": related_issue.state_id,\n+                            \"priority\": related_issue.priority,\n+                            \"created_by\": related_issue.created_by_id,\n+                            \"created_at\": related_issue.created_at,\n+                            \"updated_at\": related_issue.updated_at,\n+                            \"updated_by\": related_issue.updated_by_id,\n+                        }\n+                    )\n+                data[\"issue_relation\"] = relations\n+\n+            if \"issue_related\" in self.expand:\n+                related = []\n+                for relation in instance.issue_related.all():\n+                    issue = relation.issue\n+                    # If the related issue is deleted, skip it\n+                    if not issue:\n+                        continue\n+                    # Add the related issue to the related list\n+                    related.append(\n+                        {\n+                            \"id\": issue.id,\n+                            \"project_id\": issue.project_id,\n+                            \"sequence_id\": issue.sequence_id,\n+                            \"name\": issue.name,\n+                            \"relation_type\": relation.relation_type,\n+                            \"state_id\": issue.state_id,\n+                            \"priority\": issue.priority,\n+                            \"created_by\": issue.created_by_id,\n+                            \"created_at\": issue.created_at,\n+                            \"updated_at\": issue.updated_at,\n+                            \"updated_by\": issue.updated_by_id,\n+                        }\n+                    )\n+                data[\"issue_related\"] = related\n+\n+        return data\n+\n+\n class IssueLiteSerializer(DynamicBaseSerializer):\n     class Meta:\n         model = Issue\n         fields = [\"id\", \"sequence_id\", \"project_id\"]\n"
        },
        {
          "path": "apiserver/plane/app/serializers/view.py",
          "status": "modified",
          "diff": "Index: apiserver/plane/app/serializers/view.py\n===================================================================\n--- apiserver/plane/app/serializers/view.py\t0e91fea (parent)\n+++ apiserver/plane/app/serializers/view.py\tb8043f9 (commit)\n@@ -6,8 +6,51 @@\n from plane.db.models import IssueView\n from plane.utils.issue_filters import issue_filters\n \n \n+class ViewIssueListSerializer(serializers.Serializer):\n+\n+    def get_assignee_ids(self, instance):\n+        return [assignee.assignee_id for assignee in instance.issue_assignee.all()]\n+\n+    def get_label_ids(self, instance):\n+        return [label.label_id for label in instance.label_issue.all()]\n+\n+    def get_module_ids(self, instance):\n+        return [module.module_id for module in instance.issue_module.all()]\n+\n+    def to_representation(self, instance):\n+        data = {\n+            \"id\": instance.id,\n+            \"name\": instance.name,\n+            \"state_id\": instance.state_id,\n+            \"sort_order\": instance.sort_order,\n+            \"completed_at\": instance.completed_at,\n+            \"estimate_point\": instance.estimate_point_id,\n+            \"priority\": instance.priority,\n+            \"start_date\": instance.start_date,\n+            \"target_date\": instance.target_date,\n+            \"sequence_id\": instance.sequence_id,\n+            \"project_id\": instance.project_id,\n+            \"parent_id\": instance.parent_id,\n+            \"cycle_id\": instance.cycle_id,\n+            \"sub_issues_count\": instance.sub_issues_count,\n+            \"created_at\": instance.created_at,\n+            \"updated_at\": instance.updated_at,\n+            \"created_by\": instance.created_by_id,\n+            \"updated_by\": instance.updated_by_id,\n+            \"attachment_count\": instance.attachment_count,\n+            \"link_count\": instance.link_count,\n+            \"is_draft\": instance.is_draft,\n+            \"archived_at\": instance.archived_at,\n+            \"state__group\": instance.state.group if instance.state else None,\n+            \"assignee_ids\": self.get_assignee_ids(instance),\n+            \"label_ids\": self.get_label_ids(instance),\n+            \"module_ids\": self.get_module_ids(instance),\n+        }\n+        return data\n+\n+\n class IssueViewSerializer(DynamicBaseSerializer):\n     is_favorite = serializers.BooleanField(read_only=True)\n \n     class Meta:\n"
        },
        {
          "path": "apiserver/plane/app/views/issue/base.py",
          "status": "modified",
          "diff": "Index: apiserver/plane/app/views/issue/base.py\n===================================================================\n--- apiserver/plane/app/views/issue/base.py\t0e91fea (parent)\n+++ apiserver/plane/app/views/issue/base.py\tb8043f9 (commit)\n@@ -31,8 +31,9 @@\n     IssueCreateSerializer,\n     IssueDetailSerializer,\n     IssueUserPropertySerializer,\n     IssueSerializer,\n+    IssueListDetailSerializer,\n )\n from plane.bgtasks.issue_activities_task import issue_activity\n from plane.db.models import (\n     Issue,\n@@ -45,8 +46,11 @@\n     ProjectMember,\n     CycleIssue,\n     UserRecentVisit,\n     ModuleIssue,\n+    IssueRelation,\n+    IssueAssignee,\n+    IssueLabel,\n )\n from plane.utils.grouper import (\n     issue_group_values,\n     issue_on_results,\n@@ -946,78 +950,64 @@\n         filters = issue_filters(request.query_params, \"GET\")\n \n         # check for the project member role, if the role is 5 then check for the guest_view_all_features\n         #  if it is true then show all the issues else show only the issues created by the user\n-        project_member_subquery = ProjectMember.objects.filter(\n-            project_id=OuterRef(\"project_id\"),\n-            member=self.request.user,\n-            is_active=True,\n-        ).filter(\n-            Q(role__gt=ROLE.GUEST.value) \n-            | Q(\n-                role=ROLE.GUEST.value, project__guest_view_all_features=True\n+        permission_subquery = (\n+            Issue.issue_objects.filter(\n+                workspace__slug=slug, project_id=project_id, id=OuterRef(\"id\")\n             )\n-        )\n-\n-        # Main issue query\n-        issue = (\n-            Issue.issue_objects.filter(workspace__slug=slug, project_id=project_id)\n             .filter(\n-                Q(Exists(project_member_subquery))\n+                Q(\n+                    project__project_projectmember__member=self.request.user,\n+                    project__project_projectmember__is_active=True,\n+                    project__project_projectmember__role__gt=ROLE.GUEST.value,\n+                )\n                 | Q(\n                     project__project_projectmember__member=self.request.user,\n                     project__project_projectmember__is_active=True,\n                     project__project_projectmember__role=ROLE.GUEST.value,\n+                    project__guest_view_all_features=True,\n+                )\n+                | Q(\n+                    project__project_projectmember__member=self.request.user,\n+                    project__project_projectmember__is_active=True,\n+                    project__project_projectmember__role=ROLE.GUEST.value,\n                     project__guest_view_all_features=False,\n                     created_by=self.request.user,\n                 )\n             )\n-            .prefetch_related(\"assignees\", \"labels\", \"issue_module__module\")\n+            .values(\"id\")\n+        )\n+        # Main issue query\n+        issue = (\n+            Issue.issue_objects.filter(workspace__slug=slug, project_id=project_id)\n+            .filter(Exists(permission_subquery))\n+            .prefetch_related(\n+                Prefetch(\n+                    \"issue_assignee\",\n+                    queryset=IssueAssignee.objects.all(),\n+                )\n+            )\n+            .prefetch_related(\n+                Prefetch(\n+                    \"label_issue\",\n+                    queryset=IssueLabel.objects.all(),\n+                )\n+            )\n+            .prefetch_related(\n+                Prefetch(\n+                    \"issue_module\",\n+                    queryset=ModuleIssue.objects.all(),\n+                )\n+            )\n             .annotate(\n                 cycle_id=Subquery(\n                     CycleIssue.objects.filter(\n                         issue=OuterRef(\"id\"), deleted_at__isnull=True\n                     ).values(\"cycle_id\")[:1]\n                 )\n             )\n             .annotate(\n-                label_ids=Coalesce(\n-                    ArrayAgg(\n-                        \"labels__id\",\n-                        distinct=True,\n-                        filter=Q(\n-                            ~Q(labels__id__isnull=True)\n-                            & Q(label_issue__deleted_at__isnull=True)\n-                        ),\n-                    ),\n-                    Value([], output_field=ArrayField(UUIDField())),\n-                ),\n-                assignee_ids=Coalesce(\n-                    ArrayAgg(\n-                        \"assignees__id\",\n-                        distinct=True,\n-                        filter=Q(\n-                            ~Q(assignees__id__isnull=True)\n-                            & Q(assignees__member_project__is_active=True)\n-                            & Q(issue_assignee__deleted_at__isnull=True)\n-                        ),\n-                    ),\n-                    Value([], output_field=ArrayField(UUIDField())),\n-                ),\n-                module_ids=Coalesce(\n-                    ArrayAgg(\n-                        \"issue_module__module_id\",\n-                        distinct=True,\n-                        filter=Q(\n-                            ~Q(issue_module__module_id__isnull=True)\n-                            & Q(issue_module__module__archived_at__isnull=True)\n-                            & Q(issue_module__deleted_at__isnull=True)\n-                        ),\n-                    ),\n-                    Value([], output_field=ArrayField(UUIDField())),\n-                ),\n-            )\n-            .annotate(\n                 link_count=IssueLink.objects.filter(issue=OuterRef(\"id\"))\n                 .order_by()\n                 .annotate(count=Func(F(\"id\"), function=\"Count\"))\n                 .values(\"count\")\n@@ -1038,8 +1028,25 @@\n                 .values(\"count\")\n             )\n         )\n \n+        # Add additional prefetch based on expand parameter\n+        if self.expand:\n+            if \"issue_relation\" in self.expand:\n+                issue = issue.prefetch_related(\n+                    Prefetch(\n+                        \"issue_relation\",\n+                        queryset=IssueRelation.objects.select_related(\"related_issue\"),\n+                    )\n+                )\n+            if \"issue_related\" in self.expand:\n+                issue = issue.prefetch_related(\n+                    Prefetch(\n+                        \"issue_related\",\n+                        queryset=IssueRelation.objects.select_related(\"issue\"),\n+                    )\n+                )\n+\n         issue = issue.filter(**filters)\n         order_by_param = request.GET.get(\"order_by\", \"-created_at\")\n         # Issue queryset\n         issue, order_by_param = order_issue_queryset(\n@@ -1048,9 +1055,9 @@\n         return self.paginate(\n             request=request,\n             order_by=order_by_param,\n             queryset=(issue),\n-            on_results=lambda issue: IssueSerializer(\n+            on_results=lambda issue: IssueListDetailSerializer(\n                 issue, many=True, fields=self.fields, expand=self.expand\n             ).data,\n         )\n \n"
        },
        {
          "path": "apiserver/plane/app/views/view/base.py",
          "status": "modified",
          "diff": "Index: apiserver/plane/app/views/view/base.py\n===================================================================\n--- apiserver/plane/app/views/view/base.py\t0e91fea (parent)\n+++ apiserver/plane/app/views/view/base.py\tb8043f9 (commit)\n@@ -1,9 +1,14 @@\n # Django imports\n-from django.contrib.postgres.aggregates import ArrayAgg\n-from django.contrib.postgres.fields import ArrayField\n-from django.db.models import Exists, F, Func, OuterRef, Q, UUIDField, Value, Subquery\n-from django.db.models.functions import Coalesce\n+from django.db.models import (\n+    Exists,\n+    F,\n+    Func,\n+    OuterRef,\n+    Q,\n+    Subquery,\n+    Prefetch,\n+)\n from django.utils.decorators import method_decorator\n from django.views.decorators.gzip import gzip_page\n from django.db import transaction\n \n@@ -12,9 +17,9 @@\n from rest_framework.response import Response\n \n # Module imports\n from plane.app.permissions import allow_permission, ROLE\n-from plane.app.serializers import IssueViewSerializer\n+from plane.app.serializers import IssueViewSerializer, ViewIssueListSerializer\n from plane.db.models import (\n     Issue,\n     FileAsset,\n     IssueLink,\n@@ -24,17 +29,14 @@\n     ProjectMember,\n     Project,\n     CycleIssue,\n     UserRecentVisit,\n+    IssueAssignee,\n+    IssueLabel,\n+    ModuleIssue,\n )\n-from plane.utils.grouper import (\n-    issue_group_values,\n-    issue_on_results,\n-    issue_queryset_grouper,\n-)\n from plane.utils.issue_filters import issue_filters\n from plane.utils.order_queryset import order_issue_queryset\n-from plane.utils.paginator import GroupedOffsetPaginator, SubGroupedOffsetPaginator\n from plane.bgtasks.recent_visited_task import recent_visited_task\n from .. import BaseViewSet\n from plane.db.models import UserFavorite\n \n@@ -142,8 +144,30 @@\n         return Response(status=status.HTTP_204_NO_CONTENT)\n \n \n class WorkspaceViewIssuesViewSet(BaseViewSet):\n+    def _get_project_permission_filters(self):\n+        \"\"\"\n+        Get common project permission filters for guest users and role-based access control.\n+        Returns Q object for filtering issues based on user role and project settings.\n+        \"\"\"\n+        return Q(\n+            Q(\n+                project__project_projectmember__role=5,\n+                project__guest_view_all_features=True,\n+            )\n+            | Q(\n+                project__project_projectmember__role=5,\n+                project__guest_view_all_features=False,\n+                created_by=self.request.user,\n+            )\n+            |\n+            # For other roles (role > 5), show all issues\n+            Q(project__project_projectmember__role__gt=5),\n+            project__project_projectmember__member=self.request.user,\n+            project__project_projectmember__is_active=True,\n+        )\n+\n     def get_queryset(self):\n         return (\n             Issue.issue_objects.annotate(\n                 sub_issues_count=Issue.issue_objects.filter(parent=OuterRef(\"id\"))\n@@ -151,14 +175,27 @@\n                 .annotate(count=Func(F(\"id\"), function=\"Count\"))\n                 .values(\"count\")\n             )\n             .filter(workspace__slug=self.kwargs.get(\"slug\"))\n-            .filter(\n-                project__project_projectmember__member=self.request.user,\n-                project__project_projectmember__is_active=True,\n+            .select_related(\"state\")\n+            .prefetch_related(\n+                Prefetch(\n+                    \"issue_assignee\",\n+                    queryset=IssueAssignee.objects.all(),\n+                )\n             )\n-            .select_related(\"workspace\", \"project\", \"state\", \"parent\")\n-            .prefetch_related(\"assignees\", \"labels\", \"issue_module__module\")\n+            .prefetch_related(\n+                Prefetch(\n+                    \"label_issue\",\n+                    queryset=IssueLabel.objects.all(),\n+                )\n+            )\n+            .prefetch_related(\n+                Prefetch(\n+                    \"issue_module\",\n+                    queryset=ModuleIssue.objects.all(),\n+                )\n+            )\n             .annotate(\n                 cycle_id=Subquery(\n                     CycleIssue.objects.filter(\n                         issue=OuterRef(\"id\"), deleted_at__isnull=True\n@@ -185,45 +222,8 @@\n                 .order_by()\n                 .annotate(count=Func(F(\"id\"), function=\"Count\"))\n                 .values(\"count\")\n             )\n-            .annotate(\n-                label_ids=Coalesce(\n-                    ArrayAgg(\n-                        \"labels__id\",\n-                        distinct=True,\n-                        filter=Q(\n-                            ~Q(labels__id__isnull=True)\n-                            & Q(label_issue__deleted_at__isnull=True)\n-                        ),\n-                    ),\n-                    Value([], output_field=ArrayField(UUIDField())),\n-                ),\n-                assignee_ids=Coalesce(\n-                    ArrayAgg(\n-                        \"assignees__id\",\n-                        distinct=True,\n-                        filter=Q(\n-                            ~Q(assignees__id__isnull=True)\n-                            & Q(assignees__member_project__is_active=True)\n-                            & Q(issue_assignee__deleted_at__isnull=True)\n-                        ),\n-                    ),\n-                    Value([], output_field=ArrayField(UUIDField())),\n-                ),\n-                module_ids=Coalesce(\n-                    ArrayAgg(\n-                        \"issue_module__module_id\",\n-                        distinct=True,\n-                        filter=Q(\n-                            ~Q(issue_module__module_id__isnull=True)\n-                            & Q(issue_module__module__archived_at__isnull=True)\n-                            & Q(issue_module__deleted_at__isnull=True)\n-                        ),\n-                    ),\n-                    Value([], output_field=ArrayField(UUIDField())),\n-                ),\n-            )\n         )\n \n     @method_decorator(gzip_page)\n     @allow_permission(\n@@ -232,129 +232,39 @@\n     def list(self, request, slug):\n         filters = issue_filters(request.query_params, \"GET\")\n         order_by_param = request.GET.get(\"order_by\", \"-created_at\")\n \n-        issue_queryset = (\n-            self.get_queryset()\n-            .filter(**filters)\n-            .annotate(\n-                cycle_id=Subquery(\n-                    CycleIssue.objects.filter(\n-                        issue=OuterRef(\"id\"), deleted_at__isnull=True\n-                    ).values(\"cycle_id\")[:1]\n-                )\n-            )\n-        )\n+        issue_queryset = self.get_queryset().filter(**filters)\n \n-        # check for the project member role, if the role is 5 then check for the guest_view_all_features if it is true then show all the issues else show only the issues created by the user\n+        # Get common project permission filters\n+        permission_filters = self._get_project_permission_filters()\n \n-        issue_queryset = issue_queryset.filter(\n-            Q(\n-                project__project_projectmember__role=5,\n-                project__guest_view_all_features=True,\n-            )\n-            | Q(\n-                project__project_projectmember__role=5,\n-                project__guest_view_all_features=False,\n-                created_by=self.request.user,\n-            )\n-            |\n-            # For other roles (role < 5), show all issues\n-            Q(project__project_projectmember__role__gt=5),\n-            project__project_projectmember__member=self.request.user,\n-            project__project_projectmember__is_active=True,\n+        # Base query for the counts\n+        total_issue_count = (\n+            Issue.issue_objects.filter(**filters)\n+            .filter(workspace__slug=slug)\n+            .filter(permission_filters)\n+            .only(\"id\")\n         )\n \n+        # Apply project permission filters to the issue queryset\n+        issue_queryset = issue_queryset.filter(permission_filters)\n+\n         # Issue queryset\n         issue_queryset, order_by_param = order_issue_queryset(\n             issue_queryset=issue_queryset, order_by_param=order_by_param\n         )\n \n-        # Group by\n-        group_by = request.GET.get(\"group_by\", False)\n-        sub_group_by = request.GET.get(\"sub_group_by\", False)\n-\n-        # issue queryset\n-        issue_queryset = issue_queryset_grouper(\n-            queryset=issue_queryset, group_by=group_by, sub_group_by=sub_group_by\n+        # List Paginate\n+        return self.paginate(\n+            order_by=order_by_param,\n+            request=request,\n+            queryset=issue_queryset,\n+            on_results=lambda issues: ViewIssueListSerializer(issues, many=True).data,\n+            total_count_queryset=total_issue_count,\n         )\n \n-        if group_by:\n-            # Check group and sub group value paginate\n-            if sub_group_by:\n-                if group_by == sub_group_by:\n-                    return Response(\n-                        {\n-                            \"error\": \"Group by and sub group by cannot have same parameters\"\n-                        },\n-                        status=status.HTTP_400_BAD_REQUEST,\n-                    )\n-                else:\n-                    # group and sub group pagination\n-                    return self.paginate(\n-                        request=request,\n-                        order_by=order_by_param,\n-                        queryset=issue_queryset,\n-                        on_results=lambda issues: issue_on_results(\n-                            group_by=group_by, issues=issues, sub_group_by=sub_group_by\n-                        ),\n-                        paginator_cls=SubGroupedOffsetPaginator,\n-                        group_by_fields=issue_group_values(\n-                            field=group_by, slug=slug, project_id=None, filters=filters\n-                        ),\n-                        sub_group_by_fields=issue_group_values(\n-                            field=sub_group_by,\n-                            slug=slug,\n-                            project_id=None,\n-                            filters=filters,\n-                        ),\n-                        group_by_field_name=group_by,\n-                        sub_group_by_field_name=sub_group_by,\n-                        count_filter=Q(\n-                            Q(issue_intake__status=1)\n-                            | Q(issue_intake__status=-1)\n-                            | Q(issue_intake__status=2)\n-                            | Q(issue_intake__isnull=True),\n-                            archived_at__isnull=True,\n-                            is_draft=False,\n-                        ),\n-                    )\n-            # Group Paginate\n-            else:\n-                # Group paginate\n-                return self.paginate(\n-                    request=request,\n-                    order_by=order_by_param,\n-                    queryset=issue_queryset,\n-                    on_results=lambda issues: issue_on_results(\n-                        group_by=group_by, issues=issues, sub_group_by=sub_group_by\n-                    ),\n-                    paginator_cls=GroupedOffsetPaginator,\n-                    group_by_fields=issue_group_values(\n-                        field=group_by, slug=slug, project_id=None, filters=filters\n-                    ),\n-                    group_by_field_name=group_by,\n-                    count_filter=Q(\n-                        Q(issue_intake__status=1)\n-                        | Q(issue_intake__status=-1)\n-                        | Q(issue_intake__status=2)\n-                        | Q(issue_intake__isnull=True),\n-                        archived_at__isnull=True,\n-                        is_draft=False,\n-                    ),\n-                )\n-        else:\n-            # List Paginate\n-            return self.paginate(\n-                order_by=order_by_param,\n-                request=request,\n-                queryset=issue_queryset,\n-                on_results=lambda issues: issue_on_results(\n-                    group_by=group_by, issues=issues, sub_group_by=sub_group_by\n-                ),\n-            )\n \n-\n class IssueViewViewSet(BaseViewSet):\n     serializer_class = IssueViewSerializer\n     model = IssueView\n \n"
        },
        {
          "path": "apiserver/plane/utils/order_queryset.py",
          "status": "modified",
          "diff": "Index: apiserver/plane/utils/order_queryset.py\n===================================================================\n--- apiserver/plane/utils/order_queryset.py\t0e91fea (parent)\n+++ apiserver/plane/utils/order_queryset.py\tb8043f9 (commit)\n@@ -15,9 +15,9 @@\n                     for i, p in enumerate(PRIORITY_ORDER)\n                 ],\n                 output_field=CharField(),\n             )\n-        ).order_by(\"priority_order\")\n+        ).order_by(\"priority_order\", \"-created_at\")\n         order_by_param = (\n             \"priority_order\" if order_by_param.startswith(\"-\") else \"-priority_order\"\n         )\n     # State Ordering\n@@ -35,9 +35,9 @@\n                 ],\n                 default=Value(len(state_order)),\n                 output_field=CharField(),\n             )\n-        ).order_by(\"state_order\")\n+        ).order_by(\"state_order\", \"-created_at\")\n         order_by_param = (\n             \"-state_order\" if order_by_param.startswith(\"-\") else \"state_order\"\n         )\n     # assignee and label ordering\n@@ -54,12 +54,19 @@\n                 order_by_param[1::]\n                 if order_by_param.startswith(\"-\")\n                 else order_by_param\n             )\n-        ).order_by(\"-min_values\" if order_by_param.startswith(\"-\") else \"min_values\")\n+        ).order_by(\n+            \"-min_values\" if order_by_param.startswith(\"-\") else \"min_values\",\n+            \"-created_at\",\n+        )\n         order_by_param = (\n             \"-min_values\" if order_by_param.startswith(\"-\") else \"min_values\"\n         )\n     else:\n-        issue_queryset = issue_queryset.order_by(order_by_param)\n+        # If the order_by_param is created_at, then don't add the -created_at\n+        if \"created_at\" in order_by_param:\n+            issue_queryset = issue_queryset.order_by(order_by_param)\n+        else:\n+            issue_queryset = issue_queryset.order_by(order_by_param, \"-created_at\")\n         order_by_param = order_by_param\n     return issue_queryset, order_by_param\n"
        },
        {
          "path": "apiserver/plane/utils/paginator.py",
          "status": "modified",
          "diff": "Index: apiserver/plane/utils/paginator.py\n===================================================================\n--- apiserver/plane/utils/paginator.py\t0e91fea (parent)\n+++ apiserver/plane/utils/paginator.py\tb8043f9 (commit)\n@@ -101,8 +101,9 @@\n         order_by=None,\n         max_limit=MAX_LIMIT,\n         max_offset=None,\n         on_results=None,\n+        total_count_queryset=None,\n     ):\n         # Key tuple and remove `-` if descending order by\n         self.key = (\n             order_by\n@@ -114,8 +115,9 @@\n         self.queryset = queryset\n         self.max_limit = max_limit\n         self.max_offset = max_offset\n         self.on_results = on_results\n+        self.total_count_queryset = total_count_queryset\n \n     def get_result(self, limit=1000, cursor=None):\n         # offset is page #\n         # value is page limit\n@@ -137,23 +139,33 @@\n                 \"-created_at\",\n             )\n         # The current page\n         page = cursor.offset\n-        # The offset\n-        offset = cursor.offset * cursor.value\n-        stop = offset + (cursor.value or limit) + 1\n+        # The offset - use limit instead of cursor.value for consistent pagination\n+        offset = cursor.offset * limit\n+        stop = offset + limit + 1\n \n         if self.max_offset is not None and offset >= self.max_offset:\n             raise BadPaginationError(\"Pagination offset too large\")\n         if offset < 0:\n             raise BadPaginationError(\"Pagination offset cannot be negative\")\n \n         results = queryset[offset:stop]\n-        if cursor.value != limit:\n+\n+        # Only slice from the end if we're going backwards (previous page)\n+        if cursor.value != limit and cursor.is_prev:\n             results = results[-(limit + 1) :]\n \n+        total_count = (\n+            self.total_count_queryset.count()\n+            if self.total_count_queryset\n+            else results.count()\n+        )\n+\n+        # Check if there are more results available after the current page\n+\n         # Adjust cursors based on the results for pagination\n-        next_cursor = Cursor(limit, page + 1, False, results.count() > limit)\n+        next_cursor = Cursor(limit, page + 1, False, len(results) > limit)\n         # If the page is greater than 0, then set the previous cursor\n         prev_cursor = Cursor(limit, page - 1, True, page > 0)\n \n         # Process the results\n@@ -163,9 +175,9 @@\n         if self.on_results:\n             results = self.on_results(results)\n \n         # Count the queryset\n-        count = queryset.count()\n+        count = total_count\n \n         # Optionally, calculate the total count and max_hits if needed\n         max_hits = math.ceil(count / limit)\n \n@@ -195,8 +207,9 @@\n         queryset,\n         group_by_field_name,\n         group_by_fields,\n         count_filter,\n+        total_count_queryset=None,\n         *args,\n         **kwargs,\n     ):\n         # Initiate the parent class for all the parameters\n@@ -403,8 +416,9 @@\n         sub_group_by_field_name,\n         group_by_fields,\n         sub_group_by_fields,\n         count_filter,\n+        total_count_queryset=None,\n         *args,\n         **kwargs,\n     ):\n         # Initiate the parent class for all the parameters\n@@ -693,8 +707,9 @@\n         group_by_fields=None,\n         sub_group_by_field_name=None,\n         sub_group_by_fields=None,\n         count_filter=None,\n+        total_count_queryset=None,\n         **paginator_kwargs,\n     ):\n         \"\"\"Paginate the request\"\"\"\n         per_page = self.get_per_page(request, default_per_page, max_per_page)\n@@ -718,8 +733,10 @@\n                         sub_group_by_field_name\n                     )\n                     paginator_kwargs[\"sub_group_by_fields\"] = sub_group_by_fields\n \n+            paginator_kwargs[\"total_count_queryset\"] = total_count_queryset\n+\n             paginator = paginator_cls(**paginator_kwargs)\n \n         try:\n             cursor_result = paginator.get_result(limit=per_page, cursor=input_cursor)\n"
        }
      ]
    },
    {
      "id": "refactor-document-editor",
      "sha": "27f74206a3db34a43d6c2aea483b4fad6e5d0b06",
      "parentSha": "e20bfa55d6615621bee04d4626b61e72c8a63665",
      "spec": "Implement a unified document editor and update app and package code to use it.\n\n1) Add a new app-level wrapper for the document editor\n- Create apps/web/core/components/editor/document/editor.tsx.\n- Export a forwardRef component DocumentEditor that wraps @plane/editor's DocumentEditorWithRef.\n- Props: \n  - Required: workspaceSlug (string), workspaceId (string).\n  - Optional: projectId (string), embedHandler (partial of IDocumentEditorProps[\"embedHandler\"]).\n  - Mode union:\n    - editable: false (read-only mode)\n    - OR editable: true with searchMentionCallback(payload: TSearchEntityRequestPayload) => Promise<TSearchResponse> and uploadFile: TFileHandler[\"upload\"].\n  - Allow MakeOptional on IDocumentEditorProps to make disabledExtensions, editable, flaggedExtensions optional.\n- Behavior:\n  - Use useMember().getUserDetails for mention entity display names.\n  - Use useEditorFlagging(workspaceSlug) to compute disabled/flagged extensions and pass them through to DocumentEditorWithRef (disabledExtensions = [...document.disabled, ...additionalDisabledExtensions], flaggedExtensions = document.flagged).\n  - Use useEditorMention with searchEntity calling searchMentionCallback when editable, else a no-op.\n  - Use useEditorConfig().getEditorFileHandlers with workspaceSlug, workspaceId, projectId, and uploadFile only when editable (otherwise pass a stub that returns an empty string).\n  - Use useIssueEmbed({ workspaceSlug, projectId }) and merge issue embed handler into embedHandler (embedHandler = { issue: issueEmbedProps, ...embedHandler }).\n  - Render EditorMentionsRoot as the mention renderComponent and map mentioned entity details via getUserDetails.\n  - Set containerClassName = cn(\"relative pl-3 pb-3\", provided containerClassName).\n\n2) Update editor barrel exports and paths in apps/web\n- Modify apps/web/core/components/editor/index.ts to export from the renamed directories:\n  - export * from \"./embeds\";\n  - export * from \"./lite-text\"; (replace old \"./lite-text-editor\")\n  - export * from \"./pdf\";\n  - export * from \"./rich-text\"; (replace old \"./rich-text-editor\")\n  - export * from \"./sticky-editor\";\n\n3) Rename lite-text and rich-text components directories\n- Move apps/web/core/components/editor/lite-text-editor/* to apps/web/core/components/editor/lite-text/* and create a new index.ts with re-exports:\n  - export * from \"./editor\";\n  - export * from \"./read-only-editor\";\n  - export * from \"./toolbar\";\n- Move apps/web/core/components/editor/rich-text-editor/* to apps/web/core/components/editor/rich-text/* and create a new index.ts with:\n  - export * from \"./editor\";\n- Remove old index files under lite-text-editor and rich-text-editor.\n\n4) Update imports in app code that reference the moved editors\n- In apps/web/core/components/inbox/modals/create-modal/issue-description.tsx change the import to:\n  - import { RichTextEditor } from \"@/components/editor/rich-text/editor\";\n  - Keep the existing behavior and props (including editable, onChange, uploadFile, etc.).\n\n5) Switch Pages Version view to the new DocumentEditor wrapper and JSON content\n- In apps/web/core/components/pages/version/editor.tsx:\n  - Replace import of DocumentReadOnlyEditorWithRef with the new wrapper: import { DocumentEditor } from \"@/components/editor/document/editor\"; and remove unused imports for mentions/config/flagging/embed handlers.\n  - Use versionDetails.description_json as the source of the document value; if absent, return null.\n  - Render <DocumentEditor key={activeVersion ?? \"\"} editable={false} id={activeVersion ?? \"\"} value={description_json} containerClassName=\"p-0 pb-64 border-none\" displayConfig={displayConfig} editorClassName=\"pl-10\" projectId={projectId?.toString()} workspaceId={workspaceDetails?.id ?? \"\"} workspaceSlug={workspaceSlug?.toString() ?? \"\"} />.\n\n6) Update editor package to support unified document editor and remove read-only editor\n- In packages/editor/src/ce/extensions/document-extensions.tsx, extend TDocumentEditorAdditionalExtensionsProps with isEditable: boolean.\n- Add packages/editor/src/core/components/editors/document/editor.tsx implementing DocumentEditorWithRef:\n  - Accept IDocumentEditorProps with editable, value (tiptap Content), embedHandler, fileHandler, mentionHandler, etc.\n  - Build extensions via:\n    - WorkItemEmbedExtension when embedHandler.issue is provided (widgetCallback from embedHandler.issue).\n    - SideMenuExtension({ aiEnabled: !disabledExtensions?.includes(\"ai\"), dragDropEnabled: true }).\n    - HeadingListExtension.\n    - ...DocumentEditorAdditionalExtensions({ disabledExtensions, embedConfig: embedHandler, flaggedExtensions, isEditable: editable, fileHandler, userDetails: user ?? { id: \"\", name: \"\", color: \"\" } }).\n  - Use useEditor({ editable, enableHistory: true, disabledExtensions, flaggedExtensions, editorClassName, fileHandler, handleEditorReady, id, initialValue: value, mentionHandler, onChange, forwardedRef }).\n  - Render PageRenderer with displayConfig (default DEFAULT_DISPLAY_CONFIG), bubbleMenuEnabled default false, editorContainerClassName cn(getEditorClassNames, \"document-editor\").\n- Update packages/editor/src/core/components/editors/document/index.ts to export the new editor and stop exporting read-only-editor:\n  - export * from \"./collaborative-editor\";\n  - export * from \"./editor\";\n  - export * from \"./loader\";\n  - export * from \"./page-renderer\";\n- Remove packages/editor/src/core/components/editors/document/read-only-editor.tsx.\n- In packages/editor/src/core/hooks/use-collaborative-editor.ts, when building DocumentEditorAdditionalExtensions, pass isEditable: editable.\n- Remove packages/editor/src/core/hooks/use-editor-markings.tsx and its export; add IMarking type to packages/editor/src/core/types/config.ts as:\n  - type IMarking = { type: \"heading\"; level: number; text: string; sequence: number }.\n- Update types:\n  - packages/editor/src/core/types/editor.ts:\n    - Convert imports to type-only where appropriate.\n    - Add IDocumentEditorProps extending Omit<IEditorProps, \"initialValue\" | \"onEnterKeyPress\" | \"value\"> with fields: aiHandler?, editable (boolean), embedHandler (TEmbedConfig), user? (TUserDetails), value (tiptap Content).\n    - Remove IDocumentReadOnlyEditorProps.\n  - packages/editor/src/core/types/hook.ts:\n    - Import Content from @tiptap/core.\n    - Change TEditorHookProps.initialValue?: Content.\n  - packages/editor/src/core/hooks/use-editor.ts:\n    - Set content: initialValue without coercing to a string placeholder; keep the effect that syncs value via setContent.\n- Update editor package public API exports in packages/editor/src/index.ts:\n  - Export editors: CollaborativeDocumentEditorWithRef, DocumentEditorWithRef, LiteTextEditorWithRef, LiteTextReadOnlyEditorWithRef, RichTextEditorWithRef.\n  - Keep exports for constants/common, helpers/common, helpers/yjs-utils, CORE_EXTENSIONS, ADDITIONAL_EXTENSIONS, and types.\n  - Remove exports for isCellSelection, helpers/editor-commands, table extension re-exports, components/menus, useEditorMarkings, useReadOnlyEditor, and any other removed symbols.\n\n7) Ensure all remaining references to the old read-only editor and old lite/rich paths are updated\n- Replace any lingering imports of:\n  - \"@/components/editor/rich-text-editor/...\" -> \"@/components/editor/rich-text/...\"\n  - \"@/components/editor/lite-text-editor/...\" -> \"@/components/editor/lite-text/...\"\n  - DocumentReadOnlyEditorWithRef -> DocumentEditorWithRef or the app-level DocumentEditor wrapper depending on context.\n\n8) Content type alignment\n- Where JSON content is the source of document content (e.g., page version), pass it via the new value prop (tiptap Content) instead of initialValue string HTML.\n- Editable flows using rich text editors continue to accept HTML where used; only document editor consumers should migrate to value.\n\nAcceptance criteria:\n- Pages Version view renders using the new DocumentEditor app wrapper in read-only mode using description_json and no longer references DocumentReadOnlyEditorWithRef.\n- All imports from rich-text-editor and lite-text-editor paths are updated to rich-text and lite-text respectively and build succeeds.\n- Editor package compiles with the new DocumentEditorWithRef, types updated, and removed read-only editor and markings hook.\n- No broken exports from @plane/editor; only the new intended public surface is exported.",
      "prompt": "Refactor the document editor into a single component that supports both editable and read-only modes, and update the app to use it. Add an app-level wrapper that wires mentions, file handlers, and issue embeds. Rename lite/rich text editor directories to simplified paths and fix all imports. Update the pages version view to render the JSON document content using the new wrapper in read-only mode. In the editor package, add a new DocumentEditorWithRef, remove the legacy read-only editor and markings hook, add an isEditable flag to document extensions, and adjust types and public exports so the consolidated editor is the primary entry point.",
      "supplementalFiles": [
        "packages/editor/src/core/components/editors/document/page-renderer.tsx",
        "packages/editor/src/core/components/editors/document/collaborative-editor.tsx",
        "packages/editor/src/core/components/editors/document/loader.tsx",
        "packages/editor/src/core/constants/config.ts",
        "packages/editor/src/core/constants/extension.ts"
      ],
      "fileDiffs": [
        {
          "path": "apps/web/core/components/editor/document/editor.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/editor/document/editor.tsx\n===================================================================\n--- apps/web/core/components/editor/document/editor.tsx\te20bfa5 (parent)\n+++ apps/web/core/components/editor/document/editor.tsx\t27f7420 (commit)\n@@ -0,0 +1,92 @@\n+import React, { forwardRef } from \"react\";\n+// plane imports\n+import { DocumentEditorWithRef, EditorRefApi, IDocumentEditorProps, TFileHandler } from \"@plane/editor\";\n+import { MakeOptional, TSearchEntityRequestPayload, TSearchResponse } from \"@plane/types\";\n+import { cn } from \"@plane/utils\";\n+// components\n+import { EditorMentionsRoot } from \"@/components/editor\";\n+// hooks\n+import { useEditorConfig, useEditorMention } from \"@/hooks/editor\";\n+import { useMember } from \"@/hooks/store\";\n+// plane web hooks\n+import { useEditorFlagging } from \"@/plane-web/hooks/use-editor-flagging\";\n+import { useIssueEmbed } from \"@/plane-web/hooks/use-issue-embed\";\n+\n+type DocumentEditorWrapperProps = MakeOptional<\n+  Omit<IDocumentEditorProps, \"fileHandler\" | \"mentionHandler\" | \"embedHandler\" | \"user\">,\n+  \"disabledExtensions\" | \"editable\" | \"flaggedExtensions\"\n+> & {\n+  embedHandler?: Partial<IDocumentEditorProps[\"embedHandler\"]>;\n+  workspaceSlug: string;\n+  workspaceId: string;\n+  projectId?: string;\n+} & (\n+    | {\n+        editable: false;\n+      }\n+    | {\n+        editable: true;\n+        searchMentionCallback: (payload: TSearchEntityRequestPayload) => Promise<TSearchResponse>;\n+        uploadFile: TFileHandler[\"upload\"];\n+      }\n+  );\n+\n+export const DocumentEditor = forwardRef<EditorRefApi, DocumentEditorWrapperProps>((props, ref) => {\n+  const {\n+    containerClassName,\n+    editable,\n+    embedHandler,\n+    workspaceSlug,\n+    workspaceId,\n+    projectId,\n+    disabledExtensions: additionalDisabledExtensions = [],\n+    ...rest\n+  } = props;\n+  // store hooks\n+  const { getUserDetails } = useMember();\n+  // editor flaggings\n+  const { document: documentEditorExtensions } = useEditorFlagging(workspaceSlug);\n+  // use editor mention\n+  const { fetchMentions } = useEditorMention({\n+    searchEntity: editable ? async (payload) => await props.searchMentionCallback(payload) : async () => ({}),\n+  });\n+  // editor config\n+  const { getEditorFileHandlers } = useEditorConfig();\n+  // issue-embed\n+  const { issueEmbedProps } = useIssueEmbed({\n+    projectId,\n+    workspaceSlug,\n+  });\n+\n+  return (\n+    <DocumentEditorWithRef\n+      ref={ref}\n+      disabledExtensions={[...documentEditorExtensions.disabled, ...(additionalDisabledExtensions ?? [])]}\n+      editable={editable}\n+      flaggedExtensions={documentEditorExtensions.flagged}\n+      fileHandler={getEditorFileHandlers({\n+        projectId,\n+        uploadFile: editable ? props.uploadFile : async () => \"\",\n+        workspaceId,\n+        workspaceSlug,\n+      })}\n+      mentionHandler={{\n+        searchCallback: async (query) => {\n+          const res = await fetchMentions(query);\n+          if (!res) throw new Error(\"Failed in fetching mentions\");\n+          return res;\n+        },\n+        renderComponent: EditorMentionsRoot,\n+        getMentionedEntityDetails: (id: string) => ({ display_name: getUserDetails(id)?.display_name ?? \"\" }),\n+      }}\n+      embedHandler={{\n+        issue: issueEmbedProps,\n+        ...embedHandler,\n+      }}\n+      {...rest}\n+      containerClassName={cn(\"relative pl-3 pb-3\", containerClassName)}\n+    />\n+  );\n+});\n+\n+DocumentEditor.displayName = \"DocumentEditor\";\n"
        },
        {
          "path": "apps/web/core/components/editor/index.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/components/editor/index.ts\n===================================================================\n--- apps/web/core/components/editor/index.ts\te20bfa5 (parent)\n+++ apps/web/core/components/editor/index.ts\t27f7420 (commit)\n@@ -1,5 +1,5 @@\n export * from \"./embeds\";\n-export * from \"./lite-text-editor\";\n+export * from \"./lite-text\";\n export * from \"./pdf\";\n-export * from \"./rich-text-editor\";\n+export * from \"./rich-text\";\n export * from \"./sticky-editor\";\n"
        },
        {
          "path": "apps/web/core/components/editor/lite-text-editor/index.ts",
          "status": "deleted",
          "diff": "Index: apps/web/core/components/editor/lite-text-editor/index.ts\n===================================================================\n--- apps/web/core/components/editor/lite-text-editor/index.ts\te20bfa5 (parent)\n+++ apps/web/core/components/editor/lite-text-editor/index.ts\t27f7420 (commit)\n@@ -1,3 +0,0 @@\n-export * from \"./lite-text-editor\";\n-export * from \"./lite-text-read-only-editor\";\n-export * from \"./toolbar\";\n"
        },
        {
          "path": "apps/web/core/components/editor/lite-text/editor.tsx",
          "status": "renamed",
          "oldPath": "apps/web/core/components/editor/lite-text-editor/lite-text-editor.tsx",
          "diff": "===================================================================\n--- apps/web/core/components/editor/lite-text-editor/lite-text-editor.tsx\te20bfa5 (parent)\n+++ apps/web/core/components/editor/lite-text/editor.tsx\t27f7420 (commit)\n"
        },
        {
          "path": "apps/web/core/components/editor/lite-text/index.ts",
          "status": "added",
          "diff": "Index: apps/web/core/components/editor/lite-text/index.ts\n===================================================================\n--- apps/web/core/components/editor/lite-text/index.ts\te20bfa5 (parent)\n+++ apps/web/core/components/editor/lite-text/index.ts\t27f7420 (commit)\n@@ -0,0 +1,3 @@\n+export * from \"./editor\";\n+export * from \"./read-only-editor\";\n+export * from \"./toolbar\";\n"
        },
        {
          "path": "apps/web/core/components/editor/lite-text/read-only-editor.tsx",
          "status": "renamed",
          "oldPath": "apps/web/core/components/editor/lite-text-editor/lite-text-read-only-editor.tsx",
          "diff": "===================================================================\n--- apps/web/core/components/editor/lite-text-editor/lite-text-read-only-editor.tsx\te20bfa5 (parent)\n+++ apps/web/core/components/editor/lite-text/read-only-editor.tsx\t27f7420 (commit)\n"
        },
        {
          "path": "apps/web/core/components/editor/lite-text/toolbar.tsx",
          "status": "renamed",
          "oldPath": "apps/web/core/components/editor/lite-text-editor/toolbar.tsx",
          "diff": "===================================================================\n--- apps/web/core/components/editor/lite-text-editor/toolbar.tsx\te20bfa5 (parent)\n+++ apps/web/core/components/editor/lite-text/toolbar.tsx\t27f7420 (commit)\n"
        },
        {
          "path": "apps/web/core/components/editor/rich-text-editor/index.ts",
          "status": "deleted",
          "diff": "Index: apps/web/core/components/editor/rich-text-editor/index.ts\n===================================================================\n--- apps/web/core/components/editor/rich-text-editor/index.ts\te20bfa5 (parent)\n+++ apps/web/core/components/editor/rich-text-editor/index.ts\t27f7420 (commit)\n@@ -1,1 +0,0 @@\n-export * from \"./rich-text-editor\";\n"
        },
        {
          "path": "apps/web/core/components/editor/rich-text/editor.tsx",
          "status": "renamed",
          "oldPath": "apps/web/core/components/editor/rich-text-editor/rich-text-editor.tsx",
          "diff": "===================================================================\n--- apps/web/core/components/editor/rich-text-editor/rich-text-editor.tsx\te20bfa5 (parent)\n+++ apps/web/core/components/editor/rich-text/editor.tsx\t27f7420 (commit)\n"
        },
        {
          "path": "apps/web/core/components/editor/rich-text/index.ts",
          "status": "added",
          "diff": "Index: apps/web/core/components/editor/rich-text/index.ts\n===================================================================\n--- apps/web/core/components/editor/rich-text/index.ts\te20bfa5 (parent)\n+++ apps/web/core/components/editor/rich-text/index.ts\t27f7420 (commit)\n@@ -0,0 +1,1 @@\n+export * from \"./editor\";\n"
        },
        {
          "path": "apps/web/core/components/inbox/modals/create-modal/issue-description.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/inbox/modals/create-modal/issue-description.tsx\n===================================================================\n--- apps/web/core/components/inbox/modals/create-modal/issue-description.tsx\te20bfa5 (parent)\n+++ apps/web/core/components/inbox/modals/create-modal/issue-description.tsx\t27f7420 (commit)\n@@ -9,9 +9,9 @@\n import { EFileAssetType, TIssue } from \"@plane/types\";\n import { Loader } from \"@plane/ui\";\n import { getDescriptionPlaceholderI18n, getTabIndex } from \"@plane/utils\";\n // components\n-import { RichTextEditor } from \"@/components/editor/rich-text-editor/rich-text-editor\";\n+import { RichTextEditor } from \"@/components/editor/rich-text/editor\";\n // hooks\n import { useEditorAsset, useProjectInbox } from \"@/hooks/store\";\n import { usePlatformOS } from \"@/hooks/use-platform-os\";\n // services\n"
        },
        {
          "path": "apps/web/core/components/pages/version/editor.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/pages/version/editor.tsx\n===================================================================\n--- apps/web/core/components/pages/version/editor.tsx\te20bfa5 (parent)\n+++ apps/web/core/components/pages/version/editor.tsx\t27f7420 (commit)\n@@ -1,44 +1,29 @@\n import { observer } from \"mobx-react\";\n import { useParams } from \"next/navigation\";\n // plane imports\n-import { DocumentReadOnlyEditorWithRef, TDisplayConfig } from \"@plane/editor\";\n+import { TDisplayConfig } from \"@plane/editor\";\n import { TPageVersion } from \"@plane/types\";\n import { Loader } from \"@plane/ui\";\n // components\n-import { EditorMentionsRoot } from \"@/components/editor\";\n+import { DocumentEditor } from \"@/components/editor/document/editor\";\n // hooks\n-import { useEditorConfig } from \"@/hooks/editor\";\n-import { useMember, useWorkspace } from \"@/hooks/store\";\n+import { useWorkspace } from \"@/hooks/store\";\n import { usePageFilters } from \"@/hooks/use-page-filters\";\n-// plane web hooks\n-import { useEditorFlagging } from \"@/plane-web/hooks/use-editor-flagging\";\n-import { useIssueEmbed } from \"@/plane-web/hooks/use-issue-embed\";\n \n export type TVersionEditorProps = {\n   activeVersion: string | null;\n   versionDetails: TPageVersion | undefined;\n };\n \n export const PagesVersionEditor: React.FC<TVersionEditorProps> = observer((props) => {\n   const { activeVersion, versionDetails } = props;\n-  // store hooks\n-  const { getUserDetails } = useMember();\n   // params\n   const { workspaceSlug, projectId } = useParams();\n   // store hooks\n   const { getWorkspaceBySlug } = useWorkspace();\n   // derived values\n   const workspaceDetails = getWorkspaceBySlug(workspaceSlug?.toString() ?? \"\");\n-  // editor flaggings\n-  const { document: documentEditorExtensions } = useEditorFlagging(workspaceSlug?.toString() ?? \"\");\n-  // editor config\n-  const { getReadOnlyEditorFileHandlers } = useEditorConfig();\n-  // issue-embed\n-  const { issueEmbedProps } = useIssueEmbed({\n-    projectId: projectId?.toString() ?? \"\",\n-    workspaceSlug: workspaceSlug?.toString() ?? \"\",\n-  });\n   // page filters\n   const { fontSize, fontStyle } = usePageFilters();\n \n   const displayConfig: TDisplayConfig = {\n@@ -88,33 +73,22 @@\n         </Loader>\n       </div>\n     );\n \n-  const description = versionDetails?.description_html;\n-  if (description === undefined || description?.trim() === \"\") return null;\n+  const description = versionDetails?.description_json;\n+  if (!description) return null;\n \n   return (\n-    <DocumentReadOnlyEditorWithRef\n+    <DocumentEditor\n+      key={activeVersion ?? \"\"}\n+      editable={false}\n       id={activeVersion ?? \"\"}\n-      initialValue={description ?? \"<p></p>\"}\n+      value={description}\n       containerClassName=\"p-0 pb-64 border-none\"\n-      disabledExtensions={documentEditorExtensions.disabled}\n-      flaggedExtensions={documentEditorExtensions.flagged}\n       displayConfig={displayConfig}\n       editorClassName=\"pl-10\"\n-      fileHandler={getReadOnlyEditorFileHandlers({\n-        projectId: projectId?.toString() ?? \"\",\n-        workspaceId: workspaceDetails?.id ?? \"\",\n-        workspaceSlug: workspaceSlug?.toString() ?? \"\",\n-      })}\n-      mentionHandler={{\n-        renderComponent: (props) => <EditorMentionsRoot {...props} />,\n-        getMentionedEntityDetails: (id: string) => ({ display_name: getUserDetails(id)?.display_name ?? \"\" }),\n-      }}\n-      embedHandler={{\n-        issue: {\n-          widgetCallback: issueEmbedProps.widgetCallback,\n-        },\n-      }}\n+      projectId={projectId?.toString()}\n+      workspaceId={workspaceDetails?.id ?? \"\"}\n+      workspaceSlug={workspaceSlug?.toString() ?? \"\"}\n     />\n   );\n });\n"
        },
        {
          "path": "packages/editor/src/ce/extensions/document-extensions.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/ce/extensions/document-extensions.tsx\n===================================================================\n--- packages/editor/src/ce/extensions/document-extensions.tsx\te20bfa5 (parent)\n+++ packages/editor/src/ce/extensions/document-extensions.tsx\t27f7420 (commit)\n@@ -10,8 +10,9 @@\n   IEditorProps,\n   \"disabledExtensions\" | \"flaggedExtensions\" | \"fileHandler\"\n > & {\n   embedConfig: TEmbedConfig | undefined;\n+  isEditable: boolean;\n   provider?: HocuspocusProvider;\n   userDetails: TUserDetails;\n };\n \n"
        },
        {
          "path": "packages/editor/src/core/components/editors/document/editor.tsx",
          "status": "added",
          "diff": "Index: packages/editor/src/core/components/editors/document/editor.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/document/editor.tsx\te20bfa5 (parent)\n+++ packages/editor/src/core/components/editors/document/editor.tsx\t27f7420 (commit)\n@@ -0,0 +1,109 @@\n+import { Extensions } from \"@tiptap/core\";\n+import { forwardRef, MutableRefObject, useMemo } from \"react\";\n+// plane imports\n+import { cn } from \"@plane/utils\";\n+// components\n+import { PageRenderer } from \"@/components/editors\";\n+// constants\n+import { DEFAULT_DISPLAY_CONFIG } from \"@/constants/config\";\n+// extensions\n+import { HeadingListExtension, WorkItemEmbedExtension, SideMenuExtension } from \"@/extensions\";\n+// helpers\n+import { getEditorClassNames } from \"@/helpers/common\";\n+// hooks\n+import { useEditor } from \"@/hooks/use-editor\";\n+// plane editor extensions\n+import { DocumentEditorAdditionalExtensions } from \"@/plane-editor/extensions\";\n+// types\n+import { EditorRefApi, IDocumentEditorProps } from \"@/types\";\n+\n+const DocumentEditor = (props: IDocumentEditorProps) => {\n+  const {\n+    bubbleMenuEnabled = false,\n+    containerClassName,\n+    disabledExtensions,\n+    displayConfig = DEFAULT_DISPLAY_CONFIG,\n+    editable,\n+    editorClassName = \"\",\n+    embedHandler,\n+    fileHandler,\n+    flaggedExtensions,\n+    forwardedRef,\n+    id,\n+    handleEditorReady,\n+    mentionHandler,\n+    onChange,\n+    user,\n+    value,\n+  } = props;\n+  const extensions: Extensions = useMemo(() => {\n+    const additionalExtensions: Extensions = [];\n+    if (embedHandler?.issue) {\n+      additionalExtensions.push(\n+        WorkItemEmbedExtension({\n+          widgetCallback: embedHandler.issue.widgetCallback,\n+        })\n+      );\n+    }\n+    additionalExtensions.push(\n+      SideMenuExtension({\n+        aiEnabled: !disabledExtensions?.includes(\"ai\"),\n+        dragDropEnabled: true,\n+      }),\n+      HeadingListExtension,\n+      ...DocumentEditorAdditionalExtensions({\n+        disabledExtensions,\n+        embedConfig: embedHandler,\n+        flaggedExtensions,\n+        isEditable: editable,\n+        fileHandler,\n+        userDetails: user ?? {\n+          id: \"\",\n+          name: \"\",\n+          color: \"\",\n+        },\n+      })\n+    );\n+    return additionalExtensions;\n+  }, []);\n+\n+  const editor = useEditor({\n+    disabledExtensions,\n+    editable,\n+    editorClassName,\n+    enableHistory: true,\n+    extensions,\n+    fileHandler,\n+    flaggedExtensions,\n+    forwardedRef,\n+    handleEditorReady,\n+    id,\n+    initialValue: value,\n+    mentionHandler,\n+    onChange,\n+  });\n+\n+  const editorContainerClassName = getEditorClassNames({\n+    containerClassName,\n+  });\n+\n+  if (!editor) return null;\n+\n+  return (\n+    <PageRenderer\n+      bubbleMenuEnabled={bubbleMenuEnabled}\n+      displayConfig={displayConfig}\n+      editor={editor}\n+      editorContainerClassName={cn(editorContainerClassName, \"document-editor\")}\n+      id={id}\n+    />\n+  );\n+};\n+\n+const DocumentEditorWithRef = forwardRef<EditorRefApi, IDocumentEditorProps>((props, ref) => (\n+  <DocumentEditor {...props} forwardedRef={ref as MutableRefObject<EditorRefApi | null>} />\n+));\n+\n+DocumentEditorWithRef.displayName = \"DocumentEditorWithRef\";\n+\n+export { DocumentEditorWithRef };\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/document/index.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/document/index.ts\n===================================================================\n--- packages/editor/src/core/components/editors/document/index.ts\te20bfa5 (parent)\n+++ packages/editor/src/core/components/editors/document/index.ts\t27f7420 (commit)\n@@ -1,4 +1,4 @@\n export * from \"./collaborative-editor\";\n+export * from \"./editor\";\n export * from \"./loader\";\n export * from \"./page-renderer\";\n-export * from \"./read-only-editor\";\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/document/read-only-editor.tsx",
          "status": "deleted",
          "diff": "Index: packages/editor/src/core/components/editors/document/read-only-editor.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/document/read-only-editor.tsx\te20bfa5 (parent)\n+++ packages/editor/src/core/components/editors/document/read-only-editor.tsx\t27f7420 (commit)\n@@ -1,77 +0,0 @@\n-import { Extensions } from \"@tiptap/core\";\n-import React, { forwardRef, MutableRefObject } from \"react\";\n-// plane imports\n-import { cn } from \"@plane/utils\";\n-// components\n-import { PageRenderer } from \"@/components/editors\";\n-// constants\n-import { DEFAULT_DISPLAY_CONFIG } from \"@/constants/config\";\n-// extensions\n-import { WorkItemEmbedExtension } from \"@/extensions\";\n-// helpers\n-import { getEditorClassNames } from \"@/helpers/common\";\n-// hooks\n-import { useReadOnlyEditor } from \"@/hooks/use-read-only-editor\";\n-// types\n-import { EditorReadOnlyRefApi, IDocumentReadOnlyEditorProps } from \"@/types\";\n-\n-const DocumentReadOnlyEditor: React.FC<IDocumentReadOnlyEditorProps> = (props) => {\n-  const {\n-    containerClassName,\n-    disabledExtensions,\n-    displayConfig = DEFAULT_DISPLAY_CONFIG,\n-    editorClassName = \"\",\n-    embedHandler,\n-    fileHandler,\n-    flaggedExtensions,\n-    id,\n-    forwardedRef,\n-    handleEditorReady,\n-    initialValue,\n-    mentionHandler,\n-  } = props;\n-  const extensions: Extensions = [];\n-  if (embedHandler?.issue) {\n-    extensions.push(\n-      WorkItemEmbedExtension({\n-        widgetCallback: embedHandler.issue.widgetCallback,\n-      })\n-    );\n-  }\n-\n-  const editor = useReadOnlyEditor({\n-    disabledExtensions,\n-    editorClassName,\n-    extensions,\n-    fileHandler,\n-    flaggedExtensions,\n-    forwardedRef,\n-    handleEditorReady,\n-    initialValue,\n-    mentionHandler,\n-  });\n-\n-  const editorContainerClassName = getEditorClassNames({\n-    containerClassName,\n-  });\n-\n-  if (!editor) return null;\n-\n-  return (\n-    <PageRenderer\n-      bubbleMenuEnabled={false}\n-      displayConfig={displayConfig}\n-      editor={editor}\n-      editorContainerClassName={cn(editorContainerClassName, \"document-editor\")}\n-      id={id}\n-    />\n-  );\n-};\n-\n-const DocumentReadOnlyEditorWithRef = forwardRef<EditorReadOnlyRefApi, IDocumentReadOnlyEditorProps>((props, ref) => (\n-  <DocumentReadOnlyEditor {...props} forwardedRef={ref as MutableRefObject<EditorReadOnlyRefApi | null>} />\n-));\n-\n-DocumentReadOnlyEditorWithRef.displayName = \"DocumentReadOnlyEditorWithRef\";\n-\n-export { DocumentReadOnlyEditorWithRef };\n"
        },
        {
          "path": "packages/editor/src/core/hooks/use-collaborative-editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/hooks/use-collaborative-editor.ts\n===================================================================\n--- packages/editor/src/core/hooks/use-collaborative-editor.ts\te20bfa5 (parent)\n+++ packages/editor/src/core/hooks/use-collaborative-editor.ts\t27f7420 (commit)\n@@ -97,8 +97,9 @@\n         disabledExtensions,\n         embedConfig: embedHandler,\n         fileHandler,\n         flaggedExtensions,\n+        isEditable: editable,\n         provider,\n         userDetails: user,\n       }),\n     ],\n"
        },
        {
          "path": "packages/editor/src/core/hooks/use-editor-markings.tsx",
          "status": "deleted",
          "diff": "Index: packages/editor/src/core/hooks/use-editor-markings.tsx\n===================================================================\n--- packages/editor/src/core/hooks/use-editor-markings.tsx\te20bfa5 (parent)\n+++ packages/editor/src/core/hooks/use-editor-markings.tsx\t27f7420 (commit)\n@@ -1,39 +0,0 @@\n-import { useCallback, useState } from \"react\";\n-\n-export interface IMarking {\n-  type: \"heading\";\n-  level: number;\n-  text: string;\n-  sequence: number;\n-}\n-\n-export const useEditorMarkings = () => {\n-  const [markings, setMarkings] = useState<IMarking[]>([]);\n-\n-  const updateMarkings = useCallback((html: string) => {\n-    const parser = new DOMParser();\n-    const doc = parser.parseFromString(html, \"text/html\");\n-    const headings = doc.querySelectorAll(\"h1, h2, h3\");\n-    const tempMarkings: IMarking[] = [];\n-    let h1Sequence: number = 0;\n-    let h2Sequence: number = 0;\n-    let h3Sequence: number = 0;\n-\n-    headings.forEach((heading) => {\n-      const level = parseInt(heading.tagName[1]); // Extract the number from h1, h2, h3\n-      tempMarkings.push({\n-        type: \"heading\",\n-        level: level,\n-        text: heading.textContent || \"\",\n-        sequence: level === 1 ? ++h1Sequence : level === 2 ? ++h2Sequence : ++h3Sequence,\n-      });\n-    });\n-\n-    setMarkings(tempMarkings);\n-  }, []);\n-\n-  return {\n-    updateMarkings,\n-    markings,\n-  };\n-};\n"
        },
        {
          "path": "packages/editor/src/core/hooks/use-editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/hooks/use-editor.ts\n===================================================================\n--- packages/editor/src/core/hooks/use-editor.ts\te20bfa5 (parent)\n+++ packages/editor/src/core/hooks/use-editor.ts\t27f7420 (commit)\n@@ -69,9 +69,9 @@\n           tabIndex,\n         }),\n         ...extensions,\n       ],\n-      content: typeof initialValue === \"string\" && initialValue.trim() !== \"\" ? initialValue : \"<p></p>\",\n+      content: initialValue,\n       onCreate: () => handleEditorReady?.(true),\n       onTransaction: () => {\n         onTransaction?.();\n       },\n"
        },
        {
          "path": "packages/editor/src/core/types/config.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/config.ts\n===================================================================\n--- packages/editor/src/core/types/config.ts\te20bfa5 (parent)\n+++ packages/editor/src/core/types/config.ts\t27f7420 (commit)\n@@ -45,4 +45,11 @@\n export type TRealtimeConfig = {\n   url: string;\n   queryParams: TWebhookConnectionQueryParams;\n };\n+\n+export type IMarking = {\n+  type: \"heading\";\n+  level: number;\n+  text: string;\n+  sequence: number;\n+};\n"
        },
        {
          "path": "packages/editor/src/core/types/editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/editor.ts\n===================================================================\n--- packages/editor/src/core/types/editor.ts\te20bfa5 (parent)\n+++ packages/editor/src/core/types/editor.ts\t27f7420 (commit)\n@@ -1,6 +1,6 @@\n-import { Extensions, JSONContent } from \"@tiptap/core\";\n-import { Selection } from \"@tiptap/pm/state\";\n+import type { Content, Extensions, JSONContent } from \"@tiptap/core\";\n+import type { Selection } from \"@tiptap/pm/state\";\n // extension types\n import type { TTextAlign } from \"@/extensions\";\n // helpers\n import type { IMarking } from \"@/helpers/scroll-to-node\";\n@@ -159,8 +159,16 @@\n   serverHandler?: TServerHandler;\n   user: TUserDetails;\n }\n \n+export interface IDocumentEditorProps extends Omit<IEditorProps, \"initialValue\" | \"onEnterKeyPress\" | \"value\"> {\n+  aiHandler?: TAIHandler;\n+  editable: boolean;\n+  embedHandler: TEmbedConfig;\n+  user?: TUserDetails;\n+  value: Content;\n+}\n+\n // read only editor props\n export interface IReadOnlyEditorProps\n   extends Pick<\n     IEditorProps,\n@@ -180,12 +188,8 @@\n }\n \n export type ILiteTextReadOnlyEditorProps = IReadOnlyEditorProps;\n \n-export interface IDocumentReadOnlyEditorProps extends IReadOnlyEditorProps {\n-  embedHandler: TEmbedConfig;\n-}\n-\n export interface EditorEvents {\n   beforeCreate: never;\n   create: never;\n   update: never;\n"
        },
        {
          "path": "packages/editor/src/core/types/hook.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/hook.ts\n===================================================================\n--- packages/editor/src/core/types/hook.ts\te20bfa5 (parent)\n+++ packages/editor/src/core/types/hook.ts\t27f7420 (commit)\n@@ -1,5 +1,6 @@\n import type { HocuspocusProvider } from \"@hocuspocus/provider\";\n+import type { Content } from \"@tiptap/core\";\n import type { EditorProps } from \"@tiptap/pm/view\";\n // local imports\n import type { ICollaborativeDocumentEditorProps, IEditorProps, IReadOnlyEditorProps } from \"./editor\";\n \n@@ -26,9 +27,9 @@\n     | \"value\"\n   > & {\n     editable: boolean;\n     enableHistory: boolean;\n-    initialValue?: string;\n+    initialValue?: Content;\n     provider?: HocuspocusProvider;\n   };\n \n export type TCollaborativeEditorHookProps = TCoreHookProps &\n"
        },
        {
          "path": "packages/editor/src/index.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/index.ts\n===================================================================\n--- packages/editor/src/index.ts\te20bfa5 (parent)\n+++ packages/editor/src/index.ts\t27f7420 (commit)\n@@ -8,33 +8,21 @@\n \n // editors\n export {\n   CollaborativeDocumentEditorWithRef,\n-  DocumentReadOnlyEditorWithRef,\n+  DocumentEditorWithRef,\n   LiteTextEditorWithRef,\n   LiteTextReadOnlyEditorWithRef,\n   RichTextEditorWithRef,\n } from \"@/components/editors\";\n \n-export { isCellSelection } from \"@/extensions/table/table/utilities/helpers\";\n-\n // constants\n export * from \"@/constants/common\";\n \n // helpers\n export * from \"@/helpers/common\";\n-export * from \"@/helpers/editor-commands\";\n export * from \"@/helpers/yjs-utils\";\n-export * from \"@/extensions/table/table\";\n \n-// components\n-export * from \"@/components/menus\";\n-\n-// hooks\n-export { useEditor } from \"@/hooks/use-editor\";\n-export { type IMarking, useEditorMarkings } from \"@/hooks/use-editor-markings\";\n-export { useReadOnlyEditor } from \"@/hooks/use-read-only-editor\";\n-\n export { CORE_EXTENSIONS } from \"@/constants/extension\";\n export { ADDITIONAL_EXTENSIONS } from \"@/plane-editor/constants/extensions\";\n \n // types\n"
        }
      ]
    },
    {
      "id": "refactor-dropdowns",
      "sha": "f3daac6f95bdb5f98485235edcf56f66012033ac",
      "parentSha": "5660b285740c7648a4cb3946c090a0d1ee1da987",
      "spec": "Implement a UI and context refactor to decouple dropdowns/work item modal properties from store hooks and introduce base components with wrapper adapters. Apply the following changes:\n\n1) Introduce base + wrapper pattern for dropdowns and update barrel exports\n- Member dropdown:\n  - Create MemberDropdownBase in apps/web/core/components/dropdowns/member/base.tsx. It must receive plain props only (no store access): getUserDetails(userId) -> IUserLite|undefined, memberIds: string[], onDropdownOpen?: () => void, and existing UI props. It should pass combobox props directly (including multiple) and render MemberOptions with getUserDetails, memberIds, onDropdownOpen, placement, referenceElement, optionsClassName.\n  - Update MemberOptions to accept getUserDetails, memberIds, onDropdownOpen instead of reading from useMember or useParams. Remove role/guest filtering; only derive options via getUserDetails and query filtering. Focus the input on open and call onDropdownOpen when isOpen becomes true.\n  - Add MemberDropdown wrapper in apps/web/core/components/dropdowns/member/dropdown.tsx. It must use useMember to inject getUserDetails, resolve memberIds (provided, project-based via getProjectMemberIds, or workspaceMemberIds), and lazily fetch project members on open via fetchProjectMembers using workspaceSlug from useParams.\n- Module dropdown:\n  - Create ModuleDropdownBase in apps/web/core/components/dropdowns/module/base.tsx that accepts getModuleById(moduleId) -> IModule|null, moduleIds?: string[], onDropdownOpen?: () => void, and existing UI props. Remove internal store calls. Ensure comboboxProps includes multiple directly.\n  - Move button content rendering into a new ModuleButtonContent component in apps/web/core/components/dropdowns/module/button-content.tsx; it should use useModule for name resolution and handle tag removal for multi-select.\n  - Update ModuleOptions in apps/web/core/components/dropdowns/module/module-options.tsx to accept getModuleById, moduleIds, and onDropdownOpen. Do not access store/hooks internally.\n  - Add ModuleDropdown wrapper in apps/web/core/components/dropdowns/module/dropdown.tsx. It must use useModule to get getModuleById, getProjectModuleIds, and fetchModules; derive moduleIds; and fetch on open if needed, using workspaceSlug from useParams.\n- Project dropdown:\n  - Create ProjectDropdownBase in apps/web/core/components/dropdowns/project/base.tsx that accepts getProjectById(projectId) and projectIds: string[]. Change renderCondition signature to renderCondition(projectId: string) and update internal option generation accordingly. Handle icon rendering using projectDetails.logo_props when present.\n  - Add ProjectDropdown wrapper in apps/web/core/components/dropdowns/project/dropdown.tsx that injects joinedProjectIds and getProjectById via useProject.\n- State dropdown:\n  - Create WorkItemStateDropdownBase in apps/web/core/components/dropdowns/state/base.tsx that accepts getStateById(stateId), stateIds: string[], onDropdownOpen?: () => void, and isInitializing?: boolean to show a spinner. Compute statesList from stateIds and getStateById. Keep default state selection logic, showDefaultState handling, and dropdown interactions but remove internal store fetching.\n  - Add StateDropdown wrapper in apps/web/core/components/dropdowns/state/dropdown.tsx that uses useProjectState to derive stateIds (or accept props.stateIds when provided), injects getStateById, and implements onDropdownOpen with a local state loader to fetchProjectStates when necessary (based on workspaceSlug and projectId). Pass isInitializing to the base.\n- Update barrel exports in apps/web/core/components/dropdowns/index.ts to export the wrapper components: member/dropdown, module/dropdown, project/dropdown, state/dropdown (instead of previous index.tsx files).\n\n2) Update callsites and prop contracts affected by the dropdown refactor\n- Where ProjectDropdowns renderCondition was previously (project: TProject) => boolean, update usages to (projectId: string) => boolean. Update at least in:\n  - apps/web/core/components/cycles/form.tsx\n  - apps/web/core/components/modules/form.tsx\n  - apps/web/core/components/issues/issue-modal/components/project-select.tsx\n- Ensure any consumer relying on previous project obj receives projectId and uses injected getProjectById when needed internally (now handled by ProjectDropdownBase).\n\n3) Issue modal context and behavior adjustments\n- In apps/web/core/components/issues/issue-modal/context/issue-modal-context.tsx:\n  - Add TCreateSubWorkItemProps with workspaceSlug, projectId, parentId.\n  - Extend TIssueModalContext with handleCreateSubWorkItem(props: TCreateSubWorkItemProps) => Promise<void>.\n  - Update THandleProjectEntitiesFetchProps to accept workItemProjectId: string|null|undefined and workItemTypeId: string|undefined; remove templateId from this type.\n- In apps/web/ce/components/issues/issue-modal/provider.tsx (or the applicable provider), add handleCreateSubWorkItem to the value with a default no-op Promise.resolve() to match the context type.\n- In apps/web/core/components/issues/issue-modal/base.tsx, after successful issue creation in create flow, invoke handleCreateSubWorkItem with workspaceSlug, response.project_id, and response.id to initialize sub-work item creation flows.\n\n4) Replace CE additional properties with new work item component\n- Remove the CE IssueAdditionalProperties component and its export from apps/web/ce/components/issues/issue-modal/index.ts.\n- Add WorkItemModalAdditionalProperties in apps/web/ce/components/issues/issue-modal/modal-additional-properties.tsx that accepts: isDraft?: boolean, projectId: string|null, workItemId: string|undefined, workspaceSlug: string; it should return null by default (placeholder for future EE/CE customizations).\n- In apps/web/core/components/issues/issue-modal/form.tsx, replace usage of IssueAdditionalProperties with WorkItemModalAdditionalProperties. Ensure it is rendered under the header with the same layout intent and toggle the footer shadow only when there are active additional properties.\n\n5) Label selection refactor and label creation injection\n- Split label select into base and wrapper:\n  - Create WorkItemLabelSelectBase in apps/web/core/components/issues/select/base.tsx that accepts getLabelById(labelId) -> IIssueLabel|null, labelIds: string[], onDropdownOpen?: () => void, and existing UI props. Do not access store or router. Derive labelsList from labelIds and filter based on query. Call onDropdownOpen on open. Use labelsList for displaying and filtering; pass value to IssueLabelsList correctly.\n  - Create IssueLabelSelect wrapper in apps/web/core/components/issues/select/dropdown.tsx that uses useLabel to get getProjectLabelIds, getLabelById, and fetchProjectLabels; derive project label IDs; and fetch on open if needed based on workspaceSlug and projectId.\n  - Update the index barrel at apps/web/core/components/issues/select/index.ts to export from ./dropdown.\n- Update CreateLabelModal in apps/web/core/components/labels/create-label-modal.tsx to accept a createLabel prop: (data: Partial<IIssueLabel>) => Promise<IIssueLabel>. Remove its internal store import/useParams. On submit, call the injected createLabel(formData) then close modal and trigger onSuccess. Keep UI and validations intact.\n- Update issue modal form to pass a bound createLabel function from useLabel that captures workspaceSlug and projectId (createLabel.bind(...)) and remove passing projectId to the modal. Ensure newly created label is added into the forms label_ids array and triggers handleFormChange.\n\n6) Dropdown behavior consistency adjustments\n- In all base components using Combobox, pass the multiple prop directly in comboboxProps rather than conditionally adding it.\n- Ensure onDropdownOpen handlers (where provided) are called whenever isOpen becomes true and the fetch conditions are unmet (e.g., ids undefined), and that input is focused on desktop.\n\n7) react-hook-form helper addition\n- Add apps/web/helpers/react-hook-form.helper.ts with a getNestedError(errors, path) function that traverses a react-hook-form errors object by dot path to return a FieldError or undefined.\n\n8) URL utility normalization update\n- Update joinUrlPath in packages/utils/src/string.ts to normalize all segments by removing leading slashes on every segment and removing trailing slashes on every segment, regardless of their position. Preserve existing behavior for joining segments and skipping empty segments without changing function signature or exports.\n\nAcceptance criteria:\n- All dropdown components compile, with base components free of store/router usage and wrappers responsible for data injection and lazy fetching on open.\n- ProjectDropdown renderCondition is consistently typed to receive projectId string across callsites.\n- Issue creation flow triggers handleCreateSubWorkItem after creating a new issue; context type and provider expose this method.\n- WorkItemModalAdditionalProperties replaces IssueAdditionalProperties and renders as a no-op; UI layout around it remains stable.\n- Label selection works as before with lazy fetching on open; CreateLabelModal creates labels via injected function and updates the form as expected.\n- getNestedError helper is available and type-safe.\n- joinUrlPath trims leading and trailing slashes on all segments; existing consumers work unchanged.\n",
      "prompt": "Refactor the web apps dropdown and issue modal stack to decouple UI from MobX stores and align APIs across components.\n\nGoals:\n- Split each dropdown into a pure base component that only receives data (IDs and getters) and a thin wrapper that wires store hooks and lazy fetching on open. Apply this to member, module, project, state, and label selection dropdowns, and update the barrel exports to point at the new wrapper components.\n- Standardize Project selections renderCondition to accept a projectId string rather than a full project object, and update callsites accordingly.\n- Update the issue modal context to add a handler for creating sub-work items and adjust the project entities fetch signature. After successful issue creation, invoke the new sub-work item handler.\n- Replace the old additional properties component with a new work-item modal additional properties placeholder and update the form to use it.\n- Change label selection to the base/wrapper pattern and inject label creation into CreateLabelModal rather than reading from stores directly. Ensure newly created labels are added to the forms state.\n- Add a utility to get nested react-hook-form errors by path.\n- Normalize URL path joining to strip leading and trailing slashes from every segment.\n\nMaintain existing UX and accessibility, preserve current visual styles, and ensure lazy data fetching occurs on dropdown open only when needed.",
      "supplementalFiles": [
        "apps/web/core/components/dropdowns/buttons.tsx",
        "apps/web/core/components/dropdowns/constants.ts",
        "apps/web/core/components/issues/issue-modal/components/default-properties.tsx",
        "apps/web/core/hooks/use-dropdown.ts",
        "apps/web/core/hooks/use-platform-os.tsx",
        "apps/web/core/components/settings/sidebar/nav-item.tsx"
      ],
      "fileDiffs": [
        {
          "path": "apps/web/ce/components/issues/issue-modal/additional-properties.tsx",
          "status": "deleted",
          "diff": "Index: apps/web/ce/components/issues/issue-modal/additional-properties.tsx\n===================================================================\n--- apps/web/ce/components/issues/issue-modal/additional-properties.tsx\t5660b28 (parent)\n+++ apps/web/ce/components/issues/issue-modal/additional-properties.tsx\tf3daac6 (commit)\n@@ -1,9 +0,0 @@\n-type TIssueAdditionalPropertiesProps = {\n-  issueId: string | undefined;\n-  issueTypeId: string | null;\n-  projectId: string;\n-  workspaceSlug: string;\n-  isDraft?: boolean;\n-};\n-\n-export const IssueAdditionalProperties: React.FC<TIssueAdditionalPropertiesProps> = () => <></>;\n"
        },
        {
          "path": "apps/web/ce/components/issues/issue-modal/index.ts",
          "status": "modified",
          "diff": "Index: apps/web/ce/components/issues/issue-modal/index.ts\n===================================================================\n--- apps/web/ce/components/issues/issue-modal/index.ts\t5660b28 (parent)\n+++ apps/web/ce/components/issues/issue-modal/index.ts\tf3daac6 (commit)\n@@ -1,4 +1,3 @@\n export * from \"./provider\";\n export * from \"./issue-type-select\";\n-export * from \"./additional-properties\";\n export * from \"./template-select\";\n"
        },
        {
          "path": "apps/web/ce/components/issues/issue-modal/modal-additional-properties.tsx",
          "status": "added",
          "diff": "Index: apps/web/ce/components/issues/issue-modal/modal-additional-properties.tsx\n===================================================================\n--- apps/web/ce/components/issues/issue-modal/modal-additional-properties.tsx\t5660b28 (parent)\n+++ apps/web/ce/components/issues/issue-modal/modal-additional-properties.tsx\tf3daac6 (commit)\n@@ -0,0 +1,10 @@\n+import React from \"react\";\n+\n+export type TWorkItemModalAdditionalPropertiesProps = {\n+  isDraft?: boolean;\n+  projectId: string | null;\n+  workItemId: string | undefined;\n+  workspaceSlug: string;\n+};\n+\n+export const WorkItemModalAdditionalProperties: React.FC<TWorkItemModalAdditionalPropertiesProps> = () => null;\n"
        },
        {
          "path": "apps/web/ce/components/issues/issue-modal/provider.tsx",
          "status": "modified",
          "diff": "Index: apps/web/ce/components/issues/issue-modal/provider.tsx\n===================================================================\n--- apps/web/ce/components/issues/issue-modal/provider.tsx\t5660b28 (parent)\n+++ apps/web/ce/components/issues/issue-modal/provider.tsx\tf3daac6 (commit)\n@@ -43,8 +43,9 @@\n         handleCreateUpdatePropertyValues: () => Promise.resolve(),\n         handleProjectEntitiesFetch: () => Promise.resolve(),\n         handleTemplateChange: () => Promise.resolve(),\n         handleConvert: () => Promise.resolve(),\n+        handleCreateSubWorkItem: () => Promise.resolve(),\n       }}\n     >\n       {children}\n     </IssueModalContext.Provider>\n"
        },
        {
          "path": "apps/web/core/components/cycles/form.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/cycles/form.tsx\n===================================================================\n--- apps/web/core/components/cycles/form.tsx\t5660b28 (parent)\n+++ apps/web/core/components/cycles/form.tsx\tf3daac6 (commit)\n@@ -82,9 +82,9 @@\n                       }\n                     }}\n                     multiple={false}\n                     buttonVariant=\"border-with-text\"\n-                    renderCondition={(project) => !!projectsWithCreatePermissions?.[project.id]}\n+                    renderCondition={(projectId) => !!projectsWithCreatePermissions?.[projectId]}\n                     tabIndex={getIndex(\"cover_image\")}\n                   />\n                 </div>\n               )}\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/index.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/components/dropdowns/index.ts\n===================================================================\n--- apps/web/core/components/dropdowns/index.ts\t5660b28 (parent)\n+++ apps/web/core/components/dropdowns/index.ts\tf3daac6 (commit)\n@@ -1,10 +1,10 @@\n-export * from \"./member\";\n+export * from \"./member/dropdown\";\n export * from \"./cycle\";\n export * from \"./date-range\";\n export * from \"./date\";\n export * from \"./estimate\";\n export * from \"./merged-date\";\n-export * from \"./module\";\n+export * from \"./module/dropdown\";\n export * from \"./priority\";\n-export * from \"./project\";\n-export * from \"./state\";\n+export * from \"./project/dropdown\";\n+export * from \"./state/dropdown\";\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/member/base.tsx",
          "status": "renamed",
          "oldPath": "apps/web/core/components/dropdowns/member/index.tsx",
          "diff": "===================================================================\n--- apps/web/core/components/dropdowns/member/index.tsx\t5660b28 (parent)\n+++ apps/web/core/components/dropdowns/member/base.tsx\tf3daac6 (commit)\n@@ -1,34 +1,33 @@\n import { useRef, useState } from \"react\";\n import { observer } from \"mobx-react\";\n import { ChevronDown, LucideIcon } from \"lucide-react\";\n+// plane imports\n import { useTranslation } from \"@plane/i18n\";\n-// ui\n+import { IUserLite } from \"@plane/types\";\n import { ComboDropDown } from \"@plane/ui\";\n // helpers\n import { cn } from \"@plane/utils\";\n // hooks\n-import { useMember } from \"@/hooks/store\";\n import { useDropdown } from \"@/hooks/use-dropdown\";\n-// components\n+// local imports\n import { DropdownButton } from \"../buttons\";\n import { BUTTON_VARIANTS_WITH_TEXT } from \"../constants\";\n import { ButtonAvatars } from \"./avatar\";\n-// constants\n import { MemberOptions } from \"./member-options\";\n-// types\n import { MemberDropdownProps } from \"./types\";\n \n-type Props = {\n-  projectId?: string;\n+type TMemberDropdownBaseProps = {\n+  getUserDetails: (userId: string) => IUserLite | undefined;\n   icon?: LucideIcon;\n+  memberIds?: string[];\n   onClose?: () => void;\n-  renderByDefault?: boolean;\n+  onDropdownOpen?: () => void;\n   optionsClassName?: string;\n-  memberIds?: string[];\n+  renderByDefault?: boolean;\n } & MemberDropdownProps;\n \n-export const MemberDropdown: React.FC<Props> = observer((props) => {\n+export const MemberDropdownBase: React.FC<TMemberDropdownBaseProps> = observer((props) => {\n   const { t } = useTranslation();\n   const {\n     button,\n     buttonClassName,\n@@ -37,41 +36,39 @@\n     className = \"\",\n     disabled = false,\n     dropdownArrow = false,\n     dropdownArrowClassName = \"\",\n-    optionsClassName = \"\",\n+    getUserDetails,\n     hideIcon = false,\n+    icon,\n+    memberIds,\n     multiple,\n     onChange,\n     onClose,\n+    onDropdownOpen,\n+    optionsClassName = \"\",\n     placeholder = t(\"members\"),\n-    tooltipContent,\n     placement,\n-    projectId,\n+    renderByDefault = true,\n     showTooltip = false,\n     showUserDetails = false,\n     tabIndex,\n+    tooltipContent,\n     value,\n-    icon,\n-    renderByDefault = true,\n-    memberIds,\n   } = props;\n-  // states\n-  const [isOpen, setIsOpen] = useState(false);\n   // refs\n   const dropdownRef = useRef<HTMLDivElement | null>(null);\n   // popper-js refs\n   const [referenceElement, setReferenceElement] = useState<HTMLButtonElement | null>(null);\n+  // states\n+  const [isOpen, setIsOpen] = useState(false);\n \n-  const { getUserDetails } = useMember();\n-\n-  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n-  const comboboxProps: any = {\n+  const comboboxProps = {\n     value,\n     onChange,\n     disabled,\n+    multiple,\n   };\n-  if (multiple) comboboxProps.multiple = true;\n \n   const { handleClose, handleKeyDown, handleOnClick } = useDropdown({\n     dropdownRef,\n     isOpen,\n@@ -162,21 +159,22 @@\n   return (\n     <ComboDropDown\n       as=\"div\"\n       ref={dropdownRef}\n+      {...comboboxProps}\n       className={cn(\"h-full\", className)}\n       onChange={dropdownOnChange}\n       onKeyDown={handleKeyDown}\n       button={comboButton}\n       renderByDefault={renderByDefault}\n-      {...comboboxProps}\n     >\n       {isOpen && (\n         <MemberOptions\n+          getUserDetails={getUserDetails}\n+          isOpen={isOpen}\n           memberIds={memberIds}\n+          onDropdownOpen={onDropdownOpen}\n           optionsClassName={optionsClassName}\n-          isOpen={isOpen}\n-          projectId={projectId}\n           placement={placement}\n           referenceElement={referenceElement}\n         />\n       )}\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/member/dropdown.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/dropdowns/member/dropdown.tsx\n===================================================================\n--- apps/web/core/components/dropdowns/member/dropdown.tsx\t5660b28 (parent)\n+++ apps/web/core/components/dropdowns/member/dropdown.tsx\tf3daac6 (commit)\n@@ -0,0 +1,48 @@\n+import { observer } from \"mobx-react\";\n+import { useParams } from \"next/navigation\";\n+import { LucideIcon } from \"lucide-react\";\n+// hooks\n+import { useMember } from \"@/hooks/store\";\n+// local imports\n+import { MemberDropdownBase } from \"./base\";\n+import { MemberDropdownProps } from \"./types\";\n+\n+type TMemberDropdownProps = {\n+  icon?: LucideIcon;\n+  memberIds?: string[];\n+  onClose?: () => void;\n+  optionsClassName?: string;\n+  projectId?: string;\n+  renderByDefault?: boolean;\n+} & MemberDropdownProps;\n+\n+export const MemberDropdown: React.FC<TMemberDropdownProps> = observer((props) => {\n+  const { memberIds: propsMemberIds, projectId } = props;\n+  // router params\n+  const { workspaceSlug } = useParams();\n+  // store hooks\n+  const {\n+    getUserDetails,\n+    project: { getProjectMemberIds, fetchProjectMembers },\n+    workspace: { workspaceMemberIds },\n+  } = useMember();\n+\n+  const memberIds = propsMemberIds\n+    ? propsMemberIds\n+    : projectId\n+      ? getProjectMemberIds(projectId, false)\n+      : workspaceMemberIds;\n+\n+  const onDropdownOpen = () => {\n+    if (!memberIds && projectId && workspaceSlug) fetchProjectMembers(workspaceSlug.toString(), projectId);\n+  };\n+\n+  return (\n+    <MemberDropdownBase\n+      {...props}\n+      getUserDetails={getUserDetails}\n+      memberIds={memberIds ?? []}\n+      onDropdownOpen={onDropdownOpen}\n+    />\n+  );\n+});\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/member/member-options.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/dropdowns/member/member-options.tsx\n===================================================================\n--- apps/web/core/components/dropdowns/member/member-options.tsx\t5660b28 (parent)\n+++ apps/web/core/components/dropdowns/member/member-options.tsx\tf3daac6 (commit)\n@@ -2,48 +2,50 @@\n \n import { useEffect, useRef, useState } from \"react\";\n import { Placement } from \"@popperjs/core\";\n import { observer } from \"mobx-react\";\n-import { useParams } from \"next/navigation\";\n import { createPortal } from \"react-dom\";\n import { usePopper } from \"react-popper\";\n import { Check, Search } from \"lucide-react\";\n import { Combobox } from \"@headlessui/react\";\n-import { EUserPermissions } from \"@plane/constants\";\n+// plane imports\n import { useTranslation } from \"@plane/i18n\";\n-// plane ui\n import { Avatar } from \"@plane/ui\";\n import { cn, getFileURL } from \"@plane/utils\";\n-// helpers\n // hooks\n-import { useUser, useMember } from \"@/hooks/store\";\n+import { useUser } from \"@/hooks/store\";\n import { usePlatformOS } from \"@/hooks/use-platform-os\";\n+import { IUserLite } from \"@plane/types\";\n \n interface Props {\n-  memberIds?: string[];\n   className?: string;\n+  getUserDetails: (userId: string) => IUserLite | undefined;\n+  isOpen: boolean;\n+  memberIds?: string[];\n+  onDropdownOpen?: () => void;\n   optionsClassName?: string;\n-  projectId?: string;\n-  referenceElement: HTMLButtonElement | null;\n   placement: Placement | undefined;\n-  isOpen: boolean;\n+  referenceElement: HTMLButtonElement | null;\n }\n \n export const MemberOptions: React.FC<Props> = observer((props: Props) => {\n-  const { memberIds: propsMemberIds, projectId, referenceElement, placement, isOpen, optionsClassName = \"\" } = props;\n+  const {\n+    getUserDetails,\n+    isOpen,\n+    memberIds,\n+    onDropdownOpen,\n+    optionsClassName = \"\",\n+    placement,\n+    referenceElement,\n+  } = props;\n+  // refs\n+  const inputRef = useRef<HTMLInputElement | null>(null);\n   // states\n   const [query, setQuery] = useState(\"\");\n   const [popperElement, setPopperElement] = useState<HTMLDivElement | null>(null);\n-  // refs\n-  const inputRef = useRef<HTMLInputElement | null>(null);\n-  // store hooks\n+  // plane hooks\n   const { t } = useTranslation();\n-  const { workspaceSlug } = useParams();\n-  const {\n-    getUserDetails,\n-    project: { getProjectMemberIds, fetchProjectMembers, getProjectMemberDetails },\n-    workspace: { workspaceMemberIds },\n-  } = useMember();\n+  // store hooks\n   const { data: currentUser } = useUser();\n   const { isMobile } = usePlatformOS();\n   // popper-js init\n   const { styles, attributes } = usePopper(referenceElement, popperElement, {\n@@ -59,24 +61,15 @@\n   });\n \n   useEffect(() => {\n     if (isOpen) {\n-      onOpen();\n+      onDropdownOpen?.();\n       if (!isMobile) {\n         inputRef.current && inputRef.current.focus();\n       }\n     }\n   }, [isOpen, isMobile]);\n \n-  const memberIds = propsMemberIds\n-    ? propsMemberIds\n-    : projectId\n-      ? getProjectMemberIds(projectId, true)\n-      : workspaceMemberIds;\n-  const onOpen = () => {\n-    if (!memberIds && workspaceSlug && projectId) fetchProjectMembers(workspaceSlug.toString(), projectId);\n-  };\n-\n   const searchInputKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n     if (query !== \"\" && e.key === \"Escape\") {\n       e.stopPropagation();\n       setQuery(\"\");\n@@ -85,14 +78,8 @@\n \n   const options = memberIds\n     ?.map((userId) => {\n       const userDetails = getUserDetails(userId);\n-      if (projectId) {\n-        const role = getProjectMemberDetails(userId, projectId)?.role;\n-        const isGuest = role === EUserPermissions.GUEST;\n-        if (isGuest) return;\n-      }\n-\n       return {\n         value: userId,\n         query: `${userDetails?.display_name} ${userDetails?.first_name} ${userDetails?.last_name}`,\n         content: (\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/module/base.tsx",
          "status": "renamed",
          "oldPath": "apps/web/core/components/dropdowns/module/index.tsx",
          "diff": "===================================================================\n--- apps/web/core/components/dropdowns/module/index.tsx\t5660b28 (parent)\n+++ apps/web/core/components/dropdowns/module/base.tsx\tf3daac6 (commit)\n@@ -1,36 +1,35 @@\n \"use client\";\n \n import { ReactNode, useEffect, useRef, useState } from \"react\";\n import { observer } from \"mobx-react\";\n-import { ChevronDown, X } from \"lucide-react\";\n-// i18n\n+// plane imports\n import { useTranslation } from \"@plane/i18n\";\n-// ui\n-import { ComboDropDown, DiceIcon, Tooltip } from \"@plane/ui\";\n-// helpers\n+import { IModule } from \"@plane/types\";\n+import { ComboDropDown } from \"@plane/ui\";\n import { cn } from \"@plane/utils\";\n // hooks\n-import { useModule } from \"@/hooks/store\";\n import { useDropdown } from \"@/hooks/use-dropdown\";\n import { usePlatformOS } from \"@/hooks/use-platform-os\";\n-// components\n+// local imports\n import { DropdownButton } from \"../buttons\";\n import { BUTTON_VARIANTS_WITHOUT_TEXT } from \"../constants\";\n-// types\n import { TDropdownProps } from \"../types\";\n-// constants\n+import { ModuleButtonContent } from \"./button-content\";\n import { ModuleOptions } from \"./module-options\";\n \n-type Props = TDropdownProps & {\n+type TModuleDropdownBaseProps = TDropdownProps & {\n   button?: ReactNode;\n   dropdownArrow?: boolean;\n   dropdownArrowClassName?: string;\n-  projectId: string | undefined;\n-  showCount?: boolean;\n+  getModuleById: (moduleId: string) => IModule | null;\n+  itemClassName?: string;\n+  moduleIds?: string[];\n   onClose?: () => void;\n+  onDropdownOpen?: () => void;\n+  projectId: string | undefined;\n   renderByDefault?: boolean;\n-  itemClassName?: string;\n+  showCount?: boolean;\n } & (\n     | {\n         multiple: false;\n         onChange: (val: string | null) => void;\n@@ -42,151 +41,33 @@\n         value: string[] | null;\n       }\n   );\n \n-type ButtonContentProps = {\n-  disabled: boolean;\n-  dropdownArrow: boolean;\n-  dropdownArrowClassName: string;\n-  hideIcon: boolean;\n-  hideText: boolean;\n-  onChange: (moduleIds: string[]) => void;\n-  placeholder?: string;\n-  showCount: boolean;\n-  showTooltip?: boolean;\n-  value: string | string[] | null;\n-  className?: string;\n-};\n-\n-const ButtonContent: React.FC<ButtonContentProps> = (props) => {\n+export const ModuleDropdownBase: React.FC<TModuleDropdownBaseProps> = observer((props) => {\n   const {\n-    disabled,\n-    dropdownArrow,\n-    dropdownArrowClassName,\n-    hideIcon,\n-    hideText,\n-    onChange,\n-    placeholder,\n-    showCount,\n-    showTooltip = false,\n-    value,\n-    className,\n-  } = props;\n-  // store hooks\n-  const { getModuleById } = useModule();\n-  const { isMobile } = usePlatformOS();\n-\n-  if (Array.isArray(value))\n-    return (\n-      <>\n-        {showCount ? (\n-          <div className=\"relative flex items-center max-w-full gap-1\">\n-            {!hideIcon && <DiceIcon className=\"h-3 w-3 flex-shrink-0\" />}\n-            {(value.length > 0 || !!placeholder) && (\n-              <div className=\"max-w-40 flex-grow truncate\">\n-                {value.length > 0\n-                  ? value.length === 1\n-                    ? `${getModuleById(value[0])?.name || \"module\"}`\n-                    : `${value.length} Module${value.length === 1 ? \"\" : \"s\"}`\n-                  : placeholder}\n-              </div>\n-            )}\n-          </div>\n-        ) : value.length > 0 ? (\n-          <div className=\"flex max-w-full flex-grow flex-wrap items-center gap-2 truncate py-0.5 \">\n-            {value.map((moduleId) => {\n-              const moduleDetails = getModuleById(moduleId);\n-              return (\n-                <div\n-                  key={moduleId}\n-                  className={cn(\n-                    \"flex max-w-full items-center gap-1 rounded bg-custom-background-80 py-1 text-custom-text-200\",\n-                    className\n-                  )}\n-                >\n-                  {!hideIcon && <DiceIcon className=\"h-2.5 w-2.5 flex-shrink-0\" />}\n-                  {!hideText && (\n-                    <Tooltip\n-                      tooltipHeading=\"Title\"\n-                      tooltipContent={moduleDetails?.name}\n-                      disabled={!showTooltip}\n-                      isMobile={isMobile}\n-                      renderByDefault={false}\n-                    >\n-                      <span className=\"max-w-40 flex-grow truncate text-xs font-medium\">{moduleDetails?.name}</span>\n-                    </Tooltip>\n-                  )}\n-                  {!disabled && (\n-                    <Tooltip\n-                      tooltipContent=\"Remove\"\n-                      disabled={!showTooltip}\n-                      isMobile={isMobile}\n-                      renderByDefault={false}\n-                    >\n-                      <button\n-                        type=\"button\"\n-                        className=\"flex-shrink-0\"\n-                        onClick={() => {\n-                          const newModuleIds = value.filter((m) => m !== moduleId);\n-                          onChange(newModuleIds);\n-                        }}\n-                      >\n-                        <X className=\"h-2.5 w-2.5 text-custom-text-300 hover:text-red-500\" />\n-                      </button>\n-                    </Tooltip>\n-                  )}\n-                </div>\n-              );\n-            })}\n-          </div>\n-        ) : (\n-          <>\n-            {!hideIcon && <DiceIcon className=\"h-3 w-3 flex-shrink-0\" />}\n-            <span className=\"flex-grow truncate text-left\">{placeholder}</span>\n-          </>\n-        )}\n-        {dropdownArrow && (\n-          <ChevronDown className={cn(\"h-2.5 w-2.5 flex-shrink-0\", dropdownArrowClassName)} aria-hidden=\"true\" />\n-        )}\n-      </>\n-    );\n-  else\n-    return (\n-      <>\n-        {!hideIcon && <DiceIcon className=\"h-3 w-3 flex-shrink-0\" />}\n-        {!hideText && (\n-          <span className=\"flex-grow truncate text-left\">{value ? getModuleById(value)?.name : placeholder}</span>\n-        )}\n-        {dropdownArrow && (\n-          <ChevronDown className={cn(\"h-2.5 w-2.5 flex-shrink-0\", dropdownArrowClassName)} aria-hidden=\"true\" />\n-        )}\n-      </>\n-    );\n-};\n-\n-export const ModuleDropdown: React.FC<Props> = observer((props) => {\n-  const {\n     button,\n     buttonClassName,\n-    itemClassName = \"\",\n     buttonContainerClassName,\n     buttonVariant,\n     className = \"\",\n     disabled = false,\n     dropdownArrow = false,\n     dropdownArrowClassName = \"\",\n+    getModuleById,\n     hideIcon = false,\n+    itemClassName = \"\",\n+    moduleIds,\n     multiple,\n     onChange,\n     onClose,\n     placeholder = \"\",\n     placement,\n     projectId,\n+    renderByDefault = true,\n     showCount = false,\n     showTooltip = false,\n     tabIndex,\n     value,\n-    renderByDefault = true,\n   } = props;\n   // i18n\n   const { t } = useTranslation();\n   // states\n@@ -198,10 +79,8 @@\n   const [referenceElement, setReferenceElement] = useState<HTMLButtonElement | null>(null);\n   // store hooks\n   const { isMobile } = usePlatformOS();\n \n-  const { getModuleNameById } = useModule();\n-\n   const { handleClose, handleKeyDown, handleOnClick } = useDropdown({\n     dropdownRef,\n     inputRef,\n     isOpen,\n@@ -213,14 +92,14 @@\n     onChange(val);\n     if (!multiple) handleClose();\n   };\n \n-  const comboboxProps: any = {\n+  const comboboxProps = {\n     value,\n     onChange: dropdownOnChange,\n     disabled,\n+    multiple,\n   };\n-  if (multiple) comboboxProps.multiple = true;\n \n   useEffect(() => {\n     if (isOpen && inputRef.current && !isMobile) {\n       inputRef.current.focus();\n@@ -265,18 +144,18 @@\n             tooltipHeading={t(\"common.module\")}\n             tooltipContent={\n               Array.isArray(value)\n                 ? `${value\n-                    .map((moduleId) => getModuleNameById(moduleId))\n+                    .map((moduleId) => getModuleById(moduleId)?.name)\n                     .toString()\n                     .replaceAll(\",\", \", \")}`\n                 : \"\"\n             }\n             showTooltip={showTooltip}\n             variant={buttonVariant}\n             renderToolTipByDefault={renderByDefault}\n           >\n-            <ButtonContent\n+            <ModuleButtonContent\n               disabled={disabled}\n               dropdownArrow={dropdownArrow}\n               dropdownArrowClassName={dropdownArrowClassName}\n               hideIcon={hideIcon}\n@@ -306,12 +185,13 @@\n     >\n       {isOpen && projectId && (\n         <ModuleOptions\n           isOpen={isOpen}\n-          projectId={projectId}\n           placement={placement}\n           referenceElement={referenceElement}\n           multiple={multiple}\n+          getModuleById={getModuleById}\n+          moduleIds={moduleIds}\n         />\n       )}\n     </ComboDropDown>\n   );\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/module/button-content.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/dropdowns/module/button-content.tsx\n===================================================================\n--- apps/web/core/components/dropdowns/module/button-content.tsx\t5660b28 (parent)\n+++ apps/web/core/components/dropdowns/module/button-content.tsx\tf3daac6 (commit)\n@@ -0,0 +1,129 @@\n+\"use client\";\n+\n+import { ChevronDown, X } from \"lucide-react\";\n+// plane imports\n+import { DiceIcon, Tooltip } from \"@plane/ui\";\n+import { cn } from \"@plane/utils\";\n+// hooks\n+import { useModule } from \"@/hooks/store\";\n+import { usePlatformOS } from \"@/hooks/use-platform-os\";\n+\n+type ModuleButtonContentProps = {\n+  disabled: boolean;\n+  dropdownArrow: boolean;\n+  dropdownArrowClassName: string;\n+  hideIcon: boolean;\n+  hideText: boolean;\n+  onChange: (moduleIds: string[]) => void;\n+  placeholder?: string;\n+  showCount: boolean;\n+  showTooltip?: boolean;\n+  value: string | string[] | null;\n+  className?: string;\n+};\n+\n+export const ModuleButtonContent: React.FC<ModuleButtonContentProps> = (props) => {\n+  const {\n+    disabled,\n+    dropdownArrow,\n+    dropdownArrowClassName,\n+    hideIcon,\n+    hideText,\n+    onChange,\n+    placeholder,\n+    showCount,\n+    showTooltip = false,\n+    value,\n+    className,\n+  } = props;\n+  // store hooks\n+  const { getModuleById } = useModule();\n+  const { isMobile } = usePlatformOS();\n+\n+  if (Array.isArray(value))\n+    return (\n+      <>\n+        {showCount ? (\n+          <div className=\"relative flex items-center max-w-full gap-1\">\n+            {!hideIcon && <DiceIcon className=\"h-3 w-3 flex-shrink-0\" />}\n+            {(value.length > 0 || !!placeholder) && (\n+              <div className=\"max-w-40 flex-grow truncate\">\n+                {value.length > 0\n+                  ? value.length === 1\n+                    ? `${getModuleById(value[0])?.name || \"module\"}`\n+                    : `${value.length} Module${value.length === 1 ? \"\" : \"s\"}`\n+                  : placeholder}\n+              </div>\n+            )}\n+          </div>\n+        ) : value.length > 0 ? (\n+          <div className=\"flex max-w-full flex-grow flex-wrap items-center gap-2 truncate py-0.5 \">\n+            {value.map((moduleId) => {\n+              const moduleDetails = getModuleById(moduleId);\n+              return (\n+                <div\n+                  key={moduleId}\n+                  className={cn(\n+                    \"flex max-w-full items-center gap-1 rounded bg-custom-background-80 py-1 text-custom-text-200\",\n+                    className\n+                  )}\n+                >\n+                  {!hideIcon && <DiceIcon className=\"h-2.5 w-2.5 flex-shrink-0\" />}\n+                  {!hideText && (\n+                    <Tooltip\n+                      tooltipHeading=\"Title\"\n+                      tooltipContent={moduleDetails?.name}\n+                      disabled={!showTooltip}\n+                      isMobile={isMobile}\n+                      renderByDefault={false}\n+                    >\n+                      <span className=\"max-w-40 flex-grow truncate text-xs font-medium\">{moduleDetails?.name}</span>\n+                    </Tooltip>\n+                  )}\n+                  {!disabled && (\n+                    <Tooltip\n+                      tooltipContent=\"Remove\"\n+                      disabled={!showTooltip}\n+                      isMobile={isMobile}\n+                      renderByDefault={false}\n+                    >\n+                      <button\n+                        type=\"button\"\n+                        className=\"flex-shrink-0\"\n+                        onClick={() => {\n+                          const newModuleIds = value.filter((m) => m !== moduleId);\n+                          onChange(newModuleIds);\n+                        }}\n+                      >\n+                        <X className=\"h-2.5 w-2.5 text-custom-text-300 hover:text-red-500\" />\n+                      </button>\n+                    </Tooltip>\n+                  )}\n+                </div>\n+              );\n+            })}\n+          </div>\n+        ) : (\n+          <>\n+            {!hideIcon && <DiceIcon className=\"h-3 w-3 flex-shrink-0\" />}\n+            <span className=\"flex-grow truncate text-left\">{placeholder}</span>\n+          </>\n+        )}\n+        {dropdownArrow && (\n+          <ChevronDown className={cn(\"h-2.5 w-2.5 flex-shrink-0\", dropdownArrowClassName)} aria-hidden=\"true\" />\n+        )}\n+      </>\n+    );\n+  else\n+    return (\n+      <>\n+        {!hideIcon && <DiceIcon className=\"h-3 w-3 flex-shrink-0\" />}\n+        {!hideText && (\n+          <span className=\"flex-grow truncate text-left\">{value ? getModuleById(value)?.name : placeholder}</span>\n+        )}\n+        {dropdownArrow && (\n+          <ChevronDown className={cn(\"h-2.5 w-2.5 flex-shrink-0\", dropdownArrowClassName)} aria-hidden=\"true\" />\n+        )}\n+      </>\n+    );\n+};\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/module/dropdown.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/dropdowns/module/dropdown.tsx\n===================================================================\n--- apps/web/core/components/dropdowns/module/dropdown.tsx\t5660b28 (parent)\n+++ apps/web/core/components/dropdowns/module/dropdown.tsx\tf3daac6 (commit)\n@@ -0,0 +1,56 @@\n+\"use client\";\n+\n+import { ReactNode } from \"react\";\n+import { observer } from \"mobx-react\";\n+import { useParams } from \"next/navigation\";\n+// hooks\n+import { useModule } from \"@/hooks/store\";\n+// types\n+import { TDropdownProps } from \"../types\";\n+// local imports\n+import { ModuleDropdownBase } from \"./base\";\n+\n+type TModuleDropdownProps = TDropdownProps & {\n+  button?: ReactNode;\n+  dropdownArrow?: boolean;\n+  dropdownArrowClassName?: string;\n+  projectId: string | undefined;\n+  showCount?: boolean;\n+  onClose?: () => void;\n+  renderByDefault?: boolean;\n+  itemClassName?: string;\n+} & (\n+    | {\n+        multiple: false;\n+        onChange: (val: string | null) => void;\n+        value: string | null;\n+      }\n+    | {\n+        multiple: true;\n+        onChange: (val: string[]) => void;\n+        value: string[] | null;\n+      }\n+  );\n+\n+export const ModuleDropdown: React.FC<TModuleDropdownProps> = observer((props) => {\n+  const { projectId } = props;\n+  // router\n+  const { workspaceSlug } = useParams();\n+  // store hooks\n+  const { getModuleById, getProjectModuleIds, fetchModules } = useModule();\n+  // derived values\n+  const moduleIds = projectId ? getProjectModuleIds(projectId) : [];\n+\n+  const onDropdownOpen = () => {\n+    if (!moduleIds && projectId && workspaceSlug) fetchModules(workspaceSlug.toString(), projectId);\n+  };\n+\n+  return (\n+    <ModuleDropdownBase\n+      {...props}\n+      getModuleById={getModuleById}\n+      moduleIds={moduleIds ?? []}\n+      onDropdownOpen={onDropdownOpen}\n+    />\n+  );\n+});\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/module/module-options.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/dropdowns/module/module-options.tsx\n===================================================================\n--- apps/web/core/components/dropdowns/module/module-options.tsx\t5660b28 (parent)\n+++ apps/web/core/components/dropdowns/module/module-options.tsx\tf3daac6 (commit)\n@@ -2,23 +2,18 @@\n \n import { useEffect, useRef, useState } from \"react\";\n import { Placement } from \"@popperjs/core\";\n import { observer } from \"mobx-react\";\n-import { useParams } from \"next/navigation\";\n import { usePopper } from \"react-popper\";\n import { Check, Search } from \"lucide-react\";\n import { Combobox } from \"@headlessui/react\";\n-// i18n\n+// plane imports\n import { useTranslation } from \"@plane/i18n\";\n-//components\n+import { IModule } from \"@plane/types\";\n import { DiceIcon } from \"@plane/ui\";\n-//store\n import { cn } from \"@plane/utils\";\n-import { useModule } from \"@/hooks/store\";\n+// hooks\n import { usePlatformOS } from \"@/hooks/use-platform-os\";\n-//hooks\n-//icon\n-//types\n \n type DropdownOptions =\n   | {\n       value: string | null;\n@@ -27,27 +22,27 @@\n     }[]\n   | undefined;\n \n interface Props {\n-  projectId: string;\n-  referenceElement: HTMLButtonElement | null;\n-  placement: Placement | undefined;\n+  getModuleById: (moduleId: string) => IModule | null;\n   isOpen: boolean;\n+  moduleIds?: string[];\n   multiple: boolean;\n+  onDropdownOpen?: () => void;\n+  placement: Placement | undefined;\n+  referenceElement: HTMLButtonElement | null;\n }\n \n export const ModuleOptions = observer((props: Props) => {\n-  const { projectId, isOpen, referenceElement, placement, multiple } = props;\n-  // i18n\n-  const { t } = useTranslation();\n+  const { getModuleById, isOpen, moduleIds, multiple, onDropdownOpen, placement, referenceElement } = props;\n+  // refs\n+  const inputRef = useRef<HTMLInputElement | null>(null);\n   // states\n   const [query, setQuery] = useState(\"\");\n   const [popperElement, setPopperElement] = useState<HTMLDivElement | null>(null);\n-  // refs\n-  const inputRef = useRef<HTMLInputElement | null>(null);\n+  // plane hooks\n+  const { t } = useTranslation();\n   // store hooks\n-  const { workspaceSlug } = useParams();\n-  const { getProjectModuleIds, fetchModules, getModuleById } = useModule();\n   const { isMobile } = usePlatformOS();\n \n   useEffect(() => {\n     if (isOpen) {\n@@ -71,12 +66,10 @@\n       },\n     ],\n   });\n \n-  const moduleIds = getProjectModuleIds(projectId);\n-\n   const onOpen = () => {\n-    if (workspaceSlug && !moduleIds) fetchModules(workspaceSlug.toString(), projectId);\n+    onDropdownOpen?.();\n   };\n \n   const searchInputKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n     if (query !== \"\" && e.key === \"Escape\") {\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/project/base.tsx",
          "status": "renamed",
          "oldPath": "apps/web/core/components/dropdowns/project.tsx",
          "diff": "===================================================================\n--- apps/web/core/components/dropdowns/project.tsx\t5660b28 (parent)\n+++ apps/web/core/components/dropdowns/project/base.tsx\tf3daac6 (commit)\n@@ -2,35 +2,33 @@\n import { observer } from \"mobx-react\";\n import { usePopper } from \"react-popper\";\n import { Briefcase, Check, ChevronDown, Search } from \"lucide-react\";\n import { Combobox } from \"@headlessui/react\";\n-// ui\n+// plane imports\n import { useTranslation } from \"@plane/i18n\";\n import { ComboDropDown } from \"@plane/ui\";\n-// components\n import { cn } from \"@plane/utils\";\n+// components\n import { Logo } from \"@/components/common\";\n-// helpers\n // hooks\n-import { useProject } from \"@/hooks/store\";\n import { useDropdown } from \"@/hooks/use-dropdown\";\n-// plane web types\n+// plane web imports\n import { TProject } from \"@/plane-web/types\";\n-// components\n-import { DropdownButton } from \"./buttons\";\n-// constants\n-import { BUTTON_VARIANTS_WITH_TEXT } from \"./constants\";\n-// types\n-import { TDropdownProps } from \"./types\";\n+// local imports\n+import { DropdownButton } from \"../buttons\";\n+import { BUTTON_VARIANTS_WITH_TEXT } from \"../constants\";\n+import { TDropdownProps } from \"../types\";\n \n type Props = TDropdownProps & {\n   button?: ReactNode;\n+  currentProjectId?: string;\n   dropdownArrow?: boolean;\n   dropdownArrowClassName?: string;\n+  getProjectById: (projectId: string | null | undefined) => Partial<TProject> | undefined;\n   onClose?: () => void;\n-  renderCondition?: (project: TProject) => boolean;\n+  projectIds: string[];\n   renderByDefault?: boolean;\n-  currentProjectId?: string;\n+  renderCondition?: (projectId: string) => boolean;\n } & (\n     | {\n         multiple: false;\n         onChange: (val: string) => void;\n@@ -42,40 +40,44 @@\n         value: string[];\n       }\n   );\n \n-export const ProjectDropdown: React.FC<Props> = observer((props) => {\n+export const ProjectDropdownBase: React.FC<Props> = observer((props) => {\n   const {\n     button,\n     buttonClassName,\n     buttonContainerClassName,\n     buttonVariant,\n     className = \"\",\n+    currentProjectId,\n     disabled = false,\n     dropdownArrow = false,\n     dropdownArrowClassName = \"\",\n+    getProjectById,\n     hideIcon = false,\n     multiple,\n     onChange,\n     onClose,\n     placeholder = \"Project\",\n     placement,\n+    projectIds,\n+    renderByDefault = true,\n     renderCondition,\n     showTooltip = false,\n     tabIndex,\n     value,\n-    renderByDefault = true,\n-    currentProjectId,\n   } = props;\n-  // states\n-  const [query, setQuery] = useState(\"\");\n-  const [isOpen, setIsOpen] = useState(false);\n   // refs\n   const dropdownRef = useRef<HTMLDivElement | null>(null);\n   const inputRef = useRef<HTMLInputElement | null>(null);\n   // popper-js refs\n   const [referenceElement, setReferenceElement] = useState<HTMLButtonElement | null>(null);\n   const [popperElement, setPopperElement] = useState<HTMLDivElement | null>(null);\n+  // states\n+  const [query, setQuery] = useState(\"\");\n+  const [isOpen, setIsOpen] = useState(false);\n+  // plane hooks\n+  const { t } = useTranslation();\n   // popper-js init\n   const { styles, attributes } = usePopper(referenceElement, popperElement, {\n     placement: placement ?? \"bottom-start\",\n     modifiers: [\n@@ -87,19 +89,17 @@\n       },\n     ],\n   });\n   // store hooks\n-  const { joinedProjectIds, getProjectById } = useProject();\n-  const { t } = useTranslation();\n-  const options = joinedProjectIds?.map((projectId) => {\n+  const options = projectIds?.map((projectId) => {\n     const projectDetails = getProjectById(projectId);\n-    if (renderCondition && projectDetails && !renderCondition(projectDetails)) return;\n+    if (renderCondition && !renderCondition(projectId)) return;\n     return {\n       value: projectId,\n       query: `${projectDetails?.name}`,\n       content: (\n         <div className=\"flex items-center gap-2\">\n-          {projectDetails && (\n+          {projectDetails?.logo_props && (\n             <span className=\"grid place-items-center flex-shrink-0 h-4 w-4\">\n               <Logo logo={projectDetails?.logo_props} size={12} />\n             </span>\n           )}\n@@ -138,11 +138,11 @@\n     }\n   };\n \n   const getProjectIcon = (value: string | string[] | null) => {\n-    const renderIcon = (projectDetails: TProject) => (\n+    const renderIcon = (logoProps: TProject[\"logo_props\"]) => (\n       <span className=\"grid place-items-center flex-shrink-0 h-4 w-4\">\n-        <Logo logo={projectDetails.logo_props} size={14} />\n+        <Logo logo={logoProps} size={14} />\n       </span>\n     );\n \n     if (Array.isArray(value)) {\n@@ -150,18 +150,18 @@\n         <div className=\"flex items-center gap-0.5\">\n           {value.length > 0 ? (\n             value.map((projectId) => {\n               const projectDetails = getProjectById(projectId);\n-              return projectDetails ? renderIcon(projectDetails) : null;\n+              return projectDetails?.logo_props ? renderIcon(projectDetails.logo_props) : null;\n             })\n           ) : (\n             <Briefcase className=\"size-3 text-custom-text-300\" />\n           )}\n         </div>\n       );\n     } else {\n       const projectDetails = getProjectById(value);\n-      return projectDetails ? renderIcon(projectDetails) : null;\n+      return projectDetails?.logo_props ? renderIcon(projectDetails.logo_props) : null;\n     }\n   };\n \n   const comboButton = (\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/project/dropdown.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/dropdowns/project/dropdown.tsx\n===================================================================\n--- apps/web/core/components/dropdowns/project/dropdown.tsx\t5660b28 (parent)\n+++ apps/web/core/components/dropdowns/project/dropdown.tsx\tf3daac6 (commit)\n@@ -0,0 +1,35 @@\n+import { ReactNode } from \"react\";\n+import { observer } from \"mobx-react\";\n+// hooks\n+import { useProject } from \"@/hooks/store\";\n+// local imports\n+import { TDropdownProps } from \"../types\";\n+import { ProjectDropdownBase } from \"./base\";\n+\n+type Props = TDropdownProps & {\n+  button?: ReactNode;\n+  dropdownArrow?: boolean;\n+  dropdownArrowClassName?: string;\n+  onClose?: () => void;\n+  renderCondition?: (projectId: string) => boolean;\n+  renderByDefault?: boolean;\n+  currentProjectId?: string;\n+} & (\n+    | {\n+        multiple: false;\n+        onChange: (val: string) => void;\n+        value: string | null;\n+      }\n+    | {\n+        multiple: true;\n+        onChange: (val: string[]) => void;\n+        value: string[];\n+      }\n+  );\n+\n+export const ProjectDropdown: React.FC<Props> = observer((props) => {\n+  // store hooks\n+  const { joinedProjectIds, getProjectById } = useProject();\n+\n+  return <ProjectDropdownBase {...props} getProjectById={getProjectById} projectIds={joinedProjectIds} />;\n+});\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/state/base.tsx",
          "status": "renamed",
          "oldPath": "apps/web/core/components/dropdowns/state.tsx",
          "diff": "===================================================================\n--- apps/web/core/components/dropdowns/state.tsx\t5660b28 (parent)\n+++ apps/web/core/components/dropdowns/state/base.tsx\tf3daac6 (commit)\n@@ -1,47 +1,46 @@\n \"use client\";\n \n import { ReactNode, useRef, useState } from \"react\";\n import { observer } from \"mobx-react\";\n-import { useParams } from \"next/navigation\";\n import { usePopper } from \"react-popper\";\n import { ChevronDown, Search } from \"lucide-react\";\n import { Combobox } from \"@headlessui/react\";\n+// plane imports\n import { useTranslation } from \"@plane/i18n\";\n-// ui\n+import { IState } from \"@plane/types\";\n import { ComboDropDown, Spinner, StateGroupIcon } from \"@plane/ui\";\n-// helpers\n import { cn } from \"@plane/utils\";\n+// components\n+import { DropdownButton } from \"@/components/dropdowns/buttons\";\n+import { BUTTON_VARIANTS_WITH_TEXT } from \"@/components/dropdowns/constants\";\n+import { TDropdownProps } from \"@/components/dropdowns/types\";\n // hooks\n-import { useProjectState } from \"@/hooks/store\";\n import { useDropdown } from \"@/hooks/use-dropdown\";\n-// Plane-web\n+// plane web imports\n import { StateOption } from \"@/plane-web/components/workflow\";\n-// components\n-import { DropdownButton } from \"./buttons\";\n-// constants\n-import { BUTTON_VARIANTS_WITH_TEXT } from \"./constants\";\n-// types\n-import { TDropdownProps } from \"./types\";\n \n-type Props = TDropdownProps & {\n+export type TWorkItemStateDropdownBaseProps = TDropdownProps & {\n+  alwaysAllowStateChange?: boolean;\n   button?: ReactNode;\n   dropdownArrow?: boolean;\n   dropdownArrowClassName?: string;\n+  filterAvailableStateIds?: boolean;\n+  getStateById: (stateId: string | null | undefined) => IState | undefined;\n+  iconSize?: string;\n+  isForWorkItemCreation?: boolean;\n+  isInitializing?: boolean;\n   onChange: (val: string) => void;\n   onClose?: () => void;\n+  onDropdownOpen?: () => void;\n   projectId: string | undefined;\n+  renderByDefault?: boolean;\n   showDefaultState?: boolean;\n+  stateIds: string[];\n   value: string | undefined | null;\n-  renderByDefault?: boolean;\n-  stateIds?: string[];\n-  filterAvailableStateIds?: boolean;\n-  isForWorkItemCreation?: boolean;\n-  alwaysAllowStateChange?: boolean;\n-  iconSize?: string;\n };\n \n-export const StateDropdown: React.FC<Props> = observer((props) => {\n+export const WorkItemStateDropdownBase: React.FC<TWorkItemStateDropdownBaseProps> = observer((props) => {\n   const {\n     button,\n     buttonClassName,\n     buttonContainerClassName,\n@@ -49,31 +48,37 @@\n     className = \"\",\n     disabled = false,\n     dropdownArrow = false,\n     dropdownArrowClassName = \"\",\n+    getStateById,\n     hideIcon = false,\n+    iconSize = \"size-4\",\n+    isInitializing = false,\n     onChange,\n     onClose,\n+    onDropdownOpen,\n     placement,\n-    projectId,\n+    renderByDefault = true,\n     showDefaultState = true,\n     showTooltip = false,\n+    stateIds,\n     tabIndex,\n     value,\n-    renderByDefault = true,\n-    stateIds,\n-    iconSize = \"size-4\",\n   } = props;\n-  // states\n-  const [query, setQuery] = useState(\"\");\n-  const [isOpen, setIsOpen] = useState(false);\n-  const [stateLoader, setStateLoader] = useState(false);\n   // refs\n   const dropdownRef = useRef<HTMLDivElement | null>(null);\n   const inputRef = useRef<HTMLInputElement | null>(null);\n   // popper-js refs\n   const [referenceElement, setReferenceElement] = useState<HTMLButtonElement | null>(null);\n   const [popperElement, setPopperElement] = useState<HTMLDivElement | null>(null);\n+  // states\n+  const [query, setQuery] = useState(\"\");\n+  const [isOpen, setIsOpen] = useState(false);\n+  // store hooks\n+  const { t } = useTranslation();\n+  const statesList = stateIds.map((stateId) => getStateById(stateId)).filter((state) => !!state);\n+  const defaultState = statesList?.find((state) => state?.default);\n+  const stateValue = !!value ? value : showDefaultState ? defaultState?.id : undefined;\n   // popper-js init\n   const { styles, attributes } = usePopper(referenceElement, popperElement, {\n     placement: placement ?? \"bottom-start\",\n     modifiers: [\n@@ -84,18 +89,21 @@\n         },\n       },\n     ],\n   });\n-  // store hooks\n-  const { t } = useTranslation();\n-  const { workspaceSlug } = useParams();\n-  const { fetchProjectStates, getProjectStates, getStateById } = useProjectState();\n-  const statesList = stateIds\n-    ? stateIds.map((stateId) => getStateById(stateId)).filter((state) => !!state)\n-    : getProjectStates(projectId);\n-  const defaultState = statesList?.find((state) => state?.default);\n-  const stateValue = !!value ? value : showDefaultState ? defaultState?.id : undefined;\n+  // dropdown init\n+  const { handleClose, handleKeyDown, handleOnClick, searchInputKeyDown } = useDropdown({\n+    dropdownRef,\n+    inputRef,\n+    isOpen,\n+    onClose,\n+    onOpen: onDropdownOpen,\n+    query,\n+    setIsOpen,\n+    setQuery,\n+  });\n \n+  // derived values\n   const options = statesList?.map((state) => ({\n     value: state?.id,\n     query: `${state?.name}`,\n     content: (\n@@ -115,27 +123,8 @@\n     query === \"\" ? options : options?.filter((o) => o.query.toLowerCase().includes(query.toLowerCase()));\n \n   const selectedState = stateValue ? getStateById(stateValue) : undefined;\n \n-  const onOpen = async () => {\n-    if (!statesList && workspaceSlug && projectId) {\n-      setStateLoader(true);\n-      await fetchProjectStates(workspaceSlug.toString(), projectId);\n-      setStateLoader(false);\n-    }\n-  };\n-\n-  const { handleClose, handleKeyDown, handleOnClick, searchInputKeyDown } = useDropdown({\n-    dropdownRef,\n-    inputRef,\n-    isOpen,\n-    onClose,\n-    onOpen,\n-    query,\n-    setIsOpen,\n-    setQuery,\n-  });\n-\n   const dropdownOnChange = (val: string) => {\n     onChange(val);\n     handleClose();\n   };\n@@ -177,9 +166,9 @@\n             showTooltip={showTooltip}\n             variant={buttonVariant}\n             renderToolTipByDefault={renderByDefault}\n           >\n-            {stateLoader ? (\n+            {isInitializing ? (\n               <Spinner className=\"h-3.5 w-3.5\" />\n             ) : (\n               <>\n                 {!hideIcon && (\n"
        },
        {
          "path": "apps/web/core/components/dropdowns/state/dropdown.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/dropdowns/state/dropdown.tsx\n===================================================================\n--- apps/web/core/components/dropdowns/state/dropdown.tsx\t5660b28 (parent)\n+++ apps/web/core/components/dropdowns/state/dropdown.tsx\tf3daac6 (commit)\n@@ -0,0 +1,47 @@\n+\"use client\";\n+\n+import { useState } from \"react\";\n+import { observer } from \"mobx-react\";\n+import { useParams } from \"next/navigation\";\n+// hooks\n+import { useProjectState } from \"@/hooks/store\";\n+// local imports\n+import { WorkItemStateDropdownBase, TWorkItemStateDropdownBaseProps } from \"./base\";\n+\n+type TWorkItemStateDropdownProps = Omit<\n+  TWorkItemStateDropdownBaseProps,\n+  \"stateIds\" | \"getStateById\" | \"onDropdownOpen\" | \"isInitializing\"\n+> & {\n+  stateIds?: string[];\n+};\n+\n+export const StateDropdown: React.FC<TWorkItemStateDropdownProps> = observer((props) => {\n+  const { projectId, stateIds: propsStateIds } = props;\n+  // router params\n+  const { workspaceSlug } = useParams();\n+  // states\n+  const [stateLoader, setStateLoader] = useState(false);\n+  // store hooks\n+  const { fetchProjectStates, getProjectStateIds, getStateById } = useProjectState();\n+  // derived values\n+  const stateIds = propsStateIds ?? getProjectStateIds(projectId);\n+\n+  // fetch states if not provided\n+  const onDropdownOpen = async () => {\n+    if (stateIds === undefined && workspaceSlug && projectId) {\n+      setStateLoader(true);\n+      await fetchProjectStates(workspaceSlug.toString(), projectId);\n+      setStateLoader(false);\n+    }\n+  };\n+\n+  return (\n+    <WorkItemStateDropdownBase\n+      {...props}\n+      getStateById={getStateById}\n+      isInitializing={stateLoader}\n+      stateIds={stateIds ?? []}\n+      onDropdownOpen={onDropdownOpen}\n+    />\n+  );\n+});\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-modal/base.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-modal/base.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-modal/base.tsx\t5660b28 (parent)\n+++ apps/web/core/components/issues/issue-modal/base.tsx\tf3daac6 (commit)\n@@ -67,9 +67,9 @@\n   const { issues } = useIssues(storeType);\n   const { issues: projectIssues } = useIssues(EIssuesStoreType.PROJECT);\n   const { issues: draftIssues } = useIssues(EIssuesStoreType.WORKSPACE_DRAFT);\n   const { fetchIssue } = useIssueDetail();\n-  const { allowedProjectIds, handleCreateUpdatePropertyValues } = useIssueModal();\n+  const { allowedProjectIds, handleCreateUpdatePropertyValues, handleCreateSubWorkItem } = useIssueModal();\n   const { getProjectByIdentifier } = useProject();\n   // current store details\n   const { createIssue, updateIssue } = useIssuesActions(storeType);\n   // derived values\n@@ -221,8 +221,15 @@\n           projectId: response.project_id,\n           workspaceSlug: workspaceSlug?.toString(),\n           isDraft: is_draft_issue,\n         });\n+\n+        // create sub work item\n+        await handleCreateSubWorkItem({\n+          workspaceSlug: workspaceSlug?.toString(),\n+          projectId: response.project_id,\n+          parentId: response.id,\n+        });\n       }\n \n       setToast({\n         type: TOAST_TYPE.SUCCESS,\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-modal/components/project-select.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-modal/components/project-select.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-modal/components/project-select.tsx\t5660b28 (parent)\n+++ apps/web/core/components/issues/issue-modal/components/project-select.tsx\tf3daac6 (commit)\n@@ -45,9 +45,9 @@\n               handleFormChange();\n             }}\n             multiple={false}\n             buttonVariant=\"border-with-text\"\n-            renderCondition={(project) => allowedProjectIds.includes(project.id)}\n+            renderCondition={(projectId) => allowedProjectIds.includes(projectId)}\n             tabIndex={getIndex(\"project_id\")}\n             disabled={disabled}\n           />\n         </div>\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-modal/context/issue-modal-context.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-modal/context/issue-modal-context.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-modal/context/issue-modal-context.tsx\t5660b28 (parent)\n+++ apps/web/core/components/issues/issue-modal/context/issue-modal-context.tsx\tf3daac6 (commit)\n@@ -1,13 +1,13 @@\n import { createContext } from \"react\";\n // ce imports\n // react-hook-form\n+import { TIssueFields } from \"ce/components/issues\";\n import { UseFormReset, UseFormWatch } from \"react-hook-form\";\n // plane imports\n import { EditorRefApi } from \"@plane/editor\";\n import { ISearchIssueResponse, TIssue } from \"@plane/types\";\n import { TIssuePropertyValues, TIssuePropertyValueErrors } from \"@/plane-web/types/issue-types\";\n-import { TIssueFields } from \"ce/components/issues\";\n \n export type TPropertyValuesValidationProps = {\n   projectId: string | null;\n   workspaceSlug: string;\n@@ -27,17 +27,24 @@\n   issueTypeId: string | null | undefined;\n   isDraft?: boolean;\n };\n \n+export type TCreateSubWorkItemProps = {\n+  workspaceSlug: string;\n+  projectId: string;\n+  parentId: string;\n+};\n+\n export type THandleTemplateChangeProps = {\n   workspaceSlug: string;\n   reset: UseFormReset<TIssue>;\n   editorRef: React.MutableRefObject<EditorRefApi | null>;\n };\n \n export type THandleProjectEntitiesFetchProps = {\n+  workItemProjectId: string | null | undefined;\n+  workItemTypeId: string | undefined;\n   workspaceSlug: string;\n-  templateId: string;\n };\n \n export type THandleParentWorkItemDetailsProps = {\n   workspaceSlug: string;\n@@ -64,7 +71,8 @@\n   handleCreateUpdatePropertyValues: (props: TCreateUpdatePropertyValuesProps) => Promise<void>;\n   handleProjectEntitiesFetch: (props: THandleProjectEntitiesFetchProps) => Promise<void>;\n   handleTemplateChange: (props: THandleTemplateChangeProps) => Promise<void>;\n   handleConvert: (workspaceSlug: string, data: Partial<TIssue>) => Promise<void>;\n+  handleCreateSubWorkItem: (props: TCreateSubWorkItemProps) => Promise<void>;\n };\n \n export const IssueModalContext = createContext<TIssueModalContext | undefined>(undefined);\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-modal/form.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-modal/form.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-modal/form.tsx\t5660b28 (parent)\n+++ apps/web/core/components/issues/issue-modal/form.tsx\tf3daac6 (commit)\n@@ -31,18 +31,15 @@\n import { CreateLabelModal } from \"@/components/labels\";\n // helpers\n // hooks\n import { useIssueModal } from \"@/hooks/context/use-issue-modal\";\n-import { useIssueDetail, useProject, useProjectState, useWorkspaceDraftIssues } from \"@/hooks/store\";\n+import { useIssueDetail, useLabel, useProject, useProjectState, useWorkspaceDraftIssues } from \"@/hooks/store\";\n import { usePlatformOS } from \"@/hooks/use-platform-os\";\n import { useProjectIssueProperties } from \"@/hooks/use-project-issue-properties\";\n // plane web imports\n import { DeDupeButtonRoot, DuplicateModalRoot } from \"@/plane-web/components/de-dupe\";\n-import {\n-  IssueAdditionalProperties,\n-  IssueTypeSelect,\n-  WorkItemTemplateSelect,\n-} from \"@/plane-web/components/issues/issue-modal\";\n+import { IssueTypeSelect, WorkItemTemplateSelect } from \"@/plane-web/components/issues/issue-modal\";\n+import { WorkItemModalAdditionalProperties } from \"@/plane-web/components/issues/issue-modal/modal-additional-properties\";\n import { useDebouncedDuplicateIssues } from \"@/plane-web/hooks/use-debounced-duplicate-issues\";\n \n export interface IssueFormProps {\n   data?: Partial<TIssue>;\n@@ -123,8 +120,9 @@\n     handleTemplateChange,\n   } = useIssueModal();\n   const { isMobile } = usePlatformOS();\n   const { moveIssue } = useWorkspaceDraftIssues();\n+  const { createLabel } = useLabel();\n \n   const {\n     issue: { getIssueById },\n   } = useIssueDetail();\n@@ -361,11 +359,11 @@\n   return (\n     <FormProvider {...methods}>\n       {projectId && (\n         <CreateLabelModal\n+          createLabel={createLabel.bind(createLabel, workspaceSlug?.toString(), projectId)}\n           isOpen={labelModal}\n           handleClose={() => setLabelModal(false)}\n-          projectId={projectId}\n           onSuccess={(response) => {\n             setValue<\"label_ids\">(\"label_ids\", [...watch(\"label_ids\"), response.id]);\n             handleFormChange();\n           }}\n@@ -473,27 +471,21 @@\n                   onAssetUpload={onAssetUpload}\n                   onClose={onClose}\n                 />\n               </div>\n-              <div\n-                className={cn(\n-                  \"px-5\",\n-                  activeAdditionalPropertiesLength <= 4 &&\n-                    \"max-h-[25vh] overflow-hidden overflow-y-auto vertical-scrollbar scrollbar-sm\"\n-                )}\n-              >\n-                {projectId && (\n-                  <IssueAdditionalProperties\n-                    issueId={data?.id ?? data?.sourceIssueId}\n-                    issueTypeId={watch(\"type_id\")}\n-                    projectId={projectId}\n-                    workspaceSlug={workspaceSlug?.toString()}\n-                    isDraft={isDraft}\n-                  />\n-                )}\n-              </div>\n+              <WorkItemModalAdditionalProperties\n+                isDraft={isDraft}\n+                workItemId={data?.id ?? data?.sourceIssueId}\n+                projectId={projectId}\n+                workspaceSlug={workspaceSlug?.toString()}\n+              />\n             </div>\n-            <div className=\"px-4 py-3 border-t-[0.5px] border-custom-border-200 shadow-custom-shadow-xs rounded-b-lg bg-custom-background-100\">\n+            <div\n+              className={cn(\n+                \"px-4 py-3 border-t-[0.5px] border-custom-border-200 rounded-b-lg bg-custom-background-100\",\n+                activeAdditionalPropertiesLength > 0 && \"shadow-custom-shadow-xs\"\n+              )}\n+            >\n               <div className=\"pb-3 border-b-[0.5px] border-custom-border-200\">\n                 <IssueDefaultProperties\n                   control={control}\n                   id={data?.id}\n"
        },
        {
          "path": "apps/web/core/components/issues/select/base.tsx",
          "status": "renamed",
          "oldPath": "apps/web/core/components/issues/select/label.tsx",
          "diff": "===================================================================\n--- apps/web/core/components/issues/select/label.tsx\t5660b28 (parent)\n+++ apps/web/core/components/issues/select/base.tsx\tf3daac6 (commit)\n@@ -1,78 +1,77 @@\n-import React, { Fragment, useEffect, useRef, useState } from \"react\";\n+import React, { useEffect, useRef, useState } from \"react\";\n import { Placement } from \"@popperjs/core\";\n import { observer } from \"mobx-react\";\n-import { useParams } from \"next/navigation\";\n import { usePopper } from \"react-popper\";\n import { Check, Component, Plus, Search, Tag } from \"lucide-react\";\n import { Combobox } from \"@headlessui/react\";\n import { useOutsideClickDetector } from \"@plane/hooks\";\n import { useTranslation } from \"@plane/i18n\";\n-// components\n+// plane imports\n+import { IIssueLabel } from \"@plane/types\";\n import { cn } from \"@plane/utils\";\n+// components\n import { IssueLabelsList } from \"@/components/ui\";\n-// helpers\n // hooks\n-import { useLabel } from \"@/hooks/store\";\n import { useDropdownKeyDown } from \"@/hooks/use-dropdown-key-down\";\n import { usePlatformOS } from \"@/hooks/use-platform-os\";\n \n-type Props = {\n-  setIsOpen: React.Dispatch<React.SetStateAction<boolean>>;\n-  value: string[];\n-  onChange: (value: string[]) => void;\n-  projectId: string | undefined;\n-  label?: JSX.Element;\n-  disabled?: boolean;\n-  tabIndex?: number;\n-  createLabelEnabled?: boolean;\n-  buttonContainerClassName?: string;\n+export type TWorkItemLabelSelectBaseProps = {\n   buttonClassName?: string;\n+  buttonContainerClassName?: string;\n+  createLabelEnabled?: boolean;\n+  disabled?: boolean;\n+  getLabelById: (labelId: string) => IIssueLabel | null;\n+  label?: JSX.Element;\n+  labelIds: string[];\n+  onChange: (value: string[]) => void;\n+  onDropdownOpen?: () => void;\n   placement?: Placement;\n+  setIsOpen: React.Dispatch<React.SetStateAction<boolean>>;\n+  tabIndex?: number;\n+  value: string[];\n };\n \n-export const IssueLabelSelect: React.FC<Props> = observer((props) => {\n+export const WorkItemLabelSelectBase: React.FC<TWorkItemLabelSelectBaseProps> = observer((props) => {\n   const {\n-    setIsOpen,\n-    value,\n-    onChange,\n-    projectId,\n-    label,\n-    disabled = false,\n-    tabIndex,\n-    createLabelEnabled = false,\n-    buttonContainerClassName,\n     buttonClassName,\n+    buttonContainerClassName,\n+    createLabelEnabled = false,\n+    disabled = false,\n+    getLabelById,\n+    label,\n+    labelIds,\n+    onChange,\n+    onDropdownOpen,\n     placement,\n+    setIsOpen,\n+    tabIndex,\n+    value,\n   } = props;\n-  const { t } = useTranslation();\n-  // router\n-  const { workspaceSlug } = useParams();\n-  // store hooks\n-  const { getProjectLabels, fetchProjectLabels } = useLabel();\n-  const { isMobile } = usePlatformOS();\n+  // refs\n+  const dropdownRef = useRef<HTMLDivElement | null>(null);\n+  const inputRef = useRef<HTMLInputElement | null>(null);\n   // states\n   const [query, setQuery] = useState(\"\");\n   const [referenceElement, setReferenceElement] = useState<HTMLButtonElement | null>(null);\n   const [popperElement, setPopperElement] = useState<HTMLDivElement | null>(null);\n   const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n-  // refs\n-  const dropdownRef = useRef<HTMLDivElement | null>(null);\n-  const inputRef = useRef<HTMLInputElement | null>(null);\n-  // popper\n+  // plane hooks\n+  const { t } = useTranslation();\n+  // store hooks\n+  const { isMobile } = usePlatformOS();\n+  // popper-js init\n   const { styles, attributes } = usePopper(referenceElement, popperElement, {\n     placement: placement ?? \"bottom-start\",\n   });\n-\n-  const projectLabels = getProjectLabels(projectId);\n-\n   // derived values\n+  const labelsList = labelIds.map((labelId) => getLabelById(labelId)).filter((label) => !!label);\n   const filteredOptions =\n-    query === \"\" ? projectLabels : projectLabels?.filter((l) => l.name.toLowerCase().includes(query.toLowerCase()));\n+    query === \"\" ? labelsList : labelsList?.filter((l) => l.name.toLowerCase().includes(query.toLowerCase()));\n \n   const onOpen = () => {\n-    if (!projectLabels && workspaceSlug && projectId) fetchProjectLabels(workspaceSlug.toString(), projectId);\n     if (referenceElement) referenceElement.focus();\n+    onDropdownOpen?.();\n   };\n \n   const handleClose = () => {\n     if (isDropdownOpen) setIsDropdownOpen(false);\n@@ -130,9 +129,9 @@\n           label\n         ) : value && value.length > 0 ? (\n           <span className={cn(\"flex items-center justify-center gap-2 text-xs h-full\", buttonClassName)}>\n             <IssueLabelsList\n-              labels={value.map((v) => projectLabels?.find((l) => l.id === v)) ?? []}\n+              labels={value.map((v) => labelsList?.find((l) => l.id === v)) ?? []}\n               length={3}\n               showLength\n             />\n           </span>\n@@ -168,12 +167,12 @@\n                 displayValue={(assigned: any) => assigned?.name}\n               />\n             </div>\n             <div className=\"mt-2 max-h-48 space-y-1 overflow-y-scroll\">\n-              {projectLabels && filteredOptions ? (\n+              {labelsList && filteredOptions ? (\n                 filteredOptions.length > 0 ? (\n                   filteredOptions.map((label) => {\n-                    const children = projectLabels?.filter((l) => l.parent === label.id);\n+                    const children = labelsList?.filter((l) => l.parent === label.id);\n \n                     if (children.length === 0) {\n                       if (!label.parent)\n                         return (\n"
        },
        {
          "path": "apps/web/core/components/issues/select/dropdown.tsx",
          "status": "added",
          "diff": "Index: apps/web/core/components/issues/select/dropdown.tsx\n===================================================================\n--- apps/web/core/components/issues/select/dropdown.tsx\t5660b28 (parent)\n+++ apps/web/core/components/issues/select/dropdown.tsx\tf3daac6 (commit)\n@@ -0,0 +1,35 @@\n+import React from \"react\";\n+import { observer } from \"mobx-react\";\n+import { useParams } from \"next/navigation\";\n+// hooks\n+import { useLabel } from \"@/hooks/store\";\n+// local imports\n+import { TWorkItemLabelSelectBaseProps, WorkItemLabelSelectBase } from \"./base\";\n+\n+type TWorkItemLabelSelectProps = Omit<TWorkItemLabelSelectBaseProps, \"labelIds\" | \"getLabelById\" | \"onDropdownOpen\"> & {\n+  projectId: string | undefined;\n+};\n+\n+export const IssueLabelSelect: React.FC<TWorkItemLabelSelectProps> = observer((props) => {\n+  const { projectId } = props;\n+  // router\n+  const { workspaceSlug } = useParams();\n+  // store hooks\n+  const { getProjectLabelIds, getLabelById, fetchProjectLabels } = useLabel();\n+  // derived values\n+  const projectLabelIds = getProjectLabelIds(projectId);\n+\n+  const onDropdownOpen = () => {\n+    if (projectLabelIds === undefined && workspaceSlug && projectId)\n+      fetchProjectLabels(workspaceSlug.toString(), projectId);\n+  };\n+\n+  return (\n+    <WorkItemLabelSelectBase\n+      {...props}\n+      getLabelById={getLabelById}\n+      labelIds={projectLabelIds ?? []}\n+      onDropdownOpen={onDropdownOpen}\n+    />\n+  );\n+});\n"
        },
        {
          "path": "apps/web/core/components/issues/select/index.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/select/index.ts\n===================================================================\n--- apps/web/core/components/issues/select/index.ts\t5660b28 (parent)\n+++ apps/web/core/components/issues/select/index.ts\tf3daac6 (commit)\n@@ -1,1 +1,1 @@\n-export * from \"./label\";\n+export * from \"./dropdown\";\n"
        },
        {
          "path": "apps/web/core/components/labels/create-label-modal.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/labels/create-label-modal.tsx\n===================================================================\n--- apps/web/core/components/labels/create-label-modal.tsx\t5660b28 (parent)\n+++ apps/web/core/components/labels/create-label-modal.tsx\tf3daac6 (commit)\n@@ -1,9 +1,8 @@\n \"use client\";\n \n import React, { useEffect } from \"react\";\n import { observer } from \"mobx-react\";\n-import { useParams } from \"next/navigation\";\n import { TwitterPicker } from \"react-color\";\n import { Controller, useForm } from \"react-hook-form\";\n import { ChevronDown } from \"lucide-react\";\n import { Dialog, Popover, Transition } from \"@headlessui/react\";\n@@ -15,16 +14,16 @@\n import { Button, Input, TOAST_TYPE, setToast } from \"@plane/ui\";\n // helpers\n import { getTabIndex } from \"@plane/utils\";\n // hooks\n-import { useLabel } from \"@/hooks/store\";\n+\n import { usePlatformOS } from \"@/hooks/use-platform-os\";\n \n // types\n type Props = {\n-  isOpen: boolean;\n-  projectId: string;\n+  createLabel: (data: Partial<IIssueLabel>) => Promise<IIssueLabel>;\n   handleClose: () => void;\n+  isOpen: boolean;\n   onSuccess?: (response: IIssueLabel) => void;\n };\n \n const defaultValues: Partial<IState> = {\n@@ -32,13 +31,10 @@\n   color: \"rgb(var(--color-text-200))\",\n };\n \n export const CreateLabelModal: React.FC<Props> = observer((props) => {\n-  const { isOpen, projectId, handleClose, onSuccess } = props;\n-  // router\n-  const { workspaceSlug } = useParams();\n+  const { createLabel, handleClose, isOpen, onSuccess } = props;\n   // store hooks\n-  const { createLabel } = useLabel();\n   const { isMobile } = usePlatformOS();\n   // form info\n   const {\n     formState: { errors, isSubmitting },\n@@ -70,11 +66,9 @@\n     reset(defaultValues);\n   };\n \n   const onSubmit = async (formData: IIssueLabel) => {\n-    if (!workspaceSlug) return;\n-\n-    await createLabel(workspaceSlug.toString(), projectId.toString(), formData)\n+    await createLabel(formData)\n       .then((res) => {\n         onClose();\n         if (onSuccess) onSuccess(res);\n       })\n"
        },
        {
          "path": "apps/web/core/components/modules/form.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/modules/form.tsx\n===================================================================\n--- apps/web/core/components/modules/form.tsx\t5660b28 (parent)\n+++ apps/web/core/components/modules/form.tsx\tf3daac6 (commit)\n@@ -92,9 +92,9 @@\n                       }\n                     }}\n                     multiple={false}\n                     buttonVariant=\"border-with-text\"\n-                    renderCondition={(project) => !!projectsWithCreatePermissions?.[project.id]}\n+                    renderCondition={(projectId) => !!projectsWithCreatePermissions?.[projectId]}\n                     tabIndex={getIndex(\"cover_image\")}\n                   />\n                 </div>\n               )}\n"
        },
        {
          "path": "apps/web/helpers/react-hook-form.helper.ts",
          "status": "added",
          "diff": "Index: apps/web/helpers/react-hook-form.helper.ts\n===================================================================\n--- apps/web/helpers/react-hook-form.helper.ts\t5660b28 (parent)\n+++ apps/web/helpers/react-hook-form.helper.ts\tf3daac6 (commit)\n@@ -0,0 +1,27 @@\n+import { FieldError, FieldValues } from \"react-hook-form\";\n+\n+/**\n+ * Get a nested error from a form's errors object\n+ * @param errors - The form's errors object\n+ * @param path - The path to the error\n+ * @returns The error or undefined if not found\n+ */\n+export const getNestedError = <T extends FieldValues>(errors: T, path: string): FieldError | undefined => {\n+  const keys = path.split(\".\");\n+  let current: unknown = errors;\n+\n+  for (const key of keys) {\n+    if (current && typeof current === \"object\" && key in current) {\n+      current = (current as Record<string, unknown>)[key];\n+    } else {\n+      return undefined;\n+    }\n+  }\n+\n+  // Check if the final value is a FieldError\n+  if (current && typeof current === \"object\" && \"message\" in current) {\n+    return current as FieldError;\n+  }\n+\n+  return undefined;\n+};\n"
        },
        {
          "path": "packages/utils/src/string.ts",
          "status": "modified",
          "diff": "Index: packages/utils/src/string.ts\n===================================================================\n--- packages/utils/src/string.ts\t5660b28 (parent)\n+++ packages/utils/src/string.ts\tf3daac6 (commit)\n@@ -336,23 +336,19 @@\n   const validSegments = segments.filter((segment) => segment !== \"\");\n   if (validSegments.length === 0) return \"\";\n \n   // Process segments to normalize slashes\n-  const processedSegments = validSegments.map((segment, index) => {\n+  const processedSegments = validSegments.map((segment) => {\n     let processed = segment;\n \n     // Remove leading slashes from all segments except the first\n-    if (index > 0) {\n-      while (processed.startsWith(\"/\")) {\n-        processed = processed.substring(1);\n-      }\n+    while (processed.startsWith(\"/\")) {\n+      processed = processed.substring(1);\n     }\n \n     // Remove trailing slashes from all segments except the last\n-    if (index < validSegments.length - 1) {\n-      while (processed.endsWith(\"/\")) {\n-        processed = processed.substring(0, processed.length - 1);\n-      }\n+    while (processed.endsWith(\"/\")) {\n+      processed = processed.substring(0, processed.length - 1);\n     }\n \n     return processed;\n   });\n"
        }
      ]
    },
    {
      "id": "refactor-notifications",
      "sha": "07e937cd8ec16fc9ce84a8535ea2f32d1b445af2",
      "parentSha": "1f1b4217352aeedd80320780efff315ec5a2f56c",
      "spec": "Implement a workspace notifications refactor and shared work-item preview typing across web and types packages.\n\n1) Shared work item preview type\n- File: packages/types/src/issues/issue.d.ts\n  - Import EIssueServiceType and EIssuesStoreType from @plane/constants.\n  - Define and export interface IWorkItemPeekOverview with optional props:\n    - embedIssue?: boolean\n    - embedRemoveCurrentNotification?: () => void\n    - is_draft?: boolean\n    - storeType?: EIssuesStoreType\n\n2) Use shared type in IssuePeekOverview\n- File: web/core/components/issues/peek-overview/root.tsx\n  - Replace the local IIssuePeekOverview interface with imported IWorkItemPeekOverview from @plane/types.\n  - Update component signature to FC<IWorkItemPeekOverview>.\n  - Do not change runtime behavior; only the type use and any imports.\n\n3) Thread serviceType through issue subscriptions\n- File: web/core/components/issues/issue-detail/subscription.tsx\n  - Extend TIssueSubscription with optional serviceType?: EIssueServiceType, defaulting to ISSUES.\n  - Call useIssueDetail(serviceType) instead of useIssueDetail().\n  - Disable the button when loading (disabled={!isEditable || loading}).\n  - Update error toast key from t(\"commons.error.message\") to t(\"common.error.message\").\n\n- File: web/core/store/issue/issue-details/root.store.ts\n  - When constructing IssueSubscriptionStore, pass serviceType: new IssueSubscriptionStore(this, serviceType).\n\n- File: web/core/store/issue/issue-details/subscription.store.ts\n  - Update constructor to accept (rootStore: IIssueDetail, serviceType: EIssueServiceType).\n  - Construct IssueService with the provided serviceType.\n\n4) Refactor workspace notifications into sidebar + content\n- Page entry\n  - File: web/app/(all)/[workspaceSlug]/(projects)/notifications/page.tsx\n    - Replace ad-hoc fetching and detail rendering with a single <NotificationsRoot workspaceSlug={workspaceSlug?.toString()} />.\n\n- Content area (main view)\n  - File: web/core/components/workspace-notifications/root.tsx\n    - Convert from the old sidebar renderer into the content panel.\n    - Imports/Dependencies:\n      - SWR: useSWR\n      - ENotificationLoader, ENotificationQueryParamType from @plane/constants\n      - cn from @plane/utils\n      - LogoSpinner, SimpleEmptyState, InboxContentRoot components\n      - Hooks: useWorkspace, useWorkspaceNotifications, useUserPermissions, useResolvedAssetPath, useWorkspaceIssueProperties, and new useNotificationPreview (from @/plane-web/hooks/use-notification-preview)\n    - Props: accept optional workspaceSlug?: string.\n    - Data flow:\n      - Use useWorkspaceIssueProperties(workspaceSlug) to prefetch workspace issue properties.\n      - Determine loader behavior based on whether there are existing notification IDs for the current workspace; fetch notifications via getNotifications with INIT or MUTATION loader and INIT or CURRENT query param.\n      - Fetch user project permission info (fetchUserProjectInfo) if the selected notification is an inbox issue.\n      - Define embedRemoveCurrentNotification to clear the selected notification via setCurrentSelectedNotificationId(undefined).\n      - Use useNotificationPreview() to obtain:\n        - isWorkItem (boolean), PeekOverviewComponent (IssuePeekOverview), setPeekWorkItem\n      - On unmount, clear preview by calling setPeekWorkItem(undefined).\n    - Rendering:\n      - If no currentSelectedNotificationId: show SimpleEmptyState with asset path \"/empty-state/intake/issue-detail\".\n      - Else, if selected notification is inbox_issue with workspace_slug/project_id/issue_id present:\n        - Show LogoSpinner while project permissions load.\n        - Otherwise, render <InboxContentRoot ... isNotificationEmbed embedRemoveCurrentNotification={...} />\n      - Else render <PeekOverviewComponent embedIssue embedRemoveCurrentNotification={...} />\n      - Wrap with a container that sets overflow-y-auto only when isWorkItem.\n\n- Sidebar area (list and filters)\n  - File: web/core/components/workspace-notifications/sidebar/root.tsx (new)\n    - Move existing sidebar list UI from the old web/core/components/workspace-notifications/root.tsx here.\n    - Keep: header row (NotificationSidebarHeader), tab switching (NOTIFICATION_TABS), unread counters, AppliedFilters, loaders, empty state, and ContentWrapper with list.\n    - Use getWorkspaceBySlug + notificationIdsByWorkspaceId to generate the list.\n    - Import NotificationListRoot from @/plane-web/components/workspace-notifications/list-root.\n    - Preserve width behavior reacting to currentSelectedNotificationId.\n\n  - File: web/core/components/workspace-notifications/sidebar/index.ts\n    - Export from \"./root\" in addition to existing exports.\n\n  - File: web/core/components/workspace-notifications/sidebar/header/root.tsx\n    - Add className=\"my-auto bg-custom-background-100\" to Header to fix header color.\n\n5) Bridge CE list component and export\n- File: web/ce/components/workspace-notifications/index.ts\n  - Export * from \"./list-root\".\n\n- File: web/ce/components/workspace-notifications/list-root.tsx (new)\n  - Create NotificationListRoot wrapper that forwards props to NotificationCardListRoot, with props:\n    - workspaceSlug: string\n    - workspaceId: string\n\n6) Notification preview hook (CE)\n- File: web/ce/hooks/use-notification-preview.tsx (new)\n  - Implement hook returning:\n    - isWorkItem: boolean (true if useIssueDetail(EIssueServiceType.ISSUES).peekIssue is truthy)\n    - PeekOverviewComponent: IssuePeekOverview\n    - setPeekWorkItem: setPeekIssue from useIssueDetail(EIssueServiceType.ISSUES)\n  - Type the component as React.ComponentType<IWorkItemPeekOverview>.\n\n7) Import alignment\n- In files where relevant (e.g., new content root), use cn from @plane/utils instead of local helpers.\n- Ensure imports for EIssueServiceType and IWorkItemPeekOverview line up with the updates above.\n\nObservable outcomes to validate\n- Navigating to the workspace notifications route shows a sidebar (list with filters/tabs) and a content area.\n- Clicking a notification that references a non-inbox work item opens an IssuePeekOverview in the content area; clicking inbox notifications mounts InboxContentRoot.\n- The empty state is shown when nothing is selected.\n- Subscribing/unsubscribing from an issue works across service types (issues/epics/work-items) and the button disables while loading.\n- IssuePeekOverview props are typed via the shared interface in @plane/types.\n- Header background in the notifications sidebar is corrected.",
      "prompt": "Refactor the workspace notifications experience into a two-pane layout with a sidebar for the list and a content area for the preview. Introduce a shared props type for the work-item peek component, and make issue notification subscriptions work across different work item service types.\n\nSpecifically, create a sidebar component for notifications with tabs, filters, counts, pagination and empty state; and a content component that shows either an inbox issue view or a work-item peek depending on the selected notification. Update the notifications page to render the new content root. Centralize the work-item peek props in the shared types package and switch the peek component to use them. Ensure the subscription UI in issue detail threads the appropriate service type to the underlying APIs and disables its button while loading. Keep imports consistent with project conventions.\n\nAim for no behavioral regressions and ensure empty states, loading states, and permission checks still work.",
      "supplementalFiles": [
        "web/core/services/issue/issue.service.ts",
        "web/core/components/workspace-notifications/sidebar/notification-card/item.tsx",
        "web/ce/components/workspace-notifications/notification-card/root.tsx",
        "web/core/hooks/use-workspace-issue-properties.ts",
        "packages/constants/src/index.ts",
        "web/core/hooks/store/index.ts"
      ],
      "fileDiffs": [
        {
          "path": "packages/types/src/issues/issue.d.ts",
          "status": "modified",
          "diff": "Index: packages/types/src/issues/issue.d.ts\n===================================================================\n--- packages/types/src/issues/issue.d.ts\t1f1b421 (parent)\n+++ packages/types/src/issues/issue.d.ts\t07e937c (commit)\n@@ -1,5 +1,5 @@\n-import { EIssueServiceType } from \"@plane/constants\";\n+import { EIssueServiceType, EIssuesStoreType } from \"@plane/constants\";\n import { TIssuePriorities } from \"../issues\";\n import { TIssueAttachment } from \"./issue_attachment\";\n import { TIssueLink } from \"./issue_link\";\n import { TIssueReaction, IIssuePublicReaction, IPublicVote } from \"./issue_reaction\";\n@@ -180,4 +180,11 @@\n   total_pages: number;\n   extra_stats: null;\n   results: TPublicIssueResponseResults;\n };\n+\n+export interface IWorkItemPeekOverview {\n+  embedIssue?: boolean;\n+  embedRemoveCurrentNotification?: () => void;\n+  is_draft?: boolean;\n+  storeType?: EIssuesStoreType;\n+}\n\\ No newline at end of file\n"
        },
        {
          "path": "web/app/(all)/[workspaceSlug]/(projects)/notifications/page.tsx",
          "status": "modified",
          "diff": "Index: web/app/(all)/[workspaceSlug]/(projects)/notifications/page.tsx\n===================================================================\n--- web/app/(all)/[workspaceSlug]/(projects)/notifications/page.tsx\t1f1b421 (parent)\n+++ web/app/(all)/[workspaceSlug]/(projects)/notifications/page.tsx\t07e937c (commit)\n@@ -1,122 +1,31 @@\n \"use client\";\n \n-import { useCallback, useEffect } from \"react\";\n import { observer } from \"mobx-react\";\n import { useParams } from \"next/navigation\";\n-import useSWR from \"swr\";\n // plane imports\n-import { ENotificationLoader, ENotificationQueryParamType } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n // components\n-import { LogoSpinner } from \"@/components/common\";\n import { PageHead } from \"@/components/core\";\n-import { SimpleEmptyState } from \"@/components/empty-state\";\n-import { InboxContentRoot } from \"@/components/inbox\";\n-import { IssuePeekOverview } from \"@/components/issues\";\n+import { NotificationsRoot } from \"@/components/workspace-notifications\";\n // hooks\n-import { useIssueDetail, useUserPermissions, useWorkspace, useWorkspaceNotifications } from \"@/hooks/store\";\n-import { useResolvedAssetPath } from \"@/hooks/use-resolved-asset-path\";\n-import { useWorkspaceIssueProperties } from \"@/hooks/use-workspace-issue-properties\";\n+import { useWorkspace } from \"@/hooks/store\";\n \n const WorkspaceDashboardPage = observer(() => {\n   const { workspaceSlug } = useParams();\n   // plane hooks\n   const { t } = useTranslation();\n   // hooks\n   const { currentWorkspace } = useWorkspace();\n-  const {\n-    currentSelectedNotificationId,\n-    setCurrentSelectedNotificationId,\n-    notificationLiteByNotificationId,\n-    notificationIdsByWorkspaceId,\n-    getNotifications,\n-  } = useWorkspaceNotifications();\n-  const { fetchUserProjectInfo } = useUserPermissions();\n-  const { setPeekIssue } = useIssueDetail();\n   // derived values\n   const pageTitle = currentWorkspace?.name\n     ? t(\"notification.page_label\", { workspace: currentWorkspace?.name })\n     : undefined;\n-  const { workspace_slug, project_id, issue_id, is_inbox_issue } =\n-    notificationLiteByNotificationId(currentSelectedNotificationId);\n-  const resolvedPath = useResolvedAssetPath({ basePath: \"/empty-state/intake/issue-detail\" });\n \n-  // fetching workspace work item properties\n-  useWorkspaceIssueProperties(workspaceSlug);\n-\n-  // fetch workspace notifications\n-  const notificationMutation =\n-    currentWorkspace && notificationIdsByWorkspaceId(currentWorkspace.id)\n-      ? ENotificationLoader.MUTATION_LOADER\n-      : ENotificationLoader.INIT_LOADER;\n-  const notificationLoader =\n-    currentWorkspace && notificationIdsByWorkspaceId(currentWorkspace.id)\n-      ? ENotificationQueryParamType.CURRENT\n-      : ENotificationQueryParamType.INIT;\n-  useSWR(\n-    currentWorkspace?.slug ? `WORKSPACE_NOTIFICATION` : null,\n-    currentWorkspace?.slug\n-      ? () => getNotifications(currentWorkspace?.slug, notificationMutation, notificationLoader)\n-      : null\n-  );\n-\n-  // fetching user project member info\n-  const { isLoading: projectMemberInfoLoader } = useSWR(\n-    workspace_slug && project_id && is_inbox_issue\n-      ? `PROJECT_MEMBER_PERMISSION_INFO_${workspace_slug}_${project_id}`\n-      : null,\n-    workspace_slug && project_id && is_inbox_issue ? () => fetchUserProjectInfo(workspace_slug, project_id) : null\n-  );\n-\n-  const embedRemoveCurrentNotification = useCallback(\n-    () => setCurrentSelectedNotificationId(undefined),\n-    [setCurrentSelectedNotificationId]\n-  );\n-\n-  // clearing up the selected notifications when unmounting the page\n-  useEffect(\n-    () => () => {\n-      setCurrentSelectedNotificationId(undefined);\n-      setPeekIssue(undefined);\n-    },\n-    [setCurrentSelectedNotificationId, setPeekIssue]\n-  );\n-\n   return (\n     <>\n       <PageHead title={pageTitle} />\n-      <div className=\"w-full h-full overflow-hidden overflow-y-auto\">\n-        {!currentSelectedNotificationId ? (\n-          <div className=\"w-full h-screen flex justify-center items-center\">\n-            <SimpleEmptyState title={t(\"notification.empty_state.detail.title\")} assetPath={resolvedPath} />\n-          </div>\n-        ) : (\n-          <>\n-            {is_inbox_issue === true && workspace_slug && project_id && issue_id ? (\n-              <>\n-                {projectMemberInfoLoader ? (\n-                  <div className=\"w-full h-full flex justify-center items-center\">\n-                    <LogoSpinner />\n-                  </div>\n-                ) : (\n-                  <InboxContentRoot\n-                    setIsMobileSidebar={() => {}}\n-                    isMobileSidebar={false}\n-                    workspaceSlug={workspace_slug}\n-                    projectId={project_id}\n-                    inboxIssueId={issue_id}\n-                    isNotificationEmbed\n-                    embedRemoveCurrentNotification={embedRemoveCurrentNotification}\n-                  />\n-                )}\n-              </>\n-            ) : (\n-              <IssuePeekOverview embedIssue embedRemoveCurrentNotification={embedRemoveCurrentNotification} />\n-            )}\n-          </>\n-        )}\n-      </div>\n+      <NotificationsRoot workspaceSlug={workspaceSlug?.toString()} />\n     </>\n   );\n });\n \n"
        },
        {
          "path": "web/ce/components/workspace-notifications/index.ts",
          "status": "modified",
          "diff": "Index: web/ce/components/workspace-notifications/index.ts\n===================================================================\n--- web/ce/components/workspace-notifications/index.ts\t1f1b421 (parent)\n+++ web/ce/components/workspace-notifications/index.ts\t07e937c (commit)\n@@ -1,1 +1,2 @@\n export * from \"./notification-card/root\";\n+export * from \"./list-root\";\n"
        },
        {
          "path": "web/ce/components/workspace-notifications/list-root.tsx",
          "status": "added",
          "diff": "Index: web/ce/components/workspace-notifications/list-root.tsx\n===================================================================\n--- web/ce/components/workspace-notifications/list-root.tsx\t1f1b421 (parent)\n+++ web/ce/components/workspace-notifications/list-root.tsx\t07e937c (commit)\n@@ -0,0 +1,8 @@\n+import { NotificationCardListRoot } from \"./notification-card/root\";\n+\n+export type TNotificationListRoot = {\n+  workspaceSlug: string;\n+  workspaceId: string;\n+};\n+\n+export const NotificationListRoot = (props: TNotificationListRoot) => <NotificationCardListRoot {...props} />;\n"
        },
        {
          "path": "web/ce/hooks/use-notification-preview.tsx",
          "status": "added",
          "diff": "Index: web/ce/hooks/use-notification-preview.tsx\n===================================================================\n--- web/ce/hooks/use-notification-preview.tsx\t1f1b421 (parent)\n+++ web/ce/hooks/use-notification-preview.tsx\t07e937c (commit)\n@@ -0,0 +1,25 @@\n+import { EIssueServiceType } from \"@plane/constants\";\n+import { IWorkItemPeekOverview } from \"@plane/types\";\n+import { IssuePeekOverview } from \"@/components/issues\";\n+import { useIssueDetail } from \"@/hooks/store\";\n+import { TPeekIssue } from \"@/store/issue/issue-details/root.store\";\n+\n+export type TNotificationPreview = {\n+  isWorkItem: boolean;\n+  PeekOverviewComponent: React.ComponentType<IWorkItemPeekOverview>;\n+  setPeekWorkItem: (peekIssue: TPeekIssue | undefined) => void;\n+};\n+\n+/**\n+ * This function returns if the current active notification is related to work item or an epic.\n+ * @returns isWorkItem: boolean, peekOverviewComponent: IWorkItemPeekOverview, setPeekWorkItem\n+ */\n+export const useNotificationPreview = (): TNotificationPreview => {\n+  const { peekIssue, setPeekIssue } = useIssueDetail(EIssueServiceType.ISSUES);\n+\n+  return {\n+    isWorkItem: Boolean(peekIssue),\n+    PeekOverviewComponent: IssuePeekOverview,\n+    setPeekWorkItem: setPeekIssue,\n+  };\n+};\n"
        },
        {
          "path": "web/core/components/issues/issue-detail/subscription.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/issues/issue-detail/subscription.tsx\n===================================================================\n--- web/core/components/issues/issue-detail/subscription.tsx\t1f1b421 (parent)\n+++ web/core/components/issues/issue-detail/subscription.tsx\t07e937c (commit)\n@@ -4,9 +4,9 @@\n import isNil from \"lodash/isNil\";\n import { observer } from \"mobx-react\";\n import { Bell, BellOff } from \"lucide-react\";\n // plane-i18n\n-import { EUserPermissions, EUserPermissionsLevel } from \"@plane/constants\";\n+import { EUserPermissions, EUserPermissionsLevel, EIssueServiceType } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n // UI\n import { Button, Loader, TOAST_TYPE, setToast } from \"@plane/ui\";\n // hooks\n@@ -15,19 +15,20 @@\n export type TIssueSubscription = {\n   workspaceSlug: string;\n   projectId: string;\n   issueId: string;\n+  serviceType?: EIssueServiceType;\n };\n \n export const IssueSubscription: FC<TIssueSubscription> = observer((props) => {\n-  const { workspaceSlug, projectId, issueId } = props;\n+  const { workspaceSlug, projectId, issueId, serviceType = EIssueServiceType.ISSUES } = props;\n   const { t } = useTranslation();\n   // hooks\n   const {\n     subscription: { getSubscriptionByIssueId },\n     createSubscription,\n     removeSubscription,\n-  } = useIssueDetail();\n+  } = useIssueDetail(serviceType);\n   // state\n   const [loading, setLoading] = useState(false);\n   // hooks\n   const { allowPermissions } = useUserPermissions();\n@@ -52,14 +53,14 @@\n           ? t(\"issue.subscription.actions.unsubscribed\")\n           : t(\"issue.subscription.actions.subscribed\"),\n       });\n       setLoading(false);\n-    } catch (error) {\n+    } catch {\n       setLoading(false);\n       setToast({\n         type: TOAST_TYPE.ERROR,\n         title: t(\"toast.error\"),\n-        message: t(\"commons.error.message\"),\n+        message: t(\"common.error.message\"),\n       });\n     }\n   };\n \n@@ -77,9 +78,9 @@\n         prependIcon={isSubscribed ? <BellOff /> : <Bell className=\"h-3 w-3\" />}\n         variant=\"outline-primary\"\n         className=\"hover:!bg-custom-primary-100/20\"\n         onClick={handleSubscription}\n-        disabled={!isEditable}\n+        disabled={!isEditable || loading}\n       >\n         {loading ? (\n           <span>\n             <span className=\"hidden sm:block\">{t(\"common.loading\")}</span>\n"
        },
        {
          "path": "web/core/components/issues/peek-overview/root.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/issues/peek-overview/root.tsx\n===================================================================\n--- web/core/components/issues/peek-overview/root.tsx\t1f1b421 (parent)\n+++ web/core/components/issues/peek-overview/root.tsx\t07e937c (commit)\n@@ -13,9 +13,9 @@\n   EUserPermissions,\n   EUserPermissionsLevel,\n } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n-import { TIssue } from \"@plane/types\";\n+import { TIssue, IWorkItemPeekOverview } from \"@plane/types\";\n // plane ui\n import { TOAST_TYPE, setPromiseToast, setToast } from \"@plane/ui\";\n // components\n import { IssueView, TIssueOperations } from \"@/components/issues\";\n@@ -23,16 +23,10 @@\n // hooks\n import { useEventTracker, useIssueDetail, useIssues, useUserPermissions } from \"@/hooks/store\";\n import { useIssueStoreType } from \"@/hooks/use-issue-layout-store\";\n \n-interface IIssuePeekOverview {\n-  embedIssue?: boolean;\n-  embedRemoveCurrentNotification?: () => void;\n-  is_draft?: boolean;\n-  storeType?: EIssuesStoreType;\n-}\n \n-export const IssuePeekOverview: FC<IIssuePeekOverview> = observer((props) => {\n+export const IssuePeekOverview: FC<IWorkItemPeekOverview> = observer((props) => {\n   const {\n     embedIssue = false,\n     embedRemoveCurrentNotification,\n     is_draft = false,\n"
        },
        {
          "path": "web/core/components/workspace-notifications/root.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/workspace-notifications/root.tsx\n===================================================================\n--- web/core/components/workspace-notifications/root.tsx\t1f1b421 (parent)\n+++ web/core/components/workspace-notifications/root.tsx\t07e937c (commit)\n@@ -1,116 +1,116 @@\n \"use client\";\n \n-import { FC, useCallback } from \"react\";\n+import { useCallback, useEffect } from \"react\";\n import { observer } from \"mobx-react\";\n-import { useParams } from \"next/navigation\";\n+import useSWR from \"swr\";\n // plane imports\n-import { NOTIFICATION_TABS, TNotificationTab } from \"@plane/constants\";\n+import { ENotificationLoader, ENotificationQueryParamType } from \"@plane/constants\";\n import { useTranslation } from \"@plane/i18n\";\n // components\n-import { Header, Row, ERowVariant, EHeaderVariant, ContentWrapper } from \"@plane/ui\";\n-import { CountChip } from \"@/components/common\";\n-import {\n-  NotificationsLoader,\n-  NotificationEmptyState,\n-  NotificationSidebarHeader,\n-  AppliedFilters,\n-} from \"@/components/workspace-notifications\";\n-// helpers\n-import { cn } from \"@/helpers/common.helper\";\n-import { getNumberCount } from \"@/helpers/string.helper\";\n+import { cn } from \"@plane/utils\";\n+import { LogoSpinner } from \"@/components/common\";\n+import { SimpleEmptyState } from \"@/components/empty-state\";\n+import { InboxContentRoot } from \"@/components/inbox\";\n // hooks\n-import { useWorkspace, useWorkspaceNotifications } from \"@/hooks/store\";\n-import { NotificationCardListRoot } from \"@/plane-web/components/workspace-notifications\";\n-export const NotificationsSidebarRoot: FC = observer(() => {\n-  const { workspaceSlug } = useParams();\n+import { useUserPermissions, useWorkspace, useWorkspaceNotifications } from \"@/hooks/store\";\n+import { useResolvedAssetPath } from \"@/hooks/use-resolved-asset-path\";\n+import { useWorkspaceIssueProperties } from \"@/hooks/use-workspace-issue-properties\";\n+import { useNotificationPreview } from \"@/plane-web/hooks/use-notification-preview\";\n+\n+type NotificationsRootProps = {\n+  workspaceSlug?: string;\n+};\n+\n+export const NotificationsRoot = observer(({ workspaceSlug }: NotificationsRootProps) => {\n+  // plane hooks\n+  const { t } = useTranslation();\n   // hooks\n-  const { getWorkspaceBySlug } = useWorkspace();\n+  const { currentWorkspace } = useWorkspace();\n   const {\n     currentSelectedNotificationId,\n-    unreadNotificationsCount,\n-    loader,\n+    setCurrentSelectedNotificationId,\n+    notificationLiteByNotificationId,\n     notificationIdsByWorkspaceId,\n-    currentNotificationTab,\n-    setCurrentNotificationTab,\n+    getNotifications,\n   } = useWorkspaceNotifications();\n-\n-  const { t } = useTranslation();\n+  const { fetchUserProjectInfo } = useUserPermissions();\n+  const { isWorkItem, PeekOverviewComponent, setPeekWorkItem } = useNotificationPreview();\n   // derived values\n-  const workspace = workspaceSlug ? getWorkspaceBySlug(workspaceSlug.toString()) : undefined;\n-  const notificationIds = workspace ? notificationIdsByWorkspaceId(workspace.id) : undefined;\n+  const { workspace_slug, project_id, issue_id, is_inbox_issue } =\n+    notificationLiteByNotificationId(currentSelectedNotificationId);\n+  const resolvedPath = useResolvedAssetPath({ basePath: \"/empty-state/intake/issue-detail\" });\n \n-  const handleTabClick = useCallback(\n-    (tabValue: TNotificationTab) => {\n-      if (currentNotificationTab !== tabValue) {\n-        setCurrentNotificationTab(tabValue);\n-      }\n-    },\n-    [currentNotificationTab, setCurrentNotificationTab]\n+  // fetching workspace work item properties\n+  useWorkspaceIssueProperties(workspaceSlug);\n+\n+  // fetch workspace notifications\n+  const notificationMutation =\n+    currentWorkspace && notificationIdsByWorkspaceId(currentWorkspace.id)\n+      ? ENotificationLoader.MUTATION_LOADER\n+      : ENotificationLoader.INIT_LOADER;\n+  const notificationLoader =\n+    currentWorkspace && notificationIdsByWorkspaceId(currentWorkspace.id)\n+      ? ENotificationQueryParamType.CURRENT\n+      : ENotificationQueryParamType.INIT;\n+  useSWR(\n+    currentWorkspace?.slug ? `WORKSPACE_NOTIFICATION_${currentWorkspace?.slug}` : null,\n+    currentWorkspace?.slug\n+      ? () => getNotifications(currentWorkspace?.slug, notificationMutation, notificationLoader)\n+      : null\n   );\n \n-  if (!workspaceSlug || !workspace) return <></>;\n+  // fetching user project member info\n+  const { isLoading: projectMemberInfoLoader } = useSWR(\n+    workspace_slug && project_id && is_inbox_issue\n+      ? `PROJECT_MEMBER_PERMISSION_INFO_${workspace_slug}_${project_id}`\n+      : null,\n+    workspace_slug && project_id && is_inbox_issue ? () => fetchUserProjectInfo(workspace_slug, project_id) : null\n+  );\n \n-  return (\n-    <div\n-      className={cn(\n-        \"relative border-0 md:border-r border-custom-border-200 z-[10] flex-shrink-0 bg-custom-background-100 h-full transition-all overflow-hidden\",\n-        currentSelectedNotificationId ? \"w-0 md:w-2/6\" : \"w-full md:w-2/6\"\n-      )}\n-    >\n-      <div className=\"relative w-full h-full overflow-hidden flex flex-col\">\n-        <Row className=\"h-[3.75rem] border-b border-custom-border-200 flex\">\n-          <NotificationSidebarHeader workspaceSlug={workspaceSlug.toString()} />\n-        </Row>\n+  const embedRemoveCurrentNotification = useCallback(\n+    () => setCurrentSelectedNotificationId(undefined),\n+    [setCurrentSelectedNotificationId]\n+  );\n \n-        <Header variant={EHeaderVariant.SECONDARY} className=\"justify-start\">\n-          {NOTIFICATION_TABS.map((tab) => (\n-            <div\n-              key={tab.value}\n-              className=\"h-full px-3 relative cursor-pointer\"\n-              onClick={() => handleTabClick(tab.value)}\n-            >\n-              <div\n-                className={cn(\n-                  `relative h-full flex justify-center items-center gap-1 text-sm transition-all`,\n-                  currentNotificationTab === tab.value\n-                    ? \"text-custom-primary-100\"\n-                    : \"text-custom-text-100 hover:text-custom-text-200\"\n-                )}\n-              >\n-                <div className=\"font-medium\">{t(tab.i18n_label)}</div>\n-                {tab.count(unreadNotificationsCount) > 0 && (\n-                  <CountChip count={getNumberCount(tab.count(unreadNotificationsCount))} />\n-                )}\n-              </div>\n-              {currentNotificationTab === tab.value && (\n-                <div className=\"border absolute bottom-0 right-0 left-0 rounded-t-md border-custom-primary-100\" />\n-              )}\n-            </div>\n-          ))}\n-        </Header>\n+  // clearing up the selected notifications when unmounting the page\n+  useEffect(\n+    () => () => {\n+      setPeekWorkItem(undefined);\n+    },\n+    [setCurrentSelectedNotificationId, setPeekWorkItem]\n+  );\n \n-        {/* applied filters */}\n-        <AppliedFilters workspaceSlug={workspaceSlug.toString()} />\n-\n-        {/* rendering notifications */}\n-        {loader === \"init-loader\" ? (\n-          <div className=\"relative w-full h-full overflow-hidden\">\n-            <NotificationsLoader />\n-          </div>\n-        ) : (\n-          <>\n-            {notificationIds && notificationIds.length > 0 ? (\n-              <ContentWrapper variant={ERowVariant.HUGGING}>\n-                <NotificationCardListRoot workspaceSlug={workspaceSlug.toString()} workspaceId={workspace?.id} />\n-              </ContentWrapper>\n-            ) : (\n-              <div className=\"relative w-full h-full flex justify-center items-center\">\n-                <NotificationEmptyState />\n-              </div>\n-            )}\n-          </>\n-        )}\n-      </div>\n+  return (\n+    <div className={cn(\"w-full h-full overflow-hidden \", isWorkItem && \"overflow-y-auto\")}>\n+      {!currentSelectedNotificationId ? (\n+        <div className=\"w-full h-screen flex justify-center items-center\">\n+          <SimpleEmptyState title={t(\"notification.empty_state.detail.title\")} assetPath={resolvedPath} />\n+        </div>\n+      ) : (\n+        <>\n+          {is_inbox_issue === true && workspace_slug && project_id && issue_id ? (\n+            <>\n+              {projectMemberInfoLoader ? (\n+                <div className=\"w-full h-full flex justify-center items-center\">\n+                  <LogoSpinner />\n+                </div>\n+              ) : (\n+                <InboxContentRoot\n+                  setIsMobileSidebar={() => {}}\n+                  isMobileSidebar={false}\n+                  workspaceSlug={workspace_slug}\n+                  projectId={project_id}\n+                  inboxIssueId={issue_id}\n+                  isNotificationEmbed\n+                  embedRemoveCurrentNotification={embedRemoveCurrentNotification}\n+                />\n+              )}\n+            </>\n+          ) : (\n+            <PeekOverviewComponent embedIssue embedRemoveCurrentNotification={embedRemoveCurrentNotification} />\n+          )}\n+        </>\n+      )}\n     </div>\n   );\n });\n"
        },
        {
          "path": "web/core/components/workspace-notifications/sidebar/header/root.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/workspace-notifications/sidebar/header/root.tsx\n===================================================================\n--- web/core/components/workspace-notifications/sidebar/header/root.tsx\t1f1b421 (parent)\n+++ web/core/components/workspace-notifications/sidebar/header/root.tsx\t07e937c (commit)\n@@ -19,9 +19,9 @@\n   const { t } = useTranslation();\n \n   if (!workspaceSlug) return <></>;\n   return (\n-    <Header className=\"my-auto\">\n+    <Header className=\"my-auto bg-custom-background-100\">\n       <Header.LeftItem>\n         <div className=\"block bg-custom-sidebar-background-100 md:hidden\">\n           <SidebarHamburgerToggle />\n         </div>\n"
        },
        {
          "path": "web/core/components/workspace-notifications/sidebar/index.ts",
          "status": "modified",
          "diff": "Index: web/core/components/workspace-notifications/sidebar/index.ts\n===================================================================\n--- web/core/components/workspace-notifications/sidebar/index.ts\t1f1b421 (parent)\n+++ web/core/components/workspace-notifications/sidebar/index.ts\t07e937c (commit)\n@@ -5,4 +5,6 @@\n \n export * from \"./filters\";\n \n export * from \"./notification-card\";\n+\n+export * from \"./root\";\n"
        },
        {
          "path": "web/core/components/workspace-notifications/sidebar/root.tsx",
          "status": "added",
          "diff": "Index: web/core/components/workspace-notifications/sidebar/root.tsx\n===================================================================\n--- web/core/components/workspace-notifications/sidebar/root.tsx\t1f1b421 (parent)\n+++ web/core/components/workspace-notifications/sidebar/root.tsx\t07e937c (commit)\n@@ -0,0 +1,118 @@\n+\"use client\";\n+import { FC, useCallback } from \"react\";\n+\n+import { observer } from \"mobx-react\";\n+import { useParams } from \"next/navigation\";\n+// plane imports\n+import { NOTIFICATION_TABS, TNotificationTab } from \"@plane/constants\";\n+import { useTranslation } from \"@plane/i18n\";\n+// components\n+import { Header, Row, ERowVariant, EHeaderVariant, ContentWrapper } from \"@plane/ui\";\n+import { CountChip } from \"@/components/common\";\n+import {\n+  NotificationsLoader,\n+  NotificationEmptyState,\n+  NotificationSidebarHeader,\n+  AppliedFilters,\n+} from \"@/components/workspace-notifications\";\n+// helpers\n+import { cn } from \"@/helpers/common.helper\";\n+import { getNumberCount } from \"@/helpers/string.helper\";\n+// hooks\n+import { useWorkspace, useWorkspaceNotifications } from \"@/hooks/store\";\n+\n+import { NotificationListRoot } from \"@/plane-web/components/workspace-notifications/list-root\";\n+\n+export const NotificationsSidebarRoot: FC = observer(() => {\n+  const { workspaceSlug } = useParams();\n+  // hooks\n+  const { getWorkspaceBySlug } = useWorkspace();\n+  const {\n+    currentSelectedNotificationId,\n+    unreadNotificationsCount,\n+    loader,\n+    notificationIdsByWorkspaceId,\n+    currentNotificationTab,\n+    setCurrentNotificationTab,\n+  } = useWorkspaceNotifications();\n+\n+  const { t } = useTranslation();\n+  // derived values\n+  const workspace = workspaceSlug ? getWorkspaceBySlug(workspaceSlug.toString()) : undefined;\n+  const notificationIds = workspace ? notificationIdsByWorkspaceId(workspace.id) : undefined;\n+\n+  const handleTabClick = useCallback(\n+    (tabValue: TNotificationTab) => {\n+      if (currentNotificationTab !== tabValue) {\n+        setCurrentNotificationTab(tabValue);\n+      }\n+    },\n+    [currentNotificationTab, setCurrentNotificationTab]\n+  );\n+\n+  if (!workspaceSlug || !workspace) return <></>;\n+\n+  return (\n+    <div\n+      className={cn(\n+        \"relative border-0 md:border-r border-custom-border-200 z-[10] flex-shrink-0 bg-custom-background-100 h-full transition-all max-md:overflow-hidden\",\n+        currentSelectedNotificationId ? \"w-0 md:w-2/6\" : \"w-full md:w-2/6\"\n+      )}\n+    >\n+      <div className=\"relative w-full h-full flex flex-col\">\n+        <Row className=\"h-[3.75rem] border-b border-custom-border-200 flex\">\n+          <NotificationSidebarHeader workspaceSlug={workspaceSlug.toString()} />\n+        </Row>\n+\n+        <Header variant={EHeaderVariant.SECONDARY} className=\"justify-start\">\n+          {NOTIFICATION_TABS.map((tab) => (\n+            <div\n+              key={tab.value}\n+              className=\"h-full px-3 relative cursor-pointer\"\n+              onClick={() => handleTabClick(tab.value)}\n+            >\n+              <div\n+                className={cn(\n+                  `relative h-full flex justify-center items-center gap-1 text-sm transition-all`,\n+                  currentNotificationTab === tab.value\n+                    ? \"text-custom-primary-100\"\n+                    : \"text-custom-text-100 hover:text-custom-text-200\"\n+                )}\n+              >\n+                <div className=\"font-medium\">{t(tab.i18n_label)}</div>\n+                {tab.count(unreadNotificationsCount) > 0 && (\n+                  <CountChip count={getNumberCount(tab.count(unreadNotificationsCount))} />\n+                )}\n+              </div>\n+              {currentNotificationTab === tab.value && (\n+                <div className=\"border absolute bottom-0 right-0 left-0 rounded-t-md border-custom-primary-100\" />\n+              )}\n+            </div>\n+          ))}\n+        </Header>\n+\n+        {/* applied filters */}\n+        <AppliedFilters workspaceSlug={workspaceSlug.toString()} />\n+\n+        {/* rendering notifications */}\n+        {loader === \"init-loader\" ? (\n+          <div className=\"relative w-full h-full overflow-hidden\">\n+            <NotificationsLoader />\n+          </div>\n+        ) : (\n+          <>\n+            {notificationIds && notificationIds.length > 0 ? (\n+              <ContentWrapper variant={ERowVariant.HUGGING}>\n+                <NotificationListRoot workspaceSlug={workspaceSlug.toString()} workspaceId={workspace?.id} />\n+              </ContentWrapper>\n+            ) : (\n+              <div className=\"relative w-full h-full flex justify-center items-center\">\n+                <NotificationEmptyState />\n+              </div>\n+            )}\n+          </>\n+        )}\n+      </div>\n+    </div>\n+  );\n+});\n"
        },
        {
          "path": "web/core/store/issue/issue-details/root.store.ts",
          "status": "modified",
          "diff": "Index: web/core/store/issue/issue-details/root.store.ts\n===================================================================\n--- web/core/store/issue/issue-details/root.store.ts\t1f1b421 (parent)\n+++ web/core/store/issue/issue-details/root.store.ts\t07e937c (commit)\n@@ -203,9 +203,9 @@\n     this.comment = new IssueCommentStore(this, serviceType);\n     this.commentReaction = new IssueCommentReactionStore(this);\n     this.subIssues = new IssueSubIssuesStore(this, serviceType);\n     this.link = new IssueLinkStore(this, serviceType);\n-    this.subscription = new IssueSubscriptionStore(this);\n+    this.subscription = new IssueSubscriptionStore(this, serviceType);\n     this.relation = new IssueRelationStore(this);\n   }\n \n   // computed\n"
        },
        {
          "path": "web/core/store/issue/issue-details/subscription.store.ts",
          "status": "modified",
          "diff": "Index: web/core/store/issue/issue-details/subscription.store.ts\n===================================================================\n--- web/core/store/issue/issue-details/subscription.store.ts\t1f1b421 (parent)\n+++ web/core/store/issue/issue-details/subscription.store.ts\t07e937c (commit)\n@@ -1,11 +1,11 @@\n import set from \"lodash/set\";\n import { action, makeObservable, observable, runInAction } from \"mobx\";\n // services\n+import { EIssueServiceType } from \"@plane/constants\";\n import { IssueService } from \"@/services/issue/issue.service\";\n // types\n import { IIssueDetail } from \"./root.store\";\n-\n export interface IIssueSubscriptionStoreActions {\n   addSubscription: (issueId: string, isSubscribed: boolean | undefined | null) => void;\n   fetchSubscriptions: (workspaceSlug: string, projectId: string, issueId: string) => Promise<boolean>;\n   createSubscription: (workspaceSlug: string, projectId: string, issueId: string) => Promise<void>;\n@@ -26,9 +26,9 @@\n   rootIssueDetail: IIssueDetail;\n   // services\n   issueService;\n \n-  constructor(rootStore: IIssueDetail) {\n+  constructor(rootStore: IIssueDetail, serviceType: EIssueServiceType) {\n     makeObservable(this, {\n       // observables\n       subscriptionMap: observable,\n       // actions\n@@ -39,9 +39,9 @@\n     });\n     // root store\n     this.rootIssueDetail = rootStore;\n     // services\n-    this.issueService = new IssueService();\n+    this.issueService = new IssueService(serviceType);\n   }\n \n   // helper methods\n   getSubscriptionByIssueId = (issueId: string) => {\n"
        }
      ]
    },
    {
      "id": "refactor-page-header",
      "sha": "eac111556610fb94197337f33346a38885e03757",
      "parentSha": "8166a757a77fa210d15197fb16416fe4cf2560bf",
      "spec": "- Introduce page-level editor ref\n  - In web/core/store/pages/base-page.ts, add an observable editorRef: EditorRefApi | null with setter setEditorRef and a method mutateProperties(data: Partial<TPage>, shouldUpdateName?: boolean) to batch apply API payloads. Ensure editorRef is observable.ref and setter uses runInAction.\n  - Update updatePageLogo to optimistically update this.logo_props, revert to original on error.\n\n- Persist and clear editorRef from the editor lifecycle\n  - In web/core/components/pages/editor/page-root.tsx, remove the storeType prop. On handleEditorReady(true), set page.setEditorRef(editorRef.current) if not already set; on unmount, call setEditorRef(null). Pass editorForwardRef (renamed from editorRef) to the PageEditor component; pass page-only to PageEditorToolbarRoot.\n\n- Consume store editorRef instead of RefObject props\n  - In web/core/components/pages/editor/editor-body.tsx, change props: replace editorRef with editorForwardRef (React.RefObject<EditorRefApi>), and handleEditorReady signature to (status: boolean) => void. Use page.editorRef for PageContentBrowser and any editorRef reads; forward the React ref to the Editor component via ref={editorForwardRef}.\n  - In web/core/components/pages/editor/title.tsx and web/ce/components/pages/editor/ai/menu.tsx, change editorRef prop type to EditorRefApi | null and update all usages to call methods directly (e.g., editorRef?.setFocusAtPosition, editorRef?.getSelectedText, editorRef?.insertText).\n  - In web/core/components/pages/editor/summary/content-browser.tsx, memoize onClick via useCallback and use editorRef?.scrollSummary.\n\n- Refactor editor toolbar to derive from page\n  - In web/core/components/pages/editor/toolbar/root.tsx, remove editorReady, editorRef, and storeType props. Read editorRef from page (const { editorRef, isContentEditable } = page). Render <PageToolbar editorRef={editorRef} /> only if editorRef is set. Replace the right-side extra options with a collaborators list import from @/plane-web/components/pages/header/collaborators-list and remove the mobile header.\n  - In web/core/components/pages/editor/toolbar/toolbar.tsx, remove the isHidden prop and adjust classNames: always render with horizontal scrolling; do not toggle opacity based on isHidden. Wrap ColorDropdown in a flex-shrink-0 container.\n  - In web/core/components/pages/editor/toolbar/index.ts, stop exporting extra-options and mobile-root from the barrel.\n\n- Replace legacy header badges/actions with a new header actions cluster\n  - Delete web/core/components/pages/dropdowns/edit-information-popover.tsx and remove its export from web/core/components/pages/dropdowns/index.ts.\n  - Add web/core/components/pages/header/actions.tsx that composes: PageArchivedBadge, PageOfflineBadge, PageLockControl, PageMoveControl, PageInfoPopover, PageCopyLinkControl, and PageOptionsDropdown; it accepts props { page, storeType }.\n  - Update web/app/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/header.tsx:\n    - Import PageHeaderActions from @/components/pages/header/actions.\n    - Define const storeType = EPageStoreType.PROJECT; use it for hooks and pass to PageHeaderActions.\n    - Remove PageEditInformationPopover usage.\n  - Update web/app/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/[pageId]/page.tsx to drop the storeType prop when rendering <PageRoot />.\n\n- Provide CE-layer header placeholders and lock control\n  - Add web/ce/components/pages/header/collaborators-list.tsx exporting PageCollaboratorsList that currently returns null with props { page: TPageInstance }.\n  - Add web/ce/components/pages/header/move-control.tsx exporting PageMoveControl that returns null with props { page: TPageInstance }.\n  - Add web/ce/components/pages/header/lock-control.tsx exporting PageLockControl that:\n    - Shows three display states: \"neutral\" (icon-only LockKeyhole with tooltip), \"locked\" (badge with LockKeyhole and Locked text), and \"unlocked\" (temporary badge with LockKeyholeOpen and Unlocked text that fades out).\n    - Transitions state based on page.is_locked changes; when unlocking after being locked, show \"unlocked\" for ~600ms then revert to neutral; clear timers on unmount.\n    - Calls pageOperations.toggleLock from usePageOperations on click; render nothing if !page.canCurrentUserLockPage.\n\n- Update info popover and options\n  - In web/core/components/pages/editor/toolbar/info-popover.tsx, remove the editorRef prop and use page.editorRef?.getDocumentInfo() instead. Update the button UI to a 24px icon button and switch edited timestamp to calculateTimeAgoShort(page.updated_at) + \" ago\".\n  - In web/core/components/pages/editor/toolbar/options-dropdown.tsx, remove the editorRef prop and get editorRef from page.editorRef. Adjust the optionsOrder to exclude actions now shown directly in the header (copy-link, move, toggle-lock). Continue to pass storeType and page through to PageActions.\n\n- Update page actions hook\n  - In web/core/hooks/use-page-operations.ts, rename isfavoriteMenuOpen to isFavoriteMenuOpen and update references and dependencies. Ensure toggleFavorite opens the favorite menu when appropriate.\n\n- Project page store merges\n  - In web/core/store/pages/project-page.store.ts, when fetching lists or a single page, if an instance exists in this.data for the id, call existingPage.mutateProperties(response, false) to update fields except name; otherwise create new ProjectPage instances. Ensure loader is cleared afterward.\n\n- Styles for lock/unlock animations\n  - In web/styles/globals.css, add keyframes and classes for textSlideIn, textFadeOut, lockIconAnimation, unlockIconAnimation, fadeOut. Provide utility classes: .animate-text-slide-in, .animate-text-fade-out, .animate-lock-icon, .animate-unlock-icon, .animate-fade-out. Use these in PageLockControl.\n\n- Adjust consumers to new props and exports\n  - Ensure import paths reflect the new locations: header actions are imported directly (\"@/components/pages/header/actions\"); collaborators/move/lock controls are imported from the plane-web CE layer (\"@/plane-web/components/pages/header/...\").\n  - Remove any references to the deleted components (PageEditInformationPopover, PageExtraOptions, PageEditorMobileHeaderRoot) and their barrel exports.\n\n- Visual tweaks\n  - In web/core/components/pages/editor/header/logo-picker.tsx, increase the transition duration from 200ms to 300ms.\n  - In web/core/components/pages/editor/toolbar/root.tsx, wrap the toolbar container with a max-height transition (300ms) and hide when either sticky toolbar is disabled or page is not editable.\n\n- Keep behavior parity\n  - All prior actions (lock/unlock, access toggles, duplicate, archive/restore, move, delete, copy link, open in new tab) must remain functional, but the UI placement changes: copy link, lock/unlock, move, info, offline and archived indicators are in the header group; the dropdown contains the remaining actions.",
      "prompt": "Refactor the wiki page header and editor to centralize the editor instance on the page store and split header actions into explicit controls. Store the editor ref on the page model so downstream components (toolbar, info popover, and dropdown) can read it directly. Replace the single edit-info badge with a header actions cluster that includes archived and offline badges, lock/unlock control with subtle transitions, a move control placeholder, an info popover, and a copy-link control. Remove older extra-options/mobile header components and migrate the options dropdown to no longer receive the editor ref prop, deriving it from the page instead. Ensure the page store supports optimistic logo updates with revert-on-error and bulk property mutation without changing the name by default. When fetching project pages, update existing page instances via the new mutation method instead of replacing them. Add the minimal CSS for lock/unlock animations. Make sure imports/exports are updated and all existing actions still work from their new UI locations.",
      "supplementalFiles": [
        "web/ce/hooks/store/use-page-store.ts",
        "web/ce/hooks/store/use-page.ts",
        "web/core/store/pages/project-page.ts",
        "web/core/components/pages/dropdowns/actions.tsx",
        "web/core/components/pages/index.ts",
        "web/core/hooks/use-collaborative-page-actions.tsx"
      ],
      "fileDiffs": [
        {
          "path": "web/app/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/[pageId]/page.tsx",
          "status": "modified",
          "diff": "Index: web/app/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/[pageId]/page.tsx\n===================================================================\n--- web/app/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/[pageId]/page.tsx\t8166a75 (parent)\n+++ web/app/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/[pageId]/page.tsx\teac1115 (commit)\n@@ -160,9 +160,8 @@\n           <PageRoot\n             config={pageRootConfig}\n             handlers={pageRootHandlers}\n             page={page}\n-            storeType={EPageStoreType.PROJECT}\n             webhookConnectionParams={webhookConnectionParams}\n             workspaceSlug={workspaceSlug?.toString() ?? \"\"}\n           />\n           <IssuePeekOverview />\n"
        },
        {
          "path": "web/app/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/header.tsx",
          "status": "modified",
          "diff": "Index: web/app/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/header.tsx\n===================================================================\n--- web/app/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/header.tsx\t8166a75 (parent)\n+++ web/app/[workspaceSlug]/(projects)/projects/(detail)/[projectId]/pages/(detail)/header.tsx\teac1115 (commit)\n@@ -7,12 +7,12 @@\n // ui\n import { Breadcrumbs, Header, CustomSearchSelect } from \"@plane/ui\";\n // components\n import { BreadcrumbLink, PageAccessIcon, SwitcherLabel } from \"@/components/common\";\n-import { PageEditInformationPopover } from \"@/components/pages\";\n+import { PageHeaderActions } from \"@/components/pages/header/actions\";\n // helpers\n-// hooks\n import { getPageName } from \"@/helpers/page.helper\";\n+// hooks\n import { useProject } from \"@/hooks/store\";\n // plane web components\n import { useAppRouter } from \"@/hooks/use-app-router\";\n import { ProjectBreadcrumb } from \"@/plane-web/components/breadcrumbs\";\n@@ -23,23 +23,24 @@\n export interface IPagesHeaderProps {\n   showButton?: boolean;\n }\n \n+const storeType = EPageStoreType.PROJECT;\n+\n export const PageDetailsHeader = observer(() => {\n   // router\n   const router = useAppRouter();\n   const { workspaceSlug, pageId, projectId } = useParams();\n   // store hooks\n   const { currentProjectDetails, loader } = useProject();\n+  const { getPageById, getCurrentProjectPageIds } = usePageStore(storeType);\n   const page = usePage({\n     pageId: pageId?.toString() ?? \"\",\n-    storeType: EPageStoreType.PROJECT,\n+    storeType,\n   });\n-  const { getPageById, getCurrentProjectPageIds } = usePageStore(EPageStoreType.PROJECT);\n   // derived values\n   const projectPageIds = getCurrentProjectPageIds(projectId?.toString());\n \n-  if (!page) return null;\n   const switcherOptions = projectPageIds\n     .map((id) => {\n       const _page = id === pageId ? page : getPageById(id);\n       if (!_page) return;\n@@ -108,10 +109,10 @@\n           </Breadcrumbs>\n         </div>\n       </Header.LeftItem>\n       <Header.RightItem>\n-        <PageEditInformationPopover page={page} />\n         <PageDetailsHeaderExtraActions page={page} />\n+        <PageHeaderActions page={page} storeType={storeType} />\n       </Header.RightItem>\n     </Header>\n   );\n });\n"
        },
        {
          "path": "web/ce/components/pages/editor/ai/menu.tsx",
          "status": "modified",
          "diff": "Index: web/ce/components/pages/editor/ai/menu.tsx\n===================================================================\n--- web/ce/components/pages/editor/ai/menu.tsx\t8166a75 (parent)\n+++ web/ce/components/pages/editor/ai/menu.tsx\teac1115 (commit)\n@@ -1,7 +1,7 @@\n \"use client\";\n \n-import React, { RefObject, useEffect, useRef, useState } from \"react\";\n+import React, { useEffect, useRef, useState } from \"react\";\n import { ChevronRight, CornerDownRight, LucideIcon, RefreshCcw, Sparkles, TriangleAlert } from \"lucide-react\";\n // plane editor\n import { EditorRefApi } from \"@plane/editor\";\n // plane ui\n@@ -17,9 +17,9 @@\n import { AskPiMenu } from \"./ask-pi-menu\";\n const aiService = new AIService();\n \n type Props = {\n-  editorRef: RefObject<EditorRefApi>;\n+  editorRef: EditorRefApi | null;\n   isOpen: boolean;\n   onClose: () => void;\n   workspaceId: string;\n   workspaceSlug: string;\n@@ -72,9 +72,9 @@\n     await aiService.performEditorTask(workspaceSlug.toString(), payload).then((res) => setResponse(res.response));\n   };\n   // handle task click\n   const handleClick = async (key: AI_EDITOR_TASKS) => {\n-    const selection = editorRef.current?.getSelectedText();\n+    const selection = editorRef?.getSelectedText();\n     if (!selection || activeTask === key) return;\n     setActiveTask(key);\n     if (key === AI_EDITOR_TASKS.ASK_ANYTHING) return;\n     setResponse(undefined);\n@@ -85,9 +85,9 @@\n     });\n   };\n   // handle re-generate response\n   const handleRegenerate = async () => {\n-    const selection = editorRef.current?.getSelectedText();\n+    const selection = editorRef?.getSelectedText();\n     if (!selection || !activeTask) return;\n     setIsRegenerating(true);\n     await handleGenerateResponse({\n       task: activeTask,\n@@ -103,9 +103,9 @@\n   };\n   // handle re-generate response\n   const handleToneChange = async (key: string) => {\n     const selectedTone = TONES_LIST.find((t) => t.key === key);\n-    const selection = editorRef.current?.getSelectedText();\n+    const selection = editorRef?.getSelectedText();\n     if (!selectedTone || !selection || !activeTask) return;\n     setResponse(undefined);\n     setIsRegenerating(false);\n     await handleGenerateResponse({\n@@ -122,9 +122,9 @@\n   };\n   // handle replace selected text with the response\n   const handleInsertText = (insertOnNextLine: boolean) => {\n     if (!response) return;\n-    editorRef.current?.insertText(response, insertOnNextLine);\n+    editorRef?.insertText(response, insertOnNextLine);\n     onClose();\n   };\n \n   // reset on close\n"
        },
        {
          "path": "web/ce/components/pages/header/collaborators-list.tsx",
          "status": "added",
          "diff": "Index: web/ce/components/pages/header/collaborators-list.tsx\n===================================================================\n--- web/ce/components/pages/header/collaborators-list.tsx\t8166a75 (parent)\n+++ web/ce/components/pages/header/collaborators-list.tsx\teac1115 (commit)\n@@ -0,0 +1,10 @@\n+\"use client\";\n+\n+// store\n+import { TPageInstance } from \"@/store/pages/base-page\";\n+\n+export type TPageCollaboratorsListProps = {\n+  page: TPageInstance;\n+};\n+\n+export const PageCollaboratorsList = ({}: TPageCollaboratorsListProps) => null;\n"
        },
        {
          "path": "web/ce/components/pages/header/lock-control.tsx",
          "status": "added",
          "diff": "Index: web/ce/components/pages/header/lock-control.tsx\n===================================================================\n--- web/ce/components/pages/header/lock-control.tsx\t8166a75 (parent)\n+++ web/ce/components/pages/header/lock-control.tsx\teac1115 (commit)\n@@ -0,0 +1,116 @@\n+\"use client\";\n+\n+import { useState, useEffect, useRef } from \"react\";\n+import { observer } from \"mobx-react\";\n+import { LockKeyhole, LockKeyholeOpen } from \"lucide-react\";\n+// plane imports\n+import { Tooltip } from \"@plane/ui\";\n+// hooks\n+import { usePageOperations } from \"@/hooks/use-page-operations\";\n+// store\n+import { TPageInstance } from \"@/store/pages/base-page\";\n+\n+// Define our lock display states, renaming \"icon-only\" to \"neutral\"\n+type LockDisplayState = \"neutral\" | \"locked\" | \"unlocked\";\n+\n+type Props = {\n+  page: TPageInstance;\n+};\n+\n+export const PageLockControl = observer(({ page }: Props) => {\n+  // Initial state: if locked, then \"locked\", otherwise default to \"neutral\"\n+  const [displayState, setDisplayState] = useState<LockDisplayState>(page.is_locked ? \"locked\" : \"neutral\");\n+  // derived values\n+  const { canCurrentUserLockPage, is_locked } = page;\n+  // Ref for the transition timer\n+  const timerRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n+  // Ref to store the previous value of isLocked for detecting transitions\n+  const prevLockedRef = useRef(is_locked);\n+  // page operations\n+  const {\n+    pageOperations: { toggleLock },\n+  } = usePageOperations({\n+    page,\n+  });\n+\n+  // Cleanup any running timer on unmount\n+  useEffect(\n+    () => () => {\n+      if (timerRef.current) clearTimeout(timerRef.current);\n+    },\n+    []\n+  );\n+\n+  // Update display state when isLocked changes\n+  useEffect(() => {\n+    // Clear any previous timer to avoid overlapping transitions\n+    if (timerRef.current) {\n+      clearTimeout(timerRef.current);\n+      timerRef.current = null;\n+    }\n+\n+    // Transition logic:\n+    // If locked, ensure the display state is \"locked\"\n+    // If unlocked after being locked, show \"unlocked\" briefly then revert to \"neutral\"\n+    if (is_locked) {\n+      setDisplayState(\"locked\");\n+    } else if (prevLockedRef.current === true) {\n+      setDisplayState(\"unlocked\");\n+      timerRef.current = setTimeout(() => {\n+        setDisplayState(\"neutral\");\n+        timerRef.current = null;\n+      }, 600);\n+    } else {\n+      setDisplayState(\"neutral\");\n+    }\n+\n+    // Update the previous locked state\n+    prevLockedRef.current = is_locked;\n+  }, [is_locked]);\n+\n+  if (!canCurrentUserLockPage) return null;\n+\n+  // Render different UI based on the current display state\n+  return (\n+    <>\n+      {displayState === \"neutral\" && (\n+        <Tooltip tooltipContent=\"Lock\" position=\"bottom\">\n+          <button\n+            type=\"button\"\n+            onClick={toggleLock}\n+            className=\"flex-shrink-0 size-6 grid place-items-center rounded text-custom-text-200 hover:text-custom-text-100 hover:bg-custom-background-80 transition-colors\"\n+            aria-label=\"Lock\"\n+          >\n+            <LockKeyhole className=\"size-3.5\" />\n+          </button>\n+        </Tooltip>\n+      )}\n+\n+      {displayState === \"locked\" && (\n+        <button\n+          type=\"button\"\n+          onClick={toggleLock}\n+          className=\"h-6 flex items-center gap-1 px-2 rounded text-custom-primary-100 bg-custom-primary-100/20 hover:bg-custom-primary-100/30 transition-colors\"\n+          aria-label=\"Locked\"\n+        >\n+          <LockKeyhole className=\"flex-shrink-0 size-3.5 animate-lock-icon\" />\n+          <span className=\"text-xs font-medium whitespace-nowrap overflow-hidden transition-all duration-500 ease-out animate-text-slide-in\">\n+            Locked\n+          </span>\n+        </button>\n+      )}\n+\n+      {displayState === \"unlocked\" && (\n+        <div\n+          className=\"h-6 flex items-center gap-1 px-2 rounded text-custom-text-200 animate-fade-out\"\n+          aria-label=\"Unlocked\"\n+        >\n+          <LockKeyholeOpen className=\"flex-shrink-0 size-3.5 animate-unlock-icon\" />\n+          <span className=\"text-xs font-medium whitespace-nowrap overflow-hidden transition-all duration-500 ease-out animate-text-slide-in animate-text-fade-out\">\n+            Unlocked\n+          </span>\n+        </div>\n+      )}\n+    </>\n+  );\n+});\n"
        },
        {
          "path": "web/ce/components/pages/header/move-control.tsx",
          "status": "added",
          "diff": "Index: web/ce/components/pages/header/move-control.tsx\n===================================================================\n--- web/ce/components/pages/header/move-control.tsx\t8166a75 (parent)\n+++ web/ce/components/pages/header/move-control.tsx\teac1115 (commit)\n@@ -0,0 +1,10 @@\n+\"use client\";\n+\n+// store\n+import { TPageInstance } from \"@/store/pages/base-page\";\n+\n+export type TPageMoveControlProps = {\n+  page: TPageInstance;\n+};\n+\n+export const PageMoveControl = ({}: TPageMoveControlProps) => null;\n"
        },
        {
          "path": "web/core/components/pages/dropdowns/edit-information-popover.tsx",
          "status": "deleted",
          "diff": "Index: web/core/components/pages/dropdowns/edit-information-popover.tsx\n===================================================================\n--- web/core/components/pages/dropdowns/edit-information-popover.tsx\t8166a75 (parent)\n+++ web/core/components/pages/dropdowns/edit-information-popover.tsx\teac1115 (commit)\n@@ -1,19 +0,0 @@\n-import { observer } from \"mobx-react\";\n-// helpers\n-import { calculateTimeAgoShort } from \"@/helpers/date-time.helper\";\n-// store types\n-import { TPageInstance } from \"@/store/pages/base-page\";\n-\n-type Props = {\n-  page: TPageInstance;\n-};\n-\n-export const PageEditInformationPopover: React.FC<Props> = observer((props) => {\n-  const { page } = props;\n-\n-  return (\n-    <div className=\"flex-shrink-0 whitespace-nowrap\">\n-      <span className=\"text-sm text-custom-text-300\">Edited {calculateTimeAgoShort(page.updated_at ?? \"\")} ago</span>\n-    </div>\n-  );\n-});\n"
        },
        {
          "path": "web/core/components/pages/dropdowns/index.ts",
          "status": "modified",
          "diff": "Index: web/core/components/pages/dropdowns/index.ts\n===================================================================\n--- web/core/components/pages/dropdowns/index.ts\t8166a75 (parent)\n+++ web/core/components/pages/dropdowns/index.ts\teac1115 (commit)\n@@ -1,2 +1,1 @@\n export * from \"./actions\";\n-export * from \"./edit-information-popover\";\n"
        },
        {
          "path": "web/core/components/pages/editor/editor-body.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/pages/editor/editor-body.tsx\n===================================================================\n--- web/core/components/pages/editor/editor-body.tsx\t8166a75 (parent)\n+++ web/core/components/pages/editor/editor-body.tsx\teac1115 (commit)\n@@ -42,12 +42,12 @@\n };\n \n type Props = {\n   config: TEditorBodyConfig;\n-  editorRef: React.RefObject<EditorRefApi>;\n   editorReady: boolean;\n+  editorForwardRef: React.RefObject<EditorRefApi>;\n   handleConnectionStatus: Dispatch<SetStateAction<boolean>>;\n-  handleEditorReady: Dispatch<SetStateAction<boolean>>;\n+  handleEditorReady: (status: boolean) => void;\n   handlers: TEditorBodyHandlers;\n   page: TPageInstance;\n   webhookConnectionParams: TWebhookConnectionQueryParams;\n   workspaceSlug: string;\n@@ -55,9 +55,9 @@\n \n export const PageEditorBody: React.FC<Props> = observer((props) => {\n   const {\n     config,\n-    editorRef,\n+    editorForwardRef,\n     handleConnectionStatus,\n     handleEditorReady,\n     handlers,\n     page,\n@@ -69,9 +69,9 @@\n   const { getWorkspaceBySlug } = useWorkspace();\n   const { getUserDetails } = useMember();\n \n   // derived values\n-  const { id: pageId, name: pageTitle, isContentEditable, updateTitle } = page;\n+  const { id: pageId, name: pageTitle, isContentEditable, updateTitle, editorRef } = page;\n   const workspaceId = getWorkspaceBySlug(workspaceSlug)?.id ?? \"\";\n   // issue-embed\n   const { issueEmbedProps } = useIssueEmbed({\n     fetchEmbedSuggestions: handlers.fetchEntity,\n@@ -171,12 +171,12 @@\n         <div className=\"page-summary-container absolute h-full right-0 top-[64px] z-[5]\">\n           <div className=\"sticky top-[72px]\">\n             <div className=\"group/page-toc relative px-page-x\">\n               <div className=\"cursor-pointer max-h-[50vh] overflow-hidden\">\n-                <PageContentBrowser editorRef={editorRef?.current} showOutline />\n+                <PageContentBrowser editorRef={editorRef} showOutline />\n               </div>\n               <div className=\"absolute top-0 right-0 opacity-0 translate-x-1/2 pointer-events-none group-hover/page-toc:opacity-100 group-hover/page-toc:-translate-x-1/4 group-hover/page-toc:pointer-events-auto transition-all duration-300 w-52 max-h-[70vh] overflow-y-scroll vertical-scrollbar scrollbar-sm whitespace-nowrap bg-custom-background-90 p-4 rounded\">\n-                <PageContentBrowser editorRef={editorRef?.current} />\n+                <PageContentBrowser editorRef={editorRef} />\n               </div>\n             </div>\n           </div>\n         </div>\n@@ -195,9 +195,9 @@\n           editable={isContentEditable}\n           id={pageId}\n           fileHandler={config.fileHandler}\n           handleEditorReady={handleEditorReady}\n-          ref={editorRef}\n+          ref={editorForwardRef}\n           containerClassName=\"h-full p-0 pb-64\"\n           displayConfig={displayConfig}\n           mentionHandler={{\n             searchCallback: async (query) => {\n"
        },
        {
          "path": "web/core/components/pages/editor/header/logo-picker.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/pages/editor/header/logo-picker.tsx\n===================================================================\n--- web/core/components/pages/editor/header/logo-picker.tsx\t8166a75 (parent)\n+++ web/core/components/pages/editor/header/logo-picker.tsx\teac1115 (commit)\n@@ -22,9 +22,9 @@\n   const isLogoSelected = !!logo_props?.in_use;\n \n   return (\n     <div\n-      className={cn(className, \"max-h-0 pointer-events-none transition-all ease-linear duration-200\", {\n+      className={cn(className, \"max-h-0 pointer-events-none transition-all ease-linear duration-300\", {\n         \"max-h-[56px] pointer-events-auto\": isLogoSelected,\n       })}\n     >\n       <EmojiIconPicker\n"
        },
        {
          "path": "web/core/components/pages/editor/page-root.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/pages/editor/page-root.tsx\n===================================================================\n--- web/core/components/pages/editor/page-root.tsx\t8166a75 (parent)\n+++ web/core/components/pages/editor/page-root.tsx\teac1115 (commit)\n@@ -1,5 +1,5 @@\n-import { useEffect, useRef, useState } from \"react\";\n+import { useCallback, useEffect, useRef, useState } from \"react\";\n import { observer } from \"mobx-react\";\n import { useSearchParams } from \"next/navigation\";\n // editor\n import { EditorRefApi } from \"@plane/editor\";\n@@ -17,10 +17,8 @@\n // hooks\n import { useAppRouter } from \"@/hooks/use-app-router\";\n import { usePageFallback } from \"@/hooks/use-page-fallback\";\n import { useQueryParams } from \"@/hooks/use-query-params\";\n-// plane web hooks\n-import { EPageStoreType } from \"@/plane-web/hooks/store\";\n // store\n import { TPageInstance } from \"@/store/pages/base-page\";\n \n export type TPageRootHandlers = {\n@@ -37,15 +35,14 @@\n type TPageRootProps = {\n   config: TPageRootConfig;\n   handlers: TPageRootHandlers;\n   page: TPageInstance;\n-  storeType: EPageStoreType;\n   webhookConnectionParams: TWebhookConnectionQueryParams;\n   workspaceSlug: string;\n };\n \n export const PageRoot = observer((props: TPageRootProps) => {\n-  const { config, handlers, page, storeType, webhookConnectionParams, workspaceSlug } = props;\n+  const { config, handlers, page, webhookConnectionParams, workspaceSlug } = props;\n   // states\n   const [editorReady, setEditorReady] = useState(false);\n   const [hasConnectionFailed, setHasConnectionFailed] = useState(false);\n   const [isVersionsOverlayOpen, setIsVersionsOverlayOpen] = useState(false);\n@@ -55,9 +52,9 @@\n   const router = useAppRouter();\n   // search params\n   const searchParams = useSearchParams();\n   // derived values\n-  const { isContentEditable } = page;\n+  const { isContentEditable, setEditorRef } = page;\n   // page fallback\n   usePageFallback({\n     editorRef,\n     fetchPageDescription: handlers.fetchDescriptionBinary,\n@@ -66,8 +63,18 @@\n   });\n   // update query params\n   const { updateQueryParams } = useQueryParams();\n \n+  const handleEditorReady = useCallback(\n+    (status: boolean) => {\n+      setEditorReady(status);\n+      if (editorRef.current && !page.editorRef) {\n+        setEditorRef(editorRef.current);\n+      }\n+    },\n+    [page.editorRef, setEditorRef]\n+  );\n+\n   const version = searchParams.get(\"version\");\n   useEffect(() => {\n     if (!version) {\n       setIsVersionsOverlayOpen(false);\n@@ -88,8 +95,16 @@\n     editorRef.current?.setEditorValue(descriptionHTML);\n   };\n   const currentVersionDescription = editorRef.current?.getDocument().html;\n \n+  // reset editor ref on unmount\n+  useEffect(\n+    () => () => {\n+      setEditorRef(null);\n+    },\n+    [setEditorRef]\n+  );\n+\n   return (\n     <>\n       <PageVersionsOverlay\n         activeVersion={version}\n@@ -102,15 +117,15 @@\n         onClose={handleCloseVersionsOverlay}\n         pageId={page.id ?? \"\"}\n         restoreEnabled={isContentEditable}\n       />\n-      <PageEditorToolbarRoot editorReady={editorReady} editorRef={editorRef} page={page} storeType={storeType} />\n+      <PageEditorToolbarRoot page={page} />\n       <PageEditorBody\n         config={config}\n         editorReady={editorReady}\n-        editorRef={editorRef}\n+        editorForwardRef={editorRef}\n         handleConnectionStatus={setHasConnectionFailed}\n-        handleEditorReady={setEditorReady}\n+        handleEditorReady={handleEditorReady}\n         handlers={handlers}\n         page={page}\n         webhookConnectionParams={webhookConnectionParams}\n         workspaceSlug={workspaceSlug}\n"
        },
        {
          "path": "web/core/components/pages/editor/summary/content-browser.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/pages/editor/summary/content-browser.tsx\n===================================================================\n--- web/core/components/pages/editor/summary/content-browser.tsx\t8166a75 (parent)\n+++ web/core/components/pages/editor/summary/content-browser.tsx\teac1115 (commit)\n@@ -1,5 +1,5 @@\n-import { useState, useEffect } from \"react\";\n+import { useState, useEffect, useCallback } from \"react\";\n // plane editor\n import { EditorRefApi, IMarking } from \"@plane/editor\";\n // components\n import { OutlineHeading1, OutlineHeading2, OutlineHeading3 } from \"./heading-components\";\n@@ -23,12 +23,15 @@\n       if (unsubscribe) unsubscribe();\n     };\n   }, [editorRef]);\n \n-  const handleOnClick = (marking: IMarking) => {\n-    editorRef?.scrollSummary(marking);\n-    if (setSidePeekVisible) setSidePeekVisible(false);\n-  };\n+  const handleOnClick = useCallback(\n+    (marking: IMarking) => {\n+      editorRef?.scrollSummary(marking);\n+      setSidePeekVisible?.(false);\n+    },\n+    [editorRef, setSidePeekVisible]\n+  );\n \n   const HeadingComponent: {\n     [key: number]: React.FC<{ marking: IMarking; onClick: () => void }>;\n   } = {\n"
        },
        {
          "path": "web/core/components/pages/editor/title.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/pages/editor/title.tsx\n===================================================================\n--- web/core/components/pages/editor/title.tsx\t8166a75 (parent)\n+++ web/core/components/pages/editor/title.tsx\teac1115 (commit)\n@@ -12,9 +12,9 @@\n // hooks\n import { usePageFilters } from \"@/hooks/use-page-filters\";\n \n type Props = {\n-  editorRef: React.RefObject<EditorRefApi>;\n+  editorRef: EditorRefApi | null;\n   readOnly: boolean;\n   title: string | undefined;\n   updateTitle: (title: string) => void;\n };\n@@ -52,9 +52,9 @@\n             placeholder=\"Untitled\"\n             onKeyDown={(e) => {\n               if (e.key === \"Enter\") {\n                 e.preventDefault();\n-                editorRef.current?.setFocusAtPosition(0);\n+                editorRef?.setFocusAtPosition(0);\n               }\n             }}\n             value={title}\n             onChange={(e) => updateTitle(e.target.value)}\n"
        },
        {
          "path": "web/core/components/pages/editor/toolbar/extra-options.tsx",
          "status": "deleted",
          "diff": "Index: web/core/components/pages/editor/toolbar/extra-options.tsx\n===================================================================\n--- web/core/components/pages/editor/toolbar/extra-options.tsx\t8166a75 (parent)\n+++ web/core/components/pages/editor/toolbar/extra-options.tsx\teac1115 (commit)\n@@ -1,103 +0,0 @@\n-\"use client\";\n-\n-import { observer } from \"mobx-react\";\n-// constants\n-import { IS_FAVORITE_MENU_OPEN } from \"@plane/constants\";\n-// editor\n-import { EditorRefApi } from \"@plane/editor\";\n-// plane hooks\n-import { useLocalStorage } from \"@plane/hooks\";\n-// ui\n-import { ArchiveIcon, FavoriteStar, setToast, TOAST_TYPE, Tooltip } from \"@plane/ui\";\n-// components\n-import { LockedComponent } from \"@/components/icons/locked-component\";\n-import { PageInfoPopover, PageOptionsDropdown } from \"@/components/pages\";\n-// helpers\n-import { renderFormattedDate } from \"@/helpers/date-time.helper\";\n-// hooks\n-import useOnlineStatus from \"@/hooks/use-online-status\";\n-// plane web hooks\n-import { EPageStoreType } from \"@/plane-web/hooks/store\";\n-// store\n-import { TPageInstance } from \"@/store/pages/base-page\";\n-\n-type Props = {\n-  editorRef: EditorRefApi;\n-  page: TPageInstance;\n-  storeType: EPageStoreType;\n-};\n-\n-export const PageExtraOptions: React.FC<Props> = observer((props) => {\n-  const { editorRef, page, storeType } = props;\n-  // derived values\n-  const {\n-    archived_at,\n-    isContentEditable,\n-    is_favorite,\n-    is_locked,\n-    canCurrentUserFavoritePage,\n-    addToFavorites,\n-    removePageFromFavorites,\n-  } = page;\n-  // use online status\n-  const { isOnline } = useOnlineStatus();\n-  // local storage\n-  const { setValue: toggleFavoriteMenu, storedValue: isFavoriteMenuOpen } = useLocalStorage<boolean>(\n-    IS_FAVORITE_MENU_OPEN,\n-    false\n-  );\n-  // favorite handler\n-  const handleFavorite = () => {\n-    if (is_favorite) {\n-      removePageFromFavorites().then(() =>\n-        setToast({\n-          type: TOAST_TYPE.SUCCESS,\n-          title: \"Success!\",\n-          message: \"Page removed from favorites.\",\n-        })\n-      );\n-    } else {\n-      addToFavorites().then(() => {\n-        if (!isFavoriteMenuOpen) toggleFavoriteMenu(true);\n-        setToast({\n-          type: TOAST_TYPE.SUCCESS,\n-          title: \"Success!\",\n-          message: \"Page added to favorites.\",\n-        });\n-      });\n-    }\n-  };\n-\n-  return (\n-    <div className=\"flex items-center gap-3\">\n-      {is_locked && <LockedComponent />}\n-      {archived_at && (\n-        <div className=\"flex-shrink-0 flex h-7 items-center gap-2 rounded-full bg-blue-500/20 px-3 py-0.5 text-xs font-medium text-blue-500\">\n-          <ArchiveIcon className=\"flex-shrink-0 size-3\" />\n-          <span>Archived at {renderFormattedDate(archived_at)}</span>\n-        </div>\n-      )}\n-      {isContentEditable && !isOnline && (\n-        <Tooltip\n-          tooltipHeading=\"You are offline.\"\n-          tooltipContent=\"You can continue making changes. They will be synced when you are back online.\"\n-        >\n-          <div className=\"flex-shrink-0 flex h-7 items-center gap-2 rounded-full bg-custom-background-80 px-3 py-0.5 text-xs font-medium text-custom-text-300\">\n-            <span className=\"flex-shrink-0 size-1.5 rounded-full bg-custom-text-300\" />\n-            <span>Offline</span>\n-          </div>\n-        </Tooltip>\n-      )}\n-      {canCurrentUserFavoritePage && (\n-        <FavoriteStar\n-          selected={is_favorite}\n-          onClick={handleFavorite}\n-          buttonClassName=\"flex-shrink-0\"\n-          iconClassName=\"text-custom-text-100\"\n-        />\n-      )}\n-      <PageInfoPopover editorRef={editorRef} page={page} />\n-      <PageOptionsDropdown editorRef={editorRef} page={page} storeType={storeType} />\n-    </div>\n-  );\n-});\n"
        },
        {
          "path": "web/core/components/pages/editor/toolbar/index.ts",
          "status": "modified",
          "diff": "Index: web/core/components/pages/editor/toolbar/index.ts\n===================================================================\n--- web/core/components/pages/editor/toolbar/index.ts\t8166a75 (parent)\n+++ web/core/components/pages/editor/toolbar/index.ts\teac1115 (commit)\n@@ -1,7 +1,5 @@\n export * from \"./color-dropdown\";\n-export * from \"./extra-options\";\n export * from \"./info-popover\";\n export * from \"./options-dropdown\";\n export * from \"./root\";\n-export * from \"./mobile-root\";\n export * from \"./toolbar\";\n"
        },
        {
          "path": "web/core/components/pages/editor/toolbar/info-popover.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/pages/editor/toolbar/info-popover.tsx\n===================================================================\n--- web/core/components/pages/editor/toolbar/info-popover.tsx\t8166a75 (parent)\n+++ web/core/components/pages/editor/toolbar/info-popover.tsx\teac1115 (commit)\n@@ -1,29 +1,26 @@\n import { useState } from \"react\";\n+import { observer } from \"mobx-react\";\n import Link from \"next/link\";\n import { useParams } from \"next/navigation\";\n import { usePopper } from \"react-popper\";\n import { Info } from \"lucide-react\";\n-// plane editor\n-import { EditorRefApi } from \"@plane/editor\";\n-// plane ui\n+// plane imports\n import { Avatar } from \"@plane/ui\";\n-// plane utils\n import { getFileURL, renderFormattedDate } from \"@plane/utils\";\n // helpers\n-import { getReadTimeFromWordsCount } from \"@/helpers/date-time.helper\";\n+import { calculateTimeAgoShort, getReadTimeFromWordsCount } from \"@/helpers/date-time.helper\";\n // hooks\n import { useMember } from \"@/hooks/store\";\n // store types\n import { TPageInstance } from \"@/store/pages/base-page\";\n \n type Props = {\n-  editorRef: EditorRefApi | null;\n   page: TPageInstance;\n };\n \n-export const PageInfoPopover: React.FC<Props> = (props) => {\n-  const { editorRef, page } = props;\n+export const PageInfoPopover: React.FC<Props> = observer((props) => {\n+  const { page } = props;\n   // states\n   const [isPopoverOpen, setIsPopoverOpen] = useState(false);\n   // refs\n   const [referenceElement, setReferenceElement] = useState<HTMLButtonElement | null>(null);\n@@ -39,9 +36,9 @@\n   // derived values\n   const editorInformation = page.updated_by ? getUserDetails(page.updated_by) : undefined;\n   const creatorInformation = page.created_by ? getUserDetails(page.created_by) : undefined;\n \n-  const documentsInfo = editorRef?.getDocumentInfo() || { words: 0, characters: 0, paragraphs: 0 };\n+  const documentsInfo = page.editorRef?.getDocumentInfo() || { words: 0, characters: 0, paragraphs: 0 };\n \n   const secondsToReadableTime = () => {\n     const wordsCount = documentsInfo.words;\n     const readTimeInSeconds = Number(getReadTimeFromWordsCount(wordsCount).toFixed(0));\n@@ -71,10 +68,18 @@\n     },\n   ];\n \n   return (\n-    <div onMouseEnter={() => setIsPopoverOpen(true)} onMouseLeave={() => setIsPopoverOpen(false)}>\n-      <button type=\"button\" ref={setReferenceElement} className=\"block\">\n+    <div\n+      className=\"flex-shrink-0\"\n+      onMouseEnter={() => setIsPopoverOpen(true)}\n+      onMouseLeave={() => setIsPopoverOpen(false)}\n+    >\n+      <button\n+        type=\"button\"\n+        ref={setReferenceElement}\n+        className=\"size-6 grid place-items-center rounded text-custom-text-200 hover:text-custom-text-100 hover:bg-custom-background-80 transition-colors\"\n+      >\n         <Info className=\"size-3.5\" />\n       </button>\n       {isPopoverOpen && (\n         <div\n@@ -105,9 +110,9 @@\n                   size=\"sm\"\n                 />\n                 <span>\n                   {editorInformation?.display_name}{\" \"}\n-                  <span className=\"text-custom-text-300\">{renderFormattedDate(page.updated_at)}</span>\n+                  <span className=\"text-custom-text-300\">{calculateTimeAgoShort(page.updated_at ?? \"\")} ago</span>\n                 </span>\n               </Link>\n             </div>\n             <div>\n@@ -132,5 +137,5 @@\n         </div>\n       )}\n     </div>\n   );\n-};\n+});\n"
        },
        {
          "path": "web/core/components/pages/editor/toolbar/mobile-root.tsx",
          "status": "deleted",
          "diff": "Index: web/core/components/pages/editor/toolbar/mobile-root.tsx\n===================================================================\n--- web/core/components/pages/editor/toolbar/mobile-root.tsx\t8166a75 (parent)\n+++ web/core/components/pages/editor/toolbar/mobile-root.tsx\teac1115 (commit)\n@@ -1,37 +0,0 @@\n-import { observer } from \"mobx-react\";\n-// plane imports\n-import { EditorRefApi } from \"@plane/editor\";\n-import { Header, EHeaderVariant } from \"@plane/ui\";\n-// components\n-import { PageExtraOptions, PageToolbar } from \"@/components/pages\";\n-// hooks\n-import { usePageFilters } from \"@/hooks/use-page-filters\";\n-// plane web hooks\n-import { EPageStoreType } from \"@/plane-web/hooks/store\";\n-// store\n-import { TPageInstance } from \"@/store/pages/base-page\";\n-\n-type Props = {\n-  editorRef: EditorRefApi;\n-  page: TPageInstance;\n-  storeType: EPageStoreType;\n-};\n-\n-export const PageEditorMobileHeaderRoot: React.FC<Props> = observer((props) => {\n-  const { editorRef, page, storeType } = props;\n-  // derived values\n-  const { isContentEditable } = page;\n-  // page filters\n-  const { isStickyToolbarEnabled } = usePageFilters();\n-\n-  return (\n-    <>\n-      <Header variant={EHeaderVariant.SECONDARY}>\n-        <PageExtraOptions editorRef={editorRef} page={page} storeType={storeType} />\n-      </Header>\n-      <Header variant={EHeaderVariant.TERNARY}>\n-        {isContentEditable && editorRef && <PageToolbar editorRef={editorRef} isHidden={!isStickyToolbarEnabled} />}\n-      </Header>\n-    </>\n-  );\n-});\n"
        },
        {
          "path": "web/core/components/pages/editor/toolbar/options-dropdown.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/pages/editor/toolbar/options-dropdown.tsx\n===================================================================\n--- web/core/components/pages/editor/toolbar/options-dropdown.tsx\t8166a75 (parent)\n+++ web/core/components/pages/editor/toolbar/options-dropdown.tsx\teac1115 (commit)\n@@ -3,11 +3,9 @@\n import { useMemo, useState } from \"react\";\n import { observer } from \"mobx-react\";\n import { useRouter } from \"next/navigation\";\n import { ArrowUpToLine, Clipboard, History } from \"lucide-react\";\n-// document editor\n-import { EditorRefApi } from \"@plane/editor\";\n-// ui\n+// plane imports\n import { TContextMenuItem, TOAST_TYPE, ToggleSwitch, setToast } from \"@plane/ui\";\n // components\n import { ExportPageModal, PageActions, TPageActions } from \"@/components/pages\";\n // helpers\n@@ -20,21 +18,20 @@\n // store\n import { TPageInstance } from \"@/store/pages/base-page\";\n \n type Props = {\n-  editorRef: EditorRefApi | null;\n   page: TPageInstance;\n   storeType: EPageStoreType;\n };\n \n export const PageOptionsDropdown: React.FC<Props> = observer((props) => {\n-  const { editorRef, page, storeType } = props;\n+  const { page, storeType } = props;\n   // states\n   const [isExportModalOpen, setIsExportModalOpen] = useState(false);\n   // router\n   const router = useRouter();\n   // store values\n-  const { name, isContentEditable } = page;\n+  const { name, isContentEditable, editorRef } = page;\n   // page filters\n   const { isFullWidth, handleFullWidth, isStickyToolbarEnabled, handleStickyToolbar } = usePageFilters();\n   // update query params\n   const { updateQueryParams } = useQueryParams();\n@@ -126,12 +123,9 @@\n         extraOptions={EXTRA_MENU_OPTIONS}\n         optionsOrder={[\n           \"full-screen\",\n           \"sticky-toolbar\",\n-          \"copy-link\",\n           \"make-a-copy\",\n-          \"move\",\n-          \"toggle-lock\",\n           \"toggle-access\",\n           \"archive-restore\",\n           \"delete\",\n           \"version-history\",\n"
        },
        {
          "path": "web/core/components/pages/editor/toolbar/root.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/pages/editor/toolbar/root.tsx\n===================================================================\n--- web/core/components/pages/editor/toolbar/root.tsx\t8166a75 (parent)\n+++ web/core/components/pages/editor/toolbar/root.tsx\teac1115 (commit)\n@@ -1,58 +1,48 @@\n import { observer } from \"mobx-react\";\n-import { EditorRefApi } from \"@plane/editor\";\n // components\n-import { PageEditorMobileHeaderRoot, PageExtraOptions, PageToolbar } from \"@/components/pages\";\n+import { PageToolbar } from \"@/components/pages\";\n // helpers\n import { cn } from \"@/helpers/common.helper\";\n // hooks\n import { usePageFilters } from \"@/hooks/use-page-filters\";\n-// plane web hooks\n-import { EPageStoreType } from \"@/plane-web/hooks/store\";\n+// plane web components\n+import { PageCollaboratorsList } from \"@/plane-web/components/pages/header/collaborators-list\";\n // store\n import { TPageInstance } from \"@/store/pages/base-page\";\n \n type Props = {\n-  editorReady: boolean;\n-  editorRef: React.RefObject<EditorRefApi>;\n   page: TPageInstance;\n-  storeType: EPageStoreType;\n };\n \n export const PageEditorToolbarRoot: React.FC<Props> = observer((props) => {\n-  const { editorReady, editorRef, page, storeType } = props;\n+  const { page } = props;\n   // derived values\n-  const { isContentEditable } = page;\n+  const { isContentEditable, editorRef } = page;\n   // page filters\n   const { isFullWidth, isStickyToolbarEnabled } = usePageFilters();\n   // derived values\n-  const resolvedEditorRef = editorRef.current;\n   const shouldHideToolbar = !isStickyToolbarEnabled || !isContentEditable;\n \n-  if (!resolvedEditorRef) return null;\n-\n   return (\n-    <div id=\"page-toolbar-container\">\n+    <div\n+      id=\"page-toolbar-container\"\n+      className={cn(\"max-h-[52px] transition-all ease-linear duration-300 overflow-auto\", {\n+        \"max-h-0 overflow-hidden\": shouldHideToolbar,\n+      })}\n+    >\n       <div\n         className={cn(\n-          \"hidden md:flex items-center relative min-h-[52px] page-toolbar-content px-page-x border-b border-transparent transition-all duration-200 ease-in-out\",\n+          \"hidden md:flex items-center relative min-h-[52px] page-toolbar-content px-page-x transition-all duration-200 ease-in-out\",\n           {\n             \"wide-layout\": isFullWidth,\n-            \"border-custom-border-200\": true,\n           }\n         )}\n       >\n         <div className=\"max-w-full w-full flex items-center justify-between\">\n-          <div>\n-            {editorReady && resolvedEditorRef && (\n-              <PageToolbar editorRef={resolvedEditorRef} isHidden={shouldHideToolbar} />\n-            )}\n-          </div>\n-          <PageExtraOptions editorRef={resolvedEditorRef} page={page} storeType={storeType} />\n+          {editorRef && <PageToolbar editorRef={editorRef} />}\n+          <PageCollaboratorsList page={page} />\n         </div>\n       </div>\n-      <div className=\"md:hidden\">\n-        <PageEditorMobileHeaderRoot editorRef={resolvedEditorRef} page={page} storeType={storeType} />\n-      </div>\n     </div>\n   );\n });\n"
        },
        {
          "path": "web/core/components/pages/editor/toolbar/toolbar.tsx",
          "status": "modified",
          "diff": "Index: web/core/components/pages/editor/toolbar/toolbar.tsx\n===================================================================\n--- web/core/components/pages/editor/toolbar/toolbar.tsx\t8166a75 (parent)\n+++ web/core/components/pages/editor/toolbar/toolbar.tsx\teac1115 (commit)\n@@ -14,9 +14,8 @@\n import { cn } from \"@/helpers/common.helper\";\n \n type Props = {\n   editorRef: EditorRefApi;\n-  isHidden: boolean;\n };\n \n type ToolbarButtonProps = {\n   item: ToolbarMenuItem;\n@@ -64,9 +63,9 @@\n \n const toolbarItems = TOOLBAR_ITEMS.document;\n \n export const PageToolbar: React.FC<Props> = (props) => {\n-  const { editorRef, isHidden } = props;\n+  const { editorRef } = props;\n   // states\n   const [activeStates, setActiveStates] = useState<Record<string, boolean>>({});\n \n   const updateActiveStates = useCallback(() => {\n@@ -97,16 +96,9 @@\n     })\n   );\n \n   return (\n-    <div\n-      className={cn(\n-        \"flex flex-wrap items-center divide-x divide-custom-border-200 opacity-100 transition-opacity duration-200 ease-in-out\",\n-        {\n-          \"opacity-0 pointer-events-none\": isHidden,\n-        }\n-      )}\n-    >\n+    <div className=\"flex items-center divide-x divide-custom-border-200 overflow-x-scroll\">\n       <CustomMenu\n         customButton={\n           <span className=\"text-custom-text-300 text-sm border-[0.5px] border-custom-border-300 hover:bg-custom-background-80 h-7 w-24 rounded px-2 flex items-center justify-between gap-2 whitespace-nowrap text-left\">\n             {activeTypography?.name || \"Text\"}\n@@ -138,22 +130,24 @@\n             )}\n           </CustomMenu.MenuItem>\n         ))}\n       </CustomMenu>\n-      <ColorDropdown\n-        handleColorSelect={(key, color) =>\n-          editorRef.executeMenuItemCommand({\n-            itemKey: key,\n-            color,\n-          })\n-        }\n-        isColorActive={(key, color) =>\n-          editorRef.isMenuItemActive({\n-            itemKey: key,\n-            color,\n-          })\n-        }\n-      />\n+      <div className=\"flex-shrink-0\">\n+        <ColorDropdown\n+          handleColorSelect={(key, color) =>\n+            editorRef.executeMenuItemCommand({\n+              itemKey: key,\n+              color,\n+            })\n+          }\n+          isColorActive={(key, color) =>\n+            editorRef.isMenuItemActive({\n+              itemKey: key,\n+              color,\n+            })\n+          }\n+        />\n+      </div>\n       {Object.keys(toolbarItems).map((key) => (\n         <div key={key} className=\"flex items-center gap-0.5 px-2 first:pl-0 last:pr-0\">\n           {toolbarItems[key].map((item) => (\n             <ToolbarButton\n"
        },
        {
          "path": "web/core/components/pages/header/actions.tsx",
          "status": "added",
          "diff": "Index: web/core/components/pages/header/actions.tsx\n===================================================================\n--- web/core/components/pages/header/actions.tsx\t8166a75 (parent)\n+++ web/core/components/pages/header/actions.tsx\teac1115 (commit)\n@@ -0,0 +1,37 @@\n+\"use client\";\n+\n+import { observer } from \"mobx-react\";\n+// components\n+import { PageInfoPopover, PageOptionsDropdown } from \"@/components/pages\";\n+// plane web components\n+import { PageLockControl } from \"@/plane-web/components/pages/header/lock-control\";\n+import { PageMoveControl } from \"@/plane-web/components/pages/header/move-control\";\n+// plane web hooks\n+import { EPageStoreType } from \"@/plane-web/hooks/store\";\n+// store\n+import { TPageInstance } from \"@/store/pages/base-page\";\n+// local imports\n+import { PageArchivedBadge } from \"./archived-badge\";\n+import { PageCopyLinkControl } from \"./copy-link-control\";\n+import { PageOfflineBadge } from \"./offline-badge\";\n+\n+type Props = {\n+  page: TPageInstance;\n+  storeType: EPageStoreType;\n+};\n+\n+export const PageHeaderActions: React.FC<Props> = observer((props) => {\n+  const { page, storeType } = props;\n+\n+  return (\n+    <div className=\"flex items-center gap-1\">\n+      <PageArchivedBadge page={page} />\n+      <PageOfflineBadge page={page} />\n+      <PageLockControl page={page} />\n+      <PageMoveControl page={page} />\n+      <PageInfoPopover page={page} />\n+      <PageCopyLinkControl page={page} />\n+      <PageOptionsDropdown page={page} storeType={storeType} />\n+    </div>\n+  );\n+});\n"
        },
        {
          "path": "web/core/components/pages/header/archived-badge.tsx",
          "status": "added",
          "diff": "Index: web/core/components/pages/header/archived-badge.tsx\n===================================================================\n--- web/core/components/pages/header/archived-badge.tsx\t8166a75 (parent)\n+++ web/core/components/pages/header/archived-badge.tsx\teac1115 (commit)\n@@ -0,0 +1,21 @@\n+import { observer } from \"mobx-react\";\n+// plane imports\n+import { ArchiveIcon } from \"@plane/ui\";\n+import { renderFormattedDate } from \"@plane/utils\";\n+// store\n+import { TPageInstance } from \"@/store/pages/base-page\";\n+\n+type Props = {\n+  page: TPageInstance;\n+};\n+\n+export const PageArchivedBadge = observer(({ page }: Props) => {\n+  if (!page.archived_at) return null;\n+\n+  return (\n+    <div className=\"flex-shrink-0 h-6 flex items-center gap-1 px-2 rounded text-custom-primary-100 bg-custom-primary-100/20\">\n+      <ArchiveIcon className=\"flex-shrink-0 size-3.5\" />\n+      <span className=\"text-xs font-medium\">Archived at {renderFormattedDate(page.archived_at)}</span>\n+    </div>\n+  );\n+});\n"
        },
        {
          "path": "web/core/components/pages/header/copy-link-control.tsx",
          "status": "added",
          "diff": "Index: web/core/components/pages/header/copy-link-control.tsx\n===================================================================\n--- web/core/components/pages/header/copy-link-control.tsx\t8166a75 (parent)\n+++ web/core/components/pages/header/copy-link-control.tsx\teac1115 (commit)\n@@ -0,0 +1,27 @@\n+import { observer } from \"mobx-react\";\n+import { Link } from \"lucide-react\";\n+// hooks\n+import { usePageOperations } from \"@/hooks/use-page-operations\";\n+// store\n+import { TPageInstance } from \"@/store/pages/base-page\";\n+\n+type Props = {\n+  page: TPageInstance;\n+};\n+\n+export const PageCopyLinkControl = observer(({ page }: Props) => {\n+  // page operations\n+  const { pageOperations } = usePageOperations({\n+    page,\n+  });\n+\n+  return (\n+    <button\n+      type=\"button\"\n+      onClick={pageOperations.copyLink}\n+      className=\"flex-shrink-0 size-6 grid place-items-center rounded text-custom-text-200 hover:text-custom-text-100 hover:bg-custom-background-80 transition-colors\"\n+    >\n+      <Link className=\"size-3.5\" />\n+    </button>\n+  );\n+});\n"
        },
        {
          "path": "web/core/components/pages/header/favorite-control.tsx",
          "status": "added",
          "diff": "Index: web/core/components/pages/header/favorite-control.tsx\n===================================================================\n--- web/core/components/pages/header/favorite-control.tsx\t8166a75 (parent)\n+++ web/core/components/pages/header/favorite-control.tsx\teac1115 (commit)\n@@ -0,0 +1,31 @@\n+import { observer } from \"mobx-react\";\n+// plane imports\n+import { FavoriteStar } from \"@plane/ui\";\n+// hooks\n+import { usePageOperations } from \"@/hooks/use-page-operations\";\n+// store\n+import { TPageInstance } from \"@/store/pages/base-page\";\n+\n+type Props = {\n+  page: TPageInstance;\n+};\n+\n+export const PageFavoriteControl = observer(({ page }: Props) => {\n+  // derived values\n+  const { is_favorite, canCurrentUserFavoritePage } = page;\n+  // page operations\n+  const { pageOperations } = usePageOperations({\n+    page,\n+  });\n+\n+  if (!canCurrentUserFavoritePage) return null;\n+\n+  return (\n+    <FavoriteStar\n+      selected={is_favorite}\n+      onClick={pageOperations.toggleFavorite}\n+      buttonClassName=\"flex-shrink-0 size-6 group rounded hover:bg-custom-background-80 transition-colors\"\n+      iconClassName=\"size-3.5 text-custom-text-200 group-hover:text-custom-text-10\"\n+    />\n+  );\n+});\n"
        },
        {
          "path": "web/core/components/pages/header/offline-badge.tsx",
          "status": "added",
          "diff": "Index: web/core/components/pages/header/offline-badge.tsx\n===================================================================\n--- web/core/components/pages/header/offline-badge.tsx\t8166a75 (parent)\n+++ web/core/components/pages/header/offline-badge.tsx\teac1115 (commit)\n@@ -0,0 +1,30 @@\n+import { observer } from \"mobx-react\";\n+// plane imports\n+import { Tooltip } from \"@plane/ui\";\n+// hooks\n+import useOnlineStatus from \"@/hooks/use-online-status\";\n+// store\n+import { TPageInstance } from \"@/store/pages/base-page\";\n+\n+type Props = {\n+  page: TPageInstance;\n+};\n+\n+export const PageOfflineBadge = observer(({ page }: Props) => {\n+  // use online status\n+  const { isOnline } = useOnlineStatus();\n+\n+  if (!page.isContentEditable || isOnline) return null;\n+\n+  return (\n+    <Tooltip\n+      tooltipHeading=\"You are offline.\"\n+      tooltipContent=\"You can continue making changes. They will be synced when you are back online.\"\n+    >\n+      <div className=\"flex-shrink-0 flex h-7 items-center gap-2 rounded-full bg-custom-background-80 px-3 py-0.5 text-xs font-medium text-custom-text-300\">\n+        <span className=\"flex-shrink-0 size-1.5 rounded-full bg-custom-text-300\" />\n+        <span>Offline</span>\n+      </div>\n+    </Tooltip>\n+  );\n+});\n"
        },
        {
          "path": "web/core/hooks/use-page-operations.ts",
          "status": "modified",
          "diff": "Index: web/core/hooks/use-page-operations.ts\n===================================================================\n--- web/core/hooks/use-page-operations.ts\t8166a75 (parent)\n+++ web/core/hooks/use-page-operations.ts\teac1115 (commit)\n@@ -46,9 +46,9 @@\n   } = page;\n   // collaborative actions\n   const { executeCollaborativeAction } = useCollaborativePageActions(props);\n   // local storage\n-  const { setValue: toggleFavoriteMenu, storedValue: isfavoriteMenuOpen } = useLocalStorage<boolean>(\n+  const { setValue: toggleFavoriteMenu, storedValue: isFavoriteMenuOpen } = useLocalStorage<boolean>(\n     IS_FAVORITE_MENU_OPEN,\n     false\n   );\n   // page operations\n@@ -146,9 +146,9 @@\n             })\n           );\n         } else {\n           addToFavorites().then(() => {\n-            if (!isfavoriteMenuOpen) toggleFavoriteMenu(true);\n+            if (!isFavoriteMenuOpen) toggleFavoriteMenu(true);\n             setToast({\n               type: TOAST_TYPE.SUCCESS,\n               title: \"Success!\",\n               message: \"Page added to favorites.\",\n@@ -198,9 +198,11 @@\n     executeCollaborativeAction,\n     getRedirectionLink,\n     is_favorite,\n     is_locked,\n+    isFavoriteMenuOpen,\n     removePageFromFavorites,\n+    toggleFavoriteMenu,\n   ]);\n   return {\n     pageOperations,\n   };\n"
        },
        {
          "path": "web/core/store/pages/base-page.ts",
          "status": "modified",
          "diff": "Index: web/core/store/pages/base-page.ts\n===================================================================\n--- web/core/store/pages/base-page.ts\t8166a75 (parent)\n+++ web/core/store/pages/base-page.ts\teac1115 (commit)\n@@ -1,8 +1,9 @@\n import set from \"lodash/set\";\n import { action, computed, makeObservable, observable, reaction, runInAction } from \"mobx\";\n // plane imports\n import { EPageAccess } from \"@plane/constants\";\n+import { EditorRefApi } from \"@plane/editor\";\n import { TDocumentPayload, TLogoProps, TNameDescriptionLoader, TPage } from \"@plane/types\";\n import { TChangeHandlerProps } from \"@plane/ui\";\n import { convertHexEmojiToDecimal } from \"@plane/utils\";\n // plane web store\n@@ -10,8 +11,9 @@\n \n export type TBasePage = TPage & {\n   // observables\n   isSubmitting: TNameDescriptionLoader;\n+  editorRef: EditorRefApi | null;\n   // computed\n   asJSON: TPage | undefined;\n   isCurrentUserOwner: boolean;\n   // helpers\n@@ -31,8 +33,10 @@\n   updatePageLogo: (value: TChangeHandlerProps) => Promise<void>;\n   addToFavorites: () => Promise<void>;\n   removePageFromFavorites: () => Promise<void>;\n   duplicate: () => Promise<TPage | undefined>;\n+  mutateProperties: (data: Partial<TPage>, shouldUpdateName?: boolean) => void;\n+  setEditorRef: (editorRef: EditorRefApi | null) => void;\n };\n \n export type TBasePagePermissions = {\n   canCurrentUserAccessPage: boolean;\n@@ -67,8 +71,9 @@\n \n export class BasePage implements TBasePage {\n   // loaders\n   isSubmitting: TNameDescriptionLoader = \"saved\";\n+  editorRef: EditorRefApi | null = null;\n   // page properties\n   id: string | undefined;\n   name: string | undefined;\n   logo_props: TLogoProps | undefined;\n@@ -124,8 +129,9 @@\n \n     makeObservable(this, {\n       // loaders\n       isSubmitting: observable.ref,\n+      editorRef: observable.ref,\n       // page properties\n       id: observable.ref,\n       name: observable.ref,\n       logo_props: observable.ref,\n@@ -164,8 +170,10 @@\n       updatePageLogo: action,\n       addToFavorites: action,\n       removePageFromFavorites: action,\n       duplicate: action,\n+      mutateProperties: action,\n+      setEditorRef: action,\n     });\n \n     this.rootStore = store;\n     this.services = services;\n@@ -425,27 +433,36 @@\n     }\n   };\n \n   updatePageLogo = async (value: TChangeHandlerProps) => {\n-    let logoValue = {};\n-    if (value?.type === \"emoji\")\n-      logoValue = {\n-        value: convertHexEmojiToDecimal(value.value.unified),\n-        url: value.value.imageUrl,\n+    const originalLogoProps = { ...this.logo_props };\n+    try {\n+      let logoValue = {};\n+      if (value?.type === \"emoji\")\n+        logoValue = {\n+          value: convertHexEmojiToDecimal(value.value.unified),\n+          url: value.value.imageUrl,\n+        };\n+      else if (value?.type === \"icon\") logoValue = value.value;\n+\n+      const logoProps: TLogoProps = {\n+        in_use: value?.type,\n+        [value?.type]: logoValue,\n       };\n-    else if (value?.type === \"icon\") logoValue = value.value;\n \n-    const logoProps: TLogoProps = {\n-      in_use: value?.type,\n-      [value?.type]: logoValue,\n-    };\n-\n-    await this.services.update({\n-      logo_props: logoProps,\n-    });\n-    runInAction(() => {\n-      this.logo_props = logoProps;\n-    });\n+      runInAction(() => {\n+        this.logo_props = logoProps;\n+      });\n+      await this.services.update({\n+        logo_props: logoProps,\n+      });\n+    } catch (error) {\n+      console.error(\"Error in updating page logo\", error);\n+      runInAction(() => {\n+        this.logo_props = originalLogoProps as TLogoProps;\n+      });\n+      throw error;\n+    }\n   };\n \n   /**\n    * @description add the page to favorites\n@@ -497,5 +514,24 @@\n   /**\n    * @description duplicate the page\n    */\n   duplicate = async () => await this.services.duplicate();\n+\n+  /**\n+   * @description mutate multiple properties at once\n+   * @param data Partial<TPage>\n+   */\n+  mutateProperties = (data: Partial<TPage>, shouldUpdateName: boolean = true) => {\n+    Object.keys(data).forEach((key) => {\n+      const value = data[key as keyof TPage];\n+      if (key === \"name\" && !shouldUpdateName) return;\n+      set(this, key, value);\n+    });\n+  };\n+\n+  setEditorRef = (editorRef: EditorRefApi | null) => {\n+    console.log(\"store editorRef\", editorRef);\n+    runInAction(() => {\n+      this.editorRef = editorRef;\n+    });\n+  };\n }\n"
        },
        {
          "path": "web/core/store/pages/project-page.store.ts",
          "status": "modified",
          "diff": "Index: web/core/store/pages/project-page.store.ts\n===================================================================\n--- web/core/store/pages/project-page.store.ts\t8166a75 (parent)\n+++ web/core/store/pages/project-page.store.ts\teac1115 (commit)\n@@ -205,9 +205,21 @@\n       });\n \n       const pages = await this.service.fetchAll(workspaceSlug, projectId);\n       runInAction(() => {\n-        for (const page of pages) if (page?.id) set(this.data, [page.id], new ProjectPage(this.store, page));\n+        for (const page of pages) {\n+          if (page?.id) {\n+            const existingPage = this.getPageById(page.id);\n+            if (existingPage) {\n+              // If page already exists, update all fields except name\n+              const { name, ...otherFields } = page;\n+              existingPage.mutateProperties(otherFields, false);\n+            } else {\n+              // If new page, create a new instance with all data\n+              set(this.data, [page.id], new ProjectPage(this.store, page));\n+            }\n+          }\n+        }\n         this.loader = undefined;\n       });\n \n       return pages;\n@@ -237,10 +249,18 @@\n         this.error = undefined;\n       });\n \n       const page = await this.service.fetchById(workspaceSlug, projectId, pageId);\n+      const pageInstance = page?.id ? this.getPageById(page.id) : undefined;\n+\n       runInAction(() => {\n-        if (page?.id) set(this.data, [page.id], new ProjectPage(this.store, page));\n+        if (page?.id) {\n+          if (pageInstance) {\n+            pageInstance.mutateProperties(page, false);\n+          } else {\n+            set(this.data, [page.id], new ProjectPage(this.store, page));\n+          }\n+        }\n         this.loader = undefined;\n       });\n \n       return page;\n"
        },
        {
          "path": "web/styles/globals.css",
          "status": "modified",
          "diff": "Index: web/styles/globals.css\n===================================================================\n--- web/styles/globals.css\t8166a75 (parent)\n+++ web/styles/globals.css\teac1115 (commit)\n@@ -853,4 +853,92 @@\n \n .epr-search-container > .epr-icn-search {\n   color: rgb(var(--color-text-400)) !important;\n }\n+\n+/* Lock icon animations */\n+@keyframes textSlideIn {\n+  0% {\n+    opacity: 0;\n+    transform: translateX(-8px);\n+    max-width: 0px;\n+  }\n+  40% {\n+    opacity: 0.7;\n+    max-width: 60px;\n+  }\n+  100% {\n+    opacity: 1;\n+    transform: translateX(0);\n+    max-width: 60px;\n+  }\n+}\n+\n+@keyframes textFadeOut {\n+  0% {\n+    opacity: 1;\n+    transform: translateX(0);\n+  }\n+  100% {\n+    opacity: 0;\n+    transform: translateX(8px);\n+  }\n+}\n+\n+@keyframes lockIconAnimation {\n+  0% {\n+    transform: rotate(-5deg) scale(1);\n+  }\n+  25% {\n+    transform: rotate(0deg) scale(1.15);\n+  }\n+  50% {\n+    transform: rotate(5deg) scale(1.08);\n+  }\n+  100% {\n+    transform: rotate(0deg) scale(1);\n+  }\n+}\n+\n+@keyframes unlockIconAnimation {\n+  0% {\n+    transform: rotate(0deg) scale(1);\n+  }\n+  40% {\n+    transform: rotate(-8deg) scale(1.15);\n+  }\n+  80% {\n+    transform: rotate(3deg) scale(1.05);\n+  }\n+  100% {\n+    transform: rotate(0deg) scale(1);\n+  }\n+}\n+\n+@keyframes fadeOut {\n+  0% {\n+    opacity: 1;\n+  }\n+  100% {\n+    opacity: 0;\n+  }\n+}\n+\n+.animate-text-slide-in {\n+  animation: textSlideIn 400ms ease-out forwards;\n+}\n+\n+.animate-text-fade-out {\n+  animation: textFadeOut 600ms ease-in 300ms forwards;\n+}\n+\n+.animate-lock-icon {\n+  animation: lockIconAnimation 600ms ease-out forwards;\n+}\n+\n+.animate-unlock-icon {\n+  animation: unlockIconAnimation 600ms ease-out forwards;\n+}\n+\n+.animate-fade-out {\n+  animation: fadeOut 500ms ease-in 100ms forwards;\n+}\n"
        }
      ]
    },
    {
      "id": "refactor-table-ui",
      "sha": "1fcffad7dd608c4ddd9ccdef63b4ffcd1234dc23",
      "parentSha": "0b159c4963932215adf5fcacf874841db8fe9d40",
      "spec": "Implement a table UI and behavior refactor in the editor that includes a selection outline, default column widths, and drag-handle/side-menu adjustments, with tables rendering as full-width blocks.\n\nRequirements:\n1) Table selection outline plugin\n- Create a ProseMirror plugin that decorates selected table cells with classnames indicating which edges need borders.\n- Only active when the editor is editable and the current selection is a CellSelection.\n- For each selected cell, compute adjacent selected cells using the TableMap and add classes for missing borders: selectedCell-border-top/left/bottom/right.\n- Return a DecorationSet from the plugin and expose it via props.decorations.\n- Integrate this plugin into the table cell extension via addProseMirrorPlugins so that table cells receive the correct classes during multi-cell selection.\n- Place the plugin under packages/editor/src/core/extensions/table/plugins/table-selection-outline/ with plugin.ts and utils.ts, where utils exposes getCellBorderClasses and uses an internal getAdjacentCellPositions.\n\n2) Default column width\n- Introduce a DEFAULT_COLUMN_WIDTH export (150) in packages/editor/src/core/extensions/table/table/index.ts.\n- Use DEFAULT_COLUMN_WIDTH as the default colwidth attribute value for TableCell and TableHeader nodes (set default to [DEFAULT_COLUMN_WIDTH]).\n- Update table creation logic to accept and apply the default column width value: adjust createTable to accept a props object instead of positional args and pass columnWidth when constructing cells.\n- Update insertTable command to remove the columnWidth argument from the signature, and internally pass DEFAULT_COLUMN_WIDTH to createTable.\n- Update all callsites that passed columnWidth (e.g., editor-commands) to call insertTable without columnWidth.\n\n3) Drag handle and side menu behavior for tables\n- Change selectors and hit testing to target the table element instead of the .table-wrapper when positioning drag handles and side menu.\n- Specifically update the drag handle plugin and side-menu logic so that table hit detection and positioning use the table element (e.g., node.matches(\"table\") and elem.closest(\"table\")).\n- Ensure drag-handle offsets for tables (rect adjustments) align with the new selector.\n\n4) Full-width table block styling and content width behavior\n- Modify table-view NodeView root wrapper class to include an editor-full-width-block class so the table spans the full content width, while standard blocks retain centered width.\n- In variables.css, scope ProseMirrors max-width/margins only to direct children not marked with .editor-full-width-block. Children with .editor-full-width-block must have max-width: 100%, left padding equal to the side gutter ((100% - editor-content-width)/2), and right padding equal to var(--wide-content-margin).\n\n5) Table CSS updates\n- Move table styles under .table-wrapper scoping using nested selectors to keep table, td, th rules intact but allow full-width behavior.\n- Adjust borders to use border-300 for td/th and add visual behavior for ProseMirror-selectednode on table wrapper (background overlay).\n- Add CSS for selected cell outline using the classes set by the selection outline plugin. The pseudo-element ::after should draw 2px borders only on the necessary sides.\n- Adjust column-resize-handle position to align with the outer border and account for 2px height and negative offsets.\n\n6) Editor commands\n- Update insertTableCommand in packages/editor/src/core/helpers/editor-commands.ts to no longer pass columnWidth to insertTable.\n- Preserve behavior that prevents inserting tables inside existing tables and that replaces selected ranges when applicable.\n\n7) Ensure no regressions:\n- Table creation should produce cells with default colwidth set to DEFAULT_COLUMN_WIDTH in both header and body cells.\n- Drag handle and side menu should align correctly against table edges with updated offsets.\n- Multi-cell selection should show clear outer borders without double borders between adjacent selected cells.\n\nFiles to change:\n- packages/editor/src/core/extensions/table/table/table.ts: Update Table node options, insertTable command signature and implementation to use DEFAULT_COLUMN_WIDTH and new createTable signature.\n- packages/editor/src/core/extensions/table/table/utilities/create-table.ts: Refactor to accept a props object including columnWidth.\n- packages/editor/src/core/extensions/table/table/table-view.tsx: Add editor-full-width-block to the wrapper element.\n- packages/editor/src/core/extensions/table/table/index.ts: Export DEFAULT_COLUMN_WIDTH constant.\n- packages/editor/src/core/extensions/table/table-cell.ts: Register TableCellSelectionOutlinePlugin via addProseMirrorPlugins and set colwidth default to [DEFAULT_COLUMN_WIDTH].\n- packages/editor/src/core/extensions/table/table-header.ts: Set colwidth default to [DEFAULT_COLUMN_WIDTH].\n- packages/editor/src/core/extensions/table/plugins/table-selection-outline/plugin.ts: Implement the selection outline plugin as described.\n- packages/editor/src/core/extensions/table/plugins/table-selection-outline/utils.ts: Implement getCellBorderClasses and adjacency logic.\n- packages/editor/src/core/plugins/drag-handle.ts: Target table element instead of .table-wrapper in selectors and hit-testing logic.\n- packages/editor/src/core/extensions/side-menu.ts: Target table element instead of .table-wrapper for side menu positioning and tweak rect offsets.\n- packages/editor/src/core/helpers/editor-commands.ts: Remove columnWidth from insertTable calls.\n- packages/editor/src/styles/table.css: Update table styling, borders, selected cell outline, column resize handle, and control styles to reflect the new structure.\n- packages/editor/src/styles/drag-drop.css: Ensure .table-wrapper is excluded from default node selection styling and inherits correct grab overlay behavior.\n- packages/editor/src/styles/variables.css: Implement editor-full-width-block behavior for ProseMirror children.\n",
      "prompt": "Refactor the editors table feature to provide a full-width table experience with improved selection visuals and consistent default column widths. Add a selection outline that renders borders only at the outer edges of a multi-cell selection, make tables render as full-width blocks while keeping other content centered, and update drag/side-menu interactions to target the table element directly rather than a wrapper. Also, ensure new tables default to a consistent column width and that commands creating tables dont accept or require a width argument. Update related CSS to align borders, resize handles, and background highlights with the new behavior.",
      "supplementalFiles": [
        "packages/editor/src/core/extensions/table/index.ts",
        "packages/editor/src/core/extensions/table/table/utilities/get-table-node-types.ts",
        "packages/editor/src/core/extensions/table/table/utilities/create-cell.ts",
        "packages/editor/src/core/extensions/table/table/table-controls.ts"
      ],
      "fileDiffs": [
        {
          "path": "packages/editor/src/core/extensions/side-menu.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/side-menu.ts\n===================================================================\n--- packages/editor/src/core/extensions/side-menu.ts\t0b159c4 (parent)\n+++ packages/editor/src/core/extensions/side-menu.ts\t1fcffad (commit)\n@@ -130,9 +130,9 @@\n               rect.left -= 18;\n             }\n           }\n \n-          if (node.matches(\".table-wrapper\")) {\n+          if (node.matches(\"table\")) {\n             rect.top += 8;\n             rect.left -= 8;\n           }\n \n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/plugins/table-selection-outline/plugin.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/table/plugins/table-selection-outline/plugin.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/plugins/table-selection-outline/plugin.ts\t0b159c4 (parent)\n+++ packages/editor/src/core/extensions/table/plugins/table-selection-outline/plugin.ts\t1fcffad (commit)\n@@ -1,1 +1,58 @@\n-[NEW FILE]\n\\ No newline at end of file\n+import { findParentNode, type Editor } from \"@tiptap/core\";\n+import { Plugin, PluginKey } from \"@tiptap/pm/state\";\n+import { CellSelection, TableMap } from \"@tiptap/pm/tables\";\n+import { Decoration, DecorationSet } from \"@tiptap/pm/view\";\n+// local imports\n+import { getCellBorderClasses } from \"./utils\";\n+\n+type TableCellSelectionOutlinePluginState = {\n+  decorations?: DecorationSet;\n+};\n+\n+const TABLE_SELECTION_OUTLINE_PLUGIN_KEY = new PluginKey(\"table-cell-selection-outline\");\n+\n+export const TableCellSelectionOutlinePlugin = (editor: Editor): Plugin<TableCellSelectionOutlinePluginState> =>\n+  new Plugin<TableCellSelectionOutlinePluginState>({\n+    key: TABLE_SELECTION_OUTLINE_PLUGIN_KEY,\n+    state: {\n+      init: () => ({}),\n+      apply(tr, prev, oldState, newState) {\n+        if (!editor.isEditable) return {};\n+        const table = findParentNode((node) => node.type.spec.tableRole === \"table\")(newState.selection);\n+        const hasDocChanged = tr.docChanged || !newState.selection.eq(oldState.selection);\n+        if (!table || !hasDocChanged) {\n+          return table === undefined ? {} : prev;\n+        }\n+\n+        const { selection } = newState;\n+        if (!(selection instanceof CellSelection)) return {};\n+\n+        const decorations: Decoration[] = [];\n+        const tableMap = TableMap.get(table.node);\n+        const selectedCells: number[] = [];\n+\n+        // First, collect all selected cell positions\n+        selection.forEachCell((_node, pos) => {\n+          const start = pos - table.pos - 1;\n+          selectedCells.push(start);\n+        });\n+\n+        // Then, add decorations with appropriate border classes\n+        selection.forEachCell((node, pos) => {\n+          const start = pos - table.pos - 1;\n+          const classes = getCellBorderClasses(start, selectedCells, tableMap);\n+\n+          decorations.push(Decoration.node(pos, pos + node.nodeSize, { class: classes.join(\" \") }));\n+        });\n+\n+        return {\n+          decorations: DecorationSet.create(newState.doc, decorations),\n+        };\n+      },\n+    },\n+    props: {\n+      decorations(state) {\n+        return TABLE_SELECTION_OUTLINE_PLUGIN_KEY.getState(state).decorations;\n+      },\n+    },\n+  });\n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/plugins/table-selection-outline/utils.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/extensions/table/plugins/table-selection-outline/utils.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/plugins/table-selection-outline/utils.ts\t0b159c4 (parent)\n+++ packages/editor/src/core/extensions/table/plugins/table-selection-outline/utils.ts\t1fcffad (commit)\n@@ -1,1 +1,75 @@\n-[NEW FILE]\n\\ No newline at end of file\n+import type { TableMap } from \"@tiptap/pm/tables\";\n+\n+/**\n+ * Calculates the positions of cells adjacent to a given cell in a table\n+ * @param cellStart - The start position of the current cell in the document\n+ * @param tableMap - ProseMirror's table mapping structure containing cell positions and dimensions\n+ * @returns Object with positions of adjacent cells (undefined if cell doesn't exist at table edge)\n+ */\n+const getAdjacentCellPositions = (\n+  cellStart: number,\n+  tableMap: TableMap\n+): { top?: number; bottom?: number; left?: number; right?: number } => {\n+  // Extract table dimensions\n+  // width -> number of columns in the table\n+  // height -> number of rows in the table\n+  const { width, height } = tableMap;\n+\n+  // Find the index of our cell in the flat tableMap.map array\n+  // tableMap.map contains start positions of all cells in row-by-row order\n+  const cellIndex = tableMap.map.indexOf(cellStart);\n+\n+  // Safety check: if cell position not found in table map, return empty object\n+  if (cellIndex === -1) return {};\n+\n+  // Convert flat array index to 2D grid coordinates\n+  // row = which row the cell is in (0-based from top)\n+  // col = which column the cell is in (0-based from left)\n+  const row = Math.floor(cellIndex / width); // Integer division gives row number\n+  const col = cellIndex % width; // Remainder gives column number\n+\n+  return {\n+    // Top cell: same column, one row up\n+    // Check if we're not in the first row (row > 0) before calculating\n+    top: row > 0 ? tableMap.map[(row - 1) * width + col] : undefined,\n+\n+    // Bottom cell: same column, one row down\n+    // Check if we're not in the last row (row < height - 1) before calculating\n+    bottom: row < height - 1 ? tableMap.map[(row + 1) * width + col] : undefined,\n+\n+    // Left cell: same row, one column left\n+    // Check if we're not in the first column (col > 0) before calculating\n+    left: col > 0 ? tableMap.map[row * width + (col - 1)] : undefined,\n+\n+    // Right cell: same row, one column right\n+    // Check if we're not in the last column (col < width - 1) before calculating\n+    right: col < width - 1 ? tableMap.map[row * width + (col + 1)] : undefined,\n+  };\n+};\n+\n+export const getCellBorderClasses = (cellStart: number, selectedCells: number[], tableMap: TableMap): string[] => {\n+  const adjacent = getAdjacentCellPositions(cellStart, tableMap);\n+  const classes: string[] = [];\n+\n+  // Add border-right if right cell is not selected or doesn't exist\n+  if (adjacent.right === undefined || !selectedCells.includes(adjacent.right)) {\n+    classes.push(\"selectedCell-border-right\");\n+  }\n+\n+  // Add border-left if left cell is not selected or doesn't exist\n+  if (adjacent.left === undefined || !selectedCells.includes(adjacent.left)) {\n+    classes.push(\"selectedCell-border-left\");\n+  }\n+\n+  // Add border-top if top cell is not selected or doesn't exist\n+  if (adjacent.top === undefined || !selectedCells.includes(adjacent.top)) {\n+    classes.push(\"selectedCell-border-top\");\n+  }\n+\n+  // Add border-bottom if bottom cell is not selected or doesn't exist\n+  if (adjacent.bottom === undefined || !selectedCells.includes(adjacent.bottom)) {\n+    classes.push(\"selectedCell-border-bottom\");\n+  }\n+\n+  return classes;\n+};\n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/table-cell.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/table/table-cell.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/table-cell.ts\t0b159c4 (parent)\n+++ packages/editor/src/core/extensions/table/table-cell.ts\t1fcffad (commit)\n@@ -1,7 +1,11 @@\n import { mergeAttributes, Node } from \"@tiptap/core\";\n // constants\n import { CORE_EXTENSIONS } from \"@/constants/extension\";\n+// local imports\n+import { TableCellSelectionOutlinePlugin } from \"./plugins/table-selection-outline/plugin\";\n+import { DEFAULT_COLUMN_WIDTH } from \"./table\";\n+\n export interface TableCellOptions {\n   HTMLAttributes: Record<string, any>;\n }\n \n@@ -24,9 +28,9 @@\n       rowspan: {\n         default: 1,\n       },\n       colwidth: {\n-        default: null,\n+        default: [DEFAULT_COLUMN_WIDTH],\n         parseHTML: (element) => {\n           const colwidth = element.getAttribute(\"colwidth\");\n           const value = colwidth ? [parseInt(colwidth, 10)] : null;\n \n@@ -45,8 +49,12 @@\n   tableRole: \"cell\",\n \n   isolating: true,\n \n+  addProseMirrorPlugins() {\n+    return [TableCellSelectionOutlinePlugin(this.editor)];\n+  },\n+\n   parseHTML() {\n     return [{ tag: \"td\" }];\n   },\n \n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/table-header.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/table/table-header.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/table-header.ts\t0b159c4 (parent)\n+++ packages/editor/src/core/extensions/table/table-header.ts\t1fcffad (commit)\n@@ -1,7 +1,10 @@\n import { mergeAttributes, Node } from \"@tiptap/core\";\n // constants\n import { CORE_EXTENSIONS } from \"@/constants/extension\";\n+// local imports\n+import { DEFAULT_COLUMN_WIDTH } from \"./table\";\n+\n export interface TableHeaderOptions {\n   HTMLAttributes: Record<string, any>;\n }\n \n@@ -24,9 +27,9 @@\n       rowspan: {\n         default: 1,\n       },\n       colwidth: {\n-        default: null,\n+        default: [DEFAULT_COLUMN_WIDTH],\n         parseHTML: (element) => {\n           const colwidth = element.getAttribute(\"colwidth\");\n           const value = colwidth ? [parseInt(colwidth, 10)] : null;\n \n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/table/index.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/table/table/index.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/table/index.ts\t0b159c4 (parent)\n+++ packages/editor/src/core/extensions/table/table/index.ts\t1fcffad (commit)\n@@ -1,1 +1,3 @@\n export { Table } from \"./table\";\n+\n+export const DEFAULT_COLUMN_WIDTH = 150;\n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/table/table-view.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/table/table/table-view.tsx\n===================================================================\n--- packages/editor/src/core/extensions/table/table/table-view.tsx\t0b159c4 (parent)\n+++ packages/editor/src/core/extensions/table/table/table-view.tsx\t1fcffad (commit)\n@@ -386,9 +386,9 @@\n \n     this.root = h(\n       \"div\",\n       {\n-        className: \"table-wrapper horizontal-scrollbar scrollbar-md controls--disabled\",\n+        className: \"table-wrapper editor-full-width-block horizontal-scrollbar scrollbar-sm controls--disabled\",\n       },\n       this.controls,\n       this.table\n     );\n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/table/table.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/table/table/table.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/table/table.ts\t0b159c4 (parent)\n+++ packages/editor/src/core/extensions/table/table/table.ts\t1fcffad (commit)\n@@ -28,8 +28,9 @@\n import { createTable } from \"./utilities/create-table\";\n import { deleteTableWhenAllCellsSelected } from \"./utilities/delete-table-when-all-cells-selected\";\n import { insertLineAboveTableAction } from \"./utilities/insert-line-above-table-action\";\n import { insertLineBelowTableAction } from \"./utilities/insert-line-below-table-action\";\n+import { DEFAULT_COLUMN_WIDTH } from \".\";\n \n export interface TableOptions {\n   HTMLAttributes: Record<string, any>;\n   resizable: boolean;\n@@ -41,14 +42,9 @@\n \n declare module \"@tiptap/core\" {\n   interface Commands<ReturnType> {\n     [CORE_EXTENSIONS.TABLE]: {\n-      insertTable: (options?: {\n-        rows?: number;\n-        cols?: number;\n-        withHeaderRow?: boolean;\n-        columnWidth?: number;\n-      }) => ReturnType;\n+      insertTable: (options?: { rows?: number; cols?: number; withHeaderRow?: boolean }) => ReturnType;\n       addColumnBefore: () => ReturnType;\n       addColumnAfter: () => ReturnType;\n       deleteColumn: () => ReturnType;\n       addRowBefore: () => ReturnType;\n@@ -80,9 +76,9 @@\n         }) => string);\n   }\n }\n \n-export const Table = Node.create({\n+export const Table = Node.create<TableOptions>({\n   name: CORE_EXTENSIONS.TABLE,\n \n   addOptions() {\n     return {\n@@ -115,11 +111,17 @@\n \n   addCommands() {\n     return {\n       insertTable:\n-        ({ rows = 3, cols = 3, withHeaderRow = false, columnWidth = 150 } = {}) =>\n+        ({ rows = 3, cols = 3, withHeaderRow = false } = {}) =>\n         ({ tr, dispatch, editor }) => {\n-          const node = createTable(editor.schema, rows, cols, withHeaderRow, undefined, columnWidth);\n+          const node = createTable({\n+            schema: editor.schema,\n+            rowsCount: rows,\n+            colsCount: cols,\n+            withHeaderRow,\n+            columnWidth: DEFAULT_COLUMN_WIDTH,\n+          });\n           if (dispatch) {\n             const offset = tr.selection.anchor + 1;\n \n             tr.replaceSelectionWith(node)\n"
        },
        {
          "path": "packages/editor/src/core/extensions/table/table/utilities/create-table.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/table/table/utilities/create-table.ts\n===================================================================\n--- packages/editor/src/core/extensions/table/table/utilities/create-table.ts\t0b159c4 (parent)\n+++ packages/editor/src/core/extensions/table/table/utilities/create-table.ts\t1fcffad (commit)\n@@ -2,16 +2,20 @@\n // extensions\n import { createCell } from \"@/extensions/table/table/utilities/create-cell\";\n import { getTableNodeTypes } from \"@/extensions/table/table/utilities/get-table-node-types\";\n \n-export function createTable(\n-  schema: Schema,\n-  rowsCount: number,\n-  colsCount: number,\n-  withHeaderRow: boolean,\n-  cellContent?: Fragment | ProsemirrorNode | Array<ProsemirrorNode>,\n-  columnWidth: number = 100\n-): ProsemirrorNode {\n+type Props = {\n+  schema: Schema;\n+  rowsCount: number;\n+  colsCount: number;\n+  withHeaderRow: boolean;\n+  cellContent?: Fragment | ProsemirrorNode | Array<ProsemirrorNode>;\n+  columnWidth: number;\n+};\n+\n+export const createTable = (props: Props): ProsemirrorNode => {\n+  const { schema, rowsCount, colsCount, withHeaderRow, cellContent, columnWidth } = props;\n+\n   const types = getTableNodeTypes(schema);\n   const headerCells: ProsemirrorNode[] = [];\n   const cells: ProsemirrorNode[] = [];\n \n@@ -37,5 +41,5 @@\n     rows.push(types.row.createChecked(null, withHeaderRow && index === 0 ? headerCells : cells));\n   }\n \n   return types.table.createChecked(null, rows);\n-}\n+};\n"
        },
        {
          "path": "packages/editor/src/core/helpers/editor-commands.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/helpers/editor-commands.ts\n===================================================================\n--- packages/editor/src/core/helpers/editor-commands.ts\t0b159c4 (parent)\n+++ packages/editor/src/core/helpers/editor-commands.ts\t1fcffad (commit)\n@@ -108,11 +108,10 @@\n         }\n       }\n     }\n   }\n-  if (range)\n-    editor.chain().focus().deleteRange(range).clearNodes().insertTable({ rows: 3, cols: 3, columnWidth: 150 }).run();\n-  else editor.chain().focus().clearNodes().insertTable({ rows: 3, cols: 3, columnWidth: 150 }).run();\n+  if (range) editor.chain().focus().deleteRange(range).clearNodes().insertTable({ rows: 3, cols: 3 }).run();\n+  else editor.chain().focus().clearNodes().insertTable({ rows: 3, cols: 3 }).run();\n };\n \n export const insertImage = ({\n   editor,\n"
        },
        {
          "path": "packages/editor/src/core/plugins/drag-handle.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/plugins/drag-handle.ts\n===================================================================\n--- packages/editor/src/core/plugins/drag-handle.ts\t0b159c4 (parent)\n+++ packages/editor/src/core/plugins/drag-handle.ts\t1fcffad (commit)\n@@ -15,9 +15,9 @@\n   \".code-block\",\n   \"blockquote\",\n   \"h1.editor-heading-block, h2.editor-heading-block, h3.editor-heading-block, h4.editor-heading-block, h5.editor-heading-block, h6.editor-heading-block\",\n   \"[data-type=horizontalRule]\",\n-  \".table-wrapper\",\n+  \"table\",\n   \".issue-embed\",\n   \".image-component\",\n   \".image-upload-component\",\n   \".editor-callout-component\",\n@@ -89,18 +89,18 @@\n   const elements = document.elementsFromPoint(coords.x, coords.y);\n \n   for (const elem of elements) {\n     // Check for table wrapper first\n-    if (elem.matches(\".table-wrapper\")) {\n+    if (elem.matches(\"table\")) {\n       return elem;\n     }\n \n     if (elem.matches(\"p:first-child\") && elem.parentElement?.matches(\".ProseMirror\")) {\n       return elem;\n     }\n \n     // Skip table cells\n-    if (elem.closest(\".table-wrapper\")) {\n+    if (elem.closest(\"table\")) {\n       continue;\n     }\n \n     // apply general selector\n"
        },
        {
          "path": "packages/editor/src/styles/drag-drop.css",
          "status": "modified",
          "diff": "Index: packages/editor/src/styles/drag-drop.css\n===================================================================\n--- packages/editor/src/styles/drag-drop.css\t0b159c4 (parent)\n+++ packages/editor/src/styles/drag-drop.css\t1fcffad (commit)\n@@ -34,9 +34,9 @@\n   }\n }\n /* end ai handle */\n \n-.ProseMirror:not(.dragging) .ProseMirror-selectednode:not(.node-imageComponent):not(.node-image) {\n+.ProseMirror:not(.dragging) .ProseMirror-selectednode:not(.node-imageComponent):not(.node-image):not(.table-wrapper) {\n   position: relative;\n   cursor: grab;\n   outline: none !important;\n   box-shadow: none;\n@@ -60,9 +60,10 @@\n     pointer-events: none;\n   }\n \n   &.node-imageComponent,\n-  &.node-image {\n+  &.node-image,\n+  &.table-wrapper {\n     --horizontal-offset: 0px;\n \n     &::after {\n       background-color: rgba(var(--color-background-100), 0.2);\n"
        },
        {
          "path": "packages/editor/src/styles/table.css",
          "status": "modified",
          "diff": "Index: packages/editor/src/styles/table.css\n===================================================================\n--- packages/editor/src/styles/table.css\t0b159c4 (parent)\n+++ packages/editor/src/styles/table.css\t1fcffad (commit)\n@@ -1,116 +1,143 @@\n .table-wrapper {\n   overflow-x: auto;\n-  width: fit-content;\n-  max-width: 100%;\n-}\n \n-.table-wrapper table {\n-  border-collapse: collapse;\n-  table-layout: fixed;\n-  margin: 0.5rem 0 1rem 0;\n-  border: 1px solid rgba(var(--color-border-200));\n-  width: 100%;\n-}\n+  table {\n+    border-collapse: collapse;\n+    table-layout: fixed;\n+    margin: 0.5rem 0 1rem 0;\n+    border: 1px solid rgba(var(--color-border-200));\n+    width: 100%;\n \n-.table-wrapper table td,\n-.table-wrapper table th {\n-  min-width: 1em;\n-  border: 1px solid rgba(var(--color-border-200));\n-  padding: 7px 10px;\n-  vertical-align: top;\n-  box-sizing: border-box;\n-  position: relative;\n-  transition: background-color 0.3s ease;\n+    td,\n+    th {\n+      min-width: 1em;\n+      border: 1px solid rgba(var(--color-border-300));\n+      padding: 7px 10px;\n+      vertical-align: top;\n+      box-sizing: border-box;\n+      position: relative;\n+      transition: background-color 0.3s ease;\n \n-  > * {\n-    margin-bottom: 0;\n-  }\n-}\n+      > * {\n+        margin-bottom: 0;\n+      }\n \n-.table-wrapper table {\n-  th {\n-    font-weight: 500;\n-    text-align: left;\n-  }\n+      &.selectedCell {\n+        user-select: none;\n \n-  tr[background=\"none\"],\n-  tr:not([background]) {\n+        &::after {\n+          position: absolute;\n+          content: \"\";\n+          top: -1px;\n+          left: -1px;\n+          height: calc(100% + 2px);\n+          width: calc(100% + 2px);\n+        }\n+\n+        &.selectedCell-border-top::after {\n+          border-top: 2px solid rgba(var(--color-primary-100));\n+        }\n+\n+        &.selectedCell-border-left::after {\n+          border-left: 2px solid rgba(var(--color-primary-100));\n+        }\n+\n+        &.selectedCell-border-bottom::after {\n+          border-bottom: 2px solid rgba(var(--color-primary-100));\n+        }\n+\n+        &.selectedCell-border-right::after {\n+          border-right: 2px solid rgba(var(--color-primary-100));\n+        }\n+      }\n+    }\n+\n     th {\n-      background-color: rgba(var(--color-background-90));\n+      font-weight: 500;\n+      text-align: left;\n     }\n+\n+    tr[background=\"none\"],\n+    tr:not([background]) {\n+      th {\n+        background-color: rgba(var(--color-background-90));\n+      }\n+    }\n   }\n-}\n \n-.table-wrapper table .selectedCell {\n-  outline: 0.5px solid rgba(var(--color-primary-100));\n+  &.ProseMirror-selectednode {\n+    table {\n+      background-color: rgba(var(--color-primary-100), 0.2);\n+    }\n+  }\n }\n \n /* table dropdown */\n .table-wrapper table .column-resize-handle {\n   position: absolute;\n-  right: 0;\n-  top: 0;\n+  right: -1px;\n+  top: -1px;\n   width: 2px;\n-  height: 100%;\n+  height: calc(100% + 2px);\n   z-index: 5;\n   background-color: rgba(var(--color-primary-100));\n   pointer-events: none;\n }\n \n .table-wrapper .table-controls {\n   position: absolute;\n-}\n \n-.table-wrapper .table-controls .columns-control,\n-.table-wrapper .table-controls .rows-control {\n-  transition: opacity ease-in 100ms;\n-  position: absolute;\n-  z-index: 5;\n-  display: flex;\n-  justify-content: center;\n-  align-items: center;\n-}\n+  .columns-control,\n+  .rows-control {\n+    transition: opacity ease-in 100ms;\n+    position: absolute;\n+    z-index: 5;\n+    display: flex;\n+    justify-content: center;\n+    align-items: center;\n+  }\n \n-.table-wrapper .table-controls .columns-control {\n-  height: 20px;\n-  transform: translateY(-50%);\n-}\n+  .columns-control {\n+    height: 20px;\n+    transform: translateY(-50%);\n \n-.table-wrapper .table-controls .columns-control .columns-control-div {\n-  color: white;\n-  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath fill='%238F95B2' d='M4.5 10.5c-.825 0-1.5.675-1.5 1.5s.675 1.5 1.5 1.5S6 12.825 6 12s-.675-1.5-1.5-1.5zm15 0c-.825 0-1.5.675-1.5 1.5s.675 1.5 1.5 1.5S21 12.825 21 12s-.675-1.5-1.5-1.5zm-7.5 0c-.825 0-1.5.675-1.5 1.5s.675 1.5 1.5 1.5 1.5-.675 1.5-1.5-.675-1.5-1.5-1.5z'/%3E%3C/svg%3E\");\n-  width: 30px;\n-  height: 15px;\n-}\n+    .columns-control-div {\n+      color: white;\n+      background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath fill='%238F95B2' d='M4.5 10.5c-.825 0-1.5.675-1.5 1.5s.675 1.5 1.5 1.5S6 12.825 6 12s-.675-1.5-1.5-1.5zm15 0c-.825 0-1.5.675-1.5 1.5s.675 1.5 1.5 1.5S21 12.825 21 12s-.675-1.5-1.5-1.5zm-7.5 0c-.825 0-1.5.675-1.5 1.5s.675 1.5 1.5 1.5 1.5-.675 1.5-1.5-.675-1.5-1.5-1.5z'/%3E%3C/svg%3E\");\n+      width: 30px;\n+      height: 15px;\n+    }\n+  }\n \n-.table-wrapper .table-controls .rows-control {\n-  width: 20px;\n-  transform: translateX(-50%);\n-  left: -8px;\n-}\n+  .rows-control {\n+    width: 20px;\n+    transform: translateX(-50%);\n+    left: -8px;\n \n-.table-wrapper .table-controls .rows-control .rows-control-div {\n-  color: white;\n-  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath fill='%238F95B2' d='M12 3c-.825 0-1.5.675-1.5 1.5S11.175 6 12 6s1.5-.675 1.5-1.5S12.825 3 12 3zm0 15c-.825 0-1.5.675-1.5 1.5S11.175 21 12 21s1.5-.675 1.5-1.5S12.825 18 12 18zm0-7.5c-.825 0-1.5.675-1.5 1.5s.675 1.5 1.5 1.5 1.5-.675 1.5-1.5-.675-1.5-1.5-1.5z'/%3E%3C/svg%3E\");\n-  height: 30px;\n-  width: 15px;\n-}\n+    .rows-control-div {\n+      color: white;\n+      background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath fill='%238F95B2' d='M12 3c-.825 0-1.5.675-1.5 1.5S11.175 6 12 6s1.5-.675 1.5-1.5S12.825 3 12 3zm0 15c-.825 0-1.5.675-1.5 1.5S11.175 21 12 21s1.5-.675 1.5-1.5S12.825 18 12 18zm0-7.5c-.825 0-1.5.675-1.5 1.5s.675 1.5 1.5 1.5 1.5-.675 1.5-1.5-.675-1.5-1.5-1.5z'/%3E%3C/svg%3E\");\n+      height: 30px;\n+      width: 15px;\n+    }\n+  }\n \n-.table-wrapper .table-controls .rows-control-div,\n-.table-wrapper .table-controls .columns-control-div {\n-  background-color: rgba(var(--color-background-80));\n-  border: 0.5px solid rgba(var(--color-border-200));\n-  border-radius: 4px;\n-  background-size: 1.25rem;\n-  background-repeat: no-repeat;\n-  background-position: center;\n-  transition:\n-    transform ease-out 100ms,\n-    background-color ease-out 100ms;\n-  outline: none;\n-  box-shadow: rgba(var(--color-shadow-2xs));\n-  cursor: pointer;\n+  .columns-control-div,\n+  .rows-control-div {\n+    background-color: rgba(var(--color-background-80));\n+    border: 0.5px solid rgba(var(--color-border-200));\n+    border-radius: 4px;\n+    background-size: 1.25rem;\n+    background-repeat: no-repeat;\n+    background-position: center;\n+    transition:\n+      transform ease-out 100ms,\n+      background-color ease-out 100ms;\n+    outline: none;\n+    box-shadow: rgba(var(--color-shadow-2xs));\n+    cursor: pointer;\n+  }\n }\n \n .resize-cursor .table-wrapper .table-controls .rows-control,\n .table-wrapper.controls--disabled .table-controls .rows-control,\n"
        },
        {
          "path": "packages/editor/src/styles/variables.css",
          "status": "modified",
          "diff": "Index: packages/editor/src/styles/variables.css\n===================================================================\n--- packages/editor/src/styles/variables.css\t0b159c4 (parent)\n+++ packages/editor/src/styles/variables.css\t1fcffad (commit)\n@@ -178,11 +178,20 @@\n     --editor-content-width: var(--wide-content-width);\n   }\n \n   .ProseMirror {\n-    max-width: var(--editor-content-width);\n-    margin: 0 auto;\n-    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n+    & > *:not(.editor-full-width-block) {\n+      max-width: var(--editor-content-width);\n+      margin-left: auto !important;\n+      margin-right: auto !important;\n+      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n+    }\n+\n+    & > .editor-full-width-block {\n+      max-width: 100%;\n+      padding-inline-start: calc((100% - var(--editor-content-width)) / 2);\n+      padding-inline-end: var(--wide-content-margin);\n+    }\n   }\n }\n \n /* keep a static padding of 96px for wide layouts for container width >912px and <1344px */\n"
        }
      ]
    },
    {
      "id": "unify-rich-editor",
      "sha": "6f27ec031d3ce481d1587ab0fd35ff5caeeb48c7",
      "parentSha": "7d141f26ad4b15f67477a8b3e437d46fb45117bb",
      "spec": "Implement a single unified rich text editor component and remove the separate read-only variant throughout the codebase.\n\nWhat to change:\n1) Consolidate editor exports\n- In apps/space/core/components/editor/index.ts, ensure exports include rich-text-editor and remove rich-text-read-only-editor.\n- In apps/web/core/components/editor/rich-text-editor/index.ts, export only rich-text-editor and remove export of rich-text-read-only-editor.\n- In packages/editor/src/core/components/editors/rich-text/index.ts, export only the editable rich-text editor entry; remove the read-only export.\n- In packages/editor/src/index.ts, remove RichTextReadOnlyEditorWithRef from exports.\n\n2) Remove RichTextReadOnlyEditor components\n- Delete or deprecate apps/space/core/components/editor/rich-text-read-only-editor.tsx and apps/web/core/components/editor/rich-text-editor/rich-text-read-only-editor.tsx. All references must be refactored to use RichTextEditor with editable={false}.\n- Delete packages/editor/src/core/components/editors/rich-text/read-only-editor.tsx and its type usage.\n\n3) Update core editor types and wiring\n- In packages/editor/src/core/types/editor.ts, add editable: boolean to IRichTextEditorProps and remove IRichTextReadOnlyEditorProps.\n- In packages/editor/src/core/components/editors/editor-wrapper.tsx, add an editable prop and pass it to the useEditor initialization so the underlying editor is truly non-editable when editable is false.\n- In packages/editor/src/core/components/editors/lite-text/editor.tsx, pass editable by default (true) into EditorWrapper, leaving the ability to override via props if provided.\n\n4) Refactor app-level rich text wrappers to support editable toggle\n- apps/space/core/components/editor/rich-text-editor.tsx:\n   Change prop type to a discriminated union: when editable is true, require uploadFile; when false, omit uploadFile.\n   Accept editable and forward it to RichTextEditorWithRef as editable.\n   For fileHandler, if editable is true, use props.uploadFile; otherwise pass a no-op async () => \"\".\n   Keep mentionHandler rendering, but only wire dynamic data fetches as before; the wrapper already uses getEditorFileHandlers.\n- apps/web/core/components/editor/rich-text-editor/rich-text-editor.tsx:\n   Change prop type to a discriminated union: when editable is true, require searchMentionCallback and uploadFile; when false, neither is required.\n   Accept editable and forward it to RichTextEditorWithRef as editable.\n   For fileHandler, pass props.uploadFile if editable, else pass a no-op async () => \"\".\n   For mentionHandler, if editable is true, use props.searchMentionCallback; if false, return an empty result (no-op fetch).\n\n5) Replace all usages of RichTextReadOnlyEditor with RichTextEditor\n- apps/space/core/components/issues/peek-overview/issue-details.tsx: Replace with <RichTextEditor editable={false} ...> preserving previous container/editor classes and props.\n- apps/web/ce/components/pages/editor/ai/ask-pi-menu.tsx and apps/web/ce/components/pages/editor/ai/menu.tsx: Replace read-only usage with <RichTextEditor editable={false} ...>.\n- apps/web/core/components/core/description-versions/modal.tsx and apps/web/core/components/core/modals/gpt-assistant-popover.tsx: Replace with <RichTextEditor editable={false} ...>, and update refs to use EditorRefApi.\n- apps/web/core/components/profile/activity/activity-list.tsx and apps/web/core/components/profile/activity/profile-activity-list.tsx: Replace with <RichTextEditor editable={false} ...> preserving display configurations.\n\n6) Unify description editors to use RichTextEditor for both edit and view\n- apps/web/core/components/inbox/modals/create-modal/issue-description.tsx: Ensure the editor is used with editable and passes required upload and search handlers.\n- apps/web/core/components/issues/description-input.tsx: Use a single <RichTextEditor> and set editable={!disabled}; wire onChange, file upload, and mention search when editable is true, and ensure a non-editable view when false via editable={false} with no uploads/search.\n- apps/web/core/components/issues/issue-modal/components/description-editor.tsx: Render <RichTextEditor editable ...> for editing.\n\n7) Update ref types where read-only variants were used\n- Replace EditorReadOnlyRefApi with EditorRefApi in components that reference the editor instance in read-only displays (e.g., description-versions modal, GPT assistant popover). Ensure ref usage remains valid for read-only viewing (methods like getMarkDown, getHeadings are still available on EditorRefApi).\n\n8) Behavior requirements\n- When editable is false: the editor is non-interactive, no uploads are attempted, and mention search calls are disabled. File handling must only support viewing/downloading; uploading returns an empty id string without throwing. UI layout/spacing must match existing read-only rendering (containerClassName/editorClassName adjustments preserved).\n- When editable is true: existing behavior remains unchangeddrag/drop, uploads, and mention search operate normally.\n\n9) Clean up remaining references\n- Remove imports/usages of RichTextReadOnlyEditor, RichTextReadOnlyEditorWithRef, IRichTextReadOnlyEditorProps, and EditorReadOnlyRefApi in all affected files. Ensure builds and type checks pass with the unified editor approach.\n",
      "prompt": "Unify the codebase to use a single RichTextEditor component that supports both editable and read-only modes via an editable flag. Remove the separate read-only rich text editor implementation and update all consumers to pass editable={false} when they need display-only behavior. Adjust the editor package so that editable is forwarded into the core editor wrapper and Tiptap initialization. Update types to add editable to the rich text editor props and remove the read-only prop types. Update app-level wrappers to require upload and mention search handlers only in editable mode and to use no-ops in read-only mode. Replace all imports/usages of the read-only editor in Space and Web apps, and change ref types to EditorRefApi as needed. Preserve UI display configuration and existing behavior for both interactive and display-only use cases. Ensure no dangling references to the deleted read-only editor remain and that the project builds cleanly.",
      "supplementalFiles": [
        "apps/space/helpers/editor.helper.ts",
        "apps/web/ce/hooks/use-editor-flagging.ts",
        "apps/web/core/hooks/editor/use-editor-config.ts",
        "packages/editor/src/core/helpers/editor-ref.ts"
      ],
      "fileDiffs": [
        {
          "path": "apps/space/core/components/editor/index.ts",
          "status": "modified",
          "diff": "Index: apps/space/core/components/editor/index.ts\n===================================================================\n--- apps/space/core/components/editor/index.ts\t7d141f2 (parent)\n+++ apps/space/core/components/editor/index.ts\t6f27ec0 (commit)\n@@ -1,5 +1,5 @@\n export * from \"./embeds\";\n export * from \"./lite-text-editor\";\n export * from \"./lite-text-read-only-editor\";\n-export * from \"./rich-text-read-only-editor\";\n+export * from \"./rich-text-editor\";\n export * from \"./toolbar\";\n"
        },
        {
          "path": "apps/space/core/components/editor/rich-text-editor.tsx",
          "status": "modified",
          "diff": "Index: apps/space/core/components/editor/rich-text-editor.tsx\n===================================================================\n--- apps/space/core/components/editor/rich-text-editor.tsx\t7d141f2 (parent)\n+++ apps/space/core/components/editor/rich-text-editor.tsx\t6f27ec0 (commit)\n@@ -8,20 +8,26 @@\n import { getEditorFileHandlers } from \"@/helpers/editor.helper\";\n // store hooks\n import { useMember } from \"@/hooks/store\";\n \n-interface RichTextEditorWrapperProps\n-  extends MakeOptional<\n-    Omit<IRichTextEditorProps, \"fileHandler\" | \"mentionHandler\">,\n-    \"disabledExtensions\" | \"flaggedExtensions\"\n-  > {\n+type RichTextEditorWrapperProps = MakeOptional<\n+  Omit<IRichTextEditorProps, \"editable\" | \"fileHandler\" | \"mentionHandler\">,\n+  \"disabledExtensions\" | \"flaggedExtensions\"\n+> & {\n   anchor: string;\n-  uploadFile: TFileHandler[\"upload\"];\n   workspaceId: string;\n-}\n+} & (\n+    | {\n+        editable: false;\n+      }\n+    | {\n+        editable: true;\n+        uploadFile: TFileHandler[\"upload\"];\n+      }\n+  );\n \n export const RichTextEditor = forwardRef<EditorRefApi, RichTextEditorWrapperProps>((props, ref) => {\n-  const { anchor, containerClassName, uploadFile, workspaceId, disabledExtensions, flaggedExtensions, ...rest } = props;\n+  const { anchor, containerClassName, editable, workspaceId, disabledExtensions, flaggedExtensions, ...rest } = props;\n   const { getMemberById } = useMember();\n   return (\n     <RichTextEditorWithRef\n       mentionHandler={{\n@@ -31,11 +37,12 @@\n         }),\n       }}\n       ref={ref}\n       disabledExtensions={disabledExtensions ?? []}\n+      editable={editable}\n       fileHandler={getEditorFileHandlers({\n         anchor,\n-        uploadFile,\n+        uploadFile: editable ? props.uploadFile : async () => \"\",\n         workspaceId,\n       })}\n       flaggedExtensions={flaggedExtensions ?? []}\n       {...rest}\n"
        },
        {
          "path": "apps/space/core/components/editor/rich-text-read-only-editor.tsx",
          "status": "deleted",
          "diff": "Index: apps/space/core/components/editor/rich-text-read-only-editor.tsx\n===================================================================\n--- apps/space/core/components/editor/rich-text-read-only-editor.tsx\t7d141f2 (parent)\n+++ apps/space/core/components/editor/rich-text-read-only-editor.tsx\t6f27ec0 (commit)\n@@ -1,48 +1,1 @@\n-import React from \"react\";\n-// plane imports\n-import { EditorReadOnlyRefApi, IRichTextReadOnlyEditorProps, RichTextReadOnlyEditorWithRef } from \"@plane/editor\";\n-import { MakeOptional } from \"@plane/types\";\n-import { cn } from \"@plane/utils\";\n-// components\n-import { EditorMentionsRoot } from \"@/components/editor\";\n-// helpers\n-import { getReadOnlyEditorFileHandlers } from \"@/helpers/editor.helper\";\n-// store hooks\n-import { useMember } from \"@/hooks/store\";\n-\n-type RichTextReadOnlyEditorWrapperProps = MakeOptional<\n-  Omit<IRichTextReadOnlyEditorProps, \"fileHandler\" | \"mentionHandler\">,\n-  \"disabledExtensions\" | \"flaggedExtensions\"\n-> & {\n-  anchor: string;\n-  workspaceId: string;\n-};\n-\n-export const RichTextReadOnlyEditor = React.forwardRef<EditorReadOnlyRefApi, RichTextReadOnlyEditorWrapperProps>(\n-  ({ anchor, workspaceId, disabledExtensions, flaggedExtensions, ...props }, ref) => {\n-    const { getMemberById } = useMember();\n-\n-    return (\n-      <RichTextReadOnlyEditorWithRef\n-        ref={ref}\n-        disabledExtensions={disabledExtensions ?? []}\n-        flaggedExtensions={flaggedExtensions ?? []}\n-        fileHandler={getReadOnlyEditorFileHandlers({\n-          anchor,\n-          workspaceId,\n-        })}\n-        mentionHandler={{\n-          renderComponent: (props) => <EditorMentionsRoot {...props} />,\n-          getMentionedEntityDetails: (id: string) => ({\n-            display_name: getMemberById(id)?.member__display_name ?? \"\",\n-          }),\n-        }}\n-        {...props}\n-        // overriding the customClassName to add relative class passed\n-        containerClassName={cn(\"relative p-0 border-none\", props.containerClassName)}\n-      />\n-    );\n-  }\n-);\n-\n-RichTextReadOnlyEditor.displayName = \"RichTextReadOnlyEditor\";\n+[DELETED]\n\\ No newline at end of file\n"
        },
        {
          "path": "apps/space/core/components/issues/peek-overview/issue-details.tsx",
          "status": "modified",
          "diff": "Index: apps/space/core/components/issues/peek-overview/issue-details.tsx\n===================================================================\n--- apps/space/core/components/issues/peek-overview/issue-details.tsx\t7d141f2 (parent)\n+++ apps/space/core/components/issues/peek-overview/issue-details.tsx\t6f27ec0 (commit)\n@@ -1,7 +1,7 @@\n import { observer } from \"mobx-react\";\n // components\n-import { RichTextReadOnlyEditor } from \"@/components/editor\";\n+import { RichTextEditor } from \"@/components/editor\";\n import { IssueReactions } from \"@/components/issues/peek-overview\";\n import { usePublish } from \"@/hooks/store\";\n // types\n import { IIssue } from \"@/types/issue\";\n@@ -24,9 +24,10 @@\n         {project_details?.identifier}-{issueDetails?.sequence_id}\n       </h6>\n       <h4 className=\"break-words text-2xl font-medium\">{issueDetails.name}</h4>\n       {description !== \"\" && description !== \"<p></p>\" && (\n-        <RichTextReadOnlyEditor\n+        <RichTextEditor\n+          editable={false}\n           anchor={anchor}\n           id={issueDetails.id}\n           initialValue={\n             !description ||\n"
        },
        {
          "path": "apps/web/ce/components/pages/editor/ai/ask-pi-menu.tsx",
          "status": "modified",
          "diff": "Index: apps/web/ce/components/pages/editor/ai/ask-pi-menu.tsx\n===================================================================\n--- apps/web/ce/components/pages/editor/ai/ask-pi-menu.tsx\t7d141f2 (parent)\n+++ apps/web/ce/components/pages/editor/ai/ask-pi-menu.tsx\t6f27ec0 (commit)\n@@ -3,9 +3,9 @@\n // ui\n import { Tooltip } from \"@plane/ui\";\n // components\n import { cn } from \"@plane/utils\";\n-import { RichTextReadOnlyEditor } from \"@/components/editor\";\n+import { RichTextEditor } from \"@/components/editor\";\n // helpers\n // hooks\n import { useWorkspace } from \"@/hooks/store\";\n \n@@ -37,9 +37,10 @@\n           <Sparkles className=\"size-3\" />\n         </span>\n         {response ? (\n           <div>\n-            <RichTextReadOnlyEditor\n+            <RichTextEditor\n+              editable={false}\n               displayConfig={{\n                 fontSize: \"small-font\",\n               }}\n               id=\"editor-ai-response\"\n"
        },
        {
          "path": "apps/web/ce/components/pages/editor/ai/menu.tsx",
          "status": "modified",
          "diff": "Index: apps/web/ce/components/pages/editor/ai/menu.tsx\n===================================================================\n--- apps/web/ce/components/pages/editor/ai/menu.tsx\t7d141f2 (parent)\n+++ apps/web/ce/components/pages/editor/ai/menu.tsx\t6f27ec0 (commit)\n@@ -7,9 +7,9 @@\n // plane ui\n import { Tooltip } from \"@plane/ui\";\n // components\n import { cn } from \"@plane/utils\";\n-import { RichTextReadOnlyEditor } from \"@/components/editor\";\n+import { RichTextEditor } from \"@/components/editor\";\n // helpers\n // plane web constants\n import { AI_EDITOR_TASKS, LOADING_TEXTS } from \"@/plane-web/constants/ai\";\n // plane web services\n@@ -207,12 +207,13 @@\n                   <Sparkles className=\"size-3\" />\n                 </span>\n                 {response ? (\n                   <div>\n-                    <RichTextReadOnlyEditor\n+                    <RichTextEditor\n                       displayConfig={{\n                         fontSize: \"small-font\",\n                       }}\n+                      editable={false}\n                       id=\"editor-ai-response\"\n                       initialValue={response}\n                       containerClassName=\"!p-0 border-none\"\n                       editorClassName=\"!pl-0\"\n"
        },
        {
          "path": "apps/web/core/components/core/description-versions/modal.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/core/description-versions/modal.tsx\n===================================================================\n--- apps/web/core/components/core/description-versions/modal.tsx\t7d141f2 (parent)\n+++ apps/web/core/components/core/description-versions/modal.tsx\t6f27ec0 (commit)\n@@ -1,9 +1,9 @@\n import { useCallback, useRef } from \"react\";\n import { observer } from \"mobx-react\";\n import { ChevronLeft, ChevronRight, Copy } from \"lucide-react\";\n // plane imports\n-import { EditorReadOnlyRefApi } from \"@plane/editor\";\n+import type { EditorRefApi } from \"@plane/editor\";\n import { useTranslation } from \"@plane/i18n\";\n import { TDescriptionVersion } from \"@plane/types\";\n import {\n   Avatar,\n@@ -18,9 +18,9 @@\n   Tooltip,\n } from \"@plane/ui\";\n import { calculateTimeAgo, cn, copyTextToClipboard, getFileURL } from \"@plane/utils\";\n // components\n-import { RichTextReadOnlyEditor } from \"@/components/editor\";\n+import { RichTextEditor } from \"@/components/editor\";\n // hooks\n import { useMember, useWorkspace } from \"@/hooks/store\";\n \n type Props = {\n@@ -51,9 +51,9 @@\n     projectId,\n     workspaceSlug,\n   } = props;\n   // refs\n-  const editorRef = useRef<EditorReadOnlyRefApi>(null);\n+  const editorRef = useRef<EditorRefApi>(null);\n   // store hooks\n   const { getUserDetails } = useMember();\n   const { getWorkspaceBySlug } = useWorkspace();\n   // derived values\n@@ -130,9 +130,10 @@\n         {/* End header */}\n         {/* Version description */}\n         <div className=\"mt-4 pb-4\">\n           {activeVersionDescription ? (\n-            <RichTextReadOnlyEditor\n+            <RichTextEditor\n+              editable={false}\n               containerClassName=\"p-0 !pl-0 border-none\"\n               editorClassName=\"pl-0\"\n               id={activeVersionId ?? \"\"}\n               initialValue={activeVersionDescription ?? \"<p></p>\"}\n"
        },
        {
          "path": "apps/web/core/components/core/modals/gpt-assistant-popover.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/core/modals/gpt-assistant-popover.tsx\n===================================================================\n--- apps/web/core/components/core/modals/gpt-assistant-popover.tsx\t7d141f2 (parent)\n+++ apps/web/core/components/core/modals/gpt-assistant-popover.tsx\t6f27ec0 (commit)\n@@ -5,14 +5,13 @@\n import { Controller, useForm } from \"react-hook-form\"; // services\n import { usePopper } from \"react-popper\";\n import { AlertCircle } from \"lucide-react\";\n import { Popover, Transition } from \"@headlessui/react\";\n-// plane editor\n-import { EditorReadOnlyRefApi } from \"@plane/editor\";\n-// ui\n+// plane imports\n+import type { EditorRefApi } from \"@plane/editor\";\n import { Button, Input, TOAST_TYPE, setToast } from \"@plane/ui\";\n // components\n-import { RichTextReadOnlyEditor } from \"@/components/editor/rich-text-editor/rich-text-read-only-editor\";\n+import { RichTextEditor } from \"@/components/editor\";\n // services\n import { AIService } from \"@/services/ai.service\";\n const aiService = new AIService();\n \n@@ -54,10 +53,10 @@\n   const [invalidResponse, setInvalidResponse] = useState(false);\n   const [referenceElement, setReferenceElement] = useState<HTMLButtonElement | null>(null);\n   const [popperElement, setPopperElement] = useState<HTMLDivElement | null>(null);\n   // refs\n-  const editorRef = useRef<EditorReadOnlyRefApi>(null);\n-  const responseRef = useRef<any>(null);\n+  const editorRef = useRef<EditorRefApi>(null);\n+  const responseRef = useRef<EditorRefApi>(null);\n   // popper\n   const { styles, attributes } = usePopper(referenceElement, popperElement, {\n     placement: placement ?? \"auto\",\n   });\n@@ -216,9 +215,10 @@\n           <div className=\"vertical-scroll-enable max-h-72 space-y-4 overflow-y-auto\">\n             {prompt && (\n               <div className=\"text-sm\">\n                 Content:\n-                <RichTextReadOnlyEditor\n+                <RichTextEditor\n+                  editable={false}\n                   id=\"ai-assistant-content\"\n                   initialValue={prompt}\n                   containerClassName=\"-m-3\"\n                   ref={editorRef}\n@@ -230,9 +230,10 @@\n             )}\n             {response !== \"\" && (\n               <div className=\"page-block-section max-h-[8rem] text-sm\">\n                 Response:\n-                <RichTextReadOnlyEditor\n+                <RichTextEditor\n+                  editable={false}\n                   id=\"ai-assistant-response\"\n                   initialValue={`<p>${response}</p>`}\n                   ref={responseRef}\n                   workspaceId={workspaceId}\n"
        },
        {
          "path": "apps/web/core/components/editor/rich-text-editor/index.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/components/editor/rich-text-editor/index.ts\n===================================================================\n--- apps/web/core/components/editor/rich-text-editor/index.ts\t7d141f2 (parent)\n+++ apps/web/core/components/editor/rich-text-editor/index.ts\t6f27ec0 (commit)\n@@ -1,2 +1,1 @@\n export * from \"./rich-text-editor\";\n-export * from \"./rich-text-read-only-editor\";\n"
        },
        {
          "path": "apps/web/core/components/editor/rich-text-editor/rich-text-editor.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/editor/rich-text-editor/rich-text-editor.tsx\n===================================================================\n--- apps/web/core/components/editor/rich-text-editor/rich-text-editor.tsx\t7d141f2 (parent)\n+++ apps/web/core/components/editor/rich-text-editor/rich-text-editor.tsx\t6f27ec0 (commit)\n@@ -12,28 +12,33 @@\n import { useMember } from \"@/hooks/store\";\n // plane web hooks\n import { useEditorFlagging } from \"@/plane-web/hooks/use-editor-flagging\";\n \n-interface RichTextEditorWrapperProps\n-  extends MakeOptional<\n-    Omit<IRichTextEditorProps, \"fileHandler\" | \"mentionHandler\">,\n-    \"disabledExtensions\" | \"flaggedExtensions\"\n-  > {\n-  searchMentionCallback: (payload: TSearchEntityRequestPayload) => Promise<TSearchResponse>;\n+type RichTextEditorWrapperProps = MakeOptional<\n+  Omit<IRichTextEditorProps, \"fileHandler\" | \"mentionHandler\">,\n+  \"disabledExtensions\" | \"editable\" | \"flaggedExtensions\"\n+> & {\n   workspaceSlug: string;\n   workspaceId: string;\n   projectId?: string;\n-  uploadFile: TFileHandler[\"upload\"];\n-}\n+} & (\n+    | {\n+        editable: false;\n+      }\n+    | {\n+        editable: true;\n+        searchMentionCallback: (payload: TSearchEntityRequestPayload) => Promise<TSearchResponse>;\n+        uploadFile: TFileHandler[\"upload\"];\n+      }\n+  );\n \n export const RichTextEditor = forwardRef<EditorRefApi, RichTextEditorWrapperProps>((props, ref) => {\n   const {\n     containerClassName,\n+    editable,\n     workspaceSlug,\n     workspaceId,\n     projectId,\n-    searchMentionCallback,\n-    uploadFile,\n     disabledExtensions: additionalDisabledExtensions,\n     ...rest\n   } = props;\n   // store hooks\n@@ -41,21 +46,22 @@\n   // editor flaggings\n   const { richText: richTextEditorExtensions } = useEditorFlagging(workspaceSlug?.toString());\n   // use editor mention\n   const { fetchMentions } = useEditorMention({\n-    searchEntity: async (payload) => await searchMentionCallback(payload),\n+    searchEntity: editable ? async (payload) => await props.searchMentionCallback(payload) : async () => ({}),\n   });\n   // editor config\n   const { getEditorFileHandlers } = useEditorConfig();\n \n   return (\n     <RichTextEditorWithRef\n       ref={ref}\n       disabledExtensions={[...richTextEditorExtensions.disabled, ...(additionalDisabledExtensions ?? [])]}\n+      editable={editable}\n       flaggedExtensions={richTextEditorExtensions.flagged}\n       fileHandler={getEditorFileHandlers({\n         projectId,\n-        uploadFile,\n+        uploadFile: editable ? props.uploadFile : async () => \"\",\n         workspaceId,\n         workspaceSlug,\n       })}\n       mentionHandler={{\n"
        },
        {
          "path": "apps/web/core/components/editor/rich-text-editor/rich-text-read-only-editor.tsx",
          "status": "deleted",
          "diff": "Index: apps/web/core/components/editor/rich-text-editor/rich-text-read-only-editor.tsx\n===================================================================\n--- apps/web/core/components/editor/rich-text-editor/rich-text-read-only-editor.tsx\t7d141f2 (parent)\n+++ apps/web/core/components/editor/rich-text-editor/rich-text-read-only-editor.tsx\t6f27ec0 (commit)\n@@ -1,59 +1,1 @@\n-\"use client\";\n-\n-import React from \"react\";\n-// plane imports\n-import { EditorReadOnlyRefApi, IRichTextReadOnlyEditorProps, RichTextReadOnlyEditorWithRef } from \"@plane/editor\";\n-import { MakeOptional } from \"@plane/types\";\n-// components\n-import { cn } from \"@plane/utils\";\n-import { EditorMentionsRoot } from \"@/components/editor\";\n-// helpers\n-// hooks\n-import { useEditorConfig } from \"@/hooks/editor\";\n-// store hooks\n-import { useMember } from \"@/hooks/store\";\n-// plane web hooks\n-import { useEditorFlagging } from \"@/plane-web/hooks/use-editor-flagging\";\n-\n-type RichTextReadOnlyEditorWrapperProps = MakeOptional<\n-  Omit<IRichTextReadOnlyEditorProps, \"fileHandler\" | \"mentionHandler\">,\n-  \"disabledExtensions\" | \"flaggedExtensions\"\n-> & {\n-  workspaceId: string;\n-  workspaceSlug: string;\n-  projectId?: string;\n-};\n-\n-export const RichTextReadOnlyEditor = React.forwardRef<EditorReadOnlyRefApi, RichTextReadOnlyEditorWrapperProps>(\n-  ({ workspaceId, workspaceSlug, projectId, disabledExtensions: additionalDisabledExtensions, ...props }, ref) => {\n-    // store hooks\n-    const { getUserDetails } = useMember();\n-\n-    // editor flaggings\n-    const { richText: richTextEditorExtensions } = useEditorFlagging(workspaceSlug?.toString());\n-    // editor config\n-    const { getReadOnlyEditorFileHandlers } = useEditorConfig();\n-\n-    return (\n-      <RichTextReadOnlyEditorWithRef\n-        ref={ref}\n-        disabledExtensions={[...richTextEditorExtensions.disabled, ...(additionalDisabledExtensions ?? [])]}\n-        flaggedExtensions={richTextEditorExtensions.flagged}\n-        fileHandler={getReadOnlyEditorFileHandlers({\n-          projectId,\n-          workspaceId,\n-          workspaceSlug,\n-        })}\n-        mentionHandler={{\n-          renderComponent: (props) => <EditorMentionsRoot {...props} />,\n-          getMentionedEntityDetails: (id: string) => ({ display_name: getUserDetails(id)?.display_name ?? \"\" }),\n-        }}\n-        {...props}\n-        // overriding the containerClassName to add relative class passed\n-        containerClassName={cn(props.containerClassName, \"relative pl-3\")}\n-      />\n-    );\n-  }\n-);\n-\n-RichTextReadOnlyEditor.displayName = \"RichTextReadOnlyEditor\";\n+[DELETED]\n\\ No newline at end of file\n"
        },
        {
          "path": "apps/web/core/components/inbox/modals/create-modal/issue-description.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/inbox/modals/create-modal/issue-description.tsx\n===================================================================\n--- apps/web/core/components/inbox/modals/create-modal/issue-description.tsx\t7d141f2 (parent)\n+++ apps/web/core/components/inbox/modals/create-modal/issue-description.tsx\t6f27ec0 (commit)\n@@ -61,8 +61,9 @@\n     );\n \n   return (\n     <RichTextEditor\n+      editable\n       id=\"inbox-modal-editor\"\n       initialValue={!data?.description_html || data?.description_html === \"\" ? \"<p></p>\" : data?.description_html}\n       ref={editorRef}\n       workspaceSlug={workspaceSlug}\n"
        },
        {
          "path": "apps/web/core/components/issues/description-input.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/description-input.tsx\n===================================================================\n--- apps/web/core/components/issues/description-input.tsx\t7d141f2 (parent)\n+++ apps/web/core/components/issues/description-input.tsx\t6f27ec0 (commit)\n@@ -4,15 +4,15 @@\n import debounce from \"lodash/debounce\";\n import { observer } from \"mobx-react\";\n import { Controller, useForm } from \"react-hook-form\";\n // plane imports\n-import { EditorReadOnlyRefApi, EditorRefApi } from \"@plane/editor\";\n+import type { EditorRefApi } from \"@plane/editor\";\n import { useTranslation } from \"@plane/i18n\";\n import { EFileAssetType, TIssue, TNameDescriptionLoader } from \"@plane/types\";\n import { Loader } from \"@plane/ui\";\n // components\n import { getDescriptionPlaceholderI18n } from \"@plane/utils\";\n-import { RichTextEditor, RichTextReadOnlyEditor } from \"@/components/editor\";\n+import { RichTextEditor } from \"@/components/editor\";\n import { TIssueOperations } from \"@/components/issues/issue-detail\";\n // helpers\n // hooks\n import { useEditorAsset, useWorkspace } from \"@/hooks/store\";\n@@ -21,9 +21,8 @@\n const workspaceService = new WorkspaceService();\n \n export type IssueDescriptionInputProps = {\n   containerClassName?: string;\n-  editorReadOnlyRef?: React.RefObject<EditorReadOnlyRefApi>;\n   editorRef?: React.RefObject<EditorRefApi>;\n   workspaceSlug: string;\n   projectId: string;\n   issueId: string;\n@@ -37,9 +36,8 @@\n \n export const IssueDescriptionInput: FC<IssueDescriptionInputProps> = observer((props) => {\n   const {\n     containerClassName,\n-    editorReadOnlyRef,\n     editorRef,\n     workspaceSlug,\n     projectId,\n     issueId,\n@@ -108,68 +106,57 @@\n       {localIssueDescription.description_html ? (\n         <Controller\n           name=\"description_html\"\n           control={control}\n-          render={({ field: { onChange } }) =>\n-            !disabled ? (\n-              <RichTextEditor\n-                id={issueId}\n-                initialValue={localIssueDescription.description_html ?? \"<p></p>\"}\n-                value={swrIssueDescription ?? null}\n-                workspaceSlug={workspaceSlug}\n-                workspaceId={workspaceId}\n-                projectId={projectId}\n-                dragDropEnabled\n-                onChange={(_description: object, description_html: string) => {\n-                  setIsSubmitting(\"submitting\");\n-                  onChange(description_html);\n-                  debouncedFormSave();\n-                }}\n-                placeholder={\n-                  placeholder\n-                    ? placeholder\n-                    : (isFocused, value) => t(`${getDescriptionPlaceholderI18n(isFocused, value)}`)\n+          render={({ field: { onChange } }) => (\n+            <RichTextEditor\n+              editable={!disabled}\n+              id={issueId}\n+              initialValue={localIssueDescription.description_html ?? \"<p></p>\"}\n+              value={swrIssueDescription ?? null}\n+              workspaceSlug={workspaceSlug}\n+              workspaceId={workspaceId}\n+              projectId={projectId}\n+              dragDropEnabled\n+              onChange={(_description: object, description_html: string) => {\n+                setIsSubmitting(\"submitting\");\n+                onChange(description_html);\n+                debouncedFormSave();\n+              }}\n+              placeholder={\n+                placeholder\n+                  ? placeholder\n+                  : (isFocused, value) => t(`${getDescriptionPlaceholderI18n(isFocused, value)}`)\n+              }\n+              searchMentionCallback={async (payload) =>\n+                await workspaceService.searchEntity(workspaceSlug?.toString() ?? \"\", {\n+                  ...payload,\n+                  project_id: projectId?.toString() ?? \"\",\n+                  issue_id: issueId?.toString(),\n+                })\n+              }\n+              containerClassName={containerClassName}\n+              uploadFile={async (blockId, file) => {\n+                try {\n+                  const { asset_id } = await uploadEditorAsset({\n+                    blockId,\n+                    data: {\n+                      entity_identifier: issueId,\n+                      entity_type: EFileAssetType.ISSUE_DESCRIPTION,\n+                    },\n+                    file,\n+                    projectId,\n+                    workspaceSlug,\n+                  });\n+                  return asset_id;\n+                } catch (error) {\n+                  console.log(\"Error in uploading work item asset:\", error);\n+                  throw new Error(\"Asset upload failed. Please try again later.\");\n                 }\n-                searchMentionCallback={async (payload) =>\n-                  await workspaceService.searchEntity(workspaceSlug?.toString() ?? \"\", {\n-                    ...payload,\n-                    project_id: projectId?.toString() ?? \"\",\n-                    issue_id: issueId?.toString(),\n-                  })\n-                }\n-                containerClassName={containerClassName}\n-                uploadFile={async (blockId, file) => {\n-                  try {\n-                    const { asset_id } = await uploadEditorAsset({\n-                      blockId,\n-                      data: {\n-                        entity_identifier: issueId,\n-                        entity_type: EFileAssetType.ISSUE_DESCRIPTION,\n-                      },\n-                      file,\n-                      projectId,\n-                      workspaceSlug,\n-                    });\n-                    return asset_id;\n-                  } catch (error) {\n-                    console.log(\"Error in uploading work item asset:\", error);\n-                    throw new Error(\"Asset upload failed. Please try again later.\");\n-                  }\n-                }}\n-                ref={editorRef}\n-              />\n-            ) : (\n-              <RichTextReadOnlyEditor\n-                id={issueId}\n-                initialValue={localIssueDescription.description_html ?? \"\"}\n-                containerClassName={containerClassName}\n-                workspaceId={workspaceId}\n-                workspaceSlug={workspaceSlug}\n-                projectId={projectId}\n-                ref={editorReadOnlyRef}\n-              />\n-            )\n-          }\n+              }}\n+              ref={editorRef}\n+            />\n+          )}\n         />\n       ) : (\n         <Loader>\n           <Loader.Item height=\"150px\" />\n"
        },
        {
          "path": "apps/web/core/components/issues/issue-modal/components/description-editor.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/issues/issue-modal/components/description-editor.tsx\n===================================================================\n--- apps/web/core/components/issues/issue-modal/components/description-editor.tsx\t7d141f2 (parent)\n+++ apps/web/core/components/issues/issue-modal/components/description-editor.tsx\t6f27ec0 (commit)\n@@ -5,15 +5,11 @@\n import { Control, Controller } from \"react-hook-form\";\n import { Sparkle } from \"lucide-react\";\n // plane imports\n import { ETabIndices } from \"@plane/constants\";\n-// editor\n-import { EditorRefApi } from \"@plane/editor\";\n-// i18n\n+import type { EditorRefApi } from \"@plane/editor\";\n import { useTranslation } from \"@plane/i18n\";\n-// types\n import { EFileAssetType, TIssue } from \"@plane/types\";\n-// ui\n import { Loader, setToast, TOAST_TYPE } from \"@plane/ui\";\n import { getDescriptionPlaceholderI18n, getTabIndex } from \"@plane/utils\";\n // components\n import { GptAssistantPopover } from \"@/components/core\";\n@@ -176,8 +172,9 @@\n             name=\"description_html\"\n             control={control}\n             render={({ field: { value, onChange } }) => (\n               <RichTextEditor\n+                editable\n                 id=\"issue-modal-editor\"\n                 initialValue={value ?? \"\"}\n                 value={descriptionHtmlData}\n                 workspaceSlug={workspaceSlug?.toString() as string}\n"
        },
        {
          "path": "apps/web/core/components/profile/activity/activity-list.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/profile/activity/activity-list.tsx\n===================================================================\n--- apps/web/core/components/profile/activity/activity-list.tsx\t7d141f2 (parent)\n+++ apps/web/core/components/profile/activity/activity-list.tsx\t6f27ec0 (commit)\n@@ -8,9 +8,9 @@\n // hooks\n // components\n import { ActivityIcon, ActivityMessage, IssueLink } from \"@/components/core\";\n // editor\n-import { RichTextReadOnlyEditor } from \"@/components/editor/rich-text-editor/rich-text-read-only-editor\";\n+import { RichTextEditor } from \"@/components/editor\";\n // ui\n import { ActivitySettingsLoader } from \"@/components/ui\";\n // helpers\n // hooks\n@@ -72,9 +72,10 @@\n                           Commented {calculateTimeAgo(activityItem.created_at)}\n                         </p>\n                       </div>\n                       <div className=\"issue-comments-section p-0\">\n-                        <RichTextReadOnlyEditor\n+                        <RichTextEditor\n+                          editable={false}\n                           id={activityItem.id}\n                           initialValue={\n                             activityItem?.new_value !== \"\"\n                               ? (activityItem.new_value?.toString() as string)\n"
        },
        {
          "path": "apps/web/core/components/profile/activity/profile-activity-list.tsx",
          "status": "modified",
          "diff": "Index: apps/web/core/components/profile/activity/profile-activity-list.tsx\n===================================================================\n--- apps/web/core/components/profile/activity/profile-activity-list.tsx\t7d141f2 (parent)\n+++ apps/web/core/components/profile/activity/profile-activity-list.tsx\t6f27ec0 (commit)\n@@ -5,10 +5,10 @@\n // icons\n import { History, MessageSquare } from \"lucide-react\";\n import { calculateTimeAgo, getFileURL } from \"@plane/utils\";\n // hooks\n-import { ActivityIcon, ActivityMessage, IssueLink } from \"@/components/core\";\n-import { RichTextReadOnlyEditor } from \"@/components/editor/rich-text-editor/rich-text-read-only-editor\";\n+import { ActivityIcon, ActivityMessage } from \"@/components/core\";\n+import { RichTextEditor } from \"@/components/editor\";\n import { ActivitySettingsLoader } from \"@/components/ui\";\n // constants\n import { USER_ACTIVITY } from \"@/constants/fetch-keys\";\n // helpers\n@@ -95,9 +95,10 @@\n                           Commented {calculateTimeAgo(activityItem.created_at)}\n                         </p>\n                       </div>\n                       <div className=\"issue-comments-section p-0\">\n-                        <RichTextReadOnlyEditor\n+                        <RichTextEditor\n+                          editable={false}\n                           id={activityItem.id}\n                           initialValue={\n                             activityItem?.new_value !== \"\" ? activityItem.new_value : activityItem.old_value\n                           }\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/editor-wrapper.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/editor-wrapper.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/editor-wrapper.tsx\t7d141f2 (parent)\n+++ packages/editor/src/core/components/editors/editor-wrapper.tsx\t6f27ec0 (commit)\n@@ -11,8 +11,9 @@\n import { EditorContentWrapper } from \"./editor-content\";\n \n type Props = IEditorProps & {\n   children?: (editor: Editor) => React.ReactNode;\n+  editable: boolean;\n   extensions: Extensions;\n };\n \n export const EditorWrapper: React.FC<Props> = (props) => {\n@@ -20,8 +21,9 @@\n     children,\n     containerClassName,\n     disabledExtensions,\n     displayConfig = DEFAULT_DISPLAY_CONFIG,\n+    editable,\n     editorClassName = \"\",\n     extensions,\n     id,\n     initialValue,\n@@ -38,9 +40,9 @@\n     value,\n   } = props;\n \n   const editor = useEditor({\n-    editable: true,\n+    editable,\n     disabledExtensions,\n     editorClassName,\n     enableHistory: true,\n     extensions,\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/lite-text/editor.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/lite-text/editor.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/lite-text/editor.tsx\t7d141f2 (parent)\n+++ packages/editor/src/core/components/editors/lite-text/editor.tsx\t6f27ec0 (commit)\n@@ -18,9 +18,9 @@\n \n     return resolvedExtensions;\n   }, [externalExtensions, disabledExtensions, onEnterKeyPress]);\n \n-  return <EditorWrapper {...props} extensions={extensions} />;\n+  return <EditorWrapper {...props} editable extensions={extensions} />;\n };\n \n const LiteTextEditorWithRef = forwardRef<EditorRefApi, ILiteTextEditorProps>((props, ref) => (\n   <LiteTextEditor {...props} forwardedRef={ref as React.MutableRefObject<EditorRefApi | null>} />\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/rich-text/index.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/rich-text/index.ts\n===================================================================\n--- packages/editor/src/core/components/editors/rich-text/index.ts\t7d141f2 (parent)\n+++ packages/editor/src/core/components/editors/rich-text/index.ts\t6f27ec0 (commit)\n@@ -1,2 +1,1 @@\n export * from \"./editor\";\n-export * from \"./read-only-editor\";\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/rich-text/read-only-editor.tsx",
          "status": "deleted",
          "diff": "Index: packages/editor/src/core/components/editors/rich-text/read-only-editor.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/rich-text/read-only-editor.tsx\t7d141f2 (parent)\n+++ packages/editor/src/core/components/editors/rich-text/read-only-editor.tsx\t6f27ec0 (commit)\n@@ -1,33 +1,1 @@\n-import { forwardRef, useCallback } from \"react\";\n-// plane editor extensions\n-import { RichTextReadOnlyEditorAdditionalExtensions } from \"@/plane-editor/extensions/rich-text/read-only-extensions\";\n-// types\n-import { EditorReadOnlyRefApi, IRichTextReadOnlyEditorProps } from \"@/types\";\n-// local imports\n-import { ReadOnlyEditorWrapper } from \"../read-only-editor-wrapper\";\n-\n-const RichTextReadOnlyEditorWithRef = forwardRef<EditorReadOnlyRefApi, IRichTextReadOnlyEditorProps>((props, ref) => {\n-  const { disabledExtensions, fileHandler, flaggedExtensions } = props;\n-\n-  const getExtensions = useCallback(() => {\n-    const extensions = RichTextReadOnlyEditorAdditionalExtensions({\n-      disabledExtensions,\n-      fileHandler,\n-      flaggedExtensions,\n-    });\n-\n-    return extensions;\n-  }, [disabledExtensions, fileHandler, flaggedExtensions]);\n-\n-  return (\n-    <ReadOnlyEditorWrapper\n-      {...props}\n-      extensions={getExtensions()}\n-      forwardedRef={ref as React.MutableRefObject<EditorReadOnlyRefApi | null>}\n-    />\n-  );\n-});\n-\n-RichTextReadOnlyEditorWithRef.displayName = \"RichReadOnlyEditorWithRef\";\n-\n-export { RichTextReadOnlyEditorWithRef };\n+[DELETED]\n\\ No newline at end of file\n"
        },
        {
          "path": "packages/editor/src/core/types/editor.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/editor.ts\n===================================================================\n--- packages/editor/src/core/types/editor.ts\t7d141f2 (parent)\n+++ packages/editor/src/core/types/editor.ts\t6f27ec0 (commit)\n@@ -142,11 +142,13 @@\n   value?: string | null;\n }\n \n export type ILiteTextEditorProps = IEditorProps;\n-export interface IRichTextEditorProps extends IEditorProps {\n+\n+export type IRichTextEditorProps = IEditorProps & {\n   dragDropEnabled?: boolean;\n-}\n+  editable: boolean;\n+};\n \n export interface ICollaborativeDocumentEditorProps\n   extends Omit<IEditorProps, \"extensions\" | \"initialValue\" | \"onEnterKeyPress\" | \"value\"> {\n   aiHandler?: TAIHandler;\n@@ -177,10 +179,8 @@\n }\n \n export type ILiteTextReadOnlyEditorProps = IReadOnlyEditorProps;\n \n-export type IRichTextReadOnlyEditorProps = IReadOnlyEditorProps;\n-\n export interface IDocumentReadOnlyEditorProps extends IReadOnlyEditorProps {\n   embedHandler: TEmbedConfig;\n }\n \n"
        },
        {
          "path": "packages/editor/src/index.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/index.ts\n===================================================================\n--- packages/editor/src/index.ts\t7d141f2 (parent)\n+++ packages/editor/src/index.ts\t6f27ec0 (commit)\n@@ -12,9 +12,8 @@\n   DocumentReadOnlyEditorWithRef,\n   LiteTextEditorWithRef,\n   LiteTextReadOnlyEditorWithRef,\n   RichTextEditorWithRef,\n-  RichTextReadOnlyEditorWithRef,\n } from \"@/components/editors\";\n \n export { isCellSelection } from \"@/extensions/table/table/utilities/is-cell-selection\";\n \n"
        }
      ]
    },
    {
      "id": "update-editor-flagging",
      "sha": "fa150c2b474e8c3e24ab27c4552399479011e6a9",
      "parentSha": "c3273b1a857dfe5c0d9c8f33b9e078d756f0b233",
      "spec": "Implement editor extension flagging, trailing paragraph behavior, slash command badges, and page description support across Space and shared packages:\n\n1) Add CE flagging hook for editors\n- File: apps/space/ce/hooks/use-editor-flagging.ts\n- Create a React utility that exports useEditorFlagging(anchor: string) returning an object with three keys: document, liteText, and richText. Each key contains: { disabled: TExtensions[]; flagged: TExtensions[] }.\n- Type disabled and flagged arrays with TExtensions from @plane/editor. For now, return empty arrays for all categories (no flags/disabled by default). Keep the anchor argument for future conditional logic.\n\n2) Wire flagging into Space editors and update props\n- File: apps/space/core/components/editor/lite-text-editor.tsx\n  - Import the hook using the existing app alias for CE (e.g., \"@/plane-web/hooks/use-editor-flagging\").\n  - Change the component to no longer accept a flaggedExtensions prop. Keep disabledExtensions but treat incoming values as additionalDisabledExtensions (default empty array).\n  - Call useEditorFlagging(anchor) and destructure liteText. Pass disabledExtensions as a merged array: [...liteText.disabled, ...additionalDisabledExtensions]. Pass flaggedExtensions from liteText.flagged. Keep other existing handlers and behavior unchanged.\n\n- File: apps/space/core/components/editor/rich-text-editor.tsx\n  - Import the hook (using the CE alias already used by the file).\n  - Stop accepting a flaggedExtensions prop. Rename incoming disabledExtensions to additionalDisabledExtensions with default [] to merge with values from the hook.\n  - Call useEditorFlagging(anchor) and use richText to pass disabledExtensions as [...richText.disabled, ...additionalDisabledExtensions] and flaggedExtensions as richText.flagged. Preserve mention and file handlers.\n\n3) Fix trailing paragraph insertion logic in the editor container\n- File: packages/editor/src/core/components/editors/editor-container.tsx\n  - In the click handler where a trailing node is conditionally inserted, change the logic to:\n    - Use editor.state.doc.lastChild to get the last child node of the document rather than resolving positions.\n    - Determine if the last node is a paragraph by comparing to CORE_EXTENSIONS.PARAGRAPH, and ensure you do not treat the document node itself as eligible (compare to CORE_EXTENSIONS.DOCUMENT).\n    - If last node exists and is not a paragraph and not the document node, insert a paragraph node at the end of the doc and focus end. Use endPosition = editor.state.doc.content.size for insertion.\n\n4) Support optional badges in slash command items\n- File: packages/editor/src/core/extensions/slash-commands/command-menu-item.tsx\n  - Render an optional item.badge element after the title, if present.\n\n- File: packages/editor/src/core/types/slash-commands-suggestion.ts\n  - Import TEditorCommands as a type-only import.\n  - Extend the CommandItem type to include an optional badge?: React.ReactNode property.\n\n5) Add description object to page types and store\n- File: packages/types/src/page/core.ts\n  - Update TPage to include a description: object | undefined field.\n  - Keep it compatible with TPageExtended by composing TPage with TPageExtended (intersection type), ensuring the description field appears in the primary TPage shape.\n\n- File: apps/web/core/store/pages/base-page.ts\n  - Add a description property on the BasePage class (type: object | undefined).\n  - Initialize it from the incoming page object in the constructor.\n  - Mark description as observable (non-ref) in makeObservable.\n  - Include description in the asJSON getter so it serializes with the rest of the page fields.\n\nAcceptance criteria:\n- Space lite and rich editors derive disabled/flagged extensions exclusively from useEditorFlagging, merging only additional disabled items provided via props. flaggedExtensions is no longer accepted from props in these wrappers.\n- Clicking the editor container inserts a final paragraph only when the documents last child is not already a paragraph, using CORE_EXTENSIONS.DOCUMENT and CORE_EXTENSIONS.PARAGRAPH for checks.\n- Slash command menu items can display an optional badge, and the type system allows it with type-only import hygiene.\n- TPage includes a description field and BasePage tracks it as an observable and exposes it in asJSON.\n- All imports resolve using existing path aliases in Space and packages.",
      "prompt": "Implement a community-edition hook to manage editor extension flagging and integrate it into the Space lite and rich text editors so they no longer accept flagged extensions via props and instead derive them from the hook. Adjust the editor container so clicking in the editor adds a trailing paragraph only when the last child of the document is not already a paragraph, comparing against the appropriate core extension constants. Enhance slash command items to support displaying an optional badge and update the related types accordingly. Finally, add a description object field to the shared Page type and update the Web BasePage store to track it as an observable and include it in serialized output.",
      "supplementalFiles": [
        "apps/space/tsconfig.json",
        "apps/space/next.config.js",
        "packages/editor/src/core/components/editors/lite-text/editor.tsx",
        "packages/editor/src/core/components/editors/rich-text/editor.tsx",
        "packages/editor/src/core/extensions/extensions.ts",
        "packages/editor/src/core/constants/extension.ts",
        "packages/editor/src/core/types/extensions.ts",
        "packages/types/src/page/extended.ts"
      ],
      "fileDiffs": [
        {
          "path": "apps/space/ce/hooks/use-editor-flagging.ts",
          "status": "added",
          "diff": "Index: apps/space/ce/hooks/use-editor-flagging.ts\n===================================================================\n--- apps/space/ce/hooks/use-editor-flagging.ts\tc3273b1 (parent)\n+++ apps/space/ce/hooks/use-editor-flagging.ts\tfa150c2 (commit)\n@@ -1,1 +1,35 @@\n-[NEW FILE]\n\\ No newline at end of file\n+// editor\n+import { TExtensions } from \"@plane/editor\";\n+\n+export type TEditorFlaggingHookReturnType = {\n+  document: {\n+    disabled: TExtensions[];\n+    flagged: TExtensions[];\n+  };\n+  liteText: {\n+    disabled: TExtensions[];\n+    flagged: TExtensions[];\n+  };\n+  richText: {\n+    disabled: TExtensions[];\n+    flagged: TExtensions[];\n+  };\n+};\n+\n+/**\n+ * @description extensions disabled in various editors\n+ */\n+export const useEditorFlagging = (anchor: string): TEditorFlaggingHookReturnType => ({\n+  document: {\n+    disabled: [],\n+    flagged: [],\n+  },\n+  liteText: {\n+    disabled: [],\n+    flagged: [],\n+  },\n+  richText: {\n+    disabled: [],\n+    flagged: [],\n+  },\n+});\n"
        },
        {
          "path": "apps/space/core/components/editor/lite-text-editor.tsx",
          "status": "modified",
          "diff": "Index: apps/space/core/components/editor/lite-text-editor.tsx\n===================================================================\n--- apps/space/core/components/editor/lite-text-editor.tsx\tc3273b1 (parent)\n+++ apps/space/core/components/editor/lite-text-editor.tsx\tfa150c2 (commit)\n@@ -7,8 +7,9 @@\n import { EditorMentionsRoot, IssueCommentToolbar } from \"@/components/editor\";\n // helpers\n import { getEditorFileHandlers } from \"@/helpers/editor.helper\";\n import { isCommentEmpty } from \"@/helpers/string.helper\";\n+import { useEditorFlagging } from \"@/plane-web/hooks/use-editor-flagging\";\n \n type LiteTextEditorWrapperProps = MakeOptional<\n   Omit<ILiteTextEditorProps, \"fileHandler\" | \"mentionHandler\">,\n   \"disabledExtensions\" | \"flaggedExtensions\"\n@@ -30,11 +31,10 @@\n export const LiteTextEditor = React.forwardRef<EditorRefApi, LiteTextEditorWrapperProps>((props, ref) => {\n   const {\n     anchor,\n     containerClassName,\n-    disabledExtensions,\n+    disabledExtensions: additionalDisabledExtensions = [],\n     editable,\n-    flaggedExtensions,\n     isSubmitting = false,\n     showSubmitButton = true,\n     workspaceId,\n     ...rest\n@@ -44,15 +44,16 @@\n   }\n   // derived values\n   const isEmpty = isCommentEmpty(props.initialValue);\n   const editorRef = isMutableRefObject<EditorRefApi>(ref) ? ref.current : null;\n+  const { liteText: liteTextEditorExtensions } = useEditorFlagging(anchor);\n \n   return (\n     <div className=\"border border-custom-border-200 rounded p-3 space-y-3\">\n       <LiteTextEditorWithRef\n         ref={ref}\n-        disabledExtensions={disabledExtensions ?? []}\n-        flaggedExtensions={flaggedExtensions ?? []}\n+        disabledExtensions={[...liteTextEditorExtensions.disabled, ...additionalDisabledExtensions]}\n+        flaggedExtensions={liteTextEditorExtensions.flagged}\n         editable={editable}\n         fileHandler={getEditorFileHandlers({\n           anchor,\n           uploadFile: editable ? props.uploadFile : async () => \"\",\n"
        },
        {
          "path": "apps/space/core/components/editor/rich-text-editor.tsx",
          "status": "modified",
          "diff": "Index: apps/space/core/components/editor/rich-text-editor.tsx\n===================================================================\n--- apps/space/core/components/editor/rich-text-editor.tsx\tc3273b1 (parent)\n+++ apps/space/core/components/editor/rich-text-editor.tsx\tfa150c2 (commit)\n@@ -1,6 +1,7 @@\n import React, { forwardRef } from \"react\";\n // plane imports\n+import { useEditorFlagging } from \"ce/hooks/use-editor-flagging\";\n import { EditorRefApi, IRichTextEditorProps, RichTextEditorWithRef, TFileHandler } from \"@plane/editor\";\n import { MakeOptional } from \"@plane/types\";\n // components\n import { EditorMentionsRoot } from \"@/components/editor\";\n@@ -25,10 +26,19 @@\n       }\n   );\n \n export const RichTextEditor = forwardRef<EditorRefApi, RichTextEditorWrapperProps>((props, ref) => {\n-  const { anchor, containerClassName, editable, workspaceId, disabledExtensions, flaggedExtensions, ...rest } = props;\n+  const {\n+    anchor,\n+    containerClassName,\n+    editable,\n+    workspaceId,\n+    disabledExtensions: additionalDisabledExtensions = [],\n+    ...rest\n+  } = props;\n   const { getMemberById } = useMember();\n+  const { richText: richTextEditorExtensions } = useEditorFlagging(anchor);\n+\n   return (\n     <RichTextEditorWithRef\n       mentionHandler={{\n         renderComponent: (props) => <EditorMentionsRoot {...props} />,\n@@ -36,16 +46,16 @@\n           display_name: getMemberById(id)?.member__display_name ?? \"\",\n         }),\n       }}\n       ref={ref}\n-      disabledExtensions={disabledExtensions ?? []}\n+      disabledExtensions={[...richTextEditorExtensions.disabled, ...additionalDisabledExtensions]}\n       editable={editable}\n       fileHandler={getEditorFileHandlers({\n         anchor,\n         uploadFile: editable ? props.uploadFile : async () => \"\",\n         workspaceId,\n       })}\n-      flaggedExtensions={flaggedExtensions ?? []}\n+      flaggedExtensions={richTextEditorExtensions.flagged}\n       {...rest}\n       containerClassName={containerClassName}\n       editorClassName=\"min-h-[100px] max-h-[200px] border-[0.5px] border-custom-border-300 rounded-md pl-3 py-2 overflow-hidden\"\n       displayConfig={{ fontSize: \"large-font\" }}\n"
        },
        {
          "path": "apps/web/core/store/pages/base-page.ts",
          "status": "modified",
          "diff": "Index: apps/web/core/store/pages/base-page.ts\n===================================================================\n--- apps/web/core/store/pages/base-page.ts\tc3273b1 (parent)\n+++ apps/web/core/store/pages/base-page.ts\tfa150c2 (commit)\n@@ -77,8 +77,9 @@\n   // page properties\n   id: string | undefined;\n   name: string | undefined;\n   logo_props: TLogoProps | undefined;\n+  description: object | undefined;\n   description_html: string | undefined;\n   color: string | undefined;\n   label_ids: string[] | undefined;\n   owned_by: string | undefined;\n@@ -112,8 +113,9 @@\n \n     this.id = page?.id || undefined;\n     this.name = page?.name;\n     this.logo_props = page?.logo_props || undefined;\n+    this.description = page?.description || undefined;\n     this.description_html = page?.description_html || undefined;\n     this.color = page?.color || undefined;\n     this.label_ids = page?.label_ids || undefined;\n     this.owned_by = page?.owned_by || undefined;\n@@ -135,8 +137,9 @@\n       // page properties\n       id: observable.ref,\n       name: observable.ref,\n       logo_props: observable.ref,\n+      description: observable,\n       description_html: observable.ref,\n       color: observable.ref,\n       label_ids: observable,\n       owned_by: observable.ref,\n@@ -207,8 +210,9 @@\n   get asJSON() {\n     return {\n       id: this.id,\n       name: this.name,\n+      description: this.description,\n       description_html: this.description_html,\n       color: this.color,\n       label_ids: this.label_ids,\n       owned_by: this.owned_by,\n"
        },
        {
          "path": "packages/editor/src/core/components/editors/editor-container.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/components/editors/editor-container.tsx\n===================================================================\n--- packages/editor/src/core/components/editors/editor-container.tsx\tc3273b1 (parent)\n+++ packages/editor/src/core/components/editors/editor-container.tsx\tfa150c2 (commit)\n@@ -49,19 +49,18 @@\n       ) {\n         return;\n       }\n \n-      // Get the last node in the document\n-      const docSize = editor.state.doc.content.size;\n-      const lastNodePos = editor.state.doc.resolve(Math.max(0, docSize - 2));\n-      const lastNode = lastNodePos.node();\n+      // Get the last child node in the document\n+      const doc = editor.state.doc;\n+      const lastNode = doc.lastChild;\n \n       // Check if its last node and add new node\n       if (lastNode) {\n-        const isLastNodeEmptyParagraph =\n-          lastNode.type.name === CORE_EXTENSIONS.PARAGRAPH && lastNode.content.size === 0;\n-        // Only insert a new paragraph if the last node is not an empty paragraph and not a doc node\n-        if (!isLastNodeEmptyParagraph && lastNode.type.name !== \"doc\") {\n+        const isLastNodeParagraph = lastNode.type.name === CORE_EXTENSIONS.PARAGRAPH;\n+        // Insert a new paragraph if the last node is not a paragraph and not a doc node\n+        if (!isLastNodeParagraph && lastNode.type.name !== CORE_EXTENSIONS.DOCUMENT) {\n+          // Only insert a new paragraph if the last node is not an empty paragraph and not a doc node\n           const endPosition = editor?.state.doc.content.size;\n           editor?.chain().insertContentAt(endPosition, { type: \"paragraph\" }).focus(\"end\").run();\n         }\n       }\n"
        },
        {
          "path": "packages/editor/src/core/extensions/slash-commands/command-menu-item.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/slash-commands/command-menu-item.tsx\n===================================================================\n--- packages/editor/src/core/extensions/slash-commands/command-menu-item.tsx\tc3273b1 (parent)\n+++ packages/editor/src/core/extensions/slash-commands/command-menu-item.tsx\tfa150c2 (commit)\n@@ -31,7 +31,8 @@\n       <span className=\"size-5 grid place-items-center flex-shrink-0\" style={item.iconContainerStyle}>\n         {item.icon}\n       </span>\n       <p className=\"flex-grow truncate\">{item.title}</p>\n+      {item.badge}\n     </button>\n   );\n };\n"
        },
        {
          "path": "packages/editor/src/core/types/slash-commands-suggestion.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/types/slash-commands-suggestion.ts\n===================================================================\n--- packages/editor/src/core/types/slash-commands-suggestion.ts\tc3273b1 (parent)\n+++ packages/editor/src/core/types/slash-commands-suggestion.ts\tfa150c2 (commit)\n@@ -1,8 +1,7 @@\n import type { Editor, Range } from \"@tiptap/core\";\n import type { CSSProperties } from \"react\";\n-// types\n-import { TEditorCommands } from \"@/types\";\n+import type { TEditorCommands } from \"@/types\";\n \n export type CommandProps = {\n   editor: Editor;\n   range: Range;\n@@ -18,5 +17,6 @@\n   searchTerms: string[];\n   icon: React.ReactNode;\n   iconContainerStyle?: CSSProperties;\n   command: ({ editor, range }: CommandProps) => void;\n+  badge?: React.ReactNode;\n };\n"
        },
        {
          "path": "packages/types/src/page/core.ts",
          "status": "modified",
          "diff": "Index: packages/types/src/page/core.ts\n===================================================================\n--- packages/types/src/page/core.ts\tc3273b1 (parent)\n+++ packages/types/src/page/core.ts\tfa150c2 (commit)\n@@ -1,14 +1,15 @@\n import { TLogoProps } from \"../common\";\n import { EPageAccess } from \"../enums\";\n import { TPageExtended } from \"./extended\";\n \n-export type TPage = TPageExtended & {\n+export type TPage = {\n   access: EPageAccess | undefined;\n   archived_at: string | null | undefined;\n   color: string | undefined;\n   created_at: Date | undefined;\n   created_by: string | undefined;\n+  description: object | undefined;\n   description_html: string | undefined;\n   id: string | undefined;\n   is_favorite: boolean;\n   is_locked: boolean;\n@@ -19,9 +20,9 @@\n   updated_at: Date | undefined;\n   updated_by: string | undefined;\n   workspace: string | undefined;\n   logo_props: TLogoProps | undefined;\n-};\n+} & TPageExtended;\n \n // page filters\n export type TPageNavigationTabs = \"public\" | \"private\" | \"archived\";\n \n"
        }
      ]
    },
    {
      "id": "update-emoji-suggest",
      "sha": "6bb79df0eb21e27c500ada0c08098c23e0a60063",
      "parentSha": "ec0ef98c1b4771d628ce3c7efe60516e4f4fb893",
      "spec": "Implement improved emoji suggestion behavior across the editor emoji extension.\n\nScope:\n- Packages: packages/editor\n- Affected areas: Tiptap emoji extensions suggestion matching and React suggestion list behavior.\n\nRequirements:\n1) Add and wire a custom suggestion matching helper\n- Create a new helper at packages/editor/src/core/helpers/find-suggestion-match.ts that implements a custom findSuggestionMatch function for the emoji suggestion. The matcher must:\n  - Correctly extract text across marks within the current paragraph using ProseMirrors textBetween rather than relying on nodeBefore.text, so it works when the cursor is inside bold/italic/etc.\n  - Respect suggestion Trigger config: char, allowSpaces, allowToIncludeChar, allowedPrefixes, startOfLine.\n  - Compute the query and range from the current paragraph text up to the cursor and return null when conditions dont match.\n- In packages/editor/src/core/extensions/emoji/emoji.ts, register this helper by passing findSuggestionMatch to the Suggestion plugin inside addProseMirrorPlugins alongside the existing suggestion options.\n\n2) Propagate the current query to the suggestion list UI\n- In packages/editor/src/core/extensions/emoji/suggestion.ts, ensure the current query is passed as a prop to the rendered EmojiList component on both onStart and onUpdate of the Suggestion render lifecycle.\n\n3) Render control in the emoji list component\n- In packages/editor/src/core/extensions/emoji/components/emojis-list.tsx, add a new required prop query: string to EmojiListProps and adjust component usage accordingly.\n- Add an early return so the component does not render when query.length <= 0, preventing an empty suggestion dropdown.\n\nObservable outcomes:\n- Typing the emoji trigger (e.g. \":\") inside formatted text reliably opens suggestions based on the contiguous query text preceding the cursor, independent of marks.\n- Emoji suggestion dropdown only appears when at least one character has been entered after the trigger (query non-empty).\n- The suggestion list receives and uses the current query during start and subsequent updates.\n\nDo not modify any other editor behavior or unrelated extensions.",
      "prompt": "Improve the emoji suggestion feature in the editor so it detects trigger sequences inside formatted text and only shows the dropdown once at least one character of the query is present. Introduce a custom suggestion matcher that reads text across marks in the current paragraph to compute the match range and query. Wire this matcher into the emoji extensions Suggestion plugin. Pass the live query through the suggestion lifecycle to the React emoji list component and prevent the list from rendering when the query is empty.",
      "supplementalFiles": [
        "packages/editor/src/core/extensions/emoji/extension.ts",
        "packages/editor/src/core/extensions/extensions.ts",
        "packages/editor/src/core/extensions/read-only-extensions.ts",
        "packages/editor/src/core/extensions/core-without-props.ts"
      ],
      "fileDiffs": [
        {
          "path": "packages/editor/src/core/extensions/emoji/components/emojis-list.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/emoji/components/emojis-list.tsx\n===================================================================\n--- packages/editor/src/core/extensions/emoji/components/emojis-list.tsx\tec0ef98 (parent)\n+++ packages/editor/src/core/extensions/emoji/components/emojis-list.tsx\t6bb79df (commit)\n@@ -16,8 +16,9 @@\n export interface EmojiListProps {\n   items: EmojiItem[];\n   command: (item: { name: string }) => void;\n   editor: Editor;\n+  query: string;\n }\n \n export interface EmojiListRef {\n   onKeyDown: (props: SuggestionKeyDownProps) => boolean;\n@@ -42,9 +43,9 @@\n   });\n };\n \n export const EmojiList = forwardRef<EmojiListRef, EmojiListProps>((props, ref) => {\n-  const { items, command, editor } = props;\n+  const { items, command, editor, query } = props;\n   const [selectedIndex, setSelectedIndex] = useState<number>(0);\n   const [isVisible, setIsVisible] = useState(false);\n   const containerRef = useRef<HTMLDivElement>(null);\n \n@@ -140,8 +141,12 @@\n     }),\n     [handleKeyDown]\n   );\n \n+  if (query.length <= 0) {\n+    return null;\n+  }\n+\n   return (\n     <div\n       ref={containerRef}\n       style={{\n"
        },
        {
          "path": "packages/editor/src/core/extensions/emoji/emoji.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/emoji/emoji.ts\n===================================================================\n--- packages/editor/src/core/extensions/emoji/emoji.ts\tec0ef98 (parent)\n+++ packages/editor/src/core/extensions/emoji/emoji.ts\t6bb79df (commit)\n@@ -14,8 +14,10 @@\n import { Plugin, PluginKey, Transaction } from \"@tiptap/pm/state\";\n import Suggestion, { SuggestionOptions } from \"@tiptap/suggestion\";\n import emojiRegex from \"emoji-regex\";\n import { isEmojiSupported } from \"is-emoji-supported\";\n+// helpers\n+import { customFindSuggestionMatch } from \"@/helpers/find-suggestion-match\";\n \n declare module \"@tiptap/core\" {\n   interface Commands<ReturnType> {\n     emoji: {\n@@ -342,8 +344,9 @@\n   addProseMirrorPlugins() {\n     return [\n       Suggestion({\n         editor: this.editor,\n+        findSuggestionMatch: customFindSuggestionMatch,\n         ...this.options.suggestion,\n       }),\n \n       new Plugin({\n"
        },
        {
          "path": "packages/editor/src/core/extensions/emoji/suggestion.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/emoji/suggestion.ts\n===================================================================\n--- packages/editor/src/core/extensions/emoji/suggestion.ts\tec0ef98 (parent)\n+++ packages/editor/src/core/extensions/emoji/suggestion.ts\t6bb79df (commit)\n@@ -63,8 +63,9 @@\n           props: {\n             items: props.items,\n             command: props.command,\n             editor: props.editor,\n+            query: props.query,\n           },\n           editor: props.editor,\n         });\n \n@@ -80,8 +81,9 @@\n         component.updateProps({\n           items: props.items,\n           command: props.command,\n           editor: props.editor,\n+          query: props.query,\n         });\n       },\n \n       onKeyDown: (props: SuggestionKeyDownProps): boolean => {\n"
        },
        {
          "path": "packages/editor/src/core/helpers/find-suggestion-match.ts",
          "status": "added",
          "diff": "Index: packages/editor/src/core/helpers/find-suggestion-match.ts\n===================================================================\n--- packages/editor/src/core/helpers/find-suggestion-match.ts\tec0ef98 (parent)\n+++ packages/editor/src/core/helpers/find-suggestion-match.ts\t6bb79df (commit)\n@@ -1,1 +1,73 @@\n-[NEW FILE]\n\\ No newline at end of file\n+import { escapeForRegEx } from \"@tiptap/core\";\n+import { Trigger, SuggestionMatch } from \"@tiptap/suggestion\";\n+\n+export function customFindSuggestionMatch(config: Trigger): SuggestionMatch | null {\n+  const { char, allowSpaces: allowSpacesOption, allowToIncludeChar, allowedPrefixes, startOfLine, $position } = config;\n+\n+  const allowSpaces = allowSpacesOption && !allowToIncludeChar;\n+\n+  const escapedChar = escapeForRegEx(char);\n+  const suffix = new RegExp(`\\\\s${escapedChar}$`);\n+  const prefix = startOfLine ? \"^\" : \"\";\n+  const finalEscapedChar = allowToIncludeChar ? \"\" : escapedChar;\n+  const regexp = allowSpaces\n+    ? new RegExp(`${prefix}${escapedChar}.*?(?=\\\\s${finalEscapedChar}|$)`, \"gm\")\n+    : new RegExp(`${prefix}(?:^)?${escapedChar}[^\\\\s${finalEscapedChar}]*`, \"gm\");\n+\n+  // Instead of just looking at nodeBefore.text, we need to extract text from the current paragraph\n+  // to properly handle text with decorators like bold, italic, etc.\n+  const currentParagraph = $position.parent;\n+  if (!currentParagraph.isTextblock) {\n+    return null;\n+  }\n+\n+  // Get the start position of the current paragraph\n+  const paragraphStart = $position.start();\n+  // Extract text content using textBetween which handles text across different nodes/marks\n+  const text = $position.doc.textBetween(paragraphStart, $position.pos, \"\\0\", \"\\0\");\n+\n+  if (!text) {\n+    return null;\n+  }\n+\n+  const textFrom = paragraphStart;\n+  const match = Array.from(text.matchAll(regexp)).pop();\n+\n+  if (!match || match.input === undefined || match.index === undefined) {\n+    return null;\n+  }\n+\n+  // JavaScript doesn't have lookbehinds. This hacks a check that first character\n+  // is a space or the start of the line\n+  const matchPrefix = match.input.slice(Math.max(0, match.index - 1), match.index);\n+  const matchPrefixIsAllowed = new RegExp(`^[${allowedPrefixes?.join(\"\")}]?$`).test(matchPrefix);\n+\n+  if (allowedPrefixes && allowedPrefixes.length > 0 && !matchPrefixIsAllowed) {\n+    return null;\n+  }\n+\n+  // The absolute position of the match in the document\n+  const from = textFrom + match.index;\n+  let to = from + match[0].length;\n+\n+  // Edge case handling; if spaces are allowed and we're directly in between\n+  // two triggers\n+  if (allowSpaces && suffix.test(text.slice(to - 1, to + 1))) {\n+    match[0] += \" \";\n+    to += 1;\n+  }\n+\n+  // If the $position is located within the matched substring, return that range\n+  if (from < $position.pos && to >= $position.pos) {\n+    return {\n+      range: {\n+        from,\n+        to,\n+      },\n+      query: match[0].slice(char.length),\n+      text: match[0],\n+    };\n+  }\n+\n+  return null;\n+}\n"
        }
      ]
    },
    {
      "id": "upgrade-tiptap",
      "sha": "5c22a6cecc6aeef17a64e86f9d5511081e0b12bd",
      "parentSha": "4c3af7f8a14c44de8709a67677d5416944873790",
      "spec": "Implement a TipTap 2.22+ upgrade and align custom NodeView typings and related utilities across the editor package.\n\nDependencies\n- Root package.json: add prosemirror-view at version 1.40.0 under dependencies (to match new TipTap/PM peer constraints).\n- apps/live/package.json: bump @tiptap/core and @tiptap/html to ^2.22.3.\n- packages/editor/package.json:\n  - Bump TipTap packages to ^2.22.3: @tiptap/core, @tiptap/extension-blockquote, @tiptap/extension-character-count, @tiptap/extension-collaboration, @tiptap/extension-image, @tiptap/extension-list-item, @tiptap/extension-mention, @tiptap/extension-placeholder, @tiptap/extension-task-item, @tiptap/extension-task-list, @tiptap/extension-text-align, @tiptap/extension-text-style, @tiptap/extension-underline, @tiptap/html, @tiptap/pm, @tiptap/react, @tiptap/starter-kit, @tiptap/suggestion.\n  - Keep @tiptap/extension-emoji at a compatible version (already ^2.22.3).\n  - Remove prosemirror-utils if listed.\n\nNodeView typing and renderer alignment\n- Callout NodeView\n  - packages/editor/src/core/extensions/callout/block.tsx: define and export CustomCalloutNodeViewProps (extends NodeViewProps with node.attrs typed as TCalloutBlockAttributes). Update CustomCalloutBlock to React.FC<CustomCalloutNodeViewProps>.\n  - packages/editor/src/core/extensions/callout/extension.tsx and read-only-extension.tsx:\n    - Change imports to import { CustomCalloutBlock, CustomCalloutNodeViewProps } from \"@/extensions/callout\" (avoid barrel that hides types).\n    - In addNodeView, wrap ReactNodeViewRenderer with a render function that spreads props and passes node as props.node cast to CustomCalloutNodeViewProps[\"node\"].\n\n- Custom Image NodeView\n  - packages/editor/src/core/extensions/custom-image/extension.tsx (rename to .tsx if needed): import { CustomImageNodeView, CustomImageNodeViewProps } from \"./components/node-view\"; in addNodeView, wrap ReactNodeViewRenderer with a function that spreads props and passes a node prop typed as CustomImageNodeViewProps[\"node\"].\n  - packages/editor/src/core/extensions/image/extension.tsx: import CustomImageNodeView and CustomImageNodeViewProps from ../custom-image/components/node-view; wrap ReactNodeViewRenderer in the same way as above.\n\n- Mentions NodeView\n  - packages/editor/src/core/extensions/mentions/mention-node-view.tsx: export MentionNodeViewProps (extends NodeViewProps with attrs typed as TMentionComponentAttributes) and type MentionNodeView as React.FC<MentionNodeViewProps>.\n  - packages/editor/src/core/extensions/mentions/extension.tsx: import { MentionNodeView, MentionNodeViewProps }; in addNodeView wrap ReactNodeViewRenderer to pass node typed as MentionNodeViewProps[\"node\"].\n\nSlash commands behavior\n- packages/editor/src/core/extensions/slash-commands/root.tsx: allow slash commands to activate in tables by removing the guard that returns false when editor.isActive(CORE_EXTENSIONS.TABLE).\n\nHelper and utils typing clean-up\n- packages/editor/src/core/helpers/editor-commands.ts: change to type-only import for Editor and Range from @tiptap/core (import type { Editor, Range }), and remove ts-expect-error comments; ensure all toggle methods are invoked via chain().focus() consistently without ts-ignore comments.\n- packages/editor/src/core/helpers/yjs-utils.ts: remove ts-expect-error comments around getSchema, generateJSON, and generateHTML calls; keep using the extension lists to produce schemas/content.\n- packages/editor/src/core/extensions/extensions.ts and read-only-extensions.ts: remove stale ts-expect-error comments around returning Extensions arrays.\n\nDrag handle plugin robustness\n- packages/editor/src/core/plugins/drag-handle.ts:\n  - Update getScrollParent signature to accept HTMLElement | SVGElement | null and return Element | null; add an early return if the input node is null.\n  - Ensure dragHandleElement is declared once and handler functions (handleClick, handleDragStart, handleDragEnd) are organized so there is no reference before assignment; preserve existing behavior (including scroll loop and drag state) and class toggling.\n\nPathing and imports\n- Ensure callout extensions import from \"@/extensions/callout\" rather than a broader barrel module to access the new CustomCalloutNodeViewProps type.\n\nGeneral\n- Ensure all changes compile with TipTap v2.22+ without any @ts-expect-error comments related to TipTap types.\n- No runtime behavior changes other than: enabling slash commands inside tables and the drag-handle null-guard; NodeView rendering must remain functionally identical while properly typed.\n",
      "prompt": "Upgrade the editor to the latest TipTap (v2.22+) and align our custom NodeViews and helpers with the updated types. Ensure all custom NodeViews (callout, image, and mentions) expose explicit prop types for their node attrs and use ReactNodeViewRenderer with a wrapper that passes a correctly typed node prop. Remove old TipTap type workarounds and ts-expect-error comments in editor helpers and extension aggregators, and add a null guard to the drag-handles getScrollParent to avoid crashes. Also allow slash commands to activate inside tables by dropping the table-only guard. Update editor and live app dependencies accordingly so the project compiles cleanly against TipTap 2.22+ without type suppressions.",
      "supplementalFiles": [
        "packages/editor/src/core/extensions/custom-image/components/node-view.tsx",
        "packages/editor/src/core/extensions/callout/extension-config.ts",
        "packages/editor/src/core/extensions/callout/index.ts",
        "packages/editor/src/core/extensions/callout/types.ts",
        "packages/editor/src/core/extensions/mentions/extension-config.ts",
        "packages/editor/src/core/extensions/mentions/types.ts",
        "packages/editor/src/core/extensions/custom-image/extension-config.ts",
        "packages/editor/src/core/helpers/insert-empty-paragraph-at-node-boundary.ts",
        "packages/editor/src/core/constants/extension.ts",
        "packages/editor/tsconfig.json"
      ],
      "fileDiffs": [
        {
          "path": "apps/live/package.json",
          "status": "modified",
          "diff": "Index: apps/live/package.json\n===================================================================\n--- apps/live/package.json\t4c3af7f (parent)\n+++ apps/live/package.json\t5c22a6c (commit)\n@@ -25,10 +25,10 @@\n     \"@hocuspocus/extension-redis\": \"^2.15.0\",\n     \"@hocuspocus/server\": \"^2.15.0\",\n     \"@plane/editor\": \"*\",\n     \"@plane/types\": \"*\",\n-    \"@tiptap/core\": \"2.10.4\",\n-    \"@tiptap/html\": \"2.11.0\",\n+    \"@tiptap/core\": \"^2.22.3\",\n+    \"@tiptap/html\": \"^2.22.3\",\n     \"axios\": \"^1.8.3\",\n     \"compression\": \"1.8.1\",\n     \"cors\": \"^2.8.5\",\n     \"dotenv\": \"^16.4.5\",\n"
        },
        {
          "path": "package.json",
          "status": "modified",
          "diff": "Index: package.json\n===================================================================\n--- package.json\t4c3af7f (parent)\n+++ package.json\t5c22a6c (commit)\n@@ -28,8 +28,9 @@\n     \"esbuild\": \"0.25.0\",\n     \"@babel/helpers\": \"7.26.10\",\n     \"@babel/runtime\": \"7.26.10\",\n     \"chokidar\": \"3.6.0\",\n-    \"tar-fs\": \"3.0.9\"\n+    \"tar-fs\": \"3.0.9\",\n+    \"prosemirror-view\": \"1.40.0\"\n   },\n   \"packageManager\": \"yarn@1.22.22\"\n }\n"
        },
        {
          "path": "packages/editor/package.json",
          "status": "modified",
          "diff": "Index: packages/editor/package.json\n===================================================================\n--- packages/editor/package.json\t4c3af7f (parent)\n+++ packages/editor/package.json\t5c22a6c (commit)\n@@ -44,35 +44,33 @@\n     \"@plane/hooks\": \"*\",\n     \"@plane/types\": \"*\",\n     \"@plane/ui\": \"*\",\n     \"@plane/utils\": \"*\",\n-    \"@tiptap/core\": \"2.10.4\",\n-    \"@tiptap/extension-blockquote\": \"2.10.4\",\n-    \"@tiptap/extension-character-count\": \"2.11.0\",\n-    \"@tiptap/extension-collaboration\": \"2.11.0\",\n+    \"@tiptap/core\": \"^2.22.3\",\n+    \"@tiptap/extension-blockquote\": \"^2.22.3\",\n+    \"@tiptap/extension-character-count\": \"^2.22.3\",\n+    \"@tiptap/extension-collaboration\": \"^2.22.3\",\n     \"@tiptap/extension-emoji\": \"^2.22.3\",\n-    \"@tiptap/extension-image\": \"2.11.0\",\n-    \"@tiptap/extension-list-item\": \"2.11.0\",\n-    \"@tiptap/extension-mention\": \"2.11.0\",\n-    \"@tiptap/extension-placeholder\": \"2.11.0\",\n-    \"@tiptap/extension-task-item\": \"2.11.0\",\n-    \"@tiptap/extension-task-list\": \"2.11.0\",\n-    \"@tiptap/extension-text-align\": \"2.11.0\",\n-    \"@tiptap/extension-text-style\": \"2.11.0\",\n-    \"@tiptap/extension-underline\": \"2.11.0\",\n-    \"@tiptap/html\": \"2.11.0\",\n-    \"@tiptap/pm\": \"2.11.0\",\n-    \"@tiptap/react\": \"2.11.0\",\n-    \"@tiptap/starter-kit\": \"2.11.0\",\n-    \"@tiptap/suggestion\": \"2.11.0\",\n-    \"class-variance-authority\": \"^0.7.0\",\n+    \"@tiptap/extension-image\": \"^2.22.3\",\n+    \"@tiptap/extension-list-item\": \"^2.22.3\",\n+    \"@tiptap/extension-mention\": \"^2.22.3\",\n+    \"@tiptap/extension-placeholder\": \"^2.22.3\",\n+    \"@tiptap/extension-task-item\": \"^2.22.3\",\n+    \"@tiptap/extension-task-list\": \"^2.22.3\",\n+    \"@tiptap/extension-text-align\": \"^2.22.3\",\n+    \"@tiptap/extension-text-style\": \"^2.22.3\",\n+    \"@tiptap/extension-underline\": \"^2.22.3\",\n+    \"@tiptap/html\": \"^2.22.3\",\n+    \"@tiptap/pm\": \"^2.22.3\",\n+    \"@tiptap/react\": \"^2.22.3\",\n+    \"@tiptap/starter-kit\": \"^2.22.3\",\n+    \"@tiptap/suggestion\": \"^2.22.3\",\n     \"highlight.js\": \"^11.8.0\",\n     \"jsx-dom-cjs\": \"^8.0.3\",\n     \"linkifyjs\": \"^4.1.3\",\n     \"lowlight\": \"^3.0.0\",\n     \"lucide-react\": \"^0.469.0\",\n     \"prosemirror-codemark\": \"^0.4.2\",\n-    \"prosemirror-utils\": \"^1.2.2\",\n     \"tippy.js\": \"^6.3.7\",\n     \"tiptap-markdown\": \"^0.8.10\",\n     \"uuid\": \"^10.0.0\",\n     \"y-indexeddb\": \"^9.0.12\",\n"
        },
        {
          "path": "packages/editor/src/core/extensions/callout/block.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/callout/block.tsx\n===================================================================\n--- packages/editor/src/core/extensions/callout/block.tsx\t4c3af7f (parent)\n+++ packages/editor/src/core/extensions/callout/block.tsx\t5c22a6c (commit)\n@@ -9,16 +9,16 @@\n import { EAttributeNames, TCalloutBlockAttributes } from \"./types\";\n // utils\n import { updateStoredBackgroundColor } from \"./utils\";\n \n-type Props = NodeViewProps & {\n+export type CustomCalloutNodeViewProps = NodeViewProps & {\n   node: NodeViewProps[\"node\"] & {\n     attrs: TCalloutBlockAttributes;\n   };\n   updateAttributes: (attrs: Partial<TCalloutBlockAttributes>) => void;\n };\n \n-export const CustomCalloutBlock: React.FC<Props> = (props) => {\n+export const CustomCalloutBlock: React.FC<CustomCalloutNodeViewProps> = (props) => {\n   const { editor, node, updateAttributes } = props;\n   // states\n   const [isEmojiPickerOpen, setIsEmojiPickerOpen] = useState(false);\n   const [isColorPickerOpen, setIsColorPickerOpen] = useState(false);\n"
        },
        {
          "path": "packages/editor/src/core/extensions/callout/extension.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/callout/extension.tsx\n===================================================================\n--- packages/editor/src/core/extensions/callout/extension.tsx\t4c3af7f (parent)\n+++ packages/editor/src/core/extensions/callout/extension.tsx\t5c22a6c (commit)\n@@ -1,7 +1,7 @@\n import { findParentNodeClosestToPos, Predicate, ReactNodeViewRenderer } from \"@tiptap/react\";\n // extensions\n-import { CustomCalloutBlock } from \"@/extensions\";\n+import { CustomCalloutBlock, CustomCalloutNodeViewProps } from \"@/extensions/callout\";\n // helpers\n import { insertEmptyParagraphAtNodeBoundaries } from \"@/helpers/insert-empty-paragraph-at-node-boundary\";\n // config\n import { CustomCalloutExtensionConfig } from \"./extension-config\";\n@@ -62,7 +62,9 @@\n     };\n   },\n \n   addNodeView() {\n-    return ReactNodeViewRenderer(CustomCalloutBlock);\n+    return ReactNodeViewRenderer((props) => (\n+      <CustomCalloutBlock {...props} node={props.node as CustomCalloutNodeViewProps[\"node\"]} />\n+    ));\n   },\n });\n"
        },
        {
          "path": "packages/editor/src/core/extensions/callout/read-only-extension.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/callout/read-only-extension.tsx\n===================================================================\n--- packages/editor/src/core/extensions/callout/read-only-extension.tsx\t4c3af7f (parent)\n+++ packages/editor/src/core/extensions/callout/read-only-extension.tsx\t5c22a6c (commit)\n@@ -1,14 +1,16 @@\n import { ReactNodeViewRenderer } from \"@tiptap/react\";\n // extensions\n-import { CustomCalloutBlock } from \"@/extensions\";\n+import { CustomCalloutBlock, CustomCalloutNodeViewProps } from \"@/extensions/callout\";\n // config\n import { CustomCalloutExtensionConfig } from \"./extension-config\";\n \n export const CustomCalloutReadOnlyExtension = CustomCalloutExtensionConfig.extend({\n   selectable: false,\n   draggable: false,\n \n   addNodeView() {\n-    return ReactNodeViewRenderer(CustomCalloutBlock);\n+    return ReactNodeViewRenderer((props) => (\n+      <CustomCalloutBlock {...props} node={props.node as CustomCalloutNodeViewProps[\"node\"]} />\n+    ));\n   },\n });\n"
        },
        {
          "path": "packages/editor/src/core/extensions/custom-image/extension.tsx",
          "status": "renamed",
          "oldPath": "packages/editor/src/core/extensions/custom-image/extension.ts",
          "diff": "===================================================================\n--- packages/editor/src/core/extensions/custom-image/extension.ts\t4c3af7f (parent)\n+++ packages/editor/src/core/extensions/custom-image/extension.tsx\t5c22a6c (commit)\n@@ -7,9 +7,9 @@\n import { insertEmptyParagraphAtNodeBoundaries } from \"@/helpers/insert-empty-paragraph-at-node-boundary\";\n // types\n import type { TFileHandler, TReadOnlyFileHandler } from \"@/types\";\n // local imports\n-import { CustomImageNodeView } from \"./components/node-view\";\n+import { CustomImageNodeView, CustomImageNodeViewProps } from \"./components/node-view\";\n import { CustomImageExtensionConfig } from \"./extension-config\";\n import { getImageComponentImageFileMap } from \"./utils\";\n \n type Props = {\n@@ -115,8 +115,10 @@\n       };\n     },\n \n     addNodeView() {\n-      return ReactNodeViewRenderer(CustomImageNodeView);\n+      return ReactNodeViewRenderer((props) => (\n+        <CustomImageNodeView {...props} node={props.node as CustomImageNodeViewProps[\"node\"]} />\n+      ));\n     },\n   });\n };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/extensions.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/extensions.ts\n===================================================================\n--- packages/editor/src/core/extensions/extensions.ts\t4c3af7f (parent)\n+++ packages/editor/src/core/extensions/extensions.ts\t5c22a6c (commit)\n@@ -121,7 +121,6 @@\n       })\n     );\n   }\n \n-  // @ts-expect-error tiptap types are incorrect\n   return extensions;\n };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/image/extension.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/image/extension.tsx\n===================================================================\n--- packages/editor/src/core/extensions/image/extension.tsx\t4c3af7f (parent)\n+++ packages/editor/src/core/extensions/image/extension.tsx\t5c22a6c (commit)\n@@ -3,9 +3,9 @@\n import { insertEmptyParagraphAtNodeBoundaries } from \"@/helpers/insert-empty-paragraph-at-node-boundary\";\n // types\n import type { TFileHandler, TReadOnlyFileHandler } from \"@/types\";\n // local imports\n-import { CustomImageNodeView } from \"../custom-image/components/node-view\";\n+import { CustomImageNodeView, CustomImageNodeViewProps } from \"../custom-image/components/node-view\";\n import { ImageExtensionConfig } from \"./extension-config\";\n \n export type ImageExtensionStorage = {\n   deletedImageSet: Map<string, boolean>;\n@@ -46,8 +46,10 @@\n     },\n \n     // render custom image node\n     addNodeView() {\n-      return ReactNodeViewRenderer(CustomImageNodeView);\n+      return ReactNodeViewRenderer((props) => (\n+        <CustomImageNodeView {...props} node={props.node as CustomImageNodeViewProps[\"node\"]} />\n+      ));\n     },\n   });\n };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/mentions/extension.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/mentions/extension.tsx\n===================================================================\n--- packages/editor/src/core/extensions/mentions/extension.tsx\t4c3af7f (parent)\n+++ packages/editor/src/core/extensions/mentions/extension.tsx\t5c22a6c (commit)\n@@ -3,9 +3,9 @@\n import { TMentionHandler } from \"@/types\";\n // extension config\n import { CustomMentionExtensionConfig } from \"./extension-config\";\n // node view\n-import { MentionNodeView } from \"./mention-node-view\";\n+import { MentionNodeView, MentionNodeViewProps } from \"./mention-node-view\";\n // utils\n import { renderMentionsDropdown } from \"./utils\";\n \n export const CustomMentionExtension = (props: TMentionHandler) => {\n@@ -19,9 +19,11 @@\n       };\n     },\n \n     addNodeView() {\n-      return ReactNodeViewRenderer(MentionNodeView);\n+      return ReactNodeViewRenderer((props) => (\n+        <MentionNodeView {...props} node={props.node as MentionNodeViewProps[\"node\"]} />\n+      ));\n     },\n   }).configure({\n     suggestion: {\n       render: renderMentionsDropdown({\n"
        },
        {
          "path": "packages/editor/src/core/extensions/mentions/mention-node-view.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/mentions/mention-node-view.tsx\n===================================================================\n--- packages/editor/src/core/extensions/mentions/mention-node-view.tsx\t4c3af7f (parent)\n+++ packages/editor/src/core/extensions/mentions/mention-node-view.tsx\t5c22a6c (commit)\n@@ -3,19 +3,20 @@\n import { TMentionExtensionOptions } from \"./extension-config\";\n // extension types\n import { EMentionComponentAttributeNames, TMentionComponentAttributes } from \"./types\";\n \n-type Props = NodeViewProps & {\n+export type MentionNodeViewProps = NodeViewProps & {\n   node: NodeViewProps[\"node\"] & {\n     attrs: TMentionComponentAttributes;\n   };\n };\n \n-export const MentionNodeView = (props: Props) => {\n+export const MentionNodeView: React.FC<MentionNodeViewProps> = (props) => {\n   const {\n     extension,\n     node: { attrs },\n   } = props;\n+\n   return (\n     <NodeViewWrapper className=\"mention-component inline w-fit\">\n       {(extension.options as TMentionExtensionOptions).renderComponent({\n         entity_identifier: attrs[EMentionComponentAttributeNames.ENTITY_IDENTIFIER] ?? \"\",\n"
        },
        {
          "path": "packages/editor/src/core/extensions/read-only-extensions.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/read-only-extensions.ts\n===================================================================\n--- packages/editor/src/core/extensions/read-only-extensions.ts\t4c3af7f (parent)\n+++ packages/editor/src/core/extensions/read-only-extensions.ts\t5c22a6c (commit)\n@@ -97,7 +97,6 @@\n       })\n     );\n   }\n \n-  // @ts-expect-error tiptap types are incorrect\n   return extensions;\n };\n"
        },
        {
          "path": "packages/editor/src/core/extensions/slash-commands/root.tsx",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/extensions/slash-commands/root.tsx\n===================================================================\n--- packages/editor/src/core/extensions/slash-commands/root.tsx\t4c3af7f (parent)\n+++ packages/editor/src/core/extensions/slash-commands/root.tsx\t5c22a6c (commit)\n@@ -39,12 +39,8 @@\n           if (blockType === CORE_EXTENSIONS.CODE_BLOCK) {\n             return false;\n           }\n \n-          if (editor.isActive(CORE_EXTENSIONS.TABLE)) {\n-            return false;\n-          }\n-\n           return true;\n         },\n       },\n     };\n"
        },
        {
          "path": "packages/editor/src/core/helpers/editor-commands.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/helpers/editor-commands.ts\n===================================================================\n--- packages/editor/src/core/helpers/editor-commands.ts\t4c3af7f (parent)\n+++ packages/editor/src/core/helpers/editor-commands.ts\t5c22a6c (commit)\n@@ -1,5 +1,5 @@\n-import { Editor, Range } from \"@tiptap/core\";\n+import type { Editor, Range } from \"@tiptap/core\";\n // constants\n import { CORE_EXTENSIONS } from \"@/constants/extension\";\n // extensions\n import { replaceCodeWithText } from \"@/extensions/code/utils/replace-code-block-with-text\";\n@@ -13,23 +13,18 @@\n };\n \n export const toggleHeading = (editor: Editor, level: 1 | 2 | 3 | 4 | 5 | 6, range?: Range) => {\n   if (range) editor.chain().focus().deleteRange(range).setNode(CORE_EXTENSIONS.HEADING, { level }).run();\n-  // @ts-expect-error tiptap types are incorrect\n   else editor.chain().focus().toggleHeading({ level }).run();\n };\n \n export const toggleBold = (editor: Editor, range?: Range) => {\n-  // @ts-expect-error tiptap types are incorrect\n   if (range) editor.chain().focus().deleteRange(range).toggleBold().run();\n-  // @ts-expect-error tiptap types are incorrect\n   else editor.chain().focus().toggleBold().run();\n };\n \n export const toggleItalic = (editor: Editor, range?: Range) => {\n-  // @ts-expect-error tiptap types are incorrect\n   if (range) editor.chain().focus().deleteRange(range).toggleItalic().run();\n-  // @ts-expect-error tiptap types are incorrect\n   else editor.chain().focus().toggleItalic().run();\n };\n \n export const toggleUnderline = (editor: Editor, range?: Range) => {\n@@ -66,18 +61,14 @@\n   }\n };\n \n export const toggleOrderedList = (editor: Editor, range?: Range) => {\n-  // @ts-expect-error tiptap types are incorrect\n   if (range) editor.chain().focus().deleteRange(range).toggleOrderedList().run();\n-  // @ts-expect-error tiptap types are incorrect\n   else editor.chain().focus().toggleOrderedList().run();\n };\n \n export const toggleBulletList = (editor: Editor, range?: Range) => {\n-  // @ts-expect-error tiptap types are incorrect\n   if (range) editor.chain().focus().deleteRange(range).toggleBulletList().run();\n-  // @ts-expect-error tiptap types are incorrect\n   else editor.chain().focus().toggleBulletList().run();\n };\n \n export const toggleTaskList = (editor: Editor, range?: Range) => {\n@@ -85,11 +76,9 @@\n   else editor.chain().focus().toggleTaskList().run();\n };\n \n export const toggleStrike = (editor: Editor, range?: Range) => {\n-  // @ts-expect-error tiptap types are incorrect\n   if (range) editor.chain().focus().deleteRange(range).toggleStrike().run();\n-  // @ts-expect-error tiptap types are incorrect\n   else editor.chain().focus().toggleStrike().run();\n };\n \n export const toggleBlockquote = (editor: Editor, range?: Range) => {\n"
        },
        {
          "path": "packages/editor/src/core/helpers/yjs-utils.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/helpers/yjs-utils.ts\n===================================================================\n--- packages/editor/src/core/helpers/yjs-utils.ts\t4c3af7f (parent)\n+++ packages/editor/src/core/helpers/yjs-utils.ts\t5c22a6c (commit)\n@@ -12,11 +12,9 @@\n // editor extension configs\n const RICH_TEXT_EDITOR_EXTENSIONS = CoreEditorExtensionsWithoutProps;\n const DOCUMENT_EDITOR_EXTENSIONS = [...CoreEditorExtensionsWithoutProps, ...DocumentEditorExtensionsWithoutProps];\n // editor schemas\n-// @ts-expect-error tiptap types are incorrect\n const richTextEditorSchema = getSchema(RICH_TEXT_EDITOR_EXTENSIONS);\n-// @ts-expect-error tiptap types are incorrect\n const documentEditorSchema = getSchema(DOCUMENT_EDITOR_EXTENSIONS);\n \n /**\n  * @description apply updates to a doc and return the updated doc in binary format\n@@ -56,9 +54,8 @@\n  * @returns {Uint8Array}\n  */\n export const getBinaryDataFromRichTextEditorHTMLString = (descriptionHTML: string): Uint8Array => {\n   // convert HTML to JSON\n-  // @ts-expect-error tiptap types are incorrect\n   const contentJSON = generateJSON(descriptionHTML ?? \"<p></p>\", RICH_TEXT_EDITOR_EXTENSIONS);\n   // convert JSON to Y.Doc format\n   const transformedData = prosemirrorJSONToYDoc(richTextEditorSchema, contentJSON, \"default\");\n   // convert Y.Doc to Uint8Array format\n@@ -72,9 +69,8 @@\n  * @returns {Uint8Array}\n  */\n export const getBinaryDataFromDocumentEditorHTMLString = (descriptionHTML: string): Uint8Array => {\n   // convert HTML to JSON\n-  // @ts-expect-error tiptap types are incorrect\n   const contentJSON = generateJSON(descriptionHTML ?? \"<p></p>\", DOCUMENT_EDITOR_EXTENSIONS);\n   // convert JSON to Y.Doc format\n   const transformedData = prosemirrorJSONToYDoc(documentEditorSchema, contentJSON, \"default\");\n   // convert Y.Doc to Uint8Array format\n@@ -101,9 +97,8 @@\n   // convert to JSON\n   const type = yDoc.getXmlFragment(\"default\");\n   const contentJSON = yXmlFragmentToProseMirrorRootNode(type, richTextEditorSchema).toJSON();\n   // convert to HTML\n-  // @ts-expect-error tiptap types are incorrect\n   const contentHTML = generateHTML(contentJSON, RICH_TEXT_EDITOR_EXTENSIONS);\n \n   return {\n     contentBinaryEncoded: base64Data,\n@@ -131,9 +126,8 @@\n   // convert to JSON\n   const type = yDoc.getXmlFragment(\"default\");\n   const contentJSON = yXmlFragmentToProseMirrorRootNode(type, documentEditorSchema).toJSON();\n   // convert to HTML\n-  // @ts-expect-error tiptap types are incorrect\n   const contentHTML = generateHTML(contentJSON, DOCUMENT_EDITOR_EXTENSIONS);\n \n   return {\n     contentBinaryEncoded: base64Data,\n"
        },
        {
          "path": "packages/editor/src/core/plugins/drag-handle.ts",
          "status": "modified",
          "diff": "Index: packages/editor/src/core/plugins/drag-handle.ts\n===================================================================\n--- packages/editor/src/core/plugins/drag-handle.ts\t4c3af7f (parent)\n+++ packages/editor/src/core/plugins/drag-handle.ts\t5c22a6c (commit)\n@@ -64,9 +64,11 @@\n     return value === \"auto\" || value === \"scroll\";\n   });\n };\n \n-const getScrollParent = (node: HTMLElement | SVGElement) => {\n+const getScrollParent = (node: HTMLElement | SVGElement | null): Element | null => {\n+  if (!node) return null;\n+\n   if (scrollParentCache.has(node)) {\n     return scrollParentCache.get(node);\n   }\n \n@@ -136,35 +138,10 @@\n   let scrollAnimationFrame: number | null = null;\n   let isDraggedOutsideWindow: \"top\" | \"bottom\" | boolean = false;\n   let isMouseInsideWhileDragging = false;\n   let currentScrollSpeed = 0;\n+  let dragHandleElement: HTMLElement | null = null;\n \n-  const handleClick = (event: MouseEvent, view: EditorView) => {\n-    handleNodeSelection(event, view, false, options);\n-  };\n-\n-  const handleDragStart = (event: DragEvent, view: EditorView) => {\n-    const { listType: listTypeFromDragStart } = handleNodeSelection(event, view, true, options) ?? {};\n-    if (listTypeFromDragStart) {\n-      listType = listTypeFromDragStart;\n-    }\n-    isDragging = true;\n-    lastClientY = event.clientY;\n-    scroll();\n-  };\n-\n-  const handleDragEnd = <TEvent extends DragEvent | FocusEvent>(event: TEvent, view?: EditorView) => {\n-    event.preventDefault();\n-    isDragging = false;\n-    isMouseInsideWhileDragging = false;\n-    if (scrollAnimationFrame) {\n-      cancelAnimationFrame(scrollAnimationFrame);\n-      scrollAnimationFrame = null;\n-    }\n-\n-    view?.dom.classList.remove(\"dragging\");\n-  };\n-\n   function scroll() {\n     if (!isDragging) {\n       currentScrollSpeed = 0;\n       return;\n@@ -198,9 +175,34 @@\n \n     scrollAnimationFrame = requestAnimationFrame(scroll);\n   }\n \n-  let dragHandleElement: HTMLElement | null = null;\n+  const handleClick = (event: MouseEvent, view: EditorView) => {\n+    handleNodeSelection(event, view, false, options);\n+  };\n+\n+  const handleDragStart = (event: DragEvent, view: EditorView) => {\n+    const { listType: listTypeFromDragStart } = handleNodeSelection(event, view, true, options) ?? {};\n+    if (listTypeFromDragStart) {\n+      listType = listTypeFromDragStart;\n+    }\n+    isDragging = true;\n+    lastClientY = event.clientY;\n+    scroll();\n+  };\n+\n+  const handleDragEnd = <TEvent extends DragEvent | FocusEvent>(event: TEvent, view?: EditorView) => {\n+    event.preventDefault();\n+    isDragging = false;\n+    isMouseInsideWhileDragging = false;\n+    if (scrollAnimationFrame) {\n+      cancelAnimationFrame(scrollAnimationFrame);\n+      scrollAnimationFrame = null;\n+    }\n+\n+    view?.dom.classList.remove(\"dragging\");\n+  };\n+\n   // drag handle view actions\n   const showDragHandle = () => dragHandleElement?.classList.remove(\"drag-handle-hidden\");\n   const hideDragHandle = () => {\n     if (!dragHandleElement?.classList.contains(\"drag-handle-hidden\"))\n"
        },
        {
          "path": "yarn.lock",
          "status": "modified",
          "diff": "Index: yarn.lock\n===================================================================\n--- yarn.lock\t4c3af7f (parent)\n+++ yarn.lock\t5c22a6c (commit)\n@@ -313,26 +313,26 @@\n   resolved \"https://registry.yarnpkg.com/@date-fns/tz/-/tz-1.2.0.tgz#81cb3211693830babaf3b96aff51607e143030a6\"\n   integrity sha512-LBrd7MiJZ9McsOgxqWX7AaxrDjcFVjWH/tIKJd7pnR7McaslGYOP1QmmiBXdJH/H/yLCT+rcQ7FaPBUxRGUtrg==\n \n \"@emnapi/core@^1.4.3\":\n-  version \"1.4.4\"\n-  resolved \"https://registry.yarnpkg.com/@emnapi/core/-/core-1.4.4.tgz#76620673f3033626c6d79b1420d69f06a6bb153c\"\n-  integrity sha512-A9CnAbC6ARNMKcIcrQwq6HeHCjpcBZ5wSx4U01WXCqEKlrzB9F9315WDNHkrs2xbx7YjjSxbUYxuN6EQzpcY2g==\n+  version \"1.4.5\"\n+  resolved \"https://registry.yarnpkg.com/@emnapi/core/-/core-1.4.5.tgz#bfbb0cbbbb9f96ec4e2c4fd917b7bbe5495ceccb\"\n+  integrity sha512-XsLw1dEOpkSX/WucdqUhPWP7hDxSvZiY+fsUC14h+FtQ2Ifni4znbBt8punRX+Uj2JG/uDb8nEHVKvrVlvdZ5Q==\n   dependencies:\n-    \"@emnapi/wasi-threads\" \"1.0.3\"\n+    \"@emnapi/wasi-threads\" \"1.0.4\"\n     tslib \"^2.4.0\"\n \n \"@emnapi/runtime@^1.4.3\":\n-  version \"1.4.4\"\n-  resolved \"https://registry.yarnpkg.com/@emnapi/runtime/-/runtime-1.4.4.tgz#19a8f00719c51124e2d0fbf4aaad3fa7b0c92524\"\n-  integrity sha512-hHyapA4A3gPaDCNfiqyZUStTMqIkKRshqPIuDOXv1hcBnD4U3l8cP0T1HMCfGRxQ6V64TGCcoswChANyOAwbQg==\n+  version \"1.4.5\"\n+  resolved \"https://registry.yarnpkg.com/@emnapi/runtime/-/runtime-1.4.5.tgz#c67710d0661070f38418b6474584f159de38aba9\"\n+  integrity sha512-++LApOtY0pEEz1zrd9vy1/zXVaVJJ/EbAF3u0fXIzPJEDtnITsBGbbK0EkM72amhl/R5b+5xx0Y/QhcVOpuulg==\n   dependencies:\n     tslib \"^2.4.0\"\n \n-\"@emnapi/wasi-threads@1.0.3\":\n-  version \"1.0.3\"\n-  resolved \"https://registry.yarnpkg.com/@emnapi/wasi-threads/-/wasi-threads-1.0.3.tgz#83fa228bde0e71668aad6db1af4937473d1d3ab1\"\n-  integrity sha512-8K5IFFsQqF9wQNJptGbS6FNKgUTsSRYnTqNCG1vPP8jFdjSv18n2mQfJpkt2Oibo9iBEzcDnDxNwKTzC7svlJw==\n+\"@emnapi/wasi-threads@1.0.4\":\n+  version \"1.0.4\"\n+  resolved \"https://registry.yarnpkg.com/@emnapi/wasi-threads/-/wasi-threads-1.0.4.tgz#703fc094d969e273b1b71c292523b2f792862bf4\"\n+  integrity sha512-PJR+bOmMOPH8AtcTGAyYNiuJ3/Fcoj2XN/gBEWzDIKh254XO+mM9XoXHk5GNEhodxeMznbg7BlRojVbKN+gC6g==\n   dependencies:\n     tslib \"^2.4.0\"\n \n \"@emotion/babel-plugin@^11.13.5\":\n@@ -1377,107 +1377,107 @@\n   version \"3.0.0\"\n   resolved \"https://registry.yarnpkg.com/@remirror/core-constants/-/core-constants-3.0.0.tgz#96fdb89d25c62e7b6a5d08caf0ce5114370e3b8f\"\n   integrity sha512-42aWfPrimMfDKDi4YegyS7x+/0tlzaqwPQCULLanv3DMIlu96KTJR0fM5isWX2UViOqlGnX6YFgqWepcX+XMNg==\n \n-\"@rollup/rollup-android-arm-eabi@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.45.0.tgz#0592252f7550bc0ea0474bb5a22430850f92bdbd\"\n-  integrity sha512-2o/FgACbji4tW1dzXOqAV15Eu7DdgbKsF2QKcxfG4xbh5iwU7yr5RRP5/U+0asQliSYv5M4o7BevlGIoSL0LXg==\n+\"@rollup/rollup-android-arm-eabi@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.45.1.tgz#8560592f0dcf43b8cb0949af9f1d916205148d12\"\n+  integrity sha512-NEySIFvMY0ZQO+utJkgoMiCAjMrGvnbDLHvcmlA33UXJpYBCvlBEbMMtV837uCkS+plG2umfhn0T5mMAxGrlRA==\n \n-\"@rollup/rollup-android-arm64@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.45.0.tgz#00a51d1d4380cc677da80ac9da1a19e7806bf57e\"\n-  integrity sha512-PSZ0SvMOjEAxwZeTx32eI/j5xSYtDCRxGu5k9zvzoY77xUNssZM+WV6HYBLROpY5CkXsbQjvz40fBb7WPwDqtQ==\n+\"@rollup/rollup-android-arm64@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.45.1.tgz#6bfb777bbce998691b6fd3e916b05cd46392d020\"\n+  integrity sha512-ujQ+sMXJkg4LRJaYreaVx7Z/VMgBBd89wGS4qMrdtfUFZ+TSY5Rs9asgjitLwzeIbhwdEhyj29zhst3L1lKsRQ==\n \n-\"@rollup/rollup-darwin-arm64@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.45.0.tgz#6638299dd282ebde1ebdf7dc5b0f150aa6e256e5\"\n-  integrity sha512-BA4yPIPssPB2aRAWzmqzQ3y2/KotkLyZukVB7j3psK/U3nVJdceo6qr9pLM2xN6iRP/wKfxEbOb1yrlZH6sYZg==\n+\"@rollup/rollup-darwin-arm64@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.45.1.tgz#7efce10220293a22e7b7b595d05d8b8400a7bcf3\"\n+  integrity sha512-FSncqHvqTm3lC6Y13xncsdOYfxGSLnP+73k815EfNmpewPs+EyM49haPS105Rh4aF5mJKywk9X0ogzLXZzN9lA==\n \n-\"@rollup/rollup-darwin-x64@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.45.0.tgz#33e61daa0a66890059648feda78e1075d4ea1bcb\"\n-  integrity sha512-Pr2o0lvTwsiG4HCr43Zy9xXrHspyMvsvEw4FwKYqhli4FuLE5FjcZzuQ4cfPe0iUFCvSQG6lACI0xj74FDZKRA==\n+\"@rollup/rollup-darwin-x64@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.45.1.tgz#c617a8ece21050bfbea299c126767d2e70cfa79a\"\n+  integrity sha512-2/vVn/husP5XI7Fsf/RlhDaQJ7x9zjvC81anIVbr4b/f0xtSmXQTFcGIQ/B1cXIYM6h2nAhJkdMHTnD7OtQ9Og==\n \n-\"@rollup/rollup-freebsd-arm64@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.45.0.tgz#2cc4bd3ba7026cd5374e902285ce76e8fae0f6eb\"\n-  integrity sha512-lYE8LkE5h4a/+6VnnLiL14zWMPnx6wNbDG23GcYFpRW1V9hYWHAw9lBZ6ZUIrOaoK7NliF1sdwYGiVmziUF4vA==\n+\"@rollup/rollup-freebsd-arm64@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.45.1.tgz#5a6af0a9acf82162d2910933649ae24fc0ea3ecb\"\n+  integrity sha512-4g1kaDxQItZsrkVTdYQ0bxu4ZIQ32cotoQbmsAnW1jAE4XCMbcBPDirX5fyUzdhVCKgPcrwWuucI8yrVRBw2+g==\n \n-\"@rollup/rollup-freebsd-x64@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.45.0.tgz#64664ba3015deac473a5d6d6c60c068f274bf2d5\"\n-  integrity sha512-PVQWZK9sbzpvqC9Q0GlehNNSVHR+4m7+wET+7FgSnKG3ci5nAMgGmr9mGBXzAuE5SvguCKJ6mHL6vq1JaJ/gvw==\n+\"@rollup/rollup-freebsd-x64@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.45.1.tgz#ae9709463560196fc275bd0da598668a2e341023\"\n+  integrity sha512-L/6JsfiL74i3uK1Ti2ZFSNsp5NMiM4/kbbGEcOCps99aZx3g8SJMO1/9Y0n/qKlWZfn6sScf98lEOUe2mBvW9A==\n \n-\"@rollup/rollup-linux-arm-gnueabihf@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.45.0.tgz#7ab16acae3bcae863e9a9bc32038cd05e794a0ff\"\n-  integrity sha512-hLrmRl53prCcD+YXTfNvXd776HTxNh8wPAMllusQ+amcQmtgo3V5i/nkhPN6FakW+QVLoUUr2AsbtIRPFU3xIA==\n+\"@rollup/rollup-linux-arm-gnueabihf@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.45.1.tgz#6ec52661764dbd54c19d6520a403aa385a5c0fbf\"\n+  integrity sha512-RkdOTu2jK7brlu+ZwjMIZfdV2sSYHK2qR08FUWcIoqJC2eywHbXr0L8T/pONFwkGukQqERDheaGTeedG+rra6Q==\n \n-\"@rollup/rollup-linux-arm-musleabihf@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.45.0.tgz#bef91b1e924ab57e82e767dc2655264bbde7acc6\"\n-  integrity sha512-XBKGSYcrkdiRRjl+8XvrUR3AosXU0NvF7VuqMsm7s5nRy+nt58ZMB19Jdp1RdqewLcaYnpk8zeVs/4MlLZEJxw==\n+\"@rollup/rollup-linux-arm-musleabihf@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.45.1.tgz#fd33ba4a43ef8419e96811236493d19436271923\"\n+  integrity sha512-3kJ8pgfBt6CIIr1o+HQA7OZ9mp/zDk3ctekGl9qn/pRBgrRgfwiffaUmqioUGN9hv0OHv2gxmvdKOkARCtRb8Q==\n \n-\"@rollup/rollup-linux-arm64-gnu@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.45.0.tgz#0a811b16da334125f6e44570d0badf543876f49e\"\n-  integrity sha512-fRvZZPUiBz7NztBE/2QnCS5AtqLVhXmUOPj9IHlfGEXkapgImf4W9+FSkL8cWqoAjozyUzqFmSc4zh2ooaeF6g==\n+\"@rollup/rollup-linux-arm64-gnu@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.45.1.tgz#933b3d99b73c9d7bf4506cab0d5d313c7e74fd2d\"\n+  integrity sha512-k3dOKCfIVixWjG7OXTCOmDfJj3vbdhN0QYEqB+OuGArOChek22hn7Uy5A/gTDNAcCy5v2YcXRJ/Qcnm4/ma1xw==\n \n-\"@rollup/rollup-linux-arm64-musl@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.45.0.tgz#e8c166efe3cb963faaa924c7721eafbade63036f\"\n-  integrity sha512-Btv2WRZOcUGi8XU80XwIvzTg4U6+l6D0V6sZTrZx214nrwxw5nAi8hysaXj/mctyClWgesyuxbeLylCBNauimg==\n+\"@rollup/rollup-linux-arm64-musl@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.45.1.tgz#dbe9ae24ee9e97b75662fddcb69eb7f23c89280a\"\n+  integrity sha512-PmI1vxQetnM58ZmDFl9/Uk2lpBBby6B6rF4muJc65uZbxCs0EA7hhKCk2PKlmZKuyVSHAyIw3+/SiuMLxKxWog==\n \n-\"@rollup/rollup-linux-loongarch64-gnu@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-loongarch64-gnu/-/rollup-linux-loongarch64-gnu-4.45.0.tgz#239feea00fa2a1e734bdff09b8d1c90def2abbf5\"\n-  integrity sha512-Li0emNnwtUZdLwHjQPBxn4VWztcrw/h7mgLyHiEI5Z0MhpeFGlzaiBHpSNVOMB/xucjXTTcO+dhv469Djr16KA==\n+\"@rollup/rollup-linux-loongarch64-gnu@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-loongarch64-gnu/-/rollup-linux-loongarch64-gnu-4.45.1.tgz#818c5a071eec744436dbcdd76fe9c3c869dc9a8d\"\n+  integrity sha512-9UmI0VzGmNJ28ibHW2GpE2nF0PBQqsyiS4kcJ5vK+wuwGnV5RlqdczVocDSUfGX/Na7/XINRVoUgJyFIgipoRg==\n \n-\"@rollup/rollup-linux-powerpc64le-gnu@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-powerpc64le-gnu/-/rollup-linux-powerpc64le-gnu-4.45.0.tgz#1de2f926bddbf7d689a089277c1284ea6df4b6d1\"\n-  integrity sha512-sB8+pfkYx2kvpDCfd63d5ScYT0Fz1LO6jIb2zLZvmK9ob2D8DeVqrmBDE0iDK8KlBVmsTNzrjr3G1xV4eUZhSw==\n+\"@rollup/rollup-linux-powerpc64le-gnu@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-powerpc64le-gnu/-/rollup-linux-powerpc64le-gnu-4.45.1.tgz#6b8591def27d886fa147fb0340126c7d6682a7e4\"\n+  integrity sha512-7nR2KY8oEOUTD3pBAxIBBbZr0U7U+R9HDTPNy+5nVVHDXI4ikYniH1oxQz9VoB5PbBU1CZuDGHkLJkd3zLMWsg==\n \n-\"@rollup/rollup-linux-riscv64-gnu@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.45.0.tgz#28dbac643244e477a7b931feb9b475aa826f84c1\"\n-  integrity sha512-5GQ6PFhh7E6jQm70p1aW05G2cap5zMOvO0se5JMecHeAdj5ZhWEHbJ4hiKpfi1nnnEdTauDXxPgXae/mqjow9w==\n+\"@rollup/rollup-linux-riscv64-gnu@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.45.1.tgz#f1861ac4ee8da64e0b0d23853ff26fe2baa876cf\"\n+  integrity sha512-nlcl3jgUultKROfZijKjRQLUu9Ma0PeNv/VFHkZiKbXTBQXhpytS8CIj5/NfBeECZtY2FJQubm6ltIxm/ftxpw==\n \n-\"@rollup/rollup-linux-riscv64-musl@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.45.0.tgz#5d05eeaedadec3625cd50e3ca5d35ef6f96a4bf0\"\n-  integrity sha512-N/euLsBd1rekWcuduakTo/dJw6U6sBP3eUq+RXM9RNfPuWTvG2w/WObDkIvJ2KChy6oxZmOSC08Ak2OJA0UiAA==\n+\"@rollup/rollup-linux-riscv64-musl@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.45.1.tgz#320c961401a923b374e358664527b188e374e1ae\"\n+  integrity sha512-HJV65KLS51rW0VY6rvZkiieiBnurSzpzore1bMKAhunQiECPuxsROvyeaot/tcK3A3aGnI+qTHqisrpSgQrpgA==\n \n-\"@rollup/rollup-linux-s390x-gnu@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.45.0.tgz#55b0790f499fb7adc14eb074c4e46aef92915813\"\n-  integrity sha512-2l9sA7d7QdikL0xQwNMO3xURBUNEWyHVHfAsHsUdq+E/pgLTUcCE+gih5PCdmyHmfTDeXUWVhqL0WZzg0nua3g==\n+\"@rollup/rollup-linux-s390x-gnu@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.45.1.tgz#1763eed3362b50b6164d3f0947486c03cc7e616d\"\n+  integrity sha512-NITBOCv3Qqc6hhwFt7jLV78VEO/il4YcBzoMGGNxznLgRQf43VQDae0aAzKiBeEPIxnDrACiMgbqjuihx08OOw==\n \n-\"@rollup/rollup-linux-x64-gnu@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.45.0.tgz#e822632fe5b324b16bdc37149149c8c760b031fd\"\n-  integrity sha512-XZdD3fEEQcwG2KrJDdEQu7NrHonPxxaV0/w2HpvINBdcqebz1aL+0vM2WFJq4DeiAVT6F5SUQas65HY5JDqoPw==\n+\"@rollup/rollup-linux-x64-gnu@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.45.1.tgz#0d4c8d0b8f801902f0844a40a9d981a0179f4971\"\n+  integrity sha512-+E/lYl6qu1zqgPEnTrs4WysQtvc/Sh4fC2nByfFExqgYrqkKWp1tWIbe+ELhixnenSpBbLXNi6vbEEJ8M7fiHw==\n \n-\"@rollup/rollup-linux-x64-musl@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.45.0.tgz#19a3602cb8fabd7eb3087f0a1e1e01adac31bbff\"\n-  integrity sha512-7ayfgvtmmWgKWBkCGg5+xTQ0r5V1owVm67zTrsEY1008L5ro7mCyGYORomARt/OquB9KY7LpxVBZes+oSniAAQ==\n+\"@rollup/rollup-linux-x64-musl@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.45.1.tgz#ec30bb48b5fe22a3aaba98072f2d5b7139e1a8eb\"\n+  integrity sha512-a6WIAp89p3kpNoYStITT9RbTbTnqarU7D8N8F2CV+4Cl9fwCOZraLVuVFvlpsW0SbIiYtEnhCZBPLoNdRkjQFw==\n \n-\"@rollup/rollup-win32-arm64-msvc@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.45.0.tgz#42e08bf3ea4fc463fc9f199c4f0310a736f03eb1\"\n-  integrity sha512-B+IJgcBnE2bm93jEW5kHisqvPITs4ddLOROAcOc/diBgrEiQJJ6Qcjby75rFSmH5eMGrqJryUgJDhrfj942apQ==\n+\"@rollup/rollup-win32-arm64-msvc@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.45.1.tgz#27a6e48d1502e8e4bed96bedfb533738655874f2\"\n+  integrity sha512-T5Bi/NS3fQiJeYdGvRpTAP5P02kqSOpqiopwhj0uaXB6nzs5JVi2XMJb18JUSKhCOX8+UE1UKQufyD6Or48dJg==\n \n-\"@rollup/rollup-win32-ia32-msvc@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.45.0.tgz#043d25557f59d7e28dfe38ee1f60ddcb95a08124\"\n-  integrity sha512-+CXwwG66g0/FpWOnP/v1HnrGVSOygK/osUbu3wPRy8ECXjoYKjRAyfxYpDQOfghC5qPJYLPH0oN4MCOjwgdMug==\n+\"@rollup/rollup-win32-ia32-msvc@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.45.1.tgz#a2fbad3bec20ff879f3fd51720adf33692ca8f3d\"\n+  integrity sha512-lxV2Pako3ujjuUe9jiU3/s7KSrDfH6IgTSQOnDWr9aJ92YsFd7EurmClK0ly/t8dzMkDtd04g60WX6yl0sGfdw==\n \n-\"@rollup/rollup-win32-x64-msvc@4.45.0\":\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.45.0.tgz#0a7eecae41f463d6591c8fecd7a5c5087345ee36\"\n-  integrity sha512-SRf1cytG7wqcHVLrBc9VtPK4pU5wxiB/lNIkNmW2ApKXIg+RpqwHfsaEK+e7eH4A1BpI6BX/aBWXxZCIrJg3uA==\n+\"@rollup/rollup-win32-x64-msvc@4.45.1\":\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.45.1.tgz#e5085c6d13da15b4c5133cd2a6bb11f25b6bb77a\"\n+  integrity sha512-M/fKi4sasCdM8i0aWJjCSFm2qEnYRR8AMLG2kxp6wD13+tMGA4Z1tVAuHkNRjud5SW2EM3naLuK35w9twvf6aA==\n \n \"@rtsao/scc@^1.1.0\":\n   version \"1.1.0\"\n   resolved \"https://registry.yarnpkg.com/@rtsao/scc/-/scc-1.1.0.tgz#927dd2fae9bc3361403ac2c7a00c32ddce9ad7e8\"\n@@ -1800,76 +1800,76 @@\n   version \"8.6.14\"\n   resolved \"https://registry.yarnpkg.com/@storybook/theming/-/theming-8.6.14.tgz#78c6dc878f705de70c67f2b2d08b8313b985d81a\"\n   integrity sha512-r4y+LsiB37V5hzpQo+BM10PaCsp7YlZ0YcZzQP1OCkPlYXmUAFy2VvDKaFRpD8IeNPKug2u4iFm/laDEbs03dg==\n \n-\"@swc/core-darwin-arm64@1.12.11\":\n-  version \"1.12.11\"\n-  resolved \"https://registry.yarnpkg.com/@swc/core-darwin-arm64/-/core-darwin-arm64-1.12.11.tgz#684bb6e82f4704ff00eff82479df889bcbf99e8a\"\n-  integrity sha512-J19Jj9Y5x/N0loExH7W0OI9OwwoVyxutDdkyq1o/kgXyBqmmzV7Y/Q9QekI2Fm/qc5mNeAdP7aj4boY4AY/JPw==\n+\"@swc/core-darwin-arm64@1.13.1\":\n+  version \"1.13.1\"\n+  resolved \"https://registry.yarnpkg.com/@swc/core-darwin-arm64/-/core-darwin-arm64-1.13.1.tgz#a66e5bc1186f8b7402855560adc7448612b159af\"\n+  integrity sha512-zO6SW/jSMTUORPm6dUZFPUwf+EFWZsaXWMGXadRG6akCofYpoQb8pcY2QZkVr43z8TMka6BtXpyoD/DJ0iOPHQ==\n \n-\"@swc/core-darwin-x64@1.12.11\":\n-  version \"1.12.11\"\n-  resolved \"https://registry.yarnpkg.com/@swc/core-darwin-x64/-/core-darwin-x64-1.12.11.tgz#3d9ed5f7038cd22cfc46997777f82c51056fe110\"\n-  integrity sha512-PTuUQrfStQ6cjW+uprGO2lpQHy84/l0v+GqRqq8s/jdK55rFRjMfCeyf6FAR0l6saO5oNOQl+zWR1aNpj8pMQw==\n+\"@swc/core-darwin-x64@1.13.1\":\n+  version \"1.13.1\"\n+  resolved \"https://registry.yarnpkg.com/@swc/core-darwin-x64/-/core-darwin-x64-1.13.1.tgz#9c56b3d25df950bdeb080b287f2a9d8331eb08a3\"\n+  integrity sha512-8RjaTZYxrlYKE5PgzZYWSOT4mAsyhIuh30Nu4dnn/2r0Ef68iNCbvX4ynGnFMhOIhqunjQbJf+mJKpwTwdHXhw==\n \n-\"@swc/core-linux-arm-gnueabihf@1.12.11\":\n-  version \"1.12.11\"\n-  resolved \"https://registry.yarnpkg.com/@swc/core-linux-arm-gnueabihf/-/core-linux-arm-gnueabihf-1.12.11.tgz#8d97b9b55ed286af233aef702208ed3b99db0364\"\n-  integrity sha512-poxBq152HsupOtnZilenvHmxZ9a8SRj4LtfxUnkMDNOGrZR9oxbQNwEzNKfi3RXEcXz+P8c0Rai1ubBazXv8oQ==\n+\"@swc/core-linux-arm-gnueabihf@1.13.1\":\n+  version \"1.13.1\"\n+  resolved \"https://registry.yarnpkg.com/@swc/core-linux-arm-gnueabihf/-/core-linux-arm-gnueabihf-1.13.1.tgz#cb4b6f7b793d0047c3936c1e57308d5e5a6a7533\"\n+  integrity sha512-jEqK6pECs2m4BpL2JA/4CCkq04p6iFOEtVNXTisO+lJ3zwmxlnIEm9UfJZG6VSu8GS9MHRKGB0ieZ1tEdN1qDA==\n \n-\"@swc/core-linux-arm64-gnu@1.12.11\":\n-  version \"1.12.11\"\n-  resolved \"https://registry.yarnpkg.com/@swc/core-linux-arm64-gnu/-/core-linux-arm64-gnu-1.12.11.tgz#e2eb74af3b863be2464bf343ed0f56652f3df6b2\"\n-  integrity sha512-y1HNamR/D0Hc8xIE910ysyLe269UYiGaQPoLjQS0phzWFfWdMj9bHM++oydVXZ4RSWycO7KyJ3uvw4NilvyMKQ==\n+\"@swc/core-linux-arm64-gnu@1.13.1\":\n+  version \"1.13.1\"\n+  resolved \"https://registry.yarnpkg.com/@swc/core-linux-arm64-gnu/-/core-linux-arm64-gnu-1.13.1.tgz#d208622b6fdff92595d23b4aba36d73be31fffe6\"\n+  integrity sha512-PbkuIOYXO/gQbWQ7NnYIwm59ygNqmUcF8LBeoKvxhx1VtOwE+9KiTfoplOikkPLhMiTzKsd8qentTslbITIg+Q==\n \n-\"@swc/core-linux-arm64-musl@1.12.11\":\n-  version \"1.12.11\"\n-  resolved \"https://registry.yarnpkg.com/@swc/core-linux-arm64-musl/-/core-linux-arm64-musl-1.12.11.tgz#fc5093d83eba3958cd6ff6d03fb6069f0fe33456\"\n-  integrity sha512-LlBxPh/32pyQsu2emMEOFRm7poEFLsw12Y1mPY7FWZiZeptomKSOSHRzKDz9EolMiV4qhK1caP1lvW4vminYgQ==\n+\"@swc/core-linux-arm64-musl@1.13.1\":\n+  version \"1.13.1\"\n+  resolved \"https://registry.yarnpkg.com/@swc/core-linux-arm64-musl/-/core-linux-arm64-musl-1.13.1.tgz#dd306f08f277a3e3a0c223f1a22ef25be791a8dd\"\n+  integrity sha512-JaqFdBCarIBKiMu5bbAp+kWPMNGg97ej+7KzbKOzWP5pRptqKi86kCDZT3WmjPe8hNG6dvBwbm7Y8JNry5LebQ==\n \n-\"@swc/core-linux-x64-gnu@1.12.11\":\n-  version \"1.12.11\"\n-  resolved \"https://registry.yarnpkg.com/@swc/core-linux-x64-gnu/-/core-linux-x64-gnu-1.12.11.tgz#cff28bb15fd8ad85c9e85333aaa1b348cbdc2d4d\"\n-  integrity sha512-bOjiZB8O/1AzHkzjge1jqX62HGRIpOHqFUrGPfAln/NC6NR+Z2A78u3ixV7k5KesWZFhCV0YVGJL+qToL27myA==\n+\"@swc/core-linux-x64-gnu@1.13.1\":\n+  version \"1.13.1\"\n+  resolved \"https://registry.yarnpkg.com/@swc/core-linux-x64-gnu/-/core-linux-x64-gnu-1.13.1.tgz#c2a41b8065c7d9cb165cc3df5317897426091823\"\n+  integrity sha512-t4cLkku10YECDaakWUH0452WJHIZtrLPRwezt6BdoMntVMwNjvXRX7C8bGuYcKC3YxRW7enZKFpozLhQIQ37oA==\n \n-\"@swc/core-linux-x64-musl@1.12.11\":\n-  version \"1.12.11\"\n-  resolved \"https://registry.yarnpkg.com/@swc/core-linux-x64-musl/-/core-linux-x64-musl-1.12.11.tgz#10bb975d77ab88caff665e508df0978be7f1915b\"\n-  integrity sha512-4dzAtbT/m3/UjF045+33gLiHd8aSXJDoqof7gTtu4q0ZyAf7XJ3HHspz+/AvOJLVo4FHHdFcdXhmo/zi1nFn8A==\n+\"@swc/core-linux-x64-musl@1.13.1\":\n+  version \"1.13.1\"\n+  resolved \"https://registry.yarnpkg.com/@swc/core-linux-x64-musl/-/core-linux-x64-musl-1.13.1.tgz#6691322d5a2cfe5187d43370c07c7ceaaac045ed\"\n+  integrity sha512-fSMwZOaG+3ukUucbEbzz9GhzGhUhXoCPqHe9qW0/Vc2IZRp538xalygKyZynYweH5d9EHux1aj3+IO8/xBaoiA==\n \n-\"@swc/core-win32-arm64-msvc@1.12.11\":\n-  version \"1.12.11\"\n-  resolved \"https://registry.yarnpkg.com/@swc/core-win32-arm64-msvc/-/core-win32-arm64-msvc-1.12.11.tgz#66bdf65a5ba851da78bd430852414c9f72d1a5d6\"\n-  integrity sha512-h8HiwBZErKvCAmjW92JvQp0iOqm6bncU4ac5jxBGkRApabpUenNJcj3h2g5O6GL5K6T9/WhnXE5gyq/s1fhPQg==\n+\"@swc/core-win32-arm64-msvc@1.13.1\":\n+  version \"1.13.1\"\n+  resolved \"https://registry.yarnpkg.com/@swc/core-win32-arm64-msvc/-/core-win32-arm64-msvc-1.13.1.tgz#451eff0efdb79804d6983dc6f533a046a90e82a0\"\n+  integrity sha512-tweCXK/79vAwj1NhAsYgICy8T1z2QEairmN2BFEBYFBFNMEB1iI1YlXwBkBtuihRvgZrTh1ORusKa4jLYzLCZA==\n \n-\"@swc/core-win32-ia32-msvc@1.12.11\":\n-  version \"1.12.11\"\n-  resolved \"https://registry.yarnpkg.com/@swc/core-win32-ia32-msvc/-/core-win32-ia32-msvc-1.12.11.tgz#b551f23eea19a14da9ade021b29c4b16ae08f8b1\"\n-  integrity sha512-1pwr325mXRNUhxTtXmx1IokV5SiRL+6iDvnt3FRXj+X5UvXXKtg2zeyftk+03u8v8v8WUr5I32hIypVJPTNxNg==\n+\"@swc/core-win32-ia32-msvc@1.13.1\":\n+  version \"1.13.1\"\n+  resolved \"https://registry.yarnpkg.com/@swc/core-win32-ia32-msvc/-/core-win32-ia32-msvc-1.13.1.tgz#3b5ed14186017a1e181f48f48d5b26147c0b857e\"\n+  integrity sha512-zi7hO9D+2R2yQN9D7T10/CAI9KhuXkNkz8tcJOW6+dVPtAk/gsIC5NoGPELjgrAlLL9CS38ZQpLDslLfpP15ng==\n \n-\"@swc/core-win32-x64-msvc@1.12.11\":\n-  version \"1.12.11\"\n-  resolved \"https://registry.yarnpkg.com/@swc/core-win32-x64-msvc/-/core-win32-x64-msvc-1.12.11.tgz#a88f84c40c98c1dd252e8fd2ae5004e1336c2f5b\"\n-  integrity sha512-5gggWo690Gvs7XiPxAmb5tHwzB9RTVXUV7AWoGb6bmyUd1OXYaebQF0HAOtade5jIoNhfQMQJ7QReRgt/d2jAA==\n+\"@swc/core-win32-x64-msvc@1.13.1\":\n+  version \"1.13.1\"\n+  resolved \"https://registry.yarnpkg.com/@swc/core-win32-x64-msvc/-/core-win32-x64-msvc-1.13.1.tgz#bd35da282344ad73a86cd32a7edc0b03a457d9f7\"\n+  integrity sha512-KubYjzqs/nz3H69ncX/XHKsC8c1xqc7UvonQAj26BhbL22HBsqdAaVutZ+Obho6RMpd3F5qQ95ldavUTWskRrw==\n \n \"@swc/core@^1.7.3\":\n-  version \"1.12.11\"\n-  resolved \"https://registry.yarnpkg.com/@swc/core/-/core-1.12.11.tgz#68c53384322896c52841c4e73b7d07459367985e\"\n-  integrity sha512-P3GM+0lqjFctcp5HhR9mOcvLSX3SptI9L1aux0Fuvgt8oH4f92rCUrkodAa0U2ktmdjcyIiG37xg2mb/dSCYSA==\n+  version \"1.13.1\"\n+  resolved \"https://registry.yarnpkg.com/@swc/core/-/core-1.13.1.tgz#36cb623f0b0282240ec007678a515fdb7c72997f\"\n+  integrity sha512-jEKKErLC6uwSqA+p6bmZR08usZM5Fpc+HdEu5CAzvye0q43yf1si1kjhHEa9XMkz0A2SAaal3eKCg/YYmtOsCA==\n   dependencies:\n     \"@swc/counter\" \"^0.1.3\"\n     \"@swc/types\" \"^0.1.23\"\n   optionalDependencies:\n-    \"@swc/core-darwin-arm64\" \"1.12.11\"\n-    \"@swc/core-darwin-x64\" \"1.12.11\"\n-    \"@swc/core-linux-arm-gnueabihf\" \"1.12.11\"\n-    \"@swc/core-linux-arm64-gnu\" \"1.12.11\"\n-    \"@swc/core-linux-arm64-musl\" \"1.12.11\"\n-    \"@swc/core-linux-x64-gnu\" \"1.12.11\"\n-    \"@swc/core-linux-x64-musl\" \"1.12.11\"\n-    \"@swc/core-win32-arm64-msvc\" \"1.12.11\"\n-    \"@swc/core-win32-ia32-msvc\" \"1.12.11\"\n-    \"@swc/core-win32-x64-msvc\" \"1.12.11\"\n+    \"@swc/core-darwin-arm64\" \"1.13.1\"\n+    \"@swc/core-darwin-x64\" \"1.13.1\"\n+    \"@swc/core-linux-arm-gnueabihf\" \"1.13.1\"\n+    \"@swc/core-linux-arm64-gnu\" \"1.13.1\"\n+    \"@swc/core-linux-arm64-musl\" \"1.13.1\"\n+    \"@swc/core-linux-x64-gnu\" \"1.13.1\"\n+    \"@swc/core-linux-x64-musl\" \"1.13.1\"\n+    \"@swc/core-win32-arm64-msvc\" \"1.13.1\"\n+    \"@swc/core-win32-ia32-msvc\" \"1.13.1\"\n+    \"@swc/core-win32-x64-msvc\" \"1.13.1\"\n \n \"@swc/counter@^0.1.3\":\n   version \"0.1.3\"\n   resolved \"https://registry.yarnpkg.com/@swc/counter/-/counter-0.1.3.tgz#cc7463bd02949611c6329596fccd2b0ec782b0e9\"\n@@ -1967,71 +1967,61 @@\n   version \"14.5.2\"\n   resolved \"https://registry.yarnpkg.com/@testing-library/user-event/-/user-event-14.5.2.tgz#db7257d727c891905947bd1c1a99da20e03c2ebd\"\n   integrity sha512-YAh82Wh4TIrxYLmfGcixwD18oIjyC1pFQC2Y01F2lzV2HTMiYrI0nze0FD0ocB//CKS/7jIUgae+adPqxK5yCQ==\n \n-\"@tiptap/core@2.10.4\":\n-  version \"2.10.4\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/core/-/core-2.10.4.tgz#0b3ad822d71f5834b281590809f430e6fd41523c\"\n-  integrity sha512-fExFRTRgb6MSpg2VvR5qO2dPTQAZWuUoU4UsBCurIVcPWcyVv4FG1YzgMyoLDKy44rebFtwUGJbfU9NzX7Q/bA==\n-\n-\"@tiptap/core@^2.11.0\":\n+\"@tiptap/core@^2.22.3\", \"@tiptap/core@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/core/-/core-2.26.1.tgz#8f97c223629972221d4175e4779f6ee955c41a37\"\n   integrity sha512-fymyd/XZvYiHjBoLt1gxs024xP/LY26d43R1vluYq7AHBL/7DE3ywzy+1GEsGyAv5Je2L0KBhNIR/izbq3Kaqg==\n \n-\"@tiptap/extension-blockquote@2.10.4\":\n-  version \"2.10.4\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-blockquote/-/extension-blockquote-2.10.4.tgz#0f9a26740009fc7430fabc423077c369feaebb42\"\n-  integrity sha512-4JSwAM3B92YWvGzu/Vd5rovPrCGwLSaSLD5rxcLyfxLSrTDQd3n7lp78pzVgGhunVECzaGF5A0ByWWpEyS0a3w==\n-\n-\"@tiptap/extension-blockquote@^2.11.0\":\n+\"@tiptap/extension-blockquote@^2.22.3\", \"@tiptap/extension-blockquote@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-blockquote/-/extension-blockquote-2.26.1.tgz#8ad2b3c119ff22430432ef46c852c135c156d63b\"\n   integrity sha512-viQ6AHRhjCYYipKK6ZepBzwZpkuMvO9yhRHeUZDvlSOAh8rvsUTSre0y74nu8QRYUt4a44lJJ6BpphJK7bEgYA==\n \n-\"@tiptap/extension-bold@^2.11.0\":\n+\"@tiptap/extension-bold@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-bold/-/extension-bold-2.26.1.tgz#1218b847d360d69b6fc9e30596991bc53bc8fb98\"\n   integrity sha512-zCce9PRuTNhadFir71luLo99HERDpGJ0EEflGm7RN8I1SnNi9gD5ooK42BOIQtejGCJqg3hTPZiYDJC2hXvckQ==\n \n-\"@tiptap/extension-bubble-menu@^2.11.0\":\n+\"@tiptap/extension-bubble-menu@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-bubble-menu/-/extension-bubble-menu-2.26.1.tgz#7d78abb95bfc96468b40819ec00e2770ddcf63ad\"\n   integrity sha512-oHevUcZbTMFOTpdCEo4YEDe044MB4P1ZrWyML8CGe5tnnKdlI9BN03AXpI1mEEa5CA3H1/eEckXx8EiCgYwQ3Q==\n   dependencies:\n     tippy.js \"^6.3.7\"\n \n-\"@tiptap/extension-bullet-list@^2.11.0\":\n+\"@tiptap/extension-bullet-list@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-bullet-list/-/extension-bullet-list-2.26.1.tgz#b92170ca5d0b3404599799277fd73a124e81d093\"\n   integrity sha512-HHakuV4ckYCDOnBbne088FvCEP4YICw+wgPBz/V2dfpiFYQ4WzT0LPK9s7OFMCN+ROraoug+1ryN1Z1KdIgujQ==\n \n-\"@tiptap/extension-character-count@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-character-count/-/extension-character-count-2.11.0.tgz#7d3992ceba72f1eeb2db3a1fc997c50dddd7cf8c\"\n-  integrity sha512-WbqVr1QY62vxpmDJP5k3bwyzoHha1sZTs0xj3L+4s1j/SB2A7tAlFdcNPPwfbPOINHQgomSAyClfTyd4Gor7HA==\n+\"@tiptap/extension-character-count@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/extension-character-count/-/extension-character-count-2.26.1.tgz#f053ba6c0ac82dd02ffe3fddcb645da4d49fa9ea\"\n+  integrity sha512-F7LP1a9GF28thbApowWT2I41baqX74HMUTrV9LGrNXaOkW2gxZz+CDOzfHsbHyfuwfIxIjv07Qf/HKA6Cc1qbA==\n \n-\"@tiptap/extension-code-block@^2.11.0\":\n+\"@tiptap/extension-code-block@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-code-block/-/extension-code-block-2.26.1.tgz#dd6f9ec59440844f8e0ab0b33a75ff8ab6b6669f\"\n   integrity sha512-/TDDOwONl0qEUc4+B6V9NnWtSjz95eg7/8uCb8Y8iRbGvI9vT4/znRKofFxstvKmW4URu/H74/g0ywV57h0B+A==\n \n-\"@tiptap/extension-code@^2.11.0\":\n+\"@tiptap/extension-code@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-code/-/extension-code-2.26.1.tgz#ed289955423da20faa6ef4c81472835ac5fe1574\"\n   integrity sha512-GU9deB1A/Tr4FMPu71CvlcjGKwRhGYz60wQ8m4aM+ELZcVIcZRa1ebR8bExRIEWnvRztQuyRiCQzw2N0xQJ1QQ==\n \n-\"@tiptap/extension-collaboration@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-collaboration/-/extension-collaboration-2.11.0.tgz#21ac1c8bc2ca6d8ba2a838e63457528627294888\"\n-  integrity sha512-pS3E//ODD80PwVXp7zOqek0q9z5AtZ6sMSK5nPneNioe7dSvCeQzToOD9V6EevK4KChUIN9wEryK8mkQs57ioA==\n+\"@tiptap/extension-collaboration@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/extension-collaboration/-/extension-collaboration-2.26.1.tgz#7dccd127e5356d72337dad8d71be11c3265e2d27\"\n+  integrity sha512-ozCrGW5IAzi/18Ngdi0v/Q175D7J3ZGoTffDDyPxnTK/oksfROajoe+ZIEgoDGXPeI/I7TTlTONuqQ6LZT5r7Q==\n \n-\"@tiptap/extension-document@^2.11.0\":\n+\"@tiptap/extension-document@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-document/-/extension-document-2.26.1.tgz#3e65e4833fee138e5afaed4be586d75db10cb8b6\"\n   integrity sha512-2P2IZp1NRAE+21mRuFBiP3X2WKfZ6kUC23NJKpn8bcOamY3obYqCt0ltGPhE4eR8n8QAl2fI/3jIgjR07dC8ow==\n \n-\"@tiptap/extension-dropcursor@^2.11.0\":\n+\"@tiptap/extension-dropcursor@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-dropcursor/-/extension-dropcursor-2.26.1.tgz#2eff232f3ab50816ba7182275f84f475a88b4443\"\n   integrity sha512-JkDQU2ZYFOuT5mNYb8OiWGwD1HcjbtmX8tLNugQbToECmz9WvVPqJmn7V/q8VGpP81iEECz/IsyRmuf2kSD4uA==\n \n@@ -2043,152 +2033,118 @@\n     emoji-regex \"^10.4.0\"\n     emojibase-data \"^15\"\n     is-emoji-supported \"^0.0.5\"\n \n-\"@tiptap/extension-floating-menu@^2.11.0\":\n+\"@tiptap/extension-floating-menu@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-floating-menu/-/extension-floating-menu-2.26.1.tgz#4be572fa98f356d44b1817cff5cd0db819f45c01\"\n   integrity sha512-OJF+H6qhQogVTMedAGSWuoL1RPe3LZYXONuFCVyzHnvvMpK+BP1vm180E2zDNFnn/DVA+FOrzNGpZW7YjoFH1w==\n   dependencies:\n     tippy.js \"^6.3.7\"\n \n-\"@tiptap/extension-gapcursor@^2.11.0\":\n+\"@tiptap/extension-gapcursor@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-gapcursor/-/extension-gapcursor-2.26.1.tgz#7a5ebd84d4495aa8403ececd1ace51d3ba9ab139\"\n   integrity sha512-KOiMZc3PwJS3hR0nSq5d0TJi2jkNZkLZElcT6pCEnhRHzPH6dRMu9GM5Jj798ZRUy0T9UFcKJalFZaDxnmRnpg==\n \n-\"@tiptap/extension-hard-break@^2.11.0\":\n+\"@tiptap/extension-hard-break@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-hard-break/-/extension-hard-break-2.26.1.tgz#70226e2b63e2252a74f6e59b5c001a4c02e0c1e5\"\n   integrity sha512-d6uStdNKi8kjPlHAyO59M6KGWATNwhLCD7dng0NXfwGndc22fthzIk/6j9F6ltQx30huy5qQram6j3JXwNACoA==\n \n-\"@tiptap/extension-heading@^2.11.0\":\n+\"@tiptap/extension-heading@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-heading/-/extension-heading-2.26.1.tgz#49d1e8f2d10eb1c06bf348d7cb9d131097d65f78\"\n   integrity sha512-KSzL8WZV3pjJG9ke4RaU70+B5UlYR2S6olNt5UCAawM+fi11mobVztiBoC19xtpSVqIXC1AmXOqUgnuSvmE4ZA==\n \n-\"@tiptap/extension-history@^2.11.0\":\n+\"@tiptap/extension-history@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-history/-/extension-history-2.26.1.tgz#de8e8a5ebf08cbbccb6dec11291128843a2d24e6\"\n   integrity sha512-m6YR1gkkauIDo3PRl0gP+7Oc4n5OqDzcjVh6LvWREmZP8nmi94hfseYbqOXUb6RPHIc0JKF02eiRifT4MSd2nw==\n \n-\"@tiptap/extension-horizontal-rule@^2.11.0\":\n+\"@tiptap/extension-horizontal-rule@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-horizontal-rule/-/extension-horizontal-rule-2.26.1.tgz#5c0c635d4444f38cb70e721d06fbe2d47a79982c\"\n   integrity sha512-mT6baqOhs/NakgrAeDeed194E/ZJFGL692H0C7f1N7WDRaWxUu2oR0LrnRqSH5OyPjELkzu6nQnNy0+0tFGHHg==\n \n-\"@tiptap/extension-image@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-image/-/extension-image-2.11.0.tgz#e9611a6a032804279f9b12a483a7afe696358a3f\"\n-  integrity sha512-R+JkK5ocX35ag1c42aAw6rcb9QlLUBB0ju8A7b+8qZXN5yWKE0yO/oixYFmnZN7WSnBYtzuCVDX8cvRG+BPbgA==\n+\"@tiptap/extension-image@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/extension-image/-/extension-image-2.26.1.tgz#1b71633f31a7c53c4570f94e1068ceb46fe93224\"\n+  integrity sha512-96+MaYBJebQlR/ik5W72GLUfXdEoxFs+6jsoERxbM5qEdhb7TEnodBFtWZOwgDO27kFd6rSNZuW9r5KJNtljEg==\n \n-\"@tiptap/extension-italic@^2.11.0\":\n+\"@tiptap/extension-italic@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-italic/-/extension-italic-2.26.1.tgz#cd798d5e410d112f70aaea2c7eb30716f4a483c6\"\n   integrity sha512-pOs6oU4LyGO89IrYE4jbE8ZYsPwMMIiKkYfXcfeD9NtpGNBnjeVXXF5I9ndY2ANrCAgC8k58C3/powDRf0T2yA==\n \n-\"@tiptap/extension-list-item@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-list-item/-/extension-list-item-2.11.0.tgz#15889fd8217b998bfef78cd9079c8405b5a9abcd\"\n-  integrity sha512-Jikcg0fccpM13a3hAFLtguMcpVg4eMWI8NnC0aUULD9rFhvWZQYQYQuoK3fO6vQrAQpNhsV4oa0dfSq1btu9kg==\n-\n-\"@tiptap/extension-list-item@^2.11.0\":\n+\"@tiptap/extension-list-item@^2.22.3\", \"@tiptap/extension-list-item@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-list-item/-/extension-list-item-2.26.1.tgz#932e041245d3a696c943e9d4a32cdf59cb386e88\"\n   integrity sha512-quOXckC73Luc3x+Dcm88YAEBW+Crh3x5uvtQOQtn2GEG91AshrvbnhGRiYnfvEN7UhWIS+FYI5liHFcRKSUKrQ==\n \n-\"@tiptap/extension-mention@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-mention/-/extension-mention-2.11.0.tgz#515f831975188ce33e3c0951f94a34396a3f35cd\"\n-  integrity sha512-5/Yk2rTpsoIZaNyo4f+CgsCCkQkSiNAp24HOvvCm9Dp9w1gIFm6y6dSj5RYqzEucGjOkoaBbfMcm1QxKWIj6/A==\n+\"@tiptap/extension-mention@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/extension-mention/-/extension-mention-2.26.1.tgz#f61a77f8b3dd99b12b9aac0a9ee8041f098b3986\"\n+  integrity sha512-sBrlJ9nWjFx7oWCtt0hV192FgCBXva1zwImWbgXTCGPAjv0d5EoPymIfRgoeanAmuQjOHoKzzZnJ6bELTZhkGw==\n \n-\"@tiptap/extension-ordered-list@^2.11.0\":\n+\"@tiptap/extension-ordered-list@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-ordered-list/-/extension-ordered-list-2.26.1.tgz#81e60f4b679533b736ef0fbad4263a11e1c8465e\"\n   integrity sha512-UHKNRxq6TBnXMGFSq91knD6QaHsyyOwLOsXMzupmKM5Su0s+CRXEjfav3qKlbb9e4m7D7S/a0aPm8nC9KIXNhQ==\n \n-\"@tiptap/extension-paragraph@^2.11.0\":\n+\"@tiptap/extension-paragraph@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-paragraph/-/extension-paragraph-2.26.1.tgz#2e25f9e72fd5b4b34ca8e9e3c355303d86eae055\"\n   integrity sha512-UezvM9VDRAVJlX1tykgHWSD1g3MKfVMWWZ+Tg+PE4+kizOwoYkRWznVPgCAxjmyHajxpCKRXgqTZkOxjJ9Kjzg==\n \n-\"@tiptap/extension-placeholder@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-placeholder/-/extension-placeholder-2.11.0.tgz#a330df0bc791df82b3a84490031a8db9a68f4061\"\n-  integrity sha512-ee8vz51pW6H+1rEDMFg2FnBs2Tj5rUHlJ1JgD7Dcp3+89SVHGB3UILGfbNpAnHZvhmsTY3NcfPAcZZ80QfQFMQ==\n+\"@tiptap/extension-placeholder@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/extension-placeholder/-/extension-placeholder-2.26.1.tgz#a44280063978dfa86aad71dee6cad36c3a7862a0\"\n+  integrity sha512-MBlqbkd+63btY7Qu+SqrXvWjPwooGZDsLTtl7jp52BczBl61cq9yygglt9XpM11TFMBdySgdLHBrLtQ0B7fBlw==\n \n-\"@tiptap/extension-strike@^2.11.0\":\n+\"@tiptap/extension-strike@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-strike/-/extension-strike-2.26.1.tgz#d703acfa78455021082ccbac72b41ee9ab3f8c9b\"\n   integrity sha512-CkoRH+pAi6MgdCh7K0cVZl4N2uR4pZdabXAnFSoLZRSg6imLvEUmWHfSi1dl3Z7JOvd3a4yZ4NxerQn5MWbJ7g==\n \n-\"@tiptap/extension-task-item@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-task-item/-/extension-task-item-2.11.0.tgz#ff97f10bf39d6c27fd3f3f1ee3987d7015304c11\"\n-  integrity sha512-qu6VuRc8qF80Bwr82CItFcrKtC67LJkwpxESLEIi42zWZ5sXF/3DJEPPS/4Kk+nAc9UCBoEMFAULibPq7rRl/w==\n+\"@tiptap/extension-task-item@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/extension-task-item/-/extension-task-item-2.26.1.tgz#060535e2c0f910fca1eb7bb0aa764ca2bd4d6584\"\n+  integrity sha512-b7JNeOsBqEd1p2oQ5N6Msz9fr2o73WR1WsYDC0WhECg07Goud2gQEkwWkQaLsvfcwuS746eMJK/nrT2pVEngYA==\n \n-\"@tiptap/extension-task-list@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-task-list/-/extension-task-list-2.11.0.tgz#2f197a70aafc0c23163ed70aa314cc0300534cf6\"\n-  integrity sha512-+dZRjeXLXxyliFt3J7uQADxfOwi6ntyepVM+ri1rnmIaqVZUHJbUFodOc0LivI+Z5iZZ10u3TId8gehqWJHD+w==\n+\"@tiptap/extension-task-list@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/extension-task-list/-/extension-task-list-2.26.1.tgz#5cb01a50368a2d38aa7b1ecc90b75b74b6fd3be4\"\n+  integrity sha512-xR4LMpMPZ6bpkZNmFvIojmNGtdGKNlKFbpvyIOgs4qhlWskbFQQVevglHjV1R8xJLic5c+byJQaAmQdQudqGng==\n \n-\"@tiptap/extension-text-align@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-text-align/-/extension-text-align-2.11.0.tgz#b90b86ee3f6e14c9abf186cb8ab6ced20c0df14d\"\n-  integrity sha512-VRXBqO17po6ddqhoWLBa2aCX/tqHdzdKPLfjnBy1fF8hjQKbidzjMWhb4CMm31ApvJjKK/DTkM3EnyYS/XDhng==\n+\"@tiptap/extension-text-align@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/extension-text-align/-/extension-text-align-2.26.1.tgz#79add5084d2b9ff1c347686834f924613d6c98cb\"\n+  integrity sha512-x6mpNGELy2QtSPBoQqNgiXO9PjZoB+O2EAfXA9YRiBDSIRNOrw+7vOVpi+IgzswFmhMNgIYUVfQRud4FHUCNew==\n \n-\"@tiptap/extension-text-style@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-text-style/-/extension-text-style-2.11.0.tgz#2acb6207fe6acdb5479384682846980be15caa80\"\n-  integrity sha512-vuA16wMZ6J3fboL7FObwV2f5uN9Vg0WYmqU7971vxzJyaRj9VE1eeH8Kh5fq4RgwDzc13MZGvZZV4HcE1R8o8A==\n-\n-\"@tiptap/extension-text-style@^2.11.0\":\n+\"@tiptap/extension-text-style@^2.22.3\", \"@tiptap/extension-text-style@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-text-style/-/extension-text-style-2.26.1.tgz#a6be329ff881df9da37d9a8c353b2b2e7b8508b3\"\n   integrity sha512-t9Nc/UkrbCfnSHEUi1gvUQ2ZPzvfdYFT5TExoV2DTiUCkhG6+mecT5bTVFGW3QkPmbToL+nFhGn4ZRMDD0SP3Q==\n \n-\"@tiptap/extension-text@^2.11.0\":\n+\"@tiptap/extension-text@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/extension-text/-/extension-text-2.26.1.tgz#a51a11aa446d32b136851ce5173c89ad5ff0f57a\"\n   integrity sha512-p2n8WVMd/2vckdJlol24acaTDIZAhI7qle5cM75bn01sOEZoFlSw6SwINOULrUCzNJsYb43qrLEibZb4j2LeQw==\n \n-\"@tiptap/extension-underline@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/extension-underline/-/extension-underline-2.11.0.tgz#473025d3ed01953fb2c23f8060ea90be4c231faa\"\n-  integrity sha512-DE1piq441y1+9Aj1pvvuq1dcc5B2HZ2d1SPtO4DTMjCxrhok12biTkMxxq0q1dzA5/BouLlUW6WTPpinhmrUWA==\n+\"@tiptap/extension-underline@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/extension-underline/-/extension-underline-2.26.1.tgz#79f2eced758b5432e7b2dd764bd0d4e53e8c1721\"\n+  integrity sha512-/fufv41WDMdf0a4xmFAxONoAz08TonJXX6NEoSJmuGKO59M/Y0Pz8DTK1g32Wk44kn7dyScDiPlvvndl+UOv0A==\n \n-\"@tiptap/html@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/html/-/html-2.11.0.tgz#dd0b4195a07bbdca27aa13325b8ebac41480a6a0\"\n-  integrity sha512-9+8eSeey3gm6vMtbt+uKZfkvtwsWr577lhtTeGUsoThim9zyBnbhzHc1dQw2m1RefOoPcODrnnQPvi5nvA84Cw==\n+\"@tiptap/html@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/html/-/html-2.26.1.tgz#61c2929d3bd5f91d22b3f43448a5e6dc369f6988\"\n+  integrity sha512-93keIjciRdjgQabxntXBjW6NTrAoM+uC/u3dwoM5CJFs40cpJC+/CEPYG7SJ5Cyv8srv/OqzyjCjoz7PQGvXyA==\n   dependencies:\n     zeed-dom \"^0.15.1\"\n \n-\"@tiptap/pm@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/pm/-/pm-2.11.0.tgz#c2ccb0c9b99fd5915d9390e90d3ab9e5fb408cd8\"\n-  integrity sha512-4RU6bpODkMY+ZshzdRFcuUc5jWlMW82LWXR6UOsHK/X/Mav41ZFS0Cyf+hQM6gxxTB09YFIICmGpEpULb+/CuA==\n-  dependencies:\n-    prosemirror-changeset \"^2.2.1\"\n-    prosemirror-collab \"^1.3.1\"\n-    prosemirror-commands \"^1.6.2\"\n-    prosemirror-dropcursor \"^1.8.1\"\n-    prosemirror-gapcursor \"^1.3.2\"\n-    prosemirror-history \"^1.4.1\"\n-    prosemirror-inputrules \"^1.4.0\"\n-    prosemirror-keymap \"^1.2.2\"\n-    prosemirror-markdown \"^1.13.1\"\n-    prosemirror-menu \"^1.2.4\"\n-    prosemirror-model \"^1.23.0\"\n-    prosemirror-schema-basic \"^1.2.3\"\n-    prosemirror-schema-list \"^1.4.1\"\n-    prosemirror-state \"^1.4.3\"\n-    prosemirror-tables \"^1.6.1\"\n-    prosemirror-trailing-node \"^3.0.0\"\n-    prosemirror-transform \"^1.10.2\"\n-    prosemirror-view \"^1.37.0\"\n-\n-\"@tiptap/pm@^2.11.0\":\n+\"@tiptap/pm@^2.22.3\", \"@tiptap/pm@^2.26.1\":\n   version \"2.26.1\"\n   resolved \"https://registry.yarnpkg.com/@tiptap/pm/-/pm-2.26.1.tgz#5e4bd79e60fe698fa12770b2845e5133b3333d06\"\n   integrity sha512-8aF+mY/vSHbGFqyG663ds84b+vca5Lge3tHdTMTKazxCnhXR9dn2oQJMnZ78YZvdRbkPkMJJHti9h3K7u2UQvw==\n   dependencies:\n@@ -2210,50 +2166,50 @@\n     prosemirror-trailing-node \"^3.0.0\"\n     prosemirror-transform \"^1.10.2\"\n     prosemirror-view \"^1.37.0\"\n \n-\"@tiptap/react@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/react/-/react-2.11.0.tgz#28b9ca64bdeb6302eaca1941ef792e3acea2e40e\"\n-  integrity sha512-AALzHbqNq/gerJpkbXmN2OXFmHAs2bQENH7rXbnH70bpxVdIfQVtvjK4dIb+cQQvAuTWZvhsISnTrFY2BesT3Q==\n+\"@tiptap/react@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/react/-/react-2.26.1.tgz#793d035a1decd6655f40195f58a6fd873ee65c83\"\n+  integrity sha512-Zxlwzi1iML7aELa+PyysFD2ncVo2mEcjTkhoDok9iTbMGpm1oU8hgR1i6iHrcSNQLfaRiW6M7HNhZZQPKIC9yw==\n   dependencies:\n-    \"@tiptap/extension-bubble-menu\" \"^2.11.0\"\n-    \"@tiptap/extension-floating-menu\" \"^2.11.0\"\n+    \"@tiptap/extension-bubble-menu\" \"^2.26.1\"\n+    \"@tiptap/extension-floating-menu\" \"^2.26.1\"\n     \"@types/use-sync-external-store\" \"^0.0.6\"\n     fast-deep-equal \"^3\"\n     use-sync-external-store \"^1\"\n \n-\"@tiptap/starter-kit@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/starter-kit/-/starter-kit-2.11.0.tgz#3b4a9ca9daaffed3abd030d4cd72e8d9d3eb0649\"\n-  integrity sha512-lrYmkeaAFiuUjN5nGnCowdjponrsR7eRmeTf/15/5oZsNrMN7t/fvPb014AqhG/anNasa0ism4CKZns3D+4pKQ==\n+\"@tiptap/starter-kit@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/starter-kit/-/starter-kit-2.26.1.tgz#00a19c05491a51423aabe511f624567942bd2baa\"\n+  integrity sha512-oziMGCds8SVQ3s5dRpBxVdEKZAmO/O//BjZ69mhA3q4vJdR0rnfLb5fTxSeQvHiqB878HBNn76kNaJrHrV35GA==\n   dependencies:\n-    \"@tiptap/core\" \"^2.11.0\"\n-    \"@tiptap/extension-blockquote\" \"^2.11.0\"\n-    \"@tiptap/extension-bold\" \"^2.11.0\"\n-    \"@tiptap/extension-bullet-list\" \"^2.11.0\"\n-    \"@tiptap/extension-code\" \"^2.11.0\"\n-    \"@tiptap/extension-code-block\" \"^2.11.0\"\n-    \"@tiptap/extension-document\" \"^2.11.0\"\n-    \"@tiptap/extension-dropcursor\" \"^2.11.0\"\n-    \"@tiptap/extension-gapcursor\" \"^2.11.0\"\n-    \"@tiptap/extension-hard-break\" \"^2.11.0\"\n-    \"@tiptap/extension-heading\" \"^2.11.0\"\n-    \"@tiptap/extension-history\" \"^2.11.0\"\n-    \"@tiptap/extension-horizontal-rule\" \"^2.11.0\"\n-    \"@tiptap/extension-italic\" \"^2.11.0\"\n-    \"@tiptap/extension-list-item\" \"^2.11.0\"\n-    \"@tiptap/extension-ordered-list\" \"^2.11.0\"\n-    \"@tiptap/extension-paragraph\" \"^2.11.0\"\n-    \"@tiptap/extension-strike\" \"^2.11.0\"\n-    \"@tiptap/extension-text\" \"^2.11.0\"\n-    \"@tiptap/extension-text-style\" \"^2.11.0\"\n-    \"@tiptap/pm\" \"^2.11.0\"\n+    \"@tiptap/core\" \"^2.26.1\"\n+    \"@tiptap/extension-blockquote\" \"^2.26.1\"\n+    \"@tiptap/extension-bold\" \"^2.26.1\"\n+    \"@tiptap/extension-bullet-list\" \"^2.26.1\"\n+    \"@tiptap/extension-code\" \"^2.26.1\"\n+    \"@tiptap/extension-code-block\" \"^2.26.1\"\n+    \"@tiptap/extension-document\" \"^2.26.1\"\n+    \"@tiptap/extension-dropcursor\" \"^2.26.1\"\n+    \"@tiptap/extension-gapcursor\" \"^2.26.1\"\n+    \"@tiptap/extension-hard-break\" \"^2.26.1\"\n+    \"@tiptap/extension-heading\" \"^2.26.1\"\n+    \"@tiptap/extension-history\" \"^2.26.1\"\n+    \"@tiptap/extension-horizontal-rule\" \"^2.26.1\"\n+    \"@tiptap/extension-italic\" \"^2.26.1\"\n+    \"@tiptap/extension-list-item\" \"^2.26.1\"\n+    \"@tiptap/extension-ordered-list\" \"^2.26.1\"\n+    \"@tiptap/extension-paragraph\" \"^2.26.1\"\n+    \"@tiptap/extension-strike\" \"^2.26.1\"\n+    \"@tiptap/extension-text\" \"^2.26.1\"\n+    \"@tiptap/extension-text-style\" \"^2.26.1\"\n+    \"@tiptap/pm\" \"^2.26.1\"\n \n-\"@tiptap/suggestion@2.11.0\":\n-  version \"2.11.0\"\n-  resolved \"https://registry.yarnpkg.com/@tiptap/suggestion/-/suggestion-2.11.0.tgz#826140c6f1a76af2d91713dafb4b142c803eabef\"\n-  integrity sha512-f+KcczhzEEy2f7/0N/RSID+Z6NjxCX6ab26NLfWZxdaEm/J+vQ2Pqh/e5Z59vMfKiC0DJXVcO0rdv2LBh23qDw==\n+\"@tiptap/suggestion@^2.22.3\":\n+  version \"2.26.1\"\n+  resolved \"https://registry.yarnpkg.com/@tiptap/suggestion/-/suggestion-2.26.1.tgz#64b567443668ff9afb5533737f877e3604ab53ae\"\n+  integrity sha512-iNWJdQN7h01keNoVwyCsdI7ZX11YkrexZjCnutWK17Dd72s3NYVTmQXu7saftwddT4nDdlczNxAFosrt0zMhcg==\n \n \"@tsconfig/node10@^1.0.7\":\n   version \"1.0.11\"\n   resolved \"https://registry.yarnpkg.com/@tsconfig/node10/-/node10-1.0.11.tgz#6ee46400685f130e278128c7b38b7e031ff5b2f2\"\n@@ -2597,11 +2553,11 @@\n   resolved \"https://registry.yarnpkg.com/@types/ms/-/ms-2.1.0.tgz#052aa67a48eccc4309d7f0191b7e41434b90bb78\"\n   integrity sha512-GsCCIZDE/p3i96vtEqx+7dBUGXrc7zeSK3wwPHIaRThS+9OhWIXRqzs4d6k1SVU8g91DrNRWxWUGhp5KXQb2VA==\n \n \"@types/node@*\":\n-  version \"24.0.13\"\n-  resolved \"https://registry.yarnpkg.com/@types/node/-/node-24.0.13.tgz#93ed8c05c7b188a59760be0ce2ee3fa7ad0f83f6\"\n-  integrity sha512-Qm9OYVOFHFYg3wJoTSrz80hoec5Lia/dPp84do3X7dZvLikQvM1YpmvTBEdIr/e+U8HTkFjLHLnl78K/qjf+jQ==\n+  version \"24.0.15\"\n+  resolved \"https://registry.yarnpkg.com/@types/node/-/node-24.0.15.tgz#f34fbc973e7d64217106e0c59ed8761e6b51381e\"\n+  integrity sha512-oaeTSbCef7U/z7rDeJA138xpG3NuKc64/rZ2qmUFkFJmnMsAPaluIifqyWd8hSSMxyP9oie3dLAqYPblag9KgA==\n   dependencies:\n     undici-types \"~7.8.0\"\n \n \"@types/node@18.14.1\":\n@@ -2619,18 +2575,18 @@\n   resolved \"https://registry.yarnpkg.com/@types/node/-/node-18.16.1.tgz#5db121e9c5352925bb1f1b892c4ae620e3526799\"\n   integrity sha512-DZxSZWXxFfOlx7k7Rv4LAyiMroaxa3Ly/7OOzZO8cBNho0YzAi4qlbrx8W27JGqG57IgR/6J7r+nOJWw6kcvZA==\n \n \"@types/node@^20.14.9\", \"@types/node@^20.5.2\":\n-  version \"20.19.7\"\n-  resolved \"https://registry.yarnpkg.com/@types/node/-/node-20.19.7.tgz#1d3656e25ec91731c1cce21889e4754ebc988b4e\"\n-  integrity sha512-1GM9z6BJOv86qkPvzh2i6VW5+VVrXxCLknfmTkWEqz+6DqosiY28XUWCTmBcJ0ACzKqx/iwdIREfo1fwExIlkA==\n+  version \"20.19.9\"\n+  resolved \"https://registry.yarnpkg.com/@types/node/-/node-20.19.9.tgz#ca9a58193fec361cc6e859d88b52261853f1f0d3\"\n+  integrity sha512-cuVNgarYWZqxRJDQHEB58GEONhOK79QVR/qYx4S7kcUObQvUwvFnYxJuuHUKm2aieN9X3yZB4LZsuYNU1Qphsw==\n   dependencies:\n     undici-types \"~6.21.0\"\n \n \"@types/node@^22.5.4\":\n-  version \"22.16.3\"\n-  resolved \"https://registry.yarnpkg.com/@types/node/-/node-22.16.3.tgz#006f83d80e6f05f65768acc77f4a57bfac1d545f\"\n-  integrity sha512-sr4Xz74KOUeYadexo1r8imhRtlVXcs+j3XK3TcoiYk7B1t3YRVJgtaD3cwX73NYb71pmVuMLNRhJ9XKdoDB74g==\n+  version \"22.16.5\"\n+  resolved \"https://registry.yarnpkg.com/@types/node/-/node-22.16.5.tgz#cc46ac3994cd957000d0c11095a0b1dae2ea2368\"\n+  integrity sha512-bJFoMATwIGaxxx8VJPeM8TonI8t579oRvgAuT8zFugJsJZgzqv0Fu8Mhp68iecjzG7cnN3mO2dJQ5uUM2EFrgQ==\n   dependencies:\n     undici-types \"~6.21.0\"\n \n \"@types/nprogress@^0.2.0\":\n@@ -2822,17 +2778,17 @@\n   resolved \"https://registry.yarnpkg.com/@types/zxcvbn/-/zxcvbn-4.4.5.tgz#8ce8623ed7a36e3a76d1c0b539708dfb2e859bc0\"\n   integrity sha512-FZJgC5Bxuqg7Rhsm/bx6gAruHHhDQ55r+s0JhDh8CQ16fD7NsJJ+p8YMMQDhSQoIrSmjpqqYWA96oQVMNkjRyA==\n \n \"@typescript-eslint/eslint-plugin@^5.4.2 || ^6.0.0 || ^7.0.0 || ^8.0.0\", \"@typescript-eslint/eslint-plugin@^8.6.0\":\n-  version \"8.36.0\"\n-  resolved \"https://registry.yarnpkg.com/@typescript-eslint/eslint-plugin/-/eslint-plugin-8.36.0.tgz#880ce277f8a30ccf539ec027acac157088f131ae\"\n-  integrity sha512-lZNihHUVB6ZZiPBNgOQGSxUASI7UJWhT8nHyUGCnaQ28XFCw98IfrMCG3rUl1uwUWoAvodJQby2KTs79UTcrAg==\n+  version \"8.37.0\"\n+  resolved \"https://registry.yarnpkg.com/@typescript-eslint/eslint-plugin/-/eslint-plugin-8.37.0.tgz#332392883f936137cd6252c8eb236d298e514e70\"\n+  integrity sha512-jsuVWeIkb6ggzB+wPCsR4e6loj+rM72ohW6IBn2C+5NCvfUVY8s33iFPySSVXqtm5Hu29Ne/9bnA0JmyLmgenA==\n   dependencies:\n     \"@eslint-community/regexpp\" \"^4.10.0\"\n-    \"@typescript-eslint/scope-manager\" \"8.36.0\"\n-    \"@typescript-eslint/type-utils\" \"8.36.0\"\n-    \"@typescript-eslint/utils\" \"8.36.0\"\n-    \"@typescript-eslint/visitor-keys\" \"8.36.0\"\n+    \"@typescript-eslint/scope-manager\" \"8.37.0\"\n+    \"@typescript-eslint/type-utils\" \"8.37.0\"\n+    \"@typescript-eslint/utils\" \"8.37.0\"\n+    \"@typescript-eslint/visitor-keys\" \"8.37.0\"\n     graphemer \"^1.4.0\"\n     ignore \"^7.0.0\"\n     natural-compare \"^1.4.0\"\n     ts-api-utils \"^2.1.0\"\n@@ -2853,25 +2809,25 @@\n     semver \"^7.3.7\"\n     tsutils \"^3.21.0\"\n \n \"@typescript-eslint/parser@^5.4.2 || ^6.0.0 || ^7.0.0 || ^8.0.0\", \"@typescript-eslint/parser@^8.6.0\":\n-  version \"8.36.0\"\n-  resolved \"https://registry.yarnpkg.com/@typescript-eslint/parser/-/parser-8.36.0.tgz#003007fe2030013936b6634b9cf52c457d36ed42\"\n-  integrity sha512-FuYgkHwZLuPbZjQHzJXrtXreJdFMKl16BFYyRrLxDhWr6Qr7Kbcu2s1Yhu8tsiMXw1S0W1pjfFfYEt+R604s+Q==\n+  version \"8.37.0\"\n+  resolved \"https://registry.yarnpkg.com/@typescript-eslint/parser/-/parser-8.37.0.tgz#b87f6b61e25ad5cc5bbf8baf809b8da889c89804\"\n+  integrity sha512-kVIaQE9vrN9RLCQMQ3iyRlVJpTiDUY6woHGb30JDkfJErqrQEmtdWH3gV0PBAfGZgQXoqzXOO0T3K6ioApbbAA==\n   dependencies:\n-    \"@typescript-eslint/scope-manager\" \"8.36.0\"\n-    \"@typescript-eslint/types\" \"8.36.0\"\n-    \"@typescript-eslint/typescript-estree\" \"8.36.0\"\n-    \"@typescript-eslint/visitor-keys\" \"8.36.0\"\n+    \"@typescript-eslint/scope-manager\" \"8.37.0\"\n+    \"@typescript-eslint/types\" \"8.37.0\"\n+    \"@typescript-eslint/typescript-estree\" \"8.37.0\"\n+    \"@typescript-eslint/visitor-keys\" \"8.37.0\"\n     debug \"^4.3.4\"\n \n-\"@typescript-eslint/project-service@8.36.0\":\n-  version \"8.36.0\"\n-  resolved \"https://registry.yarnpkg.com/@typescript-eslint/project-service/-/project-service-8.36.0.tgz#0c4acdcbe56476a43cdabaac1f08819424a379fd\"\n-  integrity sha512-JAhQFIABkWccQYeLMrHadu/fhpzmSQ1F1KXkpzqiVxA/iYI6UnRt2trqXHt1sYEcw1mxLnB9rKMsOxXPxowN/g==\n+\"@typescript-eslint/project-service@8.37.0\":\n+  version \"8.37.0\"\n+  resolved \"https://registry.yarnpkg.com/@typescript-eslint/project-service/-/project-service-8.37.0.tgz#0594352e32a4ac9258591b88af77b5653800cdfe\"\n+  integrity sha512-BIUXYsbkl5A1aJDdYJCBAo8rCEbAvdquQ8AnLb6z5Lp1u3x5PNgSSx9A/zqYc++Xnr/0DVpls8iQ2cJs/izTXA==\n   dependencies:\n-    \"@typescript-eslint/tsconfig-utils\" \"^8.36.0\"\n-    \"@typescript-eslint/types\" \"^8.36.0\"\n+    \"@typescript-eslint/tsconfig-utils\" \"^8.37.0\"\n+    \"@typescript-eslint/types\" \"^8.37.0\"\n     debug \"^4.3.4\"\n \n \"@typescript-eslint/scope-manager@5.62.0\":\n   version \"5.62.0\"\n@@ -2880,20 +2836,20 @@\n   dependencies:\n     \"@typescript-eslint/types\" \"5.62.0\"\n     \"@typescript-eslint/visitor-keys\" \"5.62.0\"\n \n-\"@typescript-eslint/scope-manager@8.36.0\":\n-  version \"8.36.0\"\n-  resolved \"https://registry.yarnpkg.com/@typescript-eslint/scope-manager/-/scope-manager-8.36.0.tgz#23e4196ed07d7ea3737a584fbebc9a79c3835168\"\n-  integrity sha512-wCnapIKnDkN62fYtTGv2+RY8FlnBYA3tNm0fm91kc2BjPhV2vIjwwozJ7LToaLAyb1ca8BxrS7vT+Pvvf7RvqA==\n+\"@typescript-eslint/scope-manager@8.37.0\":\n+  version \"8.37.0\"\n+  resolved \"https://registry.yarnpkg.com/@typescript-eslint/scope-manager/-/scope-manager-8.37.0.tgz#a31a3c80ca2ef4ed58de13742debb692e7d4c0a4\"\n+  integrity sha512-0vGq0yiU1gbjKob2q691ybTg9JX6ShiVXAAfm2jGf3q0hdP6/BruaFjL/ManAR/lj05AvYCH+5bbVo0VtzmjOA==\n   dependencies:\n-    \"@typescript-eslint/types\" \"8.36.0\"\n-    \"@typescript-eslint/visitor-keys\" \"8.36.0\"\n+    \"@typescript-eslint/types\" \"8.37.0\"\n+    \"@typescript-eslint/visitor-keys\" \"8.37.0\"\n \n-\"@typescript-eslint/tsconfig-utils@8.36.0\", \"@typescript-eslint/tsconfig-utils@^8.36.0\":\n-  version \"8.36.0\"\n-  resolved \"https://registry.yarnpkg.com/@typescript-eslint/tsconfig-utils/-/tsconfig-utils-8.36.0.tgz#63ef8a20ae9b5754c6ceacbe87b2fe1aab12ba13\"\n-  integrity sha512-Nhh3TIEgN18mNbdXpd5Q8mSCBnrZQeY9V7Ca3dqYvNDStNIGRmJA6dmrIPMJ0kow3C7gcQbpsG2rPzy1Ks/AnA==\n+\"@typescript-eslint/tsconfig-utils@8.37.0\", \"@typescript-eslint/tsconfig-utils@^8.37.0\":\n+  version \"8.37.0\"\n+  resolved \"https://registry.yarnpkg.com/@typescript-eslint/tsconfig-utils/-/tsconfig-utils-8.37.0.tgz#47a2760d265c6125f8e7864bc5c8537cad2bd053\"\n+  integrity sha512-1/YHvAVTimMM9mmlPvTec9NP4bobA1RkDbMydxG8omqwJJLEW/Iy2C4adsAESIXU3WGLXFHSZUU+C9EoFWl4Zg==\n \n \"@typescript-eslint/type-utils@5.62.0\":\n   version \"5.62.0\"\n   resolved \"https://registry.yarnpkg.com/@typescript-eslint/type-utils/-/type-utils-5.62.0.tgz#286f0389c41681376cdad96b309cedd17d70346a\"\n@@ -2903,27 +2859,28 @@\n     \"@typescript-eslint/utils\" \"5.62.0\"\n     debug \"^4.3.4\"\n     tsutils \"^3.21.0\"\n \n-\"@typescript-eslint/type-utils@8.36.0\":\n-  version \"8.36.0\"\n-  resolved \"https://registry.yarnpkg.com/@typescript-eslint/type-utils/-/type-utils-8.36.0.tgz#16b092c2cbbb5549f6a4df1382a481586850502f\"\n-  integrity sha512-5aaGYG8cVDd6cxfk/ynpYzxBRZJk7w/ymto6uiyUFtdCozQIsQWh7M28/6r57Fwkbweng8qAzoMCPwSJfWlmsg==\n+\"@typescript-eslint/type-utils@8.37.0\":\n+  version \"8.37.0\"\n+  resolved \"https://registry.yarnpkg.com/@typescript-eslint/type-utils/-/type-utils-8.37.0.tgz#2a682e4c6ff5886712dad57e9787b5e417124507\"\n+  integrity sha512-SPkXWIkVZxhgwSwVq9rqj/4VFo7MnWwVaRNznfQDc/xPYHjXnPfLWn+4L6FF1cAz6e7dsqBeMawgl7QjUMj4Ow==\n   dependencies:\n-    \"@typescript-eslint/typescript-estree\" \"8.36.0\"\n-    \"@typescript-eslint/utils\" \"8.36.0\"\n+    \"@typescript-eslint/types\" \"8.37.0\"\n+    \"@typescript-eslint/typescript-estree\" \"8.37.0\"\n+    \"@typescript-eslint/utils\" \"8.37.0\"\n     debug \"^4.3.4\"\n     ts-api-utils \"^2.1.0\"\n \n \"@typescript-eslint/types@5.62.0\":\n   version \"5.62.0\"\n   resolved \"https://registry.yarnpkg.com/@typescript-eslint/types/-/types-5.62.0.tgz#258607e60effa309f067608931c3df6fed41fd2f\"\n   integrity sha512-87NVngcbVXUahrRTqIK27gD2t5Cu1yuCXxbLcFtCzZGlfyVWWh8mLHkoxzjsB6DDNnvdL+fW8MiwPEJyGJQDgQ==\n \n-\"@typescript-eslint/types@8.36.0\", \"@typescript-eslint/types@^8.36.0\":\n-  version \"8.36.0\"\n-  resolved \"https://registry.yarnpkg.com/@typescript-eslint/types/-/types-8.36.0.tgz#d3d184adc2899e2912c13b17c1590486ef37c7ac\"\n-  integrity sha512-xGms6l5cTJKQPZOKM75Dl9yBfNdGeLRsIyufewnxT4vZTrjC0ImQT4fj8QmtJK84F58uSh5HVBSANwcfiXxABQ==\n+\"@typescript-eslint/types@8.37.0\", \"@typescript-eslint/types@^8.37.0\":\n+  version \"8.37.0\"\n+  resolved \"https://registry.yarnpkg.com/@typescript-eslint/types/-/types-8.37.0.tgz#09517aa9625eb3c68941dde3ac8835740587b6ff\"\n+  integrity sha512-ax0nv7PUF9NOVPs+lmQ7yIE7IQmAf8LGcXbMvHX5Gm+YJUYNAl340XkGnrimxZ0elXyoQJuN5sbg6C4evKA4SQ==\n \n \"@typescript-eslint/typescript-estree@5.62.0\":\n   version \"5.62.0\"\n   resolved \"https://registry.yarnpkg.com/@typescript-eslint/typescript-estree/-/typescript-estree-5.62.0.tgz#7d17794b77fabcac615d6a48fb143330d962eb9b\"\n@@ -2936,17 +2893,17 @@\n     is-glob \"^4.0.3\"\n     semver \"^7.3.7\"\n     tsutils \"^3.21.0\"\n \n-\"@typescript-eslint/typescript-estree@8.36.0\":\n-  version \"8.36.0\"\n-  resolved \"https://registry.yarnpkg.com/@typescript-eslint/typescript-estree/-/typescript-estree-8.36.0.tgz#344857fa79f71715369554a3cbb6b4ff8695a7bc\"\n-  integrity sha512-JaS8bDVrfVJX4av0jLpe4ye0BpAaUW7+tnS4Y4ETa3q7NoZgzYbN9zDQTJ8kPb5fQ4n0hliAt9tA4Pfs2zA2Hg==\n+\"@typescript-eslint/typescript-estree@8.37.0\":\n+  version \"8.37.0\"\n+  resolved \"https://registry.yarnpkg.com/@typescript-eslint/typescript-estree/-/typescript-estree-8.37.0.tgz#a07e4574d8e6e4355a558f61323730c987f5fcbc\"\n+  integrity sha512-zuWDMDuzMRbQOM+bHyU4/slw27bAUEcKSKKs3hcv2aNnc/tvE/h7w60dwVw8vnal2Pub6RT1T7BI8tFZ1fE+yg==\n   dependencies:\n-    \"@typescript-eslint/project-service\" \"8.36.0\"\n-    \"@typescript-eslint/tsconfig-utils\" \"8.36.0\"\n-    \"@typescript-eslint/types\" \"8.36.0\"\n-    \"@typescript-eslint/visitor-keys\" \"8.36.0\"\n+    \"@typescript-eslint/project-service\" \"8.37.0\"\n+    \"@typescript-eslint/tsconfig-utils\" \"8.37.0\"\n+    \"@typescript-eslint/types\" \"8.37.0\"\n+    \"@typescript-eslint/visitor-keys\" \"8.37.0\"\n     debug \"^4.3.4\"\n     fast-glob \"^3.3.2\"\n     is-glob \"^4.0.3\"\n     minimatch \"^9.0.4\"\n@@ -2966,17 +2923,17 @@\n     \"@typescript-eslint/typescript-estree\" \"5.62.0\"\n     eslint-scope \"^5.1.1\"\n     semver \"^7.3.7\"\n \n-\"@typescript-eslint/utils@8.36.0\":\n-  version \"8.36.0\"\n-  resolved \"https://registry.yarnpkg.com/@typescript-eslint/utils/-/utils-8.36.0.tgz#2c9af5292f14e0aa4b0e9c7ac0406afafb299acf\"\n-  integrity sha512-VOqmHu42aEMT+P2qYjylw6zP/3E/HvptRwdn/PZxyV27KhZg2IOszXod4NcXisWzPAGSS4trE/g4moNj6XmH2g==\n+\"@typescript-eslint/utils@8.37.0\":\n+  version \"8.37.0\"\n+  resolved \"https://registry.yarnpkg.com/@typescript-eslint/utils/-/utils-8.37.0.tgz#189ea59b2709f5d898614611f091a776751ee335\"\n+  integrity sha512-TSFvkIW6gGjN2p6zbXo20FzCABbyUAuq6tBvNRGsKdsSQ6a7rnV6ADfZ7f4iI3lIiXc4F4WWvtUfDw9CJ9pO5A==\n   dependencies:\n     \"@eslint-community/eslint-utils\" \"^4.7.0\"\n-    \"@typescript-eslint/scope-manager\" \"8.36.0\"\n-    \"@typescript-eslint/types\" \"8.36.0\"\n-    \"@typescript-eslint/typescript-estree\" \"8.36.0\"\n+    \"@typescript-eslint/scope-manager\" \"8.37.0\"\n+    \"@typescript-eslint/types\" \"8.37.0\"\n+    \"@typescript-eslint/typescript-estree\" \"8.37.0\"\n \n \"@typescript-eslint/visitor-keys@5.62.0\":\n   version \"5.62.0\"\n   resolved \"https://registry.yarnpkg.com/@typescript-eslint/visitor-keys/-/visitor-keys-5.62.0.tgz#2174011917ce582875954ffe2f6912d5931e353e\"\n@@ -2984,14 +2941,14 @@\n   dependencies:\n     \"@typescript-eslint/types\" \"5.62.0\"\n     eslint-visitor-keys \"^3.3.0\"\n \n-\"@typescript-eslint/visitor-keys@8.36.0\":\n-  version \"8.36.0\"\n-  resolved \"https://registry.yarnpkg.com/@typescript-eslint/visitor-keys/-/visitor-keys-8.36.0.tgz#7dc6ba4dd037979eb3a3bdd2093aa3604bb73674\"\n-  integrity sha512-vZrhV2lRPWDuGoxcmrzRZyxAggPL+qp3WzUrlZD+slFueDiYHxeBa34dUXPuC0RmGKzl4lS5kFJYvKCq9cnNDA==\n+\"@typescript-eslint/visitor-keys@8.37.0\":\n+  version \"8.37.0\"\n+  resolved \"https://registry.yarnpkg.com/@typescript-eslint/visitor-keys/-/visitor-keys-8.37.0.tgz#cdb6a6bd3e8d6dd69bd70c1bdda36e2d18737455\"\n+  integrity sha512-YzfhzcTnZVPiLfP/oeKtDp2evwvHLMe0LOy7oe+hb9KKIumLNohYS9Hgp1ifwpu42YWxhZE8yieggz6JpqO/1w==\n   dependencies:\n-    \"@typescript-eslint/types\" \"8.36.0\"\n+    \"@typescript-eslint/types\" \"8.37.0\"\n     eslint-visitor-keys \"^4.2.1\"\n \n \"@ungap/structured-clone@^1.2.0\":\n   version \"1.3.0\"\n@@ -3296,11 +3253,11 @@\n     mime-types \"~2.1.34\"\n     negotiator \"0.6.3\"\n \n acorn-import-phases@^1.0.3:\n-  version \"1.0.3\"\n-  resolved \"https://registry.yarnpkg.com/acorn-import-phases/-/acorn-import-phases-1.0.3.tgz#30394a1dccee5f380aecb8205b8c69b4f7ae688e\"\n-  integrity sha512-jtKLnfoOzm28PazuQ4dVBcE9Jeo6ha1GAJvq3N0LlNOszmTfx+wSycBehn+FN0RnyeR77IBxN/qVYMw0Rlj0Xw==\n+  version \"1.0.4\"\n+  resolved \"https://registry.yarnpkg.com/acorn-import-phases/-/acorn-import-phases-1.0.4.tgz#16eb850ba99a056cb7cbfe872ffb8972e18c8bd7\"\n+  integrity sha512-wKmbr/DDiIXzEOiWrTTUcDm24kQ2vGfZQvM2fwg2vXqR5uW6aapr7ObPtj1th32b9u90/Pf4AItvdTh42fBmVQ==\n \n acorn-jsx@^5.3.2:\n   version \"5.3.2\"\n   resolved \"https://registry.yarnpkg.com/acorn-jsx/-/acorn-jsx-5.3.2.tgz#7ed5bb55908b3b2f1bc55c6af1653bada7f07937\"\n@@ -3997,9 +3954,9 @@\n   version \"1.4.3\"\n   resolved \"https://registry.yarnpkg.com/cjs-module-lexer/-/cjs-module-lexer-1.4.3.tgz#0f79731eb8cfe1ec72acd4066efac9d61991b00d\"\n   integrity sha512-9z8TZaGM1pfswYeXrUpzPrkx8UnWYdhJclsiYMm6x/w5+nN+8Tf/LnAgfLGQCm59qAOxU8WwHEq2vNwF6i4j+Q==\n \n-class-variance-authority@^0.7.0, class-variance-authority@^0.7.1:\n+class-variance-authority@^0.7.1:\n   version \"0.7.1\"\n   resolved \"https://registry.yarnpkg.com/class-variance-authority/-/class-variance-authority-0.7.1.tgz#4008a798a0e4553a781a57ac5177c9fb5d043787\"\n   integrity sha512-Ka+9Trutv7G8M6WT6SeiRWz792K5qEqIGEGzXKhAE6xOWAY6pPH8U+9IY3oCMv6kqTmLsv7Xh/2w2RigkePMsg==\n   dependencies:\n@@ -4846,11 +4803,11 @@\n   resolved \"https://registry.yarnpkg.com/ee-first/-/ee-first-1.1.1.tgz#590c61156b0ae2f4f0255732a158b266bc56b21d\"\n   integrity sha512-WMwm9LhRUo+WUaRN+vRuETqG89IgZphVSNkdFgeb6sS/E4OrDIN7t48CAewSHXc6C8lefD8KKfr5vY61brQlow==\n \n electron-to-chromium@^1.5.173:\n-  version \"1.5.182\"\n-  resolved \"https://registry.yarnpkg.com/electron-to-chromium/-/electron-to-chromium-1.5.182.tgz#4ab73104f893938acb3ab9c28d7bec170c116b3e\"\n-  integrity sha512-Lv65Btwv9W4J9pyODI6EWpdnhfvrve/us5h1WspW8B2Fb0366REPtY3hX7ounk1CkV/TBjWCEvCBBbYbmV0qCA==\n+  version \"1.5.187\"\n+  resolved \"https://registry.yarnpkg.com/electron-to-chromium/-/electron-to-chromium-1.5.187.tgz#8c58854e065962351dc87e95614dd78d50425966\"\n+  integrity sha512-cl5Jc9I0KGUoOoSbxvTywTa40uspGJt/BDBoDLoxJRSBpWh4FFXBsjNRHfQrONsV/OoEjDfHUmZQa2d6Ze4YgA==\n \n element-resize-detector@^1.1.9:\n   version \"1.2.4\"\n   resolved \"https://registry.yarnpkg.com/element-resize-detector/-/element-resize-detector-1.2.4.tgz#3e6c5982dd77508b5fa7e6d5c02170e26325c9b1\"\n@@ -4858,11 +4815,11 @@\n   dependencies:\n     batch-processor \"1.0.0\"\n \n emoji-picker-react@^4.5.16:\n-  version \"4.13.1\"\n-  resolved \"https://registry.yarnpkg.com/emoji-picker-react/-/emoji-picker-react-4.13.1.tgz#f1d0c7624e757b30d6025cb4afe0a546511516f8\"\n-  integrity sha512-0I+8stp8/l3H/DAa8axeO/ffb7NmqSs4zlh4fW+CgQ4BsEaNiDnXFv6Ll72iZiGzvIKR4GEVVAkj3B692Ey3Gg==\n+  version \"4.13.2\"\n+  resolved \"https://registry.yarnpkg.com/emoji-picker-react/-/emoji-picker-react-4.13.2.tgz#cf2a669ae902c982b9f0b4bddc78f7cdbe6ff384\"\n+  integrity sha512-azaJQLTshEOZVhksgU136izJWJyZ4Clx6xQ6Vctzk1gOdPPAUbTa/JYDwZJ8rh97QxnjpyeftXl99eRlYr3vNA==\n   dependencies:\n     flairup \"1.0.0\"\n \n emoji-regex@^10.3.0, emoji-regex@^10.4.0:\n@@ -5150,11 +5107,11 @@\n     eslint-plugin-react \"^7.33.2\"\n     eslint-plugin-react-hooks \"^4.5.0 || 5.0.0-canary-7118f5dd7-20230705\"\n \n eslint-config-prettier@^9.1.0:\n-  version \"9.1.0\"\n-  resolved \"https://registry.yarnpkg.com/eslint-config-prettier/-/eslint-config-prettier-9.1.0.tgz#31af3d94578645966c082fcb71a5846d3c94867f\"\n-  integrity sha512-NSWl5BFQWEPi1j4TjVNItzYV7dZXZ+wP6I6ZhrBGpChQhZRUaElihE9uRRkcbRnNb76UMKDF3r+WTmNcGPKsqw==\n+  version \"9.1.2\"\n+  resolved \"https://registry.yarnpkg.com/eslint-config-prettier/-/eslint-config-prettier-9.1.2.tgz#90deb4fa0259592df774b600dbd1d2249a78ce91\"\n+  integrity sha512-iI1f+D2ViGn+uvv5HuHVUamg8ll4tN+JRHGc6IJi4TP9Kl976C57fzPXgseXNs8v0iA8aSJpHsTWjDb9QJamGQ==\n \n eslint-config-turbo@^1.12.4:\n   version \"1.13.4\"\n   resolved \"https://registry.yarnpkg.com/eslint-config-turbo/-/eslint-config-turbo-1.13.4.tgz#9c06f10c4e5d971d317baee8695fbdda24b92804\"\n@@ -5737,11 +5694,11 @@\n     semver \"^7.3.5\"\n     tapable \"^2.2.1\"\n \n form-data@^4.0.0:\n-  version \"4.0.3\"\n-  resolved \"https://registry.yarnpkg.com/form-data/-/form-data-4.0.3.tgz#608b1b3f3e28be0fccf5901fc85fb3641e5cf0ae\"\n-  integrity sha512-qsITQPfmvMOSAdeyZ+12I1c+CKSstAFAwu+97zrnWAbIr5u8wfsExUzCesVLC8NgHuRUqNN4Zy6UPWUTRGslcA==\n+  version \"4.0.4\"\n+  resolved \"https://registry.yarnpkg.com/form-data/-/form-data-4.0.4.tgz#784cdcce0669a9d68e94d11ac4eea98088edd2c4\"\n+  integrity sha512-KrGhL9Q4zjj0kiUt5OO4Mr/A/jlI2jDYs5eHBpYHPcBEVSiipAvn2Ko2HnPe20rmcuuvMHNdZFp+4IlGTMF0Ow==\n   dependencies:\n     asynckit \"^0.4.0\"\n     combined-stream \"^1.0.8\"\n     es-set-tostringtag \"^2.1.0\"\n@@ -5786,11 +5743,11 @@\n     jsonfile \"^6.0.1\"\n     universalify \"^2.0.0\"\n \n fs-monkey@^1.0.4:\n-  version \"1.0.6\"\n-  resolved \"https://registry.yarnpkg.com/fs-monkey/-/fs-monkey-1.0.6.tgz#8ead082953e88d992cf3ff844faa907b26756da2\"\n-  integrity sha512-b1FMfwetIKymC0eioW7mTywihSQE4oLzQn1dB6rZB5fx/3NpNEdAWeCSMB+60/AeT0TCXsxzAlcYVEFCTAksWg==\n+  version \"1.1.0\"\n+  resolved \"https://registry.yarnpkg.com/fs-monkey/-/fs-monkey-1.1.0.tgz#632aa15a20e71828ed56b24303363fb1414e5997\"\n+  integrity sha512-QMUezzXWII9EV5aTFXW1UBVUO77wYPpjqIF8/AviUCThNeSYZykpoTixUeaNNBwmCev0AMDWMAni+f8Hxb1IFw==\n \n fs.realpath@^1.0.0:\n   version \"1.0.0\"\n   resolved \"https://registry.yarnpkg.com/fs.realpath/-/fs.realpath-1.0.0.tgz#1504ad2523158caa40db4a2787cb01411994ea4f\"\n@@ -6813,11 +6770,11 @@\n     prelude-ls \"^1.2.1\"\n     type-check \"~0.4.0\"\n \n lib0@^0.2.109, lib0@^0.2.47, lib0@^0.2.74, lib0@^0.2.85, lib0@^0.2.87, lib0@^0.2.99:\n-  version \"0.2.109\"\n-  resolved \"https://registry.yarnpkg.com/lib0/-/lib0-0.2.109.tgz#78a4a15cfb9de489a031396c6497eefe620ca794\"\n-  integrity sha512-jP0gbnyW0kwlx1Atc4dcHkBbrVAkdHjuyHxtClUPYla7qCmwIif1qZ6vQeJdR5FrOVdn26HvQT0ko01rgW7/Xw==\n+  version \"0.2.114\"\n+  resolved \"https://registry.yarnpkg.com/lib0/-/lib0-0.2.114.tgz#0b0e55c3ffa8768fe3d9efca971059f465db4baf\"\n+  integrity sha512-gcxmNFzA4hv8UYi8j43uPlQ7CGcyMJ2KQb5kZASw6SnAKAf10hK12i2fjrS3Cl/ugZa5Ui6WwIu1/6MIXiHttQ==\n   dependencies:\n     isomorphic.js \"^0.2.4\"\n \n lilconfig@^3.0.0, lilconfig@^3.1.1, lilconfig@^3.1.3:\n@@ -7493,11 +7450,11 @@\n   resolved \"https://registry.yarnpkg.com/napi-build-utils/-/napi-build-utils-2.0.0.tgz#13c22c0187fcfccce1461844136372a47ddc027e\"\n   integrity sha512-GEbrYkbfF7MoNaoh2iGG84Mnf/WZfB0GdGEsM8wz7Expx/LlWf5U8t9nvJKXSp3qr5IsEbK04cBGhol/KwOsWA==\n \n napi-postinstall@^0.3.0:\n-  version \"0.3.0\"\n-  resolved \"https://registry.yarnpkg.com/napi-postinstall/-/napi-postinstall-0.3.0.tgz#888e51d1fb500e86dcf6ace1baccdbb377e654ce\"\n-  integrity sha512-M7NqKyhODKV1gRLdkwE7pDsZP2/SC2a2vHkOYh9MCpKMbWVfyVfUw5MaH83Fv6XMjxr5jryUp3IDDL9rlxsTeA==\n+  version \"0.3.2\"\n+  resolved \"https://registry.yarnpkg.com/napi-postinstall/-/napi-postinstall-0.3.2.tgz#03c62080e88b311c4d7423b0f15f0c920bbcc626\"\n+  integrity sha512-tWVJxJHmBWLy69PvO96TZMZDrzmw5KeiZBz3RHmiM2XZ9grBJ2WgMAFVVg25nqp3ZjTFUs2Ftw1JhscL3Teliw==\n \n natural-compare-lite@^1.4.0:\n   version \"1.4.0\"\n   resolved \"https://registry.yarnpkg.com/natural-compare-lite/-/natural-compare-lite-1.4.0.tgz#17b09581988979fddafe0201e931ba933c96cbb4\"\n@@ -7986,11 +7943,11 @@\n   resolved \"https://registry.yarnpkg.com/picomatch/-/picomatch-2.3.1.tgz#3ba3833733646d9d3e4995946c1365a67fb07a42\"\n   integrity sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==\n \n picomatch@^4.0.2:\n-  version \"4.0.2\"\n-  resolved \"https://registry.yarnpkg.com/picomatch/-/picomatch-4.0.2.tgz#77c742931e8f3b8820946c76cd0c1f13730d1dab\"\n-  integrity sha512-M7BAV6Rlcy5u+m6oPhAPFgJTzAioX/6B0DxyvDlo9l8+T3nLKbrczg2WLUyzd45L8RqfUMyGPzekbMvX2Ldkwg==\n+  version \"4.0.3\"\n+  resolved \"https://registry.yarnpkg.com/picomatch/-/picomatch-4.0.3.tgz#796c76136d1eead715db1e7bad785dedd695a042\"\n+  integrity sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==\n \n pify@^2.3.0:\n   version \"2.3.0\"\n   resolved \"https://registry.yarnpkg.com/pify/-/pify-2.3.0.tgz#ed141a6ac043a849ea588498e7dca8b15330e90c\"\n@@ -8352,9 +8309,9 @@\n   version \"6.5.0\"\n   resolved \"https://registry.yarnpkg.com/property-information/-/property-information-6.5.0.tgz#6212fbb52ba757e92ef4fb9d657563b933b7ffec\"\n   integrity sha512-PgTgs/BlvHxOu8QuEN7wi5A0OmXaBcHpmCSTehcs6Uuu9IkDIEo13Hy7n898RHfrQ49vKCoGeWZSaAK01nwVig==\n \n-prosemirror-changeset@^2.2.1, prosemirror-changeset@^2.3.0:\n+prosemirror-changeset@^2.3.0:\n   version \"2.3.1\"\n   resolved \"https://registry.yarnpkg.com/prosemirror-changeset/-/prosemirror-changeset-2.3.1.tgz#eee3299cfabc7a027694e9abdc4e85505e9dd5e7\"\n   integrity sha512-j0kORIBm8ayJNl3zQvD1TTPHJX3g042et6y/KQhZhnPrruO8exkTgG8X+NRpj7kIyMMEx74Xb3DyMIBtO0IKkQ==\n   dependencies:\n@@ -8476,9 +8433,9 @@\n     prosemirror-model \"^1.0.0\"\n     prosemirror-transform \"^1.0.0\"\n     prosemirror-view \"^1.27.0\"\n \n-prosemirror-tables@^1.6.1, prosemirror-tables@^1.6.4:\n+prosemirror-tables@^1.6.4:\n   version \"1.7.1\"\n   resolved \"https://registry.yarnpkg.com/prosemirror-tables/-/prosemirror-tables-1.7.1.tgz#df2507f285c6c7563097b4904cb7c4b9e0cd724b\"\n   integrity sha512-eRQ97Bf+i9Eby99QbyAiyov43iOKgWa7QCGly+lrDt7efZ1v8NWolhXiB43hSDGIXT1UXgbs4KJN3a06FGpr1Q==\n   dependencies:\n@@ -8502,14 +8459,9 @@\n   integrity sha512-pwDy22nAnGqNR1feOQKHxoFkkUtepoFAd3r2hbEDsnf4wp57kKA36hXsB3njA9FtONBEwSDnDeCiJe+ItD+ykw==\n   dependencies:\n     prosemirror-model \"^1.21.0\"\n \n-prosemirror-utils@^1.2.2:\n-  version \"1.2.2\"\n-  resolved \"https://registry.yarnpkg.com/prosemirror-utils/-/prosemirror-utils-1.2.2.tgz#21ff3777e7b9b22b9ec8d7ded7d15b9aeeb1d008\"\n-  integrity sha512-7a2MPf99oCW8/587rQYI1/snX71Ban40+apr1hLkY8TmU9YXd7JeR6QsmktcTisJURO3WRjxIia4lTMsYgZVOw==\n-\n-prosemirror-view@^1.0.0, prosemirror-view@^1.1.0, prosemirror-view@^1.27.0, prosemirror-view@^1.31.0, prosemirror-view@^1.37.0, prosemirror-view@^1.39.1:\n+prosemirror-view@1.40.0, prosemirror-view@^1.0.0, prosemirror-view@^1.1.0, prosemirror-view@^1.27.0, prosemirror-view@^1.31.0, prosemirror-view@^1.37.0, prosemirror-view@^1.39.1:\n   version \"1.40.0\"\n   resolved \"https://registry.yarnpkg.com/prosemirror-view/-/prosemirror-view-1.40.0.tgz#212e627a0c4f0198ac9823a1232e0099c9a92865\"\n   integrity sha512-2G3svX0Cr1sJjkD/DYWSe3cfV5VPVTBOxI9XQEGWJDFEpsZb/gh4MV29ctv+OJx2RFX4BLt09i+6zaGM/ldkCw==\n   dependencies:\n@@ -9086,34 +9038,34 @@\n   dependencies:\n     glob \"^7.1.3\"\n \n rollup@^4.34.8:\n-  version \"4.45.0\"\n-  resolved \"https://registry.yarnpkg.com/rollup/-/rollup-4.45.0.tgz#92d1b164eca1c6f2cb399ae7a1a8ee78967b6e33\"\n-  integrity sha512-WLjEcJRIo7i3WDDgOIJqVI2d+lAC3EwvOGy+Xfq6hs+GQuAA4Di/H72xmXkOhrIWFg2PFYSKZYfH0f4vfKXN4A==\n+  version \"4.45.1\"\n+  resolved \"https://registry.yarnpkg.com/rollup/-/rollup-4.45.1.tgz#d0ef72a8d0a9210d832f9c3c5f3b6a2aa4b0ba64\"\n+  integrity sha512-4iya7Jb76fVpQyLoiVpzUrsjQ12r3dM7fIVz+4NwoYvZOShknRmiv+iu9CClZml5ZLGb0XMcYLutK6w9tgxHDw==\n   dependencies:\n     \"@types/estree\" \"1.0.8\"\n   optionalDependencies:\n-    \"@rollup/rollup-android-arm-eabi\" \"4.45.0\"\n-    \"@rollup/rollup-android-arm64\" \"4.45.0\"\n-    \"@rollup/rollup-darwin-arm64\" \"4.45.0\"\n-    \"@rollup/rollup-darwin-x64\" \"4.45.0\"\n-    \"@rollup/rollup-freebsd-arm64\" \"4.45.0\"\n-    \"@rollup/rollup-freebsd-x64\" \"4.45.0\"\n-    \"@rollup/rollup-linux-arm-gnueabihf\" \"4.45.0\"\n-    \"@rollup/rollup-linux-arm-musleabihf\" \"4.45.0\"\n-    \"@rollup/rollup-linux-arm64-gnu\" \"4.45.0\"\n-    \"@rollup/rollup-linux-arm64-musl\" \"4.45.0\"\n-    \"@rollup/rollup-linux-loongarch64-gnu\" \"4.45.0\"\n-    \"@rollup/rollup-linux-powerpc64le-gnu\" \"4.45.0\"\n-    \"@rollup/rollup-linux-riscv64-gnu\" \"4.45.0\"\n-    \"@rollup/rollup-linux-riscv64-musl\" \"4.45.0\"\n-    \"@rollup/rollup-linux-s390x-gnu\" \"4.45.0\"\n-    \"@rollup/rollup-linux-x64-gnu\" \"4.45.0\"\n-    \"@rollup/rollup-linux-x64-musl\" \"4.45.0\"\n-    \"@rollup/rollup-win32-arm64-msvc\" \"4.45.0\"\n-    \"@rollup/rollup-win32-ia32-msvc\" \"4.45.0\"\n-    \"@rollup/rollup-win32-x64-msvc\" \"4.45.0\"\n+    \"@rollup/rollup-android-arm-eabi\" \"4.45.1\"\n+    \"@rollup/rollup-android-arm64\" \"4.45.1\"\n+    \"@rollup/rollup-darwin-arm64\" \"4.45.1\"\n+    \"@rollup/rollup-darwin-x64\" \"4.45.1\"\n+    \"@rollup/rollup-freebsd-arm64\" \"4.45.1\"\n+    \"@rollup/rollup-freebsd-x64\" \"4.45.1\"\n+    \"@rollup/rollup-linux-arm-gnueabihf\" \"4.45.1\"\n+    \"@rollup/rollup-linux-arm-musleabihf\" \"4.45.1\"\n+    \"@rollup/rollup-linux-arm64-gnu\" \"4.45.1\"\n+    \"@rollup/rollup-linux-arm64-musl\" \"4.45.1\"\n+    \"@rollup/rollup-linux-loongarch64-gnu\" \"4.45.1\"\n+    \"@rollup/rollup-linux-powerpc64le-gnu\" \"4.45.1\"\n+    \"@rollup/rollup-linux-riscv64-gnu\" \"4.45.1\"\n+    \"@rollup/rollup-linux-riscv64-musl\" \"4.45.1\"\n+    \"@rollup/rollup-linux-s390x-gnu\" \"4.45.1\"\n+    \"@rollup/rollup-linux-x64-gnu\" \"4.45.1\"\n+    \"@rollup/rollup-linux-x64-musl\" \"4.45.1\"\n+    \"@rollup/rollup-win32-arm64-msvc\" \"4.45.1\"\n+    \"@rollup/rollup-win32-ia32-msvc\" \"4.45.1\"\n+    \"@rollup/rollup-win32-x64-msvc\" \"4.45.1\"\n     fsevents \"~2.3.2\"\n \n rope-sequence@^1.3.0:\n   version \"1.3.4\"\n@@ -9580,26 +9532,17 @@\n     text-decoder \"^1.1.0\"\n   optionalDependencies:\n     bare-events \"^2.2.0\"\n \n-\"string-width-cjs@npm:string-width@^4.2.0\":\n+\"string-width-cjs@npm:string-width@^4.2.0\", string-width@^4.1.0, string-width@^4.2.0, string-width@^4.2.3:\n   version \"4.2.3\"\n   resolved \"https://registry.yarnpkg.com/string-width/-/string-width-4.2.3.tgz#269c7117d27b05ad2e536830a8ec895ef9c6d010\"\n   integrity sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==\n   dependencies:\n     emoji-regex \"^8.0.0\"\n     is-fullwidth-code-point \"^3.0.0\"\n     strip-ansi \"^6.0.1\"\n \n-string-width@^4.1.0, string-width@^4.2.0, string-width@^4.2.3:\n-  version \"4.2.3\"\n-  resolved \"https://registry.yarnpkg.com/string-width/-/string-width-4.2.3.tgz#269c7117d27b05ad2e536830a8ec895ef9c6d010\"\n-  integrity sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==\n-  dependencies:\n-    emoji-regex \"^8.0.0\"\n-    is-fullwidth-code-point \"^3.0.0\"\n-    strip-ansi \"^6.0.1\"\n-\n string-width@^5.0.1, string-width@^5.1.2:\n   version \"5.1.2\"\n   resolved \"https://registry.yarnpkg.com/string-width/-/string-width-5.1.2.tgz#14f8daec6d81e7221d2a357e668cab73bdbca794\"\n   integrity sha512-HnLOCR3vjcY8beoNLtcjZ5/nxn2afmME6lhrDrebokqMap+XbeW8n9TXpPDOqdGK5qcI3oT0GKTW6wC7EMiVqA==\n@@ -9682,22 +9625,15 @@\n   integrity sha512-hkRX8U1WjJFd8LsDJ2yQ/wWWxaopEsABU1XfkM8A+j0+85JAGppt16cr1Whg6KIbb4okU6Mql6BOj+uup/wKeA==\n   dependencies:\n     safe-buffer \"~5.2.0\"\n \n-\"strip-ansi-cjs@npm:strip-ansi@^6.0.1\":\n+\"strip-ansi-cjs@npm:strip-ansi@^6.0.1\", strip-ansi@^6.0.0, strip-ansi@^6.0.1:\n   version \"6.0.1\"\n   resolved \"https://registry.yarnpkg.com/strip-ansi/-/strip-ansi-6.0.1.tgz#9e26c63d30f53443e9489495b2105d37b67a85d9\"\n   integrity sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==\n   dependencies:\n     ansi-regex \"^5.0.1\"\n \n-strip-ansi@^6.0.0, strip-ansi@^6.0.1:\n-  version \"6.0.1\"\n-  resolved \"https://registry.yarnpkg.com/strip-ansi/-/strip-ansi-6.0.1.tgz#9e26c63d30f53443e9489495b2105d37b67a85d9\"\n-  integrity sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==\n-  dependencies:\n-    ansi-regex \"^5.0.1\"\n-\n strip-ansi@^7.0.1, strip-ansi@^7.1.0:\n   version \"7.1.0\"\n   resolved \"https://registry.yarnpkg.com/strip-ansi/-/strip-ansi-7.1.0.tgz#d5b6568ca689d8561370b0707685d22434faff45\"\n   integrity sha512-iq6eVVI64nQQTRYq2KtEg2d2uU7LElhTJwsH4YzIHZshxlgZms/wIc4VoDQTlG/IvVIrBKG06CrZnp0qv7hkcQ==\n@@ -10186,49 +10122,49 @@\n   integrity sha512-McnNiV1l8RYeY8tBgEpuodCC1mLUdbSN+CYBL7kJsJNInOP8UjDDEwdk6Mw60vdLLrr5NHKZhMAOSrR2NZuQ+w==\n   dependencies:\n     safe-buffer \"^5.0.1\"\n \n-turbo-darwin-64@2.5.4:\n-  version \"2.5.4\"\n-  resolved \"https://registry.yarnpkg.com/turbo-darwin-64/-/turbo-darwin-64-2.5.4.tgz#f03b3f071365c626d05e84d0d4b9db96348f2951\"\n-  integrity sha512-ah6YnH2dErojhFooxEzmvsoZQTMImaruZhFPfMKPBq8sb+hALRdvBNLqfc8NWlZq576FkfRZ/MSi4SHvVFT9PQ==\n+turbo-darwin-64@2.5.5:\n+  version \"2.5.5\"\n+  resolved \"https://registry.yarnpkg.com/turbo-darwin-64/-/turbo-darwin-64-2.5.5.tgz#96a9f4f0acd61e48685c5be1765fa3a0c9be120d\"\n+  integrity sha512-RYnTz49u4F5tDD2SUwwtlynABNBAfbyT2uU/brJcyh5k6lDLyNfYKdKmqd3K2ls4AaiALWrFKVSBsiVwhdFNzQ==\n \n-turbo-darwin-arm64@2.5.4:\n-  version \"2.5.4\"\n-  resolved \"https://registry.yarnpkg.com/turbo-darwin-arm64/-/turbo-darwin-arm64-2.5.4.tgz#614becf281da75af5a01094373f380ac2b48190a\"\n-  integrity sha512-2+Nx6LAyuXw2MdXb7pxqle3MYignLvS7OwtsP9SgtSBaMlnNlxl9BovzqdYAgkUW3AsYiQMJ/wBRb7d+xemM5A==\n+turbo-darwin-arm64@2.5.5:\n+  version \"2.5.5\"\n+  resolved \"https://registry.yarnpkg.com/turbo-darwin-arm64/-/turbo-darwin-arm64-2.5.5.tgz#2d8e47e1b04d2cb339455adb64fb52c94e587a44\"\n+  integrity sha512-Tk+ZeSNdBobZiMw9aFypQt0DlLsWSFWu1ymqsAdJLuPoAH05qCfYtRxE1pJuYHcJB5pqI+/HOxtJoQ40726Btw==\n \n-turbo-linux-64@2.5.4:\n-  version \"2.5.4\"\n-  resolved \"https://registry.yarnpkg.com/turbo-linux-64/-/turbo-linux-64-2.5.4.tgz#fc7425f35feb19a8373e7926eccdd4a3b2fb77a4\"\n-  integrity sha512-5May2kjWbc8w4XxswGAl74GZ5eM4Gr6IiroqdLhXeXyfvWEdm2mFYCSWOzz0/z5cAgqyGidF1jt1qzUR8hTmOA==\n+turbo-linux-64@2.5.5:\n+  version \"2.5.5\"\n+  resolved \"https://registry.yarnpkg.com/turbo-linux-64/-/turbo-linux-64-2.5.5.tgz#3f8512243d9fa0927d677235d720c07540bf66e8\"\n+  integrity sha512-2/XvMGykD7VgsvWesZZYIIVXMlgBcQy+ZAryjugoTcvJv8TZzSU/B1nShcA7IAjZ0q7OsZ45uP2cOb8EgKT30w==\n \n-turbo-linux-arm64@2.5.4:\n-  version \"2.5.4\"\n-  resolved \"https://registry.yarnpkg.com/turbo-linux-arm64/-/turbo-linux-arm64-2.5.4.tgz#ab5418a88089e4ec20b2c28c3d3c6b8a99b07a81\"\n-  integrity sha512-/2yqFaS3TbfxV3P5yG2JUI79P7OUQKOUvAnx4MV9Bdz6jqHsHwc9WZPpO4QseQm+NvmgY6ICORnoVPODxGUiJg==\n+turbo-linux-arm64@2.5.5:\n+  version \"2.5.5\"\n+  resolved \"https://registry.yarnpkg.com/turbo-linux-arm64/-/turbo-linux-arm64-2.5.5.tgz#705dc5fdaed6b2c8cc9cd35bbd154ed16e4a78d3\"\n+  integrity sha512-DW+8CjCjybu0d7TFm9dovTTVg1VRnlkZ1rceO4zqsaLrit3DgHnN4to4uwyuf9s2V/BwS3IYcRy+HG9BL596Iw==\n \n-turbo-windows-64@2.5.4:\n-  version \"2.5.4\"\n-  resolved \"https://registry.yarnpkg.com/turbo-windows-64/-/turbo-windows-64-2.5.4.tgz#fc78585d3950e5cd64bed8d6648f078e7f32f9a5\"\n-  integrity sha512-EQUO4SmaCDhO6zYohxIjJpOKRN3wlfU7jMAj3CgcyTPvQR/UFLEKAYHqJOnJtymbQmiiM/ihX6c6W6Uq0yC7mA==\n+turbo-windows-64@2.5.5:\n+  version \"2.5.5\"\n+  resolved \"https://registry.yarnpkg.com/turbo-windows-64/-/turbo-windows-64-2.5.5.tgz#70c7937e59d1a48391c4ed300b28d0e58ea22073\"\n+  integrity sha512-q5p1BOy8ChtSZfULuF1BhFMYIx6bevXu4fJ+TE/hyNfyHJIfjl90Z6jWdqAlyaFLmn99X/uw+7d6T/Y/dr5JwQ==\n \n-turbo-windows-arm64@2.5.4:\n-  version \"2.5.4\"\n-  resolved \"https://registry.yarnpkg.com/turbo-windows-arm64/-/turbo-windows-arm64-2.5.4.tgz#5134537cc9fa27f4647f2f899b7ba2dacfc6ad22\"\n-  integrity sha512-oQ8RrK1VS8lrxkLriotFq+PiF7iiGgkZtfLKF4DDKsmdbPo0O9R2mQxm7jHLuXraRCuIQDWMIw6dpcr7Iykf4A==\n+turbo-windows-arm64@2.5.5:\n+  version \"2.5.5\"\n+  resolved \"https://registry.yarnpkg.com/turbo-windows-arm64/-/turbo-windows-arm64-2.5.5.tgz#0ab29d38fcc67ba38652f1cd273df49177cb55b8\"\n+  integrity sha512-AXbF1KmpHUq3PKQwddMGoKMYhHsy5t1YBQO8HZ04HLMR0rWv9adYlQ8kaeQJTko1Ay1anOBFTqaxfVOOsu7+1Q==\n \n turbo@^2.5.4:\n-  version \"2.5.4\"\n-  resolved \"https://registry.yarnpkg.com/turbo/-/turbo-2.5.4.tgz#e46213a4560b94e56c014e0fd56d06605de16753\"\n-  integrity sha512-kc8ZibdRcuWUG1pbYSBFWqmIjynlD8Lp7IB6U3vIzvOv9VG+6Sp8bzyeBWE3Oi8XV5KsQrznyRTBPvrf99E4mA==\n+  version \"2.5.5\"\n+  resolved \"https://registry.yarnpkg.com/turbo/-/turbo-2.5.5.tgz#6057f87c1262acdfa30cf16d4cf74629623f36c9\"\n+  integrity sha512-eZ7wI6KjtT1eBqCnh2JPXWNUAxtoxxfi6VdBdZFvil0ychCOTxbm7YLRBi1JSt7U3c+u3CLxpoPxLdvr/Npr3A==\n   optionalDependencies:\n-    turbo-darwin-64 \"2.5.4\"\n-    turbo-darwin-arm64 \"2.5.4\"\n-    turbo-linux-64 \"2.5.4\"\n-    turbo-linux-arm64 \"2.5.4\"\n-    turbo-windows-64 \"2.5.4\"\n-    turbo-windows-arm64 \"2.5.4\"\n+    turbo-darwin-64 \"2.5.5\"\n+    turbo-darwin-arm64 \"2.5.5\"\n+    turbo-linux-64 \"2.5.5\"\n+    turbo-linux-arm64 \"2.5.5\"\n+    turbo-windows-64 \"2.5.5\"\n+    turbo-windows-arm64 \"2.5.5\"\n \n tween-functions@^1.2.0:\n   version \"1.2.0\"\n   resolved \"https://registry.yarnpkg.com/tween-functions/-/tween-functions-1.2.0.tgz#1ae3a50e7c60bb3def774eac707acbca73bbc3ff\"\n@@ -10705,11 +10641,11 @@\n   resolved \"https://registry.yarnpkg.com/webpack-virtual-modules/-/webpack-virtual-modules-0.6.2.tgz#057faa9065c8acf48f24cb57ac0e77739ab9a7e8\"\n   integrity sha512-66/V2i5hQanC51vBQKPH4aI8NMAcBW59FVBs+rC7eGHupMyfn34q7rZIE+ETlJ+XTevqfUhVVBgSUNSW2flEUQ==\n \n webpack@5:\n-  version \"5.100.1\"\n-  resolved \"https://registry.yarnpkg.com/webpack/-/webpack-5.100.1.tgz#d8a7e7761d253b961248ed9ed7661c51698593de\"\n-  integrity sha512-YJB/ESPUe2Locd0NKXmw72Dx8fZQk1gTzI6rc9TAT4+Sypbnhl8jd8RywB1bDsDF9Dy1RUR7gn3q/ZJTd0OZZg==\n+  version \"5.100.2\"\n+  resolved \"https://registry.yarnpkg.com/webpack/-/webpack-5.100.2.tgz#e2341facf9f7de1d702147c91bcb65b693adf9e8\"\n+  integrity sha512-QaNKAvGCDRh3wW1dsDjeMdDXwZm2vqq3zn6Pvq4rHOEOGSaUMgOOjG2Y9ZbIGzpfkJk9ZYTHpDqgDfeBDcnLaw==\n   dependencies:\n     \"@types/eslint-scope\" \"^3.7.7\"\n     \"@types/estree\" \"^1.0.8\"\n     \"@types/json-schema\" \"^7.0.15\"\n@@ -10873,26 +10809,17 @@\n   version \"1.2.5\"\n   resolved \"https://registry.yarnpkg.com/word-wrap/-/word-wrap-1.2.5.tgz#d2c45c6dd4fbce621a66f136cbe328afd0410b34\"\n   integrity sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==\n \n-\"wrap-ansi-cjs@npm:wrap-ansi@^7.0.0\":\n+\"wrap-ansi-cjs@npm:wrap-ansi@^7.0.0\", wrap-ansi@^7.0.0:\n   version \"7.0.0\"\n   resolved \"https://registry.yarnpkg.com/wrap-ansi/-/wrap-ansi-7.0.0.tgz#67e145cff510a6a6984bdf1152911d69d2eb9e43\"\n   integrity sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==\n   dependencies:\n     ansi-styles \"^4.0.0\"\n     string-width \"^4.1.0\"\n     strip-ansi \"^6.0.0\"\n \n-wrap-ansi@^7.0.0:\n-  version \"7.0.0\"\n-  resolved \"https://registry.yarnpkg.com/wrap-ansi/-/wrap-ansi-7.0.0.tgz#67e145cff510a6a6984bdf1152911d69d2eb9e43\"\n-  integrity sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==\n-  dependencies:\n-    ansi-styles \"^4.0.0\"\n-    string-width \"^4.1.0\"\n-    strip-ansi \"^6.0.0\"\n-\n wrap-ansi@^8.1.0:\n   version \"8.1.0\"\n   resolved \"https://registry.yarnpkg.com/wrap-ansi/-/wrap-ansi-8.1.0.tgz#56dc22368ee570face1b49819975d9b9a5ead214\"\n   integrity sha512-si7QWI6zUMq56bESFvagtmzMdGOtoxfR+Sez11Mobfc7tm+VkUckk9bW2UeffTGVUbOksxmSw0AA2gs8g71NCQ==\n"
        }
      ]
    },
    {
      "id": "validate-descriptions",
      "sha": "69d5cd183f4c42e10fd59ed6b6586af47c21720a",
      "parentSha": "b93883fc1440c58392c21f98be729c13b36e8621",
      "spec": "Implement server-side validation for description content across the API, centralize validation utilities, and refactor the Page binary update flow.\n\n1) Create centralized content validation utilities\n- Add a new module at apps/api/plane/utils/content_validator.py that exposes:\n  - validate_binary_data(data) -> (bool, str|None): Accepts bytes or base64 string, enforces a maximum size of 10MB, ensures basic document validity (length >= 4), and flags suspicious text patterns (e.g., <html, <script, javascript:, data:, <iframe) in the first portion of decoded text. Returns (True, None) when valid, otherwise (False, reason).\n  - validate_html_content(html_content: str) -> (bool, str|None): Enforces the same 10MB limit. Rejects malicious HTML patterns (e.g., script tags, javascript: URLs, data:text/html, dangerous event handlers containing JS), blocks dangerous link/style/meta/iframe usages, and performs a basic unmatched tag check ignoring recognized self-closing tags. Returns (True, None) or (False, reason).\n  - validate_json_content(json_content: dict) -> (bool, str|None): Enforces the same 10MB size. Supports ProseMirror/Tiptap-style documents (type=doc with content array) and validates recursively, with a maximum recursion depth of 20. Flags suspicious script-like patterns in text and dangerous attribute values (href/src/action and event handlers like onclick/onload/onerror). Returns (True, None) or (False, reason).\n- Include internal helpers to traverse JSON content arrays and nested structures with recursion depth guards.\n\n2) Wire validation into serializers (API layer)\n- apps/api/plane/api/serializers/issue.py: In the validate method, when present:\n  - description: validate_json_content\n  - description_html: validate_html_content\n  - description_binary: validate_binary_data\n  Raise serializers.ValidationError with field-specific messages when invalid.\n- apps/api/plane/api/serializers/project.py: In the validate method, when present:\n  - description: If it is a dict, validate with validate_json_content (plain text is allowed without JSON validation).\n  - description_text: validate_json_content\n  - description_html: If a dict, validate with validate_json_content; otherwise validate as an HTML string using validate_html_content (cast to string before checking).\n  Return field-specific errors on invalid input.\n\n3) Wire validation into app serializers\n- apps/api/plane/app/serializers/draft.py (DraftIssueCreateSerializer): In validate, enforce:\n  - description: validate_json_content\n  - description_html: validate_html_content\n  - description_binary: validate_binary_data\n  Return field-specific errors.\n- apps/api/plane/app/serializers/issue.py (IssueFlatSerializer): In validate, enforce the same trio of validators for description, description_html, and description_binary, with field-specific errors.\n- apps/api/plane/app/serializers/project.py (ProjectSerializer): Add a validate method to perform the same validations as the API project serializer case (description dict JSON validation; description_text JSON; description_html JSON-or-HTML depending on type). Return field-specific errors.\n- apps/api/plane/app/serializers/workspace.py (Workspace serializer handling description fields): Add a validate method and enforce:\n  - description: validate_json_content\n  - description_html: validate_html_content\n  - description_binary: validate_binary_data\n  Return field-specific errors.\n\n4) Add a dedicated serializer for Page binary updates\n- In apps/api/plane/app/serializers/page.py, define PageBinaryUpdateSerializer with fields:\n  - description_binary: optional CharField (base64-encoded input)\n  - description_html: optional CharField\n  - description: optional JSONField\n- Implement field-level validators:\n  - description_binary: Decode base64 to bytes and validate using validate_binary_data. On success, return the decoded bytes for assignment. On failure, raise a field-specific error; for decoding issues, return a clear error (e.g., Failed to decode base64 data).\n  - description_html: validate with validate_html_content; return field-specific error on invalid input.\n  - description: validate with validate_json_content; return field-specific error on invalid input.\n- Implement update(instance, validated_data) to assign any provided of description_binary, description_html, and description, save, and return the updated instance.\n- Export PageBinaryUpdateSerializer from apps/api/plane/app/serializers/__init__.py so it can be imported by views.\n\n5) Refactor the Page binary update endpoint to use the new serializer\n- In apps/api/plane/app/views/page/base.py, for the endpoint handling partial updates to page descriptions (binary/HTML/JSON):\n  - Replace manual base64 decoding and direct field assignment with PageBinaryUpdateSerializer(page, data=request.data, partial=True).\n  - If valid, before updating, capture the existing instance state of description_html for change logging. After is_valid():\n    - If description_html provided, queue page_transaction with new_value from request data and old_value as the previous HTML (existing_instance).\n    - Save via serializer.save() to apply validated fields to the model.\n    - Queue page_version with page_id of the updated page, the previous state (existing_instance), and user_id.\n    - Return a success JSON response {\"message\": \"Updated successfully\"}.\n  - If invalid, return serializer.errors with HTTP 400.\n\n6) Imports/exports and error handling\n- Ensure all modified serializers import validate_html_content, validate_json_content, and validate_binary_data from plane.utils.content_validator.\n- Ensure views import PageBinaryUpdateSerializer from the serializers package.\n- Keep existing business logic intact (assignee validations, identifier checks, etc.).\n- Ensure validation is only applied when the respective fields are present in the payload.\n\nObservable outcomes:\n- Submitting malicious or oversized JSON/HTML/binary description payloads to Issue, Project, DraftIssue, Workspace, or Page endpoints results in 400 with field-specific error messages.\n- Valid updates proceed; Page updates run page_transaction and page_version tasks as before.\n- Page binary update uses the new serializer; no manual base64 decoding occurs in the view.",
      "prompt": "Harden server-side handling of description fields across the API. Centralize validation of JSON, HTML, and binary content, enforce reasonable size limits and recursion depth for complex JSON documents, and ensure endpoints return clear 400 responses when content is unsafe. Add a dedicated serializer to validate and apply Page description updates (including base64-encoded binary), and refactor the page description update view to use it while preserving existing background processing for transactions and versioning.",
      "supplementalFiles": [
        "apps/api/plane/db/models/page.py",
        "apps/api/plane/db/models/issue.py",
        "apps/api/plane/db/models/project.py",
        "apps/api/plane/db/models/workspace.py",
        "apps/api/plane/bgtasks/page_version_task.py",
        "apps/api/plane/bgtasks/page_transaction_task.py",
        "apps/api/plane/bgtasks/issue_description_version_task.py",
        "apps/api/plane/utils/html_processor.py",
        "apps/api/plane/utils/url.py",
        "apps/api/plane/settings/storage.py"
      ],
      "fileDiffs": [
        {
          "path": "apps/api/plane/api/serializers/issue.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/api/serializers/issue.py\n===================================================================\n--- apps/api/plane/api/serializers/issue.py\tb93883f (parent)\n+++ apps/api/plane/api/serializers/issue.py\t69d5cd1 (commit)\n@@ -20,8 +20,13 @@\n     ProjectMember,\n     State,\n     User,\n )\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n from .base import BaseSerializer\n from .cycle import CycleLiteSerializer, CycleSerializer\n from .module import ModuleLiteSerializer, ModuleSerializer\n@@ -74,8 +79,24 @@\n \n         except Exception:\n             raise serializers.ValidationError(\"Invalid HTML passed\")\n \n+        # Validate description content for security\n+        if data.get(\"description\"):\n+            is_valid, error_msg = validate_json_content(data[\"description\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description\": error_msg})\n+\n+        if data.get(\"description_html\"):\n+            is_valid, error_msg = validate_html_content(data[\"description_html\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n+        if data.get(\"description_binary\"):\n+            is_valid, error_msg = validate_binary_data(data[\"description_binary\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_binary\": error_msg})\n+\n         # Validate assignees are from project\n         if data.get(\"assignees\", []):\n             data[\"assignees\"] = ProjectMember.objects.filter(\n                 project_id=self.context.get(\"project_id\"),\n"
        },
        {
          "path": "apps/api/plane/api/serializers/project.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/api/serializers/project.py\n===================================================================\n--- apps/api/plane/api/serializers/project.py\tb93883f (parent)\n+++ apps/api/plane/api/serializers/project.py\t69d5cd1 (commit)\n@@ -2,8 +2,13 @@\n from rest_framework import serializers\n \n # Module imports\n from plane.db.models import Project, ProjectIdentifier, WorkspaceMember\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n from .base import BaseSerializer\n \n \n@@ -56,8 +61,31 @@\n             raise serializers.ValidationError(\n                 \"Default assignee should be a user in the workspace\"\n             )\n \n+        # Validate description content for security\n+        if \"description\" in data and data[\"description\"]:\n+            # For Project, description might be text field, not JSON\n+            if isinstance(data[\"description\"], dict):\n+                is_valid, error_msg = validate_json_content(data[\"description\"])\n+                if not is_valid:\n+                    raise serializers.ValidationError({\"description\": error_msg})\n+\n+        if \"description_text\" in data and data[\"description_text\"]:\n+            is_valid, error_msg = validate_json_content(data[\"description_text\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_text\": error_msg})\n+\n+        if \"description_html\" in data and data[\"description_html\"]:\n+            if isinstance(data[\"description_html\"], dict):\n+                is_valid, error_msg = validate_json_content(data[\"description_html\"])\n+            else:\n+                is_valid, error_msg = validate_html_content(\n+                    str(data[\"description_html\"])\n+                )\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n         return data\n \n     def create(self, validated_data):\n         identifier = validated_data.get(\"identifier\", \"\").strip().upper()\n"
        },
        {
          "path": "apps/api/plane/app/serializers/__init__.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/__init__.py\n===================================================================\n--- apps/api/plane/app/serializers/__init__.py\tb93883f (parent)\n+++ apps/api/plane/app/serializers/__init__.py\t69d5cd1 (commit)\n@@ -95,8 +95,9 @@\n     PageLogSerializer,\n     SubPageSerializer,\n     PageDetailSerializer,\n     PageVersionSerializer,\n+    PageBinaryUpdateSerializer,\n     PageVersionDetailSerializer,\n )\n \n from .estimate import (\n"
        },
        {
          "path": "apps/api/plane/app/serializers/draft.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/draft.py\n===================================================================\n--- apps/api/plane/app/serializers/draft.py\tb93883f (parent)\n+++ apps/api/plane/app/serializers/draft.py\t69d5cd1 (commit)\n@@ -16,8 +16,13 @@\n     DraftIssueLabel,\n     DraftIssueCycle,\n     DraftIssueModule,\n )\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n \n class DraftIssueCreateSerializer(BaseSerializer):\n     # ids\n@@ -63,8 +68,25 @@\n             and data.get(\"target_date\", None) is not None\n             and data.get(\"start_date\", None) > data.get(\"target_date\", None)\n         ):\n             raise serializers.ValidationError(\"Start date cannot exceed target date\")\n+\n+        # Validate description content for security\n+        if \"description\" in data and data[\"description\"]:\n+            is_valid, error_msg = validate_json_content(data[\"description\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description\": error_msg})\n+\n+        if \"description_html\" in data and data[\"description_html\"]:\n+            is_valid, error_msg = validate_html_content(data[\"description_html\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n+        if \"description_binary\" in data and data[\"description_binary\"]:\n+            is_valid, error_msg = validate_binary_data(data[\"description_binary\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_binary\": error_msg})\n+\n         return data\n \n     def create(self, validated_data):\n         assignees = validated_data.pop(\"assignee_ids\", None)\n"
        },
        {
          "path": "apps/api/plane/app/serializers/issue.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/issue.py\n===================================================================\n--- apps/api/plane/app/serializers/issue.py\tb93883f (parent)\n+++ apps/api/plane/app/serializers/issue.py\t69d5cd1 (commit)\n@@ -37,8 +37,13 @@\n     IssueVersion,\n     IssueDescriptionVersion,\n     ProjectMember,\n )\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n \n class IssueFlatSerializer(BaseSerializer):\n     ## Contain only flat fields\n@@ -126,8 +131,24 @@\n                 is_active=True,\n                 member_id__in=attrs[\"assignee_ids\"],\n             ).values_list(\"member_id\", flat=True)\n \n+        # Validate description content for security\n+        if \"description\" in attrs and attrs[\"description\"]:\n+            is_valid, error_msg = validate_json_content(attrs[\"description\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description\": error_msg})\n+\n+        if \"description_html\" in attrs and attrs[\"description_html\"]:\n+            is_valid, error_msg = validate_html_content(attrs[\"description_html\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n+        if \"description_binary\" in attrs and attrs[\"description_binary\"]:\n+            is_valid, error_msg = validate_binary_data(attrs[\"description_binary\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_binary\": error_msg})\n+\n         return attrs\n \n     def create(self, validated_data):\n         assignees = validated_data.pop(\"assignee_ids\", None)\n"
        },
        {
          "path": "apps/api/plane/app/serializers/page.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/page.py\n===================================================================\n--- apps/api/plane/app/serializers/page.py\tb93883f (parent)\n+++ apps/api/plane/app/serializers/page.py\t69d5cd1 (commit)\n@@ -1,9 +1,15 @@\n # Third party imports\n from rest_framework import serializers\n+import base64\n \n # Module imports\n from .base import BaseSerializer\n+from plane.utils.content_validator import (\n+    validate_binary_data,\n+    validate_html_content,\n+    validate_json_content,\n+)\n from plane.db.models import (\n     Page,\n     PageLog,\n     PageLabel,\n@@ -185,4 +191,72 @@\n             \"created_by\",\n             \"updated_by\",\n         ]\n         read_only_fields = [\"workspace\", \"page\"]\n+\n+\n+class PageBinaryUpdateSerializer(serializers.Serializer):\n+    \"\"\"Serializer for updating page binary description with validation\"\"\"\n+\n+    description_binary = serializers.CharField(required=False, allow_blank=True)\n+    description_html = serializers.CharField(required=False, allow_blank=True)\n+    description = serializers.JSONField(required=False, allow_null=True)\n+\n+    def validate_description_binary(self, value):\n+        \"\"\"Validate the base64-encoded binary data\"\"\"\n+        if not value:\n+            return value\n+\n+        try:\n+            # Decode the base64 data\n+            binary_data = base64.b64decode(value)\n+\n+            # Validate the binary data\n+            is_valid, error_message = validate_binary_data(binary_data)\n+            if not is_valid:\n+                raise serializers.ValidationError(\n+                    f\"Invalid binary data: {error_message}\"\n+                )\n+\n+            return binary_data\n+        except Exception as e:\n+            if isinstance(e, serializers.ValidationError):\n+                raise\n+            raise serializers.ValidationError(\"Failed to decode base64 data\")\n+\n+    def validate_description_html(self, value):\n+        \"\"\"Validate the HTML content\"\"\"\n+        if not value:\n+            return value\n+\n+        # Use the validation function from utils\n+        is_valid, error_message = validate_html_content(value)\n+        if not is_valid:\n+            raise serializers.ValidationError(error_message)\n+\n+        return value\n+\n+    def validate_description(self, value):\n+        \"\"\"Validate the JSON description\"\"\"\n+        if not value:\n+            return value\n+\n+        # Use the validation function from utils\n+        is_valid, error_message = validate_json_content(value)\n+        if not is_valid:\n+            raise serializers.ValidationError(error_message)\n+\n+        return value\n+\n+    def update(self, instance, validated_data):\n+        \"\"\"Update the page instance with validated data\"\"\"\n+        if \"description_binary\" in validated_data:\n+            instance.description_binary = validated_data.get(\"description_binary\")\n+\n+        if \"description_html\" in validated_data:\n+            instance.description_html = validated_data.get(\"description_html\")\n+\n+        if \"description\" in validated_data:\n+            instance.description = validated_data.get(\"description\")\n+\n+        instance.save()\n+        return instance\n"
        },
        {
          "path": "apps/api/plane/app/serializers/project.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/project.py\n===================================================================\n--- apps/api/plane/app/serializers/project.py\tb93883f (parent)\n+++ apps/api/plane/app/serializers/project.py\t69d5cd1 (commit)\n@@ -12,8 +12,13 @@\n     ProjectIdentifier,\n     DeployBoard,\n     ProjectPublicMember,\n )\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n \n class ProjectSerializer(BaseSerializer):\n     workspace_detail = WorkspaceLiteSerializer(source=\"workspace\", read_only=True)\n@@ -57,8 +62,34 @@\n             )\n \n         return identifier\n \n+    def validate(self, data):\n+        # Validate description content for security\n+        if \"description\" in data and data[\"description\"]:\n+            # For Project, description might be text field, not JSON\n+            if isinstance(data[\"description\"], dict):\n+                is_valid, error_msg = validate_json_content(data[\"description\"])\n+                if not is_valid:\n+                    raise serializers.ValidationError({\"description\": error_msg})\n+\n+        if \"description_text\" in data and data[\"description_text\"]:\n+            is_valid, error_msg = validate_json_content(data[\"description_text\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_text\": error_msg})\n+\n+        if \"description_html\" in data and data[\"description_html\"]:\n+            if isinstance(data[\"description_html\"], dict):\n+                is_valid, error_msg = validate_json_content(data[\"description_html\"])\n+            else:\n+                is_valid, error_msg = validate_html_content(\n+                    str(data[\"description_html\"])\n+                )\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n+        return data\n+\n     def create(self, validated_data):\n         workspace_id = self.context[\"workspace_id\"]\n \n         project = Project.objects.create(**validated_data, workspace_id=workspace_id)\n"
        },
        {
          "path": "apps/api/plane/app/serializers/workspace.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/serializers/workspace.py\n===================================================================\n--- apps/api/plane/app/serializers/workspace.py\tb93883f (parent)\n+++ apps/api/plane/app/serializers/workspace.py\t69d5cd1 (commit)\n@@ -23,8 +23,13 @@\n     WorkspaceUserPreference,\n )\n from plane.utils.constants import RESTRICTED_WORKSPACE_SLUGS\n from plane.utils.url import contains_url\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n # Django imports\n from django.core.validators import URLValidator\n from django.core.exceptions import ValidationError\n@@ -311,9 +316,28 @@\n         fields = \"__all__\"\n         read_only_fields = [\"workspace\", \"owner\"]\n         extra_kwargs = {\"name\": {\"required\": False}}\n \n+    def validate(self, data):\n+        # Validate description content for security\n+        if \"description\" in data and data[\"description\"]:\n+            is_valid, error_msg = validate_json_content(data[\"description\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description\": error_msg})\n \n+        if \"description_html\" in data and data[\"description_html\"]:\n+            is_valid, error_msg = validate_html_content(data[\"description_html\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n+        if \"description_binary\" in data and data[\"description_binary\"]:\n+            is_valid, error_msg = validate_binary_data(data[\"description_binary\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_binary\": error_msg})\n+\n+        return data\n+\n+\n class WorkspaceUserPreferenceSerializer(BaseSerializer):\n     class Meta:\n         model = WorkspaceUserPreference\n         fields = [\"key\", \"is_pinned\", \"sort_order\"]\n"
        },
        {
          "path": "apps/api/plane/app/views/page/base.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/app/views/page/base.py\n===================================================================\n--- apps/api/plane/app/views/page/base.py\tb93883f (parent)\n+++ apps/api/plane/app/views/page/base.py\t69d5cd1 (commit)\n@@ -24,8 +24,9 @@\n     PageLogSerializer,\n     PageSerializer,\n     SubPageSerializer,\n     PageDetailSerializer,\n+    PageBinaryUpdateSerializer,\n )\n from plane.db.models import (\n     Page,\n     PageLog,\n@@ -537,34 +538,29 @@\n         existing_instance = json.dumps(\n             {\"description_html\": page.description_html}, cls=DjangoJSONEncoder\n         )\n \n-        # Get the base64 data from the request\n-        base64_data = request.data.get(\"description_binary\")\n-\n-        # If base64 data is provided\n-        if base64_data:\n-            # Decode the base64 data to bytes\n-            new_binary_data = base64.b64decode(base64_data)\n-            # capture the page transaction\n+        # Use serializer for validation and update\n+        serializer = PageBinaryUpdateSerializer(page, data=request.data, partial=True)\n+        if serializer.is_valid():\n+            # Capture the page transaction\n             if request.data.get(\"description_html\"):\n                 page_transaction.delay(\n                     new_value=request.data, old_value=existing_instance, page_id=pk\n                 )\n-            # Store the updated binary data\n-            page.description_binary = new_binary_data\n-            page.description_html = request.data.get(\"description_html\")\n-            page.description = request.data.get(\"description\")\n-            page.save()\n-            # Return a success response\n+\n+            # Update the page using serializer\n+            updated_page = serializer.save()\n+\n+            # Run background tasks\n             page_version.delay(\n-                page_id=page.id,\n+                page_id=updated_page.id,\n                 existing_instance=existing_instance,\n                 user_id=request.user.id,\n             )\n             return Response({\"message\": \"Updated successfully\"})\n         else:\n-            return Response({\"error\": \"No binary data provided\"})\n+            return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n \n \n class PageDuplicateEndpoint(BaseAPIView):\n     @allow_permission([ROLE.ADMIN, ROLE.MEMBER, ROLE.GUEST])\n"
        },
        {
          "path": "apps/api/plane/space/serializer/issue.py",
          "status": "modified",
          "diff": "Index: apps/api/plane/space/serializer/issue.py\n===================================================================\n--- apps/api/plane/space/serializer/issue.py\tb93883f (parent)\n+++ apps/api/plane/space/serializer/issue.py\t69d5cd1 (commit)\n@@ -27,8 +27,13 @@\n     CommentReaction,\n     IssueVote,\n     IssueRelation,\n )\n+from plane.utils.content_validator import (\n+    validate_html_content,\n+    validate_json_content,\n+    validate_binary_data,\n+)\n \n \n class IssueStateFlatSerializer(BaseSerializer):\n     state_detail = StateLiteSerializer(read_only=True, source=\"state\")\n@@ -282,8 +287,25 @@\n             and data.get(\"target_date\", None) is not None\n             and data.get(\"start_date\", None) > data.get(\"target_date\", None)\n         ):\n             raise serializers.ValidationError(\"Start date cannot exceed target date\")\n+\n+        # Validate description content for security\n+        if \"description\" in data and data[\"description\"]:\n+            is_valid, error_msg = validate_json_content(data[\"description\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description\": error_msg})\n+\n+        if \"description_html\" in data and data[\"description_html\"]:\n+            is_valid, error_msg = validate_html_content(data[\"description_html\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_html\": error_msg})\n+\n+        if \"description_binary\" in data and data[\"description_binary\"]:\n+            is_valid, error_msg = validate_binary_data(data[\"description_binary\"])\n+            if not is_valid:\n+                raise serializers.ValidationError({\"description_binary\": error_msg})\n+\n         return data\n \n     def create(self, validated_data):\n         assignees = validated_data.pop(\"assignees\", None)\n"
        },
        {
          "path": "apps/api/plane/utils/content_validator.py",
          "status": "added",
          "diff": "Index: apps/api/plane/utils/content_validator.py\n===================================================================\n--- apps/api/plane/utils/content_validator.py\tb93883f (parent)\n+++ apps/api/plane/utils/content_validator.py\t69d5cd1 (commit)\n@@ -1,1 +1,357 @@\n-[NEW FILE]\n\\ No newline at end of file\n+# Python imports\n+import base64\n+import json\n+import re\n+\n+\n+# Maximum allowed size for binary data (10MB)\n+MAX_SIZE = 10 * 1024 * 1024\n+\n+# Maximum recursion depth to prevent stack overflow\n+MAX_RECURSION_DEPTH = 20\n+\n+# Dangerous text patterns that could indicate XSS or script injection\n+DANGEROUS_TEXT_PATTERNS = [\n+    r\"<script[^>]*>.*?</script>\",\n+    r\"javascript\\s*:\",\n+    r\"data\\s*:\\s*text/html\",\n+    r\"eval\\s*\\(\",\n+    r\"document\\s*\\.\",\n+    r\"window\\s*\\.\",\n+    r\"location\\s*\\.\",\n+]\n+\n+# Dangerous attribute patterns for HTML attributes\n+DANGEROUS_ATTR_PATTERNS = [\n+    r\"javascript\\s*:\",\n+    r\"data\\s*:\\s*text/html\",\n+    r\"eval\\s*\\(\",\n+    r\"alert\\s*\\(\",\n+    r\"document\\s*\\.\",\n+    r\"window\\s*\\.\",\n+]\n+\n+# Suspicious patterns for binary data content\n+SUSPICIOUS_BINARY_PATTERNS = [\n+    \"<html\",\n+    \"<!doctype\",\n+    \"<script\",\n+    \"javascript:\",\n+    \"data:\",\n+    \"<iframe\",\n+]\n+\n+# Malicious HTML patterns for content validation\n+MALICIOUS_HTML_PATTERNS = [\n+    # Script tags with any content\n+    r\"<script[^>]*>\",\n+    r\"</script>\",\n+    # JavaScript URLs in various attributes\n+    r'(?:href|src|action)\\s*=\\s*[\"\\']?\\s*javascript:',\n+    # Data URLs with text/html (potential XSS)\n+    r'(?:href|src|action)\\s*=\\s*[\"\\']?\\s*data:text/html',\n+    # Dangerous event handlers with JavaScript-like content\n+    r'on(?:load|error|click|focus|blur|change|submit|reset|select|resize|scroll|unload|beforeunload|hashchange|popstate|storage|message|offline|online)\\s*=\\s*[\"\\']?[^\"\\']*(?:javascript|alert|eval|document\\.|window\\.|location\\.|history\\.)[^\"\\']*[\"\\']?',\n+    # Object and embed tags that could load external content\n+    r\"<(?:object|embed)[^>]*(?:data|src)\\s*=\",\n+    # Base tag that could change relative URL resolution\n+    r\"<base[^>]*href\\s*=\",\n+    # Dangerous iframe sources\n+    r'<iframe[^>]*src\\s*=\\s*[\"\\']?(?:javascript:|data:text/html)',\n+    # Meta refresh redirects\n+    r'<meta[^>]*http-equiv\\s*=\\s*[\"\\']?refresh[\"\\']?',\n+    # Link tags - simplified patterns\n+    r'<link[^>]*rel\\s*=\\s*[\"\\']?stylesheet[\"\\']?',\n+    r'<link[^>]*href\\s*=\\s*[\"\\']?https?://',\n+    r'<link[^>]*href\\s*=\\s*[\"\\']?//',\n+    r'<link[^>]*href\\s*=\\s*[\"\\']?(?:data:|javascript:)',\n+    # Style tags with external imports\n+    r\"<style[^>]*>.*?@import.*?(?:https?://|//)\",\n+    # Link tags with dangerous rel types\n+    r'<link[^>]*rel\\s*=\\s*[\"\\']?(?:import|preload|prefetch|dns-prefetch|preconnect)[\"\\']?',\n+    # Forms with action attributes\n+    r\"<form[^>]*action\\s*=\",\n+]\n+\n+# Dangerous JavaScript patterns for event handlers\n+DANGEROUS_JS_PATTERNS = [\n+    r\"alert\\s*\\(\",\n+    r\"eval\\s*\\(\",\n+    r\"document\\s*\\.\",\n+    r\"window\\s*\\.\",\n+    r\"location\\s*\\.\",\n+    r\"fetch\\s*\\(\",\n+    r\"XMLHttpRequest\",\n+    r\"innerHTML\\s*=\",\n+    r\"outerHTML\\s*=\",\n+    r\"document\\.write\",\n+    r\"script\\s*>\",\n+]\n+\n+# HTML self-closing tags that don't need closing tags\n+SELF_CLOSING_TAGS = {\n+    \"img\",\n+    \"br\",\n+    \"hr\",\n+    \"input\",\n+    \"meta\",\n+    \"link\",\n+    \"area\",\n+    \"base\",\n+    \"col\",\n+    \"embed\",\n+    \"source\",\n+    \"track\",\n+    \"wbr\",\n+}\n+\n+\n+def validate_binary_data(data):\n+    \"\"\"\n+    Validate that binary data appears to be valid document format and doesn't contain malicious content.\n+\n+    Args:\n+        data (bytes or str): The binary data to validate, or base64-encoded string\n+\n+    Returns:\n+        tuple: (is_valid: bool, error_message: str or None)\n+    \"\"\"\n+    if not data:\n+        return True, None  # Empty is OK\n+\n+    # Handle base64-encoded strings by decoding them first\n+    if isinstance(data, str):\n+        try:\n+            binary_data = base64.b64decode(data)\n+        except Exception:\n+            return False, \"Invalid base64 encoding\"\n+    else:\n+        binary_data = data\n+\n+    # Size check - 10MB limit\n+    if len(binary_data) > MAX_SIZE:\n+        return False, \"Binary data exceeds maximum size limit (10MB)\"\n+\n+    # Basic format validation\n+    if len(binary_data) < 4:\n+        return False, \"Binary data too short to be valid document format\"\n+\n+    # Check for suspicious text patterns (HTML/JS)\n+    try:\n+        decoded_text = binary_data.decode(\"utf-8\", errors=\"ignore\")[:200]\n+        if any(\n+            pattern in decoded_text.lower() for pattern in SUSPICIOUS_BINARY_PATTERNS\n+        ):\n+            return False, \"Binary data contains suspicious content patterns\"\n+    except Exception:\n+        pass  # Binary data might not be decodable as text, which is fine\n+\n+    return True, None\n+\n+\n+def validate_html_content(html_content):\n+    \"\"\"\n+    Validate that HTML content is safe and doesn't contain malicious patterns.\n+\n+    Args:\n+        html_content (str): The HTML content to validate\n+\n+    Returns:\n+        tuple: (is_valid: bool, error_message: str or None)\n+    \"\"\"\n+    if not html_content:\n+        return True, None  # Empty is OK\n+\n+    # Size check - 10MB limit (consistent with binary validation)\n+    if len(html_content.encode(\"utf-8\")) > MAX_SIZE:\n+        return False, \"HTML content exceeds maximum size limit (10MB)\"\n+\n+    # Check for specific malicious patterns (simplified and more reliable)\n+    for pattern in MALICIOUS_HTML_PATTERNS:\n+        if re.search(pattern, html_content, re.IGNORECASE | re.DOTALL):\n+            return (\n+                False,\n+                f\"HTML content contains potentially malicious patterns: {pattern}\",\n+            )\n+\n+    # Additional check for inline event handlers that contain suspicious content\n+    # This is more permissive - only blocks if the event handler contains actual dangerous code\n+    event_handler_pattern = r'on\\w+\\s*=\\s*[\"\\']([^\"\\']*)[\"\\']'\n+    event_matches = re.findall(event_handler_pattern, html_content, re.IGNORECASE)\n+\n+    for handler_content in event_matches:\n+        for js_pattern in DANGEROUS_JS_PATTERNS:\n+            if re.search(js_pattern, handler_content, re.IGNORECASE):\n+                return (\n+                    False,\n+                    f\"HTML content contains dangerous JavaScript in event handler: {handler_content[:100]}\",\n+                )\n+\n+    # Basic HTML structure validation - check for common malformed tags\n+    try:\n+        # Count opening and closing tags for basic structure validation\n+        opening_tags = re.findall(r\"<(\\w+)[^>]*>\", html_content)\n+        closing_tags = re.findall(r\"</(\\w+)>\", html_content)\n+\n+        # Filter out self-closing tags from opening tags\n+        opening_tags_filtered = [\n+            tag for tag in opening_tags if tag.lower() not in SELF_CLOSING_TAGS\n+        ]\n+\n+        # Basic check - if we have significantly more opening than closing tags, it might be malformed\n+        if len(opening_tags_filtered) > len(closing_tags) + 10:  # Allow some tolerance\n+            return False, \"HTML content appears to be malformed (unmatched tags)\"\n+\n+    except Exception:\n+        # If HTML parsing fails, we'll allow it\n+        pass\n+\n+    return True, None\n+\n+\n+def validate_json_content(json_content):\n+    \"\"\"\n+    Validate that JSON content is safe and doesn't contain malicious patterns.\n+\n+    Args:\n+        json_content (dict): The JSON content to validate\n+\n+    Returns:\n+        tuple: (is_valid: bool, error_message: str or None)\n+    \"\"\"\n+    if not json_content:\n+        return True, None  # Empty is OK\n+\n+    try:\n+        # Size check - 10MB limit (consistent with other validations)\n+        json_str = json.dumps(json_content)\n+        if len(json_str.encode(\"utf-8\")) > MAX_SIZE:\n+            return False, \"JSON content exceeds maximum size limit (10MB)\"\n+\n+        # Basic structure validation for page description JSON\n+        if isinstance(json_content, dict):\n+            # Check for expected page description structure\n+            # This is based on ProseMirror/Tiptap JSON structure\n+            if \"type\" in json_content and json_content.get(\"type\") == \"doc\":\n+                # Valid document structure\n+                if \"content\" in json_content and isinstance(\n+                    json_content[\"content\"], list\n+                ):\n+                    # Recursively check content for suspicious patterns\n+                    is_valid, error_msg = _validate_json_content_array(\n+                        json_content[\"content\"]\n+                    )\n+                    if not is_valid:\n+                        return False, error_msg\n+            elif \"type\" not in json_content and \"content\" not in json_content:\n+                # Allow other JSON structures but validate for suspicious content\n+                is_valid, error_msg = _validate_json_content_recursive(json_content)\n+                if not is_valid:\n+                    return False, error_msg\n+        else:\n+            return False, \"JSON description must be a valid object\"\n+\n+    except (TypeError, ValueError) as e:\n+        return False, \"Invalid JSON structure\"\n+    except Exception as e:\n+        return False, \"Failed to validate JSON content\"\n+\n+    return True, None\n+\n+\n+def _validate_json_content_array(content, depth=0):\n+    \"\"\"\n+    Validate JSON content array for suspicious patterns.\n+\n+    Args:\n+        content (list): Array of content nodes to validate\n+        depth (int): Current recursion depth (default: 0)\n+\n+    Returns:\n+        tuple: (is_valid: bool, error_message: str or None)\n+    \"\"\"\n+    # Check recursion depth to prevent stack overflow\n+    if depth > MAX_RECURSION_DEPTH:\n+        return False, f\"Maximum recursion depth ({MAX_RECURSION_DEPTH}) exceeded\"\n+\n+    if not isinstance(content, list):\n+        return True, None\n+\n+    for node in content:\n+        if isinstance(node, dict):\n+            # Check text content for suspicious patterns (more targeted)\n+            if node.get(\"type\") == \"text\" and \"text\" in node:\n+                text_content = node[\"text\"]\n+                for pattern in DANGEROUS_TEXT_PATTERNS:\n+                    if re.search(pattern, text_content, re.IGNORECASE):\n+                        return (\n+                            False,\n+                            \"JSON content contains suspicious script patterns in text\",\n+                        )\n+\n+            # Check attributes for suspicious content (more targeted)\n+            if \"attrs\" in node and isinstance(node[\"attrs\"], dict):\n+                for attr_name, attr_value in node[\"attrs\"].items():\n+                    if isinstance(attr_value, str):\n+                        # Only check specific attributes that could be dangerous\n+                        if attr_name.lower() in [\n+                            \"href\",\n+                            \"src\",\n+                            \"action\",\n+                            \"onclick\",\n+                            \"onload\",\n+                            \"onerror\",\n+                        ]:\n+                            for pattern in DANGEROUS_ATTR_PATTERNS:\n+                                if re.search(pattern, attr_value, re.IGNORECASE):\n+                                    return (\n+                                        False,\n+                                        f\"JSON content contains dangerous pattern in {attr_name} attribute\",\n+                                    )\n+\n+            # Recursively check nested content\n+            if \"content\" in node and isinstance(node[\"content\"], list):\n+                is_valid, error_msg = _validate_json_content_array(\n+                    node[\"content\"], depth + 1\n+                )\n+                if not is_valid:\n+                    return False, error_msg\n+\n+    return True, None\n+\n+\n+def _validate_json_content_recursive(obj, depth=0):\n+    \"\"\"\n+    Recursively validate JSON object for suspicious content.\n+\n+    Args:\n+        obj: JSON object (dict, list, or primitive) to validate\n+        depth (int): Current recursion depth (default: 0)\n+\n+    Returns:\n+        tuple: (is_valid: bool, error_message: str or None)\n+    \"\"\"\n+    # Check recursion depth to prevent stack overflow\n+    if depth > MAX_RECURSION_DEPTH:\n+        return False, f\"Maximum recursion depth ({MAX_RECURSION_DEPTH}) exceeded\"\n+    if isinstance(obj, dict):\n+        for key, value in obj.items():\n+            if isinstance(value, str):\n+                # Check for dangerous patterns using module constants\n+                for pattern in DANGEROUS_TEXT_PATTERNS:\n+                    if re.search(pattern, value, re.IGNORECASE):\n+                        return (\n+                            False,\n+                            \"JSON content contains suspicious script patterns\",\n+                        )\n+            elif isinstance(value, (dict, list)):\n+                is_valid, error_msg = _validate_json_content_recursive(value, depth + 1)\n+                if not is_valid:\n+                    return False, error_msg\n+    elif isinstance(obj, list):\n+        for item in obj:\n+            is_valid, error_msg = _validate_json_content_recursive(item, depth + 1)\n+            if not is_valid:\n+                return False, error_msg\n+\n+    return True, None\n"
        }
      ]
    }
  ]
}